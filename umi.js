(function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/",n(n.s=0)})({"++zV":function(t,e,n){var r=n("I+eb"),i=n("eDxR"),o=n("glrk"),a=i.toKey,s=i.set;r({target:"Reflect",stat:!0},{defineMetadata:function(t,e,n){var r=arguments.length<4?void 0:a(arguments[3]);s(t,e,o(n),r)}})},"+2oP":function(t,e,n){"use strict";var r=n("I+eb"),i=n("hh1v"),o=n("6LWA"),a=n("I8vh"),s=n("UMSQ"),u=n("/GqU"),c=n("hBjN"),l=n("tiKp"),f=n("Hd5f"),h=n("rkAj"),p=f("slice"),d=h("slice",{ACCESSORS:!0,0:0,1:2}),v=l("species"),g=[].slice,m=Math.max;r({target:"Array",proto:!0,forced:!p||!d},{slice:function(t,e){var n,r,l,f=u(this),h=s(f.length),p=a(t,h),d=a(void 0===e?h:e,h);if(o(f)&&(n=f.constructor,"function"!=typeof n||n!==Array&&!o(n.prototype)?i(n)&&(n=n[v],null===n&&(n=void 0)):n=void 0,n===Array||void 0===n))return g.call(f,p,d);for(r=new(void 0===n?Array:n)(m(d-p,0)),l=0;p<d;p++,l++)p in f&&c(r,l,f[p]);return r.length=l,r}})},"+6XX":function(t,e,n){var r=n("y1pI");function i(t){return r(this.__data__,t)>-1}t.exports=i},"+K+b":function(t,e,n){var r=n("JHRd");function i(t){var e=new t.constructor(t.byteLength);return new r(e).set(new r(t)),e}t.exports=i},"+M1K":function(t,e,n){var r=n("ppGB");t.exports=function(t){var e=r(t);if(e<0)throw RangeError("The argument can't be less than 0");return e}},"+Qka":function(t,e,n){var r=n("fmRc"),i=n("t2Dn"),o=n("cq/+"),a=n("T1AV"),s=n("GoyQ"),u=n("mTTR"),c=n("itsj");function l(t,e,n,f,h){t!==e&&o(e,(function(o,u){if(h||(h=new r),s(o))a(t,e,u,n,l,f,h);else{var p=f?f(c(t,u),o,u+"",t,e,h):void 0;void 0===p&&(p=o),i(t,u,p)}}),u)}t.exports=l},"+YC+":function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));for(var r=[],i=0;i<6;i++)r[i]=[];var o=[];function a(t,e,n){s(t);for(var i=0;i<6;i++)if(!n||"0"!==n.charAt(i)){var a=r[i];if(o[0]=a[0]>0?e[1][0]:e[0][0],o[1]=a[1]>0?e[1][1]:e[0][1],o[2]=a[2]>0?e[1][2]:e[0][2],l(a,o)<0)return!1}return!0}function s(t){var e=t,n=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],l=e[6],f=e[7],h=e[8],p=e[9],d=e[10],v=e[11],g=e[12],m=e[13],y=e[14],_=e[15];c(r[0],a-n,f-s,v-h,_-g),c(r[1],a+n,f+s,v+h,_+g),c(r[2],a+i,f+u,v+p,_+m),c(r[3],a-i,f-u,v-p,_-m),c(r[4],a-o,f-l,v-d,_-y),c(r[5],a+o,f+l,v+d,_+y)}var u=1/6;function c(t,e,n,r,i){return t[0]=e*u,t[1]=n*u,t[2]=r*u,t[3]=i*u,t}function l(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]}},"+iFO":function(t,e,n){var r=n("dTAl"),i=n("LcsW"),o=n("6sVZ");function a(t){return"function"!=typeof t.constructor||o(t)?{}:r(i(t))}t.exports=a},"+wdc":function(t,e,n){"use strict";var r,i,o,a,s;if("undefined"===typeof window||"function"!==typeof MessageChannel){var u=null,c=null,l=function t(){if(null!==u)try{var n=e.unstable_now();u(!0,n),u=null}catch(r){throw setTimeout(t,0),r}},f=Date.now();e.unstable_now=function(){return Date.now()-f},r=function(t){null!==u?setTimeout(r,0,t):(u=t,setTimeout(l,0))},i=function(t,e){c=setTimeout(t,e)},o=function(){clearTimeout(c)},a=function(){return!1},s=e.unstable_forceFrameRate=function(){}}else{var h=window.performance,p=window.Date,d=window.setTimeout,v=window.clearTimeout;if("undefined"!==typeof console){var g=window.cancelAnimationFrame;"function"!==typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"),"function"!==typeof g&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills")}if("object"===typeof h&&"function"===typeof h.now)e.unstable_now=function(){return h.now()};else{var m=p.now();e.unstable_now=function(){return p.now()-m}}var y=!1,_=null,b=-1,x=5,w=0;a=function(){return e.unstable_now()>=w},s=function(){},e.unstable_forceFrameRate=function(t){0>t||125<t?console.error("forceFrameRate takes a positive int between 0 and 125, forcing framerates higher than 125 fps is not unsupported"):x=0<t?Math.floor(1e3/t):5};var E=new MessageChannel,S=E.port2;E.port1.onmessage=function(){if(null!==_){var t=e.unstable_now();w=t+x;try{_(!0,t)?S.postMessage(null):(y=!1,_=null)}catch(n){throw S.postMessage(null),n}}else y=!1},r=function(t){_=t,y||(y=!0,S.postMessage(null))},i=function(t,n){b=d((function(){t(e.unstable_now())}),n)},o=function(){v(b),b=-1}}function O(t,e){var n=t.length;t.push(e);t:for(;;){var r=n-1>>>1,i=t[r];if(!(void 0!==i&&0<A(i,e)))break t;t[r]=e,t[n]=i,n=r}}function C(t){return t=t[0],void 0===t?null:t}function T(t){var e=t[0];if(void 0!==e){var n=t.pop();if(n!==e){t[0]=n;t:for(var r=0,i=t.length;r<i;){var o=2*(r+1)-1,a=t[o],s=o+1,u=t[s];if(void 0!==a&&0>A(a,n))void 0!==u&&0>A(u,a)?(t[r]=u,t[s]=n,r=s):(t[r]=a,t[o]=n,r=o);else{if(!(void 0!==u&&0>A(u,n)))break t;t[r]=u,t[s]=n,r=s}}}return e}return null}function A(t,e){var n=t.sortIndex-e.sortIndex;return 0!==n?n:t.id-e.id}var k=[],M=[],P=1,R=null,j=3,I=!1,L=!1,N=!1;function D(t){for(var e=C(M);null!==e;){if(null===e.callback)T(M);else{if(!(e.startTime<=t))break;T(M),e.sortIndex=e.expirationTime,O(k,e)}e=C(M)}}function F(t){if(N=!1,D(t),!L)if(null!==C(k))L=!0,r(B);else{var e=C(M);null!==e&&i(F,e.startTime-t)}}function B(t,n){L=!1,N&&(N=!1,o()),I=!0;var r=j;try{for(D(n),R=C(k);null!==R&&(!(R.expirationTime>n)||t&&!a());){var s=R.callback;if(null!==s){R.callback=null,j=R.priorityLevel;var u=s(R.expirationTime<=n);n=e.unstable_now(),"function"===typeof u?R.callback=u:R===C(k)&&T(k),D(n)}else T(k);R=C(k)}if(null!==R)var c=!0;else{var l=C(M);null!==l&&i(F,l.startTime-n),c=!1}return c}finally{R=null,j=r,I=!1}}function z(t){switch(t){case 1:return-1;case 2:return 250;case 5:return 1073741823;case 4:return 1e4;default:return 5e3}}var U=s;e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(t){t.callback=null},e.unstable_continueExecution=function(){L||I||(L=!0,r(B))},e.unstable_getCurrentPriorityLevel=function(){return j},e.unstable_getFirstCallbackNode=function(){return C(k)},e.unstable_next=function(t){switch(j){case 1:case 2:case 3:var e=3;break;default:e=j}var n=j;j=e;try{return t()}finally{j=n}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=U,e.unstable_runWithPriority=function(t,e){switch(t){case 1:case 2:case 3:case 4:case 5:break;default:t=3}var n=j;j=t;try{return e()}finally{j=n}},e.unstable_scheduleCallback=function(t,n,a){var s=e.unstable_now();if("object"===typeof a&&null!==a){var u=a.delay;u="number"===typeof u&&0<u?s+u:s,a="number"===typeof a.timeout?a.timeout:z(t)}else a=z(t),u=s;return a=u+a,t={id:P++,callback:n,priorityLevel:t,startTime:u,expirationTime:a,sortIndex:-1},u>s?(t.sortIndex=u,O(M,t),null===C(k)&&t===C(M)&&(N?o():N=!0,i(F,u-s))):(t.sortIndex=a,O(k,t),L||I||(L=!0,r(B))),t},e.unstable_shouldYield=function(){var t=e.unstable_now();D(t);var n=C(k);return n!==R&&null!==R&&null!==n&&null!==n.callback&&n.startTime<=t&&n.expirationTime<R.expirationTime||a()},e.unstable_wrapCallback=function(t){var e=j;return function(){var n=j;j=e;try{return t.apply(this,arguments)}finally{j=n}}}},"+ywr":function(t,e,n){var r=n("dOgj");r("Uint32",(function(t){return function(e,n,r){return t(this,e,n,r)}}))},"/GqU":function(t,e,n){var r=n("RK3t"),i=n("HYAF");t.exports=function(t){return r(i(t))}},"/Yfv":function(t,e,n){var r=n("dOgj");r("Int8",(function(t){return function(e,n,r){return t(this,e,n,r)}}))},"/b8u":function(t,e,n){var r=n("STAE");t.exports=r&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},"/byt":function(t,e){t.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},"/qmn":function(t,e,n){var r=n("2oRo");t.exports=r.Promise},"/t/I":function(t,e,n){(function(e,n){!function(e){"use strict";var r,i,o="fulfilled",a="undefined",s=function(){var t=[],r=0;function o(){for(;t.length-r;){try{t[r]()}catch(n){e.console&&e.console.error(n)}t[r++]=i,1024==r&&(t.splice(0,1024),r=0)}}var s=function(){if(typeof MutationObserver===a)return typeof n!==a&&"function"==typeof n.nextTick?function(){n.nextTick(o)}:typeof setImmediate!==a?function(){setImmediate(o)}:function(){setTimeout(o,0)};var t=document.createElement("div");return new MutationObserver(o).observe(t,{attributes:!0}),function(){t.setAttribute("a",0)}}();return function(e){t.push(e),t.length-r==1&&s()}}();function u(t){if(!(this instanceof u))throw new TypeError("Zousan must be created with the new keyword");if("function"==typeof t){var e=this;try{t((function(t){e.resolve(t)}),(function(t){e.reject(t)}))}catch(t){e.reject(t)}}else if(0<arguments.length)throw new TypeError("Zousan resolver "+t+" is not a function")}function c(t,e){if("function"==typeof t.y)try{var n=t.y.call(i,e);t.p.resolve(n)}catch(e){t.p.reject(e)}else t.p.resolve(e)}function l(t,e){if("function"==typeof t.n)try{var n=t.n.call(i,e);t.p.resolve(n)}catch(e){t.p.reject(e)}else t.p.reject(e)}u.prototype={resolve:function(t){if(this.state===r){if(t===this)return this.reject(new TypeError("Attempt to resolve promise with self"));var e=this;if(t&&("function"==typeof t||"object"==typeof t))try{var n=!0,i=t.then;if("function"==typeof i)return void i.call(t,(function(t){n&&(n=!1,e.resolve(t))}),(function(t){n&&(n=!1,e.reject(t))}))}catch(i){return void(n&&this.reject(i))}this.state=o,this.v=t,e.c&&s((function(){for(var n=0,r=e.c.length;n<r;n++)c(e.c[n],t)}))}},reject:function(t){if(this.state===r){var n=this;this.state="rejected",this.v=t;var i=this.c;s(i?function(){for(var e=0,n=i.length;e<n;e++)l(i[e],t)}:function(){n.handled||!u.suppressUncaughtRejectionError&&e.console&&u.warn("You upset Zousan. Please catch rejections: ",t,t?t.stack:null)})}},then:function(t,e){var n=new u,i={y:t,n:e,p:n};if(this.state===r)this.c?this.c.push(i):this.c=[i];else{var a=this.state,f=this.v;this.handled=!0,s((function(){a===o?c(i,f):l(i,f)}))}return n},catch:function(t){return this.then(null,t)},finally:function(t){return this.then(t,t)},timeout:function(t,e){e=e||"Timeout";var n=this;return new u((function(r,i){setTimeout((function(){i(Error(e))}),t),n.then((function(t){r(t)}),(function(t){i(t)}))}))}},u.resolve=function(t){var e=new u;return e.resolve(t),e},u.reject=function(t){var e=new u;return e.c=[],e.reject(t),e},u.all=function(t){var e=[],n=0,r=new u;function i(i,o){i&&"function"==typeof i.then||(i=u.resolve(i)),i.then((function(i){e[o]=i,++n==t.length&&r.resolve(e)}),(function(t){r.reject(t)}))}for(var o=0;o<t.length;o++)i(t[o],o);return t.length||r.resolve(e),r},u.warn=console.warn,typeof t!=a&&t.exports&&(t.exports=u),e.define&&e.define.amd&&e.define([],(function(){return u})),(e.Zousan=u).soon=s}("undefined"!=typeof e?e:this)}).call(this,n("IyRk"),n("Q2Ig"))},0:function(t,e,n){t.exports=n("tB8F")},"03A+":function(t,e,n){var r=n("JTzB"),i=n("ExA7"),o=Object.prototype,a=o.hasOwnProperty,s=o.propertyIsEnumerable,u=r(function(){return arguments}())?r:function(t){return i(t)&&a.call(t,"callee")&&!s.call(t,"callee")};t.exports=u},"07d7":function(t,e,n){var r=n("AO7/"),i=n("busE"),o=n("sEFX");r||i(Object.prototype,"toString",o,{unsafe:!0})},"0BK2":function(t,e){t.exports={}},"0Bia":function(t,e,n){"use strict";n.r(e);var r=n("q1tI"),i=n.n(r),o=n("dEAq"),a=n("9kvl"),s=(n("mdU6"),function(t){var e=t.location,n=Object(r["useContext"])(o["context"]),s=n.base,u=n.locale,c=n.config.locales,l=c.find((function(t){var e=t.name;return e!==u}));function f(t){var n=s.replace("/".concat(u),""),r=e.pathname.replace(new RegExp("^".concat(s,"(/|$)")),"".concat(n,"$1"))||"/";if(t!==c[0].name){var i="".concat(n,"/").concat(t).replace(/\/\//,"/"),o=e.pathname.replace(s.replace(/^\/$/,"//"),"");return"".concat(i).concat(o).replace(/\/$/,"")}return r}return l?i.a.createElement("div",{className:"__dumi-default-locale-select","data-locale-count":c.length},c.length>2?i.a.createElement("select",{value:u,onChange:function(t){return a["a"].push(f(t.target.value))}},c.map((function(t){return i.a.createElement("option",{value:t.name,key:t.name},t.label)}))):i.a.createElement(o["Link"],{to:f(l.name)},l.label)):null}),u=s,c=(n("fVI1"),function(t){var e=t.onMobileMenuClick,n=t.navPrefix,a=t.location,s=t.darkPrefix,c=Object(r["useContext"])(o["context"]),l=c.base,f=c.config,h=f.mode,p=f.title,d=f.logo,v=c.nav;return i.a.createElement("div",{className:"__dumi-default-navbar","data-mode":h},i.a.createElement("button",{className:"__dumi-default-navbar-toggle",onClick:e}),i.a.createElement(o["Link"],{className:"__dumi-default-navbar-logo",style:{backgroundImage:d&&"url('".concat(d,"')")},to:l,"data-plaintext":!1===d||void 0},p),i.a.createElement("nav",null,n,v.map((function(t){var e,n=Boolean(null===(e=t.children)||void 0===e?void 0:e.length)&&i.a.createElement("ul",null,t.children.map((function(t){return i.a.createElement("li",{key:t.path},i.a.createElement(o["NavLink"],{to:t.path},t.title))})));return i.a.createElement("span",{key:t.title||t.path},t.path?i.a.createElement(o["NavLink"],{to:t.path,key:t.path},t.title):t.title,n)})),i.a.createElement("div",{className:"__dumi-default-navbar-tool"},i.a.createElement(u,{location:a}),s)))}),l=c,f=(n("hJnp"),["slugs"]);function h(){return h=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},h.apply(this,arguments)}function p(t,e){if(null==t)return{};var n,r,i=d(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function d(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}var v=function(t){var e=t.slugs,n=p(t,f);return i.a.createElement("ul",h({role:"slug-list"},n),e.filter((function(t){var e=t.depth;return e>1&&e<4})).map((function(t){return i.a.createElement("li",{key:t.heading,title:t.value,"data-depth":t.depth},i.a.createElement(o["AnchorLink"],{to:"#".concat(t.heading)},i.a.createElement("span",null,t.value)))})))},g=v,m=(n("Mpie"),function(t){var e=t.mobileMenuCollapsed,n=t.location,a=t.darkPrefix,s=Object(r["useContext"])(o["context"]),c=s.config,l=c.logo,f=c.title,h=c.description,p=c.mode,d=c.repository.url,v=s.menu,m=s.nav,y=s.base,_=s.meta,b=Boolean((_.hero||_.features||_.gapless)&&"site"===p)||!1===_.sidemenu||void 0;return i.a.createElement("div",{className:"__dumi-default-menu","data-mode":p,"data-hidden":b,"data-mobile-show":!e||void 0},i.a.createElement("div",{className:"__dumi-default-menu-inner"},i.a.createElement("div",{className:"__dumi-default-menu-header"},i.a.createElement(o["Link"],{to:y,className:"__dumi-default-menu-logo",style:{backgroundImage:l&&"url('".concat(l,"')")}}),i.a.createElement("h1",null,f),i.a.createElement("p",null,h),/github\.com/.test(d)&&"doc"===p&&i.a.createElement("p",null,i.a.createElement("object",{type:"image/svg+xml",data:"https://img.shields.io/github/stars".concat(d.match(/((\/[^\/]+){2})$/)[1],"?style=social")}))),i.a.createElement("div",{className:"__dumi-default-menu-mobile-area"},!!m.length&&i.a.createElement("ul",{className:"__dumi-default-menu-nav-list"},m.map((function(t){var e,n=Boolean(null===(e=t.children)||void 0===e?void 0:e.length)&&i.a.createElement("ul",null,t.children.map((function(t){return i.a.createElement("li",{key:t.path||t.title},i.a.createElement(o["NavLink"],{to:t.path},t.title))})));return i.a.createElement("li",{key:t.path||t.title},t.path?i.a.createElement(o["NavLink"],{to:t.path},t.title):t.title,n)}))),i.a.createElement(u,{location:n}),a),i.a.createElement("ul",{className:"__dumi-default-menu-list"},!b&&v.map((function(t){var e,r=Boolean(null===(e=_.slugs)||void 0===e?void 0:e.length),a=t.children&&Boolean(t.children.length),s="menu"===_.toc&&!a&&r&&t.path===n.pathname.replace(/([^^])\/$/,"$1"),u=a?t.children.map((function(t){return t.path})):[t.path,n.pathname.startsWith("".concat(t.path,"/"))&&_.title===t.title?n.pathname:null];return i.a.createElement("li",{key:t.path||t.title},i.a.createElement(o["NavLink"],{to:t.path,isActive:function(){return u.includes(n.pathname)}},t.title),Boolean(t.children&&t.children.length)&&i.a.createElement("ul",null,t.children.map((function(t){return i.a.createElement("li",{key:t.path},i.a.createElement(o["NavLink"],{to:t.path,exact:!0},i.a.createElement("span",null,t.title)),Boolean("menu"===_.toc&&"undefined"!==typeof window&&t.path===n.pathname&&r)&&i.a.createElement(g,{slugs:_.slugs}))}))),s&&i.a.createElement(g,{slugs:_.slugs}))})))))}),y=m;n("AK2Z");function _(){return _=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},_.apply(this,arguments)}function b(t,e){return O(t)||S(t,e)||w(t,e)||x()}function x(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function w(t,e){if(t){if("string"===typeof t)return E(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?E(t,e):void 0}}function E(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function S(t,e){var n=null==t?null:"undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(t);!(a=(r=n.next()).done);a=!0)if(o.push(r.value),e&&o.length===e)break}catch(u){s=!0,i=u}finally{try{a||null==n["return"]||n["return"]()}finally{if(s)throw i}}return o}}function O(t){if(Array.isArray(t))return t}var C=function(t,e){var n=e.toLowerCase().indexOf(t.toLowerCase()),r=t.length;return i.a.createElement(i.a.Fragment,null,e.substring(0,n),i.a.createElement("span",{className:"__dumi-default-search-highlight"},e.substring(n,n+r)),e.substring(n+r,e.length))},T=function(){var t=Object(r["useState"])(""),e=b(t,2),n=e[0],a=e[1],s=Object(r["useState"])([]),u=b(s,2),c=u[0],l=u[1],f=Object(r["useRef"])(),h=Object(o["useSearch"])(n),p=i.a.createElement("svg",{className:"__dumi-default-search-empty",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"2347",width:"32",height:"32"},i.a.createElement("path",{d:"M855.6 427.2H168.5c-12.7 0-24.4 6.9-30.6 18L4.4 684.7C1.5 689.9 0 695.8 0 701.8v287.1c0 19.4 15.7 35.1 35.1 35.1H989c19.4 0 35.1-15.7 35.1-35.1V701.8c0-6-1.5-11.8-4.4-17.1L886.2 445.2c-6.2-11.1-17.9-18-30.6-18zM673.4 695.6c-16.5 0-30.8 11.5-34.3 27.7-12.7 58.5-64.8 102.3-127.2 102.3s-114.5-43.8-127.2-102.3c-3.5-16.1-17.8-27.7-34.3-27.7H119c-26.4 0-43.3-28-31.1-51.4l81.7-155.8c6.1-11.6 18-18.8 31.1-18.8h622.4c13 0 25 7.2 31.1 18.8l81.7 155.8c12.2 23.4-4.7 51.4-31.1 51.4H673.4zM819.9 209.5c-1-1.8-2.1-3.7-3.2-5.5-9.8-16.6-31.1-22.2-47.8-12.6L648.5 261c-17 9.8-22.7 31.6-12.6 48.4 0.9 1.4 1.7 2.9 2.5 4.4 9.5 17 31.2 22.8 48 13L807 257.3c16.7-9.7 22.4-31 12.9-47.8zM375.4 261.1L255 191.6c-16.7-9.6-38-4-47.8 12.6-1.1 1.8-2.1 3.6-3.2 5.5-9.5 16.8-3.8 38.1 12.9 47.8L337.3 327c16.9 9.7 38.6 4 48-13.1 0.8-1.5 1.7-2.9 2.5-4.4 10.2-16.8 4.5-38.6-12.4-48.4zM512 239.3h2.5c19.5 0.3 35.5-15.5 35.5-35.1v-139c0-19.3-15.6-34.9-34.8-35.1h-6.4C489.6 30.3 474 46 474 65.2v139c0 19.5 15.9 35.4 35.5 35.1h2.5z"}));return Object(r["useEffect"])((function(){Array.isArray(h)?l(h):"function"===typeof h&&h(".".concat(f.current.className))}),[h]),i.a.createElement("div",{className:"__dumi-default-search"},i.a.createElement("input",_({className:"__dumi-default-search-input",type:"search",ref:f},Array.isArray(h)?{value:n,onChange:function(t){return a(t.target.value)}}:{})),i.a.createElement("ul",null,c.length>0&&c.map((function(t){var e;return i.a.createElement("li",{key:t.path,onClick:function(){return a("")}},i.a.createElement(o["AnchorLink"],{to:t.path},(null===(e=t.parent)||void 0===e?void 0:e.title)&&i.a.createElement("span",null,t.parent.title),C(n,t.title)))})),0===c.length&&n&&i.a.createElement("li",{style:{textAlign:"center"}},p)))};n("Zkgb");function A(t,e){return j(t)||R(t,e)||M(t,e)||k()}function k(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function M(t,e){if(t){if("string"===typeof t)return P(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?P(t,e):void 0}}function P(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function R(t,e){var n=null==t?null:"undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(t);!(a=(r=n.next()).done);a=!0)if(o.push(r.value),e&&o.length===e)break}catch(u){s=!0,i=u}finally{try{a||null==n["return"]||n["return"]()}finally{if(s)throw i}}return o}}function j(t){if(Array.isArray(t))return t}var I=function(t){var e=t.darkSwitch,n=t.onDarkSwitchClick,r=t.isSideMenu,a=["dark","light","auto"],s=Object(o["usePrefersColor"])(),u=A(s,2),c=u[0],l=u[1],f=c,h=i.a.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"4026",width:"22",height:"22"},i.a.createElement("path",{d:"M915.2 476.16h-43.968c-24.704 0-44.736 16-44.736 35.84s20.032 35.904 44.736 35.904H915.2c24.768 0 44.8-16.064 44.8-35.904s-20.032-35.84-44.8-35.84zM512 265.6c-136.704 0-246.464 109.824-246.464 246.4 0 136.704 109.76 246.464 246.464 246.464S758.4 648.704 758.4 512c0-136.576-109.696-246.4-246.4-246.4z m0 425.6c-99.008 0-179.2-80.128-179.2-179.2 0-98.944 80.192-179.2 179.2-179.2S691.2 413.056 691.2 512c0 99.072-80.192 179.2-179.2 179.2zM197.44 512c0-19.84-19.136-35.84-43.904-35.84H108.8c-24.768 0-44.8 16-44.8 35.84s20.032 35.904 44.8 35.904h44.736c24.768 0 43.904-16.064 43.904-35.904zM512 198.464c19.776 0 35.84-20.032 35.84-44.8v-44.8C547.84 84.032 531.84 64 512 64s-35.904 20.032-35.904 44.8v44.8c0 24.768 16.128 44.864 35.904 44.864z m0 627.136c-19.776 0-35.904 20.032-35.904 44.8v44.736C476.096 940.032 492.16 960 512 960s35.84-20.032 35.84-44.8v-44.736c0-24.768-16.064-44.864-35.84-44.864z m329.92-592.832c17.472-17.536 20.288-43.072 6.4-57.024-14.016-14.016-39.488-11.2-57.024 6.336-4.736 4.864-26.496 26.496-31.36 31.36-17.472 17.472-20.288 43.008-6.336 57.024 13.952 14.016 39.488 11.2 57.024-6.336 4.8-4.864 26.496-26.56 31.296-31.36zM213.376 759.936c-4.864 4.8-26.56 26.624-31.36 31.36-17.472 17.472-20.288 42.944-6.4 56.96 14.016 13.952 39.552 11.2 57.024-6.336 4.8-4.736 26.56-26.496 31.36-31.36 17.472-17.472 20.288-43.008 6.336-56.96-14.016-13.952-39.552-11.072-56.96 6.336z m19.328-577.92c-17.536-17.536-43.008-20.352-57.024-6.336-14.08 14.016-11.136 39.488 6.336 57.024 4.864 4.864 26.496 26.56 31.36 31.424 17.536 17.408 43.008 20.288 56.96 6.336 14.016-14.016 11.264-39.488-6.336-57.024-4.736-4.864-26.496-26.56-31.296-31.424z m527.168 628.608c4.864 4.864 26.624 26.624 31.36 31.424 17.536 17.408 43.072 20.224 57.088 6.336 13.952-14.016 11.072-39.552-6.4-57.024-4.864-4.8-26.56-26.496-31.36-31.36-17.472-17.408-43.072-20.288-57.024-6.336-13.952 14.016-11.008 39.488 6.336 56.96z","p-id":"4027"})),p=i.a.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"3854",width:"22",height:"22"},i.a.createElement("path",{d:"M991.816611 674.909091a69.166545 69.166545 0 0 0-51.665455-23.272727 70.795636 70.795636 0 0 0-27.438545 5.585454A415.674182 415.674182 0 0 1 754.993338 698.181818c-209.594182 0-393.472-184.785455-393.472-395.636363 0-52.363636 38.539636-119.621818 69.515637-173.614546 4.887273-8.610909 9.634909-16.756364 14.103272-24.901818A69.818182 69.818182 0 0 0 384.631156 0a70.842182 70.842182 0 0 0-27.438545 5.585455C161.678429 90.298182 14.362065 307.898182 14.362065 512c0 282.298182 238.824727 512 532.38691 512a522.286545 522.286545 0 0 0 453.957818-268.334545A69.818182 69.818182 0 0 0 991.816611 674.909091zM546.679156 954.181818c-248.785455 0-462.941091-192-462.941091-442.181818 0-186.647273 140.637091-372.829091 300.939637-442.181818-36.817455 65.629091-92.578909 151.970909-92.578909 232.727273 0 250.181818 214.109091 465.454545 462.917818 465.454545a488.331636 488.331636 0 0 0 185.181091-46.545455 453.003636 453.003636 0 0 1-393.565091 232.727273z m103.656728-669.323636l-14.266182 83.781818a34.909091 34.909091 0 0 0 50.362182 36.770909l74.775272-39.563636 74.752 39.563636a36.142545 36.142545 0 0 0 16.174546 3.956364 34.909091 34.909091 0 0 0 34.210909-40.727273l-14.289455-83.781818 60.509091-59.345455a35.025455 35.025455 0 0 0-19.223272-59.578182l-83.61891-12.101818-37.376-76.101818a34.56 34.56 0 0 0-62.254545 0l-37.376 76.101818-83.618909 12.101818a34.909091 34.909091 0 0 0-19.246546 59.578182z m70.423272-64.698182a34.280727 34.280727 0 0 0 26.135273-19.083636l14.312727-29.090909 14.336 29.090909a34.257455 34.257455 0 0 0 26.135273 19.083636l32.046546 4.887273-23.272728 22.574545a35.234909 35.234909 0 0 0-10.007272 30.952727l5.46909 32.116364-28.625454-15.127273a34.490182 34.490182 0 0 0-32.302546 0l-28.695272 15.127273 5.469091-32.116364a35.141818 35.141818 0 0 0-9.984-30.952727l-23.272728-22.574545z","p-id":"3855"})),d=i.a.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"11002",width:"22",height:"22"},i.a.createElement("path",{d:"M127.658667 492.885333c0-51.882667 10.24-101.717333 30.378666-149.162666s47.786667-88.064 81.92-122.538667 75.093333-61.781333 122.538667-81.92 96.938667-30.378667 149.162667-30.378667 101.717333 10.24 149.162666 30.378667 88.405333 47.786667 122.88 81.92 61.781333 75.093333 81.92 122.538667 30.378667 96.938667 30.378667 149.162666-10.24 101.717333-30.378667 149.162667-47.786667 88.405333-81.92 122.88-75.093333 61.781333-122.88 81.92-97.28 30.378667-149.162666 30.378667-101.717333-10.24-149.162667-30.378667-88.064-47.786667-122.538667-81.92-61.781333-75.093333-81.92-122.88-30.378667-96.938667-30.378666-149.162667z m329.045333 0c0 130.048 13.994667 244.394667 41.984 343.381334h12.970667c46.762667 0 91.136-9.216 133.461333-27.306667s78.848-42.666667 109.568-73.386667 54.954667-67.242667 73.386667-109.568 27.306667-86.698667 27.306666-133.461333c0-46.421333-9.216-90.794667-27.306666-133.12s-42.666667-78.848-73.386667-109.568-67.242667-54.954667-109.568-73.386667-86.698667-27.306667-133.461333-27.306666h-11.605334c-28.672 123.562667-43.349333 237.909333-43.349333 343.722666z","p-id":"11003"})),v=a.filter((function(t){return t!==f})),g=function(t,e){!r&&n&&n(t),e!==f&&l(e)},m=function(t){switch(t){case"dark":return i.a.createElement("button",{key:"dumi-dark-btn-moon",title:"Dark theme",onClick:function(e){return g(e,t)},className:"__dumi-default-dark-moon ".concat(t===f?"__dumi-default-dark-switch-active":"")},p);case"light":return i.a.createElement("button",{key:"dumi-dark-btn-sun",title:"Light theme",onClick:function(e){return g(e,t)},className:"__dumi-default-dark-sun ".concat(t===f?"__dumi-default-dark-switch-active":"")},h);case"auto":return i.a.createElement("button",{key:"dumi-dark-btn-auto",title:"Default to system",onClick:function(e){return g(e,t)},className:"__dumi-default-dark-auto ".concat(t===f?"__dumi-default-dark-switch-active":"")},d);default:}};return i.a.createElement("div",{className:"__dumi-default-dark"},i.a.createElement("div",{className:"__dumi-default-dark-switch ".concat(!r&&e?"__dumi-default-dark-switch-open":"")},r?a.map((function(t){return m(t)})):m(f)),!r&&e&&i.a.createElement("div",{className:"__dumi-default-dark-switch-list"},v.map((function(t){return m(t)}))))},L=I;n("AQPS");function N(t,e){return U(t)||z(t,e)||F(t,e)||D()}function D(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function F(t,e){if(t){if("string"===typeof t)return B(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?B(t,e):void 0}}function B(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function z(t,e){var n=null==t?null:"undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(t);!(a=(r=n.next()).done);a=!0)if(o.push(r.value),e&&o.length===e)break}catch(u){s=!0,i=u}finally{try{a||null==n["return"]||n["return"]()}finally{if(s)throw i}}return o}}function U(t){if(Array.isArray(t))return t}var V=function(t){return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"__dumi-default-layout-hero"},t.image&&i.a.createElement("img",{src:t.image}),i.a.createElement("h1",null,t.title),i.a.createElement("div",{dangerouslySetInnerHTML:{__html:t.desc}}),t.actions&&t.actions.map((function(t){return i.a.createElement(o["Link"],{to:t.link,key:t.text},i.a.createElement("button",{type:"button"},t.text))}))))},H=function(t){return i.a.createElement("div",{className:"__dumi-default-layout-features"},t.map((function(t){return i.a.createElement("dl",{key:t.title,style:{backgroundImage:t.icon?"url(".concat(t.icon,")"):void 0}},t.link?i.a.createElement(o["Link"],{to:t.link},i.a.createElement("dt",null,t.title)):i.a.createElement("dt",null,t.title),i.a.createElement("dd",{dangerouslySetInnerHTML:{__html:t.desc}}))})))},G=function(t){var e,n,a=t.children,s=t.location,u=Object(r["useContext"])(o["context"]),c=u.config,f=c.mode,h=c.repository,p=(u.nav,u.meta),d=u.locale,v=h.url,m=h.branch,_=h.platform,b=Object(r["useState"])(!0),x=N(b,2),w=x[0],E=x[1],S=Object(r["useState"])(!1),O=N(S,2),C=O[0],A=O[1],k="site"===f,M=k&&p.hero,P=k&&p.features,R=!1!==p.sidemenu&&!M&&!P&&!p.gapless,j=!M&&!P&&Boolean(null===(e=p.slugs)||void 0===e?void 0:e.length)&&("content"===p.toc||void 0===p.toc)&&!p.gapless,I=/^zh|cn$/i.test(d),D=new Date(p.updatedTime),F="".concat(D.toLocaleDateString([],{hour12:!1})," ").concat(D.toLocaleTimeString([],{hour12:!1})),B={github:"GitHub",gitlab:"GitLab"}[(null===(n=(v||"").match(/(github|gitlab)/))||void 0===n?void 0:n[1])||"nothing"]||_;return i.a.createElement("div",{className:"__dumi-default-layout","data-route":s.pathname,"data-show-sidemenu":String(R),"data-show-slugs":String(j),"data-site-mode":k,"data-gapless":String(!!p.gapless),onClick:function(){A(!1),w||E(!0)}},i.a.createElement(l,{location:s,navPrefix:i.a.createElement(T,null),darkPrefix:i.a.createElement(L,{darkSwitch:C,onDarkSwitchClick:function(t){A((function(t){return!t})),t.stopPropagation()},isSideMenu:!1}),onMobileMenuClick:function(t){E((function(t){return!t})),t.stopPropagation()}}),i.a.createElement(y,{darkPrefix:i.a.createElement(L,{darkSwitch:C,isSideMenu:!0}),mobileMenuCollapsed:w,location:s}),j&&i.a.createElement(g,{slugs:p.slugs,className:"__dumi-default-layout-toc"}),M&&V(p.hero),P&&H(p.features),i.a.createElement("div",{className:"__dumi-default-layout-content"},a,!M&&!P&&p.filePath&&!p.gapless&&i.a.createElement("div",{className:"__dumi-default-layout-footer-meta"},B&&i.a.createElement(o["Link"],{to:"".concat(v,"/edit/").concat(m,"/").concat(p.filePath)},I?"\u5728 ".concat(B," \u4e0a\u7f16\u8f91\u6b64\u9875"):"Edit this doc on ".concat(B)),i.a.createElement("span",{"data-updated-text":I?"\u6700\u540e\u66f4\u65b0\u65f6\u95f4\uff1a":"Last update: "},F)),(M||P)&&p.footer&&i.a.createElement("div",{className:"__dumi-default-layout-footer",dangerouslySetInnerHTML:{__html:p.footer}})))};e["default"]=G},"0Cz8":function(t,e,n){var r=n("Xi7e"),i=n("ebwN"),o=n("e4Nc"),a=200;function s(t,e){var n=this.__data__;if(n instanceof r){var s=n.__data__;if(!i||s.length<a-1)return s.push([t,e]),this.size=++n.size,this;n=this.__data__=new o(s)}return n.set(t,e),this.size=n.size,this}t.exports=s},"0Dky":function(t,e){t.exports=function(t){try{return!!t()}catch(e){return!0}}},"0GbY":function(t,e,n){var r=n("Qo9l"),i=n("2oRo"),o=function(t){return"function"==typeof t?t:void 0};t.exports=function(t,e){return arguments.length<2?o(r[t])||o(i[t]):r[t]&&r[t][e]||i[t]&&i[t][e]}},"0eef":function(t,e,n){"use strict";var r={}.propertyIsEnumerable,i=Object.getOwnPropertyDescriptor,o=i&&!r.call({1:2},1);e.f=o?function(t){var e=i(this,t);return!!e&&e.enumerable}:r},"0gSV":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.tagged=void 0;var r=n("GXnB"),i=n("Ztfv");function o(t,e){return function(n,o,a){var s=new r.Metadata(t,e);"number"===typeof a?i.tagParameter(n,o,a,s):i.tagProperty(n,o,s)}}e.tagged=o},"0q/z":function(t,e,n){"use strict";var r=n("I+eb"),i=n("xDBR"),o=n("glrk"),a=n("A2ZE"),s=n("Sssf"),u=n("ImZN");r({target:"Map",proto:!0,real:!0,forced:i},{find:function(t){var e=o(this),n=s(e),r=a(t,arguments.length>1?arguments[1]:void 0,3);return u(n,(function(t,n){if(r(n,t,e))return u.stop(n)}),void 0,!0,!0).result}})},"0rvr":function(t,e,n){var r=n("glrk"),i=n("O741");t.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,n={};try{t=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set,t.call(n,[]),e=n instanceof Array}catch(o){}return function(n,o){return r(n),i(o),e?t.call(n,o):n.__proto__=o,n}}():void 0)},"0ycA":function(t,e){function n(){return[]}t.exports=n},"14Sl":function(t,e,n){"use strict";n("rB9j");var r=n("busE"),i=n("0Dky"),o=n("tiKp"),a=n("kmMV"),s=n("kRJp"),u=o("species"),c=!i((function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")})),l=function(){return"$0"==="a".replace(/./,"$0")}(),f=o("replace"),h=function(){return!!/./[f]&&""===/./[f]("a","$0")}(),p=!i((function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var n="ab".split(t);return 2!==n.length||"a"!==n[0]||"b"!==n[1]}));t.exports=function(t,e,n,f){var d=o(t),v=!i((function(){var e={};return e[d]=function(){return 7},7!=""[t](e)})),g=v&&!i((function(){var e=!1,n=/a/;return"split"===t&&(n={},n.constructor={},n.constructor[u]=function(){return n},n.flags="",n[d]=/./[d]),n.exec=function(){return e=!0,null},n[d](""),!e}));if(!v||!g||"replace"===t&&(!c||!l||h)||"split"===t&&!p){var m=/./[d],y=n(d,""[t],(function(t,e,n,r,i){return e.exec===a?v&&!i?{done:!0,value:m.call(e,n,r)}:{done:!0,value:t.call(n,e,r)}:{done:!1}}),{REPLACE_KEEPS_$0:l,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:h}),_=y[0],b=y[1];r(String.prototype,t,_),r(RegExp.prototype,d,2==e?function(t,e){return b.call(t,this,e)}:function(t){return b.call(t,this)})}f&&s(RegExp.prototype[d],"sham",!0)}},"16Al":function(t,e,n){"use strict";var r=n("WbBG");function i(){}function o(){}o.resetWarningCache=i,t.exports=function(){function t(t,e,n,i,o,a){if(a!==r){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function e(){return t}t.isRequired=t;var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:o,resetWarningCache:i};return n.PropTypes=n,n}},"17x9":function(t,e,n){t.exports=n("16Al")()},"1E5z":function(t,e,n){var r=n("m/L8").f,i=n("UTVS"),o=n("tiKp"),a=o("toStringTag");t.exports=function(t,e,n){t&&!i(t=n?t:t.prototype,a)&&r(t,a,{configurable:!0,value:e})}},"1OyB":function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}n.d(e,"a",(function(){return r}))},"1Y/n":function(t,e,n){var r=n("HAuM"),i=n("ewvW"),o=n("RK3t"),a=n("UMSQ"),s=function(t){return function(e,n,s,u){r(n);var c=i(e),l=o(c),f=a(c.length),h=t?f-1:0,p=t?-1:1;if(s<2)while(1){if(h in l){u=l[h],h+=p;break}if(h+=p,t?h<0:f<=h)throw TypeError("Reduce of empty array with no initial value")}for(;t?h>=0:f>h;h+=p)h in l&&(u=n(u,l[h],h,c));return u}};t.exports={left:s(!1),right:s(!0)}},"1hJj":function(t,e,n){var r=n("e4Nc"),i=n("ftKO"),o=n("3A9y");function a(t){var e=-1,n=null==t?0:t.length;this.__data__=new r;while(++e<n)this.add(t[e])}a.prototype.add=a.prototype.push=i,a.prototype.has=o,t.exports=a},"1kQv":function(t,e,n){var r=n("I+eb"),i=n("qY7S");r({target:"Set",stat:!0},{from:i})},"27RR":function(t,e,n){var r=n("I+eb"),i=n("g6v/"),o=n("Vu81"),a=n("/GqU"),s=n("Bs8V"),u=n("hBjN");r({target:"Object",stat:!0,sham:!i},{getOwnPropertyDescriptors:function(t){var e,n,r=a(t),i=s.f,c=o(r),l={},f=0;while(c.length>f)n=i(r,e=c[f++]),void 0!==n&&u(l,e,n);return l}})},"2B1R":function(t,e,n){"use strict";var r=n("I+eb"),i=n("tycR").map,o=n("Hd5f"),a=n("rkAj"),s=o("map"),u=a("map");r({target:"Array",proto:!0,forced:!s||!u},{map:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}})},"2N97":function(t,e,n){"use strict";var r=n("xbqb")["default"],i=n("Lw8S")["default"];function o(){var t=n("q1tI");return o=function(){return t},t}function a(t,e){return f(t)||l(t,e)||u(t,e)||s()}function s(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function u(t,e){if(t){if("string"===typeof t)return c(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(t,e):void 0}}function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function l(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o,a,s=[],u=!0,c=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);u=!0);}catch(l){c=!0,i=l}finally{try{if(!u&&null!=n["return"]&&(a=n["return"](),Object(a)!==a))return}finally{if(c)throw i}}return s}}function f(t){if(Array.isArray(t))return t}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=void 0;var h,p="data-prefers-color",d="dumi:prefers-color",v=function(){function t(){var e=this;r(this,t),this.color=void 0,this.callbacks=[],this.color=localStorage.getItem(d)||document.documentElement.getAttribute(p),["light","dark"].forEach((function(t){var n=e.getColorMedia(t),r=function(n){n.matches&&"auto"===e.color&&(document.documentElement.setAttribute(p,t),e.applyCallbacks())};n.addEventListener?n.addEventListener("change",r):n.addListener&&n.addListener(r)}))}return i(t,[{key:"getColorMedia",value:function(t){return window.matchMedia("(prefers-color-scheme: ".concat(t,")"))}},{key:"isColorMode",value:function(t){return this.getColorMedia(t).matches}},{key:"applyCallbacks",value:function(){var t=this;this.callbacks.forEach((function(e){return e(t.color)}))}},{key:"listen",value:function(t){this.callbacks.push(t)}},{key:"unlisten",value:function(t){this.callbacks.splice(this.callbacks.indexOf(t),1)}},{key:"set",value:function(t){return this.color=t,localStorage.setItem(d,t),this.applyCallbacks(),"auto"===t?document.documentElement.setAttribute(p,this.isColorMode("dark")?"dark":"light"):document.documentElement.setAttribute(p,t),t}}]),t}(),g=function(){var t=(0,o().useState)(),e=a(t,2),n=e[0],r=e[1],i=(0,o().useCallback)((function(t){h.set(t)}),[]);return(0,o().useEffect)((function(){return h=h||new v,h.listen(r),r(h.color),function(){return h.unlisten(r)}}),[]),[n,i]};e["default"]=g},"2WcH":function(t,e,n){"use strict";function r(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}n.d(e,"a",(function(){return r}))},"2gN3":function(t,e,n){var r=n("Kz5y"),i=r["__core-js_shared__"];t.exports=i},"2mql":function(t,e,n){"use strict";var r=n("TOwV"),i={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},o={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},a={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},s={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},u={};function c(t){return r.isMemo(t)?s:u[t["$$typeof"]]||i}u[r.ForwardRef]=a,u[r.Memo]=s;var l=Object.defineProperty,f=Object.getOwnPropertyNames,h=Object.getOwnPropertySymbols,p=Object.getOwnPropertyDescriptor,d=Object.getPrototypeOf,v=Object.prototype;function g(t,e,n){if("string"!==typeof e){if(v){var r=d(e);r&&r!==v&&g(t,r,n)}var i=f(e);h&&(i=i.concat(h(e)));for(var a=c(t),s=c(e),u=0;u<i.length;++u){var m=i[u];if(!o[m]&&(!n||!n[m])&&(!s||!s[m])&&(!a||!a[m])){var y=p(e,m);try{l(t,m,y)}catch(_){}}}}return t}t.exports=g},"2oRo":function(t,e,n){(function(e){var n=function(t){return t&&t.Math==Math&&t};t.exports=n("object"==typeof globalThis&&globalThis)||n("object"==typeof window&&window)||n("object"==typeof self&&self)||n("object"==typeof e&&e)||Function("return this")()}).call(this,n("IyRk"))},"2tOg":function(t,e,n){"use strict";var r=n("g6v/"),i=n("RNIs"),o=n("ewvW"),a=n("UMSQ"),s=n("m/L8").f;r&&!("lastItem"in[])&&(s(Array.prototype,"lastItem",{configurable:!0,get:function(){var t=o(this),e=a(t.length);return 0==e?void 0:t[e-1]},set:function(t){var e=o(this),n=a(e.length);return e[0==n?0:n-1]=t}}),i("lastItem"))},"33Wh":function(t,e,n){var r=n("yoRg"),i=n("eDl+");t.exports=Object.keys||function(t){return r(t,i)}},"33yf":function(t,e,n){(function(t){function n(t,e){for(var n=0,r=t.length-1;r>=0;r--){var i=t[r];"."===i?t.splice(r,1):".."===i?(t.splice(r,1),n++):n&&(t.splice(r,1),n--)}if(e)for(;n--;n)t.unshift("..");return t}function r(t){"string"!==typeof t&&(t+="");var e,n=0,r=-1,i=!0;for(e=t.length-1;e>=0;--e)if(47===t.charCodeAt(e)){if(!i){n=e+1;break}}else-1===r&&(i=!1,r=e+1);return-1===r?"":t.slice(n,r)}function i(t,e){if(t.filter)return t.filter(e);for(var n=[],r=0;r<t.length;r++)e(t[r],r,t)&&n.push(t[r]);return n}e.resolve=function(){for(var e="",r=!1,o=arguments.length-1;o>=-1&&!r;o--){var a=o>=0?arguments[o]:t.cwd();if("string"!==typeof a)throw new TypeError("Arguments to path.resolve must be strings");a&&(e=a+"/"+e,r="/"===a.charAt(0))}return e=n(i(e.split("/"),(function(t){return!!t})),!r).join("/"),(r?"/":"")+e||"."},e.normalize=function(t){var r=e.isAbsolute(t),a="/"===o(t,-1);return t=n(i(t.split("/"),(function(t){return!!t})),!r).join("/"),t||r||(t="."),t&&a&&(t+="/"),(r?"/":"")+t},e.isAbsolute=function(t){return"/"===t.charAt(0)},e.join=function(){var t=Array.prototype.slice.call(arguments,0);return e.normalize(i(t,(function(t,e){if("string"!==typeof t)throw new TypeError("Arguments to path.join must be strings");return t})).join("/"))},e.relative=function(t,n){function r(t){for(var e=0;e<t.length;e++)if(""!==t[e])break;for(var n=t.length-1;n>=0;n--)if(""!==t[n])break;return e>n?[]:t.slice(e,n-e+1)}t=e.resolve(t).substr(1),n=e.resolve(n).substr(1);for(var i=r(t.split("/")),o=r(n.split("/")),a=Math.min(i.length,o.length),s=a,u=0;u<a;u++)if(i[u]!==o[u]){s=u;break}var c=[];for(u=s;u<i.length;u++)c.push("..");return c=c.concat(o.slice(s)),c.join("/")},e.sep="/",e.delimiter=":",e.dirname=function(t){if("string"!==typeof t&&(t+=""),0===t.length)return".";for(var e=t.charCodeAt(0),n=47===e,r=-1,i=!0,o=t.length-1;o>=1;--o)if(e=t.charCodeAt(o),47===e){if(!i){r=o;break}}else i=!1;return-1===r?n?"/":".":n&&1===r?"/":t.slice(0,r)},e.basename=function(t,e){var n=r(t);return e&&n.substr(-1*e.length)===e&&(n=n.substr(0,n.length-e.length)),n},e.extname=function(t){"string"!==typeof t&&(t+="");for(var e=-1,n=0,r=-1,i=!0,o=0,a=t.length-1;a>=0;--a){var s=t.charCodeAt(a);if(47!==s)-1===r&&(i=!1,r=a+1),46===s?-1===e?e=a:1!==o&&(o=1):-1!==e&&(o=-1);else if(!i){n=a+1;break}}return-1===e||-1===r||0===o||1===o&&e===r-1&&e===n+1?"":t.slice(e,r)};var o="b"==="ab".substr(-1)?function(t,e,n){return t.substr(e,n)}:function(t,e,n){return e<0&&(e=t.length+e),t.substr(e,n)}}).call(this,n("Q2Ig"))},"3A9y":function(t,e){function n(t){return this.__data__.has(t)}t.exports=n},"3Fdi":function(t,e){var n=Function.prototype,r=n.toString;function i(t){if(null!=t){try{return r.call(t)}catch(e){}try{return t+""}catch(e){}}return""}t.exports=i},"3I1R":function(t,e,n){var r=n("dG/n");r("hasInstance")},"3L5V":function(t,e,n){(function(e){(function(e,n){t.exports=n()})(0,(function(){"use strict";function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function r(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t}var i=function(){function t(t,e){this.next=null,this.key=t,this.data=e,this.left=null,this.right=null}return t}();function o(t,e){return t>e?1:t<e?-1:0}function a(t,e,n){var r=new i(null,null),o=r,a=r;while(1){var s=n(t,e.key);if(s<0){if(null===e.left)break;if(n(t,e.left.key)<0){var u=e.left;if(e.left=u.right,u.right=e,e=u,null===e.left)break}a.left=e,a=e,e=e.left}else{if(!(s>0))break;if(null===e.right)break;if(n(t,e.right.key)>0){u=e.right;if(e.right=u.left,u.left=e,e=u,null===e.right)break}o.right=e,o=e,e=e.right}}return o.right=e.left,a.left=e.right,e.left=r.right,e.right=r.left,e}function s(t,e,n,r){var o=new i(t,e);if(null===n)return o.left=o.right=null,o;n=a(t,n,r);var s=r(t,n.key);return s<0?(o.left=n.left,o.right=n,n.left=null):s>=0&&(o.right=n.right,o.left=n,n.right=null),o}function u(t,e,n){var r=null,i=null;if(e){e=a(t,e,n);var o=n(e.key,t);0===o?(r=e.left,i=e.right):o<0?(i=e.right,e.right=null,r=e):(r=e.left,e.left=null,i=e)}return{left:r,right:i}}function c(t,e,n){return null===e?t:(null===t||(e=a(t.key,e,n),e.left=t),e)}function l(t,e,n,r,i){if(t){r(e+(n?"\u2514\u2500\u2500 ":"\u251c\u2500\u2500 ")+i(t)+"\n");var o=e+(n?"    ":"\u2502   ");t.left&&l(t.left,o,!1,r,i),t.right&&l(t.right,o,!0,r,i)}}var f=function(){function t(t){void 0===t&&(t=o),this._root=null,this._size=0,this._comparator=t}return t.prototype.insert=function(t,e){return this._size++,this._root=s(t,e,this._root,this._comparator)},t.prototype.add=function(t,e){var n=new i(t,e);null===this._root&&(n.left=n.right=null,this._size++,this._root=n);var r=this._comparator,o=a(t,this._root,r),s=r(t,o.key);return 0===s?this._root=o:(s<0?(n.left=o.left,n.right=o,o.left=null):s>0&&(n.right=o.right,n.left=o,o.right=null),this._size++,this._root=n),this._root},t.prototype.remove=function(t){this._root=this._remove(t,this._root,this._comparator)},t.prototype._remove=function(t,e,n){var r;if(null===e)return null;e=a(t,e,n);var i=n(t,e.key);return 0===i?(null===e.left?r=e.right:(r=a(t,e.left,n),r.right=e.right),this._size--,r):e},t.prototype.pop=function(){var t=this._root;if(t){while(t.left)t=t.left;return this._root=a(t.key,this._root,this._comparator),this._root=this._remove(t.key,this._root,this._comparator),{key:t.key,data:t.data}}return null},t.prototype.findStatic=function(t){var e=this._root,n=this._comparator;while(e){var r=n(t,e.key);if(0===r)return e;e=r<0?e.left:e.right}return null},t.prototype.find=function(t){return this._root&&(this._root=a(t,this._root,this._comparator),0!==this._comparator(t,this._root.key))?null:this._root},t.prototype.contains=function(t){var e=this._root,n=this._comparator;while(e){var r=n(t,e.key);if(0===r)return!0;e=r<0?e.left:e.right}return!1},t.prototype.forEach=function(t,e){var n=this._root,r=[],i=!1;while(!i)null!==n?(r.push(n),n=n.left):0!==r.length?(n=r.pop(),t.call(e,n),n=n.right):i=!0;return this},t.prototype.range=function(t,e,n,r){var i,o=[],a=this._comparator,s=this._root;while(0!==o.length||s)if(s)o.push(s),s=s.left;else{if(s=o.pop(),i=a(s.key,e),i>0)break;if(a(s.key,t)>=0&&n.call(r,s))return this;s=s.right}return this},t.prototype.keys=function(){var t=[];return this.forEach((function(e){var n=e.key;return t.push(n)})),t},t.prototype.values=function(){var t=[];return this.forEach((function(e){var n=e.data;return t.push(n)})),t},t.prototype.min=function(){return this._root?this.minNode(this._root).key:null},t.prototype.max=function(){return this._root?this.maxNode(this._root).key:null},t.prototype.minNode=function(t){if(void 0===t&&(t=this._root),t)while(t.left)t=t.left;return t},t.prototype.maxNode=function(t){if(void 0===t&&(t=this._root),t)while(t.right)t=t.right;return t},t.prototype.at=function(t){var e=this._root,n=!1,r=0,i=[];while(!n)if(e)i.push(e),e=e.left;else if(i.length>0){if(e=i.pop(),r===t)return e;r++,e=e.right}else n=!0;return null},t.prototype.next=function(t){var e=this._root,n=null;if(t.right){n=t.right;while(n.left)n=n.left;return n}var r=this._comparator;while(e){var i=r(t.key,e.key);if(0===i)break;i<0?(n=e,e=e.left):e=e.right}return n},t.prototype.prev=function(t){var e=this._root,n=null;if(null!==t.left){n=t.left;while(n.right)n=n.right;return n}var r=this._comparator;while(e){var i=r(t.key,e.key);if(0===i)break;i<0?e=e.left:(n=e,e=e.right)}return n},t.prototype.clear=function(){return this._root=null,this._size=0,this},t.prototype.toList=function(){return d(this._root)},t.prototype.load=function(t,e,n){void 0===e&&(e=[]),void 0===n&&(n=!1);var r=t.length,i=this._comparator;if(n&&m(t,e,0,r-1,i),null===this._root)this._root=h(t,e,0,r),this._size=r;else{var o=g(this.toList(),p(t,e),i);r=this._size+r,this._root=v({head:o},0,r)}return this},t.prototype.isEmpty=function(){return null===this._root},Object.defineProperty(t.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"root",{get:function(){return this._root},enumerable:!0,configurable:!0}),t.prototype.toString=function(t){void 0===t&&(t=function(t){return String(t.key)});var e=[];return l(this._root,"",!0,(function(t){return e.push(t)}),t),e.join("")},t.prototype.update=function(t,e,n){var r=this._comparator,i=u(t,this._root,r),o=i.left,a=i.right;r(t,e)<0?a=s(e,n,a,r):o=s(e,n,o,r),this._root=c(o,a,r)},t.prototype.split=function(t){return u(t,this._root,this._comparator)},t}();function h(t,e,n,r){var o=r-n;if(o>0){var a=n+Math.floor(o/2),s=t[a],u=e[a],c=new i(s,u);return c.left=h(t,e,n,a),c.right=h(t,e,a+1,r),c}return null}function p(t,e){for(var n=new i(null,null),r=n,o=0;o<t.length;o++)r=r.next=new i(t[o],e[o]);return r.next=null,n.next}function d(t){var e=t,n=[],r=!1,o=new i(null,null),a=o;while(!r)e?(n.push(e),e=e.left):n.length>0?(e=a=a.next=n.pop(),e=e.right):r=!0;return a.next=null,o.next}function v(t,e,n){var r=n-e;if(r>0){var i=e+Math.floor(r/2),o=v(t,e,i),a=t.head;return a.left=o,t.head=t.head.next,a.right=v(t,i+1,n),a}return null}function g(t,e,n){var r=new i(null,null),o=r,a=t,s=e;while(null!==a&&null!==s)n(a.key,s.key)<0?(o.next=a,a=a.next):(o.next=s,s=s.next),o=o.next;return null!==a?o.next=a:null!==s&&(o.next=s),r.next}function m(t,e,n,r,i){if(!(n>=r)){var o=t[n+r>>1],a=n-1,s=r+1;while(1){do{a++}while(i(t[a],o)<0);do{s--}while(i(t[s],o)>0);if(a>=s)break;var u=t[a];t[a]=t[s],t[s]=u,u=e[a],e[a]=e[s],e[s]=u}m(t,e,n,s,i),m(t,e,s+1,r,i)}}var y=function(t,e){return t.ll.x<=e.x&&e.x<=t.ur.x&&t.ll.y<=e.y&&e.y<=t.ur.y},_=function(t,e){if(e.ur.x<t.ll.x||t.ur.x<e.ll.x||e.ur.y<t.ll.y||t.ur.y<e.ll.y)return null;var n=t.ll.x<e.ll.x?e.ll.x:t.ll.x,r=t.ur.x<e.ur.x?t.ur.x:e.ur.x,i=t.ll.y<e.ll.y?e.ll.y:t.ll.y,o=t.ur.y<e.ur.y?t.ur.y:e.ur.y;return{ll:{x:n,y:i},ur:{x:r,y:o}}},b=Number.EPSILON;void 0===b&&(b=Math.pow(2,-52));var x=b*b,w=function(t,e){if(-b<t&&t<b&&-b<e&&e<b)return 0;var n=t-e;return n*n<x*t*e?0:t<e?-1:1},E=function(){function e(){t(this,e),this.reset()}return r(e,[{key:"reset",value:function(){this.xRounder=new S,this.yRounder=new S}},{key:"round",value:function(t,e){return{x:this.xRounder.round(t),y:this.yRounder.round(e)}}}]),e}(),S=function(){function e(){t(this,e),this.tree=new f,this.round(0)}return r(e,[{key:"round",value:function(t){var e=this.tree.add(t),n=this.tree.prev(e);if(null!==n&&0===w(e.key,n.key))return this.tree.remove(t),n.key;var r=this.tree.next(e);return null!==r&&0===w(e.key,r.key)?(this.tree.remove(t),r.key):t}}]),e}(),O=new E,C=function(t,e){return t.x*e.y-t.y*e.x},T=function(t,e){return t.x*e.x+t.y*e.y},A=function(t,e,n){var r={x:e.x-t.x,y:e.y-t.y},i={x:n.x-t.x,y:n.y-t.y},o=C(r,i);return w(o,0)},k=function(t){return Math.sqrt(T(t,t))},M=function(t,e,n){var r={x:e.x-t.x,y:e.y-t.y},i={x:n.x-t.x,y:n.y-t.y};return C(i,r)/k(i)/k(r)},P=function(t,e,n){var r={x:e.x-t.x,y:e.y-t.y},i={x:n.x-t.x,y:n.y-t.y};return T(i,r)/k(i)/k(r)},R=function(t,e,n){return 0===e.y?null:{x:t.x+e.x/e.y*(n-t.y),y:n}},j=function(t,e,n){return 0===e.x?null:{x:n,y:t.y+e.y/e.x*(n-t.x)}},I=function(t,e,n,r){if(0===e.x)return j(n,r,t.x);if(0===r.x)return j(t,e,n.x);if(0===e.y)return R(n,r,t.y);if(0===r.y)return R(t,e,n.y);var i=C(e,r);if(0==i)return null;var o={x:n.x-t.x,y:n.y-t.y},a=C(o,e)/i,s=C(o,r)/i,u=t.x+s*e.x,c=n.x+a*r.x,l=t.y+s*e.y,f=n.y+a*r.y,h=(u+c)/2,p=(l+f)/2;return{x:h,y:p}},L=function(){function e(n,r){t(this,e),void 0===n.events?n.events=[this]:n.events.push(this),this.point=n,this.isLeft=r}return r(e,null,[{key:"compare",value:function(t,n){var r=e.comparePoints(t.point,n.point);return 0!==r?r:(t.point!==n.point&&t.link(n),t.isLeft!==n.isLeft?t.isLeft?1:-1:D.compare(t.segment,n.segment))}},{key:"comparePoints",value:function(t,e){return t.x<e.x?-1:t.x>e.x?1:t.y<e.y?-1:t.y>e.y?1:0}}]),r(e,[{key:"link",value:function(t){if(t.point===this.point)throw new Error("Tried to link already linked events");for(var e=t.point.events,n=0,r=e.length;n<r;n++){var i=e[n];this.point.events.push(i),i.point=this.point}this.checkForConsuming()}},{key:"checkForConsuming",value:function(){for(var t=this.point.events.length,e=0;e<t;e++){var n=this.point.events[e];if(void 0===n.segment.consumedBy)for(var r=e+1;r<t;r++){var i=this.point.events[r];void 0===i.consumedBy&&(n.otherSE.point.events===i.otherSE.point.events&&n.segment.consume(i.segment))}}}},{key:"getAvailableLinkedEvents",value:function(){for(var t=[],e=0,n=this.point.events.length;e<n;e++){var r=this.point.events[e];r!==this&&!r.segment.ringOut&&r.segment.isInResult()&&t.push(r)}return t}},{key:"getLeftmostComparator",value:function(t){var e=this,n=new Map,r=function(r){var i=r.otherSE;n.set(r,{sine:M(e.point,t.point,i.point),cosine:P(e.point,t.point,i.point)})};return function(t,e){n.has(t)||r(t),n.has(e)||r(e);var i=n.get(t),o=i.sine,a=i.cosine,s=n.get(e),u=s.sine,c=s.cosine;return o>=0&&u>=0?a<c?1:a>c?-1:0:o<0&&u<0?a<c?-1:a>c?1:0:u<o?-1:u>o?1:0}}}]),e}(),N=0,D=function(){function e(n,r,i,o){t(this,e),this.id=++N,this.leftSE=n,n.segment=this,n.otherSE=r,this.rightSE=r,r.segment=this,r.otherSE=n,this.rings=i,this.windings=o}return r(e,null,[{key:"compare",value:function(t,e){var n=t.leftSE.point.x,r=e.leftSE.point.x,i=t.rightSE.point.x,o=e.rightSE.point.x;if(o<n)return 1;if(i<r)return-1;var a=t.leftSE.point.y,s=e.leftSE.point.y,u=t.rightSE.point.y,c=e.rightSE.point.y;if(n<r){if(s<a&&s<u)return 1;if(s>a&&s>u)return-1;var l=t.comparePoint(e.leftSE.point);if(l<0)return 1;if(l>0)return-1;var f=e.comparePoint(t.rightSE.point);return 0!==f?f:-1}if(n>r){if(a<s&&a<c)return-1;if(a>s&&a>c)return 1;var h=e.comparePoint(t.leftSE.point);if(0!==h)return h;var p=t.comparePoint(e.rightSE.point);return p<0?1:p>0?-1:1}if(a<s)return-1;if(a>s)return 1;if(i<o){var d=e.comparePoint(t.rightSE.point);if(0!==d)return d}if(i>o){var v=t.comparePoint(e.rightSE.point);if(v<0)return 1;if(v>0)return-1}if(i!==o){var g=u-a,m=i-n,y=c-s,_=o-r;if(g>m&&y<_)return 1;if(g<m&&y>_)return-1}return i>o?1:i<o||u<c?-1:u>c?1:t.id<e.id?-1:t.id>e.id?1:0}}]),r(e,[{key:"replaceRightSE",value:function(t){this.rightSE=t,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}},{key:"bbox",value:function(){var t=this.leftSE.point.y,e=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:t<e?t:e},ur:{x:this.rightSE.point.x,y:t>e?t:e}}}},{key:"vector",value:function(){return{x:this.rightSE.point.x-this.leftSE.point.x,y:this.rightSE.point.y-this.leftSE.point.y}}},{key:"isAnEndpoint",value:function(t){return t.x===this.leftSE.point.x&&t.y===this.leftSE.point.y||t.x===this.rightSE.point.x&&t.y===this.rightSE.point.y}},{key:"comparePoint",value:function(t){if(this.isAnEndpoint(t))return 0;var e=this.leftSE.point,n=this.rightSE.point,r=this.vector();if(e.x===n.x)return t.x===e.x?0:t.x<e.x?1:-1;var i=(t.y-e.y)/r.y,o=e.x+i*r.x;if(t.x===o)return 0;var a=(t.x-e.x)/r.x,s=e.y+a*r.y;return t.y===s?0:t.y<s?-1:1}},{key:"getIntersection",value:function(t){var e=this.bbox(),n=t.bbox(),r=_(e,n);if(null===r)return null;var i=this.leftSE.point,o=this.rightSE.point,a=t.leftSE.point,s=t.rightSE.point,u=y(e,a)&&0===this.comparePoint(a),c=y(n,i)&&0===t.comparePoint(i),l=y(e,s)&&0===this.comparePoint(s),f=y(n,o)&&0===t.comparePoint(o);if(c&&u)return f&&!l?o:!f&&l?s:null;if(c)return l&&i.x===s.x&&i.y===s.y?null:i;if(u)return f&&o.x===a.x&&o.y===a.y?null:a;if(f&&l)return null;if(f)return o;if(l)return s;var h=I(i,this.vector(),a,t.vector());return null===h?null:y(r,h)?O.round(h.x,h.y):null}},{key:"split",value:function(t){var n=[],r=void 0!==t.events,i=new L(t,!0),o=new L(t,!1),a=this.rightSE;this.replaceRightSE(o),n.push(o),n.push(i);var s=new e(i,a,this.rings.slice(),this.windings.slice());return L.comparePoints(s.leftSE.point,s.rightSE.point)>0&&s.swapEvents(),L.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),r&&(i.checkForConsuming(),o.checkForConsuming()),n}},{key:"swapEvents",value:function(){var t=this.rightSE;this.rightSE=this.leftSE,this.leftSE=t,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(var e=0,n=this.windings.length;e<n;e++)this.windings[e]*=-1}},{key:"consume",value:function(t){var n=this,r=t;while(n.consumedBy)n=n.consumedBy;while(r.consumedBy)r=r.consumedBy;var i=e.compare(n,r);if(0!==i){if(i>0){var o=n;n=r,r=o}if(n.prev===r){var a=n;n=r,r=a}for(var s=0,u=r.rings.length;s<u;s++){var c=r.rings[s],l=r.windings[s],f=n.rings.indexOf(c);-1===f?(n.rings.push(c),n.windings.push(l)):n.windings[f]+=l}r.rings=null,r.windings=null,r.consumedBy=n,r.leftSE.consumedBy=n.leftSE,r.rightSE.consumedBy=n.rightSE}}},{key:"prevInResult",value:function(){return void 0!==this._prevInResult||(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null),this._prevInResult}},{key:"beforeState",value:function(){if(void 0!==this._beforeState)return this._beforeState;if(this.prev){var t=this.prev.consumedBy||this.prev;this._beforeState=t.afterState()}else this._beforeState={rings:[],windings:[],multiPolys:[]};return this._beforeState}},{key:"afterState",value:function(){if(void 0!==this._afterState)return this._afterState;var t=this.beforeState();this._afterState={rings:t.rings.slice(0),windings:t.windings.slice(0),multiPolys:[]};for(var e=this._afterState.rings,n=this._afterState.windings,r=this._afterState.multiPolys,i=0,o=this.rings.length;i<o;i++){var a=this.rings[i],s=this.windings[i],u=e.indexOf(a);-1===u?(e.push(a),n.push(s)):n[u]+=s}for(var c=[],l=[],f=0,h=e.length;f<h;f++)if(0!==n[f]){var p=e[f],d=p.poly;if(-1===l.indexOf(d))if(p.isExterior)c.push(d);else{-1===l.indexOf(d)&&l.push(d);var v=c.indexOf(p.poly);-1!==v&&c.splice(v,1)}}for(var g=0,m=c.length;g<m;g++){var y=c[g].multiPoly;-1===r.indexOf(y)&&r.push(y)}return this._afterState}},{key:"isInResult",value:function(){if(this.consumedBy)return!1;if(void 0!==this._isInResult)return this._isInResult;var t=this.beforeState().multiPolys,e=this.afterState().multiPolys;switch(X.type){case"union":var n=0===t.length,r=0===e.length;this._isInResult=n!==r;break;case"intersection":var i,o;t.length<e.length?(i=t.length,o=e.length):(i=e.length,o=t.length),this._isInResult=o===X.numMultiPolys&&i<o;break;case"xor":var a=Math.abs(t.length-e.length);this._isInResult=a%2===1;break;case"difference":var s=function(t){return 1===t.length&&t[0].isSubject};this._isInResult=s(t)!==s(e);break;default:throw new Error("Unrecognized operation type found ".concat(X.type))}return this._isInResult}}],[{key:"fromRing",value:function(t,n,r){var i,o,a,s=L.comparePoints(t,n);if(s<0)i=t,o=n,a=1;else{if(!(s>0))throw new Error("Tried to create degenerate segment at [".concat(t.x,", ").concat(t.y,"]"));i=n,o=t,a=-1}var u=new L(i,!0),c=new L(o,!1);return new e(u,c,[r],[a])}}]),e}(),F=function(){function e(n,r,i){if(t(this,e),!Array.isArray(n)||0===n.length)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=r,this.isExterior=i,this.segments=[],"number"!==typeof n[0][0]||"number"!==typeof n[0][1])throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var o=O.round(n[0][0],n[0][1]);this.bbox={ll:{x:o.x,y:o.y},ur:{x:o.x,y:o.y}};for(var a=o,s=1,u=n.length;s<u;s++){if("number"!==typeof n[s][0]||"number"!==typeof n[s][1])throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var c=O.round(n[s][0],n[s][1]);c.x===a.x&&c.y===a.y||(this.segments.push(D.fromRing(a,c,this)),c.x<this.bbox.ll.x&&(this.bbox.ll.x=c.x),c.y<this.bbox.ll.y&&(this.bbox.ll.y=c.y),c.x>this.bbox.ur.x&&(this.bbox.ur.x=c.x),c.y>this.bbox.ur.y&&(this.bbox.ur.y=c.y),a=c)}o.x===a.x&&o.y===a.y||this.segments.push(D.fromRing(a,o,this))}return r(e,[{key:"getSweepEvents",value:function(){for(var t=[],e=0,n=this.segments.length;e<n;e++){var r=this.segments[e];t.push(r.leftSE),t.push(r.rightSE)}return t}}]),e}(),B=function(){function e(n,r){if(t(this,e),!Array.isArray(n))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new F(n[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(var i=1,o=n.length;i<o;i++){var a=new F(n[i],this,!1);a.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=a.bbox.ll.x),a.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=a.bbox.ll.y),a.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=a.bbox.ur.x),a.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=a.bbox.ur.y),this.interiorRings.push(a)}this.multiPoly=r}return r(e,[{key:"getSweepEvents",value:function(){for(var t=this.exteriorRing.getSweepEvents(),e=0,n=this.interiorRings.length;e<n;e++)for(var r=this.interiorRings[e].getSweepEvents(),i=0,o=r.length;i<o;i++)t.push(r[i]);return t}}]),e}(),z=function(){function e(n,r){if(t(this,e),!Array.isArray(n))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{"number"===typeof n[0][0][0]&&(n=[n])}catch(s){}this.polys=[],this.bbox={ll:{x:Number.POSITIVE_INFINITY,y:Number.POSITIVE_INFINITY},ur:{x:Number.NEGATIVE_INFINITY,y:Number.NEGATIVE_INFINITY}};for(var i=0,o=n.length;i<o;i++){var a=new B(n[i],this);a.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=a.bbox.ll.x),a.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=a.bbox.ll.y),a.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=a.bbox.ur.x),a.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=a.bbox.ur.y),this.polys.push(a)}this.isSubject=r}return r(e,[{key:"getSweepEvents",value:function(){for(var t=[],e=0,n=this.polys.length;e<n;e++)for(var r=this.polys[e].getSweepEvents(),i=0,o=r.length;i<o;i++)t.push(r[i]);return t}}]),e}(),U=function(){function e(n){t(this,e),this.events=n;for(var r=0,i=n.length;r<i;r++)n[r].segment.ringOut=this;this.poly=null}return r(e,null,[{key:"factory",value:function(t){for(var n=[],r=0,i=t.length;r<i;r++){var o=t[r];if(o.isInResult()&&!o.ringOut){var a=null,s=o.leftSE,u=o.rightSE,c=[s],l=s.point,f=[];while(1){if(a=s,s=u,c.push(s),s.point===l)break;while(1){var h=s.getAvailableLinkedEvents();if(0===h.length){var p=c[0].point,d=c[c.length-1].point;throw new Error("Unable to complete output ring starting at [".concat(p.x,",")+" ".concat(p.y,"]. Last matching segment found ends at")+" [".concat(d.x,", ").concat(d.y,"]."))}if(1===h.length){u=h[0].otherSE;break}for(var v=null,g=0,m=f.length;g<m;g++)if(f[g].point===s.point){v=g;break}if(null===v){f.push({index:c.length,point:s.point});var y=s.getLeftmostComparator(a);u=h.sort(y)[0].otherSE;break}var _=f.splice(v)[0],b=c.splice(_.index);b.unshift(b[0].otherSE),n.push(new e(b.reverse()))}}n.push(new e(c))}}return n}}]),r(e,[{key:"getGeom",value:function(){for(var t=this.events[0].point,e=[t],n=1,r=this.events.length-1;n<r;n++){var i=this.events[n].point,o=this.events[n+1].point;0!==A(i,t,o)&&(e.push(i),t=i)}if(1===e.length)return null;var a=e[0],s=e[1];0===A(a,t,s)&&e.shift(),e.push(e[0]);for(var u=this.isExteriorRing()?1:-1,c=this.isExteriorRing()?0:e.length-1,l=this.isExteriorRing()?e.length:-1,f=[],h=c;h!=l;h+=u)f.push([e[h].x,e[h].y]);return f}},{key:"isExteriorRing",value:function(){if(void 0===this._isExteriorRing){var t=this.enclosingRing();this._isExteriorRing=!t||!t.isExteriorRing()}return this._isExteriorRing}},{key:"enclosingRing",value:function(){return void 0===this._enclosingRing&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}},{key:"_calcEnclosingRing",value:function(){for(var t=this.events[0],e=1,n=this.events.length;e<n;e++){var r=this.events[e];L.compare(t,r)>0&&(t=r)}var i=t.segment.prevInResult(),o=i?i.prevInResult():null;while(1){if(!i)return null;if(!o)return i.ringOut;if(o.ringOut!==i.ringOut)return o.ringOut.enclosingRing()!==i.ringOut?i.ringOut:i.ringOut.enclosingRing();i=o.prevInResult(),o=i?i.prevInResult():null}}}]),e}(),V=function(){function e(n){t(this,e),this.exteriorRing=n,n.poly=this,this.interiorRings=[]}return r(e,[{key:"addInterior",value:function(t){this.interiorRings.push(t),t.poly=this}},{key:"getGeom",value:function(){var t=[this.exteriorRing.getGeom()];if(null===t[0])return null;for(var e=0,n=this.interiorRings.length;e<n;e++){var r=this.interiorRings[e].getGeom();null!==r&&t.push(r)}return t}}]),e}(),H=function(){function e(n){t(this,e),this.rings=n,this.polys=this._composePolys(n)}return r(e,[{key:"getGeom",value:function(){for(var t=[],e=0,n=this.polys.length;e<n;e++){var r=this.polys[e].getGeom();null!==r&&t.push(r)}return t}},{key:"_composePolys",value:function(t){for(var e=[],n=0,r=t.length;n<r;n++){var i=t[n];if(!i.poly)if(i.isExteriorRing())e.push(new V(i));else{var o=i.enclosingRing();o.poly||e.push(new V(o)),o.poly.addInterior(i)}}return e}}]),e}(),G=function(){function e(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:D.compare;t(this,e),this.queue=n,this.tree=new f(r),this.segments=[]}return r(e,[{key:"process",value:function(t){var e=t.segment,n=[];if(t.consumedBy)return t.isLeft?this.queue.remove(t.otherSE):this.tree.remove(e),n;var r=t.isLeft?this.tree.insert(e):this.tree.find(e);if(!r)throw new Error("Unable to find segment #".concat(e.id," ")+"[".concat(e.leftSE.point.x,", ").concat(e.leftSE.point.y,"] -> ")+"[".concat(e.rightSE.point.x,", ").concat(e.rightSE.point.y,"] ")+"in SweepLine tree. Please submit a bug report.");var i=r,o=r,a=void 0,s=void 0;while(void 0===a)i=this.tree.prev(i),null===i?a=null:void 0===i.key.consumedBy&&(a=i.key);while(void 0===s)o=this.tree.next(o),null===o?s=null:void 0===o.key.consumedBy&&(s=o.key);if(t.isLeft){var u=null;if(a){var c=a.getIntersection(e);if(null!==c&&(e.isAnEndpoint(c)||(u=c),!a.isAnEndpoint(c)))for(var l=this._splitSafely(a,c),f=0,h=l.length;f<h;f++)n.push(l[f])}var p=null;if(s){var d=s.getIntersection(e);if(null!==d&&(e.isAnEndpoint(d)||(p=d),!s.isAnEndpoint(d)))for(var v=this._splitSafely(s,d),g=0,m=v.length;g<m;g++)n.push(v[g])}if(null!==u||null!==p){var y=null;if(null===u)y=p;else if(null===p)y=u;else{var _=L.comparePoints(u,p);y=_<=0?u:p}this.queue.remove(e.rightSE),n.push(e.rightSE);for(var b=e.split(y),x=0,w=b.length;x<w;x++)n.push(b[x])}n.length>0?(this.tree.remove(e),n.push(t)):(this.segments.push(e),e.prev=a)}else{if(a&&s){var E=a.getIntersection(s);if(null!==E){if(!a.isAnEndpoint(E))for(var S=this._splitSafely(a,E),O=0,C=S.length;O<C;O++)n.push(S[O]);if(!s.isAnEndpoint(E))for(var T=this._splitSafely(s,E),A=0,k=T.length;A<k;A++)n.push(T[A])}}this.tree.remove(e)}return n}},{key:"_splitSafely",value:function(t,e){this.tree.remove(t);var n=t.rightSE;this.queue.remove(n);var r=t.split(e);return r.push(n),void 0===t.consumedBy&&this.tree.insert(t),r}}]),e}(),W="undefined"!==typeof e&&Object({NODE_ENV:"production"}).POLYGON_CLIPPING_MAX_QUEUE_SIZE||1e6,Z="undefined"!==typeof e&&Object({NODE_ENV:"production"}).POLYGON_CLIPPING_MAX_SWEEPLINE_SEGMENTS||1e6,Y=function(){function e(){t(this,e)}return r(e,[{key:"run",value:function(t,e,n){X.type=t,O.reset();for(var r=[new z(e,!0)],i=0,o=n.length;i<o;i++)r.push(new z(n[i],!1));if(X.numMultiPolys=r.length,"difference"===X.type){var a=r[0],s=1;while(s<r.length)null!==_(r[s].bbox,a.bbox)?s++:r.splice(s,1)}if("intersection"===X.type)for(var u=0,c=r.length;u<c;u++)for(var l=r[u],h=u+1,p=r.length;h<p;h++)if(null===_(l.bbox,r[h].bbox))return[];for(var d=new f(L.compare),v=0,g=r.length;v<g;v++)for(var m=r[v].getSweepEvents(),y=0,b=m.length;y<b;y++)if(d.insert(m[y]),d.size>W)throw new Error("Infinite loop when putting segment endpoints in a priority queue (queue size too big). Please file a bug report.");var x=new G(d),w=d.size,E=d.pop();while(E){var S=E.key;if(d.size===w){var C=S.segment;throw new Error("Unable to pop() ".concat(S.isLeft?"left":"right"," SweepEvent ")+"[".concat(S.point.x,", ").concat(S.point.y,"] from segment #").concat(C.id," ")+"[".concat(C.leftSE.point.x,", ").concat(C.leftSE.point.y,"] -> ")+"[".concat(C.rightSE.point.x,", ").concat(C.rightSE.point.y,"] from queue. ")+"Please file a bug report.")}if(d.size>W)throw new Error("Infinite loop when passing sweep line over endpoints (queue size too big). Please file a bug report.");if(x.segments.length>Z)throw new Error("Infinite loop when passing sweep line over endpoints (too many sweep line segments). Please file a bug report.");for(var T=x.process(S),A=0,k=T.length;A<k;A++){var M=T[A];void 0===M.consumedBy&&d.insert(M)}w=d.size,E=d.pop()}O.reset();var P=U.factory(x.segments),R=new H(P);return R.getGeom()}}]),e}(),X=new Y,q=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return X.run("union",t,n)},K=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return X.run("intersection",t,n)},Q=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return X.run("xor",t,n)},$=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return X.run("difference",t,n)},J={union:q,intersection:K,xor:Q,difference:$};return J}))}).call(this,n("Q2Ig"))},"3L66":function(t,e,n){var r=n("MMmD"),i=n("ExA7");function o(t){return i(t)&&r(t)}t.exports=o},"3QDa":function(t,e,n){"use strict";var r=n("5wUe")["default"];function i(){var t=n("q1tI");return i=function(){return t},t}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=void 0;var o=a(n("nLCz"));function a(t){return t&&t.__esModule?t:{default:t}}function s(t,e){return h(t)||f(t,e)||c(t,e)||u()}function u(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function c(t,e){if(t){if("string"===typeof t)return l(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(t,e):void 0}}function l(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function f(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o,a,s=[],u=!0,c=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);u=!0);}catch(l){c=!0,i=l}finally{try{if(!u&&null!=n["return"]&&(a=n["return"](),Object(a)!==a))return}finally{if(c)throw i}}return s}}function h(t){if(Array.isArray(t))return t}function p(t,e,n){return Object.entries(t[e]).reduce((function(t,e){var i=r(e,2),o=i[0],a=i[1];return t[o]=a.map((function(t){var e={description:t.description};return Object.keys(t).forEach((function(r){if(r.startsWith("description.")){var i=r.match(/^description\.(.*)$/),o=s(i,2),a=o[1];a&&a===n&&(e.description=t[r])}else e[r]=t[r]})),e})),t}),{})}var d=function(t){var e=(0,i().useContext)(o["default"]),n=e.locale,r=e.apis,a=(0,i().useState)(p(r,t,n)),u=s(a,2),c=u[0],l=u[1];return(0,i().useEffect)((function(){l(p(r,t,n))}),[r,t,n]),c};e["default"]=d},"3bBZ":function(t,e,n){var r=n("2oRo"),i=n("/byt"),o=n("4mDm"),a=n("kRJp"),s=n("tiKp"),u=s("iterator"),c=s("toStringTag"),l=o.values;for(var f in i){var h=r[f],p=h&&h.prototype;if(p){if(p[u]!==l)try{a(p,u,l)}catch(v){p[u]=l}if(p[c]||a(p,c,f),i[f])for(var d in o)if(p[d]!==o[d])try{a(p,d,o[d])}catch(v){p[d]=o[d]}}}},"3uUd":function(t,e,n){"use strict";var r=n("I+eb"),i=n("xDBR"),o=n("0GbY"),a=n("glrk"),s=n("HAuM"),u=n("A2ZE"),c=n("SEBh"),l=n("WGBp"),f=n("ImZN");r({target:"Set",proto:!0,real:!0,forced:i},{filter:function(t){var e=a(this),n=l(e),r=u(t,arguments.length>1?arguments[1]:void 0,3),i=new(c(e,o("Set"))),h=s(i.add);return f(n,(function(t){r(t,t,e)&&h.call(i,t)}),void 0,!1,!0),i}})},"406g":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BindingOnSyntax=void 0;var r=n("z4Hk"),i=function(){function t(t){this._binding=t}return t.prototype.onActivation=function(t){return this._binding.onActivation=t,new r.BindingWhenSyntax(this._binding)},t}();e.BindingOnSyntax=i},"49+q":function(t,e,n){"use strict";var r=n("I+eb"),i=n("xDBR"),o=n("fXLg");r({target:"Set",proto:!0,real:!0,forced:i},{addAll:function(){return o.apply(this,arguments)}})},"4Brf":function(t,e,n){"use strict";var r=n("I+eb"),i=n("g6v/"),o=n("2oRo"),a=n("UTVS"),s=n("hh1v"),u=n("m/L8").f,c=n("6JNq"),l=o.Symbol;if(i&&"function"==typeof l&&(!("description"in l.prototype)||void 0!==l().description)){var f={},h=function(){var t=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),e=this instanceof h?new l(t):void 0===t?l():l(t);return""===t&&(f[e]=!0),e};c(h,l);var p=h.prototype=l.prototype;p.constructor=h;var d=p.toString,v="Symbol(test)"==String(l("test")),g=/^Symbol\((.*)\)[^)]+$/;u(p,"description",{configurable:!0,get:function(){var t=s(this)?this.valueOf():this,e=d.call(t);if(a(f,t))return"";var n=v?e.slice(7,-1):e.replace(g,"$1");return""===n?void 0:n}}),r({global:!0,forced:!0},{Symbol:h})}},"4IlW":function(t,e,n){"use strict";var r={MAC_ENTER:3,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,QUESTION_MARK:63,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META:91,WIN_KEY_RIGHT:92,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,PERIOD:190,SLASH:191,APOSTROPHE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,WIN_KEY:224,MAC_FF_META:224,WIN_IME:229,isTextModifyingKeyEvent:function(t){var e=t.keyCode;if(t.altKey&&!t.ctrlKey||t.metaKey||e>=r.F1&&e<=r.F12)return!1;switch(e){case r.ALT:case r.CAPS_LOCK:case r.CONTEXT_MENU:case r.CTRL:case r.DOWN:case r.END:case r.ESC:case r.HOME:case r.INSERT:case r.LEFT:case r.MAC_FF_META:case r.META:case r.NUMLOCK:case r.NUM_CENTER:case r.PAGE_DOWN:case r.PAGE_UP:case r.PAUSE:case r.PRINT_SCREEN:case r.RIGHT:case r.SHIFT:case r.UP:case r.WIN_KEY:case r.WIN_KEY_RIGHT:return!1;default:return!0}},isCharacterKey:function(t){if(t>=r.ZERO&&t<=r.NINE)return!0;if(t>=r.NUM_ZERO&&t<=r.NUM_MULTIPLY)return!0;if(t>=r.A&&t<=r.Z)return!0;if(-1!==window.navigator.userAgent.indexOf("WebKit")&&0===t)return!0;switch(t){case r.SPACE:case r.QUESTION_MARK:case r.NUM_PLUS:case r.NUM_MINUS:case r.NUM_PERIOD:case r.NUM_DIVISION:case r.SEMICOLON:case r.DASH:case r.EQUALS:case r.COMMA:case r.PERIOD:case r.SLASH:case r.APOSTROPHE:case r.SINGLE_QUOTE:case r.OPEN_SQUARE_BRACKET:case r.BACKSLASH:case r.CLOSE_SQUARE_BRACKET:return!0;default:return!1}}};e["a"]=r},"4WOD":function(t,e,n){var r=n("UTVS"),i=n("ewvW"),o=n("93I0"),a=n("4Xet"),s=o("IE_PROTO"),u=Object.prototype;t.exports=a?Object.getPrototypeOf:function(t){return t=i(t),r(t,s)?t[s]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?u:null}},"4XaG":function(t,e,n){var r=n("dG/n");r("observable")},"4Xet":function(t,e,n){var r=n("0Dky");t.exports=!r((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype}))},"4cb6":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.multiBindToService=e.getServiceIdentifierAsString=e.typeConstraint=e.namedConstraint=e.taggedConstraint=e.traverseAncerstors=e.decorate=e.id=e.MetadataReader=e.postConstruct=e.targetName=e.multiInject=e.unmanaged=e.optional=e.LazyServiceIdentifer=e.inject=e.named=e.tagged=e.injectable=e.ContainerModule=e.AsyncContainerModule=e.TargetTypeEnum=e.BindingTypeEnum=e.BindingScopeEnum=e.Container=e.METADATA_KEY=void 0;var r=n("xfSm");e.METADATA_KEY=r;var i=n("9Fde");Object.defineProperty(e,"Container",{enumerable:!0,get:function(){return i.Container}});var o=n("FV85");Object.defineProperty(e,"BindingScopeEnum",{enumerable:!0,get:function(){return o.BindingScopeEnum}}),Object.defineProperty(e,"BindingTypeEnum",{enumerable:!0,get:function(){return o.BindingTypeEnum}}),Object.defineProperty(e,"TargetTypeEnum",{enumerable:!0,get:function(){return o.TargetTypeEnum}});var a=n("dxzI");Object.defineProperty(e,"AsyncContainerModule",{enumerable:!0,get:function(){return a.AsyncContainerModule}}),Object.defineProperty(e,"ContainerModule",{enumerable:!0,get:function(){return a.ContainerModule}});var s=n("cZ5Q");Object.defineProperty(e,"injectable",{enumerable:!0,get:function(){return s.injectable}});var u=n("0gSV");Object.defineProperty(e,"tagged",{enumerable:!0,get:function(){return u.tagged}});var c=n("ZzCi");Object.defineProperty(e,"named",{enumerable:!0,get:function(){return c.named}});var l=n("Yk9n");Object.defineProperty(e,"inject",{enumerable:!0,get:function(){return l.inject}}),Object.defineProperty(e,"LazyServiceIdentifer",{enumerable:!0,get:function(){return l.LazyServiceIdentifer}});var f=n("jYx5");Object.defineProperty(e,"optional",{enumerable:!0,get:function(){return f.optional}});var h=n("n2J3");Object.defineProperty(e,"unmanaged",{enumerable:!0,get:function(){return h.unmanaged}});var p=n("jIg/");Object.defineProperty(e,"multiInject",{enumerable:!0,get:function(){return p.multiInject}});var d=n("oaX6");Object.defineProperty(e,"targetName",{enumerable:!0,get:function(){return d.targetName}});var v=n("Sk89");Object.defineProperty(e,"postConstruct",{enumerable:!0,get:function(){return v.postConstruct}});var g=n("wnjb");Object.defineProperty(e,"MetadataReader",{enumerable:!0,get:function(){return g.MetadataReader}});var m=n("d9O0");Object.defineProperty(e,"id",{enumerable:!0,get:function(){return m.id}});var y=n("Ztfv");Object.defineProperty(e,"decorate",{enumerable:!0,get:function(){return y.decorate}});var _=n("RR/i");Object.defineProperty(e,"traverseAncerstors",{enumerable:!0,get:function(){return _.traverseAncerstors}}),Object.defineProperty(e,"taggedConstraint",{enumerable:!0,get:function(){return _.taggedConstraint}}),Object.defineProperty(e,"namedConstraint",{enumerable:!0,get:function(){return _.namedConstraint}}),Object.defineProperty(e,"typeConstraint",{enumerable:!0,get:function(){return _.typeConstraint}});var b=n("ujMp");Object.defineProperty(e,"getServiceIdentifierAsString",{enumerable:!0,get:function(){return b.getServiceIdentifierAsString}});var x=n("78VC");Object.defineProperty(e,"multiBindToService",{enumerable:!0,get:function(){return x.multiBindToService}})},"4kuk":function(t,e,n){var r=n("SfRM"),i=n("Hvzi"),o=n("u8Dt"),a=n("ekgI"),s=n("JSQU");function u(t){var e=-1,n=null==t?0:t.length;this.clear();while(++e<n){var r=t[e];this.set(r[0],r[1])}}u.prototype.clear=r,u.prototype["delete"]=i,u.prototype.get=o,u.prototype.has=a,u.prototype.set=s,t.exports=u},"4l63":function(t,e,n){var r=n("I+eb"),i=n("wg0c");r({global:!0,forced:parseInt!=i},{parseInt:i})},"4mDm":function(t,e,n){"use strict";var r=n("/GqU"),i=n("RNIs"),o=n("P4y1"),a=n("afO8"),s=n("fdAy"),u="Array Iterator",c=a.set,l=a.getterFor(u);t.exports=s(Array,"Array",(function(t,e){c(this,{type:u,target:r(t),index:0,kind:e})}),(function(){var t=l(this),e=t.target,n=t.kind,r=t.index++;return!e||r>=e.length?(t.target=void 0,{value:void 0,done:!0}):"keys"==n?{value:r,done:!1}:"values"==n?{value:e[r],done:!1}:{value:[r,e[r]],done:!1}}),"values"),o.Arguments=o.Array,i("keys"),i("values"),i("entries")},"4oU/":function(t,e,n){var r=n("2oRo"),i=r.isFinite;t.exports=Number.isFinite||function(t){return"number"==typeof t&&i(t)}},"4syw":function(t,e,n){var r=n("busE");t.exports=function(t,e,n){for(var i in e)r(t,i,e[i],n);return t}},5921:function(t,e,n){var r=n("I+eb"),i=n("P940");r({target:"Map",stat:!0},{of:i})},"5JV0":function(t,e,n){"use strict";var r=n("I+eb"),i=n("xDBR"),o=n("glrk"),a=n("WGBp"),s=n("ImZN");r({target:"Set",proto:!0,real:!0,forced:i},{join:function(t){var e=o(this),n=a(e),r=void 0===t?",":String(t),i=[];return s(n,i.push,i,!1,!0),i.join(r)}})},"5Tg+":function(t,e,n){var r=n("tiKp");e.f=r},"5Tg0":function(t,e,n){(function(t){var r=n("Kz5y"),i=e&&!e.nodeType&&e,o=i&&"object"==typeof t&&t&&!t.nodeType&&t,a=o&&o.exports===i,s=a?r.Buffer:void 0,u=s?s.allocUnsafe:void 0;function c(t,e){if(e)return t.slice();var n=t.length,r=u?u(n):new t.constructor(n);return t.copy(r),r}t.exports=c}).call(this,n("hOG+")(t))},"5Yz+":function(t,e,n){"use strict";var r=n("/GqU"),i=n("ppGB"),o=n("UMSQ"),a=n("pkCn"),s=n("rkAj"),u=Math.min,c=[].lastIndexOf,l=!!c&&1/[1].lastIndexOf(1,-0)<0,f=a("lastIndexOf"),h=s("indexOf",{ACCESSORS:!0,1:0}),p=l||!f||!h;t.exports=p?function(t){if(l)return c.apply(this,arguments)||0;var e=r(this),n=o(e.length),a=n-1;for(arguments.length>1&&(a=u(a,i(arguments[1]))),a<0&&(a=n+a);a>=0;a--)if(a in e&&e[a]===t)return a||0;return-1}:c},"5mdu":function(t,e){t.exports=function(t){try{return{error:!1,value:t()}}catch(e){return{error:!0,value:e}}}},"5r1n":function(t,e,n){var r=n("I+eb"),i=n("eDxR"),o=n("glrk"),a=i.get,s=i.toKey;r({target:"Reflect",stat:!0},{getOwnMetadata:function(t,e){var n=arguments.length<3?void 0:s(arguments[2]);return a(t,o(e),n)}})},"5s+n":function(t,e,n){"use strict";var r,i,o,a,s=n("I+eb"),u=n("xDBR"),c=n("2oRo"),l=n("0GbY"),f=n("/qmn"),h=n("busE"),p=n("4syw"),d=n("1E5z"),v=n("JiZb"),g=n("hh1v"),m=n("HAuM"),y=n("GarU"),_=n("xrYK"),b=n("iSVu"),x=n("ImZN"),w=n("HH4o"),E=n("SEBh"),S=n("LPSS").set,O=n("tXUg"),C=n("zfnd"),T=n("RN6c"),A=n("8GlL"),k=n("5mdu"),M=n("afO8"),P=n("lMq5"),R=n("tiKp"),j=n("LQDL"),I=R("species"),L="Promise",N=M.get,D=M.set,F=M.getterFor(L),B=f,z=c.TypeError,U=c.document,V=c.process,H=l("fetch"),G=A.f,W=G,Z="process"==_(V),Y=!!(U&&U.createEvent&&c.dispatchEvent),X="unhandledrejection",q="rejectionhandled",K=0,Q=1,$=2,J=1,tt=2,et=P(L,(function(){var t=b(B)!==String(B);if(!t){if(66===j)return!0;if(!Z&&"function"!=typeof PromiseRejectionEvent)return!0}if(u&&!B.prototype["finally"])return!0;if(j>=51&&/native code/.test(B))return!1;var e=B.resolve(1),n=function(t){t((function(){}),(function(){}))},r=e.constructor={};return r[I]=n,!(e.then((function(){}))instanceof n)})),nt=et||!w((function(t){B.all(t)["catch"]((function(){}))})),rt=function(t){var e;return!(!g(t)||"function"!=typeof(e=t.then))&&e},it=function(t,e,n){if(!e.notified){e.notified=!0;var r=e.reactions;O((function(){var i=e.value,o=e.state==Q,a=0;while(r.length>a){var s,u,c,l=r[a++],f=o?l.ok:l.fail,h=l.resolve,p=l.reject,d=l.domain;try{f?(o||(e.rejection===tt&&ut(t,e),e.rejection=J),!0===f?s=i:(d&&d.enter(),s=f(i),d&&(d.exit(),c=!0)),s===l.promise?p(z("Promise-chain cycle")):(u=rt(s))?u.call(s,h,p):h(s)):p(i)}catch(v){d&&!c&&d.exit(),p(v)}}e.reactions=[],e.notified=!1,n&&!e.rejection&&at(t,e)}))}},ot=function(t,e,n){var r,i;Y?(r=U.createEvent("Event"),r.promise=e,r.reason=n,r.initEvent(t,!1,!0),c.dispatchEvent(r)):r={promise:e,reason:n},(i=c["on"+t])?i(r):t===X&&T("Unhandled promise rejection",n)},at=function(t,e){S.call(c,(function(){var n,r=e.value,i=st(e);if(i&&(n=k((function(){Z?V.emit("unhandledRejection",r,t):ot(X,t,r)})),e.rejection=Z||st(e)?tt:J,n.error))throw n.value}))},st=function(t){return t.rejection!==J&&!t.parent},ut=function(t,e){S.call(c,(function(){Z?V.emit("rejectionHandled",t):ot(q,t,e.value)}))},ct=function(t,e,n,r){return function(i){t(e,n,i,r)}},lt=function(t,e,n,r){e.done||(e.done=!0,r&&(e=r),e.value=n,e.state=$,it(t,e,!0))},ft=function(t,e,n,r){if(!e.done){e.done=!0,r&&(e=r);try{if(t===n)throw z("Promise can't be resolved itself");var i=rt(n);i?O((function(){var r={done:!1};try{i.call(n,ct(ft,t,r,e),ct(lt,t,r,e))}catch(o){lt(t,r,o,e)}})):(e.value=n,e.state=Q,it(t,e,!1))}catch(o){lt(t,{done:!1},o,e)}}};et&&(B=function(t){y(this,B,L),m(t),r.call(this);var e=N(this);try{t(ct(ft,this,e),ct(lt,this,e))}catch(n){lt(this,e,n)}},r=function(t){D(this,{type:L,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:K,value:void 0})},r.prototype=p(B.prototype,{then:function(t,e){var n=F(this),r=G(E(this,B));return r.ok="function"!=typeof t||t,r.fail="function"==typeof e&&e,r.domain=Z?V.domain:void 0,n.parent=!0,n.reactions.push(r),n.state!=K&&it(this,n,!1),r.promise},catch:function(t){return this.then(void 0,t)}}),i=function(){var t=new r,e=N(t);this.promise=t,this.resolve=ct(ft,t,e),this.reject=ct(lt,t,e)},A.f=G=function(t){return t===B||t===o?new i(t):W(t)},u||"function"!=typeof f||(a=f.prototype.then,h(f.prototype,"then",(function(t,e){var n=this;return new B((function(t,e){a.call(n,t,e)})).then(t,e)}),{unsafe:!0}),"function"==typeof H&&s({global:!0,enumerable:!0,forced:!0},{fetch:function(t){return C(B,H.apply(c,arguments))}}))),s({global:!0,wrap:!0,forced:et},{Promise:B}),d(B,L,!1,!0),v(L),o=l(L),s({target:L,stat:!0,forced:et},{reject:function(t){var e=G(this);return e.reject.call(void 0,t),e.promise}}),s({target:L,stat:!0,forced:u||et},{resolve:function(t){return C(u&&this===o?B:this,t)}}),s({target:L,stat:!0,forced:nt},{all:function(t){var e=this,n=G(e),r=n.resolve,i=n.reject,o=k((function(){var n=m(e.resolve),o=[],a=0,s=1;x(t,(function(t){var u=a++,c=!1;o.push(void 0),s++,n.call(e,t).then((function(t){c||(c=!0,o[u]=t,--s||r(o))}),i)})),--s||r(o)}));return o.error&&i(o.value),n.promise},race:function(t){var e=this,n=G(e),r=n.reject,i=k((function(){var i=m(e.resolve);x(t,(function(t){i.call(e,t).then(n.resolve,r)}))}));return i.error&&r(i.value),n.promise}})},"5wUe":function(t,e,n){var r=n("Q9SF"),i=n("MIOZ"),o=n("mGKP"),a=n("h0XC");function s(t,e){return r(t)||i(t,e)||o(t,e)||a()}t.exports=s,t.exports.__esModule=!0,t.exports["default"]=t.exports},"5xtp":function(t,e,n){"use strict";var r=n("I+eb"),i=n("g6v/"),o=n("6x0u"),a=n("ewvW"),s=n("HAuM"),u=n("m/L8");i&&r({target:"Object",proto:!0,forced:o},{__defineSetter__:function(t,e){u.f(a(this),t,{set:s(e),enumerable:!0,configurable:!0})}})},"66V8":function(t,e,n){"use strict";var r=n("I+eb"),i=n("g6v/"),o=n("4WOD"),a=n("0rvr"),s=n("fHMY"),u=n("m/L8"),c=n("XGwC"),l=n("ImZN"),f=n("kRJp"),h=n("afO8"),p=h.set,d=h.getterFor("AggregateError"),v=function(t,e){var n=this;if(!(n instanceof v))return new v(t,e);a&&(n=a(new Error(e),o(n)));var r=[];return l(t,r.push,r),i?p(n,{errors:r,type:"AggregateError"}):n.errors=r,void 0!==e&&f(n,"message",String(e)),n};v.prototype=s(Error.prototype,{constructor:c(5,v),message:c(5,""),name:c(5,"AggregateError")}),i&&u.f(v.prototype,"errors",{get:function(){return d(this).errors},configurable:!0}),r({global:!0},{AggregateError:v})},"67WC":function(t,e,n){"use strict";var r,i=n("qYE9"),o=n("g6v/"),a=n("2oRo"),s=n("hh1v"),u=n("UTVS"),c=n("9d/t"),l=n("kRJp"),f=n("busE"),h=n("m/L8").f,p=n("4WOD"),d=n("0rvr"),v=n("tiKp"),g=n("kOOl"),m=a.Int8Array,y=m&&m.prototype,_=a.Uint8ClampedArray,b=_&&_.prototype,x=m&&p(m),w=y&&p(y),E=Object.prototype,S=E.isPrototypeOf,O=v("toStringTag"),C=g("TYPED_ARRAY_TAG"),T=i&&!!d&&"Opera"!==c(a.opera),A=!1,k={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},M=function(t){var e=c(t);return"DataView"===e||u(k,e)},P=function(t){return s(t)&&u(k,c(t))},R=function(t){if(P(t))return t;throw TypeError("Target is not a typed array")},j=function(t){if(d){if(S.call(x,t))return t}else for(var e in k)if(u(k,r)){var n=a[e];if(n&&(t===n||S.call(n,t)))return t}throw TypeError("Target is not a typed array constructor")},I=function(t,e,n){if(o){if(n)for(var r in k){var i=a[r];i&&u(i.prototype,t)&&delete i.prototype[t]}w[t]&&!n||f(w,t,n?e:T&&y[t]||e)}},L=function(t,e,n){var r,i;if(o){if(d){if(n)for(r in k)i=a[r],i&&u(i,t)&&delete i[t];if(x[t]&&!n)return;try{return f(x,t,n?e:T&&m[t]||e)}catch(s){}}for(r in k)i=a[r],!i||i[t]&&!n||f(i,t,e)}};for(r in k)a[r]||(T=!1);if((!T||"function"!=typeof x||x===Function.prototype)&&(x=function(){throw TypeError("Incorrect invocation")},T))for(r in k)a[r]&&d(a[r],x);if((!T||!w||w===E)&&(w=x.prototype,T))for(r in k)a[r]&&d(a[r].prototype,w);if(T&&p(b)!==w&&d(b,w),o&&!u(w,O))for(r in A=!0,h(w,O,{get:function(){return s(this)?this[C]:void 0}}),k)a[r]&&l(a[r],C,r);t.exports={NATIVE_ARRAY_BUFFER_VIEWS:T,TYPED_ARRAY_TAG:A&&C,aTypedArray:R,aTypedArrayConstructor:j,exportTypedArrayMethod:I,exportTypedArrayStaticMethod:L,isView:M,isTypedArray:P,TypedArray:x,TypedArrayPrototype:w}},"6AGu":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BindingInSyntax=void 0;var r=n("FV85"),i=n("LKzl"),o=function(){function t(t){this._binding=t}return t.prototype.inRequestScope=function(){return this._binding.scope=r.BindingScopeEnum.Request,new i.BindingWhenOnSyntax(this._binding)},t.prototype.inSingletonScope=function(){return this._binding.scope=r.BindingScopeEnum.Singleton,new i.BindingWhenOnSyntax(this._binding)},t.prototype.inTransientScope=function(){return this._binding.scope=r.BindingScopeEnum.Transient,new i.BindingWhenOnSyntax(this._binding)},t}();e.BindingInSyntax=o},"6JNq":function(t,e,n){var r=n("UTVS"),i=n("Vu81"),o=n("Bs8V"),a=n("m/L8");t.exports=function(t,e){for(var n=i(e),s=a.f,u=o.f,c=0;c<n.length;c++){var l=n[c];r(t,l)||s(t,l,u(e,l))}}},"6JX1":function(t,e,n){(function(t,r){r(e,n("q1tI"))})(0,(function(t,e){"use strict";function n(t){if(t&&t.__esModule)return t;var e=Object.create(null);return t&&Object.keys(t).forEach((function(n){if("default"!==n){var r=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(e,n,r.get?r:{enumerable:!0,get:function(){return t[n]}})}})),e["default"]=t,Object.freeze(e)}var r=n(e);function i(t,e){return i=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},i(t,e)}function o(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,i(t,e)}var a=function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=[]),t.length!==e.length||t.some((function(t,n){return!Object.is(t,e[n])}))},s={error:null},u=function(t){function e(){for(var e,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return e=t.call.apply(t,[this].concat(r))||this,e.state=s,e.resetErrorBoundary=function(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];null==e.props.onReset||(t=e.props).onReset.apply(t,r),e.reset()},e}o(e,t),e.getDerivedStateFromError=function(t){return{error:t}};var n=e.prototype;return n.reset=function(){this.setState(s)},n.componentDidCatch=function(t,e){var n,r;null==(n=(r=this.props).onError)||n.call(r,t,e)},n.componentDidUpdate=function(t,e){var n,r,i=this.state.error,o=this.props.resetKeys;null!==i&&null!==e.error&&a(t.resetKeys,o)&&(null==(n=(r=this.props).onResetKeysChange)||n.call(r,t.resetKeys,o),this.reset())},n.render=function(){var t=this.state.error,e=this.props,n=e.fallbackRender,i=e.FallbackComponent,o=e.fallback;if(null!==t){var a={error:t,resetErrorBoundary:this.resetErrorBoundary};if(r.isValidElement(o))return o;if("function"===typeof n)return n(a);if(i)return r.createElement(i,a);throw new Error("react-error-boundary requires either a fallback, fallbackRender, or FallbackComponent prop")}return this.props.children},e}(r.Component);function c(t,e){var n=function(n){return r.createElement(u,e,r.createElement(t,n))},i=t.displayName||t.name||"Unknown";return n.displayName="withErrorBoundary("+i+")",n}function l(t){var e=r.useState(null),n=e[0],i=e[1];if(null!=t)throw t;if(null!=n)throw n;return i}t.ErrorBoundary=u,t.useErrorHandler=l,t.withErrorBoundary=c,Object.defineProperty(t,"__esModule",{value:!0})}))},"6LWA":function(t,e,n){var r=n("xrYK");t.exports=Array.isArray||function(t){return"Array"==r(t)}},"6V7H":function(t,e,n){var r=n("dG/n");r("patternMatch")},"6VoE":function(t,e,n){var r=n("tiKp"),i=n("P4y1"),o=r("iterator"),a=Array.prototype;t.exports=function(t){return void 0!==t&&(i.Array===t||a[o]===t)}},"6asN":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=void 0;var r=n("LtsZ"),i=n("zqmC"),o=(0,i.LinkWrapper)(r.NavLink);e["default"]=o},"6sVZ":function(t,e){var n=Object.prototype;function r(t){var e=t&&t.constructor,r="function"==typeof e&&e.prototype||n;return t===r}t.exports=r},"6x0u":function(t,e,n){"use strict";var r=n("xDBR"),i=n("2oRo"),o=n("0Dky");t.exports=r||!o((function(){var t=Math.random();__defineSetter__.call(null,t,(function(){})),delete i[t]}))},"6xEa":function(t,e,n){var r,i=function(){var t=String.fromCharCode,e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",r={};function i(t,e){if(!r[t]){r[t]={};for(var n=0;n<t.length;n++)r[t][t.charAt(n)]=n}return r[t][e]}var o={compressToBase64:function(t){if(null==t)return"";var n=o._compress(t,6,(function(t){return e.charAt(t)}));switch(n.length%4){default:case 0:return n;case 1:return n+"===";case 2:return n+"==";case 3:return n+"="}},decompressFromBase64:function(t){return null==t?"":""==t?null:o._decompress(t.length,32,(function(n){return i(e,t.charAt(n))}))},compressToUTF16:function(e){return null==e?"":o._compress(e,15,(function(e){return t(e+32)}))+" "},decompressFromUTF16:function(t){return null==t?"":""==t?null:o._decompress(t.length,16384,(function(e){return t.charCodeAt(e)-32}))},compressToUint8Array:function(t){for(var e=o.compress(t),n=new Uint8Array(2*e.length),r=0,i=e.length;r<i;r++){var a=e.charCodeAt(r);n[2*r]=a>>>8,n[2*r+1]=a%256}return n},decompressFromUint8Array:function(e){if(null===e||void 0===e)return o.decompress(e);for(var n=new Array(e.length/2),r=0,i=n.length;r<i;r++)n[r]=256*e[2*r]+e[2*r+1];var a=[];return n.forEach((function(e){a.push(t(e))})),o.decompress(a.join(""))},compressToEncodedURIComponent:function(t){return null==t?"":o._compress(t,6,(function(t){return n.charAt(t)}))},decompressFromEncodedURIComponent:function(t){return null==t?"":""==t?null:(t=t.replace(/ /g,"+"),o._decompress(t.length,32,(function(e){return i(n,t.charAt(e))})))},compress:function(e){return o._compress(e,16,(function(e){return t(e)}))},_compress:function(t,e,n){if(null==t)return"";var r,i,o,a={},s={},u="",c="",l="",f=2,h=3,p=2,d=[],v=0,g=0;for(o=0;o<t.length;o+=1)if(u=t.charAt(o),Object.prototype.hasOwnProperty.call(a,u)||(a[u]=h++,s[u]=!0),c=l+u,Object.prototype.hasOwnProperty.call(a,c))l=c;else{if(Object.prototype.hasOwnProperty.call(s,l)){if(l.charCodeAt(0)<256){for(r=0;r<p;r++)v<<=1,g==e-1?(g=0,d.push(n(v)),v=0):g++;for(i=l.charCodeAt(0),r=0;r<8;r++)v=v<<1|1&i,g==e-1?(g=0,d.push(n(v)),v=0):g++,i>>=1}else{for(i=1,r=0;r<p;r++)v=v<<1|i,g==e-1?(g=0,d.push(n(v)),v=0):g++,i=0;for(i=l.charCodeAt(0),r=0;r<16;r++)v=v<<1|1&i,g==e-1?(g=0,d.push(n(v)),v=0):g++,i>>=1}f--,0==f&&(f=Math.pow(2,p),p++),delete s[l]}else for(i=a[l],r=0;r<p;r++)v=v<<1|1&i,g==e-1?(g=0,d.push(n(v)),v=0):g++,i>>=1;f--,0==f&&(f=Math.pow(2,p),p++),a[c]=h++,l=String(u)}if(""!==l){if(Object.prototype.hasOwnProperty.call(s,l)){if(l.charCodeAt(0)<256){for(r=0;r<p;r++)v<<=1,g==e-1?(g=0,d.push(n(v)),v=0):g++;for(i=l.charCodeAt(0),r=0;r<8;r++)v=v<<1|1&i,g==e-1?(g=0,d.push(n(v)),v=0):g++,i>>=1}else{for(i=1,r=0;r<p;r++)v=v<<1|i,g==e-1?(g=0,d.push(n(v)),v=0):g++,i=0;for(i=l.charCodeAt(0),r=0;r<16;r++)v=v<<1|1&i,g==e-1?(g=0,d.push(n(v)),v=0):g++,i>>=1}f--,0==f&&(f=Math.pow(2,p),p++),delete s[l]}else for(i=a[l],r=0;r<p;r++)v=v<<1|1&i,g==e-1?(g=0,d.push(n(v)),v=0):g++,i>>=1;f--,0==f&&(f=Math.pow(2,p),p++)}for(i=2,r=0;r<p;r++)v=v<<1|1&i,g==e-1?(g=0,d.push(n(v)),v=0):g++,i>>=1;while(1){if(v<<=1,g==e-1){d.push(n(v));break}g++}return d.join("")},decompress:function(t){return null==t?"":""==t?null:o._decompress(t.length,32768,(function(e){return t.charCodeAt(e)}))},_decompress:function(e,n,r){var i,o,a,s,u,c,l,f=[],h=4,p=4,d=3,v="",g=[],m={val:r(0),position:n,index:1};for(i=0;i<3;i+=1)f[i]=i;a=0,u=Math.pow(2,2),c=1;while(c!=u)s=m.val&m.position,m.position>>=1,0==m.position&&(m.position=n,m.val=r(m.index++)),a|=(s>0?1:0)*c,c<<=1;switch(a){case 0:a=0,u=Math.pow(2,8),c=1;while(c!=u)s=m.val&m.position,m.position>>=1,0==m.position&&(m.position=n,m.val=r(m.index++)),a|=(s>0?1:0)*c,c<<=1;l=t(a);break;case 1:a=0,u=Math.pow(2,16),c=1;while(c!=u)s=m.val&m.position,m.position>>=1,0==m.position&&(m.position=n,m.val=r(m.index++)),a|=(s>0?1:0)*c,c<<=1;l=t(a);break;case 2:return""}f[3]=l,o=l,g.push(l);while(1){if(m.index>e)return"";a=0,u=Math.pow(2,d),c=1;while(c!=u)s=m.val&m.position,m.position>>=1,0==m.position&&(m.position=n,m.val=r(m.index++)),a|=(s>0?1:0)*c,c<<=1;switch(l=a){case 0:a=0,u=Math.pow(2,8),c=1;while(c!=u)s=m.val&m.position,m.position>>=1,0==m.position&&(m.position=n,m.val=r(m.index++)),a|=(s>0?1:0)*c,c<<=1;f[p++]=t(a),l=p-1,h--;break;case 1:a=0,u=Math.pow(2,16),c=1;while(c!=u)s=m.val&m.position,m.position>>=1,0==m.position&&(m.position=n,m.val=r(m.index++)),a|=(s>0?1:0)*c,c<<=1;f[p++]=t(a),l=p-1,h--;break;case 2:return g.join("")}if(0==h&&(h=Math.pow(2,d),d++),f[l])v=f[l];else{if(l!==p)return null;v=o+o.charAt(0)}g.push(v),f[p++]=o+v.charAt(0),h--,o=v,0==h&&(h=Math.pow(2,d),d++)}}};return o}();r=function(){return i}.call(e,n,e,t),void 0===r||(t.exports=r)},"7+kd":function(t,e,n){var r=n("dG/n");r("isConcatSpreadable")},"7+zs":function(t,e,n){var r=n("kRJp"),i=n("UesL"),o=n("tiKp"),a=o("toPrimitive"),s=Date.prototype;a in s||r(s,a,i)},"702D":function(t,e,n){var r=n("I+eb"),i=n("qY7S");r({target:"WeakMap",stat:!0},{from:i})},"77Zs":function(t,e,n){var r=n("Xi7e");function i(){this.__data__=new r,this.size=0}t.exports=i},"78VC":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.multiBindToService=void 0;var r=function(t){return function(e){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return n.forEach((function(n){return t.bind(n).toService(e)}))}}};e.multiBindToService=r},"7GkX":function(t,e,n){var r=n("b80T"),i=n("A90E"),o=n("MMmD");function a(t){return o(t)?r(t):i(t)}t.exports=a},"7Ix3":function(t,e){function n(t){var e=[];if(null!=t)for(var n in Object(t))e.push(n);return e}t.exports=n},"7JcK":function(t,e,n){"use strict";var r=n("67WC"),i=n("iqeF"),o=r.aTypedArrayConstructor,a=r.exportTypedArrayStaticMethod;a("of",(function(){var t=0,e=arguments.length,n=new(o(this))(e);while(e>t)n[t]=arguments[t++];return n}),i)},"7fqy":function(t,e){function n(t){var e=-1,n=Array(t.size);return t.forEach((function(t,r){n[++e]=[r,t]})),n}t.exports=n},"7sf/":function(t,e,n){"use strict";function r(){var t=n("q1tI");return r=function(){return t},t}function i(){var t=o(n("6xEa"));return i=function(){return t},t}function o(t){return t&&t.__esModule?t:{default:t}}function a(t,e){return f(t)||l(t,e)||u(t,e)||s()}function s(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function u(t,e){if(t){if("string"===typeof t)return c(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(t,e):void 0}}function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function l(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o,a,s=[],u=!0,c=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);u=!0);}catch(l){c=!0,i=l}finally{try{if(!u&&null!=n["return"]&&(a=n["return"](),Object(a)!==a))return}finally{if(c)throw i}}return s}}function f(t){if(Array.isArray(t))return t}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=void 0;var h={"zh-CN":"https://www.typescriptlang.org/zh/play","en-US":"https://www.typescriptlang.org/play"},p=function(t,e){var n=function(){var t=/^zh|cn$/.test(arguments.length<=0?void 0:arguments[0])?h["zh-CN"]:h["en-US"];return"".concat(t,"?skipLibCheck=true&jsx=1#code/").concat(i()["default"].compressToEncodedURIComponent(arguments.length<=1?void 0:arguments[1]))},o=(0,r().useState)(n(t,e)),s=a(o,2),u=s[0],c=s[1];return(0,r().useEffect)((function(){c(n(t,e))}),[t,e]),u};e["default"]=p},"7ueG":function(t,e,n){"use strict";var r=n("I+eb"),i=n("WKiH").start,o=n("yNLB"),a=o("trimStart"),s=a?function(){return i(this)}:"".trimStart;r({target:"String",proto:!0,forced:a},{trimStart:s,trimLeft:s})},"88Gu":function(t,e){var n=800,r=16,i=Date.now;function o(t){var e=0,o=0;return function(){var a=i(),s=r-(a-o);if(o=a,s>0){if(++e>=n)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}t.exports=o},"8GlL":function(t,e,n){"use strict";var r=n("HAuM"),i=function(t){var e,n;this.promise=new t((function(t,r){if(void 0!==e||void 0!==n)throw TypeError("Bad Promise constructor");e=t,n=r})),this.resolve=r(e),this.reject=r(n)};t.exports.f=function(t){return new i(t)}},"8L3h":function(t,e,n){"use strict";t.exports=n("f/k9")},"8STE":function(t,e,n){"use strict";var r=n("I+eb"),i=n("xDBR"),o=n("Cg3G");r({target:"WeakSet",proto:!0,real:!0,forced:i},{deleteAll:function(){return o.apply(this,arguments)}})},"8XRh":function(t,e,n){"use strict";var r=n("rePB"),i=n("VTBJ"),o=n("ODXe"),a=n("U8pU"),s=n("q1tI"),u=n("m+aA"),c=n("c+Xe"),l=n("TSYQ"),f=n.n(l),h=n("MNnm");function p(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit".concat(t)]="webkit".concat(e),n["Moz".concat(t)]="moz".concat(e),n["ms".concat(t)]="MS".concat(e),n["O".concat(t)]="o".concat(e.toLowerCase()),n}function d(t,e){var n={animationend:p("Animation","AnimationEnd"),transitionend:p("Transition","TransitionEnd")};return t&&("AnimationEvent"in e||delete n.animationend.animation,"TransitionEvent"in e||delete n.transitionend.transition),n}var v=d(Object(h["a"])(),"undefined"!==typeof window?window:{}),g={};if(Object(h["a"])()){var m=document.createElement("div");g=m.style}var y={};function _(t){if(y[t])return y[t];var e=v[t];if(e)for(var n=Object.keys(e),r=n.length,i=0;i<r;i+=1){var o=n[i];if(Object.prototype.hasOwnProperty.call(e,o)&&o in g)return y[t]=e[o],y[t]}return""}var b=_("animationend"),x=_("transitionend"),w=!(!b||!x),E=b||"animationend",S=x||"transitionend";function O(t,e){if(!t)return null;if("object"===Object(a["a"])(t)){var n=e.replace(/-\w/g,(function(t){return t[1].toUpperCase()}));return t[n]}return"".concat(t,"-").concat(e)}var C="none",T="appear",A="enter",k="leave",M="none",P="prepare",R="start",j="active",I="end",L=n("dm2S"),N=n("wgJM"),D=function(){var t=s["useRef"](null);function e(){N["a"].cancel(t.current)}function n(r){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;e();var o=Object(N["a"])((function(){i<=1?r({isCanceled:function(){return o!==t.current}}):n(r,i-1)}));t.current=o}return s["useEffect"]((function(){return function(){e()}}),[]),[n,e]},F=Object(h["a"])()?s["useLayoutEffect"]:s["useEffect"],B=F,z=[P,R,j,I],U=!1,V=!0;function H(t){return t===j||t===I}var G=function(t,e){var n=Object(L["a"])(M),r=Object(o["a"])(n,2),i=r[0],a=r[1],u=D(),c=Object(o["a"])(u,2),l=c[0],f=c[1];function h(){a(P,!0)}return B((function(){if(i!==M&&i!==I){var t=z.indexOf(i),n=z[t+1],r=e(i);r===U?a(n,!0):l((function(t){function e(){t.isCanceled()||a(n,!0)}!0===r?e():Promise.resolve(r).then(e)}))}}),[t,i]),s["useEffect"]((function(){return function(){f()}}),[]),[h,i]},W=function(t){var e=Object(s["useRef"])(),n=Object(s["useRef"])(t);n.current=t;var r=s["useCallback"]((function(t){n.current(t)}),[]);function i(t){t&&(t.removeEventListener(S,r),t.removeEventListener(E,r))}function o(t){e.current&&e.current!==t&&i(e.current),t&&t!==e.current&&(t.addEventListener(S,r),t.addEventListener(E,r),e.current=t)}return s["useEffect"]((function(){return function(){i(e.current)}}),[]),[o,i]};function Z(t,e,n,a){var u=a.motionEnter,c=void 0===u||u,l=a.motionAppear,f=void 0===l||l,h=a.motionLeave,p=void 0===h||h,d=a.motionDeadline,v=a.motionLeaveImmediately,g=a.onAppearPrepare,m=a.onEnterPrepare,y=a.onLeavePrepare,_=a.onAppearStart,b=a.onEnterStart,x=a.onLeaveStart,w=a.onAppearActive,E=a.onEnterActive,S=a.onLeaveActive,O=a.onAppearEnd,M=a.onEnterEnd,I=a.onLeaveEnd,N=a.onVisibleChanged,D=Object(L["a"])(),F=Object(o["a"])(D,2),z=F[0],Z=F[1],Y=Object(L["a"])(C),X=Object(o["a"])(Y,2),q=X[0],K=X[1],Q=Object(L["a"])(null),$=Object(o["a"])(Q,2),J=$[0],tt=$[1],et=Object(s["useRef"])(!1),nt=Object(s["useRef"])(null);function rt(){return n()}var it=Object(s["useRef"])(!1);function ot(t){var e=rt();if(!t||t.deadline||t.target===e){var n,r=it.current;q===T&&r?n=null===O||void 0===O?void 0:O(e,t):q===A&&r?n=null===M||void 0===M?void 0:M(e,t):q===k&&r&&(n=null===I||void 0===I?void 0:I(e,t)),q!==C&&r&&!1!==n&&(K(C,!0),tt(null,!0))}}var at=W(ot),st=Object(o["a"])(at,1),ut=st[0],ct=s["useMemo"]((function(){var t,e,n;switch(q){case T:return t={},Object(r["a"])(t,P,g),Object(r["a"])(t,R,_),Object(r["a"])(t,j,w),t;case A:return e={},Object(r["a"])(e,P,m),Object(r["a"])(e,R,b),Object(r["a"])(e,j,E),e;case k:return n={},Object(r["a"])(n,P,y),Object(r["a"])(n,R,x),Object(r["a"])(n,j,S),n;default:return{}}}),[q]),lt=G(q,(function(t){if(t===P){var e=ct[P];return e?e(rt()):U}var n;pt in ct&&tt((null===(n=ct[pt])||void 0===n?void 0:n.call(ct,rt(),null))||null);return pt===j&&(ut(rt()),d>0&&(clearTimeout(nt.current),nt.current=setTimeout((function(){ot({deadline:!0})}),d))),V})),ft=Object(o["a"])(lt,2),ht=ft[0],pt=ft[1],dt=H(pt);it.current=dt,B((function(){Z(e);var n,r=et.current;(et.current=!0,t)&&(!r&&e&&f&&(n=T),r&&e&&c&&(n=A),(r&&!e&&p||!r&&v&&!e&&p)&&(n=k),n&&(K(n),ht()))}),[e]),Object(s["useEffect"])((function(){(q===T&&!f||q===A&&!c||q===k&&!p)&&K(C)}),[f,c,p]),Object(s["useEffect"])((function(){return function(){et.current=!1,clearTimeout(nt.current)}}),[]);var vt=s["useRef"](!1);Object(s["useEffect"])((function(){z&&(vt.current=!0),void 0!==z&&q===C&&((vt.current||z)&&(null===N||void 0===N||N(z)),vt.current=!0)}),[z,q]);var gt=J;return ct[P]&&pt===R&&(gt=Object(i["a"])({transition:"none"},gt)),[q,pt,gt,null!==z&&void 0!==z?z:e]}var Y=n("1OyB"),X=n("vuIU"),q=n("Ji7U"),K=n("LK+K"),Q=function(t){Object(q["a"])(n,t);var e=Object(K["a"])(n);function n(){return Object(Y["a"])(this,n),e.apply(this,arguments)}return Object(X["a"])(n,[{key:"render",value:function(){return this.props.children}}]),n}(s["Component"]),$=Q;function J(t){var e=t;function n(t){return!(!t.motionName||!e)}"object"===Object(a["a"])(t)&&(e=t.transitionSupport);var l=s["forwardRef"]((function(t,e){var a=t.visible,l=void 0===a||a,h=t.removeOnLeave,p=void 0===h||h,d=t.forceRender,v=t.children,g=t.motionName,m=t.leavedClassName,y=t.eventProps,_=n(t),b=Object(s["useRef"])(),x=Object(s["useRef"])();function w(){try{return b.current instanceof HTMLElement?b.current:Object(u["a"])(x.current)}catch(t){return null}}var E=Z(_,l,w,t),S=Object(o["a"])(E,4),T=S[0],A=S[1],k=S[2],M=S[3],j=s["useRef"](M);M&&(j.current=!0);var I,L=s["useCallback"]((function(t){b.current=t,Object(c["b"])(e,t)}),[e]),N=Object(i["a"])(Object(i["a"])({},y),{},{visible:l});if(v)if(T!==C&&n(t)){var D,F;A===P?F="prepare":H(A)?F="active":A===R&&(F="start"),I=v(Object(i["a"])(Object(i["a"])({},N),{},{className:f()(O(g,T),(D={},Object(r["a"])(D,O(g,"".concat(T,"-").concat(F)),F),Object(r["a"])(D,g,"string"===typeof g),D)),style:k}),L)}else I=M?v(Object(i["a"])({},N),L):!p&&j.current?v(Object(i["a"])(Object(i["a"])({},N),{},{className:m}),L):d?v(Object(i["a"])(Object(i["a"])({},N),{},{style:{display:"none"}}),L):null;else I=null;if(s["isValidElement"](I)&&Object(c["c"])(I)){var B=I,z=B.ref;z||(I=s["cloneElement"](I,{ref:L}))}return s["createElement"]($,{ref:x},I)}));return l.displayName="CSSMotion",l}var tt=J(w),et=n("wx14"),nt=n("Ff2n"),rt="add",it="keep",ot="remove",at="removed";function st(t){var e;return e=t&&"object"===Object(a["a"])(t)&&"key"in t?t:{key:t},Object(i["a"])(Object(i["a"])({},e),{},{key:String(e.key)})}function ut(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return t.map(st)}function ct(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=[],r=0,o=e.length,a=ut(t),s=ut(e);a.forEach((function(t){for(var e=!1,a=r;a<o;a+=1){var u=s[a];if(u.key===t.key){r<a&&(n=n.concat(s.slice(r,a).map((function(t){return Object(i["a"])(Object(i["a"])({},t),{},{status:rt})}))),r=a),n.push(Object(i["a"])(Object(i["a"])({},u),{},{status:it})),r+=1,e=!0;break}}e||n.push(Object(i["a"])(Object(i["a"])({},t),{},{status:ot}))})),r<o&&(n=n.concat(s.slice(r).map((function(t){return Object(i["a"])(Object(i["a"])({},t),{},{status:rt})}))));var u={};n.forEach((function(t){var e=t.key;u[e]=(u[e]||0)+1}));var c=Object.keys(u).filter((function(t){return u[t]>1}));return c.forEach((function(t){n=n.filter((function(e){var n=e.key,r=e.status;return n!==t||r!==ot})),n.forEach((function(e){e.key===t&&(e.status=it)}))})),n}var lt=["component","children","onVisibleChanged","onAllRemoved"],ft=["status"],ht=["eventProps","visible","children","motionName","motionAppear","motionEnter","motionLeave","motionLeaveImmediately","motionDeadline","removeOnLeave","leavedClassName","onAppearStart","onAppearActive","onAppearEnd","onEnterStart","onEnterActive","onEnterEnd","onLeaveStart","onLeaveActive","onLeaveEnd"];function pt(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:tt,n=function(t){Object(q["a"])(r,t);var n=Object(K["a"])(r);function r(){var t;Object(Y["a"])(this,r);for(var e=arguments.length,o=new Array(e),a=0;a<e;a++)o[a]=arguments[a];return t=n.call.apply(n,[this].concat(o)),t.state={keyEntities:[]},t.removeKey=function(e){var n=t.state.keyEntities,r=n.map((function(t){return t.key!==e?t:Object(i["a"])(Object(i["a"])({},t),{},{status:at})}));return t.setState({keyEntities:r}),r.filter((function(t){var e=t.status;return e!==at})).length},t}return Object(X["a"])(r,[{key:"render",value:function(){var t=this,n=this.state.keyEntities,r=this.props,i=r.component,o=r.children,a=r.onVisibleChanged,u=r.onAllRemoved,c=Object(nt["a"])(r,lt),l=i||s["Fragment"],f={};return ht.forEach((function(t){f[t]=c[t],delete c[t]})),delete c.keys,s["createElement"](l,c,n.map((function(n){var r=n.status,i=Object(nt["a"])(n,ft),c=r===rt||r===it;return s["createElement"](e,Object(et["a"])({},f,{key:i.key,visible:c,eventProps:i,onVisibleChanged:function(e){if(null===a||void 0===a||a(e,{key:i.key}),!e){var n=t.removeKey(i.key);0===n&&u&&u()}}}),o)})))}}],[{key:"getDerivedStateFromProps",value:function(t,e){var n=t.keys,r=e.keyEntities,i=ut(n),o=ct(r,i);return{keyEntities:o.filter((function(t){var e=r.find((function(e){var n=e.key;return t.key===n}));return!e||e.status!==at||t.status!==ot}))}}}]),r}(s["Component"]);return n.defaultProps={component:"div"},n}pt(w),e["a"]=tt},"8YOa":function(t,e,n){var r=n("0BK2"),i=n("hh1v"),o=n("UTVS"),a=n("m/L8").f,s=n("kOOl"),u=n("uy83"),c=s("meta"),l=0,f=Object.isExtensible||function(){return!0},h=function(t){a(t,c,{value:{objectID:"O"+ ++l,weakData:{}}})},p=function(t,e){if(!i(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!o(t,c)){if(!f(t))return"F";if(!e)return"E";h(t)}return t[c].objectID},d=function(t,e){if(!o(t,c)){if(!f(t))return!0;if(!e)return!1;h(t)}return t[c].weakData},v=function(t){return u&&g.REQUIRED&&f(t)&&!o(t,c)&&h(t),t},g=t.exports={REQUIRED:!1,fastKey:p,getWeakData:d,onFreeze:v};r[c]=!0},"8go2":function(t,e,n){n("gg6r")},"8jRI":function(t,e,n){"use strict";var r="%[a-f0-9]{2}",i=new RegExp("("+r+")|([^%]+?)","gi"),o=new RegExp("("+r+")+","gi");function a(t,e){try{return[decodeURIComponent(t.join(""))]}catch(i){}if(1===t.length)return t;e=e||1;var n=t.slice(0,e),r=t.slice(e);return Array.prototype.concat.call([],a(n),a(r))}function s(t){try{return decodeURIComponent(t)}catch(r){for(var e=t.match(i)||[],n=1;n<e.length;n++)t=a(e,n).join(""),e=t.match(i)||[];return t}}function u(t){var e={"%FE%FF":"\ufffd\ufffd","%FF%FE":"\ufffd\ufffd"},n=o.exec(t);while(n){try{e[n[0]]=decodeURIComponent(n[0])}catch(c){var r=s(n[0]);r!==n[0]&&(e[n[0]]=r)}n=o.exec(t)}e["%C2"]="\ufffd";for(var i=Object.keys(e),a=0;a<i.length;a++){var u=i[a];t=t.replace(new RegExp(u,"g"),e[u])}return t}t.exports=function(t){if("string"!==typeof t)throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof t+"`");try{return t=t.replace(/\+/g," "),decodeURIComponent(t)}catch(e){return u(t)}}},"8r4s":function(t,e,n){var r=n("I+eb"),i=n("P940");r({target:"Set",stat:!0},{of:i})},"8yz6":function(t,e,n){"use strict";t.exports=function(t,e){if("string"!==typeof t||"string"!==typeof e)throw new TypeError("Expected the arguments to be of type `string`");if(""===e)return[t];var n=t.indexOf(e);return-1===n?[t]:[t.slice(0,n),t.slice(n+e.length)]}},"90hW":function(t,e){t.exports=Math.sign||function(t){return 0==(t=+t)||t!=t?t:t<0?-1:1}},"93I0":function(t,e,n){var r=n("VpIT"),i=n("kOOl"),o=r("keys");t.exports=function(t){return o[t]||(o[t]=i(t))}},"94Xl":function(t,e,n){var r=n("JiZb");r("Array")},"9D6x":function(t,e,n){"use strict";var r=n("I+eb"),i=n("xDBR"),o=n("glrk"),a=n("HAuM");r({target:"Map",proto:!0,real:!0,forced:i},{update:function(t,e){var n=o(this),r=arguments.length;a(e);var i=n.has(t);if(!i&&r<3)throw TypeError("Updating absent value");var s=i?n.get(t):a(r>2?arguments[2]:void 0)(t,n);return n.set(t,e(s,t,n)),n}})},"9Fde":function(t,e,n){"use strict";var r=this&&this.__awaiter||function(t,e,n,r){function i(t){return t instanceof n?t:new n((function(e){e(t)}))}return new(n||(n=Promise))((function(n,o){function a(t){try{u(r.next(t))}catch(e){o(e)}}function s(t){try{u(r["throw"](t))}catch(e){o(e)}}function u(t){t.done?n(t.value):i(t.value).then(a,s)}u((r=r.apply(t,e||[])).next())}))},i=this&&this.__generator||function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(t){return function(e){return u([t,e])}}function u(o){if(n)throw new TypeError("Generator is already executing.");while(a)try{if(n=1,r&&(i=2&o[0]?r["return"]:o[0]?r["throw"]||((i=r["return"])&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(i=a.trys,!(i=i.length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(s){o=[6,s],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}},o=this&&this.__spreadArray||function(t,e){for(var n=0,r=e.length,i=t.length;n<r;n++,i++)t[i]=e[n];return t};Object.defineProperty(e,"__esModule",{value:!0}),e.Container=void 0;var a=n("LgvC"),s=n("MON2"),u=n("FV85"),c=n("xfSm"),l=n("wnjb"),f=n("h7MG"),h=n("aPG5"),p=n("gzZq"),d=n("d9O0"),v=n("ujMp"),g=n("HpQ9"),m=n("AwBQ"),y=function(){function t(t){this._appliedMiddleware=[];var e=t||{};if("object"!==typeof e)throw new Error(""+s.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT);if(void 0===e.defaultScope)e.defaultScope=u.BindingScopeEnum.Transient;else if(e.defaultScope!==u.BindingScopeEnum.Singleton&&e.defaultScope!==u.BindingScopeEnum.Transient&&e.defaultScope!==u.BindingScopeEnum.Request)throw new Error(""+s.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE);if(void 0===e.autoBindInjectable)e.autoBindInjectable=!1;else if("boolean"!==typeof e.autoBindInjectable)throw new Error(""+s.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE);if(void 0===e.skipBaseClassChecks)e.skipBaseClassChecks=!1;else if("boolean"!==typeof e.skipBaseClassChecks)throw new Error(""+s.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK);this.options={autoBindInjectable:e.autoBindInjectable,defaultScope:e.defaultScope,skipBaseClassChecks:e.skipBaseClassChecks},this.id=d.id(),this._bindingDictionary=new m.Lookup,this._snapshots=[],this._middleware=null,this.parent=null,this._metadataReader=new l.MetadataReader}return t.merge=function(e,n){for(var r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];var a=new t,s=o([e,n],r).map((function(t){return f.getBindingDictionary(t)})),u=f.getBindingDictionary(a);function c(t,e){t.traverse((function(t,n){n.forEach((function(t){e.add(t.serviceIdentifier,t.clone())}))}))}return s.forEach((function(t){c(t,u)})),a},t.prototype.load=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=this._getContainerModuleHelpersFactory(),r=0,i=t;r<i.length;r++){var o=i[r],a=n(o.id);o.registry(a.bindFunction,a.unbindFunction,a.isboundFunction,a.rebindFunction)}},t.prototype.loadAsync=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return r(this,void 0,void 0,(function(){var e,n,r,o,a;return i(this,(function(i){switch(i.label){case 0:e=this._getContainerModuleHelpersFactory(),n=0,r=t,i.label=1;case 1:return n<r.length?(o=r[n],a=e(o.id),[4,o.registry(a.bindFunction,a.unbindFunction,a.isboundFunction,a.rebindFunction)]):[3,4];case 2:i.sent(),i.label=3;case 3:return n++,[3,1];case 4:return[2]}}))}))},t.prototype.unload=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=function(t){return function(e){return e.moduleId===t}};e.forEach((function(e){var n=r(e.id);t._bindingDictionary.removeByCondition(n)}))},t.prototype.bind=function(t){var e=this.options.defaultScope||u.BindingScopeEnum.Transient,n=new a.Binding(t,e);return this._bindingDictionary.add(t,n),new p.BindingToSyntax(n)},t.prototype.rebind=function(t){return this.unbind(t),this.bind(t)},t.prototype.unbind=function(t){try{this._bindingDictionary.remove(t)}catch(e){throw new Error(s.CANNOT_UNBIND+" "+v.getServiceIdentifierAsString(t))}},t.prototype.unbindAll=function(){this._bindingDictionary=new m.Lookup},t.prototype.isBound=function(t){var e=this._bindingDictionary.hasKey(t);return!e&&this.parent&&(e=this.parent.isBound(t)),e},t.prototype.isBoundNamed=function(t,e){return this.isBoundTagged(t,c.NAMED_TAG,e)},t.prototype.isBoundTagged=function(t,e,n){var r=!1;if(this._bindingDictionary.hasKey(t)){var i=this._bindingDictionary.get(t),o=f.createMockRequest(this,t,e,n);r=i.some((function(t){return t.constraint(o)}))}return!r&&this.parent&&(r=this.parent.isBoundTagged(t,e,n)),r},t.prototype.snapshot=function(){this._snapshots.push(g.ContainerSnapshot.of(this._bindingDictionary.clone(),this._middleware))},t.prototype.restore=function(){var t=this._snapshots.pop();if(void 0===t)throw new Error(s.NO_MORE_SNAPSHOTS_AVAILABLE);this._bindingDictionary=t.bindings,this._middleware=t.middleware},t.prototype.createChild=function(e){var n=new t(e||this.options);return n.parent=this,n},t.prototype.applyMiddleware=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._appliedMiddleware=this._appliedMiddleware.concat(t);var n=this._middleware?this._middleware:this._planAndResolve();this._middleware=t.reduce((function(t,e){return e(t)}),n)},t.prototype.applyCustomMetadataReader=function(t){this._metadataReader=t},t.prototype.get=function(t){return this._get(!1,!1,u.TargetTypeEnum.Variable,t)},t.prototype.getTagged=function(t,e,n){return this._get(!1,!1,u.TargetTypeEnum.Variable,t,e,n)},t.prototype.getNamed=function(t,e){return this.getTagged(t,c.NAMED_TAG,e)},t.prototype.getAll=function(t){return this._get(!0,!0,u.TargetTypeEnum.Variable,t)},t.prototype.getAllTagged=function(t,e,n){return this._get(!1,!0,u.TargetTypeEnum.Variable,t,e,n)},t.prototype.getAllNamed=function(t,e){return this.getAllTagged(t,c.NAMED_TAG,e)},t.prototype.resolve=function(t){var e=this.createChild();return e.bind(t).toSelf(),this._appliedMiddleware.forEach((function(t){e.applyMiddleware(t)})),e.get(t)},t.prototype._getContainerModuleHelpersFactory=function(){var t=this,e=function(t,e){t._binding.moduleId=e},n=function(n){return function(r){var i=t.bind.bind(t),o=i(r);return e(o,n),o}},r=function(e){return function(e){var n=t.unbind.bind(t);n(e)}},i=function(e){return function(e){var n=t.isBound.bind(t);return n(e)}},o=function(n){return function(r){var i=t.rebind.bind(t),o=i(r);return e(o,n),o}};return function(t){return{bindFunction:n(t),isboundFunction:i(t),rebindFunction:o(t),unbindFunction:r(t)}}},t.prototype._get=function(t,e,n,r,i,o){var a=null,u={avoidConstraints:t,contextInterceptor:function(t){return t},isMultiInject:e,key:i,serviceIdentifier:r,targetType:n,value:o};if(this._middleware){if(a=this._middleware(u),void 0===a||null===a)throw new Error(s.INVALID_MIDDLEWARE_RETURN)}else a=this._planAndResolve()(u);return a},t.prototype._planAndResolve=function(){var t=this;return function(e){var n=f.plan(t._metadataReader,t,e.isMultiInject,e.targetType,e.serviceIdentifier,e.key,e.value,e.avoidConstraints);n=e.contextInterceptor(n);var r=h.resolve(n);return r}},t}();e.Container=y},"9N29":function(t,e,n){"use strict";var r=n("I+eb"),i=n("1Y/n").right,o=n("pkCn"),a=n("rkAj"),s=o("reduceRight"),u=a("reduce",{1:0});r({target:"Array",proto:!0,forced:!s||!u},{reduceRight:function(t){return i(this,t,arguments.length,arguments.length>1?arguments[1]:void 0)}})},"9R94":function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=!0,i="Invariant failed";function o(t,e){if(!t){if(r)throw new Error(i);var n="function"===typeof e?e():e,o=n?"".concat(i,": ").concat(n):i;throw new Error(o)}}},"9d/t":function(t,e,n){var r=n("AO7/"),i=n("xrYK"),o=n("tiKp"),a=o("toStringTag"),s="Arguments"==i(function(){return arguments}()),u=function(t,e){try{return t[e]}catch(n){}};t.exports=r?i:function(t){var e,n,r;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=u(e=Object(t),a))?n:s?i(e):"Object"==(r=i(e))&&"function"==typeof e.callee?"Arguments":r}},"9kvl":function(t,e,n){"use strict";var r=n("FfOG");n.d(e,"a",(function(){return r["b"]}));n("bCY9")},"9xmf":function(t,e,n){var r=n("EdiO");function i(t){if(Array.isArray(t))return r(t)}t.exports=i,t.exports.__esModule=!0,t.exports["default"]=t.exports},"A1R+":function(t,e,n){"use strict";t.exports=i,t.exports["default"]=i;var r=n("YcpW");function i(t,e){if(!(this instanceof i))return new i(t,e);this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),e&&this._initFormat(e),this.clear()}function o(t,e,n){if(!n)return e.indexOf(t);for(var r=0;r<e.length;r++)if(n(t,e[r]))return r;return-1}function a(t,e){s(t,0,t.children.length,e,t)}function s(t,e,n,r,i){i||(i=m(null)),i.minX=1/0,i.minY=1/0,i.maxX=-1/0,i.maxY=-1/0;for(var o,a=e;a<n;a++)o=t.children[a],u(i,t.leaf?r(o):o);return i}function u(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function c(t,e){return t.minX-e.minX}function l(t,e){return t.minY-e.minY}function f(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function h(t){return t.maxX-t.minX+(t.maxY-t.minY)}function p(t,e){return(Math.max(e.maxX,t.maxX)-Math.min(e.minX,t.minX))*(Math.max(e.maxY,t.maxY)-Math.min(e.minY,t.minY))}function d(t,e){var n=Math.max(t.minX,e.minX),r=Math.max(t.minY,e.minY),i=Math.min(t.maxX,e.maxX),o=Math.min(t.maxY,e.maxY);return Math.max(0,i-n)*Math.max(0,o-r)}function v(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function g(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function m(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function y(t,e,n,i,o){var a,s=[e,n];while(s.length)n=s.pop(),e=s.pop(),n-e<=i||(a=e+Math.ceil((n-e)/i/2)*i,r(t,a,e,n,o),s.push(e,a,a,n))}i.prototype={all:function(){return this._all(this.data,[])},search:function(t){var e=this.data,n=[],r=this.toBBox;if(!g(t,e))return n;var i,o,a,s,u=[];while(e){for(i=0,o=e.children.length;i<o;i++)a=e.children[i],s=e.leaf?r(a):a,g(t,s)&&(e.leaf?n.push(a):v(t,s)?this._all(a,n):u.push(a));e=u.pop()}return n},collides:function(t){var e=this.data,n=this.toBBox;if(!g(t,e))return!1;var r,i,o,a,s=[];while(e){for(r=0,i=e.children.length;r<i;r++)if(o=e.children[r],a=e.leaf?n(o):o,g(t,a)){if(e.leaf||v(t,a))return!0;s.push(o)}e=s.pop()}return!1},load:function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0,n=t.length;e<n;e++)this.insert(t[e]);return this}var r=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===r.height)this._splitRoot(this.data,r);else{if(this.data.height<r.height){var i=this.data;this.data=r,r=i}this._insert(r,this.data.height-r.height-1,!0)}else this.data=r;return this},insert:function(t){return t&&this._insert(t,this.data.height-1),this},clear:function(){return this.data=m([]),this},remove:function(t,e){if(!t)return this;var n,r,i,a,s=this.data,u=this.toBBox(t),c=[],l=[];while(s||c.length){if(s||(s=c.pop(),r=c[c.length-1],n=l.pop(),a=!0),s.leaf&&(i=o(t,s.children,e),-1!==i))return s.children.splice(i,1),c.push(s),this._condense(c),this;a||s.leaf||!v(s,u)?r?(n++,s=r.children[n],a=!1):s=null:(c.push(s),l.push(n),n=0,r=s,s=s.children[0])}return this},toBBox:function(t){return t},compareMinX:c,compareMinY:l,toJSON:function(){return this.data},fromJSON:function(t){return this.data=t,this},_all:function(t,e){var n=[];while(t)t.leaf?e.push.apply(e,t.children):n.push.apply(n,t.children),t=n.pop();return e},_build:function(t,e,n,r){var i,o=n-e+1,s=this._maxEntries;if(o<=s)return i=m(t.slice(e,n+1)),a(i,this.toBBox),i;r||(r=Math.ceil(Math.log(o)/Math.log(s)),s=Math.ceil(o/Math.pow(s,r-1))),i=m([]),i.leaf=!1,i.height=r;var u,c,l,f,h=Math.ceil(o/s),p=h*Math.ceil(Math.sqrt(s));for(y(t,e,n,p,this.compareMinX),u=e;u<=n;u+=p)for(l=Math.min(u+p-1,n),y(t,u,l,h,this.compareMinY),c=u;c<=l;c+=h)f=Math.min(c+h-1,l),i.children.push(this._build(t,c,f,r-1));return a(i,this.toBBox),i},_chooseSubtree:function(t,e,n,r){var i,o,a,s,u,c,l,h;while(1){if(r.push(e),e.leaf||r.length-1===n)break;for(l=h=1/0,i=0,o=e.children.length;i<o;i++)a=e.children[i],u=f(a),c=p(t,a)-u,c<h?(h=c,l=u<l?u:l,s=a):c===h&&u<l&&(l=u,s=a);e=s||e.children[0]}return e},_insert:function(t,e,n){var r=this.toBBox,i=n?t:r(t),o=[],a=this._chooseSubtree(i,this.data,e,o);a.children.push(t),u(a,i);while(e>=0){if(!(o[e].children.length>this._maxEntries))break;this._split(o,e),e--}this._adjustParentBBoxes(i,o,e)},_split:function(t,e){var n=t[e],r=n.children.length,i=this._minEntries;this._chooseSplitAxis(n,i,r);var o=this._chooseSplitIndex(n,i,r),s=m(n.children.splice(o,n.children.length-o));s.height=n.height,s.leaf=n.leaf,a(n,this.toBBox),a(s,this.toBBox),e?t[e-1].children.push(s):this._splitRoot(n,s)},_splitRoot:function(t,e){this.data=m([t,e]),this.data.height=t.height+1,this.data.leaf=!1,a(this.data,this.toBBox)},_chooseSplitIndex:function(t,e,n){var r,i,o,a,u,c,l,h;for(c=l=1/0,r=e;r<=n-e;r++)i=s(t,0,r,this.toBBox),o=s(t,r,n,this.toBBox),a=d(i,o),u=f(i)+f(o),a<c?(c=a,h=r,l=u<l?u:l):a===c&&u<l&&(l=u,h=r);return h},_chooseSplitAxis:function(t,e,n){var r=t.leaf?this.compareMinX:c,i=t.leaf?this.compareMinY:l,o=this._allDistMargin(t,e,n,r),a=this._allDistMargin(t,e,n,i);o<a&&t.children.sort(r)},_allDistMargin:function(t,e,n,r){t.children.sort(r);var i,o,a=this.toBBox,c=s(t,0,e,a),l=s(t,n-e,n,a),f=h(c)+h(l);for(i=e;i<n-e;i++)o=t.children[i],u(c,t.leaf?a(o):o),f+=h(c);for(i=n-e-1;i>=e;i--)o=t.children[i],u(l,t.leaf?a(o):o),f+=h(l);return f},_adjustParentBBoxes:function(t,e,n){for(var r=n;r>=0;r--)u(e[r],t)},_condense:function(t){for(var e,n=t.length-1;n>=0;n--)0===t[n].children.length?n>0?(e=t[n-1].children,e.splice(e.indexOf(t[n]),1)):this.clear():a(t[n],this.toBBox)},_initFormat:function(t){var e=["return a"," - b",";"];this.compareMinX=new Function("a","b",e.join(t[0])),this.compareMinY=new Function("a","b",e.join(t[1])),this.toBBox=new Function("a","return {minX: a"+t[0]+", minY: a"+t[1]+", maxX: a"+t[2]+", maxY: a"+t[3]+"};")}}},A2ZE:function(t,e,n){var r=n("HAuM");t.exports=function(t,e,n){if(r(t),void 0===e)return t;switch(n){case 0:return function(){return t.call(e)};case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)}}return function(){return t.apply(e,arguments)}}},A90E:function(t,e,n){var r=n("6sVZ"),i=n("V6Ve"),o=Object.prototype,a=o.hasOwnProperty;function s(t){if(!r(t))return i(t);var e=[];for(var n in Object(t))a.call(t,n)&&"constructor"!=n&&e.push(n);return e}t.exports=s},AK2Z:function(t,e,n){},"AO7/":function(t,e,n){var r=n("tiKp"),i=r("toStringTag"),o={};o[i]="z",t.exports="[object z]"===String(o)},AP2z:function(t,e,n){var r=n("nmnc"),i=Object.prototype,o=i.hasOwnProperty,a=i.toString,s=r?r.toStringTag:void 0;function u(t){var e=o.call(t,s),n=t[s];try{t[s]=void 0;var r=!0}catch(u){}var i=a.call(t);return r&&(e?t[s]=n:delete t[s]),i}t.exports=u},APxj:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("Ucsi");function i(t,e){void 0===e&&(e=!0);var n=r.makePropertyInjectDecorator(t,e),i=r.makePropertyInjectNamedDecorator(t,e),o=r.makePropertyInjectTaggedDecorator(t,e),a=r.makePropertyMultiInjectDecorator(t,e);return{lazyInject:n,lazyInjectNamed:i,lazyInjectTagged:o,lazyMultiInject:a}}e["default"]=i},AQPS:function(t,e,n){},AVoK:function(t,e,n){"use strict";var r=n("I+eb"),i=n("xDBR"),o=n("Cg3G");r({target:"Set",proto:!0,real:!0,forced:i},{deleteAll:function(){return o.apply(this,arguments)}})},AfwI:function(t,e,n){var r;(function(i,o,a,s){"use strict";var u,c="undefined"!==typeof my&&!!my&&"function"===typeof my.showToast&&!0!==my.isFRM,l="undefined"!==typeof wx&&null!==wx&&("undefined"!==typeof wx.request||"undefined"!==typeof wx.miniProgram),f=c||l,h=["","webkit","Moz","MS","ms","o"],p=f?"":o.createElement("div"),d="function",v=Math.round,g=Math.abs,m=Date.now;function y(t,e,n){return setTimeout(O(t,n),e)}function _(t,e,n){return!!Array.isArray(t)&&(b(t,n[e],n),!0)}function b(t,e,n){var r;if(t)if(t.forEach)t.forEach(e,n);else if(t.length!==s){r=0;while(r<t.length)e.call(n,t[r],r,t),r++}else for(r in t)t.hasOwnProperty(r)&&e.call(n,t[r],r,t)}function x(t,e,n){var r="DEPRECATED METHOD: "+e+"\n"+n+" AT \n";return function(){var e=new Error("get-stack-trace"),n=e&&e.stack?e.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",o=i.console&&(i.console.warn||i.console.log);return o&&o.call(i.console,r,n),t.apply(this,arguments)}}u="function"!==typeof Object.assign?function(t){if(t===s||null===t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),n=1;n<arguments.length;n++){var r=arguments[n];if(r!==s&&null!==r)for(var i in r)r.hasOwnProperty(i)&&(e[i]=r[i])}return e}:Object.assign;var w=x((function(t,e,n){var r=Object.keys(e),i=0;while(i<r.length)(!n||n&&t[r[i]]===s)&&(t[r[i]]=e[r[i]]),i++;return t}),"extend","Use `assign`."),E=x((function(t,e){return w(t,e,!0)}),"merge","Use `assign`.");function S(t,e,n){var r,i=e.prototype;r=t.prototype=Object.create(i),r.constructor=t,r._super=i,n&&u(r,n)}function O(t,e){return function(){return t.apply(e,arguments)}}function C(t,e){return typeof t==d?t.apply(e&&e[0]||s,e):t}function T(t,e){return t===s?e:t}function A(t,e,n){b(R(e),(function(e){t.addEventListener(e,n,!1)}))}function k(t,e,n){b(R(e),(function(e){t.removeEventListener(e,n,!1)}))}function M(t,e){while(t){if(t==e)return!0;t=t.parentNode}return!1}function P(t,e){return t.indexOf(e)>-1}function R(t){return t.trim().split(/\s+/g)}function j(t,e,n){if(t.indexOf&&!n)return t.indexOf(e);var r=0;while(r<t.length){if(n&&t[r][n]==e||!n&&t[r]===e)return r;r++}return-1}function I(t){return Array.prototype.slice.call(t,0)}function L(t,e,n){var r=[],i=[],o=0;while(o<t.length){var a=e?t[o][e]:t[o];j(i,a)<0&&r.push(t[o]),i[o]=a,o++}return n&&(r=e?r.sort((function(t,n){return t[e]>n[e]})):r.sort()),r}function N(t,e){var n,r,i=e[0].toUpperCase()+e.slice(1),o=0;while(o<h.length){if(n=h[o],r=n?n+i:e,r in t)return r;o++}return s}var D=1;function F(){return D++}function B(t){var e=t.ownerDocument||t;return e.defaultView||e.parentWindow||i}var z=/mobile|tablet|ip(ad|hone|od)|android/i,U="ontouchstart"in i,V=N(i,"PointerEvent")!==s,H=U&&z.test(navigator.userAgent),G="touch",W="pen",Z="mouse",Y="kinect",X=25,q=1,K=2,Q=4,$=8,J=1,tt=2,et=4,nt=8,rt=16,it=tt|et,ot=nt|rt,at=it|ot,st=["x","y"],ut=["clientX","clientY"];function ct(t,e){var n=this;this.manager=t,this.callback=e,this.element=t.element,this.target=t.options.inputTarget,this.domHandler=function(e){C(t.options.enable,[t])&&n.handler(e)},this.init()}function lt(t){var e,n=t.options.inputClass;return e=n||(V?Pt:H?Bt:U?Ht:Ct),new e(t,ft)}function ft(t,e,n){var r=n.pointers.length,i=n.changedPointers.length,o=e&q&&r-i===0,a=e&(Q|$)&&r-i===0;n.isFirst=!!o,n.isFinal=!!a,o&&(t.session={}),n.eventType=e,ht(t,n),t.emit("hammer.input",n),t.recognize(n),t.session.prevInput=n}function ht(t,e){var n=t.session,r=e.pointers,i=r.length;n.firstInput||(n.firstInput=vt(e)),i>1&&!n.firstMultiple?n.firstMultiple=vt(e):1===i&&(n.firstMultiple=!1);var o=n.firstInput,a=n.firstMultiple,s=a?a.center:o.center,u=e.center=gt(r);e.timeStamp=m(),e.deltaTime=e.timeStamp-o.timeStamp,e.angle=bt(s,u),e.distance=_t(s,u),pt(n,e),e.offsetDirection=yt(e.deltaX,e.deltaY);var c=mt(e.deltaTime,e.deltaX,e.deltaY);e.overallVelocityX=c.x,e.overallVelocityY=c.y,e.overallVelocity=g(c.x)>g(c.y)?c.x:c.y,e.scale=a?wt(a.pointers,r):1,e.rotation=a?xt(a.pointers,r):0,e.maxPointers=n.prevInput?e.pointers.length>n.prevInput.maxPointers?e.pointers.length:n.prevInput.maxPointers:e.pointers.length,dt(n,e);var l=t.element;M(e.srcEvent.target,l)&&(l=e.srcEvent.target),e.target=l}function pt(t,e){var n=e.center,r=t.offsetDelta||{},i=t.prevDelta||{},o=t.prevInput||{};e.eventType!==q&&o.eventType!==Q||(i=t.prevDelta={x:o.deltaX||0,y:o.deltaY||0},r=t.offsetDelta={x:n.x,y:n.y}),e.deltaX=i.x+(n.x-r.x),e.deltaY=i.y+(n.y-r.y)}function dt(t,e){var n,r,i,o,a=t.lastInterval||e,u=e.timeStamp-a.timeStamp;if(e.eventType!=$&&(u>X||a.velocity===s)){var c=e.deltaX-a.deltaX,l=e.deltaY-a.deltaY,f=mt(u,c,l);r=f.x,i=f.y,n=g(f.x)>g(f.y)?f.x:f.y,o=yt(c,l),t.lastInterval=e}else n=a.velocity,r=a.velocityX,i=a.velocityY,o=a.direction;e.velocity=n,e.velocityX=r,e.velocityY=i,e.direction=o}function vt(t){var e=[],n=0;while(n<t.pointers.length)e[n]={clientX:v(t.pointers[n].clientX),clientY:v(t.pointers[n].clientY)},n++;return{timeStamp:m(),pointers:e,center:gt(e),deltaX:t.deltaX,deltaY:t.deltaY}}function gt(t){var e=t.length;if(1===e)return{x:v(t[0].clientX),y:v(t[0].clientY)};var n=0,r=0,i=0;while(i<e)n+=t[i].clientX,r+=t[i].clientY,i++;return{x:v(n/e),y:v(r/e)}}function mt(t,e,n){return{x:e/t||0,y:n/t||0}}function yt(t,e){return t===e?J:g(t)>=g(e)?t<0?tt:et:e<0?nt:rt}function _t(t,e,n){n||(n=st);var r=e[n[0]]-t[n[0]],i=e[n[1]]-t[n[1]];return Math.sqrt(r*r+i*i)}function bt(t,e,n){n||(n=st);var r=e[n[0]]-t[n[0]],i=e[n[1]]-t[n[1]];return 180*Math.atan2(i,r)/Math.PI}function xt(t,e){return bt(e[1],e[0],ut)+bt(t[1],t[0],ut)}function wt(t,e){return _t(e[0],e[1],ut)/_t(t[0],t[1],ut)}ct.prototype={handler:function(){},init:function(){this.evEl&&A(this.element,this.evEl,this.domHandler),this.evTarget&&A(this.target,this.evTarget,this.domHandler),this.evWin&&A(B(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&k(this.element,this.evEl,this.domHandler),this.evTarget&&k(this.target,this.evTarget,this.domHandler),this.evWin&&k(B(this.element),this.evWin,this.domHandler)}};var Et={mousedown:q,mousemove:K,mouseup:Q},St="mousedown",Ot="mousemove mouseup";function Ct(){this.evEl=St,this.evWin=Ot,this.pressed=!1,ct.apply(this,arguments)}S(Ct,ct,{handler:function(t){var e=Et[t.type];e&q&&0===t.button&&(this.pressed=!0),e&K&&1!==t.which&&(e=Q),this.pressed&&(e&Q&&(this.pressed=!1),this.callback(this.manager,e,{pointers:[t],changedPointers:[t],pointerType:Z,srcEvent:t}))}});var Tt={pointerdown:q,pointermove:K,pointerup:Q,pointercancel:$,pointerout:$},At={2:G,3:W,4:Z,5:Y},kt="pointerdown",Mt="pointermove pointerup pointercancel";function Pt(){this.evEl=kt,this.evWin=Mt,ct.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}f||!i.MSPointerEvent||i.PointerEvent||(kt="MSPointerDown",Mt="MSPointerMove MSPointerUp MSPointerCancel"),S(Pt,ct,{handler:function(t){var e=this.store,n=!1,r=t.type.toLowerCase().replace("ms",""),i=Tt[r],o=At[t.pointerType]||t.pointerType,a=o==G,s=j(e,t.pointerId,"pointerId");i&q&&(0===t.button||a)?s<0&&(e.push(t),s=e.length-1):i&(Q|$)&&(n=!0),s<0||(e[s]=t,this.callback(this.manager,i,{pointers:e,changedPointers:[t],pointerType:o,srcEvent:t}),n&&e.splice(s,1))}});var Rt={touchstart:q,touchmove:K,touchend:Q,touchcancel:$},jt="touchstart",It="touchstart touchmove touchend touchcancel";function Lt(){this.evTarget=jt,this.evWin=It,this.started=!1,ct.apply(this,arguments)}function Nt(t,e){var n=I(t.touches),r=I(t.changedTouches);return e&(Q|$)&&(n=L(n.concat(r),"identifier",!0)),[n,r]}S(Lt,ct,{handler:function(t){var e=Rt[t.type];if(e===q&&(this.started=!0),this.started){var n=Nt.call(this,t,e);e&(Q|$)&&n[0].length-n[1].length===0&&(this.started=!1),this.callback(this.manager,e,{pointers:n[0],changedPointers:n[1],pointerType:G,srcEvent:t})}}});var Dt={touchstart:q,touchmove:K,touchend:Q,touchcancel:$},Ft="touchstart touchmove touchend touchcancel";function Bt(){this.evTarget=Ft,this.targetIds={},ct.apply(this,arguments)}function zt(t,e){var n=I(t.touches),r=this.targetIds;if(e&(q|K)&&1===n.length)return r[n[0].identifier]=!0,[n,n];var i,o,a=I(t.changedTouches),s=[],u=this.target;if(o=n.filter((function(t){return M(t.target,u)})),e===q){i=0;while(i<o.length)r[o[i].identifier]=!0,i++}i=0;while(i<a.length)r[a[i].identifier]&&s.push(a[i]),e&(Q|$)&&delete r[a[i].identifier],i++;return s.length?[L(o.concat(s),"identifier",!0),s]:void 0}S(Bt,ct,{handler:function(t){var e=Dt[t.type],n=zt.call(this,t,e);n&&this.callback(this.manager,e,{pointers:n[0],changedPointers:n[1],pointerType:G,srcEvent:t})}});var Ut=2500,Vt=25;function Ht(){ct.apply(this,arguments);var t=O(this.handler,this);this.touch=new Bt(this.manager,t),this.mouse=new Ct(this.manager,t),this.primaryTouch=null,this.lastTouches=[]}function Gt(t,e){t&q?(this.primaryTouch=e.changedPointers[0].identifier,Wt.call(this,e)):t&(Q|$)&&Wt.call(this,e)}function Wt(t){var e=t.changedPointers[0];if(e.identifier===this.primaryTouch){var n={x:e.clientX,y:e.clientY};this.lastTouches.push(n);var r=this.lastTouches,i=function(){var t=r.indexOf(n);t>-1&&r.splice(t,1)};setTimeout(i,Ut)}}function Zt(t){for(var e=t.srcEvent.clientX,n=t.srcEvent.clientY,r=0;r<this.lastTouches.length;r++){var i=this.lastTouches[r],o=Math.abs(e-i.x),a=Math.abs(n-i.y);if(o<=Vt&&a<=Vt)return!0}return!1}S(Ht,ct,{handler:function(t,e,n){var r=n.pointerType==G,i=n.pointerType==Z;if(!(i&&n.sourceCapabilities&&n.sourceCapabilities.firesTouchEvents)){if(r)Gt.call(this,e,n);else if(i&&Zt.call(this,n))return;this.callback(t,e,n)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var Yt=f?s:N(p.style,"touchAction"),Xt=Yt!==s,qt="compute",Kt="auto",Qt="manipulation",$t="none",Jt="pan-x",te="pan-y",ee=ie();function ne(t,e){this.manager=t,this.set(e)}function re(t){if(P(t,$t))return $t;var e=P(t,Jt),n=P(t,te);return e&&n?$t:e||n?e?Jt:te:P(t,Qt)?Qt:Kt}function ie(){if(!Xt)return!1;var t={};if(f)return t;var e=i.CSS&&i.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach((function(n){t[n]=!e||i.CSS.supports("touch-action",n)})),t}ne.prototype={set:function(t){t==qt&&(t=this.compute()),Xt&&this.manager.element.style&&ee[t]&&(this.manager.element.style[Yt]=t),this.actions=t.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var t=[];return b(this.manager.recognizers,(function(e){C(e.options.enable,[e])&&(t=t.concat(e.getTouchAction()))})),re(t.join(" "))},preventDefaults:function(t){var e=t.srcEvent,n=t.offsetDirection;if(this.manager.session.prevented)e.preventDefault();else{var r=this.actions,i=P(r,$t)&&!ee[$t],o=P(r,te)&&!ee[te],a=P(r,Jt)&&!ee[Jt];if(i){var s=1===t.pointers.length,u=t.distance<2,c=t.deltaTime<250;if(s&&u&&c)return}if(!a||!o)return i||o&&n&it||a&&n&ot?this.preventSrc(e):void 0}},preventSrc:function(t){this.manager.session.prevented=!0,t.preventDefault()}};var oe=1,ae=2,se=4,ue=8,ce=ue,le=16,fe=32;function he(t){this.options=u({},this.defaults,t||{}),this.id=F(),this.manager=null,this.options.enable=T(this.options.enable,!0),this.state=oe,this.simultaneous={},this.requireFail=[]}function pe(t){return t&le?"cancel":t&ue?"end":t&se?"move":t&ae?"start":""}function de(t){return t==rt?"down":t==nt?"up":t==tt?"left":t==et?"right":""}function ve(t,e){var n=e.manager;return n?n.get(t):t}function ge(){he.apply(this,arguments)}function me(){ge.apply(this,arguments),this.pX=null,this.pY=null}function ye(){ge.apply(this,arguments)}function _e(){he.apply(this,arguments),this._timer=null,this._input=null}function be(){ge.apply(this,arguments)}function xe(){ge.apply(this,arguments)}function we(){he.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function Ee(t,e){return e=e||{},e.recognizers=T(e.recognizers,Ee.defaults.preset),new Ce(t,e)}he.prototype={defaults:{},set:function(t){return u(this.options,t),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(t){if(_(t,"recognizeWith",this))return this;var e=this.simultaneous;return t=ve(t,this),e[t.id]||(e[t.id]=t,t.recognizeWith(this)),this},dropRecognizeWith:function(t){return _(t,"dropRecognizeWith",this)||(t=ve(t,this),delete this.simultaneous[t.id]),this},requireFailure:function(t){if(_(t,"requireFailure",this))return this;var e=this.requireFail;return t=ve(t,this),-1===j(e,t)&&(e.push(t),t.requireFailure(this)),this},dropRequireFailure:function(t){if(_(t,"dropRequireFailure",this))return this;t=ve(t,this);var e=j(this.requireFail,t);return e>-1&&this.requireFail.splice(e,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(t){return!!this.simultaneous[t.id]},emit:function(t){var e=this,n=this.state;function r(n){e.manager.emit(n,t)}n<ue&&r(e.options.event+pe(n)),r(e.options.event),t.additionalEvent&&r(t.additionalEvent),n>=ue&&r(e.options.event+pe(n))},tryEmit:function(t){if(this.canEmit())return this.emit(t);this.state=fe},canEmit:function(){var t=0;while(t<this.requireFail.length){if(!(this.requireFail[t].state&(fe|oe)))return!1;t++}return!0},recognize:function(t){var e=u({},t);if(!C(this.options.enable,[this,e]))return this.reset(),void(this.state=fe);this.state&(ce|le|fe)&&(this.state=oe),this.state=this.process(e),this.state&(ae|se|ue|le)&&this.tryEmit(e)},process:function(t){},getTouchAction:function(){},reset:function(){}},S(ge,he,{defaults:{pointers:1},attrTest:function(t){var e=this.options.pointers;return 0===e||t.pointers.length===e},process:function(t){var e=this.state,n=t.eventType,r=e&(ae|se),i=this.attrTest(t);return r&&(n&$||!i)?e|le:r||i?n&Q?e|ue:e&ae?e|se:ae:fe}}),S(me,ge,{defaults:{event:"pan",threshold:10,pointers:1,direction:at},getTouchAction:function(){var t=this.options.direction,e=[];return t&it&&e.push(te),t&ot&&e.push(Jt),e},directionTest:function(t){var e=this.options,n=!0,r=t.distance,i=t.direction,o=t.deltaX,a=t.deltaY;return i&e.direction||(e.direction&it?(i=0===o?J:o<0?tt:et,n=o!=this.pX,r=Math.abs(t.deltaX)):(i=0===a?J:a<0?nt:rt,n=a!=this.pY,r=Math.abs(t.deltaY))),t.direction=i,n&&r>e.threshold&&i&e.direction},attrTest:function(t){return ge.prototype.attrTest.call(this,t)&&(this.state&ae||!(this.state&ae)&&this.directionTest(t))},emit:function(t){this.pX=t.deltaX,this.pY=t.deltaY;var e=de(t.direction);e&&(t.additionalEvent=this.options.event+e),this._super.emit.call(this,t)}}),S(ye,ge,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[$t]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.scale-1)>this.options.threshold||this.state&ae)},emit:function(t){if(1!==t.scale){var e=t.scale<1?"in":"out";t.additionalEvent=this.options.event+e}this._super.emit.call(this,t)}}),S(_e,he,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[Kt]},process:function(t){var e=this.options,n=t.pointers.length===e.pointers,r=t.distance<e.threshold,i=t.deltaTime>e.time;if(this._input=t,!r||!n||t.eventType&(Q|$)&&!i)this.reset();else if(t.eventType&q)this.reset(),this._timer=y((function(){this.state=ce,this.tryEmit()}),e.time,this);else if(t.eventType&Q)return ce;return fe},reset:function(){clearTimeout(this._timer)},emit:function(t){this.state===ce&&(t&&t.eventType&Q?this.manager.emit(this.options.event+"up",t):(this._input.timeStamp=m(),this.manager.emit(this.options.event,this._input)))}}),S(be,ge,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[$t]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.rotation)>this.options.threshold||this.state&ae)}}),S(xe,ge,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:it|ot,pointers:1},getTouchAction:function(){return me.prototype.getTouchAction.call(this)},attrTest:function(t){var e,n=this.options.direction;return n&(it|ot)?e=t.overallVelocity:n&it?e=t.overallVelocityX:n&ot&&(e=t.overallVelocityY),this._super.attrTest.call(this,t)&&n&t.offsetDirection&&t.distance>this.options.threshold&&t.maxPointers==this.options.pointers&&g(e)>this.options.velocity&&t.eventType&Q},emit:function(t){var e=de(t.offsetDirection);e&&this.manager.emit(this.options.event+e,t),this.manager.emit(this.options.event,t)}}),S(we,he,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[Qt]},process:function(t){var e=this.options,n=t.pointers.length===e.pointers,r=t.distance<e.threshold,i=t.deltaTime<e.time;if(this.reset(),t.eventType&q&&0===this.count)return this.failTimeout();if(r&&i&&n){if(t.eventType!=Q)return this.failTimeout();var o=!this.pTime||t.timeStamp-this.pTime<e.interval,a=!this.pCenter||_t(this.pCenter,t.center)<e.posThreshold;this.pTime=t.timeStamp,this.pCenter=t.center,a&&o?this.count+=1:this.count=1,this._input=t;var s=this.count%e.taps;if(0===s)return this.hasRequireFailures()?(this._timer=y((function(){this.state=ce,this.tryEmit()}),e.interval,this),ae):ce}return fe},failTimeout:function(){return this._timer=y((function(){this.state=fe}),this.options.interval,this),fe},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==ce&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),Ee.VERSION="2.0.7",Ee.defaults={domEvents:!1,touchAction:qt,enable:!0,inputTarget:null,inputClass:null,preset:[[be,{enable:!1}],[ye,{enable:!1},["rotate"]],[xe,{direction:it}],[me,{direction:it},["swipe"]],[we],[we,{event:"doubletap",taps:2},["tap"]],[_e]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var Se=1,Oe=2;function Ce(t,e){this.options=u({},Ee.defaults,e||{}),this.options.inputTarget=this.options.inputTarget||t,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=t,this.input=lt(this),this.touchAction=new ne(this,this.options.touchAction),Te(this,!0),b(this.options.recognizers,(function(t){var e=this.add(new t[0](t[1]));t[2]&&e.recognizeWith(t[2]),t[3]&&e.requireFailure(t[3])}),this)}function Te(t,e){var n,r=t.element;r.style&&(b(t.options.cssProps,(function(i,o){n=N(r.style,o),e?(t.oldCssProps[n]=r.style[n],r.style[n]=i):r.style[n]=t.oldCssProps[n]||""})),e||(t.oldCssProps={}))}function Ae(t,e){if(!f){var n=o.createEvent("Event");n.initEvent(t,!0,!0),n.gesture=e,e.target.dispatchEvent(n)}}if(Ce.prototype={set:function(t){return u(this.options,t),t.touchAction&&this.touchAction.update(),t.inputTarget&&(this.input.destroy(),this.input.target=t.inputTarget,this.input.init()),this},stop:function(t){this.session.stopped=t?Oe:Se},recognize:function(t){var e=this.session;if(!e.stopped){var n;this.touchAction.preventDefaults(t);var r=this.recognizers,i=e.curRecognizer;(!i||i&&i.state&ce)&&(i=e.curRecognizer=null);var o=0;while(o<r.length)n=r[o],e.stopped===Oe||i&&n!=i&&!n.canRecognizeWith(i)?n.reset():n.recognize(t),!i&&n.state&(ae|se|ue)&&(i=e.curRecognizer=n),o++}},get:function(t){if(t instanceof he)return t;for(var e=this.recognizers,n=0;n<e.length;n++)if(e[n].options.event==t)return e[n];return null},add:function(t){if(_(t,"add",this))return this;var e=this.get(t.options.event);return e&&this.remove(e),this.recognizers.push(t),t.manager=this,this.touchAction.update(),t},remove:function(t){if(_(t,"remove",this))return this;if(t=this.get(t),t){var e=this.recognizers,n=j(e,t);-1!==n&&(e.splice(n,1),this.touchAction.update())}return this},on:function(t,e){if(t!==s&&e!==s){var n=this.handlers;return b(R(t),(function(t){n[t]=n[t]||[],n[t].push(e)})),this}},off:function(t,e){if(t!==s){var n=this.handlers;return b(R(t),(function(t){e?n[t]&&n[t].splice(j(n[t],e),1):delete n[t]})),this}},emit:function(t,e){this.options.domEvents&&Ae(t,e);var n=this.handlers[t]&&this.handlers[t].slice();if(n&&n.length){e.type=t,e.preventDefault=function(){e.srcEvent.preventDefault()};var r=0;while(r<n.length)n[r](e),r++}},destroy:function(){this.element&&Te(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},!f){u(Ee,{INPUT_START:q,INPUT_MOVE:K,INPUT_END:Q,INPUT_CANCEL:$,STATE_POSSIBLE:oe,STATE_BEGAN:ae,STATE_CHANGED:se,STATE_ENDED:ue,STATE_RECOGNIZED:ce,STATE_CANCELLED:le,STATE_FAILED:fe,DIRECTION_NONE:J,DIRECTION_LEFT:tt,DIRECTION_RIGHT:et,DIRECTION_UP:nt,DIRECTION_DOWN:rt,DIRECTION_HORIZONTAL:it,DIRECTION_VERTICAL:ot,DIRECTION_ALL:at,Manager:Ce,Input:ct,TouchAction:ne,TouchInput:Bt,MouseInput:Ct,PointerEventInput:Pt,TouchMouseInput:Ht,SingleTouchInput:Lt,Recognizer:he,AttrRecognizer:ge,Tap:we,Pan:me,Swipe:xe,Pinch:ye,Rotate:be,Press:_e,on:A,off:k,each:b,merge:E,extend:w,assign:u,inherit:S,bindFn:O,prefixed:N});var ke="undefined"!==typeof window?window:"undefined"!==typeof self?self:{};ke.Hammer=Ee,r=function(){return Ee}.call(e,n,e,t),r===s||(t.exports=r)}})("undefined"!==typeof window?window:{console:null,MSPointerEvent:null,PointerEvent:null,CSS:null},document)},Aib3:function(t,e){function n(t,e){var i,o=t&&t.type;if("FeatureCollection"===o)for(i=0;i<t.features.length;i++)n(t.features[i],e);else if("GeometryCollection"===o)for(i=0;i<t.geometries.length;i++)n(t.geometries[i],e);else if("Feature"===o)n(t.geometry,e);else if("Polygon"===o)r(t.coordinates,e);else if("MultiPolygon"===o)for(i=0;i<t.coordinates.length;i++)r(t.coordinates[i],e);return t}function r(t,e){if(0!==t.length){i(t[0],e);for(var n=1;n<t.length;n++)i(t[n],!e)}}function i(t,e){for(var n=0,r=0,i=0,o=t.length,a=o-1;i<o;a=i++){var s=(t[i][0]-t[a][0])*(t[a][1]+t[i][1]),u=n+s;r+=Math.abs(n)>=Math.abs(s)?n-u+s:s-u+n,n=u}n+r>=0!==!!e&&t.reverse()}t.exports=n},AqCL:function(t,e){t.exports=Array.isArray||function(t){return"[object Array]"==Object.prototype.toString.call(t)}},AwBQ:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Lookup=void 0;var r=n("MON2"),i=function(){function t(){this._map=new Map}return t.prototype.getMap=function(){return this._map},t.prototype.add=function(t,e){if(null===t||void 0===t)throw new Error(r.NULL_ARGUMENT);if(null===e||void 0===e)throw new Error(r.NULL_ARGUMENT);var n=this._map.get(t);void 0!==n?(n.push(e),this._map.set(t,n)):this._map.set(t,[e])},t.prototype.get=function(t){if(null===t||void 0===t)throw new Error(r.NULL_ARGUMENT);var e=this._map.get(t);if(void 0!==e)return e;throw new Error(r.KEY_NOT_FOUND)},t.prototype.remove=function(t){if(null===t||void 0===t)throw new Error(r.NULL_ARGUMENT);if(!this._map["delete"](t))throw new Error(r.KEY_NOT_FOUND)},t.prototype.removeByCondition=function(t){var e=this;this._map.forEach((function(n,r){var i=n.filter((function(e){return!t(e)}));i.length>0?e._map.set(r,i):e._map["delete"](r)}))},t.prototype.hasKey=function(t){if(null===t||void 0===t)throw new Error(r.NULL_ARGUMENT);return this._map.has(t)},t.prototype.clone=function(){var e=new t;return this._map.forEach((function(t,n){t.forEach((function(t){return e.add(n,t.clone())}))})),e},t.prototype.traverse=function(t){this._map.forEach((function(e,n){t(n,e)}))},t}();e.Lookup=i},AwgR:function(t,e,n){var r=n("I+eb"),i=n("eDxR"),o=n("glrk"),a=i.has,s=i.toKey;r({target:"Reflect",stat:!0},{hasOwnMetadata:function(t,e){var n=arguments.length<3?void 0:s(arguments[2]);return a(t,o(e),n)}})},B6y2:function(t,e,n){var r=n("I+eb"),i=n("b1O7").values;r({target:"Object",stat:!0},{values:function(t){return i(t)}})},B8du:function(t,e){function n(){return!1}t.exports=n},B93f:function(t,e,n){"use strict";var r=n("DiGy");function i(t,e){this.layers=t.readFields(o,{},e)}function o(t,e,n){if(3===t){var i=new r(n,n.readVarint()+n.pos);i.length&&(e[i.name]=i)}}t.exports=i},BGb9:function(t,e,n){"use strict";var r=n("I+eb"),i=n("xDBR"),o=n("0GbY"),a=n("glrk"),s=n("HAuM"),u=n("SEBh"),c=n("ImZN");r({target:"Set",proto:!0,real:!0,forced:i},{union:function(t){var e=a(this),n=new(u(e,o("Set")))(e);return c(t,s(n.add),n),n}})},BIHw:function(t,e,n){"use strict";var r=n("I+eb"),i=n("or9q"),o=n("ewvW"),a=n("UMSQ"),s=n("ppGB"),u=n("ZfDv");r({target:"Array",proto:!0},{flat:function(){var t=arguments.length?arguments[0]:void 0,e=o(this),n=a(e.length),r=u(e,0);return r.length=i(r,e,e,n,0,void 0===t?1:s(t)),r}})},BTho:function(t,e,n){"use strict";var r=n("HAuM"),i=n("hh1v"),o=[].slice,a={},s=function(t,e,n){if(!(e in a)){for(var r=[],i=0;i<e;i++)r[i]="a["+i+"]";a[e]=Function("C,a","return new C("+r.join(",")+")")}return a[e](t,n)};t.exports=Function.bind||function(t){var e=r(this),n=o.call(arguments,1),a=function(){var r=n.concat(o.call(arguments));return this instanceof a?s(e,r.length,r):e.apply(t,r)};return i(e.prototype)&&(a.prototype=e.prototype),a}},"BX/b":function(t,e,n){var r=n("/GqU"),i=n("JBy8").f,o={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],s=function(t){try{return i(t)}catch(e){return a.slice()}};t.exports.f=function(t){return a&&"[object Window]"==o.call(t)?s(t):i(r(t))}},Bs8V:function(t,e,n){var r=n("g6v/"),i=n("0eef"),o=n("XGwC"),a=n("/GqU"),s=n("wE6v"),u=n("UTVS"),c=n("DPsx"),l=Object.getOwnPropertyDescriptor;e.f=r?l:function(t,e){if(t=a(t),e=s(e,!0),c)try{return l(t,e)}catch(n){}if(u(t,e))return o(!i.f.call(t,e),t[e])}},BsWD:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n("a3WO");function i(t,e){if(t){if("string"===typeof t)return Object(r["a"])(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Object(r["a"])(t,e):void 0}}},C1JJ:function(t,e,n){"use strict";var r=n("I+eb"),i=n("xDBR"),o=n("glrk"),a=n("HAuM"),s=n("ImZN");r({target:"Set",proto:!0,real:!0,forced:i},{isDisjointFrom:function(t){var e=o(this),n=a(e.has);return!s(t,(function(t){if(!0===n.call(e,t))return s.stop()})).stopped}})},CH3K:function(t,e){function n(t,e){var n=-1,r=e.length,i=t.length;while(++n<r)t[i+n]=e[n];return t}t.exports=n},CUyW:function(t,e,n){"use strict";var r=n("I+eb"),i=n("xDBR"),o=n("0GbY"),a=n("glrk"),s=n("HAuM"),u=n("A2ZE"),c=n("SEBh"),l=n("Sssf"),f=n("ImZN");r({target:"Map",proto:!0,real:!0,forced:i},{mapValues:function(t){var e=a(this),n=l(e),r=u(t,arguments.length>1?arguments[1]:void 0,3),i=new(c(e,o("Map"))),h=s(i.set);return f(n,(function(t,n){h.call(i,t,r(n,t,e))}),void 0,!0,!0),i}})},Cg3G:function(t,e,n){"use strict";var r=n("glrk"),i=n("HAuM");t.exports=function(){for(var t,e=r(this),n=i(e["delete"]),o=!0,a=0,s=arguments.length;a<s;a++)t=n.call(e,arguments[a]),o=o&&t;return!!o}},Co1j:function(t,e,n){"use strict";var r=n("I+eb"),i=n("xDBR"),o=n("glrk"),a=n("HAuM"),s=n("ImZN");r({target:"Set",proto:!0,real:!0,forced:i},{isSupersetOf:function(t){var e=o(this),n=a(e.has);return!s(t,(function(t){if(!1===n.call(e,t))return s.stop()})).stopped}})},Cwc5:function(t,e,n){var r=n("NKxu"),i=n("Npjl");function o(t,e){var n=i(t,e);return r(n)?n:void 0}t.exports=o},CyXQ:function(t,e,n){var r=n("ppGB"),i=n("UMSQ");t.exports=function(t){if(void 0===t)return 0;var e=r(t),n=i(e);if(e!==n)throw RangeError("Wrong length or index");return n}},D9lx:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BindingInWhenOnSyntax=void 0;var r=n("6AGu"),i=n("406g"),o=n("z4Hk"),a=function(){function t(t){this._binding=t,this._bindingWhenSyntax=new o.BindingWhenSyntax(this._binding),this._bindingOnSyntax=new i.BindingOnSyntax(this._binding),this._bindingInSyntax=new r.BindingInSyntax(t)}return t.prototype.inRequestScope=function(){return this._bindingInSyntax.inRequestScope()},t.prototype.inSingletonScope=function(){return this._bindingInSyntax.inSingletonScope()},t.prototype.inTransientScope=function(){return this._bindingInSyntax.inTransientScope()},t.prototype.when=function(t){return this._bindingWhenSyntax.when(t)},t.prototype.whenTargetNamed=function(t){return this._bindingWhenSyntax.whenTargetNamed(t)},t.prototype.whenTargetIsDefault=function(){return this._bindingWhenSyntax.whenTargetIsDefault()},t.prototype.whenTargetTagged=function(t,e){return this._bindingWhenSyntax.whenTargetTagged(t,e)},t.prototype.whenInjectedInto=function(t){return this._bindingWhenSyntax.whenInjectedInto(t)},t.prototype.whenParentNamed=function(t){return this._bindingWhenSyntax.whenParentNamed(t)},t.prototype.whenParentTagged=function(t,e){return this._bindingWhenSyntax.whenParentTagged(t,e)},t.prototype.whenAnyAncestorIs=function(t){return this._bindingWhenSyntax.whenAnyAncestorIs(t)},t.prototype.whenNoAncestorIs=function(t){return this._bindingWhenSyntax.whenNoAncestorIs(t)},t.prototype.whenAnyAncestorNamed=function(t){return this._bindingWhenSyntax.whenAnyAncestorNamed(t)},t.prototype.whenAnyAncestorTagged=function(t,e){return this._bindingWhenSyntax.whenAnyAncestorTagged(t,e)},t.prototype.whenNoAncestorNamed=function(t){return this._bindingWhenSyntax.whenNoAncestorNamed(t)},t.prototype.whenNoAncestorTagged=function(t,e){return this._bindingWhenSyntax.whenNoAncestorTagged(t,e)},t.prototype.whenAnyAncestorMatches=function(t){return this._bindingWhenSyntax.whenAnyAncestorMatches(t)},t.prototype.whenNoAncestorMatches=function(t){return this._bindingWhenSyntax.whenNoAncestorMatches(t)},t.prototype.onActivation=function(t){return this._bindingOnSyntax.onActivation(t)},t}();e.BindingInWhenOnSyntax=a},DEfu:function(t,e,n){var r=n("2oRo"),i=n("1E5z");i(r.JSON,"JSON",!0)},DMt2:function(t,e,n){var r=n("UMSQ"),i=n("EUja"),o=n("HYAF"),a=Math.ceil,s=function(t){return function(e,n,s){var u,c,l=String(o(e)),f=l.length,h=void 0===s?" ":String(s),p=r(n);return p<=f||""==h?l:(u=p-f,c=i.call(h,a(u/h.length)),c.length>u&&(c=c.slice(0,u)),t?l+c:c+l)}};t.exports={start:s(!1),end:s(!0)}},DPsx:function(t,e,n){var r=n("g6v/"),i=n("0Dky"),o=n("zBJ4");t.exports=!r&&!i((function(){return 7!=Object.defineProperty(o("div"),"a",{get:function(){return 7}}).a}))},DSRE:function(t,e,n){(function(t){var r=n("Kz5y"),i=n("B8du"),o=e&&!e.nodeType&&e,a=o&&"object"==typeof t&&t&&!t.nodeType&&t,s=a&&a.exports===o,u=s?r.Buffer:void 0,c=u?u.isBuffer:void 0,l=c||i;t.exports=l}).call(this,n("hOG+")(t))},DTth:function(t,e,n){var r=n("0Dky"),i=n("tiKp"),o=n("xDBR"),a=i("iterator");t.exports=!r((function(){var t=new URL("b?a=1&b=2&c=3","http://a"),e=t.searchParams,n="";return t.pathname="c%20d",e.forEach((function(t,r){e["delete"]("b"),n+=r+t})),o&&!t.toJSON||!e.sort||"http://a/c%20d?a=1&c=3"!==t.href||"3"!==e.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!e[a]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("http://\u0442\u0435\u0441\u0442").host||"#%D0%B1"!==new URL("http://a#\u0431").hash||"a1c3"!==n||"x"!==new URL("http://x",void 0).host}))},DhMN:function(t,e,n){n("ofBz")},DiGy:function(t,e,n){"use strict";var r=n("HfwV");function i(t,e){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=t,this._keys=[],this._values=[],this._features=[],t.readFields(o,this,e),this.length=this._features.length}function o(t,e,n){15===t?e.version=n.readVarint():1===t?e.name=n.readString():5===t?e.extent=n.readVarint():2===t?e._features.push(n.pos):3===t?e._keys.push(n.readString()):4===t&&e._values.push(a(n))}function a(t){var e=null,n=t.readVarint()+t.pos;while(t.pos<n){var r=t.readVarint()>>3;e=1===r?t.readString():2===r?t.readFloat():3===r?t.readDouble():4===r?t.readVarint64():5===r?t.readVarint():6===r?t.readSVarint():7===r?t.readBoolean():null}return e}t.exports=i,i.prototype.feature=function(t){if(t<0||t>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[t];var e=this._pbf.readVarint()+this._pbf.pos;return new r(this._pbf,e,this.extent,this._keys,this._values)}},DrvE:function(t,e,n){"use strict";var r=n("I+eb"),i=n("HAuM"),o=n("0GbY"),a=n("8GlL"),s=n("5mdu"),u=n("ImZN"),c="No one promise resolved";r({target:"Promise",stat:!0},{any:function(t){var e=this,n=a.f(e),r=n.resolve,l=n.reject,f=s((function(){var n=i(e.resolve),a=[],s=0,f=1,h=!1;u(t,(function(t){var i=s++,u=!1;a.push(void 0),f++,n.call(e,t).then((function(t){u||h||(h=!0,r(t))}),(function(t){u||h||(u=!0,a[i]=t,--f||l(new(o("AggregateError"))(a,c)))}))})),--f||l(new(o("AggregateError"))(a,c))}));return f.error&&l(f.value),n.promise}})},E2jh:function(t,e,n){var r=n("2gN3"),i=function(){var t=/[^.]+$/.exec(r&&r.keys&&r.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function o(t){return!!i&&i in t}t.exports=o},E9XD:function(t,e,n){"use strict";var r=n("I+eb"),i=n("1Y/n").left,o=n("pkCn"),a=n("rkAj"),s=o("reduce"),u=a("reduce",{1:0});r({target:"Array",proto:!0,forced:!s||!u},{reduce:function(t){return i(this,t,arguments.length,arguments.length>1?arguments[1]:void 0)}})},EA7m:function(t,e,n){var r=n("zZ0H"),i=n("Ioao"),o=n("wclG");function a(t,e){return o(i(t,e,r),t+"")}t.exports=a},"EDT/":function(t,e,n){var r=n("I+eb"),i=n("p5mE"),o=n("0GbY");r({global:!0},{compositeSymbol:function(){return 1===arguments.length&&"string"===typeof arguments[0]?o("Symbol")["for"](arguments[0]):i.apply(null,arguments).get("symbol",o("Symbol"))}})},ENF9:function(t,e,n){"use strict";var r,i=n("2oRo"),o=n("4syw"),a=n("8YOa"),s=n("bWFh"),u=n("rKzb"),c=n("hh1v"),l=n("afO8").enforce,f=n("f5p1"),h=!i.ActiveXObject&&"ActiveXObject"in i,p=Object.isExtensible,d=function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}},v=t.exports=s("WeakMap",d,u);if(f&&h){r=u.getConstructor(d,"WeakMap",!0),a.REQUIRED=!0;var g=v.prototype,m=g["delete"],y=g.has,_=g.get,b=g.set;o(g,{delete:function(t){if(c(t)&&!p(t)){var e=l(this);return e.frozen||(e.frozen=new r),m.call(this,t)||e.frozen["delete"](t)}return m.call(this,t)},has:function(t){if(c(t)&&!p(t)){var e=l(this);return e.frozen||(e.frozen=new r),y.call(this,t)||e.frozen.has(t)}return y.call(this,t)},get:function(t){if(c(t)&&!p(t)){var e=l(this);return e.frozen||(e.frozen=new r),y.call(this,t)?_.call(this,t):e.frozen.get(t)}return _.call(this,t)},set:function(t,e){if(c(t)&&!p(t)){var n=l(this);n.frozen||(n.frozen=new r),y.call(this,t)?b.call(this,t,e):n.frozen.set(t,e)}else b.call(this,t,e);return this}})}},EUja:function(t,e,n){"use strict";var r=n("ppGB"),i=n("HYAF");t.exports="".repeat||function(t){var e=String(i(this)),n="",o=r(t);if(o<0||o==1/0)throw RangeError("Wrong number of repetitions");for(;o>0;(o>>>=1)&&(e+=e))1&o&&(n+=e);return n}},EdiO:function(t,e){function n(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}t.exports=n,t.exports.__esModule=!0,t.exports["default"]=t.exports},EnZy:function(t,e,n){"use strict";var r=n("14Sl"),i=n("ROdP"),o=n("glrk"),a=n("HYAF"),s=n("SEBh"),u=n("iqWW"),c=n("UMSQ"),l=n("FMNM"),f=n("kmMV"),h=n("0Dky"),p=[].push,d=Math.min,v=4294967295,g=!h((function(){return!RegExp(v,"y")}));r("split",2,(function(t,e,n){var r;return r="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(t,n){var r=String(a(this)),o=void 0===n?v:n>>>0;if(0===o)return[];if(void 0===t)return[r];if(!i(t))return e.call(r,t,o);var s,u,c,l=[],h=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),d=0,g=new RegExp(t.source,h+"g");while(s=f.call(g,r)){if(u=g.lastIndex,u>d&&(l.push(r.slice(d,s.index)),s.length>1&&s.index<r.length&&p.apply(l,s.slice(1)),c=s[0].length,d=u,l.length>=o))break;g.lastIndex===s.index&&g.lastIndex++}return d===r.length?!c&&g.test("")||l.push(""):l.push(r.slice(d)),l.length>o?l.slice(0,o):l}:"0".split(void 0,0).length?function(t,n){return void 0===t&&0===n?[]:e.call(this,t,n)}:e,[function(e,n){var i=a(this),o=void 0==e?void 0:e[t];return void 0!==o?o.call(e,i,n):r.call(String(i),e,n)},function(t,i){var a=n(r,t,this,i,r!==e);if(a.done)return a.value;var f=o(t),h=String(this),p=s(f,RegExp),m=f.unicode,y=(f.ignoreCase?"i":"")+(f.multiline?"m":"")+(f.unicode?"u":"")+(g?"y":"g"),_=new p(g?f:"^(?:"+f.source+")",y),b=void 0===i?v:i>>>0;if(0===b)return[];if(0===h.length)return null===l(_,h)?[h]:[];var x=0,w=0,E=[];while(w<h.length){_.lastIndex=g?w:0;var S,O=l(_,g?h:h.slice(w));if(null===O||(S=d(c(_.lastIndex+(g?0:w)),h.length))===x)w=u(h,w,m);else{if(E.push(h.slice(x,w)),E.length===b)return E;for(var C=1;C<=O.length-1;C++)if(E.push(O[C]),E.length===b)return E;w=x=S}}return E.push(h.slice(x)),E}]}),!g)},Ep9I:function(t,e){t.exports=Object.is||function(t,e){return t===e?0!==t||1/t===1/e:t!=t&&e!=e}},EpBk:function(t,e){function n(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}t.exports=n},Eqjn:function(t,e,n){"use strict";var r=n("I+eb"),i=n("g6v/"),o=n("6x0u"),a=n("ewvW"),s=n("HAuM"),u=n("m/L8");i&&r({target:"Object",proto:!0,forced:o},{__defineGetter__:function(t,e){u.f(a(this),t,{get:s(e),enumerable:!0,configurable:!0})}})},"Ew+T":function(t,e,n){var r=n("I+eb"),i=n("2oRo"),o=n("LPSS"),a=!i.setImmediate||!i.clearImmediate;r({global:!0,bind:!0,enumerable:!0,forced:a},{setImmediate:o.set,clearImmediate:o.clear})},ExA7:function(t,e){function n(t){return null!=t&&"object"==typeof t}t.exports=n},"F+kV":function(t,e,n){"use strict";n.r(e);var r=n("q1tI"),i=n.n(r),o=n("dEAq"),a=n("H1Ra"),s=i.a.memo((t=>{t.demos;return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"markdown"},i.a.createElement("h1",{id:"introduction"},i.a.createElement(o["AnchorLink"],{to:"#introduction","aria-hidden":"true",tabIndex:-1},i.a.createElement("span",{className:"icon icon-link"})),"introduction"),i.a.createElement("p",null,"L7-maptalks a lib you can be use L7 or maptalks. it means in L7 project you can use leafet map features and in maptalks project you can use L7 Visualistion features. L7-maptalks consists of two parts\uff1a"),i.a.createElement("ul",null,i.a.createElement("li",null,"L7 plugin for maptalks\uff0cuse by maptalks"),i.a.createElement("li",null,"Leafet BaseMap for L7 use by maptalks L7")),i.a.createElement("h3",{id:"l7"},i.a.createElement(o["AnchorLink"],{to:"#l7","aria-hidden":"true",tabIndex:-1},i.a.createElement("span",{className:"icon icon-link"})),"L7"),i.a.createElement("ul",null,i.a.createElement("li",null,i.a.createElement(o["Link"],{to:"https://github.com/antvis/l7"},"L7")," Large-scale WebGL-powered Geospatial data visualization analysis engine.")),i.a.createElement("img",{src:"https://camo.githubusercontent.com/9dce91a0264bc3f6eb0b54c4cb7b4911555af7206db6eb9cb9bd9a9d000e8de8/68747470733a2f2f67772e616c697061796f626a656374732e636f6d2f6d646e2f726d735f3835356261622f616674732f696d672f412a532d373351704f386430594141414141414141414141426b4152516e4151",alt:"l7demo",style:{width:"500px"}}),i.a.createElement("h3",{id:"maptalks"},i.a.createElement(o["AnchorLink"],{to:"#maptalks","aria-hidden":"true",tabIndex:-1},i.a.createElement("span",{className:"icon icon-link"})),"maptalks"),i.a.createElement("p",null,i.a.createElement(o["Link"],{to:"https://maptalks.org/"},"doc")),i.a.createElement("h3",{id:"l7-maptalks"},i.a.createElement(o["AnchorLink"],{to:"#l7-maptalks","aria-hidden":"true",tabIndex:-1},i.a.createElement("span",{className:"icon icon-link"})),"L7 maptalks"),i.a.createElement("h3",{id:"install"},i.a.createElement(o["AnchorLink"],{to:"#install","aria-hidden":"true",tabIndex:-1},i.a.createElement("span",{className:"icon icon-link"})),"install"),i.a.createElement(a["a"],{code:"npm install l7-maptalks",lang:"unknown"}),i.a.createElement("h3",{id:"l7-plugin-for-maptalks-use-in-maptalks"},i.a.createElement(o["AnchorLink"],{to:"#l7-plugin-for-maptalks-use-in-maptalks","aria-hidden":"true",tabIndex:-1},i.a.createElement("span",{className:"icon icon-link"})),"L7 plugin for maptalks use in maptalks"),i.a.createElement(a["a"],{code:"import { Scene, PolygonLayer, LineLayer } from \"@antv/l7\";\nimport { TileLayer } from 'maptalks';\nimport { Map, data } from 'l7-maptalks';\nimport React, { useEffect } from 'react';\n\nexport default () => {\n  useEffect(() => {\n    const scene = new Scene({\n      id: \"map\",\n      map: new Map({\n        style: \"light\",\n        center: [109.40618991851805, 24.336068050903056],\n        zoom: 7.5,\n        pitch: 45,\n        rotation: 0,\n      }),\n    });\n\n    scene.on(\"loaded\", () => {\n      var china_vec_02 = new TileLayer('vec', {\n        tileSystem : [1, -1, -180, 90],\n        urlTemplate: 'https://t{s}.tianditu.gov.cn/vec_c/wmts?SERVICE=WMTS&REQUEST=GetTile&VERSION=1.0.0&LAYER=vec&STYLE=default&TILEMATRIXSET=c&FORMAT=tiles&TILEMATRIX={z}&TILEROW={y}&TILECOL={x}&tk='+,\n        subdomains:['1', '2', '3', '4', '5'],\n        spatialReference:{\n          projection:'EPSG:4326'\n        },\n      });\n      var china_txt_02 = new TileLayer('txt', {\n        tileSystem : [1, -1, -180, 90],\n        urlTemplate: 'https://t{s}.tianditu.gov.cn/cva_c/wmts?SERVICE=WMTS&REQUEST=GetTile&VERSION=1.0.0&LAYER=cva&STYLE=default&TILEMATRIXSET=c&FORMAT=tiles&TILEMATRIX={z}&TILEROW={y}&TILECOL={x}&tk=',\n        subdomains:['1', '2', '3', '4', '5'],\n        spatialReference:{\n          projection:'EPSG:4326'\n        },\n      });\n      (scene.getMapService() as any).map?.addLayer(china_vec_02);\n      (scene.getMapService() as any).map?.addLayer(china_txt_02);\n\n      const polygon = new PolygonLayer({\n        zIndex: 3,\n      })\n        .source(data)\n        .color(\"red\")\n        .shape(\"fill\")\n        .active(true);\n\n      const line = new LineLayer({\n        zIndex: 3,\n      })\n        .source(data)\n        .color(\"#fff\")\n        .active(true)\n        .size(1)\n        .style({\n          lineType: \"dash\",\n          dashArray: [2, 2],\n        });\n      scene.addLayer(polygon);\n      scene.addLayer(line);\n    });\n\n    return () => {\n      scene.destroy();\n    };\n\n  }, []);\n\n  return (\n    <div\n      id=\"map\"\n      style={{\n        height: '500px',\n        position: 'relative',\n      }}\n    />\n  );\n};",lang:"jsx"})))}));e["default"]=t=>{var e=i.a.useContext(o["context"]),n=e.demos;return i.a.useEffect((()=>{var e;null!==t&&void 0!==t&&null!==(e=t.location)&&void 0!==e&&e.hash&&o["AnchorLink"].scrollToAnchor(decodeURIComponent(t.location.hash.slice(1)))}),[]),i.a.createElement(s,{demos:n})}},F4QJ:function(t,e,n){"use strict";function r(){var t=o(n("q1tI"));return r=function(){return t},t}function i(){var t=n("dEAq");return i=function(){return t},t}function o(t){return t&&t.__esModule?t:{default:t}}function a(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function s(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?a(Object(n),!0).forEach((function(e){u(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function u(t,e,n){return e=c(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function c(t){var e=l(t,"string");return"symbol"===typeof e?e:String(e)}function l(t,e){if("object"!==typeof t||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=void 0;var f=function(t){return t.render()},h=function(t,e){var n=[],o=t.match.params.uuid,a=void 0===t.location.query.wrapper,u=e[o];if(u){var c=s(s({},u.previewerProps),{},{hideActions:(u.previewerProps.hideActions||[]).concat(["EXTERNAL"])});void 0!==t.location.query.capture&&(c.motions=(c.motions||[]).slice(),c.motions.unshift("autoplay"),c.motions.every((function(t){return!t.startsWith("capture")}))&&c.motions.push("capture:[id|=root]")),n=a?[r()["default"].createElement(f,{render:function(){return(0,i().useMotions)(c.motions||[],"undefined"!==typeof window?document.documentElement:null),r()["default"].createElement("div",{},r()["default"].createElement(u.component))}})]:[c,r()["default"].createElement(u.component)]}return n};e["default"]=h},F8JR:function(t,e,n){"use strict";var r=n("tycR").forEach,i=n("pkCn"),o=n("rkAj"),a=i("forEach"),s=o("forEach");t.exports=a&&s?[].forEach:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}},FDzp:function(t,e,n){var r=n("dOgj");r("Int32",(function(t){return function(e,n,r){return t(this,e,n,r)}}))},FMNM:function(t,e,n){var r=n("xrYK"),i=n("kmMV");t.exports=function(t,e){var n=t.exec;if("function"===typeof n){var o=n.call(t,e);if("object"!==typeof o)throw TypeError("RegExp exec method returned something other than an Object or null");return o}if("RegExp"!==r(t))throw TypeError("RegExp#exec called on incompatible receiver");return i.call(t,e)}},FV85:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TargetTypeEnum=e.BindingTypeEnum=e.BindingScopeEnum=void 0;var r={Request:"Request",Singleton:"Singleton",Transient:"Transient"};e.BindingScopeEnum=r;var i={ConstantValue:"ConstantValue",Constructor:"Constructor",DynamicValue:"DynamicValue",Factory:"Factory",Function:"Function",Instance:"Instance",Invalid:"Invalid",Provider:"Provider"};e.BindingTypeEnum=i;var o={ClassProperty:"ClassProperty",ConstructorArgument:"ConstructorArgument",Variable:"Variable"};e.TargetTypeEnum=o},FZtP:function(t,e,n){var r=n("2oRo"),i=n("/byt"),o=n("F8JR"),a=n("kRJp");for(var s in i){var u=r[s],c=u&&u.prototype;if(c&&c.forEach!==o)try{a(c,"forEach",o)}catch(l){c.forEach=o}}},Ff2n:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n("zLVn");function i(t,e){if(null==t)return{};var n,i,o=Object(r["a"])(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)n=a[i],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}return o}},FfOG:function(t,e,n){"use strict";n.d(e,"a",(function(){return a})),n.d(e,"b",(function(){return o}));var r=n("YS25"),i={basename:"/"};window.routerBase&&(i.basename=window.routerBase);var o=Object({NODE_ENV:"production"}).__IS_SERVER?null:Object(r["a"])(i),a=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return t||(o=Object(r["a"])(i)),o}},"G+Rx":function(t,e,n){var r=n("0GbY");t.exports=r("document","documentElement")},GC2F:function(t,e,n){var r=n("+M1K");t.exports=function(t,e){var n=r(t);if(n%e)throw RangeError("Wrong offset");return n}},GLe2:function(t,e,n){"use strict";(function(t){n.d(e,"b",(function(){return ha})),n.d(e,"a",(function(){return Ar})),n.d(e,"c",(function(){return yt})),n.d(e,"d",(function(){return Rc}));var r=n("/t/I"),i=n.n(r),o=n("A1R+"),a=n.n(o),s=n("Vfn7"),u=n.n(s),c=n("+YC+"),l="1.0.0-rc.17",f="_maptalks__internal_layer_",h=["MultiPoint","MultiLineString","MultiPolygon","GeometryCollection"],p=["FeatureCollection","Feature","Point","LineString","Polygon"].concat(h),d=["markerFile","polygonPatternFile","linePatternFile","markerFillPatternFile","markerLinePatternFile"],v=[["markerWidth","markerHeight"],[],[null,"lineWidth"],[],[null,"markerLineWidth"]],g={lineWidth:1,lineOpacity:1,lineDx:1,lineDy:1,polygonOpacity:1,markerWidth:1,markerHeight:1,markerDx:1,markerDy:1,markerOpacity:1,markerFillOpacity:1,markerLineWidth:1,markerLineOpacity:1,textSize:1,textOpacity:1,textHaloRadius:1,textWrapWidth:1,textLineSpacing:1,textDx:1,textDy:1},m=["lineColor","polygonFill","markerFill","markerLineColor","textFill"],y=14;function _(){return Date.now()}function b(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)t[r]=n[r]}return t}function x(t){return null==t}function w(t){return"number"===typeof t&&!isNaN(t)}function E(t){return(0|t)===t}function S(t){return"object"===typeof t&&!!t}function O(t){return!x(t)&&("string"===typeof t||null!==t.constructor&&t.constructor===String)}function C(t){return!x(t)&&("function"===typeof t||null!==t.constructor&&t.constructor===Function)}var T=Object.prototype.hasOwnProperty;function A(t,e){return T.call(t,e)}var k=Math.PI/180;function M(t){return t*k}function P(t){return t/k}var R="[object process]"===Object.prototype.toString.call("undefined"!==typeof t?t:0)&&!t.versions["electron"]&&!t.versions["nw"]&&!t.versions["node-webkit"],j={},I={};function L(){return window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI}if(!R){var N=navigator.userAgent.toLowerCase(),D=document.documentElement,F="ActiveXObject"in window,B=-1!==N.indexOf("webkit"),z=-1!==N.indexOf("phantom"),U=-1!==N.search("android [23]"),V=-1!==N.indexOf("chrome"),H=-1!==N.indexOf("gecko")&&!B&&!window.opera&&!F,G="undefined"!==typeof orientation||-1!==N.indexOf("mobile"),W=!window.PointerEvent&&window.MSPointerEvent,Z=window.PointerEvent&&navigator.pointerEnabled||W,Y=F&&"transition"in D.style,X="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!U,q="MozPerspective"in D.style,K="OTransition"in D.style,Q=(Y||X||q)&&!K&&!z,$="undefined"!==typeof window&&C(window.createImageBitmap),J="undefined"!==typeof window&&C(window.ResizeObserver),tt="undefined"!==typeof window&&C(window.btoa),et=0;V&&(et=N.match(/chrome\/([\d.]+)/)[1]);var nt=!z&&(Z||"ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch),rt="undefined"!==typeof window&&"WebGLRenderingContext"in window,it=L(),ot=!1;try{var at=new OffscreenCanvas(2,2);at.getContext("2d"),ot=!0}catch(uf){ot=!1}var st=!1;try{window.addEventListener("testPassive",(function(){}),{get passive(){st=!0}})}catch(cf){}if(j={ie:F,ielt9:F&&!document.addEventListener,edge:"msLaunchUri"in navigator&&!("documentMode"in document),webkit:B,gecko:H,android:-1!==N.indexOf("android"),android23:U,chrome:V,chromeVersion:et,safari:!V&&-1!==N.indexOf("safari"),phantomjs:z,ie3d:Y,webkit3d:X,gecko3d:q,opera12:K,any3d:Q,mobile:G,mobileWebkit:G&&B,mobileWebkit3d:G&&X,mobileOpera:G&&window.opera,mobileGecko:G&&H,touch:!!nt,msPointer:!!W,pointer:!!Z,retina:it>1,devicePixelRatio:it,language:navigator.browserLanguage?navigator.browserLanguage:navigator.language,ie9:F&&9===document.documentMode,ie10:F&&10===document.documentMode,webgl:rt,imageBitMap:$,resizeObserver:J,btoa:tt,decodeImageInWorker:ot,monitorDPRChange:!0,supportsPassive:st,removeDPRListening:function(t){t&&delete I[t.id]},checkDevicePixelRatio:function(){if("undefined"!==typeof window&&j.monitorDPRChange){var t=L(),e=t!==j.devicePixelRatio;return e&&(j.devicePixelRatio=t),e}return!1},addDPRListening:function(t){t&&(I[t.id]=t)}},"undefined"!==typeof window&&window.matchMedia)for(var ut=1;ut<500;ut++){var ct=(.01*ut).toFixed(2),lt=window.matchMedia("screen and (resolution: "+ct+"dppx)");lt&&(lt.addEventListener?lt.addEventListener("change",j.checkDevicePixelRatio):lt.addListener&&lt.addListener(j.checkDevicePixelRatio))}if(j.devicePixelRatio){var ft=j.devicePixelRatio;Object.defineProperty(j,"devicePixelRatio",{get:function(){return ft},set:function(t){if(t!==ft&&(ft=t,j.monitorDPRChange))for(var e in I){var n=I[e];if(n&&n.options&&!n.options["devicePixelRatio"]&&n.checkSize&&n.getRenderer){var r=n.getRenderer();r&&n.checkSize(!0)}}}})}}var ht=j;function pt(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function dt(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var vt,gt,mt=function(){function t(t,e,n){if(x(t)||x(e)?x(t.x)||x(t.y)?Array.isArray(t)&&(this.x=+t[0],this.y=+t[1],this.z=t[2]):(this.x=+t.x,this.y=+t.y,this.z=t.z):(this.x=+t,this.y=+e,this.z=n),this._isNaN())throw new Error("Position is NaN")}var e=t.prototype;return e.set=function(t,e,n){return this.x=t,this.y=e,this.z=n||0,this},e.abs=function(){return new this.constructor(Math.abs(this.x),Math.abs(this.y))},e._abs=function(){return this.x=Math.abs(this.x),this.y=Math.abs(this.y),this},e._round=function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},e.round=function(){return new this.constructor(Math.round(this.x),Math.round(this.y))},e._ceil=function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},e.ceil=function(){return new this.constructor(Math.ceil(this.x),Math.ceil(this.y))},e.distanceTo=function(t){var e=t.x-this.x,n=t.y-this.y;return Math.sqrt(e*e+n*n)},e.mag=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},e._floor=function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},e.floor=function(){return new this.constructor(Math.floor(this.x),Math.floor(this.y))},e.copy=function(){return new this.constructor(this.x,this.y,this.z)},e._add=function(t,e){return x(t.x)?x(t[0])?(this.x+=t,this.y+=e):(this.x+=t[0],this.y+=t[1]):(this.x+=t.x,this.y+=t.y),this},e.add=function(t,e){var n,r;return x(t.x)?x(t[0])?(n=this.x+t,r=this.y+e):(n=this.x+t[0],r=this.y+t[1]):(n=this.x+t.x,r=this.y+t.y),new this.constructor(n,r)},e._sub=function(t,e){return x(t.x)?x(t[0])?(this.x-=t,this.y-=e):(this.x-=t[0],this.y-=t[1]):(this.x-=t.x,this.y-=t.y),this},e._substract=function(){return this._sub.apply(this,arguments)},e.sub=function(t,e){var n,r;return x(t.x)?x(t[0])?(n=this.x-t,r=this.y-e):(n=this.x-t[0],r=this.y-t[1]):(n=this.x-t.x,r=this.y-t.y),new this.constructor(n,r)},e.substract=function(){return this.sub.apply(this,arguments)},e.multi=function(t){return new this.constructor(this.x*t,this.y*t)},e._multi=function(t){return this.x*=t,this.y*=t,this},e.div=function(t){return this.multi(1/t)},e._div=function(t){return this._multi(1/t)},e.equals=function(t){return t instanceof this.constructor&&(this.x===t.x&&this.y===t.y&&this.z===t.z)},e._isNaN=function(){return isNaN(this.x)||isNaN(this.y)},e.isZero=function(){return 0===this.x&&0===this.y},e.toArray=function(){return w(this.z)?[this.x,this.y,this.z]:[this.x,this.y]},e.toFixed=function(t){return new this.constructor(this.x.toFixed(t),this.y.toFixed(t))},e.toJSON=function(){return{x:this.x,y:this.y}},t}(),yt=function(t){function e(){return t.apply(this,arguments)||this}pt(e,t);var n=e.prototype;return n.closeTo=function(t,e){return e||(e=0),this.x>=t.x-e&&this.x<=t.x+e&&this.y>=t.y-e&&this.y<=t.y+e},n.mag=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},n.unit=function(){return this.copy()._unit()},n._unit=function(){return this._div(this.mag()),this},n.perp=function(){return this.copy()._perp()},n._perp=function(){var t=this.y;return this.y=this.x,this.x=-t,this},n.angleWith=function(t){return this.angleWithSep(t.x,t.y)},n.angleWithSep=function(t,e){return Math.atan2(this.x*e-this.y*t,this.x*t+this.y*e)},n._rotate=function(t){var e=Math.cos(t),n=Math.sin(t),r=e*this.x-n*this.y,i=n*this.x+e*this.y;return this.x=r,this.y=i,this},n.rotate=function(t){return this.copy()._rotate(t)},e}(mt);function _t(t){var e="data:image/svg+xml";return t.length>4&&".svg"===t.slice(-4)?1:t.slice(0,e.length)===e?2:0}function bt(t,e){R&&bt.node?bt.node(t,e):t.src=e[0]}(function(){if(R)return vt=function(t){return setTimeout(t,16)},void(gt=clearTimeout);var t,e,n=1e3/30;function r(t){return setTimeout(t,n)}function i(t){return window["webkit"+t]||window["moz"+t]||window["ms"+t]}"undefined"!=typeof window?(t=window["requestAnimationFrame"]||i("RequestAnimationFrame")||r,e=window["cancelAnimationFrame"]||i("CancelAnimationFrame")||i("CancelRequestAnimationFrame")||function(t){window.clearTimeout(t)}):(t=r,e=clearTimeout),vt=function(e){return t(e)},gt=function(t){t&&e(t)}})();var xt=0;function wt(){return xt++}function Et(t){return t&&O(t)?JSON.parse(t):t}function St(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];if(n)for(var r=0,i=n.length;r<i;r++)t.push(n[r])}return t.length}function Ot(t,e){var n=e.indexOf(t);n>-1&&e.splice(n,1)}function Ct(t,e,n){if(!Array.isArray(t))return n?e.call(n,t):e(t);for(var r,i,o=[],a=0,s=t.length;a<s;a++)r=t[a],x(r)?o.push(null):Array.isArray(r)?o.push(Ct(r,e,n)):(i=n?e.call(n,r):e(r),o.push(i));return o}function Tt(t,e){return void 0===t?e:t}function At(t){return Math.sign?Math.sign(t):(t=+t,0===t||isNaN(t)?Number(t):t>0?1:-1)}function kt(t){if(Math.log2)return Math.log2(t);var e=Math.log(t)*Math.LOG2E,n=Math.round(e);return Math.abs(n-e)<1e-14?n:e}function Mt(t,e,n){return t*(1-n)+e*n}function Pt(t,e,n){if(t===n||t===e)return t;var r=n-e,i=((t-e)%r+r)%r+e;return i}function Rt(t,e,n){return Math.min(n,Math.max(e,t))}function jt(t){return Array.isArray(t)&&t.length>0}var It=/^url\((['"])(.+)\1\)$/i,Lt=/^url\(([^'"].*[^'"])\)$/i;function Nt(t){return O(t)?Lt.test(t)?1:It.test(t)?2:3:0}function Dt(t){var e,n=Nt(t);return 3===n?t:1===n?(e=Lt.exec(t),e[1]):2===n?(e=It.exec(t),e[2]):t}var Ft="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function Bt(t){if(ht.btoa)return window.btoa(t);for(var e,n,r=String(t),i="",o=0,a=Ft;r.charAt(0|o)||(a="=",o%1);i+=a.charAt(63&e>>8-o%1*8)){if(n=r.charCodeAt(o+=3/4),n>255)throw new Error("'btoa' failed: The string to be encoded contains characters outside of the Latin1 range.");e=e<<8|n}return i}function zt(t,e){for(var n=atob(t),r=new ArrayBuffer(n.length),i=new Uint8Array(r),o=0;o<n.length;o++)i[o]=255&n.charCodeAt(o);var a=new Blob([r],{type:e});return a}function Ut(t,e,n,r){var i=n-t,o=r-e;return Math.atan2(o,i)}var Vt,Ht="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7";function Gt(t,e){if(!t&&!e)return!0;if(!t||!e)return!1;for(var n in t)if("center"===n){if(!e[n]||!Wt(t[n][0],e[n][0])||!Wt(t[n][1],e[n][1]))return!1}else if(t[n]!==e[n])return!1;return!0}function Wt(t,e,n){return null==n&&(n=1e-6),t>=e-n&&t<=e+n}function Zt(t,e,n,r){t||(t=100),e||(e=4);var i=this;function o(){if(0===e)return i.show(),void(n&&(r?n.call(r):n()));e%2===0?i.hide():i.show(),e--,i._flashTimeout=setTimeout(o,t)}return e*=2,this._flashTimeout&&clearTimeout(this._flashTimeout),this._flashTimeout=setTimeout(o,t),this}function Yt(t,e){void 0===t&&(t=[]),void 0===e&&(e="_pt");for(var n=[],r=0,i=t.length;r<i;r++){var o=t[r];if(o){o[e]||(o[e]=new yt(0,0));var a=o[e];a.x=0,a.y=0,n.push(a)}else n.push(null)}return n}if(ht.decodeImageInWorker){var Xt=document.createElement("canvas");Xt.width=1,Xt.height=1,Vt=Xt.getContext("2d")}function qt(t,e){var n=Vt.createImageData(t.width,t.height);n.data.set(t.data),createImageBitmap(n).then((function(t){e(t)}))}function Kt(t){if(t&&0===t.indexOf("http://")||0===t.indexOf("https://"))return t;var e=document.createElement("a");return e.href=t,t=e.href,e=null,t}var Qt,$t={cssWidth:"1px",cssHeight:"1px",width:1,height:1};function Jt(t,e){void 0===e&&(e=1);var n=t.width,r=t.height;return $t.cssWidth=n+"px",$t.cssHeight=r+"px",$t.width=Math.round(n*e),$t.height=Math.round(r*e),$t}var te={width:100,height:10};function ee(){if(!Qt){var t=te.width,e=te.height;OffscreenCanvas?Qt=new OffscreenCanvas(t,e):(Qt=document.createElement("canvas"),Qt.width=t,Qt.height=e)}return Qt}var ne,re=function(){function t(t,e){if(void 0===e&&(e={}),Array.isArray(t))if(t.length<2)console.error("colors.length should >1");else{this.colors=t;for(var n=1/0,r=-1/0,i=0,o=t.length;i<o;i++){var a=t[i][0];n=Math.min(a,n),r=Math.max(a,r)}this.min=n,this.max=r,this.valueOffset=this.max-this.min,this.options=Object.assign({},te,e),this._initImgData()}else console.error("colors is not array")}var e=t.prototype;return e.getImageData=function(){return this.imgData},e._initImgData=function(){var t=ee(),e=this.options,n=e.width,r=e.height;t.width=n,t.height=r;var i=t.getContext("2d");i.clearRect(0,0,t.width,t.height);for(var o=i.createLinearGradient(0,0,t.width,0),a=this.colors,s=this.valueOffset,u=0,c=a.length;u<c;u++){var l=a[u],f=l[0],h=l[1],p=(f-this.min)/s;o.addColorStop(p,h)}i.fillStyle=o,i.fillRect(0,0,t.width,t.height),this.imgData=i.getImageData(0,0,t.width,t.height)},e.getColor=function(t){t=Math.max(this.min,t),t=Math.min(t,this.max);var e=(t-this.min)/this.valueOffset,n=Math.round(e*this.imgData.width);n=Math.min(n,this.imgData.width-1);var r=4*n,i=this.imgData.data[r],o=this.imgData.data[r+1],a=this.imgData.data[r+2],s=this.imgData.data[r+3];return[i,o,a,s]},t}(),ie="function"===typeof Map;function oe(t,e){var n,r,i;if(ge(t)){var o,a=t.stops&&"object"===typeof t.stops[0][0],s=a||void 0!==t.property,u=a||!s,c=t.type||e||"exponential";if("exponential"===c)o=ce;else if("interval"===c)o=ue;else if("categorical"===c)o=se;else if("identity"===c)o=he;else{if("color-interpolate"!==c)throw new Error('Unknown function type "'+c+'"');o=fe}if(a){for(var l={},f=[],h=0;h<t.stops.length;h++){var p=t.stops[h];void 0===l[p[0].zoom]&&(l[p[0].zoom]={zoom:p[0].zoom,type:t.type,property:t.property,default:t["default"],stops:[]}),l[p[0].zoom].stops.push([p[0].value,p[1]])}for(var d in l)f.push([l[d].zoom,oe(l[d])]);n=function(e,n){var r=ce({stops:f,base:t.base},e)(e,n);return"function"===typeof r?r(e,n):r},r=!1,i=!1}else u?(n=function(e){var n=o(t,e);return"function"===typeof n?n(e):n},r=!0,i=!1):(n=function(e,n){var r=o(t,n?n[t.property]:null);return"function"===typeof r?r(e,n):r},r=!1,i=!0)}else n=function(){return t},r=!0,i=!0;return n.isZoomConstant=i,n.isFeatureConstant=r,n}function ae(t,e,n){return void 0!==t?t:void 0!==e?e:void 0!==n?n:null}function se(t,e){for(var n=0;n<t.stops.length;n++)if(e===t.stops[n][0])return t.stops[n][1];return t["default"]}function ue(t,e){for(var n=0;n<t.stops.length;n++)if(e<t.stops[n][0])break;return t.stops[Math.max(n-1,0)][1]}function ce(t,e){var n=void 0!==t.base?t.base:1,r=0;while(1){if(r>=t.stops.length)break;if(e<=t.stops[r][0])break;r++}return 0===r?t.stops[r][1]:r===t.stops.length?t.stops[r-1][1]:pe(e,n,t.stops[r-1][0],t.stops[r][0],t.stops[r-1][1],t.stops[r][1])}ie&&(ne=new Map);var le={width:100,height:1};function fe(t,e){var n=t.stops;if(n&&n.length>1){var r;if(ne){var i=JSON.stringify(n);if(!ne.has(i)){var o=new re(n,le);ne.set(i,o)}r=ne.get(i)}else r=new re(n,le);var a=r.getColor(e),s=a[0],u=a[1],c=a[2],l=a[3];return[s/255,u/255,c/255,l/255]}return n&&1===n.length?n[0][1]:null}function he(t,e){return ae(e,t["default"])}function pe(t,e,n,r,i,o){return"function"===typeof i?function(){var a=i.apply(void 0,arguments),s=o.apply(void 0,arguments);return pe(t,e,n,r,a,s)}:i.length?ve(t,e,n,r,i,o):de(t,e,n,r,i,o)}function de(t,e,n,r,i,o){var a,s=r-n,u=t-n;return a=1===e?u/s:(Math.pow(e,u)-1)/(Math.pow(e,s)-1),i*(1-a)+o*a}function ve(t,e,n,r,i,o){for(var a=[],s=0;s<i.length;s++)a[s]=de(t,e,n,r,i[s],o[s]);return a}function ge(t){return t&&"object"===typeof t&&(t.stops||t.property&&"identity"===t.type)}function me(t){for(var e in t)if(ge(t[e]))return!0;return!1}function ye(t){return xe(t,"exponential")}function _e(t,e){if(!t)return null;var n=!1;if(Array.isArray(t)){for(var r,i=[],o=0;o<t.length;o++)r=_e(t[o],e),r?(i.push(r),n=!0):i.push(t[o]);return n?i:t}var a,s={__fn_types_loaded:!0},u=[];for(a in t)t.hasOwnProperty(a)&&u.push(a);for(var c=function(t){Object.defineProperty(s,t,{get:function(){return this["__fn_"+t]||(this["__fn_"+t]=ye(this["_"+t])),this["__fn_"+t].apply(this,e())},set:function(e){this["_"+t]=e},configurable:!0,enumerable:!0})},l=0,f=u.length;l<f;l++)a=u[l],ge(t[a])?(n=!0,s["_"+a]=t[a],c(a)):s[a]=t[a];return n?s:t}function be(t){if(!t||!t.stops)return[];for(var e=[],n=0,r=t.stops.length;n<r;n++)e.push(t.stops[n][1]);return e}function xe(t,e){if(!ge(t))return function(){return t};t=JSON.parse(JSON.stringify(t));var n=!0,r=!0,i=t.stops;if(i)for(var o=0;o<i.length;o++)if(ge(i[o][1])){var a=xe(i[o][1],e);n=n&&a.isZoomConstant,r=r&&a.isFeatureConstant,i[o]=[i[o][0],a]}var s=oe(t,e);return s.isZoomConstant=n&&s.isZoomConstant,s.isFeatureConstant=r&&s.isFeatureConstant,s}var we=["Unknown","Point","LineString","Polygon","MultiPoint","MultiLineString","MultiPolygon","GeometryCollection"];function Ee(t){return new Function("f","var p = (f && f.properties || {}); return "+Se(t))}function Se(t){if(!t)return"true";var e=t[0];if(t.length<=1)return"any"===e?"false":"true";var n="=="===e?Ce(t[1],t[2],"===",!1):"!="===e?Ce(t[1],t[2],"!==",!1):"<"===e||">"===e||"<="===e||">="===e?Ce(t[1],t[2],e,!0):"any"===e?Te(t.slice(1),"||"):"all"===e?Te(t.slice(1),"&&"):"none"===e?Me(Te(t.slice(1),"||")):"in"===e?Ae(t[1],t.slice(2)):"!in"===e?Me(Ae(t[1],t.slice(2))):"has"===e?ke(t[1]):"!has"===e?Me(ke(t[1])):"true";return"("+n+")"}function Oe(t){return"$"===t[0]?"f."+t.substring(1):"p["+JSON.stringify(t)+"]"}function Ce(t,e,n,r){var i=Oe(t),o="$type"===t?we.indexOf(e):JSON.stringify(e);return(r?"typeof "+i+"=== typeof "+o+"&&":"")+i+n+o}function Te(t,e){return t.map(Se).join(e)}function Ae(t,e){"$type"===t&&(e=e.map((function(t){return we.indexOf(t)})));var n=JSON.stringify(e.sort(Pe)),r=Oe(t);return e.length<=200?n+".indexOf("+r+") !== -1":"function(v, a, i, j) {\n        while (i <= j) { var m = (i + j) >> 1;\n            if (a[m] === v) return true; if (a[m] > v) j = m - 1; else i = m + 1;\n        }\n    return false; }("+r+", "+n+",0,"+(e.length-1)+")"}function ke(t){return"$id"===t?'"id" in f':JSON.stringify(t)+" in p"}function Me(t){return"!("+t+")"}function Pe(t,e){return t<e?-1:t>e?1:0}function Re(t){var e=t._toJSON(),n=e["feature"];return n["type"]=we.indexOf(n["geometry"]["type"]),n["subType"]=e["subType"],n}function je(t){if(!Array.isArray(t))return je([t]);for(var e=[],n=0;n<t.length;n++){var r=void 0;r=!0===t[n]["filter"]?function(){return!0}:Ee(t[n]["filter"]),e.push(Ie({},t[n],{filter:r}))}return e}function Ie(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)t[r]=n[r]}return t}var Le=[],Ne={};function De(t,e){return _e(t,(function(){var t=e.getMap();return Fe(Le,t?t.getZoom():12,b({},e.getProperties(),Be(Ne,t&&t.getBearing()||0,t&&t.getPitch()||0,t?t.getZoom():10)))}))}function Fe(t,e,n){return t[0]=e,t[1]=n,t}function Be(t,e,n,r){return t["{bearing}"]=e,t["{pitch}"]=n,t["{zoom}"]=r,t}function ze(t){var e={stroke:{stroke:t["markerLineColor"],"stroke-width":t["markerLineWidth"],"stroke-opacity":t["markerLineOpacity"],"stroke-dasharray":null,"stroke-linecap":"butt","stroke-linejoin":"round"},fill:{fill:t["markerFill"],"fill-opacity":t["markerFillOpacity"]}};return 0===e["stroke"]["stroke-width"]&&(e["stroke"]["stroke-opacity"]=0),e}function Ue(t,e,n){if(!t["markerPath"])return null;var r=1,i=ze(t);w(t["markerOpacity"])&&(r=t["markerOpacity"]),w(t["opacity"])&&(r*=t["opacity"]);var o={};if(i){for(var a in i["stroke"])i["stroke"].hasOwnProperty(a)&&(x(i["stroke"][a])||(o[a]=i["stroke"][a]));for(var s in i["fill"])i["fill"].hasOwnProperty(s)&&(x(i["fill"][s])||(o[s]=i["fill"][s]))}for(var u,c=Array.isArray(t["markerPath"])?t["markerPath"]:[t["markerPath"]],l=[],f=0;f<c.length;f++)u=O(c[f])?{path:c[f]}:c[f],u=b({},u,o),u["d"]=u["path"],delete u["path"],l.push(u);var h=['<svg version="1.1"','xmlns="http://www.w3.org/2000/svg"'];r<1&&h.push('opacity="'+r+'"'),t["markerPathWidth"]&&t["markerPathHeight"]&&h.push('viewBox="0 0 '+t["markerPathWidth"]+" "+t["markerPathHeight"]+'"'),h.push('preserveAspectRatio="none"'),e&&h.push('width="'+e+'"'),n&&h.push('height="'+n+'"'),h.push("><defs></defs>");for(var p=0;p<l.length;p++){var d="<path ";for(var v in l[p])l[p].hasOwnProperty(v)&&(d+=" "+v+'="'+l[p][v]+'"');d+="></path>",h.push(d)}h.push("</svg>");var g="data:image/svg+xml;base64,"+Bt(h.join(" "));return g}function Ve(t,e){if(!t)return[];var n=t;Array.isArray(t)||(n=[t]);for(var r,i,o,a,s=[],u=d,c=n.length-1;c>=0;c--)if(t=n[c],t){e&&(t=He(t));for(var l=0;l<u.length;l++)if(r=t[u[l]],ge(r)&&(r=be(r)),r){Array.isArray(r)||(r=[r]);for(var f=0;f<r.length;f++)"url("===r[f].slice(0,4)&&(r[f]=Dt(r[f])),i=v[l],s.push([r[f],t[i[0]],t[i[1]]])}if("path"===t["markerType"]&&t["markerPath"])if(o=ge(t["markerWidth"])?200:t["markerWidth"],a=ge(t["markerHeight"])?200:t["markerHeight"],ge(t["markerPath"])){r=be(t["markerPath"]);for(var h=t["markerPath"],p=0;p<r.length;p++)t["markerPath"]=r[p],s.push([Ue(t),o,a]);t["markerPath"]=h}else s.push([Ue(t),o,a])}return s}function He(t){if(!t)return null;var e=t;if(R)return e;for(var n,r=d,i=0,o=r.length;i<o;i++)n=e[r[i]],n&&(e[r[i]]=Ge(n));return e}function Ge(t){if(ge(t)){for(var e=t.stops,n=0;n<e.length;n++)e[n][1]=Ge(e[n][1]);return t}return"url("===t.slice(0,4)&&(t=Dt(t)),t}var We=function(){function t(t,e){w(t)&&w(e)?(this.width=t,this.height=e):w(t["width"])?(this.width=t.width,this.height=t.height):Array.isArray(t)&&(this.width=t[0],this.height=t[1])}var e=t.prototype;return e.copy=function(){return new t(this["width"],this["height"])},e.add=function(e,n){var r,i;return e instanceof t?(r=this.width+e.width,i=this.height+e.height):(r=this.width+e,i=this.height+n),new t(r,i)},e.equals=function(t){return this["width"]===t["width"]&&this["height"]===t["height"]},e.multi=function(e){return new t(this["width"]*e,this["height"]*e)},e._multi=function(t){return this["width"]*=t,this["height"]*=t,this},e._round=function(){return this["width"]=Math.round(this["width"]),this["height"]=Math.round(this["height"]),this},e.toPoint=function(){return new yt(this["width"],this["height"])},e.toArray=function(){return[this["width"],this["height"]]},e.toJSON=function(){return{width:this["width"],height:this["height"]}},t}();function Ze(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}var Ye=/[\b\t\r\v\f]/gim;function Xe(t){return O(t)?t.replace(Ye,""):t}function qe(t){return Ze(t).split(/\s+/)}var Ke="undefined"!==typeof document?document.createElement("canvas").getContext("2d"):null;function Qe(t,e){return Qe.node?Qe.node(t,e):(Ke.font=e,Ke.measureText(t).width)}function $e(t,e,n){var r=Qe(t,e);return new We(r,n||y)}function Je(t,e,n,r){if(!t||0===t.length)return[{text:"",width:0}];var i=x(r)?Qe(t,e):r,o=i/t.length,a=Math.floor(n/o/2);if(o>=n||a<=0)return[{text:"",width:n}];if(i<=n)return[{text:t,width:i}];for(var s=[],u=t.substring(0,a),c=o*a,l=a,f=t.length;l<f;l++){var h=t[l],p=Qe(u+h);p>=n?(s.push({text:u,width:c}),u=t.substring(l,a+l),l+=a-1,c=o*a):(u+=h,c=p),l>=f-1&&(c=Qe(u),s.push({text:u,width:c}))}return s}var tn=/\{([\w_]+)\}/g;function en(t,e){return O(t)?t.replace(tn,(function(t,n){if(!e)return"";var r=e[n];return x(r)?"":Array.isArray(r)?r.join():r})):t}function nn(t,e){w(t)&&(t+=""),t=t||"";var n=e["textMaxHeight"]||0,r=sn(t,e);return n&&n<r.size.height&&(r.size.height=n),r}function rn(t,e,n){var r,i,o=t["width"],a=t["height"];return r="left"===e?-o:"right"===e?0:-o/2,i="top"===n?-a:"bottom"===n?0:-a/2,new yt(r,i)}var on="monospace";function an(t){return t["textFont"]?t["textFont"]:(t["textStyle"]&&"normal"!==t["textStyle"]?t["textStyle"]+" ":"")+(t["textWeight"]&&"normal"!==t["textWeight"]?t["textWeight"]+" ":"")+t["textSize"]+"px "+(t["textFaceName"]?'"'===t["textFaceName"][0]?t["textFaceName"]:'"'+t["textFaceName"]+'"':on)}function sn(t,e){var n=an(e),r=e["textLineSpacing"]||0,i=$e(t,n,e["textSize"]),o=i["width"],a=i["height"],s=e["textWrapCharacter"],u=[],c=e["textWrapWidth"];(!c||c>o)&&(c=o),O(t)||(t+="");var l=0;if(s&&t.indexOf(s)>=0)for(var f=t.split(s),h=0,p=f.length;h<p;h++){var d=f[h],v=Qe(d,n);if(v>c)for(var g=Je(d,n,c,v),m=0,y=g.length;m<y;m++){var _=g[m].width;_>l&&(l=_),u.push({text:g[m].text,size:new We(_,a)})}else v>l&&(l=v),u.push({text:d,size:new We(v,a)})}else if(o>c)for(var b=Je(t,n,c,o),x=0;x<b.length;x++){var w=b[x].width;w>l&&(l=w),u.push({text:b[x].text,size:new We(w,a)})}else o>l&&(l=o),u.push({text:t,size:i});var E=u.length,S=new We(l,a*E+r*(E-1));return{total:E,size:S,rows:u,rawSize:i}}function un(t){var e,n=0,r=t&&t.length||0;if(!r)return n;for(var i=0;i<r;i++)e=t.charCodeAt(i),n=(n<<5)-n+e,n&=n;return n}function cn(t){return t&&t["colorStops"]}function ln(t){var e=[t["type"]];if(t["places"]&&e.push(t["places"].join()),t["colorStops"]){for(var n=[],r=t["colorStops"].length-1;r>=0;r--)n.push(t["colorStops"][r].join());e.push(n.join(","))}return e.join("_")}function fn(t,e){if(!t)return 1;var n=[];if(Array.isArray(t)){for(var r=0;r<t.length;r++)n.push(fn(t[r],e));return n.sort().join(",")}var i=Object.keys(t).sort(),o=i.reduce((function(n,r){return e&&0!==r.indexOf(e)||(n[r]=t[r]),n}),{}),a=un(JSON.stringify(o));return a}function hn(t,e){function n(t,e){var n=t["opacity"];x(n)?t["opacity"]=e:t["opacity"]*=e}var r;if(Array.isArray(t)){r=[];for(var i=0;i<t.length;i++){var o=b({},t[i]);n(o,e),r.push(o)}}else r=b({},t),n(r,e);return r}function pn(t){var e=Array.prototype.slice.call(arguments,1);if(e&&e.length||(e=[{}]),Array.isArray(t)){for(var n,r,i=[],o=0,a=t.length;o<a;o++){n=t[o],r={};for(var s=0,u=e.length;s<u;s++)Array.isArray(e[s])?x(e[s][o])?b(r,n||{}):b(r,n,e[s][o]):b(r,n,e[s]?e[s]:{});i.push(r)}return i}var c=[{},t];return c.push.apply(c,e),b.apply(this,c)}function dn(t){if(t.symbol&&(t=[t]),Array.isArray(t))return t;var e=t["$root"],n=t["$iconset"];if(t=t.style,e||n){e&&"/"===e[e.length-1]&&(e=e.substring(0,e.length-1)),n&&"/"===n[n.length-1]&&(n=n.substring(0,n.length-1));var r=function(t){return"{$root}"===t?e:"{$iconset}"===t?n:null};vn(t,r)}return t}function vn(t,e){for(var n=0;n<t.length;n++){var r=t[n].symbol;r&&mn(r,e)}}var gn=/(\{\$root\}|\{\$iconset\})/g;function mn(t,e){for(var n in t)t.hasOwnProperty(n)&&"textName"!==n&&(O(t[n])&&t[n].length>2?t[n]=t[n].replace(gn,e):ge(t[n])?t[n]=yn(t[n],e):S(t[n])&&mn(t[n],e))}function yn(t,e){var n=t["default"];O(n)&&(t["default"]=n.replace(gn,e));for(var r=t.stops,i=0;i<r.length;i++)Array.isArray(r[i])&&(O(r[i][1])?r[i][1]=r[i][1].replace(gn,e):ge(r[i][1])&&(r[i][1]=yn(r[i][1],e)));return t}function _n(t){void 0===t&&(t=[]),Array.isArray(t)||(t=[t]);for(var e=t.length,n=0;n<e;n++){var r=t[n];if(r.style){var i=r.style,o=i.lineDasharray,a=i.lineWidth;if(a&&w(a)&&a>0&&o&&Array.isArray(o)&&o.length)return!0}}return!1}var bn=function(t){return t[0]},xn=R?bn:function(t){for(var e=document.documentElement.style,n=0;n<t.length;n++)if(t[n]in e)return t[n];return!1},wn=xn(["transform","WebkitTransform","OTransform","MozTransform","msTransform"]),En=xn(["transformOrigin","WebkitTransformOrigin","OTransformOrigin","MozTransformOrigin","msTransformOrigin"]),Sn=xn(["transition","WebkitTransition","OTransition","MozTransition","msTransition"]);xn(["filter","WebkitFilter","OFilter","MozFilter","msFilter"]);function On(t,e){var n=document.createElement(t);return e&&Un(n,e),n}function Cn(t,e,n){var r=On(t);return e&&Fn(r,e),n&&n.appendChild(r),r}function Tn(t){if(!t)return this;if(ht.ielt9||ht.ie9){var e=On("div");e.appendChild(t),e.innerHTML="",e=null}else t.parentNode&&t.parentNode.removeChild(t);return this}function An(t,e,n,r){if(!t||!t.addEventListener||!e||!n)return this;for(var i=function(e){e||(e=window.event),n.call(r||t,e)},o=e.split(" "),a=o.length-1;a>=0;a--){var s=o[a];if(s){t["Z__"+s]||(t["Z__"+s]=[]);var u=Mn(t,s,n);u>=0&&(console.warn(t,"find '"+s+"' handler:",n," The old listener function will be removed"),kn(t,s,n)),t["Z__"+s].push({callback:i,src:n}),t.addEventListener(s,i,!!ht.supportsPassive&&{capture:!1,passive:!1})}}return this}function kn(t,e,n){function r(e,n){"mousewheel"===e&&ht.gecko&&(e="DOMMouseScroll"),t.removeEventListener(e,n,!1)}if(!t||!t.removeEventListener||!e)return this;for(var i=e.split(" "),o=i.length-1;o>=0;o--){var a=i[o];if(a){if(!n&&t["Z__"+a]){for(var s=t["Z__"+a],u=0,c=s.length;u<c;u++)r(s[u].callback);return delete t["Z__"+a],this}var l=Mn(t,a,n);if(l<0)return this;var f=t["Z__"+a][l];r(a,f.callback),t["Z__"+a].splice(l,1)}}return this}function Mn(t,e,n){if(!t||!t["Z__"+e]||!n)return-1;for(var r=t["Z__"+e],i=0,o=r.length;i<o;i++)if(r[i].src===n)return i;return-1}function Pn(t){return t.preventDefault?t.preventDefault():t.returnValue=!1,this}function Rn(t){return t.stopPropagation?t.stopPropagation():t.cancelBubble=!0,this}function jn(t){return t.onselectstart=function(){return!1},t.ondragstart=function(){return!1},t.setAttribute("unselectable","on"),this}function In(t,e){return t?(ht.any3d?Hn(t,e):(t.style.left=e.x+"px",t.style.top=e.y+"px"),e):null}function Ln(t){var e=window.getComputedStyle(t),n=[parseInt(e["padding-left"]),parseInt(e["padding-top"])],r=t.getBoundingClientRect(),i=t.offsetWidth,o=t.offsetHeight,a=i?r.width/i:1,s=o?r.height/o:1;return t.__position=[r.left+n[0],r.top+n[1],a,s],t.__position}function Nn(t,e){t||(t=window.event);var n=e.__position;return n||(n=Ln(e)),new yt((t.clientX-n[0]-e.clientLeft)/n[2],(t.clientY-n[1]-e.clientTop)/n[3])}function Dn(t,e){var n=t.length-e.length;return n>=0&&t.indexOf(e,n)===n}function Fn(t,e){var n=t.style.cssText;return Dn(n,";")||(n+=";"),t.style.cssText=n+e,this}function Bn(t,e){if(void 0!==t.classList)return t.classList.contains(e);var n=Vn(t);return n.length>0&&new RegExp("(^|\\s)"+e+"(\\s|$)").test(n)}function zn(t,e){if(void 0===t.classList||Bn(t,e)){var n=Vn(t);Un(t,(n?n+" ":"")+e)}else for(var r=qe(e),i=0,o=r.length;i<o;i++)t.classList.add(r[i]);return this}function Un(t,e){return x(t.className.baseVal)?t.className=e:t.className.baseVal=e,this}function Vn(t){return x(t.className.baseVal)?t.className:t.className.baseVal}function Hn(t,e){var n=e||new yt(0,0);return t.style[wn]=ht.any3d?"translate3d("+n.x+"px,"+n.y+"px,0px)":"translate("+n.x+"px,"+n.y+"px)",this}function Gn(t){return/<[a-z\][\s\S]*>/i.test(t)}function Wn(t,e){var n=Zn(t);O(e)?n.innerHTML=e:n.appendChild(e);var r=new We(n.clientWidth,n.clientHeight);return Tn(n),r}function Zn(t){var e=document.createElement(t);return e.style.cssText="position:absolute;left:-10000px;top:-10000px;",document.body.appendChild(e),e}var Yn,Xn=An,qn=kn,Kn="function"===typeof Map,Qn=function(){},$n=function(){function t(t,e){this.max=t,this.onRemove=e||Qn,this.reset()}var e=t.prototype;return e.reset=function(){for(var t in this.data)this.onRemove(this.data[t]);return this.data={},this.order=[],this},e.clear=function(){this.reset(),delete this.onRemove},e.add=function(t,e){if(this.has(t))this.order.splice(this.order.indexOf(t),1),this.data[t]=e,this.order.push(t);else if(this.data[t]=e,this.order.push(t),this.order.length>this.max){var n=this.getAndRemove(this.order[0]);n&&this.onRemove(n)}return this},e.has=function(t){return t in this.data},e.keys=function(){return this.order},e.getAndRemove=function(t){if(!this.has(t))return null;var e=this.data[t];return delete this.data[t],this.order.splice(this.order.indexOf(t),1),e},e.get=function(t){if(!this.has(t))return null;var e=this.data[t];return e},e.remove=function(t){if(!this.has(t))return this;var e=this.data[t];return delete this.data[t],this.onRemove(e),this.order.splice(this.order.indexOf(t),1),this},e.setMaxSize=function(t){this.max=t;while(this.order.length>this.max){var e=this.getAndRemove(this.order[0]);e&&this.onRemove(e)}return this},t}();Kn&&(Yn=function(){function t(t,e){this.max=t,this.onRemove=e||Qn,this.reset()}var e=t.prototype;return e.reset=function(){if(this.data){var t=this.data.values(),e=t,n=Array.isArray(e),r=0;for(e=n?e:e[Symbol.iterator]();;){var i;if(n){if(r>=e.length)break;i=e[r++]}else{if(r=e.next(),r.done)break;i=r.value}var o=i;this.onRemove(o)}}return this.data=new Map,this},e.clear=function(){this.reset(),delete this.onRemove},e.add=function(t,e){return e?(this.has(t)?(this.data["delete"](t),this.data.set(t,e),this.data.size>this.max&&this.shrink()):this.data.set(t,e),this):this},e.keys=function(){var t=new Array(this.data.size),e=0,n=this.data.keys(),r=n,i=Array.isArray(r),o=0;for(r=i?r:r[Symbol.iterator]();;){var a;if(i){if(o>=r.length)break;a=r[o++]}else{if(o=r.next(),o.done)break;a=o.value}var s=a;t[e++]=s}return t},e.shrink=function(){var t=this.data.keys(),e=t.next();while(this.data.size>this.max){var n=this.getAndRemove(e.value);n&&this.onRemove(n),e=t.next()}},e.has=function(t){return this.data.has(t)},e.getAndRemove=function(t){if(!this.has(t))return null;var e=this.data.get(t);return this.data["delete"](t),e},e.get=function(t){if(!this.has(t))return null;var e=this.data.get(t);return e},e.remove=function(t){if(!this.has(t))return this;var e=this.data.get(t);return this.data["delete"](t),this.onRemove(e),this},e.setMaxSize=function(t){return this.max=t,this.data.size>this.max&&this.shrink(),this},t}());var Jn=Kn?Yn:$n,tr={jsonp:function(t,e){var n="_maptalks_jsonp_"+wt();t.match(/\?/)?t+="&callback="+n:t+="?callback="+n;var r=document.createElement("script");return r.type="text/javascript",r.src=t,window[n]=function(t){e(null,t),document.getElementsByTagName("head")[0].removeChild(r),r=null,delete window[n]},document.getElementsByTagName("head")[0].appendChild(r),this},get:function(t,e,n){if(C(e)){var r=n;n=e,e=r}if(R&&tr.get.node)return tr.get.node(t,n,e);var i=tr._getClient(n);if(i.open("GET",t,!0),e){for(var o in e.headers)i.setRequestHeader(o,e.headers[o]);i.withCredentials="include"===e.credentials,e["responseType"]&&(i.responseType=e["responseType"])}return i.send(null),i},post:function(t,e,n){var r;if(O(t)){if(C(e)){var i=n;n=e,e=i}e=e||{},r=e.postData}else{var o=n;r=e,e=t,t=e.url,n=o}if(R&&tr.post.node)return e.url=t,tr.post.node(e,r,n);var a=tr._getClient(n);if(a.open("POST",e.url,!0),e.headers||(e.headers={}),e.headers["Content-Type"]||(e.headers["Content-Type"]="application/x-www-form-urlencoded"),"setRequestHeader"in a)for(var s in e.headers)e.headers.hasOwnProperty(s)&&a.setRequestHeader(s,e.headers[s]);return O(r)||(r=JSON.stringify(r)),a.send(r),a},_wrapCallback:function(t,e){return function(){if(4===t.readyState)if(200===t.status)if("arraybuffer"===t.responseType){var n=t.response;0===n.byteLength?e(new Error("http status 200 returned without content.")):e(null,{data:t.response,cacheControl:t.getResponseHeader("Cache-Control"),expires:t.getResponseHeader("Expires"),contentType:t.getResponseHeader("Content-Type")})}else e(null,t.responseText);else e(new Error(t.statusText+","+t.status))}},_getClient:function(t){var e;try{e=new XMLHttpRequest}catch(cf){try{e=new ActiveXObject("Msxml2.XMLHTTP")}catch(cf){try{e=new ActiveXObject("Microsoft.XMLHTTP")}catch(cf){}}}return e.onreadystatechange=tr._wrapCallback(e,t),e},getArrayBuffer:function(t,e,n){if(C(e)){var r=n;n=e,e=r}return e||(e={}),e["responseType"]="arraybuffer",tr.get(t,e,n)},getImage:function(t,e,n){return tr.getArrayBuffer(e,n,(function(e,n){if(e)t.onerror&&t.onerror(e);else if(n){var r=window.URL||window.webkitURL,i=t.onload;t.onload=function(){i&&i(),r.revokeObjectURL(t.src)};var o=new Blob([new Uint8Array(n.data)],{type:n.contentType});t.cacheControl=n.cacheControl,t.expires=n.expires,t.src=n.data.byteLength?r.createObjectURL(o):Ht}}))},getJSON:function(t,e,n){if(C(e)){var r=n;n=e,e=r}var i=function(t,e){var r=e?Et(e):null;n(t,r)};return e&&e["jsonp"]?tr.jsonp(t,i):tr.get(t,e,i)}},er="#000",nr="rgba(255,255,255,0)",rr="#000",ir=!1,or=null,ar=Math.PI/180,sr=1,ur={getCanvas2DContext:function(t){return t.getContext("2d",{willReadFrequently:!0})},setHitTesting:function(t){ir=t},createCanvas:function(t,e,n){var r;return R?r=new n(t,e):(r=On("canvas"),r.width=t,r.height=e),r},prepareCanvasFont:function(t,e){t.textBaseline="top",t.font=an(e);var n=e["textFill"];n||(n=rr),t.fillStyle=ur.getRgba(n,e["textOpacity"])},prepareCanvas:function(t,e,n,r){if(e){var i=e["lineWidth"];x(i)||t.lineWidth===i||(t.lineWidth=i);var o=e["linePatternFile"],a=e["lineColor"]||er;if(r)t.strokeStyle="#000";else if(o&&n){var s;(e["linePatternDx"]||e["linePatternDy"])&&(s=[e["linePatternDx"],e["linePatternDy"]]),ur._setStrokePattern(t,o,i,s,n),e["lineDasharray"]=[]}else cn(a)?e["lineGradientExtent"]?t.strokeStyle=ur._createGradient(t,a,e["lineGradientExtent"]):t.strokeStyle=er:(Array.isArray(a)&&(a=ur.normalizeColorToRGBA(a)),t.strokeStyle=a);e["lineJoin"]&&(t.lineJoin=e["lineJoin"]),e["lineCap"]&&(t.lineCap=e["lineCap"]),t.setLineDash&&jt(e["lineDasharray"])&&t.setLineDash(e["lineDasharray"]);var u=e["polygonPatternFile"],c=e["polygonFill"]||nr;if(r)t.fillStyle="#000";else if(u&&n){var l=hr(u),f=n.getImage([l,null,null]);if(f||(f=n.getImage([l+"-texture",null,i])),_t(l)&&f instanceof Image&&(ht.edge||ht.ie)){var h=f.width||20,p=f.height||20,d=ur.createCanvas(h,p);ur.image(d.getContext("2d"),f,0,0,h,p),f=d}f?(t.fillStyle=t.createPattern(f,"repeat"),(e["polygonPatternDx"]||e["polygonPatternDy"])&&(t.fillStyle["polygonPatternOffset"]=[e["polygonPatternDx"],e["polygonPatternDy"]])):"undefined"!==typeof console&&console.warn("img not found for",l)}else cn(c)?e["polygonGradientExtent"]?t.fillStyle=ur._createGradient(t,c,e["polygonGradientExtent"]):t.fillStyle="rgba(255,255,255,0)":(Array.isArray(c)&&(c=ur.normalizeColorToRGBA(c)),t.fillStyle=c)}},_createGradient:function(t,e,n){var r=null,i=e["places"],o=n.getMin(),a=n.getMax(),s=n.getWidth(),u=n.getHeight();if(e["type"]&&"linear"!==e["type"]){if("radial"===e["type"]){if(i){if(6!==i.length)throw new Error("A radial gradient's places should have 6 numbers.");i=[o.x+i[0]*s,o.y+i[1]*u,s*i[2],o.x+i[3]*s,o.y+i[4]*u,s*i[5]]}else{var c=n.getCenter()._round();i=[c.x,c.y,Math.abs(c.x-o.x),c.x,c.y,0]}r=t.createRadialGradient.apply(t,i)}}else{if(i){if(4!==i.length)throw new Error("A linear gradient's places should have 4 numbers.");i=[o.x+i[0]*s,o.y+i[1]*u,o.x+i[2]*s,o.y+i[3]*u]}else i=[o.x,o.y,a.x,o.y];r=t.createLinearGradient.apply(t,i)}return e["colorStops"].forEach((function(t){r.addColorStop.apply(r,t)})),r},_setStrokePattern:function(t,e,n,r,i){var o,a=hr(e);if(R)o=i.getImage([a,null,n]);else{var s=a+"-texture-"+n;if(o=i.getImage(s),!o){var u=i.getImage([a,null,null]);if(u){var c;c=u.width&&u.height?Math.round(u.width*n/u.height):n;var l=ur.createCanvas(c,n,t.canvas.constructor);ur.image(l.getContext("2d"),u,0,0,c,n),i.addResource([s,null,n],l),o=l}}}o?(t.strokeStyle=t.createPattern(o,"repeat"),t.strokeStyle["linePatternOffset"]=r):"undefined"!==typeof console&&console.warn("img not found for",a)},clearRect:function(t,e,n,r,i){t.canvas._drawn=!1,t.clearRect(e,n,r,i)},fillCanvas:function(t,e,n,r){if(ir&&(e=1),t.canvas._drawn=!0,0!==e){var i,o=ur._isPattern(t.fillStyle),a=t.fillStyle&&t.fillStyle["polygonPatternOffset"],s=a?a[0]:0,u=a?a[1]:0;x(e)&&(e=1),e<1&&(i=t.globalAlpha,t.globalAlpha*=e),o&&(n=n||0,r=r||0,t.translate(n+s,r+u)),t.fill(),o&&t.translate(-n-s,-r-u),e<1&&(t.globalAlpha=i)}},getRgba:function(t,e){return x(e)&&(e=1),"#"!==t[0]?(Array.isArray(t)&&(t=ur.normalizeColorToRGBA(t,e)),t):(7===t.length?(n=parseInt(t.substring(1,3),16),r=parseInt(t.substring(3,5),16),i=parseInt(t.substring(5,7),16)):(n=17*parseInt(t.substring(1,2),16),r=17*parseInt(t.substring(2,3),16),i=17*parseInt(t.substring(3,4),16)),"rgba("+n+","+r+","+i+","+e+")");var n,r,i},normalizeColorToRGBA:function(t,e){return void 0===e&&(e=1),"rgba("+255*t[0]+","+255*t[1]+","+255*t[2]+","+(4===t.length?t[3]:1)*e+")"},image:function(t,e,n,r,i,o){t.canvas._drawn=!0;try{w(i)&&w(o)?t.drawImage(e,n,r,i,o):t.drawImage(e,n,r)}catch(a){console&&(console.warn("error when drawing image on canvas:",a),console.warn(e))}},text:function(t,e,n,r,i){ur._textOnMultiRow(t,i["rows"],r,n,i["size"],i["rawSize"])},_textOnMultiRow:function(t,e,n,r,i,o){for(var a,s,u=rn(i,n["textHorizontalAlignment"],n["textVerticalAlignment"]),c=o["height"]+n["textLineSpacing"],l=r.add(0,u.y),f=n["textMaxHeight"],h=0,p=0,d=e.length;p<d;p++)if(a=e[p]["text"],s=rn(e[p]["size"],n["textHorizontalAlignment"],n["textVerticalAlignment"]),ur._textOnLine(t,a,l.add(s.x,p*c),n["textHaloRadius"],n["textHaloFill"],n["textHaloOpacity"]),f>0&&(h+=c,h+o["height"]>=f))break},_textOnLine:function(t,e,n,r,i,o){ir&&(o=1);var a,s,u=0!==o&&0!==r;t.textBaseline="top";var c=t.shadowBlur,l=t.shadowOffsetX,f=t.shadowOffsetY;if(u){var h=t.globalAlpha;t.globalAlpha*=o,t.miterLimit=2,t.lineJoin="round",t.lineCap="round",t.lineWidth=2*r,Array.isArray(i)&&(i=ur.normalizeColorToRGBA(i)),t.strokeStyle=i,t.strokeText(e,n.x,n.y+sr),t.miterLimit=10,t.globalAlpha=h,a=t.globalCompositeOperation,t.globalCompositeOperation="destination-out",s=t.fillStyle,t.fillStyle="#000"}c&&u&&(t.shadowBlur=t.shadowOffsetX=t.shadowOffsetY=0),ur.fillText(t,e,n),a&&(t.globalCompositeOperation=a,ur.fillText(t,e,n,s),c&&(t.shadowBlur=c,t.shadowOffsetX=l,t.shadowOffsetY=f))},fillText:function(t,e,n,r){t.canvas._drawn=!0,r&&(t.fillStyle=r),t.fillText(e,n.x,n.y+sr)},_stroke:function(t,e,n,r){if(ir&&(e=1),t.canvas._drawn=!0,0!==e){var i,o=t.strokeStyle&&t.strokeStyle["linePatternOffset"],a=o?o[0]:0,s=o?o[1]:0,u=ur._isPattern(t.strokeStyle)&&(!x(n)&&!x(r)||!x(a)&&!x(s));x(e)&&(e=1),e<1&&(i=t.globalAlpha,t.globalAlpha*=e),u&&(n=n||0,r=r||0,t.translate(n+a,r+s)),t.stroke(),u&&t.translate(-n-a,-r-s),e<1&&(t.globalAlpha=i)}},_path:function(t,e,n,r,i){if(jt(e))for(var o,a,s,u=jt(n),c=!0!==i&&ur._isPattern(t.strokeStyle),l=0,f=e.length;l<f;l++)if(o=e[l],!u||t.setLineDash)t.lineTo(o.x,o.y),c&&l>0&&(a=e[l-1],h(a,o),t.beginPath(),t.moveTo(o.x,o.y));else if(u){if(l===f-1)break;s=e[l+1],cr(t,o,s,n,c)}function h(e,n){var i=Ut(e.x,e.y,n.x,n.y);t.save();var o=Math.cos(i);Math.abs(o)<1e-7?t.translate(e.x-t.lineWidth/2,e.y):t.translate(e.x,e.y-t.lineWidth/2/o),t.rotate(i),ur._stroke(t,r),t.restore()}},path:function(t,e,n,r,i){jt(e)&&(t.beginPath(),t.moveTo(e[0].x,e[0].y),ur._path(t,e,i,n),ur._stroke(t,n))},_multiClip:function(t,e){if(e&&0!==e.length){e=e[0];for(var n=0,r=e.length;n<r;n++){var i=e[n],o=i.x,a=i.y;0===n?t.moveTo(o,a):t.lineTo(o,a),n===r-1&&(o=e[0].x,a=e[0].y,t.lineTo(o,a))}}},polygon:function(t,e,n,r,i,o){if(t.isMultiClip)ur._multiClip(t,e);else if(jt(e)){var a=ur._isPattern(t.strokeStyle),s=jt(i)&&!t.setLineDash||a&&!o;jt(e[0])||(e=[e]);var u,c,l,f=t;if(e.length>1&&!R&&(or||(or=ur.createCanvas(1,1)),t.canvas._drawn=!1,or.width=t.canvas.width,or.height=t.canvas.height,t=or.getContext("2d"),pr(t,f)),s){for(t.save(),c=0,l=e.length;c<l;c++)jt(e[c])&&(ur._ring(t,e[c],null,0,!0),u=r,c>0&&(t.globalCompositeOperation="destination-out",u=1),ur.fillCanvas(t,u,e[c][0].x,e[c][0].y),c>0?t.globalCompositeOperation="source-over":l>1&&(t.fillStyle="#fff"),ur._stroke(t,0));t.restore()}var h=t.fillStyle;for(c=0,l=e.length;c<l;c++)jt(e[c])&&(o?(ur.paintSmoothLine(t,e[c],n,o,!0),t.closePath()):ur._ring(t,e[c],i,n),s||(u=r,c>0&&(t.globalCompositeOperation="destination-out",u=1),ur.fillCanvas(t,u,e[c][0].x,e[c][0].y),c>0?t.globalCompositeOperation="source-over":l>1&&(t.fillStyle="#fff")),ur._stroke(t,n));t.fillStyle!==h&&(t.fillStyle=h),e.length>1&&!R&&(f.drawImage(or,0,0),f.canvas._drawn=t.canvas._drawn,pr(f,t))}},_ring:function(t,e,n,r,i){var o=ur._isPattern(t.strokeStyle);i||!o||e[0].equals(e[e.length-1])||(e=e.concat([e[0]])),t.beginPath(),t.moveTo(e[0].x,e[0].y),ur._path(t,e,n,r,i),o||t.closePath()},paintSmoothLine:function(t,e,n,r,i,o,a){if(e)if(e.length<=2||!r)ur.path(t,e,n);else{var s,u=e.length,c=i?u:u-1;t.beginPath(),t.moveTo(e[0].x,e[0].y),void 0!==a&&(c-=Math.max(c-o-1,0));for(var l=0;l<c;l++){var f=e[l].x,h=e[l].y,p=void 0,d=void 0,v=void 0,g=void 0,m=void 0,y=void 0;l-1<0?i?(p=e[c-1].x,d=e[c-1].y):(p=e[l+1].x,d=e[l+1].y):(p=e[l-1].x,d=e[l-1].y),l+1<u?(v=e[l+1].x,g=e[l+1].y):(v=e[l+1-u].x,g=e[l+1-u].y),l+2<u?(m=e[l+2].x,y=e[l+2].y):i?(m=e[l+2-u].x,y=e[l+2-u].y):(m=e[l].x,y=e[l].y);var _=w(p,d,f,h,v,g,m,y,r,l===c-1?a:1);if(l===c-1&&a>=0&&a<1){t.bezierCurveTo(_[0],_[1],_[2],_[3],_[4],_[5]),e.splice(c-1,u-(c-1)-1);var b=new yt(_[4],_[5]);b.prevCtrlPoint=new yt(_[2],_[3]),e.push(b),u=e.length}else t.bezierCurveTo(_[0],_[1],_[2],_[3],v,g);e[l].nextCtrlPoint=_.slice(0,2),e[l].prevCtrlPoint=s?s.slice(2):null,s=_}!i&&e[1].prevCtrlPoint&&(e[0].nextCtrlPoint=e[1].prevCtrlPoint,delete e[0].prevCtrlPoint),e[u-1].prevCtrlPoint||(e[u-1].prevCtrlPoint=e[u-2].nextCtrlPoint),ur._stroke(t,n)}function x(t,e,n,r,i,o,a,s,u,c){var l=1-t,f=1-e,h=n*l*l+2*i*t*l+a*t*t,p=n*f*f+2*i*e*f+a*e*e,d=i*l*l+2*a*t*l+u*t*t,v=i*f*f+2*a*e*f+u*e*e,g=r*l*l+2*o*t*l+s*t*t,m=r*f*f+2*o*e*f+s*e*e,y=o*l*l+2*s*t*l+c*t*t,_=o*f*f+2*s*e*f+c*e*e,b=h*f+d*e,x=p*l+v*t,w=p*f+v*e,E=g*f+y*e,S=m*l+_*t,O=m*f+_*e;return[b,E,x,S,w,O]}function w(t,e,n,r,i,o,a,s,u,c){var l=(t+n)/2,f=(e+r)/2,h=(n+i)/2,p=(r+o)/2,d=(i+a)/2,v=(o+s)/2,g=Math.sqrt((n-t)*(n-t)+(r-e)*(r-e)),m=Math.sqrt((i-n)*(i-n)+(o-r)*(o-r)),y=Math.sqrt((a-i)*(a-i)+(s-o)*(s-o)),_=g/(g+m),b=m/(m+y),w=l+(h-l)*_,E=f+(p-f)*_,S=h+(d-h)*b,O=p+(v-p)*b,C=w+(h-w)*u+n-w,T=E+(p-E)*u+r-E,A=S+(h-S)*u+i-S,k=O+(p-O)*u+o-O,M=[C,T,A,k];return c<1?x(0,c,n,r,C,T,A,k,i,o):M}},_arcBetween:function(t,e,n,r){var i=r,o=e.distanceTo(n),a=o/2/Math.sin(i/2),s=Math.asin((n.y-e.y)/o);e.x>n.x&&(s=Math.PI-s);var u=90*ar-i/2,c=s-u,l=Math.cos(c)*a,f=Math.sin(c)*a,h=e.x+l,p=e.y+f,d=Math.asin((n.y-p)/a);h>n.x&&(d=Math.PI-d);var v=d+i;return t.beginPath(),t.arc(h,p,a,d,v),[h,p]},_lineTo:function(t,e){t.lineTo(e.x,e.y)},bezierCurveAndFill:function(t,e,n,r){t.beginPath();var i=e[0];t.moveTo(i.x,i.y);var o=[t];o.push.apply(o,e.splice(1)),ur._bezierCurveTo.apply(ur,o),ur.fillCanvas(t,r),ur._stroke(t,n)},_bezierCurveTo:function(t,e,n,r){t.bezierCurveTo(e.x,e.y,n.x,n.y,r.x,r.y)},ellipse:function(t,e,n,r,i,o,a){function s(e,n,r,i,o){var a=.5522848,s=r*a,u=i*a,c=o*a;t.moveTo(e-r,n),t.bezierCurveTo(e-r,n-u,e-s,n-i,e,n-i),t.bezierCurveTo(e+s,n-i,e+r,n-u,e+r,n),t.bezierCurveTo(e+r,n+c,e+s,n+o,e,n+o),t.bezierCurveTo(e-s,n+o,e-r,n+c,e-r,n),t.closePath()}t.beginPath(),n===r&&n===i?t.arc(e.x,e.y,n,0,2*Math.PI):t.ellipse?r!==i?(t.ellipse(e.x,e.y,n,r,0,180*ar,360*ar,!1),t.ellipse(e.x,e.y,n,i,0,0,180*ar,!1)):t.ellipse(e.x,e.y,n,r,0,0,360*ar,!1):s(e.x,e.y,n,r,i),ur.fillCanvas(t,a,e.x-n,e.y-r),ur._stroke(t,o,e.x-n,e.y-r)},rectangle:function(t,e,n,r,i){var o=e.x,a=e.y;t.beginPath(),t.rect(o,a,n["width"],n["height"]),ur.fillCanvas(t,i,o,a),ur._stroke(t,r,o,a)},sector:function(t,e,n,r,i,o){var a=ar,s=r[0],u=r[1];function c(t,e,n,r,s,u){var c=a*-u,l=a*-s;t.beginPath(),t.moveTo(e,n),t.arc(e,n,r,c,l),t.lineTo(e,n),ur.fillCanvas(t,o,e-r,n-r),ur._stroke(t,i,e-r,n-r)}c(t,e.x,e.y,n,s,u)},_isPattern:function(t){return!O(t)&&!("addColorStop"in t)},drawCross:function(t,e,n,r,i){t.canvas._drawn=!0,t.strokeStyle=i,t.lineWidth=r,t.beginPath(),t.moveTo(e-5,n),t.lineTo(e+5,n),t.moveTo(e,n-5),t.lineTo(e,n+5),t.stroke()},copy:function(t,e){var n=e||On("canvas");return n.width=t.width,n.height=t.height,n.getContext("2d").drawImage(t,0,0),n},pixelRect:function(t,e,n,r){var i=t.lineWidth,o=t.globalAlpha,a=!1;if(i>0&&n>0)a=!0,n<1&&(t.globalAlpha*=n);else{if(!(r>0))return;r<1&&(t.globalAlpha*=r)}t.canvas._drawn=!0,a?t.strokeRect(e[0],e[1],1,1):t.fillRect(e[0],e[1],1,1),t.globalAlpha!==o&&(t.globalAlpha=o)}};function cr(t,e,n,r){var i=e.x,o=e.y,a=n.x,s=n.y,u=r,c=function(t,e){return t<=e},l=function(t,e){return t>=e},f=function(t,e){return Math.min(t,e)},h=function(t,e){return Math.max(t,e)},p={thereYet:l,cap:f},d={thereYet:l,cap:f};o-s>0&&(d.thereYet=c,d.cap=h),i-a>0&&(p.thereYet=c,p.cap=h),t.moveTo(i,o);var v,g,m=i,y=o,_=0,b=!0;while(!p.thereYet(m,a)||!d.thereYet(y,s))v=Math.atan2(s-o,a-i),g=u[_],m=p.cap(a,m+Math.cos(v)*g),y=d.cap(s,y+Math.sin(v)*g),b?t.lineTo(m,y):t.moveTo(m,y),_=(_+1)%u.length,b=!b}var lr,fr="data:image/";function hr(t){return t.substring(0,fr.length)===fr?t:Dt(t)}function pr(t,e){t.filter=e.filter,t.fillStyle=e.fillStyle,t.globalAlpha=e.globalAlpha,t.lineCap=e.lineCap,t.lineDashOffset=e.lineDashOffset,t.lineJoin=e.lineJoin,t.lineWidth=e.lineWidth,t.shadowBlur=e.shadowBlur,t.shadowColor=e.shadowColor,t.shadowOffsetX=e.shadowOffsetX,t.shadowOffsetY=e.shadowOffsetY,t.strokeStyle=e.strokeStyle}lr="undefined"!==typeof Promise?Promise:i.a;var dr=lr,vr=function(t){return function(t){function e(){return t.apply(this,arguments)||this}pt(e,t);var n=e.prototype;return n.on=function(t,e,n){if(!t)return this;if(!O(t))return this._switch("on",t,e);if(!e)return this;this._eventMap||(this._eventMap={});var r,i,o=t.toLowerCase().split(" ");n||(n=this);for(var a=0,s=o.length;a<s;a++){r=o[a],i=this._eventMap[r],i||(i=[],this._eventMap[r]=i);var u=i.length;if(u>0)for(var c=0;c<u;c++)if(e===i[c].handler&&i[c].context===n)return console.warn(this,"find '"+t+"' handler:",e," The old listener function will be removed"),this;i.push({handler:e,context:n})}return this},n.addEventListener=function(){return this.on.apply(this,arguments)},n.once=function(t,e,n){if(!O(t)){var r={};for(var i in t)t.hasOwnProperty(i)&&(r[i]=this._wrapOnceHandler(i,t[i],n));return this._switch("on",r)}for(var o=t.split(" "),a=0,s=o.length;a<s;a++)this.on(o[a],this._wrapOnceHandler(o[a],e,n));return this},n.off=function(t,e,n){if(!this._eventMap||!t)return this;if(!O(t))return this._switch("off",t,e);if(!e)return this;var r,i,o,a=t.split(" ");n||(n=this);for(var s=0,u=a.length;s<u;s++){if(r=a[s].toLowerCase(),o="Z__"+r,i=this._eventMap[r],!i)return this;for(var c=i.length-1;c>=0;c--){var l=i[c];e!==l.handler&&e!==l.handler[o]||l.context!==n||(delete l.handler[o],i.splice(c,1))}i.length||delete this._eventMap[r]}return this},n.removeEventListener=function(){return this.off.apply(this,arguments)},n.listens=function(t,e,n){if(!this._eventMap||!O(t))return 0;var r=this._eventMap[t.toLowerCase()];if(!r||!r.length)return 0;if(!e)return r.length;for(var i=0,o=r.length;i<o;i++)if(e===r[i].handler&&(x(n)||r[i].context===n))return 1;return 0},n.getListeningEvents=function(){return this._eventMap?Object.keys(this._eventMap):[]},n.copyEventListeners=function(t){var e,n=t._eventMap;if(!n)return this;for(var r in n){e=n[r];for(var i=0,o=e.length;i<o;i++)this.on(r,e[i].handler,e[i].context)}return this},n.fire=function(){return this._eventParent?this._eventParent.fire.apply(this._eventParent,arguments):this._fire.apply(this,arguments)},n._wrapOnceHandler=function(t,e,n){var r=this,i="Z__"+t,o=!1,a=function s(){o||(delete a[i],o=!0,n?e.apply(n,arguments):e.apply(this,arguments),r.off(t,s,this))};return a[i]=e,a},n._switch=function(t,e,n){for(var r in e)e.hasOwnProperty(r)&&this[t](r,e[r],n);return this},n._clearListeners=function(t){if(this._eventMap&&O(t)){var e=this._eventMap[t.toLowerCase()];e&&(this._eventMap[t]=null)}},n._clearAllListeners=function(){this._eventMap=null},n._setEventParent=function(t){return this._eventParent=t,this},n._setEventTarget=function(t){return this._eventTarget=t,this},n._fire=function(t,e){if(!this._eventMap)return this;var n=this._eventMap[t.toLowerCase()];if(!n)return this;e||(e={}),e["type"]=t,e["target"]=this._eventTarget||this;for(var r,i,o,a=n.slice(0),s=0,u=a.length;s<u;s++)a[s]&&(r=a[s].context,i=!0,o=b({},e),i=r?a[s].handler.call(r,o):a[s].handler(o),!1===i&&e["domEvent"]&&Rn(e["domEvent"]));return this},e}(t)},gr=function(){function t(t){this.target=t}var e=t.prototype;return e.enable=function(){return this._enabled||(this._enabled=!0,this.addHooks()),this},e.disable=function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},e.enabled=function(){return!!this._enabled},e.remove=function(){this.disable(),delete this.target,delete this.dom},t}(),mr=vr(gr),yr=function(){function t(t){if(!this||!this.setOptions)throw new Error('Class instance is being created without "new" operator.');this.setOptions(t),this.callInitHooks()}var e=t.prototype;return e.callInitHooks=function(){var t=Object.getPrototypeOf(this);return this._visitInitHooks(t),this},e.setOptions=function(t){if(this.hasOwnProperty("options")||(this.options=this.options?Object.create(this.options):{}),!t)return this;for(var e in t)this.options[e]=t[e];return this},e.config=function(t){if(!t){var e={};for(var n in this.options)this.options.hasOwnProperty(n)&&(e[n]=this.options[n]);return e}if(2===arguments.length){var r={};r[t]=arguments[1],t=r}for(var i in t)this.options[i]=t[i],this[i]&&this[i]instanceof mr&&(t[i]?this[i].enable():this[i].disable());return this.onConfig(t),this},e.onConfig=function(){},e._visitInitHooks=function(t){if(!this._initHooksCalled){var e=Object.getPrototypeOf(t);e._visitInitHooks&&e._visitInitHooks.call(this,e),this._initHooksCalled=!0;var n=t._initHooks;if(n&&n!==e._initHooks)for(var r=0;r<n.length;r++)n[r].call(this)}},t.addInitHook=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];var i="function"===typeof t?t:function(){this[t].apply(this,n)},o=this.prototype,a=Object.getPrototypeOf(o);return o._initHooks&&o._initHooks!==a._initHooks||(o._initHooks=[]),o._initHooks.push(i),this},t.include=function(){for(var t=0;t<arguments.length;t++)b(this.prototype,t<0||arguments.length<=t?void 0:arguments[t]);return this},t.mergeOptions=function(t){var e=this.prototype,n=Object.getPrototypeOf(e);return e.options&&e.options!==n.options||(e.options=e.options?Object.create(e.options):{}),b(e.options,t),this},t}(),_r={},br=function(t){return function(t){function e(){return t.apply(this,arguments)||this}pt(e,t),e.registerJSONType=function(t){return t?(_r[t]=this,this):this},e.getJSONClass=function(t){return t?_r[t]:null};var n=e.prototype;return n.getJSONType=function(){if(void 0===this._jsonType){var t=Object.getPrototypeOf(this).constructor;for(var e in _r)if(_r[e]===t){this._jsonType=e;break}}if(!this._jsonType)throw new Error("Found an unregistered geometry class!");return this._jsonType},e}(t)},xr={},wr=function(){function t(){this._tree=a()(9,["[0]","[1]","[2]","[3]"])}var e=t.prototype;return e.collides=function(t){return xr.minX=t[0],xr.minY=t[1],xr.maxX=t[2],xr.maxY=t[3],this._tree.collides(xr)},e.insertBox=function(t){var e=this._tree;return e.insert(t),this},e.bulkInsertBox=function(t){return this._tree.load(t),this},e.clear=function(){return this._tree.clear(),this},t}();function Er(t){return function(t){function e(){return t.apply(this,arguments)||this}pt(e,t);var n=e.prototype;return n.addHandler=function(t,e){if(!e)return this;if(this._handlers||(this._handlers=[]),this[t])return this[t].enable(),this;var n=this[t]=new e(this);return this._handlers.push(n),this.options[t]&&n.enable(),this},n.removeHandler=function(t){if(!t)return this;var e=this[t];if(e){var n=this._handlers.indexOf(e);n>=0&&this._handlers.splice(n,1),this[t].remove(),delete this[t]}return this},n._clearHandlers=function(){for(var t=0,e=this._handlers.length;t<e;t++)this._handlers[t].remove();this._handlers=[]},e}(t)}var Sr="touchstart mousedown",Or={mousedown:"mousemove",touchstart:"touchmove",pointerdown:"touchmove",MSPointerDown:"touchmove"},Cr={mousedown:"mouseup",touchstart:"touchend",pointerdown:"touchend",MSPointerDown:"touchend"},Tr=function(t){function e(e,n){var r;return void 0===n&&(n={}),r=t.call(this,null)||this,r.dom=e,r.options=n,r}pt(e,t);var n=e.prototype;return n.enable=function(){return this.dom?(this._onMouseDown=function(t){return this.onMouseDown(t)},Xn(this.dom,Sr,this._onMouseDown,this),this):this},n.disable=function(){return this.dom?(this._offEvents(),qn(this.dom,Sr,this._onMouseDown),delete this._onMouseDown,this):this},n.onMouseDown=function(t){if((this.options["rightclick"]||2!==t.button)&&!(t.touches&&t.touches.length>1)&&(!this.options["cancelOn"]||!0!==this.options["cancelOn"](t))){var e=this.dom;e.setCapture?e.setCapture():window.captureEvents&&window.captureEvents(window["Event"].MOUSEMOVE|window["Event"].MOUSEUP),e["ondragstart"]=function(){return!1},delete this.moved;var n=t.touches?t.touches[0]:t;this.startPos=new yt(n.clientX,n.clientY),qn(document,Or[t.type],this.onMouseMove,this),qn(document,Cr[t.type],this.onMouseUp,this),Xn(document,Or[t.type],this.onMouseMove,this),Xn(document,Cr[t.type],this.onMouseUp,this),this.options["ignoreMouseleave"]||(qn(this.dom,"mouseleave",this.onMouseUp,this),Xn(this.dom,"mouseleave",this.onMouseUp,this)),this.fire("mousedown",{domEvent:t,mousePos:new yt(n.clientX,n.clientY)})}},n.onMouseMove=function(t){if(t.touches&&t.touches.length>1)this.moved&&(this.interupted=!0,this.onMouseUp(t));else{var e=t.touches?t.touches[0]:t,n=new yt(e.clientX,e.clientY),r=n.sub(this.startPos);(r.x||r.y)&&(this.moved?this.fire("dragging",{domEvent:t,mousePos:new yt(e.clientX,e.clientY)}):(this.fire("dragstart",{domEvent:t,mousePos:this.startPos.copy()}),this.moved=!0))}},n.onMouseUp=function(t){var e=t.changedTouches?t.changedTouches[0]:t;this._offEvents();var n={domEvent:t};w(e.clientX)&&(n["mousePos"]=new yt(parseInt(e.clientX,0),parseInt(e.clientY,0))),this.moved&&(n.interupted=this.interupted,this.fire("dragend",n),delete this.interupted,delete this.moved),this.fire("mouseup",n)},n._offEvents=function(){var t=this.dom;if(qn(t,"mouseleave",this.onMouseUp,this),"undefined"!==typeof document&&"undefined"!==typeof window){for(var e in Or)qn(document,Or[e],this.onMouseMove,this),qn(document,Cr[e],this.onMouseUp,this);t["releaseCapture"]?t["releaseCapture"]():window.captureEvents&&window.captureEvents(window["Event"].MOUSEMOVE|window["Event"].MOUSEUP)}},e}(mr),Ar=function(t){function e(){return t.apply(this,arguments)||this}return pt(e,t),e.toNumberArrays=function(t){return Array.isArray(t)?Ct(t,(function(t){return[t.x,t.y]})):[t.x,t.y]},e.toCoordinates=function(t){if(w(t[0])&&w(t[1]))return new e(t);if(t instanceof e)return t;for(var n=[],r=0,i=t.length;r<i;r++){var o=t[r];Array.isArray(o)?w(o[0])?n.push(new e(o)):n.push(e.toCoordinates(o)):o instanceof e?n.push(o):n.push(new e(o))}return n},e}(mt),kr=function(){function t(t,e){this.type=t,this.properties=e}return t.createProj4=function(e){return new t("proj4",{proj:e})},t.fromProjectionCode=function(e){return e?(e=e.toUpperCase().replace(":",""),t[e]||null):null},t}();kr.WGS84=kr.createProj4("+proj=longlat +datum=WGS84 +no_defs"),kr.EPSG4326=kr.WGS84,kr.EPSG3857=kr.createProj4("+proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +wktext  +no_defs"),kr.IDENTITY=kr.createProj4("+proj=identity +no_defs"),kr.CGCS2000=kr.createProj4("+proj=longlat +datum=CGCS2000"),kr.EPSG4490=kr.CGCS2000,kr.BD09LL=kr.createProj4("+proj=longlat +datum=BD09"),kr.GCJ02=kr.createProj4("+proj=longlat +datum=GCJ02");var Mr,Pr=new yt(0,0),Rr=new Ar(0,0),jr=new Ar(0,0),Ir=new Ar(0,0),Lr=new Ar(0,0),Nr=new Ar(0,0),Dr=new Ar(0,0),Fr=new Ar(0,0),Br=new Ar(0,0),zr=[],Ur=[],Vr=function(){function t(t,e,n,r){this._clazz=Ar;var i=arguments.length,o=i>0?arguments[i-1]:null;o&&o.unproject&&(this.projection=arguments[i-1]),this._dirty=!0,this._initialize(t,e,n,r)}var e=t.prototype;return e._initialize=function(t,e,n,r){if(this.xmin=null,this.xmax=null,this.ymin=null,this.ymax=null,!x(t)){var i=this.projection;w(t)&&w(e)&&w(n)&&w(r)?i?this.set(t,e,n,r):this.set(Math.min(t,n),Math.min(e,r),Math.max(t,n),Math.max(e,r)):Array.isArray(t)?i?this.set(t[0],t[1],t[2],t[3]):this.set(Math.min(t[0],t[2]),Math.min(t[1],t[3]),Math.max(t[0],t[2]),Math.max(t[1],t[3])):w(t.x)&&w(e.x)&&w(t.y)&&w(e.y)?i?this.set(t.x,t.y,e.x,e.y):(t.x>e.x?(this["xmin"]=e.x,this["xmax"]=t.x):(this["xmin"]=t.x,this["xmax"]=e.x),t.y>e.y?(this["ymin"]=e.y,this["ymax"]=t.y):(this["ymin"]=t.y,this["ymax"]=e.y)):w(t["xmin"])&&w(t["xmax"])&&w(t["ymin"])&&w(t["ymax"])&&this.set(t["xmin"],t["ymin"],t["xmax"],t["ymax"])}},e._add=function(t){return this._dirty=!0,x(t.x)?x(t.xmin)?x(t[0])||(this["xmin"]+=t[0],this["ymin"]+=t[1],this["xmax"]+=t[0],this["ymax"]+=t[1]):(this["xmin"]+=t.xmin,this["ymin"]+=t.ymin,this["xmax"]+=t.xmax,this["ymax"]+=t.ymax):(this["xmin"]+=t.x,this["ymin"]+=t.y,this["xmax"]+=t.x,this["ymax"]+=t.y),this},e.add=function(){var t=new this.constructor(this["xmin"],this["ymin"],this["xmax"],this["ymax"],this.projection);return t._add.apply(t,arguments)},e._scale=function(t){return this._dirty=!0,this["xmin"]*=t,this["ymin"]*=t,this["xmax"]*=t,this["ymax"]*=t,this},e._sub=function(t){return this._dirty=!0,x(t.x)?x(t.xmin)?x(t[0])||(this["xmin"]-=t[0],this["ymin"]-=t[1],this["xmax"]-=t[0],this["ymax"]-=t[1]):(this["xmin"]-=t.xmin,this["ymin"]-=t.ymin,this["xmax"]-=t.xmax,this["ymax"]-=t.ymax):(this["xmin"]-=t.x,this["ymin"]-=t.y,this["xmax"]-=t.x,this["ymax"]-=t.y),this},e._substract=function(){return this._sub.apply(this,arguments)},e.sub=function(){var t=new this.constructor(this["xmin"],this["ymin"],this["xmax"],this["ymax"],this.projection);return t._sub.apply(t,arguments)},e.substract=function(){return this.sub.apply(this,arguments)},e.round=function(){return new this.constructor(Math.round(this["xmin"]),Math.round(this["ymin"]),Math.round(this["xmax"]),Math.round(this["ymax"]),this.projection)},e._round=function(){return this._dirty=!0,this["xmin"]=Math.round(this["xmin"]),this["ymin"]=Math.round(this["ymin"]),this["xmax"]=Math.round(this["xmax"]),this["ymax"]=Math.round(this["ymax"]),this},e.getMin=function(t){return t?(t.set(this["xmin"],this["ymin"]),t):new this._clazz(this["xmin"],this["ymin"])},e.getMax=function(t){return t?(t.set(this["xmax"],this["ymax"]),t):new this._clazz(this["xmax"],this["ymax"])},e.getCenter=function(t){var e=(this["xmin"]+this["xmax"])/2,n=(this["ymin"]+this["ymax"])/2;return t?(t.set(e,n),t):new this._clazz(e,n)},e.isValid=function(){return!x(this["xmin"])&&!x(this["ymin"])&&!x(this["xmax"])&&!x(this["ymax"])},e.equals=function(t){return this["xmin"]===t["xmin"]&&this["xmax"]===t["xmax"]&&this["ymin"]===t["ymin"]&&this["ymax"]===t["ymax"]},e.intersects=function(t){this._project(this),this._project(t);var e=Math.max(this["pxmin"],t["pxmin"]),n=Math.max(this["pymin"],t["pymin"]),r=Math.min(this["pxmax"],t["pxmax"]),i=Math.min(this["pymax"],t["pymax"]),o=!(e>r||n>i);return o},e.within=function(t){return this._project(this),this._project(t),this.pxmin>=t.pxmin&&this.pxmax<=t.pxmax&&this.pymin>=t.pymin&&this.pymax<=t.pymax},e.contains=function(t){if(!t)return!1;this._project(this);var e=this.projection;if(e)if(void 0!==t.x){var n=Rr;Array.isArray(t)?(n.x=t[0],n.y=t[1]):(n.x=t.x,n.y=t.y),t=e.project(n,n)}else void 0!==t.xmin&&this._project(t);return(t.x||t.pxmin||0)>=this.pxmin&&(t.x||t.pxmax||0)<=this.pxmax&&(t.y||t.pymin||0)>=this.pymin&&(t.y||t.pymax||0)<=this.pymax},e.getWidth=function(){return Math.abs(this["xmax"]-this["xmin"])},e.getHeight=function(){return Math.abs(this["ymax"]-this["ymin"])},e.getSize=function(){return new We(this.getWidth(),this.getHeight())},e.set=function(t,e,n,r){return this.xmin=t,this.ymin=e,this.xmax=n,this.ymax=r,this._dirty=!0,this},e.__combine=function(t){void 0!==t.x&&(Mr.xmin=Mr.xmax=t.x,Mr.ymin=Mr.ymax=t.y,t=Mr),this._project(t),this._project(this);var e,n,r,i,o=w(this.pxmin);o?(e=Math.min(this["pxmin"],t["pxmin"]),n=Math.min(this["pymin"],t["pymin"]),r=Math.max(this["pxmax"],t["pxmax"]),i=Math.max(this["pymax"],t["pymax"])):(e=t["pxmin"],n=t["pymin"],r=t["pxmax"],i=t["pymax"]);var a=this.projection;if(a){jr.set(e,n),Ir.set(r,i);var s=a.unproject(jr,jr),u=a.unproject(Ir,Ir);e=s.x,n=s.y,r=u.x,i=u.y}return Ur[0]=e,Ur[1]=n,Ur[2]=r,Ur[3]=i,Ur},e._combine=function(t){if(!t||t.isValid&&!t.isValid())return this;var e=this.__combine(t);return this.set(e[0],e[1],e[2],e[3]),this._dirty=!0,this},e.combine=function(t){if(!t||t.isValid&&!t.isValid())return this;var e=this.__combine(t);return new this.constructor(e[0],e[1],e[2],e[3],this.projection)},e.intersection=function(t){if(!this.intersects(t))return null;Lr.x=Math.max(this["pxmin"],t["pxmin"]),Lr.y=Math.max(this["pymin"],t["pymin"]),Nr.x=Math.min(this["pxmax"],t["pxmax"]),Nr.y=Math.min(this["pymax"],t["pymax"]);var e=Lr,n=Nr,r=this.projection;return r&&(e=r.unproject(e,e),n=r.unproject(n,n)),new this.constructor(e,n,r)},e.expand=function(t){var e,n;return w(t)?e=n=t:(e=t["width"]||t["x"]||t[0]||0,n=t["height"]||t["y"]||t[1]||0),new this.constructor(this["xmin"]-e,this["ymin"]-n,this["xmax"]+e,this["ymax"]+n,this.projection)},e._expand=function(t){var e,n;return w(t)?e=n=t:(e=t["width"]||t["x"]||t[0]||0,n=t["height"]||t["y"]||t[1]||0),this["xmin"]-=e,this["ymin"]-=n,this["xmax"]+=e,this["ymax"]+=n,this._dirty=!0,this},e.toJSON=function(){return{xmin:this["xmin"],ymin:this["ymin"],xmax:this["xmax"],ymax:this["ymax"]}},e.toArray=function(t){var e=this["xmin"],n=this["ymin"],r=this["xmax"],i=this["ymax"];return t?(t[0].x=e,t[0].y=i,t[1].x=r,t[1].y=i,t[2].x=r,t[2].y=n,t[3].x=e,t[3].y=n,t[4].x=e,t[4].y=i,t):[new this._clazz([e,i]),new this._clazz([r,i]),new this._clazz([r,n]),new this._clazz([e,n]),new this._clazz([e,i])]},e.toString=function(){return this.xmin+","+this.ymin+","+this.xmax+","+this.ymax},e.copy=function(){return new this.constructor(this["xmin"],this["ymin"],this["xmax"],this["ymax"],this.projection)},e.convertTo=function(t,e){if(!this.isValid())return null;var n,r=e||new this.constructor;return e&&r.set(null,null,null,null),this._clazz===Ar?n=Dr:this._clazz===yt&&(n=Pr),n.x=this.xmin,n.y=this.ymax,r._combine(t(n)),n.x=this.xmax,r._combine(t(n)),n.y=this.ymin,r._combine(t(n)),n.x=this.xmin,r._combine(t(n)),r},e._project=function(t){if(t&&t.isValid()){var e=this.projection;if(e){if(t._dirty){Fr.set(t.xmax,t.ymin),Br.set(t.xmin,t.ymax),zr[0]=Fr,zr[1]=Br;var n=e.projectCoords(zr),r=n[0],i=n[1];t.pxmin=Math.min(r.x,i.x),t.pymin=Math.min(r.y,i.y),t.pxmax=Math.max(r.x,i.x),t.pymax=Math.max(r.y,i.y)}delete t._dirty}else t.pxmin=t.xmin,t.pxmax=t.xmax,t.pymin=t.ymin,t.pymax=t.ymax}else t&&(t.pxmin=t.pxmax=t.pymin=t.pymax=null)},t}();Mr=new Vr(0,0,0,0);var Hr=function(t){function e(e,n,r,i){var o;return o=t.call(this,e,n,r,i)||this,o._clazz=yt,o}return pt(e,t),e}(Vr),Gr=function(){function t(t){this.matrix=t}var e=t.prototype;return e.transform=function(t,e,n){var r=this.matrix[0]*(t.x-this.matrix[2])/e,i=-this.matrix[1]*(t.y-this.matrix[3])/e;return n?(n.x=r,n.y=i,n):new yt(r,i)},e.untransform=function(t,e,n){var r=t.x*e/this.matrix[0]+this.matrix[2],i=t.y*e/-this.matrix[1]+this.matrix[3];return n?(n.x=r,n.y=i,n):new Ar(r,i)},t}(),Wr={project:function(){},unproject:function(){},projectCoords:function(t,e){var n=this;if(!t)return[];if(!Array.isArray(t))return this.project(t);if(0===t.length)return[];if(!this.isSphere())return Ct(t,this.project,this);if(Array.isArray(t[0]))return t.map((function(t){return n.projectCoords(t,e)}));for(var r,i,o,a,s,u,c=!1!==e,l=this.getCircum(),f=this.getSphereExtent(),h=f.sx,p=f.sy,d=t[0],v=[this.project(d)],g=1,m=t.length;g<m;g++)o=t[g],a=o.x-d.x,s=o.y-d.y,u=this.project(o),Math.abs(a)>180&&c&&(void 0===r&&(r=o.x>d.x),r&&(u._add(-l.x*At(a)*h,0),o._add(-360*At(a),0))),Math.abs(s)>90&&c&&(void 0===i&&(i=o.y<d.y),i&&(u._add(0,-l.y*At(s)*p),o._add(0,-180*At(s)))),d=o,v.push(u);return v},unprojectCoords:function(t){return t?Array.isArray(t)?Ct(t,this.unproject,this):this.unproject(t):[]},isSphere:function(){return!!this.sphere},isOutSphere:function(t){if(!this.isSphere())return!1;var e=this.getSphereExtent();return!e.contains(t)},wrapCoord:function(t){if(!this.isSphere())return t;var e=this.getSphereExtent(),n=new Ar(t);return e.contains(n)||(n.x=Pt(t.x,e.xmin,e.xmax),n.y=Pt(t.y,e.ymin,e.ymax)),n},getCircum:function(){if(!this.circum&&this.isSphere()){var t=this.getSphereExtent();this.circum={x:t.getWidth(),y:t.getHeight()}}return this.circum},getSphereExtent:function(){if(!this.extent&&this.isSphere()){var t=this.project(new Ar(180,90)),e=this.project(new Ar(-180,-90));this.extent=new Vr(e,t,this),this.extent.sx=t.x>e.x?1:-1,this.extent.sy=t.y>e.y?1:-1}return this.extent}},Zr={measureLength:function(t,e){if(!Array.isArray(t))return this.measureLenBetween(t,e);for(var n=0,r=0,i=t.length;r<i-1;r++)n+=this.measureLenBetween(t[r],t[r+1]);return n}},Yr=b({measure:"IDENTITY",measureLenBetween:function(t,e){if(!t||!e)return 0;try{return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}catch(uf){return 0}},measureArea:function(t){if(!Array.isArray(t))return 0;for(var e=0,n=0,r=t.length;n<r;n++){var i=t[n],o=null;o=n===r-1?t[0]:t[n+1],e+=i.x*o.y-i.y*o.x}return Math.abs(e/2)},locate:function(t,e,n,r){return r=r||new Ar(0,0),r.set(t.x,t.y),this._locate(r,e,n)},_locate:function(t,e,n){return t?(e||(e=0),n||(n=0),e||n?(t.x=t.x+e,t.y=t.y+n,t):t):null},rotate:function(t,e,n){return t=new Ar(t.x,t.y),this._rotate(t,e,n)},_rotate:function(){var t=new yt(0,0);return function(e,n,r){return t.x=e.x-n.x,t.y=e.y-n.y,t._rotate(r*Math.PI/180),e.x=n.x+t.x,e.y=n.y+t.y,e}}()},Zr),Xr=function(){function t(t){this.radius=t}var e=t.prototype;return e.measureLenBetween=function(t,e){if(!t||!e)return 0;var n=M(t.y),r=M(e.y),i=n-r,o=M(t.x)-M(e.x);return n=2*Math.asin(Math.sqrt(Math.pow(Math.sin(i/2),2)+Math.cos(n)*Math.cos(r)*Math.pow(Math.sin(o/2),2))),n*=this.radius,Math.round(1e5*n)/1e5},e.measureArea=function(t){var e,n=M(this.radius),r=0,i=t,o=i.length;if(o<3)return 0;for(e=0;e<o-1;e++){var a=i[e],s=i[e+1];r+=a.x*n*Math.cos(M(a.y))*s.y*n-s.x*n*Math.cos(M(s.y))*a.y*n}return o=i[e],i=i[0],r+=o.x*n*Math.cos(M(o.y))*i.y*n-i.x*n*Math.cos(M(i.y))*o.y*n,.5*Math.abs(r)},e.locate=function(t,e,n,r){return r=r||new Ar(0,0),r.set(t.x,t.y),this._locate(r,e,n)},e._locate=function(t,e,n){if(!t)return null;if(e||(e=0),n||(n=0),!e&&!n)return t;var r,i,o=M(t.y);if(0!==n){var a=Math.abs(n),s=2*Math.sin(a/(2*this.radius));o+=s*(n>0?1:-1),i=Pt(180*o/Math.PI,-90,90)}else i=t.y;if(0!==e){var u=Math.abs(e),c=M(t.x),l=2*Math.sqrt(Math.pow(Math.sin(u/(2*this.radius)),2)/Math.pow(Math.cos(o),2));c+=l*(e>0?1:-1),r=Pt(180*c/Math.PI,-180,180)}else r=t.x;return t.x=r,t.y=i,t},e.rotate=function(t,e,n){return t=new Ar(t),this._rotate(t,e,n)},e._rotate=function(t,e,n){var r=qr(e,t),i=r-n,o=this.measureLenBetween(e,t);return t.x=e.x,t.y=e.y,Qr(t,o,i,this.radius)},t}();function qr(t,e,n){var r;void 0===n&&(n={}),r=n["final"]?Kr(e,t):Kr(t,e);var i=r>180?-(360-r):r;return i}function Kr(t,e){var n=M(t.y),r=M(e.y),i=M(e.x-t.x);i>Math.PI&&(i-=2*Math.PI),i<-Math.PI&&(i+=2*Math.PI);var o=Math.log(Math.tan(r/2+Math.PI/4)/Math.tan(n/2+Math.PI/4)),a=Math.atan2(i,o);return(P(a)+360)%360}function Qr(t,e,n,r){var i=e/r,o=t.x*Math.PI/180,a=M(t.y),s=M(n),u=i*Math.cos(s),c=a+u;Math.abs(c)>Math.PI/2&&(c=c>0?Math.PI-c:-Math.PI-c);var l=Math.log(Math.tan(c/2+Math.PI/4)/Math.tan(a/2+Math.PI/4)),f=Math.abs(l)>1e-11?u/l:Math.cos(a),h=i*Math.sin(s)/f,p=o+h;return t.x=(180*p/Math.PI+540)%360-180,t.y=180*c/Math.PI,t}var $r=b({measure:"EPSG:4326",sphere:new Xr(6378137),measureLenBetween:function(){return this.sphere.measureLenBetween.apply(this.sphere,arguments)},measureArea:function(){return this.sphere.measureArea.apply(this.sphere,arguments)},_locate:function(){return this.sphere._locate.apply(this.sphere,arguments)},locate:function(){return this.sphere.locate.apply(this.sphere,arguments)},_rotate:function(){return this.sphere._rotate.apply(this.sphere,arguments)},rotate:function(){return this.sphere.rotate.apply(this.sphere,arguments)}},Zr),Jr=b({measure:"BAIDU",sphere:new Xr(6370996.81),measureLenBetween:function(){return this.sphere.measureLenBetween.apply(this.sphere,arguments)},measureArea:function(){return this.sphere.measureArea.apply(this.sphere,arguments)},_locate:function(){return this.sphere._locate.apply(this.sphere,arguments)},locate:function(){return this.sphere.locate.apply(this.sphere,arguments)},_rotate:function(){return this.sphere._rotate.apply(this.sphere,arguments)},rotate:function(){return this.sphere.rotate.apply(this.sphere,arguments)}},Zr),ti=$r,ei={};function ni(t){ei[t.measure]=t}ni(Yr),ni($r),ni(Jr);var ri={getInstance:function(t){if(!t)return ti;for(var e in ei)if(A(ei,e)){var n=ei[e]["measure"];if(!n)continue;if(t.toLowerCase()===n.toLowerCase())return ei[e]}return null}},ii=1e-7,oi=b({},Wr,{code:"EPSG:3857",rad:Math.PI/180,metersPerDegree:6378137*Math.PI/180,maxLatitude:85.0511287798,project:function(t,e){var n,r=this.rad,i=this.metersPerDegree,o=this.maxLatitude,a=t.x,s=Math.max(Math.min(o,t.y),-o);n=0===s?0:Math.log(Math.tan((90+s)*r/2))/r;var u=a*i,c=n*i;return e?(e.x=u,e.y=c,e):new Ar(u,c)},unproject:function(t,e){var n,r=this.rad,i=this.metersPerDegree,o=t.x/i,a=t.y;0===a?n=0:(n=a/i,n=(2*Math.atan(Math.exp(n*r))-Math.PI/2)/r),Math.abs(Math.abs(o)-180)<ii&&(o=180*At(o)),Math.abs(Math.abs(n)-this.maxLatitude)<ii&&(n=At(n)*this.maxLatitude);var s=Pt(o,-180,180),u=Pt(n,-this.maxLatitude,this.maxLatitude);return e?(e.x=s,e.y=u,e):new Ar(s,u)}},$r),ai=b({},Wr,{code:"EPSG:4326",project:function(t,e){return e?(e.x=t.x,e.y=t.y,e):new Ar(t)},unproject:function(t,e){return e?(e.x=t.x,e.y=t.y,e):new Ar(t)}},$r),si=b({},ai,{code:"EPSG:4490"}),ui=b({},Wr,{code:"BAIDU",project:function(t,e){return this.convertLL2MC(t,e)},unproject:function(t,e){return this.convertMC2LL(t,e)}},Jr,{EARTHRADIUS:6370996.81,MCBAND:[12890594.86,8362377.87,5591021,3481989.83,1678043.12,0],LLBAND:[75,60,45,30,15,0],MC2LL:[[1.410526172116255e-8,898305509648872e-20,-1.9939833816331,200.9824383106796,-187.2403703815547,91.6087516669843,-23.38765649603339,2.57121317296198,-.03801003308653,17337981.2],[-7.435856389565537e-9,8983055097726239e-21,-.78625201886289,96.32687599759846,-1.85204757529826,-59.36935905485877,47.40033549296737,-16.50741931063887,2.28786674699375,10260144.86],[-3.030883460898826e-8,898305509983578e-20,.30071316287616,59.74293618442277,7.357984074871,-25.38371002664745,13.45380521110908,-3.29883767235584,.32710905363475,6856817.37],[-1.981981304930552e-8,8983055099779535e-21,.03278182852591,40.31678527705744,.65659298677277,-4.44255534477492,.85341911805263,.12923347998204,-.04625736007561,4482777.06],[3.09191371068437e-9,8983055096812155e-21,6995724062e-14,23.10934304144901,-.00023663490511,-.6321817810242,-.00663494467273,.03430082397953,-.00466043876332,2555164.4],[2.890871144776878e-9,8983055095805407e-21,-3.068298e-8,7.47137025468032,-353937994e-14,-.02145144861037,-1234426596e-14,.00010322952773,-323890364e-14,826088.5]],LL2MC:[[-.0015702102444,111320.7020616939,0x60e374c3105a3,-0x24bb4115e2e164,0x5cc55543bb0ae8,-0x7ce070193f3784,0x5e7ca61ddf8150,-0x261a578d8b24d0,0x665d60f3742ca,82.5],[.0008277824516172526,111320.7020463578,647795574.6671607,-4082003173.641316,10774905663.51142,-15171875531.51559,12053065338.62167,-5124939663.577472,913311935.9512032,67.5],[.00337398766765,111320.7020202162,4481351.045890365,-23393751.19931662,79682215.47186455,-115964993.2797253,97236711.15602145,-43661946.33752821,8477230.501135234,52.5],[.00220636496208,111320.7020209128,51751.86112841131,3796837.749470245,992013.7397791013,-1221952.21711287,1340652.697009075,-620943.6990984312,144416.9293806241,37.5],[-.0003441963504368392,111320.7020576856,278.2353980772752,2485758.690035394,6070.750963243378,54821.18345352118,9540.606633304236,-2710.55326746645,1405.483844121726,22.5],[-.0003218135878613132,111320.7020701615,.00369383431289,823725.6402795718,.46104986909093,2351.343141331292,1.58060784298199,8.77738589078284,.37238884252424,7.45]],convertMC2LL:function(t,e){for(var n,r=0,i=this.MCBAND.length;r<i;r++)if(Math.abs(t.y)>=this.MCBAND[r]){n=this.MC2LL[r];break}var o=this.convertor(t,n,e);return o},convertLL2MC:function(t,e){var n,r,i;t.x=this.getLoop(t.x,-180,180),t.y=this.getRange(t.y,-74,74);var o=new Ar(t.x,t.y);for(r=0,i=this.LLBAND.length;r<i;r++)if(o.y>=this.LLBAND[r]){n=this.LL2MC[r];break}if(!n)for(r=this.LLBAND.length-1;r>=0;r--)if(o.y<=-this.LLBAND[r]){n=this.LL2MC[r];break}var a=this.convertor(t,n,e);return a},convertor:function(t,e,n){if(!t||!e)return null;var r=e[0]+e[1]*Math.abs(t.x),i=Math.abs(t.y)/e[9],o=e[2]+e[3]*i+e[4]*i*i+e[5]*i*i*i+e[6]*i*i*i*i+e[7]*i*i*i*i*i+e[8]*i*i*i*i*i*i;return r*=t.x<0?-1:1,o*=t.y<0?-1:1,n?(n.x=r,n.y=o,n):new Ar(r,o)},toRadians:function(t){return Math.PI*t/180},toDegrees:function(t){return 180*t/Math.PI},getRange:function(t,e,n){return null!=e&&(t=Math.max(t,e)),null!=n&&(t=Math.min(t,n)),t},getLoop:function(t,e,n){if(t===1/0)return n;if(t===-1/0)return e;while(t>n)t-=n-e;while(t<e)t+=n-e;return t}}),ci=b({},Wr,{code:"IDENTITY",project:function(t,e){return e?(e.x=t.x,e.y=t.y,e):t.copy()},unproject:function(t,e){return e?(e.x=t.x,e.y=t.y,e):t.copy()}},Yr),li=oi,fi=Object.freeze({EPSG3857:oi,DEFAULT:li,EPSG4326:ai,EPSG4490:si,BAIDU:ui,IDENTITY:ci,Common:Wr}),hi=function(t){return function(t){function e(){return t.apply(this,arguments)||this}return pt(e,t),e.registerRenderer=function(t,e){var n=this.prototype,r=Object.getPrototypeOf(n);return n._rendererClasses&&n._rendererClasses!==r._rendererClasses||(n._rendererClasses=n._rendererClasses?Object.create(n._rendererClasses):{}),n._rendererClasses[t.toLowerCase()]=e,this},e.getRendererClass=function(t){var e=this.prototype;return e._rendererClasses?e._rendererClasses[t.toLowerCase()]:null},e}(t)},pi={};function di(t,e){pi[t]=e}var vi,gi="\n    var adapters = {};\n    onmessage = function (msg) {\n        msg = msg.data;\n        if (msg.messageType === 'batch') {\n            const messages = msg.messages;\n            if (messages) {\n                for (let i = 0; i < messages.length; i++) {\n                    dispatch(messages[i]);\n                }\n            }\n        } else {\n            dispatch(msg);\n        }\n    };\n\n    function dispatch(msg) {\n        var workerKey = msg.workerKey;\n        var adapter = adapters[workerKey];\n        if (!adapter) {\n            post(msg.callback, 'Unregistered worker adapters for ' + workerKey);\n            return;\n        }\n        try {\n            adapter.onmessage(msg, wrap(msg.callback));\n        } catch (err) {\n            post(msg.callback, workerKey + ':' + err.message);\n            console.error(err);\n            throw err;\n        }\n    }\n\n    function post(callback, err, data, buffers) {\n        var msg = {\n            callback : callback\n        };\n        if (err) {\n            msg.error = err;\n        } else {\n            msg.data = data;\n        }\n        if (buffers && buffers.length > 0) {\n            postMessage(msg, buffers);\n        } else {\n            postMessage(msg);\n        }\n    }\n    function wrap(callback) {\n        return function (err, data, buffers) {\n            post(callback, err, data, buffers);\n        };\n    }\n    var workerExports;\n",mi="\n    workerExports = null;\n";function yi(){var t=gi;for(var e in pi){var n=pi[e];C(n)&&0===n.length&&(n=n()),t+="\n    workerExports = {};\n    ("+n+")(workerExports, self);\n    adapters['"+e+"'] = workerExports",t+="\n    workerExports.initialize && workerExports.initialize(self);\n        "}return t+=mi,t}function _i(){if("undefined"===typeof window)return null;if(!vi){var t=yi();vi=window.URL.createObjectURL(new Blob([t],{type:"text/javascript"})),pi=null}return vi}var bi,xi="undefined"!==typeof window?window.navigator.hardwareConcurrency||4:0,wi=Math.max(Math.floor(xi/2),1),Ei=function(){function t(t){void 0===t&&(t=50),this._limit=t,this._messages=[],this.buffers=[]}var e=t.prototype;return e.addMessage=function(t,e){if(this._messages.push(t),Array.isArray(e))for(var n=0;n<e.length;n++)this.buffers.indexOf(e[n])<0&&this.buffers.push(e[n])},e.isFull=function(){return this._messages.length>=this._limit},e.getMessage=function(){return{messageType:"batch",messages:this._messages}},t}(),Si=function(){function t(){this.active={},this.workerCount="undefined"!==typeof window?window.MAPTALKS_WORKER_COUNT||wi:0,this._messages=[],this._messageBuffers=[]}var e=t.prototype;return e.acquire=function(t){if(!this.workers){this.workers=[];for(var e=_i(),n=0;n<this.workerCount;n++){var r=new Worker(e);r.id=n,this.workers.push(r)}URL.revokeObjectURL(e)}return this.active[t]=!0,this.workers.slice()},e.release=function(t){delete this.active[t],0===Object.keys(this.active).length&&(this.workers.forEach((function(t){t.terminate()})),this.workers=null)},e.addMessage=function(t,e,n){var r=this._messages[t];r&&r.length||(r=this._messages[t]=[new Ei]);var i=r[r.length-1];i.isFull()&&(i=new Ei,this._messages[t].push(i)),i.addMessage(e,n)},e.commit=function(){if(this._messages.length)for(var t=0;t<this._messages.length;t++)if(this._messages[t]&&this._messages[t].length){var e=this._messages[t].shift();this.workers[t].postMessage(e.getMessage(),e.buffers)}},t}();function Oi(){return bi||(bi=new Si),bi}function Ci(){Oi().commit(),vt(Ci)}vt&&vt(Ci);var Ti=0,Ai=[],ki=function(){function t(t){var e=this;this.workerKey=t,this.workerPool=Oi(),this.currentActor=0,this.actorId=wt(),this.workers=this.workerPool.acquire(this.actorId),this.callbacks={},this.callbackID=0,this.receiveFn=this.receive.bind(this),this.workers.forEach((function(t){t.addEventListener("message",e.receiveFn,!1)}))}var e=t.prototype;return e.isActive=function(){return!!this.workers},e.broadcast=function(t,e,n){var r=this;return n=n||function(){},Mi(this.workers,(function(n,i){r.send(t,e,i,n.id)}),n),this},e.send=function(t,e,n,r){var i=n?this.actorId+":"+this.callbackID++:null;return n&&(this.callbacks[i]=n),this.post({data:t,callback:String(i)},e,r),this},e.receive=function(t){var e=this,n=t.data,r=n.callback,i=this.callbacks[r];delete this.callbacks[r],"<request>"===n.type?this.actorId===n.actorId&&this[n.command](n.params,(function(t,r,i){var o={type:"<response>",callback:n.callback};t?o.error=t.message:o.data=r,e.post(o,i||Ai,n.workerId)})):i&&n.error?i(n.error):i&&i(null,n.data)},e.remove=function(){var t=this;this.workers.forEach((function(e){e.removeEventListener("message",t.receiveFn,!1)})),this.workerPool.release(this.actorId),delete this.receiveFn,delete this.workers,delete this.callbacks,delete this.workerPool},e.post=function(t,e,n){return("number"!==typeof n||isNaN(n))&&(n=this.currentActor=(this.currentActor+1)%this.workerPool.workerCount),t.workerId=n,t.workerKey=this.workerKey,t.actorId=this.actorId,this.workerPool.addMessage(n,t,e||Ai),n},e.getDedicatedWorker=function(){return Ti=(Ti+1)%this.workerPool.workerCount,Ti},t}();function Mi(t,e,n){t.length||n(null,[]);var r=t.length,i=new Array(t.length),o=null;t.forEach((function(t,a){e(t,(function(t,e){t&&(o=t),i[a]=e,0===--r&&n(o,i)}))}))}var Pi="core-fetch-image",Ri=[],ji=function(t){function e(){return t.call(this,Pi)||this}pt(e,t);var n=e.prototype;return n.fetchImage=function(t,e){var n={url:t};this.send(n,Ri,e)},e}(ki),Ii=function(t){function e(e){var n;return n=t.call(this)||this,n.layer=e,n._painted=!1,n._drawTime=0,!ht.decodeImageInWorker||"gl"!==e.options["renderer"]&&ht.safari||(n._resWorkerConn=new ji),n.setToRedraw(),n}pt(e,t);var n=e.prototype;return n.render=function(t){this.prepareRender(),this.getMap()&&this.layer.isVisible()&&(this.resources||(this.resources=new Li),this.checkAndDraw(this._tryToDraw,t))},n.checkAndDraw=function(t){var e=this;this._toRedraw=!1;for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];if(this.checkResources){var o=this.checkResources();o.length>0?(this._loadingResource=!0,this.loadResources(o).then((function(){e._loadingResource=!1,e.layer&&(e.layer.fire("resourceload"),e.setToRedraw())}))):t.call.apply(t,[this].concat(r))}else t.call.apply(t,[this].concat(r))},n.testIfNeedRedraw=function(){var t=this.getMap();return!this._loadingResource&&(!!this._toRedraw||!(t.isInteracting()&&!this.drawOnInteracting)&&!!this.needToRedraw())},n.needToRedraw=function(){var t=this.getMap();return!(!t.isInteracting()&&!t.getRenderer().isViewChanged())&&!(!t.getPitch()&&t.isMoving()&&!t.isZooming()&&!t.isRotating()&&!this.layer.options["forceRenderOnMoving"])},n.onSkipDrawOnInteracting=function(){},n.isLoadingResource=function(){return this._loadingResource},n.isRenderComplete=function(){return!!this._renderComplete},n.mustRenderOnInteracting=function(){return!this._painted},n.setToRedraw=function(){return this._toRedraw=!0,this},n.setCanvasUpdated=function(){return this._canvasUpdated=!0,this},n.isCanvasUpdated=function(){return!!this._canvasUpdated},n.remove=function(){this.onRemove(),delete this._loadingResource,delete this.southWest,delete this.canvas,delete this.context,delete this.canvasExtent2D,delete this._extent2D,this.resources&&this.resources.remove(),delete this.resources,delete this.layer},n.onRemove=function(){},n.onAdd=function(){},n.getMap=function(){return this.layer?this.layer.getMap():null},n.getCanvasImage=function(){var t=this.getMap();if(this._canvasUpdated=!1,this._renderZoom!==t.getZoom()||!this.canvas||!this._extent2D)return null;if(this.isBlank())return null;if(this.layer.isEmpty&&this.layer.isEmpty())return null;var e=t._pointToContainerPoint(this.southWest)._add(0,-t.height);return{image:this.canvas,layer:this.layer,point:e}},n.clear=function(){this.clearCanvas()},n.isBlank=function(){return!this._painted},n.show=function(){this.setToRedraw()},n.hide=function(){this.clear(),this.setToRedraw()},n.setZIndex=function(){this.setToRedraw()},n.hitDetect=function(t){if(!this.context||this.layer.isEmpty&&this.layer.isEmpty()||this.isBlank()||this._errorThrown||this.layer.isVisible&&!this.layer.isVisible())return!1;var e=this.getMap(),n=e.getDevicePixelRatio(),r=e.getSize();if(t.x<0||t.x>r["width"]*n||t.y<0||t.y>r["height"]*n)return!1;var i=this.getImageData&&this.getImageData();if(i){var o=Math.round(n*t.x),a=Math.round(n*t.y),s=a*i.width*4+4*o;return i.data[s+3]>0}try{var u=this.context.getImageData(n*t.x,n*t.y,1,1).data;if(u[3]>0)return!0}catch(c){return this._errorThrown||(console&&console.warn("hit detect failed with tainted canvas, some geometries have external resources in another domain:\n",c),this._errorThrown=!0),!1}return!1},n.loadResources=function(t){this.resources||(this.resources=new Li);var e=this.resources,n=[];if(jt(t))for(var r={},i=t.length-1;i>=0;i--){var o=t[i];o&&o.length&&!r[o.join("-")]&&(r[o.join("-")]=1,e.isResourceLoaded(o,!0)||n.push(new dr(this._promiseResource(o))))}return dr.all(n)},n.prepareRender=function(){delete this._renderComplete;var t=this.getMap();this._renderZoom=t.getZoom(),this.canvasExtent2D=this._extent2D=t._get2DExtent(),this.southWest=t._containerPointToPoint(new yt(0,t.height))},n.createCanvas=function(){if(!this.canvas){var t=this.getMap(),e=t.getSize(),n=t.getDevicePixelRatio(),r=Math.round(n*e.width),i=Math.round(n*e.height);if(this.layer._canvas){var o=this.layer._canvas;o.width=r,o.height=i,o.style&&(o.style.width=e.width+"px",o.style.height=e.height+"px"),this.canvas=this.layer._canvas}else this.canvas=ur.createCanvas(r,i,t.CanvasClass);this.onCanvasCreate()}},n.onCanvasCreate=function(){},n.createContext=function(){if(!(this.gl&&this.gl.canvas===this.canvas||this.context)&&(this.context=ur.getCanvas2DContext(this.canvas),this.context)){this.layer.options["globalCompositeOperation"]&&(this.context.globalCompositeOperation=this.layer.options["globalCompositeOperation"]);var t=this.getMap().getDevicePixelRatio();1!==t&&this.context.scale(t,t)}},n.resetCanvasTransform=function(){if(this.context){var t=this.getMap().getDevicePixelRatio();this.context.setTransform(t,0,0,t,0,0)}},n.resizeCanvas=function(t){var e=this.canvas;if(e){var n=t||this.getMap().getSize(),r=this.getMap().getDevicePixelRatio(),i=Jt(n,r),o=i.width,a=i.height,s=i.cssWidth,u=i.cssHeight;!this.layer._canvas||e.style.width===s&&e.style.height===u||(e.style.width=s,e.style.height=u),e.width===o&&e.height===a||(e.height=a,e.width=o,1!==r&&this.context&&this.context.scale(r,r))}},n.clearCanvas=function(){if(this.context&&this.getMap()){var t=this.getMap().getDevicePixelRatio(),e=1/t,n=this.canvas.width*e,r=this.canvas.height*e;ur.clearRect(this.context,0,0,Math.max(n,this.canvas.width),Math.max(r,this.canvas.height))}},n.prepareCanvas=function(){this.canvas?(this.resetCanvasTransform(),this.clearCanvas(),this.resizeCanvas()):(this.createCanvas(),this.createContext(),this.layer.onCanvasCreate(),this.layer.fire("canvascreate",{context:this.context,gl:this.gl})),delete this._maskExtent;var t=this.layer.getMask();if(!t)return this.layer.fire("renderstart",{context:this.context,gl:this.gl}),null;var e=this._maskExtent=t._getMaskPainter().get2DExtent();return e.intersects(this._extent2D),this.layer.fire("renderstart",{context:this.context,gl:this.gl}),e},n.clipCanvas=function(t){var e=this.layer.getMask();if(!e)return!1;var n=this.southWest,r=this.getMap();this.southWest=r._containerPointToPoint(new yt(0,r.height)),t.save();var i=r.getDevicePixelRatio();if(1!==i&&(t.save(),t.scale(i,i)),e.getGeometries){t.isMultiClip=!0;var o=e.getGeometries()||[];t.beginPath(),o.forEach((function(e){var n=e._getMaskPainter();n.paint(null,t)})),t.stroke(),delete t.isMultiClip}else{var a=e._getMaskPainter();a.paint(null,t)}return 1!==i&&t.restore(),t.clip(),this.southWest=n,!0},n.getViewExtent=function(){return{extent:this._extent2D,maskExtent:this._maskExtent,zoom:this._renderZoom,southWest:this.southWest}},n.completeRender=function(){this.getMap()&&(this._renderComplete=!0,this.layer.fire("renderend",{context:this.context,gl:this.gl}),this.setCanvasUpdated())},n.getEvents=function(){return{_zoomstart:this.onZoomStart,_zooming:this.onZooming,_zoomend:this.onZoomEnd,_resize:this.onResize,_movestart:this.onMoveStart,_moving:this.onMoving,_moveend:this.onMoveEnd,_dragrotatestart:this.onDragRotateStart,_dragrotating:this.onDragRotating,_dragrotateend:this.onDragRotateEnd,_spatialreferencechange:this.onSpatialReferenceChange}},n.onZoomStart=function(){},n.onZoomEnd=function(){this.setToRedraw()},n.onZooming=function(){},n.onMoveStart=function(){},n.onMoving=function(){},n.onMoveEnd=function(){this.setToRedraw()},n.onResize=function(){delete this._extent2D,this.resizeCanvas(),this.setToRedraw()},n.onDragRotateStart=function(){},n.onDragRotating=function(){},n.onDragRotateEnd=function(){this.setToRedraw()},n.onSpatialReferenceChange=function(){},n.getDrawTime=function(){return this._drawTime},n._tryToDraw=function(t){this._toRedraw=!1,!this.canvas&&this.layer.isEmpty&&this.layer.isEmpty()?this._renderComplete=!0:this._drawAndRecord(t)},n._drawAndRecord=function(t){if(this.getMap()){var e=this._painted;this._painted=!0;var n=_();this.draw(t),n=_()-n,this._drawTime=e?n:n/2,e&&this.layer&&this.layer.options["logDrawTime"]&&console.log(this.layer.getId(),"frameTimeStamp:",t,"drawTime:",this._drawTime)}},n._promiseResource=function(t){var e=this,n=this.resources,r=this.layer.options["crossOrigin"],i=this.layer.options["renderer"]||"";return function(o){if(n.isResourceLoaded(t,!0))o(t);else if(!_t(t[0])&&e._resWorkerConn){var a=Kt(t[0]);e._resWorkerConn.fetchImage(a,(function(n,r){if(n)return n&&"undefined"!==typeof console&&console.warn(n),void o(t);qt(r,(function(n){e._cacheResource(t,n),o(t)}))}))}else{var s=new Image;x(r)?"canvas"!==i&&(s["crossOrigin"]=""):s["crossOrigin"]=r,_t(t[0])&&!R&&(t[1]&&(t[1]*=2),t[2]&&(t[2]*=2)),s.onload=function(){e._cacheResource(t,s),o(t)},s.onabort=function(e){console&&console.warn("image loading aborted: "+t[0]),e&&console&&console.warn(e),o(t)},s.onerror=function(e){e&&"undefined"!==typeof console&&console.warn(e),n.markErrorResource(t),o(t)},bt(s,t)}}},n._cacheResource=function(t,e){if(this.layer&&this.resources){var n=t[1],r=t[2];if(this.layer.options["cacheSvgOnCanvas"]&&1===_t(t[0])&&(ht.edge||ht.ie)){x(n)&&(n=e.width||this.layer.options["defaultIconSize"][0]),x(r)&&(r=e.height||this.layer.options["defaultIconSize"][1]);var i=ur.createCanvas(n,r);ur.image(i.getContext("2d"),e,0,0,n,r),e=i}this.resources.addResource(t,e)}},e}(yr),Li=function(){function t(){this.resources={},this._errors={}}var e=t.prototype;return e.addResource=function(t,e){var n=this;if(this.resources[t[0]]={image:e,width:+t[1],height:+t[2],refCnt:0},e&&!e.close&&ht.imageBitMap&&!ht.safari){if(e.src&&_t(e.src))return;createImageBitmap(e).then((function(e){n.resources[t[0]]&&(n.resources[t[0]].image=e)}))}},e.isResourceLoaded=function(t,e){if(!t)return!1;var n=this._getImgUrl(t);if(this._errors[n])return!0;var r=this.resources[n];return!!r&&!(e&&_t(t[0])&&(+t[1]>r.width||+t[2]>r.height))},e.login=function(t){var e=this.resources[t];e&&e.refCnt++},e.logout=function(t){var e=this.resources[t];e&&e.refCnt--<=0&&delete this.resources[t]},e.getImage=function(t){var e=this._getImgUrl(t);return!this.isResourceLoaded(t)||this._errors[e]?null:this.resources[e].image},e.markErrorResource=function(t){this._errors[this._getImgUrl(t)]=1},e.merge=function(t){if(!t)return this;for(var e in t.resources){var n=t.resources[e];this.addResource([e,n.width,n.height],n.image)}return this},e.forEach=function(t){if(!this.resources)return this;for(var e in this.resources)A(this.resources,e)&&t(e,this.resources[e]);return this},e._getImgUrl=function(t){return Array.isArray(t)?t[0]:t},e.remove=function(){for(var t in this.resources){var e=this.resources[t];e&&e.image&&e.image.close&&e.image.close()}this.resources={}},t}(),Ni="\nfunction (exports) {\n    exports.onmessage = function (msg, postResponse) {\n        var url = msg.data.url;\n        var fetchOptions = msg.data.fetchOptions;\n        requestImageOffscreen(url, function (err, data) {\n            var buffers = [];\n            if (data && data.data && data.data.buffer) {\n                buffers.push(data.data.buffer);\n            }\n            postResponse(err, data, buffers);\n        }, fetchOptions);\n    };\n\n    var offCanvas, offCtx;\n    function requestImageOffscreen(url, cb, fetchOptions) {\n        if (!offCanvas) {\n            offCanvas = new OffscreenCanvas(2, 2);\n            offCtx = offCanvas.getContext('2d',{willReadFrequently: true });\n        }\n        fetch(url, fetchOptions ? fetchOptions : {})\n            .then(response => response.blob())\n            .then(blob => createImageBitmap(blob))\n            .then(bitmap => {\n                var { width, height } = bitmap;\n                offCanvas.width = width;\n                offCanvas.height = height;\n                offCtx.drawImage(bitmap, 0, 0);\n                bitmap.close();\n                var imgData = offCtx.getImageData(0, 0, width, height);\n                // debugger\n                cb(null, { width, height, data: new Uint8Array(imgData.data) });\n            }).catch(err => {\n                console.warn('error when loading tile:', url);\n                console.warn(err);\n                cb(err);\n            });\n    }\n}";function Di(){ht.decodeImageInWorker&&di(Pi,(function(){return Ni}))}Di();var Fi={markerWidth:10,markerHeight:10,markerLineWidth:1};function Bi(){return.5}var zi=new yt(0,0);function Ui(t,e,n,r,i,o,a){var s=zi.set(e,n),u=t.set(s.x,s.y,s.x+o,s.y+a);return u._add(i),r&&Ki(u,r),u}var Vi=[];function Hi(t,e,n){n=n||Xi(Vi,e);var r=Yi(e,n[0],n[1]);return Ui(t,e["markerDx"]||0,e["markerDy"]||0,Qi(e),r,n[0],n[1])}function Gi(t){return"rectangle"===t?"right":"middle"}function Wi(t){return"bar"===t||"pie"===t||"pin"===t?"top":"rectangle"===t?"bottom":"middle"}var Zi=new We(0,0);function Yi(t,e,n){var r=Bi(),i=2*(t["shadowBlur"]||0),o=i+r;Zi.width=e,Zi.height=n;var a=t["markerType"],s=rn(Zi,t["markerHorizontalAlignment"]||Gi(a),t["markerVerticalAlignment"]||Wi(a));return s.x!==-e/2&&(s.x-=At(s.x+e/2)*o),s.y!==-n/2&&(s.y-=At(s.y+n/2)*o),s}function Xi(t,e){var n=Bi(e),r=Tt(e["markerWidth"],Fi.markerWidth),i=Tt(e["markerHeight"],Fi.markerHeight),o=Tt(e["markerLineWidth"],Fi.markerLineWidth),a=2*((e["shadowBlur"]||0)+Math.max(Math.abs(e["shadowOffsetX"]||0)+Math.abs(e["shadowOffsetY"]||0))),s=Math.round(r+o+a+2*n),u=Math.round(i+o+a+2*n);return t[0]=s,t[1]=u,t}var qi=new Hr;function Ki(t,e){var n=t.xmin,r=t.ymin,i=t.xmax,o=t.ymax;return qi.set(n,r,i,o),qi.convertTo((function(t){return t._rotate(e)}),t)}function Qi(t,e){void 0===e&&(e="markerRotation");var n=t[e];return w(n)?-n*Math.PI/180:0}function $i(t,e,n){var r=e["markerFile"],i=n?n.getImage(r):null,o=e["markerWidth"]||(i?i.width:0),a=e["markerHeight"]||(i?i.height:0);Zi.width=o,Zi.height=a;var s=rn(Zi,e["markerHorizontalAlignment"]||"middle",e["markerVerticalAlignment"]||"top");return Ui(t,e["markerDx"]||0,e["markerDy"]||0,Qi(e),s,o,a)}function Ji(t,e,n){var r=n["size"],i=rn(r,e["textHorizontalAlignment"],e["textVerticalAlignment"]);if(e["textHaloRadius"]){var o=e["textHaloRadius"];r=r.add(2*o,2*o)}return Ui(t,e["textDx"]||0,e["textDy"]||0,Qi(e,"textRotation"),i,r.width,r.height)}var to=new Hr;function eo(t,e,n,r){var i=t||new Hr;if(Array.isArray(e)){for(var o=e,a=0;a<o.length;a++)eo(i,o[a],n,r[a]);return i}return no(e)&&i._combine(Ji(to,e,r)),ro(e)&&i._combine($i(to,e,n)),io(e)&&i._combine(Hi(to,e)),oo(e)&&i._combine($i(to,e)),i}function no(t){return!!t&&!x(t["textName"])}function ro(t){return!!t&&!x(t["markerFile"])}function io(t){return!!t&&!(!x(t["markerFile"])||x(t["markerType"])||"path"===t["markerType"])}function oo(t){return!!t&&!(!x(t["markerFile"])||"path"!==t["markerType"])}var ao,so=["markerWidth","markerHeight","markerHorizontalAlignment","markerVerticalAlignment","markerDx","markerDy","textName","textSize","textDx","textDy","textVerticalAlignment","textHorizontalAlignment","textRotation"],uo=["textName","markerType","markerFile","textHaloRadius","shadowBlur","shadowOffsetX","shadowOffsetY","textWrapWidth"];function co(t,e,n,r){for(var i,o=[],a=0,s=0,u=t.length;s<u-1;s++)i=lo(t[s],t[s+1],e,s,n,r),i&&(o[a]=o[a]||[],o[a].push({point:i[0],index:s}),i[1]===t[s+1]&&s!==u-2||(o[a].push({point:i[1],index:s+1}),a++));return o}function lo(t,e,n,r,i,o){var a,s,u,c=r?ao:po(t,n),l=po(e,n);ao=l;while(1){if(!(c|l))return[t,e];if(c&l)return!1;if(o)return[t,e];a=c||l,s=ho(t,e,a,n,i),u=po(s,n),a===c?(t=s,c=u):(e=s,l=u)}}function fo(t,e,n){var r,i,o,a,s,u,c,l,f,h=[1,4,2,8];for(i=0,c=t.length;i<c;i++)t[i]._code=po(t[i],e);for(a=0;a<4;a++){for(l=h[a],r=[],i=0,c=t.length,o=c-1;i<c;o=i++)s=t[i],u=t[o],s._code&l?u._code&l||(f=ho(u,s,l,e,n),f._code=po(f,e),r.push(f)):(u._code&l&&(f=ho(u,s,l,e,n),f._code=po(f,e),r.push(f)),r.push(s));t=r}return t}function ho(t,e,n,r,i){var o,a,s=e.x-t.x,u=e.y-t.y,c=r.getMin(),l=r.getMax();8&n?(o=t.x+s*(l.y-t.y)/u,a=l.y):4&n?(o=t.x+s*(c.y-t.y)/u,a=c.y):2&n?(o=l.x,a=t.y+u*(l.x-t.x)/s):1&n&&(o=c.x,a=t.y+u*(c.x-t.x)/s);var f=new yt(o,a);return i&&f._round(),f}function po(t,e){var n=0;return t.x<e.getMin().x?n|=1:t.x>e.getMax().x&&(n|=2),t.y<e.getMin().y?n|=4:t.y>e.getMax().y&&(n|=8),n}function vo(t,e,n,r){t=new yt(t);var i,o,a,s=Math.abs(n.x-e.x),u=Math.abs(n.y-e.y),c=Math.sqrt(Math.abs(s*s-u*u)),l=s>=u;return l?(i=new yt(e.x-c,e.y),o=new yt(e.x+c,e.y),a=2*s):(i=new yt(e.x,e.y-c),o=new yt(e.x,e.y+c),a=2*u),t.distanceTo(i)+t.distanceTo(o)<=a+2*r}var go=function(){function t(){}var e=t.prototype;return e.getMap=function(){return this.geometry.getMap()},e.getPainter=function(){return this.painter},e.isDynamicSize=function(){return!1},t.testColor=function(t){return!(!t||!O(t))&&m.indexOf(t)>=0},t}(),mo=function(t){function e(){return t.apply(this,arguments)||this}pt(e,t);var n=e.prototype;return n._prepareContext=function(t){if(ge(this.symbol["opacity"])?this._opacityFn||(this._opacityFn=ye(this.symbol["opacity"])):delete this._opacityFn,w(this.symbol["opacity"]))t.globalAlpha!==this.symbol["opacity"]&&(t.globalAlpha=this.symbol["opacity"]);else if(this._opacityFn){var e=this.getMap();t.globalAlpha=this._opacityFn(e.getZoom())}else 1!==t.globalAlpha&&(t.globalAlpha=1)},n.prepareCanvas=function(t,e,n){t.setLineDash&&jt(e["lineDasharray"])&&t.setLineDash(e["lineDasharray"]);var r=this.getPainter().isHitTesting();ur.prepareCanvas(t,e,n,r)},n.remove=function(){},n.setZIndex=function(){},n.show=function(){},n.hide=function(){},n._defineStyle=function(t){return De(t,this.geometry)},e}(go);function yo(t,e){var n=t&&t.getImage(e);return n||null}function _o(t,e,n,r){var i,o=xo(n),a=n,s=a["markerType"].toLowerCase(),u=wo(s,a["markerWidth"],a["markerHeight"]),c=o["lineOpacity"],l=o["polygonOpacity"],f=cn(o["polygonFill"]);f&&(cn(o["polygonFill"])&&(i||(i=bo(e,a.markerWidth,a.markerHeight)),o["polygonGradientExtent"]=i));ur.prepareCanvas(t,o,r);var h=a["markerWidth"],p=a["markerHeight"],d=a["markerLineWidth"]/2;if("ellipse"===s)ur.ellipse(t,e,h/2,p/2,p/2,c,l);else if("cross"===s||"x"===s){for(var v=u.length-1;v>=0;v--)u[v]._add(e);ur.path(t,u.slice(0,2),c),ur.path(t,u.slice(2,4),c)}else if("diamond"===s||"bar"===s||"square"===s||"rectangle"===s||"triangle"===s){"bar"===s?e=e.add(0,-d):"rectangle"===s&&(e=e.add(d,d));for(var g=u.length-1;g>=0;g--)u[g]._add(e);ur.polygon(t,u,c,l)}else if("pin"===s){e=e.add(0,-d);for(var m=u.length-1;m>=0;m--)u[m]._add(e);var y=t.lineCap;t.lineCap="round",ur.bezierCurveAndFill(t,u,c,l),t.lineCap=y}else{if("pie"!==s)throw new Error("unsupported markerType: "+s);e=e.add(0,-d);var _=180*Math.atan(h/2/p)/Math.PI,b=t.lineCap;t.lineCap="round",ur.sector(t,e,p,[90-_,90+_],c,l),t.lineCap=b}return t.canvas}function bo(t,e,n){var r=new Hr;return r._combine(t),r["xmin"]+=-e/2,r["ymin"]+=-n/2,r["xmax"]+=e/2,r["ymax"]+=n/2,r}function xo(t){var e={lineColor:t["markerLineColor"],linePatternFile:t["markerLinePatternFile"],lineWidth:t["markerLineWidth"],lineOpacity:t["markerLineOpacity"],lineDasharray:t["markerLineDasharray"],lineCap:"butt",lineJoin:"round",polygonFill:t["markerFill"],polygonPatternFile:t["markerFillPatternFile"],polygonOpacity:t["markerFillOpacity"]};return 0===e["lineWidth"]&&(e["lineOpacity"]=0),e}function wo(t,e,n){var r,i,o,a,s=n/2,u=e/2,c=0,l=0;if("triangle"===t)return r=new yt(c,l-s),i=new yt(c-u,l+s),o=new yt(c+u,l+s),[r,i,o];if("cross"===t)return r=new yt(c-u,l),i=new yt(c+u,l),o=new yt(c,l-s),a=new yt(c,l+s),[r,i,o,a];if("diamond"===t)return r=new yt(c-u,l),i=new yt(c,l-s),o=new yt(c+u,l),a=new yt(c,l+s),[r,i,o,a];if("square"===t)return r=new yt(c-u,l+s),i=new yt(c+u,l+s),o=new yt(c+u,l-s),a=new yt(c-u,l-s),[r,i,o,a];if("rectangle"===t)return r=new yt(c,l),i=r.add(e,0),o=r.add(e,n),a=r.add(0,n),[r,i,o,a];if("x"===t)return r=new yt(c-u,l+s),i=new yt(c+u,l-s),o=new yt(c+u,l+s),a=new yt(c-u,l-s),[r,i,o,a];if("bar"===t)return r=new yt(c-u,l-n),i=new yt(c+u,l-n),o=new yt(c+u,l),a=new yt(c-u,l),[r,i,o,a];if("pin"===t||"pie"===t){var f=n*Math.atan(u/s);return r=new yt(c,l),i=new yt(c-f,l-n),o=new yt(c+f,l-n),a=new yt(c,l),[r,i,o,a]}return[]}var Eo,So=new yt(0,0),Oo=new yt(0,0),Co=new yt(0,0),To=new yt(0,0),Ao=function(t){function e(e,n,r){var i;return i=t.call(this)||this,i.symbol=e,i.geometry=n,i.painter=r,i}pt(e,t);var n=e.prototype;return n.get2DExtent=function(){for(var t=this.getMap(),e=t.getGLRes(),n=new Hr,r=this._getRenderPoints()[0],i=r.length-1;i>=0;i--)r[i]&&n._combine(t._pointAtResToPoint(r[i],e));return n},n.isDynamicSize=function(){var t=this.symbol;return ge(t["markerWidth"])||ge(t["markerHeight"])||ge(t["textSize"])},n._rotateExtent=function(t,e){return t.convertTo((function(t){return t._rotate(e)}))},n._getRenderPoints=function(){var t=this.getPainter(),e=t.isSpriting()?"center":this.getPlacement();return this.getPainter().getRenderPoints(e)},n._getRenderContainerPoints=function(t){var e=this.getPainter();if(e.isSpriting())return this._getRenderPoints()[0];var n,r=this.geometry,i=this.getDxDy();if(r._cPoint&&!t){var o=t?Co:To;o.set(r._cPoint.x,r._cPoint.y);var a=e.containerOffset;o._sub(a);var s=i.x,u=i.y;(s||u)&&o._add(s||0,u||0),n=[o]}else{var c=this._getRenderPoints()[0];n=this.painter._pointContainerPoints(c,i.x,i.y,t,!0,this.getPlacement())}if(!n||!Array.isArray(n[0]))return n;for(var l=[],f=0,h=n.length;f<h;f++)for(var p=0,d=n[f].length;p<d;p++)l.push(n[f][p]);return l},n.getPlacement=function(){return this.symbol["markerPlacement"]},n.getRotation=function(){return Qi(this.style)},n.getDxDy=function(){var t=this.style,e=t["markerDx"],n=t["markerDy"];return new yt(e,n)},n._getRotationAt=function(t){var e=this.getRotation();e||(e=0);var n=this._getRenderPoints()[1];if(!n||!n[t])return e;var r=this.getMap(),i=n[t][0],o=n[t][1];if(r.isTransforming()){var a=r.getGLRes();return i=r._pointAtResToContainerPoint(n[t][0],a,0,So),o=r._pointAtResToContainerPoint(n[t][1],a,0,Oo),e+Ut(i.x,i.y,o.x,o.y)}return e+-Ut(i.x,i.y,o.x,o.y)},n._rotate=function(t,e,n){if(n){var r=this.getDxDy(),i=e.sub(r);return t.save(),t.translate(i.x,i.y),t.rotate(n),r}return null},e}(mo),ko=function(t){function e(){return t.apply(this,arguments)||this}pt(e,t);var n=e.prototype;return n.getPlacement=function(){return"point"},n.getDxDy=function(){return new yt(0,0)},n.symbolize=function(t){var e=this.geometry,n=e.getLayer();if(e.options["debug"]||!n||n.options["debug"]){var r=this.getMap();if(r&&!r.isZooming()){var i=n.options["debugOutline"],o=1;t.strokeStyle=i,t.fillStyle=i;var a=e.getContainerExtent().toArray();ur.polygon(t,[a],o,0);for(var s=this._getRenderContainerPoints(),u=this.geometry.getId(),c=wo("cross",10,10),l=0;l<s.length;l++){var f=s[l];x(u)||ur.fillText(t,u,f.add(8,-4),i);for(var h=[],p=0;p<c.length;p++)h.push(c[p].add(f));ur.path(t,h.slice(0,2),o),ur.path(t,h.slice(2,4),o)}}}},e}(Ao),Mo=new We(1,1),Po=function(t){function e(e,n,r){var i;return i=t.call(this,e,n,r)||this,i.style=i._defineStyle(i.translate()),i}pt(e,t),e.test=function(t){return ro(t)};var n=e.prototype;return n.symbolize=function(t,e){var n=this.style;if(this.painter.isHitTesting()||0!==n["markerWidth"]&&0!==n["markerHeight"]&&0!==n["markerOpacity"]){var r=this._getRenderContainerPoints();if(jt(r)){var i=this._getImage(e);if(i){this._prepareContext(t);var o,a=n["markerWidth"],s=n["markerHeight"];if(!w(a)||!w(s)){a=i.width,s=i.height,n["markerWidth"]=a,n["markerHeight"]=s;var u=n["markerFile"];e.isResourceLoaded(u)||e.addResource(u,i);var c=this.getPainter();c.isSpriting()||c.removeCache()}"path"!==this.symbol["markerType"]&&w(n["markerOpacity"])&&n["markerOpacity"]<1&&(o=t.globalAlpha,t.globalAlpha*=n["markerOpacity"]),Mo.width=a,Mo.height=s;for(var l=rn(Mo,n["markerHorizontalAlignment"],n["markerVerticalAlignment"]),f=0,h=r.length;f<h;f++){var p=r[f],d=this.getRotation()?this._rotate(t,p,this._getRotationAt(f)):null;d&&(p=d),ur.image(t,i,p.x+l.x,p.y+l.y,a,s),d&&t.restore()}void 0!==o&&(t.globalAlpha=o)}else"undefined"!==typeof console&&console.warn("no img found for "+(this.style["markerFile"]||this._url[0]))}}},n._getImage=function(t){return yo(t,this.style["markerFile"])},n.getFixedExtent=function(t){return this._fixedExtent=this._fixedExtent||new Hr,$i(this._fixedExtent,this.style,t)},n.translate=function(){var t=this.symbol;return{markerFile:t["markerFile"],markerOpacity:Tt(t["markerOpacity"],1),markerWidth:Tt(t["markerWidth"],null),markerHeight:Tt(t["markerHeight"],null),markerRotation:Tt(t["markerRotation"],0),markerDx:Tt(t["markerDx"],0),markerDy:Tt(t["markerDy"],0),markerHorizontalAlignment:Tt(t["markerHorizontalAlignment"],"middle"),markerVerticalAlignment:Tt(t["markerVerticalAlignment"],"top")}},e}(Ao),Ro=new Ar(0,0),jo=new Ar(0,0),Io=function(t){function e(e,n,r){var i;return i=t.call(this)||this,i.symbol=e,i.geometry=n,i.painter=r,"Point"===n.type?dt(i):(i.style=i._defineStyle(i.translate()),i)}pt(e,t),e.test=function(t,e){if(!t)return!1;if(e&&"Point"===e.type)return!1;for(var n in t){var r=n.slice(0,4);if("line"===r||"poly"===r)return!0}return!1};var n=e.prototype;return n.symbolize=function(t,e){var n=this.style;if(0!==n["polygonOpacity"]||0!==n["lineOpacity"]||this.painter.isHitTesting()){var r=this._getPaintParams();if(r){this._prepareContext(t);var i=cn(n["lineColor"]),o="Polygon"===this.geometry.getJSONType()||"LineString"===this.geometry.type;!i||!n["lineColor"]["places"]&&o||(n["lineGradientExtent"]=this.geometry.getContainerExtent()._expand(n["lineWidth"])),cn(n["polygonFill"])&&(n["polygonGradientExtent"]=this.geometry.getContainerExtent());var a=r[0],s="Polygon"===this.geometry.getJSONType()&&a.length>0&&Array.isArray(a[0][0])||"LineString"===this.geometry.type&&a.length>0&&Array.isArray(a[0]);if(s)for(var u=0;u<a.length;u++){this.prepareCanvas(t,n,e),i&&o&&!n["lineColor"]["places"]&&this._createGradient(t,a[u],n["lineColor"]);var c=[t,a[u]];r.length>1&&c.push.apply(c,r.slice(1)),c.push(n["lineOpacity"],n["polygonOpacity"],n["lineDasharray"]),this.geometry._paintOn.apply(this.geometry,c)}else{this.prepareCanvas(t,n,e),i&&o&&!n["lineColor"]["places"]&&this._createGradient(t,a,n["lineColor"]);var l=[t];l.push.apply(l,r),l.push(n["lineOpacity"],n["polygonOpacity"],n["lineDasharray"]),this.geometry._paintOn.apply(this.geometry,l)}t.setLineDash&&Array.isArray(n["lineDasharray"])&&t.setLineDash([])}}},n.get2DExtent=function(){var t=this.getMap(),e=this.geometry._getPrjExtent();if(!e)return null;this._extMin&&this._extMax||(this._extMin=new Ar(0,0),this._extMax=new Ar(0,0)),this._extMin.x=e["xmin"],this._extMin.y=e["ymin"],this._extMax.x=e["xmax"],this._extMax.y=e["ymax"];var n=t._prjToPoint(this._extMin,void 0,Ro),r=t._prjToPoint(this._extMax,void 0,jo);return this._pxExtent?this._pxExtent.set(Math.min(n.x,r.x),Math.min(n.y,r.y),Math.max(n.x,r.x),Math.max(n.y,r.y)):this._pxExtent=new Hr(n,r),this._pxExtent},n.getFixedExtent=function(){var t=this.style["lineWidth"]/2;return new Hr(-t,-t,t,t)},n._getPaintParams=function(){return this.getPainter().getPaintParams(this.style["lineDx"],this.style["lineDy"])},n.translate=function(){var t=this.symbol,e={lineColor:Tt(t["lineColor"],"#000"),lineWidth:Tt(t["lineWidth"],2),lineOpacity:Tt(t["lineOpacity"],1),lineDasharray:Tt(t["lineDasharray"],[]),lineCap:Tt(t["lineCap"],"butt"),lineJoin:Tt(t["lineJoin"],"miter"),linePatternFile:Tt(t["linePatternFile"],null),lineDx:Tt(t["lineDx"],0),lineDy:Tt(t["lineDy"],0),polygonFill:Tt(t["polygonFill"],null),polygonOpacity:Tt(t["polygonOpacity"],1),polygonPatternFile:Tt(t["polygonPatternFile"],null),polygonPatternDx:Tt(t["polygonPatternDx"],0),polygonPatternDy:Tt(t["polygonPatternDy"],0),linePatternDx:Tt(t["linePatternDx"],0),linePatternDy:Tt(t["linePatternDy"],0)};return 0===e["lineWidth"]&&(e["lineOpacity"]=0),"LineString"!==this.geometry.type||e["polygonFill"]||(e["polygonFill"]=e["lineColor"]),e},n._createGradient=function(t,e,n){if(Array.isArray(e)&&e.length){var r=e.length,i=t.createLinearGradient(e[0].x,e[0].y,e[r-1].x,e[r-1].y);n["colorStops"].forEach((function(t){i.addColorStop.apply(i,t)})),t.strokeStyle=i}},e}(mo),Lo=function(t){function e(e,n,r){var i;i=t.call(this,e,n,r)||this;var o=i.translate();return i._dynamic=me(o),i.style=i._defineStyle(o),0===i.style["textWrapWidth"]?dt(i):(i.strokeAndFill=i._defineStyle(i.translateLineAndFill(i.style)),i)}pt(e,t),e.test=function(t){return no(t)};var n=e.prototype;return n.symbolize=function(t,e){if(this.painter.isHitTesting()||0!==this.style["textSize"]&&(this.style["textOpacity"]||this.style["textHaloRadius"]&&this.style["textHaloOpacity"])&&0!==this.style["textWrapWidth"]){var n=this._getRenderContainerPoints();if(jt(n)){var r=this.style,i=this.strokeAndFill,o=en(this.style["textName"],this.geometry.getProperties());this._dynamic&&delete this._textDesc;var a=this._textDesc=this._textDesc||nn(o,this.style);this._prepareContext(t),this.prepareCanvas(t,i,e),ur.prepareCanvasFont(t,r);for(var s=0,u=n.length;s<u;s++){var c=n[s],l=this.getRotation()?this._rotate(t,c,this._getRotationAt(s)):null;l&&(c=l),ur.text(t,o,c,r,a),l&&t.restore()}}}},n.getPlacement=function(){return this.symbol["textPlacement"]},n.getRotation=function(){var t=this.style["textRotation"];return w(t)?-t*Math.PI/180:null},n.getDxDy=function(){var t=this.style;return new yt(t["textDx"],t["textDy"])},n.getFixedExtent=function(){var t=this.geometry.getTextDesc();return Array.isArray(t)&&(t=t[this._index]),this._fixedExtent=this._fixedExtent||new Hr,t?Ji(this._fixedExtent,this.style,t):this._fixedExtent},n.translate=function(){var t=this.symbol,e={textName:t["textName"],textFaceName:Tt(t["textFaceName"],"monospace"),textWeight:Tt(t["textWeight"],"normal"),textStyle:Tt(t["textStyle"],"normal"),textSize:Tt(t["textSize"],y),textFont:Tt(t["textFont"],null),textFill:Tt(t["textFill"],"#000"),textOpacity:Tt(t["textOpacity"],1),textHaloFill:Tt(t["textHaloFill"],"#ffffff"),textHaloRadius:Tt(t["textHaloRadius"],0),textHaloOpacity:Tt(t["textHaloOpacity"],1),textWrapWidth:Tt(t["textWrapWidth"],null),textWrapCharacter:Tt(t["textWrapCharacter"],"\n"),textLineSpacing:Tt(t["textLineSpacing"],0),textDx:Tt(t["textDx"],0),textDy:Tt(t["textDy"],0),textHorizontalAlignment:Tt(t["textHorizontalAlignment"],"middle"),textVerticalAlignment:Tt(t["textVerticalAlignment"],"middle"),textAlign:Tt(t["textAlign"],"center"),textRotation:Tt(t["textRotation"],0),textMaxWidth:Tt(t["textMaxWidth"],0),textMaxHeight:Tt(t["textMaxHeight"],0)};return e["textMaxWidth"]>0&&(!e["textWrapWidth"]||e["textWrapWidth"]>e["textMaxWidth"])&&(e["textWrapWidth"]||(e["textMaxHeight"]=1),e["textWrapWidth"]=e["textMaxWidth"]),e},n.translateLineAndFill=function(t){return{lineColor:t["textHaloRadius"]?t["textHaloFill"]:t["textFill"],lineWidth:t["textHaloRadius"],lineOpacity:t["textOpacity"],lineDasharray:null,lineCap:"butt",lineJoin:"round",polygonFill:t["textFill"],polygonOpacity:t["textOpacity"]}},e}(Ao),No=[],Do=function(t){function e(e,n,r){var i;i=t.call(this,e,n,r)||this;var o=i.translate();return i._dynamic=me(o),i.style=i._defineStyle(o),i.strokeAndFill=i._defineStyle(xo(i.style)),i.padding=0,i}pt(e,t),e.test=function(t){return io(t)};var n=e.prototype;return n.symbolize=function(t,e){var n=this.style;if(this.painter.isHitTesting()||0!==n["markerWidth"]&&0!==n["markerHeight"]&&(0!==n["polygonOpacity"]||0!==n["lineOpacity"])){var r=this._getRenderContainerPoints();jt(r)&&(this._prepareContext(t),this.getPainter().isSpriting()||this.geometry.getLayer().getMask()===this.geometry||this._dynamic||!1===this.geometry.getLayer().options["cacheVectorOnCanvas"]?this._drawMarkers(t,r,e):this._drawMarkersWithCache(t,r,e))}},n._drawMarkers=function(t,e,n){for(var r=e.length-1;r>=0;r--){var i=e[r],o=this.getRotation()?this._rotate(t,i,this._getRotationAt(r)):null;o&&(i=o),this._drawVectorMarker(t,i,n),o&&t.restore()}},n._drawMarkersWithCache=function(t,e,n){var r=this._stampSymbol(),i=n.getImage(r);i||(i=this._createMarkerImage(t,n),n.addResource([r,i.width,i.height],i));for(var o=Yi(this.style,i.width,i.height),a=e.length-1;a>=0;a--){var s=e[a],u=this.getRotation()?this._rotate(t,s,this._getRotationAt(a)):null;u&&(s=u),ur.image(t,i,s.x+o.x,s.y+o.y),u&&t.restore()}},n._createMarkerImage=function(t,e){var n=t.canvas.constructor,r=Xi(No,this.style),i=ur.createCanvas(r[0],r[1],n),o=this._getCacheImageAnchor(r[0],r[1]),a=i.getContext("2d");return this._drawVectorMarker(a,o,e),i},n._stampSymbol=function(){return this._stamp||(this._stamp=un([this.style["markerType"],cn(this.style["markerFill"])?ln(this.style["markerFill"]):this.style["markerFill"],this.style["markerFillOpacity"],this.style["markerFillPatternFile"],cn(this.style["markerLineColor"])?ln(this.style["markerLineColor"]):this.style["markerLineColor"],this.style["markerLineWidth"],this.style["markerLineOpacity"],this.style["markerLineDasharray"]?this.style["markerLineDasharray"].join(","):"",this.style["markerLinePatternFile"],this.style["markerWidth"],this.style["markerHeight"],this.style["markerHorizontalAlignment"],this.style["markerVerticalAlignment"]].join("_"))),this._stamp},n._getCacheImageAnchor=function(t,e){var n=2*(this.symbol["shadowBlur"]||0),r=n+this.padding,i=this.style["markerType"];return"bar"===i||"pie"===i||"pin"===i?new yt(t/2,e-r):"rectangle"===i?new yt(r,r):new yt(t/2,e/2)},n._getGraidentExtent=function(t){var e=new Hr,n=this.getDxDy(),r=this.getFixedExtent();if(Array.isArray(t))for(var i=t.length-1;i>=0;i--)e._combine(t[i]);else e._combine(t);return e["xmin"]+=r["xmin"]-n.x,e["ymin"]+=r["ymin"]-n.y,e["xmax"]+=r["xmax"]-n.x,e["ymax"]+=r["ymax"]-n.y,e},n._drawVectorMarker=function(t,e,n){_o(t,e,this.style,n)},n.getFixedExtent=function(){var t=this.isDynamicSize(),e=this.style.markerWidth,n=this.style.markerHeight;return this._fixedExtent=this._fixedExtent||new Hr,Hi(this._fixedExtent,this.style,t?[128,128*(0===e?1:n/e)]:null)},n.translate=function(){var t=this.symbol,e={markerType:Tt(t["markerType"],"ellipse"),markerFill:Tt(t["markerFill"],"#00f"),markerFillOpacity:Tt(t["markerFillOpacity"],1),markerFillPatternFile:Tt(t["markerFillPatternFile"],null),markerLineColor:Tt(t["markerLineColor"],"#000"),markerLineWidth:Tt(t["markerLineWidth"],Fi.markerLineWidth),markerLineOpacity:Tt(t["markerLineOpacity"],1),markerLineDasharray:Tt(t["markerLineDasharray"],[]),markerLinePatternFile:Tt(t["markerLinePatternFile"],null),markerDx:Tt(t["markerDx"],0),markerDy:Tt(t["markerDy"],0),markerWidth:Tt(t["markerWidth"],Fi.markerWidth),markerHeight:Tt(t["markerHeight"],Fi.markerHeight),markerRotation:Tt(t["markerRotation"],0),shadowBlur:Tt(t["shadowBlur"],0),shadowOffsetX:Tt(t["shadowOffsetX"],0),shadowOffsetY:Tt(t["shadowOffsetY"],0)},n=e["markerType"],r=Gi(n),i=Wi(n);return e["markerHorizontalAlignment"]=Tt(t["markerHorizontalAlignment"],r),e["markerVerticalAlignment"]=Tt(t["markerVerticalAlignment"],i),w(t["markerOpacity"])&&(w(t["markerFillOpacity"])&&(e["markerFillOpacity"]*=t["markerOpacity"]),w(t["markerLineOpacity"])&&(e["markerLineOpacity"]*=t["markerOpacity"])),e},e}(Ao),Fo=function(t){function e(e,n,r){var i;x(e["markerWidth"])&&(e["markerWidth"]=80),x(e["markerHeight"])&&(e["markerHeight"]=80),i=t.call(this,e,n,r)||this,e=b(e,i.translate());var o=i.style=i._defineStyle(e);return ht.gecko?i._url=[Ue(o,o["markerWidth"],o["markerHeight"]),o["markerWidth"],o["markerHeight"]]:i._url=[Ue(o),o["markerWidth"],o["markerHeight"]],i}pt(e,t),e.test=function(t){return oo(t)};var n=e.prototype;return n._prepareContext=function(){},n._getImage=function(t){var e=this;if(t&&t.isResourceLoaded(this._url))return t.getImage(this._url);var n=this.painter,r=new Image;return r.onload=function(){var t=n.getLayer()&&n.getLayer().getRenderer();t&&t.setToRedraw()},r.onerror=function(n){n&&"undefined"!==typeof console&&console.warn(n),t.markErrorResource(e._url)},r.src=this._url[0],t&&t.addResource(this._url,r),r},e}(Po),Bo={lineWidth:1,polygonFill:"#fff",polygonOpacity:.5},zo=function(t){function e(e,n,r){var i;return i=t.call(this,e,n,r)||this,i.style=n.getLayer().options["drawAltitude"],i.style&&S(i.style)||(i.style={lineWidth:2}),i.style["lineWidth"]||(i.style["lineWidth"]=0),i.dxdy=i._defineStyle({dx:e["textDx"]||e["markerDx"],dy:e["textDy"]||e["markerDy"]}),i}pt(e,t),e.test=function(t,e){var n=e.getLayer();if(!n)return!1;var r=e.getJSONType();return"Marker"===r||"LineString"===r};var n=e.prototype;return n.symbolize=function(t){var e=this.geometry.getLayer();if(e.options["drawAltitude"]){var n=this.geometry.getProperties();if(n&&n[e.options["altitudeProperty"]]){var r=this._getStyle();if(this._prepareContext(t),"LineString"===this.geometry.type){var i=this._getPaintParams(r["lineDx"],r["lineDy"],!1,!0);if(!i)return;var o=this.getPainter().getPaintParams(r["lineDx"],r["lineDy"],!0,!0,"_groundpt")[0];this._drawLineAltitude(t,i[0],o)}else{var a=this._getRenderContainerPoints(),s=this._getRenderContainerPoints(!0);if(!a||0===a.length)return;this._drawMarkerAltitude(t,a[0],s[0])}}}},n.getDxDy=function(){var t=this.dxdy;return new yt(t["dx"]||0,t["dy"]||0)},n.get2DExtent=function(){return"LineString"===this.geometry.type?Io.prototype.get2DExtent.apply(this):t.prototype.get2DExtent.call(this)},n.getPlacement=function(){return"point"},n._getPaintParams=function(t,e){return this.getPainter().getPaintParams(t||0,e||0,null,!0,"_altpt")},n._drawMarkerAltitude=function(t,e,n){var r=this._getStyle();this.prepareCanvas(t,r),ur.path(t,[e,n],r["lineOpacity"],null,r["lineDasharray"])},n._drawLineAltitude=function(t,e,n){var r=this._getStyle(),i=e.length>0&&Array.isArray(e[0]);if(i)for(var o=0;o<e.length;o++)this._drawLine(t,e[o],n[o]);else this._drawLine(t,e,n);t.setLineDash&&Array.isArray(r["lineDasharray"])&&t.setLineDash([])},n._drawLine=function(t,e,n){var r=this._getStyle();this.prepareCanvas(t,r);for(var i=0,o=e.length-1;i<o;i++)ur.polygon(t,[e[i],e[i+1],n[i+1],n[i]],r["lineOpacity"],r["polygonOpacity"],r["lineDasharray"])},n._getStyle=function(){var t=this.geometry.getLayer().options["drawAltitude"];return S(t)||(t=Bo),t["lineWidth"]||(t["lineWidth"]=0,t["lineOpacity"]=0),t},e}(Ao),Uo=[zo,Io,Po,Fo,Do,Lo],Vo=new yt(0,0),Ho=new Hr,Go=new Hr,Wo=new Hr,Zo=new Hr,Yo=new Hr,Xo={},qo={minx:1/0,miny:1/0,maxx:-1/0,maxy:-1/0},Ko=function(t){function e(e){var n;return n=t.call(this)||this,n.geometry=e,n.symbolizers=n._createSymbolizers(),n._altAtGL=n._getGeometryAltitude(),n}pt(e,t);var n=e.prototype;return n.getMap=function(){return this.geometry.getMap()},n.getLayer=function(){return this.geometry.getLayer()},n._createSymbolizers=function(){var t=this.getSymbol(),e=[],n=Uo,r=t;Array.isArray(t)||(r=[t]);for(var i=r.length-1;i>=0;i--)for(var o=r[i],a=n.length-1;a>=0;a--)if(n[a].test(o,this.geometry)){var s=new n[a](o,this.geometry,this);s._index=i,e.push(s),s instanceof Ao&&(this._hasPoint=!0)}if(!e.length&&console){var u=this.geometry.getId();console.warn("invalid symbol for geometry("+(this.geometry?this.geometry.getType()+(u?":"+u:""):"")+") to draw : "+JSON.stringify(t))}return this._debugSymbolizer=new ko(t,this.geometry,this),e},n.hasPoint=function(){return!!this._hasPoint},n.getRenderPoints=function(t){return this._verifyProjection(),this._renderPoints||(this._renderPoints={}),t||(t="center"),this._renderPoints[t]||(this._renderPoints[t]=this.geometry._getRenderPoints(t)),this._renderPoints[t]},n.getPaintParams=function(t,e,n,r,i){void 0===i&&(i="_pt");var o,a,s,u,c,l=this.getLayer()._getRenderer(),f=l.mapStateCache,h=this.getMap();f&&!this._hitPoint?(o=f.resolution,a=f.pitch,s=f.bearing,u=f.glScale,c=f.containerExtent):(o=h.getResolution(),a=h.getPitch(),s=h.getBearing(),u=h.getGLScale(),c=h.getContainerExtent());var p=this.geometry,d=o,v=0!==a,g=0!==s,m=this._cachedParams,y=p._paintAsPath&&p._paintAsPath();if(y&&this._unsimpledParams&&d<=this._unsimpledParams._res)m=this._unsimpledParams;else if(!m||m._res!==o||this._pitched!==v&&p._redrawWhenPitch()||this._rotated!==g&&p._redrawWhenRotate()){if(m=p._getPaintParams(),!m)return null;m._res=d,!p._simplified&&y&&(this._unsimpledParams||(this._unsimpledParams=m),d>this._unsimpledParams._res&&(this._unsimpledParams._res=d)),this._cachedParams=m}if(!m)return null;this._pitched=v,this._rotated=g;var _=u,b=[],x=m[0],E=c,S=this._pointContainerPoints(x,t,e,n,r||this._hitPoint&&!E.contains(this._hitPoint),null,i);if(!S)return null;b.push(S);for(var O=1,C=m.length;O<C;O++)w(m[O])||m[O]instanceof We?w(m[O])?b.push(m[O]/_):b.push(m[O].multi(1/_)):b.push(m[O]);return b},n._pointContainerPoints=function(t,e,n,r,i,o,a){if(void 0===a&&(a="_pt"),this._aboveCamera())return null;var s,u,c,l=this.getLayer()._getRenderer(),f=l.mapStateCache,h=this.getMap(),p=this.geometry,d=this.containerOffset;f?(s=f.glRes,u=f.containerExtent):(s=h.getGLRes(),u=h.getContainerExtent());var v=this.getLayer().options["roundPoint"],g=1/0,m=1/0,y=-1/0,_=-1/0,b=!i,x=l.layer.options["clipBBoxBufferSize"]||3,E=this.symbolizers;function S(t,r){void 0===t&&(t=[]),void 0===r&&(r=[]);var i=Yt(t,a);i=h._pointsAtResToContainerPoints(t,s,r,i);for(var o=0,c=i.length;o<c;o++){var l=i[o];l._sub(d),(e||n)&&l._add(e||0,n||0),v&&(l.x=Math.ceil(l.x),l.y=Math.ceil(l.y)),g=Math.min(l.x,g),m=Math.min(l.y,m),y=Math.max(l.x,y),_=Math.max(l.y,_)}if(b&&_n(E)){if(Yo.ymin=u.ymin,Yo.ymin<x&&(Yo.ymin=u.ymin-x),Yo.xmin=u.xmin-x,Yo.xmax=u.xmax+x,Yo.ymax=u.ymax+x,p.getShell&&p.getHoles)return fo(i,Yo);var f=co(i,Yo,!1);if(f.length){var w=[];return f.forEach((function(t){for(var e=0,n=t.length;e<n;e++)w.push(t[e].point)})),w}}return i}var O=this.getAltitude();if(Array.isArray(t)){var C,T=this.geometry;!i&&T.options["enableClip"]?(C=this._clip(t,O),C.inView&&(b=!1)):C={points:t,altitude:O};var A=C.points;O=C.altitude,r&&(O=0);var k=O;c=[];for(var M=[],P=w(O),R=0,j=A.length;R<j;R++){var I=A[R];if(Array.isArray(I)){if(P){var L=S(I,O);c.push(L);continue}for(var N=[],D=0,F=I.length;D<F;D++)Array.isArray(O)&&(k=O[R]?O[R][D]:0),N.push(k);var B=S(I,N);c.push(B)}else Array.isArray(O)&&(k="vertex-last"===o?O[O.length-1-R]:"line"===o?(O[R]+O[R+1])/2:O[R]),M.push(k)}M.length&&(c=S(A,M))}else t instanceof yt&&(r&&(O=0),c=h._pointAtResToContainerPoint(t,s,O)._sub(d),(e||n)&&c._add(e,n));return qo.minx=g,qo.miny=m,qo.maxx=y,qo.maxy=_,this._containerBbox=qo,c},n._clip=function(t,e){if(w(e)&&0!==e)return{points:t,altitude:e};if(Array.isArray(e)){for(var n=!1,r=0,i=e.length;r<i;r++)if(0!==e[r]){n=!0;break}if(n)return{points:t,altitude:e}}var o=this.getMap(),a=this.geometry,s=this.getSymbol()["lineWidth"];w(s)||(s=4);var u,c,l,f=this.getLayer()._getRenderer(),h=f.mapStateCache;h?(u=h._2DExtent,c=h.glExtent,l=h.pitch):(u=o._get2DExtent(),c=o._get2DExtentAtRes(o.getGLRes()),l=o.getPitch());var p=u._expand(s);if(l>0&&e){var d=o.cameraLookAt,v=o.cameraPosition;Vo.set(v.x,v.y),p=p._combine(Vo._add(At(d[0]-v[0]),At(d[1]-v[1])))}var g=this.get2DExtent(null,Zo),m=t;if(g.within(p))return{points:m,altitude:e,inView:!0};var y=c._expand(s*o._glScale);Wo.xmin=y.xmin,Wo.xmax=y.xmax,Wo.ymin=y.ymin,Wo.ymax=y.ymax;var _=a.options["smoothness"];if(a.getShell&&this.geometry.getHoles&&!_){var b=y.xmin,x=y.ymin,E=y.xmax,S=y.ymax,O=Math.abs(E-b),C=Math.abs(S-x),T=Math.sqrt(O*O+C*C),A=(T-O)/2,k=(T-C)/2;if(Wo.xmin=y.xmin-A,Wo.xmax=y.xmax+A,Wo.ymin=y.ymin-k,Wo.ymax=y.ymax+k,Array.isArray(t[0])){m=[];for(var M=0;M<t.length;M++){var P=fo(t[M],Wo);P.length&&m.push(P)}}else m=fo(t,Wo)}else if("LineString"===a.getJSONType()&&!_){if(Array.isArray(t[0])){m=[];for(var R=0;R<t.length;R++)St(m,co(t[R],Wo,!1,!!_))}else m=co(t,Wo,!1,!!_);return this._interpolateSegAlt(m,t,e)}return{points:m,altitude:e}},n._interpolateSegAlt=function(t,e,n){if(!Array.isArray(n)){var r=function(t){return t.point};return{points:t.map((function(t){return Array.isArray(t)?t.map(r):t.point})),altitude:n}}var i=Qo(t,e,n);n=[];var o=i.map((function(t){if(Array.isArray(t)){var e=[],r=t.map((function(t){return e.push(t.altitude),t.point}));return n.push(e),r}return n.push(t.altitude),t.point}));return{points:o,altitude:n}},n.getSymbol=function(){return this.geometry._getInternalSymbol()},n.paint=function(t,e,n){if(this.symbolizers){var r=this.getLayer(),i=r._getRenderer();if(i&&(i.context||e)){var o=i.mapStateCache||{};if(this.geometry._isCheck||!t||t.intersects(this.get2DExtent(i.resources,Ho))){var a=this.getMap(),s=this.getMinAltitude(),u=a.getFrustumAltitude();if(!(s&&u&&u<s)){this.containerOffset=n||o.offset||a._pointToContainerPoint(i.southWest)._add(0,-a.height),this._beforePaint();for(var c=e||i.context,l=[c,i.resources],f=this.symbolizers.length-1;f>=0;f--)(c.shadowBlur||this.symbolizers[f].symbol["shadowBlur"])&&this._prepareShadow(c,this.symbolizers[f].symbol),this.symbolizers[f].symbolize.apply(this.symbolizers[f],l);this._afterPaint(),this._painted=!0,(this.geometry.options["debug"]||r.options["debug"])&&this._debugSymbolizer.symbolize.apply(this._debugSymbolizer,l)}}}}},n.getSprite=function(t,e){if("Point"!==this.geometry.type)return null;if(this._spriting=!0,!this._sprite&&this.symbolizers.length>0){var n=new Hr;this.symbolizers.forEach((function(e){var r=e.getFixedExtent(t);n._combine(r)}));var r,i=n.getMin().multi(-1),o=e||(this.getMap()?this.getMap().CanvasClass:null),a=ur.createCanvas(n.getWidth(),n.getHeight(),o);this._renderPoints&&(r=this._renderPoints);for(var s=a.getContext("2d"),u=[s,t],c=this.symbolizers.length-1;c>=0;c--){var l=this.symbolizers[c].getDxDy();this._renderPoints={center:[[i.add(l)]]},this._prepareShadow(s,this.symbolizers[c].symbol),this.symbolizers[c].symbolize.apply(this.symbolizers[c],u)}r&&(this._renderPoints=r),this._sprite={canvas:a,offset:n.getCenter()}}return this._spriting=!1,this._sprite},n.isSpriting=function(){return!!this._spriting},n.hitTest=function(t,e){if((!e||e<.5)&&(e=.5),this._hitPoint=t.sub(e,e),!Eo){var n=this.getMap()?this.getMap().CanvasClass:null;Eo=ur.createCanvas(1,1,n)}ur.setHitTesting(!0),Eo.width=Eo.height=2*e;var r=ur.getCanvas2DContext(Eo);try{this.paint(null,r,this._hitPoint)}catch(cf){throw cf}finally{ur.setHitTesting(!1)}delete this._hitPoint;for(var i=r.getImageData(0,0,Eo.width,Eo.height).data,o=3,a=i.length;o<a;o+=4)if(i[o]>0)return!0;return!1},n.isHitTesting=function(){return!!this._hitPoint},n._prepareShadow=function(t,e){e["shadowBlur"]?(t.shadowBlur=this.isHitTesting()?0:e["shadowBlur"],t.shadowColor=e["shadowColor"]||"#000",t.shadowOffsetX=e["shadowOffsetX"]||0,t.shadowOffsetY=e["shadowOffsetY"]||0):t.shadowBlur&&(t.shadowBlur=null,t.shadowColor=null,t.shadowOffsetX=null,t.shadowOffsetY=null)},n._eachSymbolizer=function(t,e){if(this.symbolizers){e||(e=this);for(var n=this.symbolizers.length-1;n>=0;n--)t.apply(e,[this.symbolizers[n]])}},n.get2DExtent=function(t,e){this._verifyProjection();var n=this.getMap();t=t||this.getLayer()._getRenderer().resources;var r=n.getZoom(),i=this._isDynamicSize();if(this._extent2D&&this._extent2D._zoom===r&&this._fixedExtent||(this._extent2D&&this._extent2D._zoom!==r&&delete this._extent2D,this.symbolizers&&(this._extent2D||(this._extent2D=this._computeExtent2D(new Hr),this._extent2D._zoom=r),this._fixedExtent||(this._fixedExtent=this._computeFixedExtent(t,new Hr)))),!this._extent2D)return i&&delete this._fixedExtent,null;var o=this._fixedExtent,a=o.xmin,s=o.ymin,u=o.xmax,c=o.ymax;return i&&delete this._fixedExtent,Go.set(a,-c,u,-s),e?(e.set(this._extent2D["xmin"],this._extent2D["ymin"],this._extent2D["xmax"],this._extent2D["ymax"]),e._add(Go),e):this._extent2D.add(Go)},n._computeExtent2D=function(t){for(var e=this.symbolizers.length-1;e>=0;e--){var n=this.symbolizers[e];t._combine(n.get2DExtent())}return t},n._computeFixedExtent=function(t,e){for(var n=this.symbolizers.length-1;n>=0;n--){var r=this.symbolizers[n];r.getFixedExtent&&e._combine(r.getFixedExtent(t))}return e},n._isDynamicSize=function(){for(var t=this.symbolizers.length-1;t>=0;t--){var e=this.symbolizers[t];if(e.isDynamicSize())return!0}return!1},n._aboveCamera=function(){var t=this.getMinAltitude(),e=this.getMap(),n=e.getFrustumAltitude();return t&&n&&n<t},n.getFixedExtent=function(){var t=this.getMap(),e=t.getZoom();return this._isDynamicSize()?this._computeFixedExtent(null,new Hr):(this._extent2D&&this._extent2D._zoom===e||this.get2DExtent(null,Go),this._fixedExtent)},n.setZIndex=function(t){this._eachSymbolizer((function(e){e.setZIndex(t)}))},n.show=function(){if(this._painted)this.removeCache(),this._eachSymbolizer((function(t){t.show()}));else{var t=this.getLayer();t.isCanvasRender()||this.paint()}},n.hide=function(){this._eachSymbolizer((function(t){t.hide()}))},n.repaint=function(){this._altAtGL=this._getGeometryAltitude(),this.removeCache();var t=this.getLayer();if(t){var e=t.getRenderer();e&&e.setToRedraw()&&e.setToRedraw()}},n.refreshSymbol=function(){this.removeCache(),this._removeSymbolizers(),this.symbolizers=this._createSymbolizers()},n.remove=function(){this.removeCache(),this._removeSymbolizers()},n._removeSymbolizers=function(){this._eachSymbolizer((function(t){delete t.painter,t.remove()})),delete this.symbolizers},n.removeCache=function(){delete this._renderPoints,delete this._paintParams,delete this._sprite,delete this._extent2D,delete this._fixedExtent,delete this._cachedParams,delete this._unsimpledParams},n.getAltitude=function(){var t=this.geometry.getAltitude();return t!==this._propAlt&&(this._altAtGL=this._getGeometryAltitude()),this._altAtGL?this._altAtGL:0},n.getMinAltitude=function(){return this.minAltitude?this.minAltitude:0},n.getMaxAltitude=function(){return this.maxAltitude?this.maxAltitude:0},n._getGeometryAltitude=function(){var t=this,e=this.getMap();if(!e)return 0;var n=this.geometry.getAltitude();if(this._propAlt=n,!n)return this.minAltitude=this.maxAltitude=0,0;var r=this.geometry.getCenter();return r?Array.isArray(n)?(this.minAltitude=Number.MAX_VALUE,this.maxAltitude=Number.MIN_VALUE,n.map((function(e){var n=t._meterToPoint(r,e);return n<t.minAltitude&&(t.minAltitude=n),n>t.maxAltitude&&(t.maxAltitude=n),n}))):(this.minAltitude=this.maxAltitude=this._meterToPoint(r,n),this.minAltitude):0},n._meterToPoint=function(t,e){var n=this.getMap(),r=n.getGLRes();return n.altitudeToPoint(e,r)*At(e)},n._verifyProjection=function(){var t=this.geometry._getProjection()||Xo;this._projCode&&this._projCode!==t.code&&this.removeCache(),this._projCode=t.code},n._beforePaint=function(){},n._afterPaint=function(){},e}(yr);function Qo(t,e,n){if(!Array.isArray(n))return t;for(var r=[],i=0,o=t.length;i<o;i++)if(Array.isArray(t[i]))r.push(Qo(t[i],e,n));else{var a=t[i];if(a.point.equals(e[a.index]))a.altitude=n[a.index],r.push(a);else{var s=void 0,u=void 0;0===a.index?(s=a.index,u=a.index+1):(s=a.index-1,u=a.index);var c=a.point.distanceTo(e[u]),l=c/(c+e[s].distanceTo(a.point)),f=Mt(n[s],n[u],1-l);a.altitude=f,r.push(a)}}return r}var $o=new Hr,Jo=function(t){function e(e,n){var r;return r=t.call(this)||this,r.geometry=e,r.isMask=n,r}pt(e,t);var n=e.prototype;return n._eachPainter=function(t){for(var e,n=this.geometry.getGeometries(),r=0,i=n.length;r<i;r++)if(e=this.isMask?n[r]._getMaskPainter():n[r]._getPainter(),e&&e&&!1===t.call(this,e))break},n.paint=function(t){this.geometry&&this._eachPainter((function(e){e.paint(t)}))},n.get2DExtent=function(t,e){e&&e.set(null,null,null,null);var n=e||new Hr;return this._eachPainter((function(e){n=n._combine(e.get2DExtent(t,$o))})),n},n.remove=function(){var t=arguments;this._eachPainter((function(e){e.remove.apply(e,t)}))},n.setZIndex=function(){var t=arguments;this._eachPainter((function(e){e.setZIndex.apply(e,t)}))},n.show=function(){var t=arguments;this._eachPainter((function(e){e.show.apply(e,t)}))},n.hide=function(){var t=arguments;this._eachPainter((function(e){e.hide.apply(e,t)}))},n.repaint=function(){var t=arguments;this._eachPainter((function(e){e.repaint.apply(e,t)}))},n.refreshSymbol=function(){var t=arguments;this._eachPainter((function(e){e.refreshSymbol.apply(e,t)}))},n.hasPoint=function(){var t=!1;return this._eachPainter((function(e){return!e.hasPoint()||(t=!0,!1)})),t},n.getMinAltitude=function(){var t=!0,e=0;return this._eachPainter((function(n){var r=n.getMinAltitude();(t||r<e)&&(t=!1,e=r)})),e},n.getMaxAltitude=function(){var t=0;return this._eachPainter((function(e){var n=e.getMaxAltitude();n>t&&(t=n)})),t},e}(yr),ta=23,ea={"EPSG:3857":{projection:"EPSG:3857",resolutions:function(){for(var t=[],e=12756274*Math.PI,n=0;n<ta;n++)t[n]=e/(256*Math.pow(2,n));return t}(),fullExtent:{top:6378137*Math.PI,left:-6378137*Math.PI,bottom:-6378137*Math.PI,right:6378137*Math.PI}},"EPSG:4326":{projection:"EPSG:4326",fullExtent:{top:90,left:-180,bottom:-90,right:180},resolutions:function(){for(var t=[],e=0;e<ta;e++)t[e]=180/(128*Math.pow(2,e));return t}()},BAIDU:{projection:"baidu",resolutions:function(){for(var t=Math.pow(2,18),e=[],n=0;n<ta;n++)e[n]=t,t*=.5;return e}(),fullExtent:{top:33554432,left:-33554432,bottom:-33554432,right:33554432}},IDENTITY:{projection:"identity",resolutions:function(){for(var t=Math.pow(2,8),e=[],n=0;n<ta;n++)e[n]=t,t*=.5;return e}(),fullExtent:{top:2e5,left:-2e5,bottom:-2e5,right:2e5}},"PRESET-VT-3857":{projection:"EPSG:3857",resolutions:function(){for(var t=[],e=6378137*Math.PI,n=0;n<ta;n++)t[n]=e/(256*Math.pow(2,n));return t}(),fullExtent:{top:6378137*Math.PI,left:-6378137*Math.PI,bottom:-6378137*Math.PI,right:6378137*Math.PI}}};ea["EPSG:4490"]=ea["EPSG:4326"];var na=function(){function t(t){void 0===t&&(t={}),this.options=t,this._initSpatialRef()}t.getPreset=function(t){return ea[t.toUpperCase()]},t.getAllPresets=function(){return Object.keys(ea)},t.getProjectionInstance=function(t){if(!t)return null;if(S(t))return t.locate||(t=b({},t),"identity"===t.measure?b(t,ri.getInstance("IDENTITY")):b(t,ri.getInstance("EPSG:4326"))),t;for(var e in t=(t+"").toLowerCase(),fi)if(A(fi,e)){var n=fi[e]["code"];if(n&&n.toLowerCase()===t)return fi[e]}return null},t.equals=function(t,e){if(O(t)||O(e))return t===e;if(!t&&!e)return!0;if(!t||!e)return!1;if(t.projection!==e.projection)return!1;var n=t.fullExtent,r=e.fullExtent;if(n&&!r||!n&&r)return!1;if(n&&r&&(n.top!==r.top||n.bottom!==r.bottom||n.left!==r.left||n.right!==r.right))return!1;var i=t.resolutions,o=e.resolutions;if(i&&o){if(i.length!==o.length)return!1;for(var a=0;a<i.length;a++)if(i[a]!==o[a])return!1}else if(i||o)return!1;return!0};var e=t.prototype;return e._initSpatialRef=function(){var e=this.options["projection"];if(e=e?t.getProjectionInstance(e):li,!e)throw new Error("must provide a valid projection in map's spatial reference.");e=b({},Wr,e),e.measureLength||b(e,ri.DEFAULT),this._projection=e;var n,r=this.options["resolutions"];if(!r&&(e["code"]&&(n=ea[e["code"].toUpperCase()],n&&(r=n["resolutions"],this.isEPSG="IDENTITY"!==e["code"])),!r))throw new Error("must provide valid resolutions in map's spatial reference.");if(this._resolutions=r,this._pyramid=!0,this._pyramid)for(var i=0;i<r.length;i++)if(r[i]&&r[i-1]&&r[i-1]/r[i]!==2){this._pyramid=!1;break}var o=this.options["fullExtent"];if(!o&&(e["code"]&&(n=ea[e["code"].toUpperCase()],n&&(o=n["fullExtent"])),!o))throw new Error("must provide a valid fullExtent in map's spatial reference.");if(x(o["left"])?(this._fullExtent=new Vr(o),o["left"]=o["xmin"],o["right"]=o["xmax"],o["top"]=o["ymax"],o["bottom"]=o["ymin"]):this._fullExtent=new Vr(new Ar(o["left"],o["top"]),new Ar(o["right"],o["bottom"])),x(o["top"])||x(o["bottom"])||x(o["left"])||x(o["right"]))throw new Error("must provide valid top/bottom/left/right in fullExtent.");b(this._fullExtent,o),this._projection.fullExtent=o;var a=o["right"]>=o["left"]?1:-1,s=o["top"]>=o["bottom"]?-1:1;this._transformation=new Gr([a,s,0,0])},e.getResolutions=function(){return this._resolutions||[]},e.getResolution=function(t){var e=0|t;e<0?e=0:e>this._resolutions.length-1&&(e=this._resolutions.length-1);var n=this._resolutions[e];if(e!==t&&t>0&&e<this._resolutions.length-1){var r=this._resolutions[e+1];return n+(r-n)*(t-e)}return n},e.getProjection=function(){return this._projection},e.getFullExtent=function(){return this._fullExtent},e.getTransformation=function(){return this._transformation},e.getMinZoom=function(){for(var t=0;t<this._resolutions.length;t++)if(!x(this._resolutions[t]))return t;return 0},e.getMaxZoom=function(){for(var t=this._resolutions.length-1;t>=0;t--)if(!x(this._resolutions[t]))return t;return this._resolutions.length-1},e.getZoomDirection=function(){return At(this._resolutions[this.getMinZoom()]-this._resolutions[this.getMaxZoom()])},e.toJSON=function(){return this.json||(this.json={resolutions:this._resolutions,fullExtent:{top:this._fullExtent.top,left:this._fullExtent.left,bottom:this._fullExtent.bottom,right:this._fullExtent.right},projection:this._projection.code}),this.json},e.isPyramid=function(){return this._pyramid},t}(),ra=new yt(0,0),ia=new Hr,oa={id:null,visible:!0,interactive:!0,editable:!0,cursor:null,antiMeridian:!1,defaultProjection:"EPSG:4326"},aa=function(t){function e(e){var n,r=b({},e),i=r["symbol"],o=r["properties"],a=r["id"];return delete r["symbol"],delete r["id"],delete r["properties"],n=t.call(this,r)||this,i?n.setSymbol(i):n._genSizeSymbol(),o&&n.setProperties(o),x(a)||n.setId(a),n}pt(e,t);var n=e.prototype;return n.getFirstCoordinate=function(){if("GeometryCollection"===this.type){var t=this.getGeometries();return t.length?t[0].getFirstCoordinate():null}var e=this.getCoordinates();if(!Array.isArray(e))return e;do{e=e[0]}while(Array.isArray(e)&&e.length>0);return e},n.getLastCoordinate=function(){if("GeometryCollection"===this.type){var t=this.getGeometries();return t.length?t[t.length-1].getLastCoordinate():null}var e=this.getCoordinates();if(!Array.isArray(e))return e;do{e=e[e.length-1]}while(Array.isArray(e)&&e.length>0);return e},n.addTo=function(t,e){return t.addGeometry(this,e),this},n.getLayer=function(){return this._layer?this._layer:null},n.getMap=function(){return this._layer?this._layer.getMap():null},n.getId=function(){return this._id},n.setId=function(t){var e=this.getId();return this._id=t,this._fireEvent("idchange",{old:e,new:t}),this},n.getProperties=function(){return this.properties?this.properties:this._getParent()?this._getParent().getProperties():null},n.setProperties=function(t){var e=this.properties;return this.properties=S(t)?b({},t):t,this._repaint(),this._fireEvent("propertieschange",{old:e,new:t}),this},n.getType=function(){return this.type},n.getSymbol=function(){var t=this._symbol;return t?Array.isArray(t)?pn(t):b({},t):null},n.setSymbol=function(t){return this._symbolUpdated=t,this._symbol=this._prepareSymbol(t),this.onSymbolChanged(),delete this._compiledSymbol,delete this._symbolHash,this},n.getSymbolHash=function(){return this._symbolHash||(this._symbolHash=fn(this._symbolUpdated)),this._symbolHash},n.updateSymbol=function(t){if(!t)return this;var e=this._getSymbol();if(Array.isArray(e)){if(!Array.isArray(t))throw new Error("Parameter of updateSymbol is not an array.");for(var n=0;n<t.length;n++)no(t[n])&&delete this._textDesc,e[n]&&t[n]&&(e[n]=pn(e[n],t[n]))}else{if(Array.isArray(t))throw new Error("Geometry's symbol is not an array to update.");no(e)&&delete this._textDesc,e=pn(e||this._getInternalSymbol(),t)}return this._eventSymbolProperties=t,delete this._compiledSymbol,this.setSymbol(e)},n.getTextContent=function(){var t=this._getInternalSymbol();if(Array.isArray(t)){for(var e=[],n=!1,r=0;r<t.length;r++)e[r]=en(t[r]&&t[r]["textName"],this.getProperties()),x(e[r])||(n=!0);return n?e:null}return en(t&&t["textName"],this.getProperties())},n.getTextDesc=function(){if(!this._textDesc){var t=this.getTextContent(),e=this._sizeSymbol,n=Array.isArray(t);Array.isArray(e)?this._textDesc=e.map((function(e,r){return nn(n?t[r]:"",e)})):this._textDesc=nn(t,e)}return this._textDesc},n.getCenter=function(){return this._computeCenter(this._getMeasurer())},n.getExtent=function(){var t=this._getPrjExtent(),e=this._getProjection();if(t&&e){var n=e.unproject(new Ar(t["xmin"],t["ymin"])),r=e.unproject(new Ar(t["xmax"],t["ymax"]));return new Vr(n,r,e)}return this._computeExtent(this._getMeasurer())},n.getContainerExtent=function(t){var e=this.get2DExtent();if(!e||!e.isValid())return null;var n=this.getMap(),r=n.getGLRes(),i=this.getMinAltitude(),o=n.altitudeToPoint(i,r)*At(i),a=e.convertTo((function(t){return n._pointAtResToContainerPoint(t,r,o,ra)}),t),s=this.getMaxAltitude();if(s!==i){s=n.altitudeToPoint(s,r)*At(s);var u=e.convertTo((function(t){return n._pointAtResToContainerPoint(t,r,s,ra)}),ia);a._combine(u)}var c=this.getLayer();if(c&&"LineString"===this.type&&s&&c.options["drawAltitude"]){var l=e.convertTo((function(t){return n._pointAtResToContainerPoint(t,r,0,ra)}),ia);a._combine(l)}a&&a._add(this._getFixedExtent());var f=this.options["smoothness"];return f&&a._expand(.15*a.getWidth()),a},n._getFixedExtent=function(){this._fixedExtent||(this._fixedExtent=new Hr);var t=this._sizeSymbol,e=(t&&t["lineWidth"]||1)/2;this._fixedExtent.set(-e,-e,e,e);var n=t&&t["lineDx"]||0;this._fixedExtent._add([n,0]);var r=t&&t["lineDy"]||0;return this._fixedExtent._add([0,r]),this._fixedExtent},n.get2DExtent=function(){var t=this.getMap();if(!t)return null;if(this._extent2d)return this._extent2d;var e=this._getPrjExtent();if(!e||!e.isValid())return null;var n=e.getMin(),r=e.getMax(),i=t.getGLRes();return t._prjToPointAtRes(n,i,n),t._prjToPointAtRes(r,i,r),this._extent2d=new Hr(n,r),this._extent2d.z=t.getZoom(),this._extent2d},n.getSize=function(){var t=this.getContainerExtent();return t?t.getSize():null},n.containsPoint=function(t,e){if(!this.getMap())throw new Error('The geometry is required to be added on a map to perform "containsPoint".');return t instanceof Ar&&(t=this.getMap().coordToContainerPoint(t)),this._containsPoint(t,e)},n._containsPoint=function(t,e){var n=this._getPainter();return!!n&&(e=e||0,this._hitTestTolerance&&(e+=this._hitTestTolerance()),n.hitTest(t,e))},n.show=function(){if(this.options["visible"]=!0,this.getMap()){var t=this._getPainter();t&&t.show(),this._fireEvent("show")}return this},n.hide=function(){if(this.options["visible"]=!1,this.getMap()){this.onHide();var t=this._getPainter();t&&t.hide(),this._fireEvent("hide")}return this},n.isVisible=function(){if(!this.options["visible"])return!1;var t=this._getInternalSymbol();if(!t)return!0;if(Array.isArray(t)){if(!t.length)return!0;for(var e=0,n=t.length;e<n;e++)if(x(t[e]["opacity"])||t[e]["opacity"]>0)return!0;return!1}return x(t["opacity"])||S(t["opacity"])||w(t["opacity"])&&t["opacity"]>0},n.getZIndex=function(){return this.options["zIndex"]||0},n.setZIndex=function(t){var e=this.options["zIndex"];return this.options["zIndex"]=t,this._fireEvent("zindexchange",{old:e,new:t}),this},n.setZIndexSilently=function(t){return this.options["zIndex"]=t,this},n.bringToFront=function(){var t=this.getLayer();if(!t||!t.getGeoMaxZIndex)return this;var e=t.getGeoMaxZIndex();return this.setZIndex(e+1),this},n.bringToBack=function(){var t=this.getLayer();if(!t||!t.getGeoMinZIndex)return this;var e=t.getGeoMinZIndex();return this.setZIndex(e-1),this},n.translate=function(t,e){if(x(t))return this;var n=new Ar(t,e);if(0===n.x&&0===n.y)return this;var r=this.getCoordinates();if(this._silence=!0,r)if(Array.isArray(r)){var i=Ct(r,(function(t){return t.add(n)}));this.setCoordinates(i)}else this.setCoordinates(r.add(n));return this._silence=!1,this._fireEvent("positionchange"),this},n.flash=function(t,e,n,r){return Zt.call(this,t,e,n,r)},n.copy=function(){var t=this.toJSON(),n=e.fromJSON(t);return n.options["visible"]=!0,n},n.remove=function(){var t=this.getLayer();return t?(this._fireEvent("removestart"),this._unbind(),this._fireEvent("removeend"),this._fireEvent("remove"),this):this},n.toGeoJSONGeometry=function(){var t=this._exportGeoJSONGeometry();return t},n.toGeoJSON=function(t){t||(t={});var e={type:"Feature",geometry:null};if(x(t["geometry"])||t["geometry"]){var n=this._exportGeoJSONGeometry();e["geometry"]=n}var r,i=this.getId();return x(i)||(e["id"]=i),(x(t["properties"])||t["properties"])&&(r=this._exportProperties()),e["properties"]=r,e},n.toJSON=function(t){t||(t={});var e=this._toJSON(t),n=this._exportGraphicOptions(t);return b(e,n),e},n.getLength=function(){return this._computeGeodesicLength(this._getMeasurer())},n.getArea=function(){return this._computeGeodesicArea(this._getMeasurer())},n.rotate=function(t,e){if("GeometryCollection"===this.type){var n=this.getGeometries();return n.forEach((function(n){return n.rotate(t,e)})),this}e=e?new Ar(e):this.getCenter();var r=this._getMeasurer(),i=this.getCoordinates();if(!Array.isArray(i)){if(e.x!==i.x||e.y!==i.y){var o=r._rotate(i,e,t);this.setCoordinates(o)}return this}return Ct(i,(function(n){return r._rotate(n,e,t)})),this.setCoordinates(i),this},n._getConnectPoints=function(){return[this.getCenter()]},n._initOptions=function(t){var e=b({},t),n=e["symbol"],r=e["properties"],i=e["id"];delete e["symbol"],delete e["id"],delete e["properties"],this.setOptions(e),n&&this.setSymbol(n),r&&this.setProperties(r),x(i)||this.setId(i)},n._bindLayer=function(t){if(this.getLayer())throw new Error("Geometry cannot be added to two or more layers at the same time.");this._layer=t,this._clearCache(),this._bindInfoWindow(),this._bindMenu()},n._prepareSymbol=function(t){if(Array.isArray(t)){for(var e=[],n=0;n<t.length;n++)e.push(He(this._checkAndCopySymbol(t[n])));return e}return t?(t=this._checkAndCopySymbol(t),He(t)):null},n._checkAndCopySymbol=function(t){var e={};for(var n in t)g[n]&&O(t[n])?e[n]=+t[n]:e[n]=t[n];return e},n._getSymbol=function(){return this._symbol},n._setExternSymbol=function(t){return this._eventSymbolProperties=t,this._symbol||delete this._textDesc,this._externSymbol=this._prepareSymbol(t),this.onSymbolChanged(),this},n._getInternalSymbol=function(){return this._symbol?this._symbol:this._externSymbol?this._externSymbol:this.options["symbol"]?this.options["symbol"]:null},n._getPrjExtent=function(){var t=this._getProjection();return this._verifyProjection(),!this._extent&&t&&(this._extent=this._computePrjExtent(t)),this._extent},n._unbind=function(){var t=this.getLayer();t&&(this._animPlayer&&this._animPlayer.finish(),this._unbindMenu(),this._unbindInfoWindow(),this.isEditing()&&this.endEdit(),this._removePainter(),this.onRemove&&this.onRemove(),t.onRemoveGeometry&&t.onRemoveGeometry(this),delete this._layer,delete this._internalId,delete this._extent)},n._getInternalId=function(){return this._internalId},n._setInternalId=function(t){this._internalId=t},n._getMeasurer=function(){return this._getProjection()?this._getProjection():na.getProjectionInstance(this.options["defaultProjection"])},n._getProjection=function(){var t=this.getMap();return t?t.getProjection():null},n._verifyProjection=function(){var t=this._getProjection();this._projCode&&t&&this._projCode!==t.code&&this._clearProjection(),this._projCode=t?t.code:this._projCode},n._getExternalResources=function(){var t=this._getInternalSymbol();return Ve(t)},n._getPainter=function(){var t=this.getLayer();if(!this._painter&&t)if(-1!==h.indexOf(this.type)){if(t.constructor.getCollectionPainterClass){var e=t.constructor.getCollectionPainterClass();e&&(this._painter=new e(this))}}else if(t.constructor.getPainterClass){var n=t.constructor.getPainterClass();n&&(this._painter=new n(this))}return this._painter},n._getMaskPainter=function(){return this._maskPainter||(this._maskPainter=this.getGeometries&&this.getGeometries()?new Jo(this,!0):new Ko(this)),this._maskPainter},n._removePainter=function(){this._painter&&this._painter.remove(),delete this._painter},n._paint=function(t){if(this._painter){if(this._dirtyCoords){delete this._dirtyCoords;var e=this._getProjection();e&&(this._pcenter=e.project(this._coordinates),this._clearCache())}this._painter.paint(t)}},n._clearCache=function(){delete this._extent,delete this._extent2d},n._clearProjection=function(){delete this._extent,delete this._extent2d},n._repaint=function(){this._painter&&this._painter.repaint()},n.onHide=function(){this.closeMenu(),this.closeInfoWindow()},n.onShapeChanged=function(){this._clearCache(),this._repaint(),this._fireEvent("shapechange")},n.onPositionChanged=function(){this._clearCache(),this._repaint(),this._fireEvent("positionchange")},n.onSymbolChanged=function(){this._painter&&this._painter.refreshSymbol();var t={};this._eventSymbolProperties?(t.properties=b({},this._eventSymbolProperties),delete this._eventSymbolProperties):delete this._textDesc,this._genSizeSymbol(),this._fireEvent("symbolchange",t)},n._genSizeSymbol=function(){var t=this._getInternalSymbol();if(t)if(Array.isArray(t)){this._sizeSymbol=[];for(var e=!1,n=0;n<t.length;n++){var r=this._sizeSymbol[n]=this._getSizeSymbol(t[n]);!e&&r&&r._dynamic&&(e=!0)}this._sizeSymbol._dynamic=e}else this._sizeSymbol=this._getSizeSymbol(t);else delete this._sizeSymbol},n._getSizeSymbol=function(t){var e=De({lineWidth:t["lineWidth"],lineDx:t["lineDx"],lineDy:t["lineDy"]},this);return(ge(t["lineWidth"])||ge(t["lineDx"])||ge(t["lineDy"]))&&(e._dynamic=!0),e},n._getCompiledSymbol=function(){return this._compiledSymbol||(this._compiledSymbol=De(this._getInternalSymbol(),this)),this._compiledSymbol},n.onConfig=function(t){var e;t["properties"]&&(e=t["properties"],delete t["properties"]);var n=!1;for(var r in t)if(t.hasOwnProperty(r)){var i=r.slice(0,5);if("arrow"===i||"smoot"===i){n=!0;break}}e?(this.setProperties(e),this._repaint()):n&&this._repaint()},n._setParent=function(t){t&&(this._parent=t)},n._getParent=function(){return this._parent},n._fireEvent=function(t,e){this._silence||(this.getLayer()&&this.getLayer()._onGeometryEvent&&(e||(e={}),e["type"]=t,e["target"]=this,this.getLayer()._onGeometryEvent(e)),this.fire(t,e))},n._toJSON=function(t){return{feature:this.toGeoJSON(t)}},n._exportGraphicOptions=function(t){var e={};return(x(t["options"])||t["options"])&&(e["options"]=this.config()),(x(t["symbol"])||t["symbol"])&&(e["symbol"]=this.getSymbol()),(x(t["infoWindow"])||t["infoWindow"])&&this._infoWinOptions&&(e["infoWindow"]=this._infoWinOptions),e},n._exportGeoJSONGeometry=function(){var t=this.getCoordinates(),e=Ar.toNumberArrays(t);return{type:this.getType(),coordinates:e}},n._exportProperties=function(){var t=null,e=this.getProperties();return x(e)||(t=S(e)?b({},e):e),t},n._hitTestTolerance=function(){var t=this.getLayer();return t&&t.options["geometryEventTolerance"]||0},n.getAltitude=function(){var t=this.getLayer();if(!t)return 0;var e=t.options,n=this.getProperties(),r=e["enableAltitude"]&&n?n[e["altitudeProperty"]]:0,i=t.getAltitude?t.getAltitude():0;return Array.isArray(r)?r.map((function(t){return t+i})):r+i},n._genMinMaxAlt=function(){var t=this,e=this.getAltitude();Array.isArray(e)?(this._minAlt=Number.MAX_VALUE,this._maxAlt=Number.MIN_VALUE,e.forEach((function(e){var n=e;n<t._minAlt&&(t._minAlt=n),n>t._maxAlt&&(t._maxAlt=n)}))):this._minAlt=this._maxAlt=e},n.getMinAltitude=function(){return void 0===this._minAlt&&this._genMinMaxAlt(),this._minAlt?this._minAlt:0},n.getMaxAltitude=function(){return void 0===this._maxAlt&&this._genMinMaxAlt(),this._maxAlt?this._maxAlt:0},e}(br(vr(Er(yr))));aa.mergeOptions(oa);var sa={attribution:null,minZoom:null,maxZoom:null,visible:!0,opacity:1,globalCompositeOperation:null,renderer:"canvas",debugOutline:"#0f0",cssFilter:null,forceRenderOnMoving:!1,forceRenderOnZooming:!1,forceRenderOnRotating:!1,collision:!1,collisionScope:"layer",hitDetect:function(){return!ht.mobile}()},ua=function(t){function e(e,n){var r,i;return n&&(i=n.canvas,delete n.canvas),r=t.call(this,n)||this,r._canvas=i,r.setId(e),n&&(r.setZIndex(n.zIndex),n.mask&&r.setMask(aa.fromJSON(n.mask))),r}pt(e,t);var n=e.prototype;return n.load=function(){if(!this.getMap())return this;if(this.onLoad()){this._initRenderer();var t=this.getZIndex();x(t)||(this._renderer.setZIndex(t),this.isCanvasRender()||this._renderer.render()),this.onLoadEnd()}return this},n.getId=function(){return this._id},n.setId=function(t){var e=this._id;return x(t)||(t+=""),this._id=t,this.fire("idchange",{old:e,new:t}),this},n.addTo=function(t){return t.addLayer(this),this},n.setZIndex=function(t){return this._zIndex=t,x(t)?delete this.options["zIndex"]:this.options.zIndex=t,this.map&&this.map._sortLayersByZIndex(),this._renderer&&this._renderer.setZIndex(t),this},n.getZIndex=function(){return this._zIndex||0},n.getMinZoom=function(){var t=this.getMap(),e=this.options["minZoom"];return t?Math.max(t.getMinZoom(),e||0):e},n.getMaxZoom=function(){var t=this.getMap(),e=this.options["maxZoom"];return t?Math.min(t.getMaxZoom(),x(e)?1/0:e):e},n.getOpacity=function(){return this.options["opacity"]},n.setOpacity=function(t){return this.config("opacity",t),this},n.isCanvasRender=function(){var t=this._getRenderer();return t&&t instanceof Ii},n.getMap=function(){return this.map?this.map:null},n.getProjection=function(){var t=this.getMap();return t?t.getProjection():null},n.bringToFront=function(){var t=this._getLayerList();if(!t.length)return this;var e=t[t.length-1];if(1===t.length||e===this)return this;var n=e.getZIndex();return this.setZIndex(n+1),this},n.bringToBack=function(){var t=this._getLayerList();if(!t.length)return this;var e=t[0];if(1===t.length||e===this)return this;var n=e.getZIndex();return this.setZIndex(n-1),this},n.show=function(){var t=this;if(!this.options["visible"]){this.options["visible"]=!0;var e=this.getRenderer();e&&e.show();var n=this.getMap();e&&n?n.once("renderend",(function(){t.fire("show")})):this.fire("show")}return this},n.hide=function(){var t=this;if(this.options["visible"]){this.options["visible"]=!1;var e=this.getRenderer();e&&e.hide();var n=this.getMap();e&&n?n.once("renderend",(function(){t.fire("hide")})):this.fire("hide")}return this},n.isVisible=function(){if(w(this.options["opacity"])&&this.options["opacity"]<=0)return!1;var t=this.getMap();if(t){var e=t.getZoom();if(!x(this.options["maxZoom"])&&this.options["maxZoom"]<e||!x(this.options["minZoom"])&&this.options["minZoom"]>e)return!1}return x(this.options["visible"])&&(this.options["visible"]=!0),this.options["visible"]},n.remove=function(){return this.map&&this.map.removeLayer(this),this},n.getMask=function(){return this._mask},n.setMask=function(t){if(!("Point"===t.type&&t._isVectorMarker()||"Polygon"===t.type||"MultiPolygon"===t.type))throw new Error("Mask for a layer must be a marker with vector marker symbol or a Polygon(MultiPolygon).");if(t._bindLayer(this),"Point"===t.type?t.updateSymbol({markerLineColor:"rgba(0, 0, 0, 0)",markerFillOpacity:0}):t.setSymbol({lineColor:"rgba(0, 0, 0, 0)",polygonOpacity:0}),this._mask=t,this.options.mask=t.toJSON(),!this.getMap()||this.getMap().isZooming())return this;var e=this._getRenderer();return e&&e.setToRedraw&&this._getRenderer().setToRedraw(),this},n.removeMask=function(){if(delete this._mask,delete this.options.mask,!this.getMap()||this.getMap().isZooming())return this;var t=this._getRenderer();return t&&t.setToRedraw&&this._getRenderer().setToRedraw(),this},n.onLoad=function(){return!0},n.onLoadEnd=function(){},n.isLoaded=function(){return!!this._loaded},n.getCollisionIndex=function(){if("layer"===this.options["collisionScope"])return this._collisionIndex||(this._collisionIndex=new wr),this._collisionIndex;var t=this.getMap();return t?t.getCollisionIndex():null},n.clearCollisionIndex=function(){return"layer"===this.options["collisionScope"]&&this._collisionIndex&&this._collisionIndex.clear(),this},n.getRenderer=function(){return this._getRenderer()},n.onConfig=function(t){if(w(t["opacity"])||t["cssFilter"]){var e=this.getRenderer();e&&e.setToRedraw()}},n.onAdd=function(){},n.onRendererCreate=function(){},n.onCanvasCreate=function(){},n.onRemove=function(){},n._bindMap=function(t,e){t&&(this.map=t,x(e)||this.setZIndex(e),this._switchEvents("on",this),this.onAdd(),this.fire("add"))},n._initRenderer=function(){var t=this.options["renderer"];if(this.constructor.getRendererClass){var e=this.constructor.getRendererClass(t);if(!e)throw new Error("Invalid renderer for Layer("+this.getId()+"):"+t);this._renderer=new e(this),this._renderer.layer=this,this._renderer.setZIndex(this.getZIndex()),this._switchEvents("on",this._renderer),this._renderer.onAdd&&this._renderer.onAdd(),this.onRendererCreate(),this.fire("renderercreate",{renderer:this._renderer})}},n._doRemove=function(){this._loaded=!1,this._switchEvents("off",this),this.onRemove(),this._renderer&&(this._switchEvents("off",this._renderer),this._renderer.remove(),delete this._renderer),delete this.map,delete this._collisionIndex},n._switchEvents=function(t,e){e&&e.getEvents&&this.getMap()&&this.getMap()[t](e.getEvents(),e)},n._getRenderer=function(){return this._renderer},n._getLayerList=function(){return this.map?this.map._layers:[]},n._getMask2DExtent=function(){if(!this._mask||!this.getMap())return null;var t=this._mask._getMaskPainter();return t?t.get2DExtent():null},e}(br(vr(hi(yr))));ua.mergeOptions(sa);var ca=ua.prototype.fire;ua.prototype.fire=function(t,e){return"layerload"===t&&(this._loaded=!0),this.map&&(e||(e={}),e["type"]=t,e["target"]=this,this.map._onLayerEvent(e)),ca.apply(this,arguments)};var la=new Ar(0,0),fa={maxVisualPitch:70,maxPitch:80,centerCross:!1,zoomInCenter:!1,zoomOrigin:null,zoomAnimation:function(){return!R}(),zoomAnimationDuration:330,panAnimation:function(){return!R}(),panAnimationDuration:600,rotateAnimation:function(){return!R}(),zoomable:!0,enableInfoWindow:!0,hitDetect:function(){return!ht.mobile}(),hitDetectLimit:5,fpsOnInteracting:25,layerCanvasLimitOnInteracting:-1,maxZoom:null,minZoom:null,maxExtent:null,fixCenterOnResize:!0,checkSize:!0,checkSizeInterval:1e3,renderer:"canvas",cascadePitches:[10,60],renderable:!0,clickTimeThreshold:280,stopRenderOnOffscreen:!0},ha=function(t){function e(n,r){var i;if(!r)throw new Error("Invalid options when creating map.");if(!r["center"])throw new Error("Invalid center when creating map.");var o=b({},r),a=o["zoom"];delete o["zoom"];var s=new Ar(o["center"]);delete o["center"];var u=o["baseLayer"];delete o["baseLayer"];var c=o["layers"];return delete o["layers"],i=t.call(this,o)||this,i.VERSION=e.VERSION,Object.defineProperty(dt(dt(i)),"id",{value:wt(),writable:!1}),i._loaded=!1,i._initContainer(n),i._panels={},i._baseLayer=null,i._layers=[],i._zoomLevel=a,i._center=s,i.setSpatialReference(o["spatialReference"]||o["view"]),i._mapViewPoint=new yt(0,0),i._initRenderer(),i._updateMapSize(i._getContainerDomSize()),u&&i.setBaseLayer(u),c&&i.addLayer(c),i.setMaxExtent(o["maxExtent"]),i._Load(),i}pt(e,t),e.addOnLoadHook=function(t){var e=Array.prototype.slice.call(arguments,1),n="function"===typeof t?t:function(){this[t].apply(this,e)};return this.prototype._onLoadHooks=this.prototype._onLoadHooks||[],this.prototype._onLoadHooks.push(n),this};var n=e.prototype;return n.isLoaded=function(){return!!this._loaded},n.getContainer=function(){return this._containerDOM},n.getSpatialReference=function(){return this._spatialReference},n.setSpatialReference=function(t){var e=this.options["spatialReference"];return this._loaded&&na.equals(e,t)||this._updateSpatialReference(t,e),this},n._updateSpatialReference=function(t,e){if(O(t)&&(t=na.getPreset(t)),t=b({},t),this._center=this.getCenter(),this.options["spatialReference"]=t,this._spatialReference=new na(t),this.options["spatialReference"]&&C(this.options["spatialReference"]["projection"])){var n=this._spatialReference.getProjection();this.options["spatialReference"]["projection"]=n["code"]}return this._resetMapStatus(),this._fireEvent("spatialreferencechange",{old:e,new:b({},this.options["spatialReference"])}),this},n.onConfig=function(t){var e=t["spatialReference"]||t["view"];return x(e)||this._updateSpatialReference(e,null),this},n.getProjection=function(){return this._spatialReference?this._spatialReference.getProjection():null},n.getFullExtent=function(){return this._spatialReference?this._spatialReference.getFullExtent():null},n.setCursor=function(t){return delete this._cursor,this._trySetCursor(t),this._cursor=t,this},n.resetCursor=function(){return this.setCursor(null)},n.getCenter=function(){if(!this._loaded||!this._prjCenter)return this._center;var t=this.getProjection();return t.unproject(this._prjCenter)},n.setCenter=function(t){if(!t)return this;t=new Ar(t);var e=this.getProjection(),n=e.project(t);return this._verifyExtent(n)?this._loaded?(this.onMoveStart(),this._setPrjCenter(n),this.onMoveEnd(this._parseEventFromCoord(this.getCenter())),this):(this._center=t,this):this},n.getSize=function(){return x(this.width)||x(this.height)?this._getContainerDomSize():new We(this.width,this.height)},n.getContainerExtent=function(){var t=this.height,e=this.getPitch(),n=this.options["maxVisualPitch"];return n&&e>n&&(t=this._getVisualHeight(n)),new Hr(0,this.height-t,this.width,this.height)},n._getVisualHeight=function(t){t=t||.01;var e=(90-this.getPitch())*Math.PI/180,n=this.getFov()*Math.PI/180;t*=Math.PI/180;var r=this.cameraCenterDistance/this.getGLScale(),i=Math.tan(n/2),o=Math.tan(t),a=r*i/(1/o-i)/Math.sin(t),s=r*(Math.sin(e)*a/(r+Math.cos(e)*a));return this.height/2+s},n.getExtent=function(){return this._pointToExtent(this._get2DExtent())},n.getProjExtent=function(){var t=this._get2DExtent();return new Vr(this._pointToPrj(t.getMin()),this._pointToPrj(t.getMax()))},n.getPrjExtent=function(){return this.getProjExtent()},n.getMaxExtent=function(){return this.options["maxExtent"]?new Vr(this.options["maxExtent"],this.getProjection()):null},n.setMaxExtent=function(t){if(t){var e=new Vr(t,this.getProjection());this.options["maxExtent"]=e;var n=this.getProjection();this._prjMaxExtent=e.convertTo((function(t){return n.project(t)})),this._verifyExtent(this._getPrjCenter())||(this._loaded?this._panTo(this._prjMaxExtent.getCenter()):this._center=n.unproject(this._prjMaxExtent.getCenter()))}else delete this.options["maxExtent"],delete this._prjMaxExtent;return this},n.getZoom=function(){return this._zoomLevel},n.getZoomForScale=function(t,e,n){var r=this.getZoom();if(x(e)&&(e=r),1===t&&e===r)return r;var i=this._getResolution(e),o=i/t,a=this.getZoomFromRes(o);if(n)return a;var s=1e-6;return this.getSpatialReference().getZoomDirection()<0?Math.ceil(a-s):Math.floor(a+s)},n.getZoomFromRes=function(t){var e=this._getResolutions(),n=this._getResolution(this.getMinZoom()),r=this._getResolution(this.getMaxZoom());if(n<=r){if(t<=n)return this.getMinZoom();if(t>=r)return this.getMaxZoom()}else{if(t>=n)return this.getMinZoom();if(t<=r)return this.getMaxZoom()}for(var i=e.length,o=0;o<i-1;o++)if(e[o]){var a=e[o+1]-e[o],s=t-e[o];if(At(a)===At(s)&&Math.abs(a)>=Math.abs(s))return o+s/a}return i-1},n.setZoom=function(t,e){return void 0===e&&(e={animation:!0}),isNaN(t)||x(t)||(t=+t,this._loaded&&this.options["zoomAnimation"]&&e["animation"]?this._zoomAnimation(t):this._zoom(t)),this},n.getMaxZoom=function(){return x(this.options["maxZoom"])?this.getMaxNativeZoom():this.options["maxZoom"]},n.setMaxZoom=function(t){var e=this.getMaxNativeZoom();return t>e&&(t=e),null!==t&&t<this._zoomLevel&&(this.setZoom(t),t=+t),this.options["maxZoom"]=t,this},n.getMinZoom=function(){return x(this.options["minZoom"])?this._spatialReference.getMinZoom():this.options["minZoom"]},n.setMinZoom=function(t){if(null!==t){t=+t;var e=this._spatialReference.getMinZoom();t<e&&(t=e),t>this._zoomLevel&&this.setZoom(t)}return this.options["minZoom"]=t,this},n.getMaxNativeZoom=function(){var t=this.getSpatialReference();return t?t.getMaxZoom():null},n.getGLRes=function(){if(this._glRes)return this._glRes;var t=this.getSpatialReference().getFullExtent();return this._glRes=(t.right-t.left)/Math.pow(2,19),this._glRes},n.getGLScale=function(t){return x(t)&&(t=this.getZoom()),this._getResolution(t)/this.getGLRes()},n.zoomIn=function(){return this.setZoom(this.getZoom()+1)},n.zoomOut=function(){return this.setZoom(this.getZoom()-1)},n.isZooming=function(){return!!this._zooming},n.isInteracting=function(){return this.isZooming()||this.isMoving()||this.isRotating()},n.setCenterAndZoom=function(t,e){return x(e)||this._zoomLevel===e?this.setCenter(t):(this.setCenter(t),this.setZoom(e,{animation:!1})),this},n.getFitZoom=function(t,e){var n=this;if(!t||!(t instanceof Vr))return this._zoomLevel;if(t["xmin"]===t["xmax"]&&t["ymin"]===t["ymax"])return this.getMaxZoom();var r=this.getSize(),i=t.convertTo((function(t){return n.coordToPoint(t)})),o=i.getWidth(),a=i.getHeight(),s=r["width"]/o,u=r["height"]/a,c=this.getSpatialReference().getZoomDirection()<0?Math.max(s,u):Math.min(s,u),l=this.getZoomForScale(c,null,e);return l},n.getView=function(){return{center:this.getCenter().toArray(),zoom:this.getZoom(),pitch:this.getPitch(),bearing:this.getBearing()}},n.setView=function(t){return t?(t["center"]&&this.setCenter(t["center"]),null===t["zoom"]||isNaN(+t["zoom"])||this.setZoom(+t["zoom"],{animation:!1}),null===t["pitch"]||isNaN(+t["pitch"])||this.setPitch(+t["pitch"]),null===t["pitch"]||isNaN(+t["bearing"])||this.setBearing(+t["bearing"]),this):this},n.getResolution=function(t){return this._getResolution(t)},n.getScale=function(t){var e=x(t)?this.getZoom():t,n=this._getResolution(this.getMaxNativeZoom()),r=this._getResolution(e);return r/n},n.fitExtent=function(t,e,n,r){if(void 0===n&&(n={}),!t)return this;t=new Vr(t,this.getProjection());var i=this.getFitZoom(t)+(e||0),o=t.getCenter();return"undefined"===typeof n["animation"]||n["animation"]?this._animateTo({center:o,zoom:i},{duration:n["duration"]||this.options["zoomAnimationDuration"],easing:n["easing"]||"out"},r):this.setCenterAndZoom(o,i)},n.getBaseLayer=function(){return this._baseLayer},n.setBaseLayer=function(t){var e=!1;if(this._baseLayer&&(e=!0,this._fireEvent("baselayerchangestart"),this._baseLayer.remove()),!t)return delete this._baseLayer,this._fireEvent("baselayerchangeend"),this._fireEvent("setbaselayer"),this;function n(){this._fireEvent("baselayerload"),e&&(e=!1,this._fireEvent("baselayerchangeend"))}return this._baseLayer=t,t._bindMap(this,-1),this._baseLayer.on("layerload",n,this),this._loaded&&this._baseLayer.load(),this._fireEvent("setbaselayer"),this},n.removeBaseLayer=function(){return this._baseLayer&&(this._baseLayer.remove(),delete this._baseLayer,this._fireEvent("baselayerremove")),this},n.getLayers=function(t){return this._getLayers((function(e){return!(e===this._baseLayer||e.getId().indexOf(f)>=0)&&(!t||t(e))}))},n.getLayer=function(t){if(!t)return null;var e=this._layerCache?this._layerCache[t]:null;if(e)return e;var n=this.getBaseLayer();return n&&n.getId()===t?n:null},n.addLayer=function(t){if(!t)return this;if(!Array.isArray(t))return t=Array.prototype.slice.call(arguments,0),this.addLayer(t);this._layerCache||(this._layerCache={});for(var e=this._layers,n=0,r=t.length;n<r;n++){var i=t[n],o=i.getId();if(x(o))throw new Error("Invalid id for the layer: "+o);if(i.getMap()!==this){if(this._layerCache[o])throw new Error("Duplicate layer id in the map: "+o);this._layerCache[o]=i,i._bindMap(this),e.push(i),this._loaded&&i.load()}}return this._sortLayersByZIndex(),this._fireEvent("addlayer",{layers:t}),this},n.removeLayer=function(t){if(!t)return this;if(!Array.isArray(t))return this.removeLayer([t]);for(var e=[],n=0,r=t.length;n<r;n++){var i=t[n];if(i instanceof ua||(i=this.getLayer(i)),i){var o=i.getMap();if(o&&o===this){e.push(i),this._removeLayer(i,this._layers),this._loaded&&i._doRemove();var a=i.getId();this._layerCache&&delete this._layerCache[a]}}}if(e.length>0){var s=this.getRenderer();s&&s.setLayerCanvasUpdated(),e.forEach((function(t){t.fire("remove")}))}return this._fireEvent("removelayer",{layers:t}),this},n.sortLayers=function(t){if(!t||!Array.isArray(t))return this;for(var e=[],n=Number.MAX_VALUE,r=0,i=t.length;r<i;r++){var o=t[r];if(O(t[r])&&(o=this.getLayer(o)),!(o instanceof ua)||!o.getMap()||o.getMap()!==this)throw new Error("It must be a layer added to this map to order.");o.getZIndex()<n&&(n=o.getZIndex()),e.push(o)}for(var a=0,s=e.length;a<s;a++)e[a].setZIndex(n+a);return this},n.toDataURL=function(t){t||(t={});var e=t["mimeType"];e||(e="image/png");var n=t["save"],r=this._getRenderer();if(r&&r.toDataURL){var i=t["fileName"];i||(i="export");var o=r.toDataURL(e,t.quality||.92);if(n&&o){var a;if("undefined"!==typeof Blob&&"undefined"!==typeof atob){var s=zt(o.replace(/^data:image\/(png|jpeg|jpg|webp);base64,/,""),e);a=URL.createObjectURL(s)}else a=o;var u=document.createElement("a");u.download=i,u.href=a,document.body.appendChild(u),u.click(),document.body.removeChild(u)}return o}return null},n.coordToPoint=function(t,e,n){return this.coordinateToPoint(t,e,n)},n.coordToPointAtRes=function(t,e,n){return this.coordinateToPointAtRes(t,e,n)},n.pointToCoord=function(t,e,n){return this.pointToCoordinate(t,e,n)},n.pointAtResToCoord=function(t,e,n){return this.pointAtResToCoordinate(t,e,n)},n.coordToViewPoint=function(t,e,n){return this.coordinateToViewPoint(t,e,n)},n.viewPointToCoord=function(t,e){return this.viewPointToCoordinate(t,e)},n.coordToContainerPoint=function(t,e,n){return this.coordinateToContainerPoint(t,e,n)},n.containerPointToCoord=function(t,e){return this.containerPointToCoordinate(t,e)},n.containerPointToViewPoint=function(t,e){return e?e.set(t.x,t.y):e=t.copy(),e._sub(this.getViewPoint())},n.viewPointToContainerPoint=function(t,e){return e?e.set(t.x,t.y):e=t.copy(),e._add(this.getViewPoint())},n.checkSize=function(t){var e=_()-this._initTime<1500&&0===this.width||0===this.height,n=this._getContainerDomSize(),r=this.height,i=this.width;if(!t&&n["width"]===i&&n["height"]===r)return this;Ln(this._containerDOM);var o=this.getCenter();if(this.options["fixCenterOnResize"])this._updateMapSize(n);else{var a=this._getVisualHeight(this.getPitch()),s=new yt(0,this.height-a),u=this._containerPointToPrj(s);this._updateMapSize(n);var c=this._getVisualHeight(this.getPitch()),l=new yt(0,this.height-c);this._setPrjCoordAtContainerPoint(u,l),this._mapViewCoord=this._getPrjCenter()}var f=0===n["width"]||0===n["height"]||0===i||0===r;return(e||f)&&(this._eventSilence=!0,this.setCenter(o),delete this._eventSilence),this._fireEvent("resize"),this},n.locate=function(t,e,n){return this.getProjection()._locate(new Ar(t),e,n)},n.getMainPanel=function(){return this._getRenderer().getMainPanel()},n.getPanels=function(){return this._panels},n.remove=function(){var t=this;if(this.isRemoved())return this;this._fireEvent("removestart"),this._removeDomEvents(),this._clearHandlers(),this.removeBaseLayer();for(var e=this.getLayers(),n=0;n<e.length;n++)e[n].remove();return this._getRenderer()&&this._getRenderer().remove(),this._containerDOM.childNodes&&this._containerDOM.childNodes.length>0&&Array.prototype.slice.call(this._containerDOM.childNodes,0).filter((function(t){return"maptalks-wrapper"===t.className})).forEach((function(e){return t._containerDOM.removeChild(e)})),delete this._panels,delete this._containerDOM,delete this.renderer,this._fireEvent("removeend"),this._clearAllListeners(),ht.removeDPRListening&&ht.removeDPRListening(this),this},n.isRemoved=function(){return!this._containerDOM},n.isMoving=function(){return!!this._moving},n.onMoveStart=function(t){this._mapAnimPlayer&&this._stopAnim(this._mapAnimPlayer);var e=this._getPrjCenter();this._originCenter&&!this._verifyExtent(e)||(this._originCenter=e),this._moving=!0,this._trySetCursor("move"),this._fireEvent("movestart",this._parseEvent(t?t["domEvent"]:null,"movestart"))},n.onMoving=function(t){this._fireEvent("moving",this._parseEvent(t?t["domEvent"]:null,"moving"))},n.onMoveEnd=function(t){if(this._moving=!1,this._trySetCursor("default"),this._fireEvent("moveend",t&&t["domEvent"]?this._parseEvent(t["domEvent"],"moveend"):t),!this._verifyExtent(this._getPrjCenter())&&this._originCenter){var e=this._originCenter;this._panTo(e)}},n.onDragRotateStart=function(t){this._dragRotating=!0,this._fireEvent("dragrotatestart",this._parseEvent(t?t["domEvent"]:null,"dragrotatestart"))},n.onDragRotating=function(t){this._fireEvent("dragrotating",this._parseEvent(t?t["domEvent"]:null,"dragrotating"))},n.onDragRotateEnd=function(t){this._dragRotating=!1,this._fireEvent("dragrotateend",this._parseEvent(t?t["domEvent"]:null,"dragrotateend"))},n.isDragRotating=function(){return!!this._dragRotating},n.isOffscreen=function(t,e){void 0===e&&(e=0);var n=this.width,r=this.height,i=n+e,o=r+e,a=t.xmin,s=t.ymin,u=t.xmax,c=t.ymax;return Array.isArray(t)&&(a=t[0],s=t[1],u=t[2],c=t[3]),u<e||a>=i||c<e||s>o},n.getRenderer=function(){return this._getRenderer()},n.getDevicePixelRatio=function(){return this.options["devicePixelRatio"]||ht.devicePixelRatio||1},n.setDevicePixelRatio=function(t){return w(t)&&t>0&&t!==this.options["devicePixelRatio"]&&(this.options["devicePixelRatio"]=t,this.checkSize(!0)),this},n._initContainer=function(t){if(O(t)){if(this._containerDOM=document.getElementById(t),!this._containerDOM)throw new Error("Invalid container when creating map: '"+t+"'")}else this._containerDOM=t,R&&(this.CanvasClass=this._containerDOM.constructor);if(this._containerDOM.childNodes&&this._containerDOM.childNodes.length>0&&"maptalks-wrapper"===this._containerDOM.childNodes[0].className)throw new Error("Container is already loaded with another map instance, use map.remove() to clear it.")},n._trySetCursor=function(t){return this._cursor||this._priorityCursor||(t||(t="default"),this._setCursorToPanel(t)),this},n._setPriorityCursor=function(t){if(t)this._priorityCursor=t,this._setCursorToPanel(t);else{var e=!1;this._priorityCursor&&(e=!0),delete this._priorityCursor,e&&this.setCursor(this._cursor)}return this},n._setCursorToPanel=function(t){var e=this.getMainPanel();e&&e.style&&e.style.cursor!==t&&(e.style.cursor=t)},n._removeLayer=function(t,e){if(t&&e){var n=e.indexOf(t);n>-1&&e.splice(n,1)}},n._sortLayersByZIndex=function(){if(this._layers){for(var t=0,e=this._layers.length;t<e;t++)this._layers[t]._order=t,this._layers[t].sortLayersByZIndex&&this._layers[t].sortLayersByZIndex();this._layers.sort((function(t,e){var n=t.getZIndex()-e.getZIndex();return 0===n?t._order-e._order:n}))}},n._fireEvent=function(t,e){this._eventSilence||(this.fire("_"+t,e),this.fire(t,e))},n._Load=function(){this._resetMapStatus(),this.options["pitch"]&&(this.setPitch(this.options["pitch"]),delete this.options["pitch"]),this.options["bearing"]&&(this.setBearing(this.options["bearing"]),delete this.options["bearing"]),delete this._glRes,this._loadAllLayers(),this._getRenderer().onLoad(),this._loaded=!0,this._callOnLoadHooks(),this._initTime=_()},n._initRenderer=function(){var t=this.options["renderer"],n=e.getRendererClass(t);this._renderer=new n(this),this._renderer.load()},n._getRenderer=function(){return this._renderer},n._loadAllLayers=function(){function t(t){t&&t.load()}this._baseLayer&&this._baseLayer.load(),this._eachLayer(t,this.getLayers())},n._getLayers=function(t){for(var e=this._baseLayer?[this._baseLayer].concat(this._layers):this._layers,n=[],r=0;r<e.length;r++)t&&!t.call(this,e[r])||n.push(e[r]);return n},n._eachLayer=function(t){if(!(arguments.length<2)){var e=Array.prototype.slice.call(arguments,1);e&&!Array.isArray(e)&&(e=[e]);for(var n=[],r=0,i=e.length;r<i;r++)n=n.concat(e[r]);for(var o=0,a=n.length;o<a;o++)t.call(t,n[o])}},n._onLayerEvent=function(t){t&&"idchange"===t["type"]&&(delete this._layerCache[t["old"]],this._layerCache[t["new"]]=t["target"])},n._resetMapStatus=function(){var t=this.getMaxZoom(),e=this.getMinZoom(),n=this._spatialReference.getMaxZoom(),r=this._spatialReference.getMinZoom();(x(t)||-1===t||t>n)&&this.setMaxZoom(n),(x(e)||-1===e||e<r)&&this.setMinZoom(r),t=this.getMaxZoom(),e=this.getMinZoom(),t<e&&this.setMaxZoom(e),(x(this._zoomLevel)||this._zoomLevel>t)&&(this._zoomLevel=t),this._zoomLevel<e&&(this._zoomLevel=e),delete this._prjCenter;var i=this.getProjection();this._prjCenter=i.project(this._center),this._calcMatrices();var o=this._getRenderer();o&&o.resetContainer()},n._getContainerDomSize=function(){if(!this._containerDOM)return null;var t,e,n=this._containerDOM;if(this._containerDomContentRect)return t=this._containerDomContentRect.width,e=this._containerDomContentRect.height,new We(t,e);if(x(n.width)||x(n.height)){if(x(n.clientWidth)||x(n.clientHeight))throw new Error("can not get size of container");t=parseInt(n.clientWidth,0),e=parseInt(n.clientHeight,0)}else{t=n.width,e=n.height;var r=this.getDevicePixelRatio();1!==r&&n["layer"]&&(t/=r,e/=r)}return new We(t,e)},n._updateMapSize=function(t){return this.width=t["width"],this.height=t["height"],this._getRenderer().updateMapSize(t),this._calcMatrices(),this},n._getPrjCenter=function(){return this._prjCenter},n._setPrjCenter=function(t){this._prjCenter=t,this.isInteracting()&&!this.isMoving()&&(this._mapViewCoord=t),this._calcMatrices()},n._setPrjCoordAtContainerPoint=function(t,e){if(e.x===this.width/2&&e.y===this.height/2)return this;var n=this._containerPointToPoint(e)._sub(this._prjToPoint(this._getPrjCenter())),r=this._pointToPrj(this._prjToPoint(t).sub(n));return this._setPrjCenter(r),this},n._verifyExtent=function(t){if(!t)return!1;var e=this._prjMaxExtent;return!e||e.contains(t)},n._offsetCenterByPixel=function(t){var e=new yt(this.width/2-t.x,this.height/2-t.y),n=this._containerPointToPrj(e);return this._setPrjCenter(n),n},n.offsetPlatform=function(t){return t?(this._getRenderer().offsetPlatform(t),this._mapViewCoord=this._getPrjCenter(),this._mapViewPoint=this._mapViewPoint.add(t),this):this._mapViewPoint},n.getViewPoint=function(){var t=this._getViewPointFrameOffset(),e=this.offsetPlatform();return t&&(e=e.add(t)),e},n._resetMapViewPoint=function(){this._mapViewPoint=new yt(0,0),this._mapViewCoord=this._getPrjCenter()},n._getResolution=function(t){return void 0!==t&&t!==this._zoomLevel||void 0===this._mapRes?(x(t)&&(t=this._zoomLevel),this._spatialReference.getResolution(t)):this._mapRes},n._getResolutions=function(){return this._spatialReference.getResolutions()},n._prjToPoint=function(t,e,n){e=x(e)?this.getZoom():e;var r=this._getResolution(e);return this._prjToPointAtRes(t,r,n)},n._prjToPointAtRes=function(t,e,n){return this._spatialReference.getTransformation().transform(t,e,n)},n._prjsToPointsAtRes=function(t,e,n){void 0===n&&(n=[]);for(var r=this._spatialReference.getTransformation(),i=[],o=0,a=t.length;o<a;o++){var s=r.transform(t[o],e,n[o]);i.push(s)}return i},n._pointToPrj=function(t,e,n){e=x(e)?this.getZoom():e;var r=this._getResolution(e);return this._pointToPrjAtRes(t,r,n)},n._pointToPrjAtRes=function(t,e,n){return this._spatialReference.getTransformation().untransform(t,e,n)},n._pointToPoint=function(t,e,n){return x(e)?(n?(n.x=t.x,n.y=t.y):n=t.copy(),n):this._pointAtResToPoint(t,this._getResolution(e),n)},n._pointAtResToPoint=function(t,e,n){return n?(n.x=t.x,n.y=t.y):n=t.copy(),n._multi(e/this._getResolution())},n._pointToPointAtRes=function(t,e,n){return n?(n.x=t.x,n.y=t.y):n=t.copy(),n._multi(this._getResolution()/e)},n._containerPointToPrj=function(t,e){return this._pointToPrj(this._containerPointToPoint(t,void 0,e),void 0,e)},n._callOnLoadHooks=function(){var t=e.prototype;if(t._onLoadHooks)for(var n=0,r=t._onLoadHooks.length;n<r;n++)t._onLoadHooks[n].call(this)},n._fixPrjOnWorldWide=function(t){var e=this.getProjection();if(e&&e.fullExtent&&t){var n=e.fullExtent||{},r=n.left,i=n.bottom,o=n.top,a=n.right;w(r)&&(t.x=Math.max(r,t.x)),w(a)&&(t.x=Math.min(a,t.x)),w(i)&&(t.y=Math.max(i,t.y)),w(o)&&(t.y=Math.min(o,t.y))}return this},e}(Er(vr(hi(yr))));ha.include({coordinateToPoint:function(t,e,n){var r=this._getResolution(e);return this.coordinateToPointAtRes(t,r,n)},coordinateToPointAtRes:function(){var t=new Ar(0,0);return function(e,n,r){var i=this.getProjection().project(e,t);return this._prjToPointAtRes(i,n,r)}}(),pointToCoordinate:function(){var t=new Ar(0,0);return function(e,n,r){var i=this._pointToPrj(e,n,t);return this.getProjection().unproject(i,r)}}(),pointAtResToCoordinate:function(){var t=new Ar(0,0);return function(e,n,r){var i=this._pointToPrjAtRes(e,n,t);return this.getProjection().unproject(i,r)}}(),coordinateToViewPoint:function(){var t=new Ar(0,0);return function(e,n,r){return this._prjToViewPoint(this.getProjection().project(e,t),n,r)}}(),viewPointToCoordinate:function(){var t=new Ar(0,0);return function(e,n){return this.getProjection().unproject(this._viewPointToPrj(e,t),n)}}(),coordinateToContainerPoint:function(t,e,n){var r=this._getResolution(e);return this.coordinateToContainerPointAtRes(t,r,n)},coordinateToContainerPointAtRes:function(){var t=new Ar(0,0);return function(e,n,r){var i=this.getProjection().project(e,t);return this._prjToContainerPointAtRes(i,n,r)}}(),coordinatesToContainerPoints:function(t,e){var n=this._getResolution(e);return this.coordinatesToContainerPointsAtRes(t,n)},coordinatesToContainerPointsAtRes:function(){return function(t,e){for(var n=[],r=this._spatialReference.getTransformation(),i=e/this._getResolution(),o=this.getProjection(),a=new Ar(0,0),s=this.isTransforming(),u=this._prjToPoint(this._getPrjCenter(),void 0,la),c=0,l=t.length;c<l;c++){var f=o.project(t[c],a),h=r.transform(f,e);h=h._multi(i),this._toContainerPoint(h,s,i,0,u),n.push(h)}return n}}(),containerPointToCoordinate:function(){var t=new Ar(0,0);return function(e,n){var r=this._containerPointToPrj(e,t);return this.getProjection().unproject(r,n)}}(),containerToExtent:function(){var t=new yt(0,0),e=new yt(0,0);return function(n){var r=new Hr(this._containerPointToPoint(n.getMin(t),void 0,t),this._containerPointToPoint(n.getMax(e),void 0,e));return this._pointToExtent(r)}}(),distanceToPixel:function(){var t=new yt(0,0),e=new yt(0,0);return function(n,r,i){var o=this.getProjection();if(!o)return null;var a=this.getScale()/this.getScale(i),s=this.getCenter(),u=o.locate(s,n,r),c=this.coordToContainerPoint(s,void 0,t),l=this.coordToContainerPoint(u,void 0,e);return l._sub(c)._multi(a)._abs(),new We(l.x,l.y)}}(),distanceToPoint:function(t,e,n,r){var i=this._getResolution(n);return this.distanceToPointAtRes(t,e,i,r)},distanceToPointAtRes:function(){var t=new yt(0,0),e=new Ar(0,0);return function(n,r,i,o,a){var s=this.getProjection();if(!s)return null;var u=o||this.getCenter(),c=s.locate(u,n,r,e),l=this.coordToPointAtRes(u,i,t),f=this.coordToPointAtRes(c,i,a);return f._sub(l)._abs(),f}}(),altitudeToPoint:function(){var t=new Ar(0,40),e=new yt(0,0);return function(n,r,i){void 0===n&&(n=0);var o=this.distanceToPointAtRes(n,n,r,i||t,e);n<0&&o.x>0&&(o.x=-o.x);var a=this.options["heightFactor"];return a&&1!==a&&(o.x*=a,o.y*=a),o.x}}(),pointAtResToAltitude:function(){var t=new Ar(0,40);return function(e,n,r){void 0===e&&(e=0);var i=this.pointAtResToDistance(e,0,n,r||t);return i}}(),pixelToDistance:function(){var t=new Ar(0,0),e=new Ar(0,0);return function(n,r){var i=this.getProjection();if(!i)return null;var o=this.getFullExtent(),a=o["top"]>o["bottom"]?-1:1,s=t.set(this.width/2+n,this.height/2+a*r),u=this.containerPointToCoord(s,e);return i.measureLength(this.getCenter(),u)}}(),pointToDistance:function(t,e,n){var r=this.getResolution(n);return this.pointAtResToDistance(t,e,r)},pointAtResToDistance:function(){var t=new yt(0,0),e=new Ar(0,0),n=new Ar(0,0),r=new Ar(0,0);return function(i,o,a,s){var u=this.getProjection();if(!u)return null;var c=s?u.project(s,e):this._getPrjCenter(),l=this._prjToPointAtRes(c,a,t);l._add(i,o);var f=this.pointAtResToCoord(l,a,n),h=s||u.unproject(c,r);return u.measureLength(h,f)}}(),locateByPoint:function(){var t=new yt(0,0);return function(e,n,r){var i=this.coordToContainerPoint(e,void 0,t);return this.containerPointToCoord(i._add(n,r))}}(),_get2DExtent:function(t,e){var n;if(void 0!==t&&t!==this._zoomLevel||!this._mapExtent2D||(n=this._mapExtent2D),n)return e?(e.set(n["xmin"],n["ymin"],n["xmax"],n["ymax"]),e):n.copy();var r=this._getResolution(t);return this._get2DExtentAtRes(r,e)},_get2DExtentAtRes:function(){var t=new yt(0,0);return function(e,n){var r=this;if(e===this._mapGlRes&&this._mapGlExtent2D)return this._mapGlExtent2D;var i=this.getContainerExtent();return i.convertTo((function(n){return r._containerPointToPointAtRes(n,e,t)}),n)}}(),_pointToExtent:function(){var t=new Ar(0,0),e=new Ar(0,0);return function(n){var r=n.getMin(),i=n.getMax(),o=this.getFullExtent(),a=!o||o.left<=o.right?[r.x,i.x]:[i.x,r.x],s=a[0],u=a[1],c=!o||o.top>o.bottom?[i.y,r.y]:[r.y,i.y],l=c[0],f=c[1],h=r.set(s,f),p=i.set(u,l);return new Vr(this.pointToCoord(h,void 0,t),this.pointToCoord(p,void 0,e),this.getProjection())}}(),_getViewPointFrameOffset:function(){var t=new yt(0,0);return function(){if(this.isZooming())return null;var e=this._getPrjCenter();return this._mapViewCoord&&!this._mapViewCoord.equals(e)?this._prjToContainerPoint(this._mapViewCoord)._sub(this._prjToContainerPoint(e,void 0,t)):null}}(),_viewPointToPrj:function(){var t=new yt(0,0);return function(e,n){return this._containerPointToPrj(this.viewPointToContainerPoint(e,t),n)}}(),_prjToContainerPoint:function(t,e,n,r){var i=this._getResolution(e);return this._prjToContainerPointAtRes(t,i,n,r)},_prjToContainerPointAtRes:function(){var t=new yt(0,0);return function(e,n,r,i){return this._pointAtResToContainerPoint(this._prjToPointAtRes(e,n,t),n,i||0,r)}}(),_prjToViewPoint:function(){var t=new yt(0,0);return function(e,n,r){var i=this._prjToContainerPoint(e,void 0,t,r);return this.containerPointToViewPoint(i,n)}}(),_viewPointToPoint:function(){var t=new yt(0,0);return function(e,n,r){return this._containerPointToPoint(this.viewPointToContainerPoint(e,t),n,r)}}(),_pointToViewPoint:function(){var t=new Ar(0,0);return function(e,n,r){return this._prjToViewPoint(this._pointToPrj(e,n,t),r)}}()}),ha.mergeOptions(fa);var pa=function(t){function e(){return t.apply(this,arguments)||this}pt(e,t);var n=e.prototype;return n.addHooks=function(){this.target&&this.target.on("_dblclick",this._onDoubleClick,this)},n.removeHooks=function(){this.target&&this.target.off("_dblclick",this._onDoubleClick,this)},n._onDoubleClick=function(t){var e=this.target;if(e.options["doubleClickZoom"]){var n=e.getZoom(),r=t["domEvent"]["shiftKey"]?Math.ceil(n)-1:Math.floor(n)+1;e._zoomAnimation(r,t["containerPoint"])}},e}(mr);ha.mergeOptions({doubleClickZoom:!0}),ha.addOnLoadHook("addHandler","doubleClickZoom",pa);var da=function(t){function e(){return t.apply(this,arguments)||this}pt(e,t);var n=e.prototype;return n.addHooks=function(){var t=this.target;if(t){var e=t._panels.mapWrapper||t._containerDOM;this._dragHandler=new Tr(e,{cancelOn:this._cancelOn.bind(this),rightclick:!0}),this._dragHandler.on("mousedown",this._onMouseDown,this).on("dragstart",this._onDragStart,this).on("dragging",this._onDragging,this).on("dragend",this._onDragEnd,this).enable()}},n.removeHooks=function(){this._dragHandler.off("mousedown",this._onMouseDown,this).off("dragstart",this._onDragStart,this).off("dragging",this._onDragging,this).off("dragend",this._onDragEnd,this),this._dragHandler.remove(),delete this._dragHandler},n._cancelOn=function(t){return!(!this.target.isZooming()&&!this._ignore(t))},n._ignore=function(t){return!!t&&(t.domEvent&&(t=t.domEvent),this.target._ignoreEvent(t))},n._onMouseDown=function(t){delete this.startDragTime,delete this._mode,2===t.domEvent.button||t.domEvent.ctrlKey?(this.target.options["dragRotate"]||this.target.options["dragPitch"])&&(this._mode="rotatePitch"):this.target.options["dragPan"]&&(this._mode="move"),this.target._stopAnim(this.target._mapAnimPlayer),Pn(t["domEvent"])},n._onDragStart=function(t){this.startDragTime=_(),"move"===this._mode?this._moveStart(t):"rotatePitch"===this._mode&&this._rotateStart(t)},n._onDragging=function(t){var e=this.target;e._isEventOutMap(t["domEvent"])||("move"===this._mode?this._moving(t):"rotatePitch"===this._mode&&this._rotating(t))},n._onDragEnd=function(t){"move"===this._mode?this._moveEnd(t):"rotatePitch"===this._mode&&this._rotateEnd(t),delete this.startDragTime,delete this.startBearing},n._start=function(t){this.preX=t["mousePos"].x,this.preY=t["mousePos"].y,this.startX=this.preX,this.startY=this.preY,this._startPrjCenter=this.target._getPrjCenter().copy()},n._moveStart=function(t){this._start(t);var e=this.target;e.onMoveStart(t);var n=Nn(e._getActualEvent(t.domEvent),e.getContainer());this.startPrjCoord=e._containerPointToPrj(n)},n._moving=function(t){if(this.startDragTime){var e=this.target,n=Nn(e._getActualEvent(t.domEvent),e.getContainer());e._setPrjCoordAtContainerPoint(this.startPrjCoord,n),e.onMoving(t)}},n._moveEnd=function(t){if(this.startDragTime){var e="touchend"===t.domEvent.type,n=this.target,r=_()-this.startDragTime,i=t["mousePos"].x,o=t["mousePos"].y,a=i-this.startX,s=o-this.startY,u=n._getPrjCenter(),c=u.sub(this._startPrjCenter);if(this._clear(),n.options["panAnimation"]&&!t.interupted&&n._verifyExtent(n._getPrjCenter())&&r<280&&Math.abs(s)+Math.abs(a)>5){r*=5;var l=e?5:2.8,f=u.add(c._multi(l));n._panTo(f,{duration:e?3*r:2*r,easing:"outExpo"})}else n.onMoveEnd(t)}},n._rotateStart=function(t){this._start(t),delete this._rotateMode,this.startBearing=this.target.getBearing(),this.target.onDragRotateStart(t),this._db=0},n._rotating=function(t){var e=this.target,n=t["mousePos"].x,r=t["mousePos"].y,i=e.getPitch(),o=e.getBearing(),a=Math.abs(n-this.preX),s=Math.abs(r-this.preY);if(this._rotateMode||(e.options["dragRotatePitch"]?this._rotateMode="rotate_pitch":this._rotateMode=a>s?"rotate":a<s?"pitch":"rotate"),!("pitch"===this._rotateMode&&0===i&&s<10)){if(this._rotateMode.indexOf("rotate")>=0&&e.options["dragRotate"]){var u=0;u=e.options["dragPitch"]||a>s?-.6*(this.preX-n):n>e.width/2?.6*(this.preY-r):-.6*(this.preY-r);var c=e.getBearing()+u;this._db=this._db||0,this._db+=u,e._setBearing(c)}this._rotateMode.indexOf("pitch")>=0&&e.options["dragPitch"]&&e._setPitch(e.getPitch()+.4*(this.preY-r)),this.preX=n,this.preY=r,e.getBearing()===o&&e.getPitch()===i||e.onDragRotating(t)}},n._rotateEnd=function(t){var e=this.target,n=e.getBearing();this._clear();var r=_()-this.startDragTime;if(e.onDragRotateEnd(t),e.options["rotateAnimation"]&&Math.abs(n-this.startBearing)>20&&("rotate"===this._rotateMode||"rotate_pitch"===this._rotateMode)&&!t.interupted&&r<400){var i=e.getBearing();e._animateTo({bearing:i+this._db/1.5},{easing:"outQuint",duration:1600})}},n._clear=function(){delete this.startPrjCoord,delete this.preX,delete this.preY,delete this.startX,delete this.startY},e}(mr);ha.mergeOptions({draggable:!0,dragPan:!0,dragRotatePitch:!0,dragRotate:!0,dragPitch:!0}),ha.addOnLoadHook("addHandler","draggable",da);var va="mousedown mouseup mousemove click dblclick contextmenu touchstart touchmove touchend",ga={mousemove:["mousemove","mouseover","mouseout","mouseenter"],touchend:["touchend","click"]},ma=function(t){function e(){return t.apply(this,arguments)||this}pt(e,t);var n=e.prototype;return n.addHooks=function(){var t=this.target,e=t._panels.allLayers||t._containerDOM;Xn(e,va,this._identifyGeometryEvents,this)},n.removeHooks=function(){var t=this.target,e=t._panels.allLayers||t._containerDOM;qn(e,va,this._identifyGeometryEvents,this)},n._identifyGeometryEvents=function(t,e){var n=this.target;if(!n.isInteracting()&&!n._ignoreEvent(t)){var r=null,i=e||t.type,o="mousedown"===i||"touchstart"===i&&t.touches&&1===t.touches.length;if(o)this._mouseDownTime=_();else if(("click"===i||"touchend"===i)&&this._mouseDownTime){var a=this._mouseDownTime;delete this._mouseDownTime;var s=_();if(s-a>300){if("click"===i)return}else"touchend"===i&&(r="click")}var u=t.touches&&t.touches.length>0?t.touches[0]:t.changedTouches&&t.changedTouches.length>0?t.changedTouches[0]:t;if(u){var c=Nn(u,n._containerDOM);"touchstart"===i&&Pn(t);for(var l=null,f=this.target.getRenderer().getTopElements(),h=o&&2!==t.button,p=0;p<f.length;p++)if(f[p].hitTest(c)){var d=f[p].options["cursor"];if(d&&(l=d),h||f[p].events&&f[p].events.indexOf(i)>=0){var v={target:n,type:i,domEvent:t,containerPoint:c};if(h)return n._setPriorityCursor(l),void f[p].mousedown(v);f[p].onEvent(v)}}var g=n._getLayers((function(t){return!(!t.identify||!t.options["geometryEvents"])}));if(n._setPriorityCursor(l),g.length){var m=ga[i]||[i],y={includeInternals:!0,filter:function(e){if(!(e instanceof aa))return!1;var n=e._getEventTypeToFire(t);if("mousemove"===i){if(!l&&e.options["cursor"]&&(l=e.options["cursor"]),!e.listens("mousemove")&&!e.listens("mouseover")&&!e.listens("mouseenter"))return!1}else if(!e.listens(n)&&!e.listens(r))return!1;return!0},count:1,onlyVisible:n.options["onlyVisibleGeometryEvents"],containerPoint:c,layers:g,eventTypes:m},b=x.bind(this);"mousemove"===i||"touchmove"===i?this._queryIdentifyTimeout=n.getRenderer().callInNextFrame((function(){n.isInteracting()||n.identifyAtPoint(y,b)})):n.identifyAtPoint(y,b)}}}function x(e){var o=!0;if("mousemove"===i){var a={};if(e.length>0)for(var s=e.length-1;s>=0;s--){var u=e[s];if(u instanceof aa){var c=u._getInternalId();a[c]=u,u._onEvent(t),this._prevOverGeos&&this._prevOverGeos.geomap[c]||u._onEvent(t,"mouseenter"),o=u._onEvent(t,"mouseover")}}n._setPriorityCursor(l);var f=this._prevOverGeos&&this._prevOverGeos.geos;if(this._prevOverGeos={geos:e,geomap:a},f&&f.length>0)for(var h=f.length-1;h>=0;h--){var p=f[h];if(p instanceof aa){var d=f[h]._getInternalId();a[d]||(o=p._onEvent(t,"mouseout"))}}}else{if(!e||!e.length)return;for(var v=e.length-1;v>=0;v--)if(e[v]instanceof aa){o=e[v]._onEvent(t),r&&e[v]._onEvent(t,r);break}}!1===o&&Rn(t)}},e}(mr);ha.mergeOptions({geometryEvents:!0,onlyVisibleGeometryEvents:!0}),ha.addOnLoadHook("addHandler","geometryEvents",ma);var ya=4.000244140625,_a=.01,ba=1/450,xa=2,wa=function(t){function e(e){var n;return n=t.call(this,e)||this,n._thisScrollZoom=n._scrollZoom.bind(dt(dt(n))),n._wheelZoomRate=ba,n._defaultZoomRate=_a,n._delta=0,n}pt(e,t);var n=e.prototype;return n.addHooks=function(){An(this.target._containerDOM,"wheel",this._onWheelScroll,this)},n.removeHooks=function(){kn(this.target._containerDOM,"wheel",this._onWheelScroll)},n._onWheelScroll=function(t){Pn(t),Rn(t);var e=this.target;if(e._ignoreEvent(t)||!e.options["zoomable"])return!1;var n=e._containerDOM,r=e._checkZoomOrigin(Nn(t,n));return e.options["seamlessZoom"]?(this._zooming||(this._trackPadSuspect=0,this._ensureTrackpad=!1),this._seamless(t,r)):this._interval(t,r)},n._seamless=function(t,e){var n=t.deltaMode===window.WheelEvent.DOM_DELTA_LINE?60*t.deltaY:t.deltaY;if(n%ya!==0&&(this._ensureTrackpad||(Math.abs(n)<60?this._trackPadSuspect++:this._trackPadSuspect=0,this._trackPadSuspect>=2&&(this._ensureTrackpad=!0)),this._ensureTrackpad&&(n*=14)),t.shiftKey&&n&&(n/=4),this._lastWheelEvent=t,this._delta-=n,!this._zooming&&this._delta){var r=this.target;this._zoomOrigin=e,r.onZoomStart(null,e)}this._start()},n._start=function(){if(this._delta){this._zooming=!0;var t=this.target;this._active||(t.getRenderer().callInNextFrame(this._thisScrollZoom),this._active=!0)}},n._scrollZoom=function(){var t=this;if(this._active=!1,this._delta){var e=Math.abs(this._delta)>ya?this._wheelZoomRate:this._defaultZoomRate,n=xa/(1+Math.exp(-Math.abs(this._delta*e)));this._delta<0&&0!==n&&(n=1/n);var r=this.target,i=r.getZoom(),o=r.getZoomForScale(n,i,!0);this._delta=0,r.onZooming(o,this._zoomOrigin),this._timeout&&clearTimeout(this._timeout),this._timeout=setTimeout((function(){t._zooming=!1,delete t._timeout,r.onZoomEnd(r.getZoom(),t._zoomOrigin)}),210)}},n._interval=function(t,e){var n=this,r=this.target;if(this._zooming)return this._requesting++,!1;this._requesting=0;var i=(t.deltaY?-1*t.deltaY:t.wheelDelta?t.wheelDelta:t.detail)>0?1:-1;t.detail&&(i*=-1);var o=r.getZoom(),a=o+i;if(a=r._checkZoom(i>0?Math.ceil(a):Math.floor(a)),a===o)return!1;this._zooming=!0,this._delta||(r.onZoomStart(null,e),this._origin=e,this._delta=i,this._startZoom=r.getZoom());var s=90;return r._animateTo({zoom:a-1*this._delta/2,around:this._origin},{continueOnViewChanged:!0,easing:"linear",duration:s,wheelZoom:!0},(function(e){"finished"===e.state.playState?n._requesting<1||Math.abs(a-n._startZoom)>2||a===r.getMaxZoom()||a===r.getMinZoom()?(r._animateTo({zoom:a,around:n._origin},{continueOnViewChanged:!0,duration:100},(function(t){"running"!==t.state.playState&&(delete n._zooming,delete n._requesting)})),delete n._startZoom,delete n._origin,delete n._delta,n._requesting=0):x(n._requesting)||(delete n._zooming,n._onWheelScroll(t)):"running"!==e.state.playState&&(delete n._zooming,delete n._requesting)})),!1},e}(mr);ha.mergeOptions({scrollWheelZoom:!0,seamlessZoom:!0}),ha.addOnLoadHook("addHandler","scrollWheelZoom",wa);var Ea=function(t){function e(){return t.apply(this,arguments)||this}pt(e,t);var n=e.prototype;return n.addHooks=function(){An(this.target.getContainer(),"touchstart",this._onTouchStart,this)},n.removeHooks=function(){kn(this.target.getContainer(),"touchstart",this._onTouchStart)},n._onTouchStart=function(t){var e=this.target;if(t.touches&&!(t.touches.length<2)){var n=e.getContainer(),r=Nn(t.touches[0],n),i=Nn(t.touches[1],n);this.preY=r.y,this._startP1=r,this._startP2=i,this._startDist=r.distanceTo(i),this._startVector=r.sub(i),this._startZoom=e.getZoom(),this._startBearing=e.getBearing(),qn(document,"touchmove",this._onTouchMove,this),qn(document,"touchend",this._onTouchEnd,this),An(document,"touchmove",this._onTouchMove,this),An(document,"touchend",this._onTouchEnd,this),Pn(t),e._fireEvent("touchactstart")}},n._onTouchMove=function(t){var e=this.target;if(t.touches&&!(t.touches.length<2)){var n=e.getContainer(),r=Nn(t.touches[0],n),i=Nn(t.touches[1],n),o=r.sub(this._startP1),a=i.sub(this._startP2),s=r.sub(i),u=r.distanceTo(i)/this._startDist,c=180*s.angleWith(this._startVector)/Math.PI,l=this.preY||r.y,f=.4*(l-r.y);this.preY=r.y;var h={domEvent:t,mousePos:[r,i]};if(this.mode||(e.options["touchRotate"]&&Math.abs(c)>8?this.mode=e.options["touchZoomRotate"]?"rotate_zoom":"rotate":e.options["touchPitch"]&&o.y*a.y>0&&Math.abs(o.y)>10&&Math.abs(a.y)>10?this.mode="pitch":e.options["zoomable"]&&e.options["touchZoom"]&&Math.abs(1-u)>.15&&(this.mode=e.options["touchZoomRotate"]&&e.options["touchRotate"]?"rotate_zoom":"zoom"),this._startTouching(h)),"zoom"===this.mode||"rotate_zoom"===this.mode){this._scale=u;var p=e._getResolution(this._startZoom)/u,d=e.getZoomFromRes(p);e.onZooming(d,this._Origin)}"rotate"===this.mode||"rotate_zoom"===this.mode?(e._setBearing(this._startBearing+c),e.onDragRotating(h)):"pitch"===this.mode&&(e._setPitch(e.getPitch()+f),e.onDragRotating(h)),e._fireEvent("touchactinging")}},n._startTouching=function(t){var e=this.target;if("zoom"===this.mode||"rotate_zoom"===this.mode){var n=e.getSize();this._Origin=new yt(n["width"]/2,n["height"]/2),e.onZoomStart(null,this._Origin)}"rotate"!==this.mode&&"pitch"!==this.mode&&"rotate_zoom"!==this.mode||e.onDragRotateStart(t)},n._onTouchEnd=function(t){delete this.preY;var e=this.target;if(qn(document,"touchmove",this._onTouchMove,this),qn(document,"touchend",this._onTouchEnd,this),"zoom"===this.mode||"rotate_zoom"===this.mode){var n=this._scale,r=e._getResolution(this._startZoom)/n,i=e.getZoomFromRes(r);e.onZoomEnd(i,this._Origin)}"pitch"!==this.mode&&"rotate"!==this.mode&&"rotate_zoom"!==this.mode||e.onDragRotateEnd({domEvent:t}),delete this.mode,e._fireEvent("touchactend")},e}(mr);ha.mergeOptions({touchGesture:!0,touchZoom:!0,touchPitch:!0,touchRotate:!0,touchZoomRotate:!1}),ha.addOnLoadHook("addHandler","touchGesture",Ea);var Sa="__anim_player",Oa={outExpo:function(t){return 1===t?1:1-Math.pow(2,-10*t)},outQuint:function(t){return 1-Math.pow(1-t,5)},in:function(t){return Math.pow(t,2)},out:function(t){return 1-Oa["in"](1-t)},inAndOut:function(t){return 3*t*t-2*t*t*t},linear:function(t){return t},upAndDown:function(t){return t<.5?Oa.inAndOut(2*t):1-Oa.inAndOut(2*(t-.5))}},Ca=function(t,e){this.state=t,this.styles=e},Ta=function(t,e,n,r){this._animation=t,this.options=e,this._onFrame=n,this.playState="idle",this.ready=!0,this.finished=!1,this.target=r},Aa={speed:{slow:2e3,normal:1e3,fast:500},_resolveStyles:function(t){if(!t)return null;function e(t){if(!Array.isArray(t))return Aa._resolveStyles(t);for(var e=[],n=[],r=[],i=0;i<t.length;i++){var o=Aa._resolveStyles(t[i]);o&&(e.push(o[0]),n.push(o[1]),r.push(o[2]))}return e.length?[e,n,r]:null}function n(t){var e,n=t;Array.isArray(t)||(w(t)?n=[0,t]:t instanceof yt||t instanceof Ar?(e=t.constructor,n=[new e(0,0),t]):n=[t,t]);var r=n[0],i=n[1];return w(r)&&w(i)?r===i?null:[r,i-r,i]:Array.isArray(r)&&w(r[0])||r instanceof Ar||r instanceof yt?(Array.isArray(r)?(r=new Ar(r),i=new Ar(i)):(e=r.constructor,r=new e(r),i=new e(i)),r.equals(i)?null:[r,i.sub(r),i]):[r,i,i]}function r(t){return!Array.isArray(t)&&t.constructor===Object||!(!Array.isArray(t)||t[0].constructor!==Object)}var i={},o={},a={};for(var s in t)if(t.hasOwnProperty(s)){var u=t[s];if(!u)continue;if(Array.isArray(u)&&(x(u[0])||x(u[1])))continue;var c=void 0;c=r(u)?e(u):n(u),c&&(o[s]=c[0],i[s]=c[1],a[s]=c[2])}return[o,i,a]},framing:function(t,e){e||(e={});var n,r,i,o=e["easing"]?Oa[e["easing"]]:Oa.linear;o||(o=Oa.linear),t=Aa._resolveStyles(t),t&&(r=t[0],n=t[1],i=t[2]);var a=function t(e,n,r){if(!n||!r)return null;var o={};for(var a in r)if(r.hasOwnProperty(a)){if(n[a]===i[a]){o[a]=n[a];continue}var s=n[a],u=r[a];if(w(u))o[a]=s+e*u;else if(Array.isArray(u)){for(var c=[],l=0;l<u.length;l++)c.push(t(e,s[l],u[l]));o[a]=c}else{var f=u.constructor;o[a]=f===Object?t(e,s,u):s instanceof yt||s instanceof Ar?s.add(u.multi(e)):u}}return o};return function(t,e){var s,u;if(t<0)s={playState:"idle",delta:0},u=r;else if(t<e){var c=o(t/e);s={playState:"running",delta:c},u=a(c,r,n)}else s={playState:"finished",delta:1},u=i;return s["startStyles"]=r,s["destStyles"]=i,s["progress"]=t,s["remainingMs"]=e-t,new Ca(s,u)}},_requestAnimFrame:function(t){this._frameQueue||(this._frameQueue=[]),this._frameQueue.push(t),this._a()},_a:function(){this._animationFrameId||(this._animationFrameId=vt(Aa._frameFn))},_run:function(){if(this._frameQueue.length){var t=this._frameQueue;this._frameQueue=[];for(var e=0,n=t.length;e<n;e++)t[e]();this._frameQueue.length?this._animationFrameId=vt(Aa._frameFn):delete this._animationFrameId}},animate:function(t,e,n,r){e||(e={});var i=Aa.framing(t,e),o=new Ta(i,e,n,r);return o}};Aa._frameFn=Aa._run.bind(Aa),b(Ta.prototype,{_prepare:function(){var t=this.options,e=t["speed"]||t["duration"];O(e)&&(e=Aa.speed[e],e||(e=+e)),e||(e=Aa.speed["normal"]),this.duration=e,this._framer=t["framer"]||Aa._requestAnimFrame.bind(Aa)},play:function(){if("idle"!==this.playState&&"paused"!==this.playState||this.target&&this.target[Sa])return this;this.target&&(this.target[Sa]=1),"idle"===this.playState&&(this.currentTime=0,this._prepare());var t=_();if(!this.startTime){var e=this.options;this.startTime=e["startTime"]?e["startTime"]:t}return this._playStartTime=Math.max(t,this.startTime),"paused"===this.playState&&(this._playStartTime-=this.currentTime),this.playState="running",this._run(),this},pause:function(){return"paused"===this.playState||(this.playState="paused",this._run()),this},cancel:function(){return"idle"===this.playState||(this.playState="idle",this.finished=!1,this._run()),this},finish:function(){return"finished"===this.playState||(this.playState="finished",this.finished=!0,this._run()),this},reverse:function(){},_run:function(){var t=this,e=this._onFrame,n=_(),r=n-this._playStartTime;if(this.options["repeat"]&&r>=this.duration&&(this._playStartTime=n,r=0),"running"===this.playState){var i=this._animation(r,this.duration);this.playState=i.state["playState"],"running"!==this.playState&&this.target&&delete this.target[Sa],"idle"===this.playState?this.startTime>n&&setTimeout(this._run.bind(this),this.startTime-n):"running"===this.playState?this._framer((function(){"running"===t.playState&&(t.currentTime=r,e&&e(i),t._run())})):"finished"===this.playState&&(this.finished=!0,e&&e(i))}else if(this.target&&delete this.target[Sa],e){"finished"===this.playState?r=this.duration:"idle"===this.playState&&(r=0);var o=this._animation(r,this.duration);o.state.playState=this.playState,e(o)}}});var ka={smoothness:0,enableClip:!0,enableSimplify:!0,simplifyTolerance:2,symbol:{lineColor:"#000",lineWidth:2,lineOpacity:1,polygonFill:"#fff",polygonOpacity:1,opacity:1}},Ma=function(t){function e(){return t.apply(this,arguments)||this}pt(e,t);var n=e.prototype;return n.animateShow=function(t,e){var n=this;void 0===t&&(t={}),this._showPlayer&&this._showPlayer.finish(),C(t)&&(t={},e=t);var r=this.getCoordinates();if(0===r.length)return this;this._animIdx=0,this._animLenSoFar=0,this.show();var i=!!this.getShell,o=i?this.getShell().concat(this.getShell()[0]):r,a=this._getProjection(),s=a.projectCoords(o,this.options["antiMeridian"]);this._prjAniShowCenter=this._getPrjExtent().getCenter(),this._aniShowCenter=a.unproject(this._prjAniShowCenter);var u=t["duration"]||1e3,c=t["easing"]||"out";this.setCoordinates([]);var l=0;s.length&&(s[0]._distance=0);for(var f=1;f<s.length;f++){var h=s[f].distanceTo(s[f-1]);s[f]._distance=h,l+=h}this._tempCoord=new Ar(0,0),this._tempPrjCoord=new yt(0,0);var p=this._showPlayer=Aa.animate({t:u},{duration:u,easing:c},(function(t){if(n.getMap()){var i=n._drawAnimShowFrame(t.styles.t,u,l,o,s);"finished"===t.state.playState&&(delete n._showPlayer,delete n._aniShowCenter,delete n._prjAniShowCenter,delete n._animIdx,delete n._animLenSoFar,delete n._animTailRatio,delete n._tempCoord,delete n._tempPrjCoord,n.setCoordinates(r)),e&&e(t,i)}else if("finished"!==p.playState&&(p.finish(),e)){var a=n.getCoordinates();e(t,a[a.length-1])}}),this);return p.play(),p},n._drawAnimShowFrame=function(t,e,n,r,i){if(0===t)return r[0];var o,a,s=t/e*n,u=0;for(o=this._animIdx+1,a=i.length;o<a;o++){if(u=i[o]._distance,this._animLenSoFar+u>s)break;this._animLenSoFar+=u}if(this._animIdx=o-1,this._animIdx>=a-1)return this.setCoordinates(r),r[r.length-1];var c=this._animIdx,l=i[c],f=i[c+1],h=s-this._animLenSoFar,p=h/u;this._animTailRatio=p;var d=l.x+(f.x-l.x)*p,v=l.y+(f.y-l.y)*p;this._tempPrjCoord.x=d,this._tempPrjCoord.y=v;var g=this._tempPrjCoord,m=r[c],y=r[c+1],_=m.x+(y.x-m.x)*p,b=m.y+(y.y-m.y)*p;this._tempCoord.x=_,this._tempCoord.y=b;var x=this._tempCoord,w=!!this.getShell;if(!w&&this.options["smoothness"]>0){for(var E=[],S=[],O=0;O<=this._animIdx;O++)E.push(r[O]),S.push(i[O]);E.push(x,x),S.push(g,g),this.setCoordinates(E),this._setPrjCoordinates(S)}else{var C=r.slice(0,this._animIdx+1);C.push(x);var T=i.slice(0,this._animIdx+1);T.push(g),w?(this.setCoordinates([this._aniShowCenter].concat(C)),this._setPrjCoordinates([this._prjAniShowCenter].concat(T))):(this.setCoordinates(C),this._setPrjCoordinates(T))}return x},n._getCenterInExtent=function(t,e,n){var r=this.getExtent();if(!t.intersects(r))return null;var i=n(e,t);if(0===i.length)return null;var o=0,a=0,s=0;i.forEach((function(t){Array.isArray(t)?t.forEach((function(t){t.point&&(t=t.point),o+=t.x,a+=t.y,s++})):(t.point&&(t=t.point),o+=t.x,a+=t.y,s++)}));var u=new Ar(o,a)._multi(1/s);return u.count=s,u},n._getPath2DPoints=function(t,e,n){if(!jt(t))return[];var r=this.getMap(),i=!e&&this._shouldSimplify(),o=this.options["simplifyTolerance"]*r._getResolution(),a=Array.isArray(t[0]);if(delete this._simplified,i&&!a){var s=t.length;t=u()(t,o,!1),this._simplified=t.length<s}if(n||(n=r._getResolution()),Array.isArray(t)){var c=[],l="_glPt";if(!Array.isArray(t[0]))return c=Yt(t,l),r._prjsToPointsAtRes(t,n,c);for(var f=[],h=0,p=t.length;h<p;h++){var d=t[h];c=Yt(d,l);var v=r._prjsToPointsAtRes(d,n,c);f.push(v)}return f}return r._prjToPointAtRes(t,n)},n._shouldSimplify=function(){var t=this.getLayer(),e=this.getProperties(),n=e&&t.options["enableAltitude"]&&!x(e[t.options["altitudeProperty"]])&&0!==e[t.options["altitudeProperty"]];return t&&t.options["enableSimplify"]&&!n&&this.options["enableSimplify"]&&!this._showPlayer},n._setPrjCoordinates=function(t){this._prjCoords=t,this.onShapeChanged()},n._getPrjCoordinates=function(){return this._verifyProjection(),!this._prjCoords&&this._getProjection()&&(this._prjCoords=this._projectCoords(this._coordinates)),this._prjCoords},n._updateCache=function(){this._clearCache();var t=this._getProjection();t&&this._prjCoords&&(this._coordinates=this._unprojectCoords(this._getPrjCoordinates()))},n._clearProjection=function(){this._prjCoords=null,t.prototype._clearProjection.call(this)},n._projectCoords=function(t){var e=this._getProjection();return e?e.projectCoords(t,this.options["antiMeridian"]):[]},n._unprojectCoords=function(t){var e=this._getProjection();return e?e.unprojectCoords(t):[]},n._computeCenter=function(){var t=this._coordinates;if(!jt(t))return null;for(var e=0,n=0,r=0,i=t.length,o=0;o<i;o++)t[o]&&w(t[o].x)&&w(t[o].y)&&(e+=t[o].x,n+=t[o].y,r++);return new Ar(e/r,n/r)},n._computeExtent=function(){var t=this._coordinates;if(!jt(t))return null;var e=[t];return this.hasHoles&&this.hasHoles()&&e.push.apply(e,this.getHoles()),this._coords2Extent(e,this._getProjection())},n._computePrjExtent=function(){var t=[this._getPrjCoordinates()];return this.hasHoles&&this.hasHoles()&&t.push.apply(t,this._getPrjHoles()),this._coords2Extent(t)},n._get2DLength=function(){for(var t=this._getPath2DPoints(this._getPrjCoordinates(),!0),e=0,n=1,r=t.length;n<r;n++)e+=t[n].distanceTo(t[n-1]);return e},n._hitTestTolerance=function(){var e,n=this._getInternalSymbol();if(Array.isArray(n)){e=0;for(var r=0;r<n.length;r++)w(n[r]["lineWidth"])&&n[r]["lineWidth"]>e&&(e=n[r]["lineWidth"])}else e=n["lineWidth"];return t.prototype._hitTestTolerance.call(this)+(w(e)?e/2:1.5)},n._coords2Extent=function(t,e){if(!t||0===t.length||Array.isArray(t[0])&&0===t[0].length)return null;for(var n=new Vr(e),r=0,i=t.length;r<i;r++)for(var o=0,a=t[r].length;o<a;o++)n._combine(t[r][o]);return n},e}(aa);Ma.mergeOptions(ka);var Pa="Polygon",Ra=function(t){function e(e,n){var r;return r=t.call(this,n)||this,r.type="Polygon",e&&r.setCoordinates(e),r}pt(e,t);var n=e.prototype;return n.getOutline=function(){var t=this._getPainter();if(!t)return null;var n=this.getExtent();return new e(n.toArray(),{symbol:{lineWidth:1,lineColor:"6b707b"}})},n.setCoordinates=function(t){if(!t)return this._coordinates=null,this._holes=null,this._projectRings(),this;var e=Ar.toCoordinates(t),n=e.length;if(Array.isArray(e[0])){if(this._coordinates=this._trimRing(e[0]),n>1){for(var r=[],i=1;i<n;i++)e[i]&&r.push(this._trimRing(e[i]));this._holes=r}}else this._coordinates=this._trimRing(e);return this._projectRings(),this},n.getCoordinates=function(){if(!this._coordinates)return[];for(var t=this.getHoles(),e=[this._copyAndCloseRing(this._coordinates)],n=0,r=t.length;n<r;n++)e.push(this._copyAndCloseRing(t[n]));return e},n.getCenterInExtent=function(t){return this._getCenterInExtent(t,this.getShell(),fo)},n.getShell=function(){return this._coordinates||[]},n.getHoles=function(){return this._holes||[]},n.hasHoles=function(){return this.getHoles().length>0},n._projectRings=function(){this.getMap()?(this._prjCoords=this._projectCoords(this._coordinates),this._prjHoles=this._projectCoords(this._holes),this.onShapeChanged()):this.onShapeChanged()},n._setPrjCoordinates=function(t){this._prjCoords=t,this.onShapeChanged()},n._cleanRing=function(t){for(var e=t.length-1;e>=0;e--)t[e]||t.splice(e,1)},n._checkRing=function(t){if(this._cleanRing(t),!t||!jt(t))return!1;var e=t[t.length-1],n=!0;return t[0].x===e.x&&t[0].y===e.y||(n=!1),n},n._trimRing=function(t){var e=this._checkRing(t);return jt(t)&&e&&t.splice(t.length-1,1),t},n._copyAndCloseRing=function(t){t=t.slice(0);var e=this._checkRing(t);return jt(t)&&!e?(t.push(t[0].copy()),t):t},n._getPrjShell=function(){return this.getJSONType()===Pa?this._getPrjCoordinates():(this._verifyProjection(),this._getProjection()&&!this._prjShell&&(this._prjShell=this._projectCoords(this.getShell())),this._prjShell)},n._getPrjHoles=function(){var t=this._getProjection();return this._verifyProjection(),t&&!this._prjHoles&&(this._prjHoles=this._projectCoords(this.getHoles())),this._prjHoles},n._computeGeodesicLength=function(t){var e=this.getCoordinates();if(!jt(e))return 0;for(var n=0,r=0,i=e.length;r<i;r++)n+=t.measureLength(e[r]);return n},n._computeGeodesicArea=function(t){var e=this.getCoordinates();if(!jt(e))return 0;for(var n=t.measureArea(e[0]),r=1,i=e.length;r<i;r++)n-=t.measureArea(e[r]);return n},n._updateCache=function(){t.prototype._updateCache.call(this),this._prjHoles&&(this._holes=this._unprojectCoords(this._getPrjHoles()))},n._clearCache=function(){return delete this._prjShell,t.prototype._clearCache.call(this)},n._clearProjection=function(){this._prjHoles&&(this._prjHoles=null),this._prjShell&&(this._prjShell=null),t.prototype._clearProjection.call(this)},e}(Ma);function ja(t){return function(t){function e(){return t.apply(this,arguments)||this}pt(e,t);var n=e.prototype;return n.getCoordinates=function(){return this._coordinates},n.setCoordinates=function(t){var e=t instanceof Ar?t:new Ar(t);if(e.equals(this._coordinates))return this;if(this._coordinates=e,!this.getMap())return this._dirtyCoords=!0,this.onPositionChanged(),this;var n=this._getProjection();return this._setPrjCoordinates(n.project(this._coordinates)),this},n._getCenter2DPoint=function(t){var e=this.getMap();if(!e)return null;var n=this._getPrjCoordinates();return n?(t||(t=e._getResolution()),e._prjToPointAtRes(n,t)):null},n._getPrjCoordinates=function(){var t=this._getProjection();return this._verifyProjection(),!this._pcenter&&t&&this._coordinates&&(this._pcenter=t.project(this._coordinates)),this._pcenter},n._setPrjCoordinates=function(t){this._pcenter=t,this.onPositionChanged()},n._updateCache=function(){this._clearCache();var t=this._getProjection();this._pcenter&&t&&(this._coordinates=t.unproject(this._pcenter))},n._clearProjection=function(){this._pcenter=null,t.prototype._clearProjection.call(this)},n._computeCenter=function(){return this._coordinates?this._coordinates.copy():null},e}(t)}Ra.registerJSONType(Pa);var Ia=new Hr,La={symbol:{markerType:"path",markerPath:[{path:"M8 23l0 0 0 0 0 0 0 0 0 0c-4,-5 -8,-10 -8,-14 0,-5 4,-9 8,-9l0 0 0 0c4,0 8,4 8,9 0,4 -4,9 -8,14z M3,9 a5,5 0,1,0,0,-0.9Z",fill:"#DE3333"}],markerPathWidth:16,markerPathHeight:23,markerWidth:24,markerHeight:34},hitTestForEvent:!1},Na=function(t){function e(e,n){var r;return r=t.call(this,n)||this,r.type="Point",e&&r.setCoordinates(e),r}pt(e,t);var n=e.prototype;return n.getOutline=function(){var t=this.getCoordinates(),n=this.getContainerExtent(),r=this.getMap().coordToContainerPoint(t);return new e(t,{symbol:{markerType:"square",markerWidth:n.getWidth(),markerHeight:n.getHeight(),markerLineWidth:1,markerLineColor:"6b707b",markerFill:"rgba(0, 0, 0, 0)",markerDx:n.xmin-(r.x-n.getWidth()/2),markerDy:n.ymin-(r.y-n.getHeight()/2)}})},n.setSymbol=function(){var e;delete this._fixedExtent;for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.prototype.setSymbol).call.apply(e,[this].concat(r))},n._getSizeSymbol=function(t){for(var e,n={},r=!1,i=!1,o=0;o<so.length;o++){var a=t[so[o]];x(a)||(!r&&ge(a)&&(r=!0,i=!0),n[so[o]]=a)}for(var s=0;s<uo.length;s++){var u=t[uo[s]];x(u)||(!r&&ge(u)&&(r=!0),n[uo[s]]=u)}return r?(e=De(n,this),i&&(e._dynamic=!0)):e=n,e},n._setExternSymbol=function(e){return this._symbol||delete this._fixedExtent,t.prototype._setExternSymbol.call(this,e)},n._isDynamicSize=function(){return this._sizeSymbol&&this._sizeSymbol._dynamic},n._getFixedExtent=function(){if(this._fixedExtent&&!this._isDynamicSize())return this._fixedExtent;this._fixedExtent=this._fixedExtent||new Hr,this._fixedExtent.set(null,null,null,null);var t=this._sizeSymbol;if(!t)return this._fixedExtent;var e=this.getLayer()&&this.getLayer().getRenderer(),n=e&&e.resources,r=this.getTextDesc();if(Array.isArray(t)){Ia.set(1/0,1/0,-1/0,-1/0);for(var i=0;i<t.length;i++)t[i]&&this._fixedExtent._combine(eo(Ia,t[i],n,r&&r[i]))}else this._fixedExtent=eo(this._fixedExtent,t,n,r);return this._fixedExtent},n._isVectorMarker=function(){var t=this._getInternalSymbol();return!Array.isArray(t)&&io(t)},n._canEdit=function(){var t=this._getInternalSymbol();return!Array.isArray(t)&&(io(t)||oo(t)||ro(t))},n._containsPoint=function(e,n){var r=this.getContainerExtent();return n&&(r=r.expand(n)),!!r.contains(e)&&(!this.options["hitTestForEvent"]||t.prototype._containsPoint.call(this,e,n))},n._computeExtent=function(){return Da.call(this,"getCenter")},n._computePrjExtent=function(){return Da.call(this,"_getPrjCoordinates")},n._computeGeodesicLength=function(){return 0},n._computeGeodesicArea=function(){return 0},n._getSprite=function(t,e){return this._getPainter()?this._getPainter().getSprite(t,e):new Ko(this).getSprite(t,e)},e}(ja(aa));function Da(t){var e=this[t]();return e?new Vr(e,e,this._getProjection()):null}Na.mergeOptions(La),Na.registerJSONType("Marker");var Fa={arrowStyle:null,arrowPlacement:"vertex-last"},Ba=function(t){function e(e,n){var r;return r=t.call(this,n)||this,r.type="LineString",e&&r.setCoordinates(e),r}pt(e,t);var n=e.prototype;return n.getOutline=function(){return Ra.prototype.getOutline.call(this)},n.setCoordinates=function(t){return t?(this._coordinates=Ar.toCoordinates(t),this.getMap()?this._setPrjCoordinates(this._projectCoords(this._coordinates)):this.onShapeChanged(),this):(this._coordinates=null,this._setPrjCoordinates(null),this)},n.getCoordinates=function(){return this._coordinates||[]},n.getCenterInExtent=function(t){return this._getCenterInExtent(t,this.getCoordinates(),co)},n._computeGeodesicLength=function(t){return t.measureLength(this.getCoordinates())},n._computeGeodesicArea=function(){return 0},e}(Ma);Ba.mergeOptions(Fa),Ba.registerJSONType("LineString");var za=new Hr,Ua=function(t){function e(e,n){var r;return r=t.call(this,n)||this,r.type="GeometryCollection",r.setGeometries(e),r}pt(e,t);var n=e.prototype;return n.getContainerExtent=function(t){var e=t||new Hr;return this.forEach((function(t){e._combine(t.getContainerExtent(za))})),e},n.setGeometries=function(t){for(var e=this._checkGeometries(t||[]),n=this._getSymbol(),r=this.config(),i=e.length-1;i>=0;i--)e[i]._initOptions(r),e[i]._setParent(this),e[i]._setEventParent(this),n&&e[i].setSymbol(n);return this._geometries=e,this.getLayer()&&(this._bindGeometriesToLayer(),this.onShapeChanged()),this},n.getGeometries=function(){return this._geometries||[]},n.forEach=function(t,e){for(var n=this.getGeometries(),r=0,i=n.length;r<i;r++)n[r]&&(e?t.call(e,n[r],r):t(n[r],r));return this},n.filter=function(t,n){if(!t)return new e;var r=[],i=C(t),o=i?t:Ee(t);return this.forEach((function(t){var e=i?t:Re(t);(n?o.call(n,e):o(e))&&r.push(t)}),this),new e(r)},n.translate=function(t){if(!t)return this;if(this.isEmpty())return this;var e=arguments;return this.forEach((function(t){t&&t.translate&&t.translate.apply(t,e)})),this},n.isEmpty=function(){return!jt(this.getGeometries())},n.remove=function(){return this.forEach((function(t){t._unbind()})),aa.prototype.remove.apply(this,arguments)},n.show=function(){return this.options["visible"]=!0,this.forEach((function(t){t.show()})),this},n.hide=function(){return this.options["visible"]=!1,this.forEach((function(t){t.hide()})),this},n.onConfig=function(t){this.forEach((function(e){e.config(t)}))},n.getSymbol=function(){var e=t.prototype.getSymbol.call(this);if(!e){var n=[],r=!1;this.forEach((function(t){var e=t.getSymbol();e&&!r&&(r=!0),n.push(t.getSymbol())})),r&&(e={children:n})}return e},n.setSymbol=function(t){if(t&&t["children"])this._symbol=null,this.forEach((function(e,n){e.setSymbol(t["children"][n])}));else{var e=this._prepareSymbol(t);this._symbol=e,this.forEach((function(t){t.setSymbol(e)}))}return this.onSymbolChanged(),this},n._setExternSymbol=function(t){return t=this._prepareSymbol(t),this._externSymbol=t,this.forEach((function(e){e._setExternSymbol(t)})),this.onSymbolChanged(),this},n._bindLayer=function(){t.prototype._bindLayer.apply(this,arguments),this._bindGeometriesToLayer()},n._bindGeometriesToLayer=function(){var t=this.getLayer();this.forEach((function(e){e._bindLayer(t)}))},n._checkGeometries=function(t){var e="The geometry added to collection is invalid.";if(t&&!Array.isArray(t)){if(t instanceof aa)return[t];throw new Error(e)}for(var n=0,r=t.length;n<r;n++)if(!this._checkGeo(t[n]))throw new Error(e+" Index: "+n);return t},n._checkGeo=function(t){return t instanceof aa},n._updateCache=function(){this._clearCache(),this.isEmpty()||this.forEach((function(t){t&&t._updateCache&&t._updateCache()}))},n._removePainter=function(){this._painter&&this._painter.remove(),delete this._painter,this.forEach((function(t){t._removePainter()}))},n._computeCenter=function(t){if(!t||this.isEmpty())return null;for(var e=0,n=0,r=0,i=this.getGeometries(),o=0,a=i.length;o<a;o++)if(i[o]){var s=i[o]._computeCenter(t);s&&(e+=s.x,n+=s.y,r++)}return 0===r?null:new Ar(e/r,n/r)},n._containsPoint=function(t,e){if(this.isEmpty())return!1;delete this._pickGeometryIndex;for(var n=this.getGeometries(),r=0,i=n.length;r<i;r++)if(n[r]._containsPoint(t,e))return this._pickGeometryIndex=r,!0;return!1},n._computeExtent=function(t){return Va.call(this,t,"_computeExtent")},n._computePrjExtent=function(t){return Va.call(this,t,"_computePrjExtent")},n._computeGeodesicLength=function(t){if(!t||this.isEmpty())return 0;for(var e=this.getGeometries(),n=0,r=0,i=e.length;r<i;r++)e[r]&&(n+=e[r]._computeGeodesicLength(t));return n},n._computeGeodesicArea=function(t){if(!t||this.isEmpty())return 0;for(var e=this.getGeometries(),n=0,r=0,i=e.length;r<i;r++)e[r]&&(n+=e[r]._computeGeodesicArea(t));return n},n._exportGeoJSONGeometry=function(){var t=[];if(!this.isEmpty())for(var e=this.getGeometries(),n=0,r=e.length;n<r;n++)e[n]&&t.push(e[n]._exportGeoJSONGeometry());return{type:"GeometryCollection",geometries:t}},n._toJSON=function(t){var e,n={type:"Feature",geometry:{type:"GeometryCollection",geometries:this.getGeometries().filter((function(t){return t&&t._toJSON})).map((function(t){var e=t._toJSON();return e.subType?e:t._exportGeoJSONGeometry()}))}},r=this.getId();return x(r)||(n["id"]=r),(x(t["properties"])||t["properties"])&&(e=this._exportProperties()),n["properties"]=e,t.feature=n,t},n._clearProjection=function(){if(!this.isEmpty())for(var t=this.getGeometries(),e=0,n=t.length;e<n;e++)t[e]&&t[e]._clearProjection()},n._getConnectPoints=function(){var t=this.getExtent(),e=[new Ar(t.xmin,t.ymax),new Ar(t.xmax,t.ymin),new Ar(t.xmin,t.ymin),new Ar(t.xmax,t.ymax)];return e},n._getExternalResources=function(){if(this.isEmpty())return[];for(var t,e,n,r=this.getGeometries(),i=[],o={},a=0,s=r.length;a<s;a++)if(r[a]){t=r[a]._getInternalSymbol(),e=Ve(t);for(var u=0,c=e.length;u<c;u++)n=e[u].join(),o[n]||(i.push(e[u]),o[n]=1)}return i},n.startEdit=function(t){var e=this;if(this.isEmpty())return this;t||(t={}),t["symbol"]&&(this._originalSymbol=this.getSymbol(),this.setSymbol(t["symbol"])),this._draggbleBeforeEdit=this.options["draggable"],this.config("draggable",!1);for(var n=this.getGeometries(),r=0,i=n.length;r<i;r++)n[r].startEdit(t);return this._editing=!0,this.hide(),setTimeout((function(){e.fire("editstart")}),1),this},n.endEdit=function(){if(this.isEmpty())return this;for(var t=this.getGeometries(),e=0,n=t.length;e<n;e++)t[e].endEdit();return this._originalSymbol&&(this.setSymbol(this._originalSymbol),delete this._originalSymbol),this._editing=!1,this.show(),this.config("draggable",this._draggbleBeforeEdit),this.fire("editend"),this},n.isEditing=function(){return!!this._editing},e}(aa);function Va(t,e){if(this.isEmpty())return null;for(var n=new Vr,r=this.getGeometries(),i=0,o=r.length;i<o;i++)if(r[i]){var a=r[i][e](t);a&&n._combine(a)}return n}Ua.registerJSONType("GeometryCollection");var Ha=function(t){function e(e,n,r,i){var o;return o=t.call(this,null,i)||this,o.GeometryType=e,o.type=n,o._initData(r),o}pt(e,t);var n=e.prototype;return n.getCoordinates=function(){for(var t=[],e=this.getGeometries(),n=0,r=e.length;n<r;n++){var i=e[n];t.push(i.getShell&&"Polygon"!==i.getJSONType()?[i.getShell()]:i.getCoordinates())}return t},n.setCoordinates=function(t){t=t||[];for(var e=[],n=0,r=t.length;n<r;n++){var i=new this.GeometryType(t[n],this.config());e.push(i)}return this.setGeometries(e),this},n._initData=function(t){t=t||[],t.length&&(t[0]instanceof this.GeometryType?this.setGeometries(t):this.setCoordinates(t))},n._checkGeo=function(t){return t instanceof this.GeometryType},n._exportGeoJSONGeometry=function(){var t=this.getCoordinates(),e=Ar.toNumberArrays(t);return{type:this.getType(),coordinates:e}},n._toJSON=function(t){return{feature:this.toGeoJSON(t)}},e}(Ua),Ga=function(t){function e(e,n){return t.call(this,Na,"MultiPoint",e,n)||this}pt(e,t);var n=e.prototype;return n.findClosest=function(t){if(!t)return null;var e=this.getCoordinates(),n=null,r=1/0;return e.forEach((function(e){var i=Wa(e,t);i<r&&(n=e,r=i)})),n},e}(Ha);function Wa(t,e){var n=e.x-t.x,r=e.y-t.y;return Math.sqrt(n*n+r*r)}Ga.registerJSONType("MultiPoint");var Za=function(t){function e(){return t.apply(this,arguments)||this}pt(e,t);var n=e.prototype;return n.getCenterInExtent=function(t){var e=this.getGeometries(),n=0,r=0,i=0;return e.forEach((function(e){var o=e.getCenterInExtent(t);o&&(n+=o.x*o.count,r+=o.y*o.count,i+=o.count)})),0===i?null:new Ar(n,r)._multi(1/i)},e}(Ha),Ya=function(t){function e(e,n){return t.call(this,Ba,"MultiLineString",e,n)||this}return pt(e,t),e}(Za);Ya.registerJSONType("MultiLineString");var Xa=function(t){function e(e,n){return t.call(this,Ra,"MultiPolygon",e,n)||this}return pt(e,t),e}(Za);Xa.registerJSONType("MultiPolygon");var qa={Marker:Na,LineString:Ba,Polygon:Ra,MultiPoint:Ga,MultiLineString:Ya,MultiPolygon:Xa},Ka={toGeometry:function(t,e){if(O(t)&&(t=Et(t)),Array.isArray(t)){for(var n=[],r=0,i=t.length;r<i;r++){var o=Ka._convert(t[r],e);Array.isArray(o)?St(n,o):n.push(o)}return n}var a=Ka._convert(t,e);return a},_convert:function(t,e){if(!t||x(t["type"]))return null;var n=t["type"];if("Feature"===n){var r=t["geometry"],i=Ka._convert(r);return i?(i.setId(t["id"]),i.setProperties(t["properties"]),e&&e(i),i):null}if("FeatureCollection"===n){var o=t["features"];return o?Ka.toGeometry(o,e):null}if(["Point","LineString","Polygon","MultiPoint","MultiLineString","MultiPolygon"].indexOf(n)>=0){var a="Point"===n?"Marker":n,s=new qa[a](t["coordinates"]);return e&&e(s),s}if("GeometryCollection"===n){var u=t["geometries"];if(!jt(u)){var c=new Ua;return e&&e(c),c}for(var l=[],f=u.length,h=0;h<f;h++)u[h].subType?l.push(aa.getJSONClass(u[h].subType).fromJSON(u[h])):l.push(Ka._convert(u[h]));var p=new Ua(l);return e&&e(p),p}return null}},Qa={numberOfShellPoints:60},$a=function(t){function e(e,n,r){var i;return i=t.call(this,null,r)||this,e&&i.setCoordinates(e),i._radius=n,i}pt(e,t),e.fromJSON=function(t){var n=t["feature"],r=new e(t["coordinates"],t["radius"],t["options"]);return r.setProperties(n["properties"]),r};var n=e.prototype;return n.getRadius=function(){return this._radius},n.setRadius=function(t){return this._radius=t,this.onShapeChanged(),this},n.getShell=function(){for(var t,e,n,r=this._getMeasurer(),i=this.getCoordinates(),o=this.options["numberOfShellPoints"],a=this.getRadius(),s=[],u=0,c=o-1;u<c;u++){t=360*u/c*Math.PI/180,e=a*Math.cos(t),n=a*Math.sin(t);var l=r.locate(i,e,n);s.push(l)}return s.push(s[0]),s},n.getHoles=function(){return[]},n.animateShow=function(){return this.show()},n._containsPoint=function(e,n){var r=this.getMap();if(r.getPitch())return t.prototype._containsPoint.call(this,e,n);var i=r._pointToContainerPoint(this._getCenter2DPoint()),o=this.getSize(),a=x(n)?this._hitTestTolerance():n,s=i.add(o.width/2,o.height/2);return vo(e,i,s,a)},n._computePrjExtent=function(t){var e=this._getMinMax(t);if(!e)return null;var n=this._getPrjCoordinates(),r=e.map((function(e){return t.project(e)})),i=r[0].x-n.x,o=r[1].x-n.x,a=r[2].y-n.y,s=r[3].y-n.y;return new Vr(n.add(i,a),n.add(o,s))},n._computeExtent=function(t){var e=this._getMinMax(t);return e?new Vr(e[0].x,e[2].y,e[1].x,e[3].y,this._getProjection()):null},n._getMinMax=function(t){if(!t||!this._coordinates||x(this._radius))return null;var e=this._radius,n=t.locate(this._coordinates,-e,0),r=t.locate(this._coordinates,e,0),i=t.locate(this._coordinates,0,e),o=t.locate(this._coordinates,0,-e);return[n,r,i,o]},n._computeGeodesicLength=function(){return x(this._radius)?0:2*Math.PI*this._radius},n._computeGeodesicArea=function(){return x(this._radius)?0:Math.PI*Math.pow(this._radius,2)},n._exportGeoJSONGeometry=function(){var t=Ar.toNumberArrays([this.getShell()]);return{type:"Polygon",coordinates:t}},n._toJSON=function(t){var e=this.getCenter(),n=b({},t);n.geometry=!1;var r=this.toGeoJSON(n);return r["geometry"]={type:"Polygon"},{feature:r,subType:"Circle",coordinates:[e.x,e.y],radius:this.getRadius()}},e}(ja(Ra));$a.mergeOptions(Qa),$a.registerJSONType("Circle");var Ja={numberOfShellPoints:80},ts=function(t){function e(e,n,r,i){var o;return o=t.call(this,null,i)||this,e&&o.setCoordinates(e),o.width=n,o.height=r,o}pt(e,t),e.fromJSON=function(t){var n=t["feature"],r=new e(t["coordinates"],t["width"],t["height"],t["options"]);return r.setProperties(n["properties"]),r};var n=e.prototype;return n.getWidth=function(){return this.width},n.setWidth=function(t){return this.width=t,this.onShapeChanged(),this},n.getHeight=function(){return this.height},n.setHeight=function(t){return this.height=t,this.onShapeChanged(),this},n.getShell=function(){for(var t,e,n,r,i=this._getMeasurer(),o=this.getCoordinates(),a=this.options["numberOfShellPoints"],s=this.getWidth(),u=this.getHeight(),c=[],l=Math.pow(s/2,2)*Math.pow(u/2,2),f=Math.pow(s/2,2),h=Math.pow(u/2,2),p=0;p<a;p++){t=360*p/a,e=t*Math.PI/180,n=Math.sqrt(l/(f*Math.pow(Math.tan(e),2)+h)),r=Math.sqrt(l/(h*Math.pow(1/Math.tan(e),2)+f)),t>90&&t<270&&(n*=-1),t>180&&t<360&&(r*=-1);var d=i.locate(o,n,r);c.push(d)}return c},n.getHoles=function(){return[]},n.animateShow=function(){return this.show()},n._containsPoint=function(e,n){var r=this.getMap();if(r.isTransforming())return t.prototype._containsPoint.call(this,e,n);var i=r.getProjection(),o=x(n)?this._hitTestTolerance():n,a=i.projectCoords([this._coordinates,r.locate(this._coordinates,this.getWidth()/2,this.getHeight()/2)],this.options["antiMeridian"]),s=r._prjToContainerPoint(a[0]),u=r._prjToContainerPoint(a[1]);return vo(e,s,u,o)},n._computePrjExtent=function(){return $a.prototype._computePrjExtent.apply(this,arguments)},n._computeExtent=function(){return $a.prototype._computeExtent.apply(this,arguments)},n._getMinMax=function(t){if(!t||!this._coordinates||x(this.width)||x(this.height))return null;var e=this.getWidth(),n=this.getHeight(),r=t.locate(this._coordinates,-e/2,0),i=t.locate(this._coordinates,e/2,0),o=t.locate(this._coordinates,0,-n/2),a=t.locate(this._coordinates,0,n/2);return[r,i,o,a]},n._computeGeodesicLength=function(){if(x(this.width)||x(this.height))return 0;var t=this.width>this.height?this.width:this.height;return 2*Math.PI*t/2-4*Math.abs(this.width-this.height)},n._computeGeodesicArea=function(){return x(this.width)||x(this.height)?0:Math.PI*this.width*this.height/4},n._exportGeoJSONGeometry=function(){var t=Ar.toNumberArrays([this.getShell()]);return{type:"Polygon",coordinates:t}},n._toJSON=function(t){var e=b({},t),n=this.getCenter();e.geometry=!1;var r=this.toGeoJSON(e);return r["geometry"]={type:"Polygon"},{feature:r,subType:"Ellipse",coordinates:[n.x,n.y],width:this.getWidth(),height:this.getHeight()}},e}(ja(Ra));ts.mergeOptions(Ja),ts.registerJSONType("Ellipse");var es=function(t){function e(e,n,r,i){var o;return o=t.call(this,null,i)||this,e&&o.setCoordinates(e),o._width=n,o._height=r,o}pt(e,t),e.fromJSON=function(t){var n=t["feature"],r=new e(t["coordinates"],t["width"],t["height"],t["options"]);return r.setProperties(n["properties"]),r};var n=e.prototype;return n.getCoordinates=function(){return this._coordinates},n.setCoordinates=function(t){if(this._coordinates=t instanceof Ar?t:new Ar(t),!this._coordinates||!this.getMap())return this.onPositionChanged(),this;var e=this._getProjection();return this._setPrjCoordinates(e.project(this._coordinates)),this},n.getWidth=function(){return this._width},n.setWidth=function(t){return this._width=t,this.onShapeChanged(),this},n.getHeight=function(){return this._height},n.setHeight=function(t){return this._height=t,this.onShapeChanged(),this},n.getShell=function(){var t=this._getMeasurer(),e=this._coordinates,n=this.getMap(),r=1,i=-1;if(n){var o=n.getFullExtent();o["left"]>o["right"]&&(r=-1),o["bottom"]>o["top"]&&(i=1)}var a=[];return a.push(e),a.push(t.locate(e,r*this._width,0)),a.push(t.locate(e,r*this._width,i*this._height)),a.push(t.locate(e,0,i*this._height)),a.push(e),a},n.getHoles=function(){return[]},n.animateShow=function(){return this.show()},n._getPrjCoordinates=function(){var t=this._getProjection();return this._verifyProjection(),!this._pnw&&t&&this._coordinates&&(this._pnw=t.project(this._coordinates)),this._pnw},n._setPrjCoordinates=function(t){this._pnw=t,this.onPositionChanged()},n._getPrjShell=function(){var e=t.prototype._getPrjShell.call(this),n=this._getProjection();if(!n.isSphere())return e;for(var r=n.getSphereExtent(),i=r.sx,o=r.sy,a=this._getProjection().getCircum(),s=e[0],u=1,c=e.length;u<c;u++){var l=e[u],f=0,h=0;i*(s.x-l.x)>0&&(f=a.x*i),o*(s.y-l.y)<0&&(h=a.y*o),e[u]._add(f,h)}return e},n._updateCache=function(){this._clearCache();var t=this._getProjection();this._pnw&&t&&(this._coordinates=t.unproject(this._pnw))},n._clearProjection=function(){this._pnw=null,t.prototype._clearProjection.call(this)},n._computeCenter=function(t){return t.locate(this._coordinates,this._width/2,-this._height/2)},n._containsPoint=function(e,n){var r=this.getMap();if(r.isTransforming())return t.prototype._containsPoint.call(this,e,n);var i=x(n)?this._hitTestTolerance():n,o=r._getResolution()*i,a=this._getPrjExtent().expand(o),s=r._containerPointToPrj(e);return a.contains(s)},n._computePrjExtent=function(t){var e=this._getSouthEast(t);if(!e)return null;var n=t.projectCoords([new Ar(this._coordinates.x,e.y),new Ar(e.x,this._coordinates.y)],this.options["antiMeridian"]);return new Vr(n[0],n[1])},n._computeExtent=function(t){var e=this._getSouthEast(t);return e?new Vr(this._coordinates,e,this._getProjection()):null},n._getSouthEast=function(t){if(!t||!this._coordinates||x(this._width)||x(this._height))return null;var e=this.getWidth(),n=this.getHeight(),r=e,i=-n;if(t.fullExtent){var o=t.fullExtent,a=o.right>o.left?1:-1,s=o.top>o.bottom?1:-1;r*=a,i*=s}var u=t.locate(this._coordinates,r,0),c=t.locate(this._coordinates,0,i);return u.y=c.y,u},n._computeGeodesicLength=function(){return x(this._width)||x(this._height)?0:2*(this._width+this._height)},n._computeGeodesicArea=function(){return x(this._width)||x(this._height)?0:this._width*this._height},n._exportGeoJSONGeometry=function(){var t=Ar.toNumberArrays([this.getShell()]);return{type:"Polygon",coordinates:t}},n._toJSON=function(t){var e=b({},t),n=this.getCoordinates();e.geometry=!1;var r=this.toGeoJSON(e);return r["geometry"]={type:"Polygon"},{feature:r,subType:"Rectangle",coordinates:[n.x,n.y],width:this.getWidth(),height:this.getHeight()}},e}(Ra);es.registerJSONType("Rectangle");var ns={numberOfShellPoints:60},rs=function(t){function e(e,n,r,i,o){var a;return a=t.call(this,e,n,o)||this,a.startAngle=r,a.endAngle=i,a}pt(e,t),e.fromJSON=function(t){var n=t["feature"],r=new e(t["coordinates"],t["radius"],t["startAngle"],t["endAngle"],t["options"]);return r.setProperties(n["properties"]),r};var n=e.prototype;return n.getStartAngle=function(){return this.startAngle},n.setStartAngle=function(t){return this.startAngle=t,this.onShapeChanged(),this},n.getEndAngle=function(){return this.endAngle},n.setEndAngle=function(t){return this.endAngle=t,this.onShapeChanged(),this},n.getShell=function(){for(var t,e,n,r=this._getMeasurer(),i=this.getCoordinates(),o=this.options["numberOfShellPoints"]-2,a=this.getRadius(),s=[i.copy()],u=this.getStartAngle(),c=this.getEndAngle()-u,l=0;l<o;l++){t=(c*l/(o-1)+u)*Math.PI/180,e=a*Math.cos(t),n=a*Math.sin(t);var f=r.locate(i,e,n);s.push(f)}return s.push(i.copy()),s},n._containsPoint=function(e,n){var r=this.getMap();if(r.isTransforming())return t.prototype._containsPoint.call(this,e,n);var i=r._pointToContainerPoint(this._getCenter2DPoint()),o=x(n)?this._hitTestTolerance():n,a=this.getSize(),s=i,u=e,c=u.x-s.x,l=s.y-u.y,f=Math.atan2(l,c),h=f<0?360*(f+2*Math.PI)/(2*Math.PI):360*f/(2*Math.PI),p=this.startAngle%360,d=this.endAngle%360,v=!1;return v=p>d?!(h>d&&h<p):h>=p&&h<=d,u.distanceTo(s)<=a.width/2+o&&v},n._computeGeodesicLength=function(){return x(this._radius)?0:2*Math.PI*this._radius*Math.abs(this.startAngle-this.endAngle)/360+2*this._radius},n._computeGeodesicArea=function(){return x(this._radius)?0:Math.PI*Math.pow(this._radius,2)*Math.abs(this.startAngle-this.endAngle)/360},n._toJSON=function(t){var e=b({},t),n=this.getCenter();e.geometry=!1;var r=this.toGeoJSON(e);return r["geometry"]={type:"Polygon"},{feature:r,subType:"Sector",coordinates:[n.x,n.y],radius:this.getRadius(),startAngle:this.getStartAngle(),endAngle:this.getEndAngle()}},e}($a);rs.mergeOptions(ns),rs.registerJSONType("Sector");var is={enableSimplify:!1,enableClip:!1},os=function(t){function e(){return t.apply(this,arguments)||this}pt(e,t);var n=e.prototype;return n._arc=function(t,e,n){for(var r=this.options["arcDegree"]*Math.PI/180,i=1,o=e.length;i<o;i++){var a=ur._arcBetween(t,e[i-1],e[i],r),s=[e[i-1].x+e[i].x-a[0],e[i-1].y+e[i].y-a[1]];e[i-1].nextCtrlPoint=s,e[i].prevCtrlPoint=s,ur._stroke(t,n)}},n._quadraticCurve=function(t,e){if(e.length<=2)ur._path(t,e);else{var n,r;for(n=2,r=e.length;n<r;n+=2)t.quadraticCurveTo(e[n-1].x,e[n-1].y,e[n].x,e[n].y);if(n-=1,n<r)for(;n<r;n++)t.lineTo(e[n].x,e[n].y)}},n._bezierCurve=function(t,e){if(e.length<=3)ur._path(t,e);else{var n,r;for(n=1,r=e.length;n+2<r;n+=3)t.bezierCurveTo(e[n].x,e[n].y,e[n+1].x,e[n+1].y,e[n+2].x,e[n+2].y);if(n<r)for(;n<r;n++)t.lineTo(e[n].x,e[n].y)}},n._getCurveArrowPoints=function(t,e,n,r,i,o){var a,s=e.length;for(a=o;a<s;a+=o){var u=this._getArrowShape(e[a-1],e[a],n,r,i);u&&t.push(u)}if(a-=o,a<s-1)for(a+=1;a<s;a++){var c=this._getArrowShape(e[a-1],e[a],n,r,i);c&&t.push(c)}},e}(Ba);os.mergeOptions(is);var as={arcDegree:90},ss=function(t){function e(){return t.apply(this,arguments)||this}pt(e,t);var n=e.prototype;return n._toJSON=function(t){return{feature:this.toGeoJSON(t),subType:"ArcCurve"}},n._paintOn=function(t,e,n){t.beginPath(),this._arc(t,e,n),ur._stroke(t,n),this._paintArrow(t,e,n)},e.fromJSON=function(t){var n=t["feature"],r=new e(n["geometry"]["coordinates"],t["options"]);return r.setProperties(n["properties"]),r},e}(os);ss.registerJSONType("ArcCurve"),ss.mergeOptions(as);var us=function(t){function e(){return t.apply(this,arguments)||this}pt(e,t),e.fromJSON=function(t){var n=t["feature"],r=new e(n["geometry"]["coordinates"],t["options"]);return r.setProperties(n["properties"]),r};var n=e.prototype;return n._toJSON=function(t){return{feature:this.toGeoJSON(t),subType:"CubicBezierCurve"}},n._paintOn=function(t,e,n){t.beginPath(),t.moveTo(e[0].x,e[0].y),this._bezierCurve(t,e),ur._stroke(t,n),this._paintArrow(t,e,n)},n._getArrowPoints=function(t,e,n,r,i){return this._getCurveArrowPoints(t,e,n,r,i,3)},e}(os);us.registerJSONType("CubicBezierCurve");var cs=function(t){function e(){return t.apply(this,arguments)||this}pt(e,t),e.fromJSON=function(t){var n=t["feature"],r=new e(n["geometry"]["coordinates"],t["options"]);return r.setProperties(n["properties"]),r};var n=e.prototype;return n._toJSON=function(t){return{feature:this.toGeoJSON(t),subType:"QuadBezierCurve"}},n._paintOn=function(t,e,n){t.beginPath(),t.moveTo(e[0].x,e[0].y),this._quadraticCurve(t,e,n),ur._stroke(t,n),this._paintArrow(t,e,n)},n._getArrowPoints=function(t,e,n,r,i){return this._getCurveArrowPoints(t,e,n,r,i,2)},e}(os);cs.registerJSONType("QuadBezierCurve");var ls={textFaceName:"monospace",textSize:12,textLineSpacing:8,textWrapCharacter:"\n",textHorizontalAlignment:"middle",textVerticalAlignment:"middle"},fs={markerType:"square",markerLineColor:"#000",markerLineWidth:2,markerLineOpacity:1,markerFill:"#fff",markerOpacity:1},hs=function(t){function e(){return t.apply(this,arguments)||this}pt(e,t);var n=e.prototype;return n.getContent=function(){return this._content},n.setContent=function(t){var e=this._content;return this._content=Xe(t),this._refresh(),this._fireEvent("contentchange",{old:e,new:t}),this},n.onAdd=function(){this._refresh()},n.toJSON=function(){var e=t.prototype.toJSON.call(this);return delete e["symbol"],e},n.setSymbol=function(e){if(this._refreshing||!e)return t.prototype.setSymbol.call(this,e);var n=this._parseSymbol(e);if(this.setTextStyle){var r=this.getTextStyle()||{};r.symbol=n[0],this.setTextStyle(r)}else this.setTextSymbol&&this.setTextSymbol(n[0]);if(this.setBoxStyle){var i=this.getBoxStyle()||{};i.symbol=n[1],this.setBoxStyle(i)}else this.setBoxSymbol&&this.setBoxSymbol(n[1]);return this},n._parseSymbol=function(t){var e={},n={};for(var r in t)A(t,r)&&(0===r.indexOf("text")?e[r]=t[r]:n[r]=t[r]);return[e,n]},n._getTextSize=function(t){return sn(this._content,t)["size"]},n._getInternalSymbol=function(){return this._symbol},n._getDefaultTextSymbol=function(){return b({},ls)},n._getDefaultBoxSymbol=function(){return b({},fs)},n._getDefaultPadding=function(){return[12,8]},e}(Na),ps={textStyle:{wrap:!0,padding:[12,8],verticalAlignment:"middle",horizontalAlignment:"middle"},boxSymbol:null},ds=function(t){function e(e,n,r,i,o){var a;return void 0===o&&(o={}),a=t.call(this,n,o)||this,a._content=Xe(e),a._width=x(r)?100:r,a._height=x(i)?40:i,o.boxSymbol&&a.setBoxSymbol(o.boxSymbol),o.textStyle&&a.setTextStyle(o.textStyle),a._refresh(),a}pt(e,t);var n=e.prototype;return n.getWidth=function(){return this._width},n.setWidth=function(t){return this._width=t,this._refresh(),this},n.getHeight=function(){return this._height},n.setHeight=function(t){return this._height=t,this._refresh(),this},n.getBoxSymbol=function(){return b({},this.options.boxSymbol)},n.setBoxSymbol=function(t){return this.options.boxSymbol=t?b({},t):t,this.getSymbol()&&this._refresh(),this},n.getTextStyle=function(){return this.options.textStyle?b({},this.options.textStyle):null},n.setTextStyle=function(t){return this.options.textStyle=t?b({},t):t,this.getSymbol()&&this._refresh(),this},e.fromJSON=function(t){var n=t["feature"],r=new e(t["content"],n["geometry"]["coordinates"],t["width"],t["height"],t["options"]);return r.setProperties(n["properties"]),r.setId(n["id"]),t["symbol"]&&r.setSymbol(t["symbol"]),r},n._toJSON=function(t){return{feature:this.toGeoJSON(t),width:this.getWidth(),height:this.getHeight(),subType:"TextBox",content:this._content}},n._refresh=function(){var t,e,n=this.getTextStyle()||{},r=n["padding"]||[12,8];if(ge(this._width)){t=JSON.parse(JSON.stringify(this._width));var i=t.stops;if(i)for(var o=0;o<i.length;o++)i[o][1]=i[o][1]-2*r[0]}else t=this._width-2*r[0];if(ge(this._height)){e=JSON.parse(JSON.stringify(this._height));var a=e.stops;if(a)for(var s=0;s<a.length;s++)a[s][1]=a[s][1]-2*r[1]}else e=this._height-2*r[1];var u=b({},n.symbol||this._getDefaultTextSymbol(),this.options.boxSymbol||this._getDefaultBoxSymbol(),{textName:this._content,markerWidth:this._width,markerHeight:this._height,textHorizontalAlignment:"middle",textVerticalAlignment:"middle",textMaxWidth:t,textMaxHeight:e});n["wrap"]&&!u["textWrapWidth"]&&(u["textWrapWidth"]=t);var c,l=n["horizontalAlignment"];if(u["textDx"]=u["markerDx"]||0,ge(this._width)){c=JSON.parse(JSON.stringify(this._width));var f=c.stops;if(f)for(var h=0;h<f.length;h++)f[h][1]=f[h][1]/2-r[0],"left"===l&&(f[h][1]*=-1)}else c=u["markerWidth"]/2-r[0],"left"===l&&(c*=-1);"left"===l?(u["textHorizontalAlignment"]="right",u["textDx"]=c):"right"===l&&(u["textHorizontalAlignment"]="left",u["textDx"]=c);var p,d=n["verticalAlignment"];if(u["textDy"]=u["markerDy"]||0,ge(this._height)){p=JSON.parse(JSON.stringify(this._height));var v=p.stops;if(v)for(var g=0;g<v.length;g++)v[g][1]=v[g][1]/2-r[1],"top"===d&&(v[g][1]*=-1)}else p=u["markerHeight"]/2-r[1],"top"===d&&(p*=-1);"top"===d?(u["textVerticalAlignment"]="bottom",u["textDy"]=p):"bottom"===d&&(u["textVerticalAlignment"]="top",u["textDy"]=p),this._refreshing=!0,this.updateSymbol(u),delete this._refreshing},n.startEdit=function(e){var n=this._getCompiledSymbol();if(console.log(n["markerWidth"]),ge(this._width)){var r=n["markerWidth"];console.log(r),this._oldWidth=this._width,this.setWidth(r)}if(ge(this._height)){var i=n["markerHeight"];this._oldHeight=this._height,this.setHeight(i)}t.prototype.startEdit.call(this,e)},n.endEdit=function(){var e=this.getMap(),n=e&&e.getZoom();if(this._oldWidth){for(var r=this._width,i=ye(this._oldWidth),o=i(n),a=r/o,s=this._oldWidth.stops,u=0;u<s.length;u++)s[u][1]*=a;this.setWidth(this._oldWidth),delete this._oldWidth}if(this._oldHeight){for(var c=this._height,l=ye(this._oldHeight),f=l(n),h=c/f,p=this._oldHeight.stops,d=0;d<p.length;d++)p[d][1]*=h;this.setHeight(this._oldHeight),delete this._oldHeight}t.prototype.endEdit.call(this)},e}(hs);ds.mergeOptions(ps),ds.registerJSONType("TextBox");var vs={boxStyle:null,textSymbol:null},gs=function(t){function e(e,n,r){var i;return void 0===r&&(r={}),i=t.call(this,n,r)||this,r.textSymbol&&i.setTextSymbol(r.textSymbol),r.boxStyle&&i.setBoxStyle(r.boxStyle),i._content=Xe(e),i._refresh(),i}pt(e,t);var n=e.prototype;return n.getBoxStyle=function(){return this.options.boxStyle?b({},this.options.boxStyle):null},n.setBoxStyle=function(t){return this.options.boxStyle=t?b({},t):t,this._refresh(),this},n.getTextSymbol=function(){return b({},this._getDefaultTextSymbol(),this.options.textSymbol)},n.setTextSymbol=function(t){return this.options.textSymbol=t?b({},t):t,this._refresh(),this},e.fromJSON=function(t){var n=t["feature"],r=new e(t["content"],n["geometry"]["coordinates"],t["options"]);return r.setProperties(n["properties"]),r.setId(n["id"]),t["symbol"]&&r.setSymbol(t["symbol"]),r},n._canEdit=function(){return!1},n._toJSON=function(t){return{feature:this.toGeoJSON(t),subType:"Label",content:this._content}},n._refresh=function(){var t=b({},this.getTextSymbol(),{textName:this._content}),e=this.getBoxStyle();if(e){b(t,e.symbol);var n=this._getBoxSize(t),r=n[1],i=e["padding"]||this._getDefaultPadding(),o=n[0];t["markerWidth"]=o["width"],t["markerHeight"]=o["height"];var a=t["textDx"]||0,s=t["textDy"]||0,u=rn(r,t["textHorizontalAlignment"],t["textVerticalAlignment"])._add(a,s),c=e["horizontalAlignment"]||"middle";t["markerDx"]=u.x,"left"===c?t["markerDx"]+=t["markerWidth"]/2-i[0]:"right"===c?t["markerDx"]-=t["markerWidth"]/2-r["width"]-i[0]:t["markerDx"]+=r["width"]/2;var l=e["verticalAlignment"]||"middle";t["markerDy"]=u.y,"top"===l?t["markerDy"]+=t["markerHeight"]/2-i[1]:"bottom"===l?t["markerDy"]-=t["markerHeight"]/2-r["height"]-i[1]:t["markerDy"]+=r["height"]/2}this._refreshing=!0,this.updateSymbol(t),delete this._refreshing},n._getBoxSize=function(t){t["markerType"]||(t["markerType"]="square");var e,n,r=this.getBoxStyle(),i=this._getTextSize(t),o=r["padding"]||this._getDefaultPadding();return e=i["width"]+2*o[0],n=i["height"]+2*o[1],r["minWidth"]&&(!e||e<r["minWidth"])&&(e=r["minWidth"]),r["minHeight"]&&(!n||n<r["minHeight"])&&(n=r["minHeight"]),[new We(e,n),i]},e}(hs);gs.mergeOptions(vs),gs.registerJSONType("Label");var ms=function(t){return function(t){function e(){return t.apply(this,arguments)||this}pt(e,t),e._hasConnectors=function(t){return!x(t.__connectors)&&t.__connectors.length>0},e._getConnectors=function(t){return t.__connectors};var n=e.prototype;return n.getConnectSource=function(){return this._connSource},n.setConnectSource=function(t){var e=this._connTarget;return this.onRemove(),this._connSource=t,this._connTarget=e,this.onAdd(),this},n.getConnectTarget=function(){return this._connTarget},n.setConnectTarget=function(t){var e=this._connSource;return this.onRemove(),this._connSource=e,this._connTarget=t,this._updateCoordinates(),this._registerEvents(),this},n._updateCoordinates=function(){var t=this.getMap();if(!t&&this._connSource&&(t=this._connSource.getMap()),!t&&this._connTarget&&(t=this._connTarget.getMap()),t&&this._connSource&&this._connTarget){for(var e,n,r=this._connSource._getConnectPoints(),i=this._connTarget._getConnectPoints(),o=0,a=this.getCoordinates(),s=0,u=r.length;s<u;s++)for(var c=r[s],l=0,f=i.length;l<f;l++){var h=i[l],p=t.computeLength(c,h);0===s&&0===l?(e=c,n=h,o=p):p<o&&(e=c,n=h)}jt(a)&&a[0].equals(e)&&a[1].equals(n)||this.setCoordinates([e,n])}},n.onAdd=function(){this._registerEvents(),this._updateCoordinates()},n.onRemove=function(){if(this._connSource&&(this._connSource.__connectors&&Ot(this,this._connSource.__connectors),this._connSource.off("dragging positionchange",this._updateCoordinates,this).off("remove",this.onRemove,this),this._connSource.off("dragstart mousedown mouseover",this._showConnect,this),this._connSource.off("dragend mouseup mouseout",this.hide,this),this._connSource.off("show",this._showConnect,this).off("hide",this.hide,this),delete this._connSource),this._connTarget&&(Ot(this,this._connTarget.__connectors),this._connTarget.off("dragging positionchange",this._updateCoordinates,this).off("remove",this.onRemove,this),this._connTarget.off("show",this._showConnect,this).off("hide",this.hide,this),delete this._connTarget),!(this._connSource instanceof aa)||!(this._connTarget instanceof aa)){var t=this.getMap();t&&t.off("movestart moving moveend zoomstart zooming zoomend rotate pitch fovchange spatialreferencechange",this._updateCoordinates,this)}},n._showConnect=function(){this._connSource&&this._connTarget&&this._connSource.isVisible()&&this._connTarget.isVisible()&&(this._updateCoordinates(),this.show())},n._registerEvents=function(){if(this._connSource&&this._connTarget){this._connSource.__connectors||(this._connSource.__connectors=[]),this._connTarget.__connectors||(this._connTarget.__connectors=[]),this._connSource.__connectors.push(this),this._connTarget.__connectors.push(this),this._connSource.on("dragging positionchange",this._updateCoordinates,this).on("remove",this.remove,this),this._connTarget.on("dragging positionchange",this._updateCoordinates,this).on("remove",this.remove,this),this._connSource.on("show",this._showConnect,this).on("hide",this.hide,this),this._connTarget.on("show",this._showConnect,this).on("hide",this.hide,this);var t=this.options["showOn"];if(this.hide(),"moving"===t?(this._connSource.on("dragstart",this._showConnect,this).on("dragend",this.hide,this),this._connTarget.on("dragstart",this._showConnect,this).on("dragend",this.hide,this)):"click"===t?(this._connSource.on("mousedown",this._showConnect,this).on("mouseup",this.hide,this),this._connTarget.on("mousedown",this._showConnect,this).on("mouseup",this.hide,this)):"mouseover"===t?(this._connSource.on("mouseover",this._showConnect,this).on("mouseout",this.hide,this),this._connTarget.on("mouseover",this._showConnect,this).on("mouseout",this.hide,this)):this._showConnect(),!(this._connSource instanceof aa)||!(this._connTarget instanceof aa)){var e=this.getMap();e&&e.on("movestart moving moveend zoomstart zooming zoomend rotate pitch fovchange spatialreferencechange",this._updateCoordinates,this)}}},e}(t)},ys={showOn:"always"},_s=function(t){function e(e,n,r){var i;return i=t.call(this,null,r)||this,1===arguments.length&&(r=e,e=null,n=null),i._connSource=e,i._connTarget=n,i}return pt(e,t),e}(ms(Ba));_s.mergeOptions(ys),_s.registerJSONType("ConnectorLine");var bs=function(t){function e(e,n,r){var i;return i=t.call(this,null,r)||this,1===arguments.length&&(r=e,e=null,n=null),i._connSource=e,i._connTarget=n,i}return pt(e,t),e}(ms(ss));bs.mergeOptions(ys),bs.registerJSONType("ArcConnectorLine");var xs={drawImmediate:!1},ws=[],Es=function(t){function e(e,n,r){var i;n&&!(n instanceof aa)&&!Array.isArray(n)&&p.indexOf(n.type)<0&&(r=n,n=null),i=t.call(this,e,r)||this,i._maxZIndex=0,i._minZIndex=0,i._initCache(),n&&i.addGeometry(n);var o=i.options["style"];return o&&i.setStyle(o),i}pt(e,t);var n=e.prototype;return n.getGeometryById=function(t){return x(t)||""===t?null:this._geoMap[t]?this._geoMap[t]:null},n.getGeometries=function(t,e){if(!t)return this._geoList.slice(0);for(var n,r,i=[],o=0,a=this._geoList.length;o<a;o++)n=this._geoList[o],r=e?t.call(e,n):t(n),r&&i.push(n);return i},n.getFirstGeometry=function(){return this._geoList.length?this._geoList[0]:null},n.getLastGeometry=function(){var t=this._geoList.length;return 0===t?null:this._geoList[t-1]},n.getCount=function(){return this._geoList.length},n.getExtent=function(){if(0===this.getCount())return null;var t=new Vr(this.getProjection());return this.forEach((function(e){t._combine(e.getExtent())})),t},n.forEach=function(t,e){for(var n=this._geoList.slice(0),r=0,i=n.length;r<i;r++)e?t.call(e,n[r],r):t(n[r],r);return this},n.filter=function(t,e){var n=[],r=C(t),i=r?t:Ee(t);return this.forEach((function(t){var o=r?t:Re(t);(e?i.call(e,o):i(o))&&n.push(t)}),this),n},n.isEmpty=function(){return!this._geoList.length},n.addGeometry=function(t,e){if(!t)return this;if("FeatureCollection"===t.type)return this.addGeometry(Ka.toGeometry(t),e);if(!Array.isArray(t)){var n=arguments.length,r=arguments[n-1];return t=Array.prototype.slice.call(arguments,0,n-1),e=r,r&&S(r)&&("type"in r||r instanceof aa)&&(t.push(r),e=!1),this.addGeometry(t,e)}if(0===t.length)return this;var i;this._initCache(),e&&(i=new Vr),this._toSort=this._maxZIndex>0;for(var o=[],a=0,s=t.length;a<s;a++){var u=t[a];if(!u)throw new Error("Invalid geometry to add to layer("+this.getId()+") at index:"+a);if(!(u instanceof aa)&&(u=aa.fromJSON(u),Array.isArray(u)))for(var c=0,l=u.length;c<l;c++)this._add(u[c],i,a),o.push(u[c]);Array.isArray(u)||(this._add(u,i,a),o.push(u))}var f=this.getMap();if(f&&(this._getRenderer().onGeometryAdd(o),i&&!x(i.xmin))){var h=i.getCenter(),p=f.getFitZoom(i);if(S(e)){var d=C(e.step)?e.step:function(){};f.animateTo({center:h,zoom:p},b({duration:f.options.zoomAnimationDuration,easing:"out"},e),d)}else!0===e&&f.setCenterAndZoom(h,p)}return this.fire("addgeo",{geometries:t}),this},n.getGeoMinZIndex=function(){return this._minZIndex},n.getGeoMaxZIndex=function(){return this._maxZIndex},n._add=function(t,e,n){this._toSort||(this._toSort=0!==t.getZIndex()),this._updateZIndex(t.getZIndex());var r=t.getId();if(!x(r)){if(!x(this._geoMap[r]))throw new Error("Duplicate geometry id in layer("+this.getId()+"):"+r+", at index:"+n);this._geoMap[r]=t}var i=wt();t._setInternalId(i),this._geoList.push(t),this.onAddGeometry(t),t._bindLayer(this),t.onAdd&&t.onAdd(),e&&e._combine(t.getExtent()),t._fireEvent("add",{layer:this}),this._cookedStyles&&this._styleGeometry(t)},n.removeGeometry=function(t){if(!Array.isArray(t))return this.removeGeometry([t]);for(var e=t.length-1;e>=0;e--)t[e]instanceof aa||(t[e]=this.getGeometryById(t[e])),t[e]&&this===t[e].getLayer()&&t[e].remove();return this.fire("removegeo",{geometries:t}),this},n.clear=function(){this._clearing=!0,this.forEach((function(t){t.remove()})),this._geoMap={};var t=this._geoList;this._geoList=[];var e=this._getRenderer();return e&&(e.onGeometryRemove(t),e.clearImageData&&e.clearImageData()),this._clearing=!1,this.fire("clear"),this},n.onRemoveGeometry=function(t){if(t&&!this._clearing&&this===t.getLayer()){var e=t._getInternalId();if(!x(e)){var n=t.getId();x(n)||delete this._geoMap[n];var r=this._findInList(t);r>=0&&this._geoList.splice(r,1),this._getRenderer()&&this._getRenderer().onGeometryRemove([t])}}},n.getStyle=function(){return this.options["style"]?this.options["style"]:null},n.setStyle=function(t){return this.options.style=t,t=dn(t),this._cookedStyles=je(t),this.forEach((function(t){this._styleGeometry(t)}),this),this.fire("setstyle",{style:t}),this},n._styleGeometry=function(t){if(!this._cookedStyles)return!1;for(var e=Re(t),n=0,r=this._cookedStyles.length;n<r;n++)if(!0===this._cookedStyles[n]["filter"](e))return t._setExternSymbol(this._cookedStyles[n]["symbol"]),!0;return!1},n.removeStyle=function(){return this.options.style?(delete this.options.style,delete this._cookedStyles,this.forEach((function(t){t._setExternSymbol(null)}),this),this.fire("removestyle"),this):this},n.onAddGeometry=function(t){var e=this.getStyle();e&&this._styleGeometry(t)},n.hide=function(){for(var t=0,e=this._geoList.length;t<e;t++)this._geoList[t].onHide();return ua.prototype.hide.call(this)},n._initCache=function(){this._geoList||(this._geoList=[],this._geoMap={})},n._updateZIndex=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this._maxZIndex=Math.max(this._maxZIndex,Math.max.apply(Math,e)),this._minZIndex=Math.min(this._minZIndex,Math.min.apply(Math,e))},n._sortGeometries=function(){var t=this;this._toSort&&(this._maxZIndex=0,this._minZIndex=0,this._geoList.sort((function(e,n){return t._updateZIndex(e.getZIndex(),n.getZIndex()),t._compare(e,n)})),this._toSort=!1)},n._compare=function(t,e){return t.getZIndex()===e.getZIndex()?t._getInternalId()-e._getInternalId():t.getZIndex()-e.getZIndex()},n._findInList=function(t){var e=this._geoList.length;if(0===e)return-1;this._sortGeometries();var n,r=0,i=e-1;while(r<=i){if(n=Math.floor((r+i)/2),this._geoList[n]===t)return n;this._compare(this._geoList[n],t)>0?i=n-1:r=n+1}return-1},n._onGeometryEvent=function(t){if(t&&t["target"]){var e=t["type"];"idchange"===e?this._onGeometryIdChange(t):"zindexchange"===e?this._onGeometryZIndexChange(t):"positionchange"===e?this._onGeometryPositionChange(t):"shapechange"===e?this._onGeometryShapeChange(t):"symbolchange"===e?this._onGeometrySymbolChange(t):"show"===e?this._onGeometryShow(t):"hide"===e?this._onGeometryHide(t):"propertieschange"===e&&this._onGeometryPropertiesChange(t)}},n._onGeometryIdChange=function(t){if(t["new"]!==t["old"]||!this._geoMap[t["old"]]||this._geoMap[t["old"]]!==t["target"]){if(!x(t["new"])){if(this._geoMap[t["new"]])throw new Error("Duplicate geometry id in layer("+this.getId()+"):"+t["new"]);this._geoMap[t["new"]]=t["target"]}x(t["old"])||t["new"]===t["old"]||delete this._geoMap[t["old"]]}},n._onGeometryZIndexChange=function(t){t["old"]!==t["new"]&&(this._updateZIndex(t["new"]),this._toSort=!0,this._getRenderer()&&this._getRenderer().onGeometryZIndexChange(t))},n._onGeometryPositionChange=function(t){this._getRenderer()&&this._getRenderer().onGeometryPositionChange(t)},n._onGeometryShapeChange=function(t){this._getRenderer()&&this._getRenderer().onGeometryShapeChange(t)},n._onGeometrySymbolChange=function(t){this._getRenderer()&&this._getRenderer().onGeometrySymbolChange(t)},n._onGeometryShow=function(t){this._getRenderer()&&this._getRenderer().onGeometryShow(t)},n._onGeometryHide=function(t){this._getRenderer()&&this._getRenderer().onGeometryHide(t)},n._onGeometryPropertiesChange=function(t){this._getRenderer()&&this._getRenderer().onGeometryPropertiesChange(t)},n._hasGeoListeners=function(t){if(!t)return!1;Array.isArray(t)||(ws[0]=t,t=ws);for(var e=this.getGeometries()||[],n=0,r=e.length;n<r;n++)for(var i=0,o=t.length;i<o;i++){var a=t[i],s=e[n].listens(a);if(s>0)return!0}return!1},e}(ua);Es.mergeOptions(xs);var Ss=new Hr,Os={debug:!1,enableSimplify:!0,geometryEvents:!0,defaultIconSize:[20,20],cacheVectorOnCanvas:!0,cacheSvgOnCanvas:ht.gecko,enableAltitude:!1,altitudeProperty:"altitude",drawAltitude:!1,sortByDistanceToCamera:!1,roundPoint:!1,altitude:0,clipBBoxBufferSize:3,geometryEventTolerance:1},Cs=function(t){function e(e,n,r){return t.call(this,e,n,r)||this}pt(e,t);var n=e.prototype;return n.onConfig=function(e){if(t.prototype.onConfig.call(this,e),e["enableAltitude"]||e["drawAltitude"]||e["altitudeProperty"]){var n=this.getRenderer();n&&n.setToRedraw&&n.setToRedraw()}},n.identify=function(t,e){void 0===e&&(e={});var n=this.getRenderer();t instanceof Ar||(t=new Ar(t));var r=this.getMap().coordToContainerPoint(t);return e["onlyVisible"]&&n&&n.identifyAtPoint?n.identifyAtPoint(r,e):this._hitGeos(this._geoList,r,e)},n.identifyAtPoint=function(t,e){void 0===e&&(e={});var n=this.getRenderer();return t instanceof yt||(t=new yt(t)),e["onlyVisible"]&&n&&n.identifyAtPoint?n.identifyAtPoint(t,e):this._hitGeos(this._geoList,t,e)},n._hitGeos=function(t,e,n){void 0===n&&(n={});var r=n["filter"],i=[],o=n["tolerance"],a=this.getMap(),s=this.getRenderer(),u=s&&s.getImageData&&s.getImageData();if(u){for(var c=0,l=t.length-1;l>=0;l--){var f=t[l]._hitTestTolerance()+(o||0);f>c&&(c=f)}var h=a.getDevicePixelRatio();u.r=h;for(var p=!1,d=e.x-c,v=e.y-c,g=-c;g<=c;g++){for(var m=-c;m<=c;m++){var y=Math.round((d+g)*h),_=Math.round((v+m)*h),b=_*u.width*4+4*y;if(u.data[b+3]>0){p=!0;break}}if(p)break}if(!p)return i}for(var x=t.length-1;x>=0;x--){var w=t[x];if(w&&w.isVisible()&&w._getPainter()&&w.options["interactive"]){if(!(w instanceof Ba)||!w._getArrowStyle()&&!(w instanceof os)){var E=w.getContainerExtent(Ss);if(o&&(E=E._expand(o)),!E||!E.contains(e))continue}if(w._containsPoint(e,o)&&(!r||r(w))&&(i.push(w),n["count"]&&i.length>=n["count"]))break}}return i},n.getAltitude=function(){return this.options["altitude"]||0},n.toJSON=function(t){t||(t={});var e={type:this.getJSONType(),id:this.getId(),options:this.config()};if(x(t["geometries"])||t["geometries"]){var n;if(t["clipExtent"]){var r=this.getMap(),i=r?r.getProjection():null;n=new Vr(t["clipExtent"],i)}for(var o=[],a=this.getGeometries(),s=0,u=a.length;s<u;s++){var c=a[s],l=c.getExtent();if(l&&(!n||n.intersects(l))){var f=c.toJSON(t["geometries"]);o.push(f)}}e["geometries"]=o}return e},e.fromJSON=function(t){if(!t||"VectorLayer"!==t["type"])return null;for(var n=new e(t["id"],t["options"]),r=t["geometries"],i=[],o=0;o<r.length;o++){var a=aa.fromJSON(r[o]);a&&i.push(a)}return n.addGeometry(i),n},e.getPainterClass=function(){return Ko},e.getCollectionPainterClass=function(){return Jo},e}(Es);Cs.mergeOptions(Os),Cs.registerJSONType("VectorLayer");var Ts="_map_tool",As=function(t){function e(){return t.apply(this,arguments)||this}pt(e,t);var n=e.prototype;return n.addTo=function(t){return t?(this._map=t,t[Ts]&&t[Ts].disable(),this.onAdd&&this.onAdd(),this.enable(),t[Ts]=this,this._fireEvent("add"),this):this},n.getMap=function(){return this._map},n.enable=function(){var t=this._map;return!t||this._enabled||(this._enabled=!0,this._switchEvents("off"),this._registerEvents(),this.onEnable&&this.onEnable(),this._fireEvent("enable")),this},n.disable=function(){return this._enabled&&this._map?(this._enabled=!1,this._switchEvents("off"),this.onDisable&&this.onDisable(),this._fireEvent("disable"),this):this},n.isEnabled=function(){return!!this._enabled},n.remove=function(){return this._map?(this.disable(),this._map&&(delete this._map[Ts],delete this._map),this._fireEvent("remove"),this):this},n._registerEvents=function(){this._switchEvents("on")},n._switchEvents=function(t){var e=this.getEvents();e&&this._map[t](e,this)},n._fireEvent=function(t,e){e||(e={}),this.fire(t,e)},e}(vr(yr)),ks={symbol:{lineColor:"#000",lineWidth:2,lineOpacity:1,polygonFill:"#fff",polygonOpacity:.3},doubleClickZoom:!1,mode:null,once:!1,autoPanAtEdge:!1,ignoreMouseleave:!0,blockGeometryEvents:!1},Ms={},Ps=function(t){function e(e){var n;return n=t.call(this,e)||this,n._checkMode(),n._events={click:n._clickHandler,"mousemove touchmove":n._mouseMoveHandler,dblclick:n._doubleClickHandler,"mousedown touchstart":n._mouseDownHandler,"mouseup touchend":n._mouseUpHandler,mousemove:n._mouseMoveHandler,mousedown:n._mouseDownHandler,mouseup:n._mouseUpHandler},n}pt(e,t),e.registerMode=function(t,e){Ms[t.toLowerCase()]=e},e.getRegisterMode=function(t){return Ms[t.toLowerCase()]};var n=e.prototype;return n.getMode=function(){return this.options["mode"]?this.options["mode"].toLowerCase():null},n.setMode=function(t){return this._geometry&&(this._geometry.remove(),delete this._geometry),this._clearStage(),this._switchEvents("off"),this.options["mode"]=t,this._checkMode(),this.isEnabled()&&(this._switchEvents("on"),this._restoreMapCfg(),this._saveMapCfg()),this},n.getSymbol=function(){var t=this.options["symbol"];return pn(t||this.options["symbol"])},n.setSymbol=function(t){return t?(this.options["symbol"]=t,this._geometry&&this._geometry.setSymbol(t),this):this},n.getCurrentGeometry=function(){return this._geometry},n.onAdd=function(){this._checkMode()},n.onEnable=function(){this._saveMapCfg(),this._drawToolLayer=this._getDrawLayer(),this._clearStage(),this._loadResources();var t=this.getMap();return this.options["autoPanAtEdge"]&&(this._mapAutoPanAtEdge=t.options["autoPanAtEdge"],this._mapAutoPanAtEdge||t.config({autoPanAtEdge:!0})),this._geometryEvents=t.options["geometryEvents"],this.options["blockGeometryEvents"]&&t.config("geometryEvents",!1),this},n.onDisable=function(){var t=this.getMap();return this._restoreMapCfg(),this.endDraw({ignoreEndEvent:!0}),this._map&&(t.removeLayer(this._getDrawLayer()),this.options["autoPanAtEdge"]&&(this._mapAutoPanAtEdge||t.config({autoPanAtEdge:!1}))),this.options["blockGeometryEvents"]&&t.config("geometryEvents",this._geometryEvents),this},n.undo=function(){var t=this._getRegisterMode(),e=t.action;if(!this._shouldRecordHistory(e)||!this._historyPointer)return this;var n=this._clickCoords.slice(0,--this._historyPointer);return t.update(this.getMap().getProjection(),n,this._geometry),this},n.redo=function(){var t=this._getRegisterMode(),e=t.action;if(!this._shouldRecordHistory(e)||x(this._historyPointer)||this._historyPointer===this._clickCoords.length)return this;var n=this._clickCoords.slice(0,++this._historyPointer);return t.update(this.getMap().getProjection(),n,this._geometry),this},n._shouldRecordHistory=function(t){return Array.isArray(t)&&"click"===t[0]&&"mousemove"===t[1]&&"dblclick"===t[2]},n._checkMode=function(){this._getRegisterMode()},n._saveMapCfg=function(){var t=this.getMap();this._mapDoubleClickZoom=t.options["doubleClickZoom"],t.config({doubleClickZoom:this.options["doubleClickZoom"]});for(var e=this._getRegisterMode()["action"],n=!1,r=0;r<e.length;r++)if(e[r].indexOf("mousedown")>=0||e[r].indexOf("touchstart")>=0){n=!0;break}if(n){var i=this.getMap();this._mapDraggable=i.options["draggable"],i.config({draggable:!1})}},n._restoreMapCfg=function(){var t=this.getMap();t.config({doubleClickZoom:this._mapDoubleClickZoom}),x(this._mapDraggable)||t.config("draggable",this._mapDraggable),delete this._mapDraggable,delete this._mapDoubleClickZoom},n._loadResources=function(){var t=this.getSymbol(),e=Ve(t);e.length>0&&this._drawToolLayer._getRenderer().loadResources(e)},n._getProjection=function(){return this._map.getProjection()},n._getRegisterMode=function(){var t=this.getMode(),n=e.getRegisterMode(t);if(!n)throw new Error(t+" is not a valid mode of DrawTool.");return n},n.getEvents=function(){var t=this._getRegisterMode()["action"],e={};if(Array.isArray(t)){for(var n=0;n<t.length;n++)e[t[n]]=this._events[t[n]];return e}return null},n._mouseDownHandler=function(t){this._createGeometry(t)},n._mouseUpHandler=function(t){this.endDraw(t)},n._clickHandler=function(t){var e=this.getMap(),n=this._getRegisterMode();if(this._clickCoords&&this._clickCoords.length){var r=this._clickCoords.length,i=e._pointToPrj(t["point2d"]);if(this._clickCoords[r-1].equals(i))return}if(this._geometry){var o=e._pointToPrj(t["point2d"]);x(this._historyPointer)||(this._clickCoords=this._clickCoords.slice(0,this._historyPointer));var a=this._geometry.snapTo;if(a&&C(a)){var s=this._getSnapResult(a,t.containerPoint);if(o=s.prjCoord,this._clickCoords=this._clickCoords.concat(s.effectedVertex),this._clickCoords[this._clickCoords.length-1].equals(o))return}if(this._clickCoords.push(o),this._historyPointer=this._clickCoords.length,t.drawTool=this,n["update"](e.getProjection(),this._clickCoords,this._geometry,t),"point"===this.getMode())return void this.endDraw(t);this._clickCoords.length<=1?this._fireEvent("drawstart",t):this._fireEvent("drawvertex",t),n["clickLimit"]&&n["clickLimit"]===this._historyPointer&&this.endDraw(t)}else this._createGeometry(t)},n._createGeometry=function(t){var e=this.getMode(),n=this._getRegisterMode(),r=this.getMap()._pointToPrj(t["point2d"]),i=this.getSymbol();if(!this._geometry){this._clickCoords=[r],t.drawTool=this,this._geometry=n["create"](this.getMap().getProjection(),this._clickCoords,t),i&&"point"!==e?this._geometry.setSymbol(i):this.options.hasOwnProperty("symbol")&&this._geometry.setSymbol(this.options["symbol"]),this._addGeometryToStage(this._geometry),this._fireEvent("drawstart",t);var o=this._geometry.snapTo;if(o&&C(o)){var a=this._getSnapResult(o,t.containerPoint),s=this.getMap();if(s&&a){var u=a.prjCoord;this._clickCoords=[u],n["update"](s.getProjection(),this._clickCoords,this._geometry,t)}}}"point"===e&&"mousemove"!==t.type&&this.endDraw(t)},n._mouseMoveHandler=function(t){var e=this.getMap();if(e&&!e.isInteracting())if("point"!==this.getMode()||this._geometry){if(this._geometry){var n=this._getMouseContainerPoint(t);if(this._isValidContainerPoint(n)){var r=e._pointToPrj(t["point2d"]),i=[],o=this._geometry.snapTo;if(o&&C(o)){var a=this._getSnapResult(o,n);r=a.prjCoord,i=a.effectedVertex}var s=e.getProjection();t.drawTool=this;var u=this._getRegisterMode();if(this._shouldRecordHistory(u.action)){var c=this._clickCoords.slice(0,this._historyPointer);if(c&&c.length>0&&r.equals(c[c.length-1]))return;u["update"](s,c.concat(i,[r]),this._geometry,t)}else u["update"](s,r,this._geometry,t);this._fireEvent("mousemove",t)}}}else this._createGeometry(t)},n._doubleClickHandler=function(t){if(this._geometry){var e=this._getMouseContainerPoint(t);if(this._isValidContainerPoint(e)){var n=this._getRegisterMode(),r=this._clickCoords;if(!(r.length<2)){var i=this.getMode();if(!(i&&i.indexOf("polygon")>-1&&r.length<3)){for(var o=this.getMap().getProjection(),a=[r[0]],s=1,u=r.length;s<u;s++)r[s].x===r[s-1].x&&r[s].y===r[s-1].y||a.push(r[s]);a.length<2||this._geometry&&this._geometry instanceof Ra&&a.length<3||(t.drawTool=this,n["update"](o,a,this._geometry,t),this.endDraw(t))}}}}},n._addGeometryToStage=function(t){var e=this._getDrawLayer();e.addGeometry(t)},n.endDraw=function(t){if(!this._geometry||this._ending)return this;this._ending=!0;var e=this._geometry;return this._clearStage(),t=t||{},this._geometry=e,t.ignoreEndEvent||this._fireEvent("drawend",t),delete this._geometry,this.options["once"]&&this.disable(),delete this._ending,delete this._historyPointer,this._vertexes&&(this._vertexes=[]),this},n._clearStage=function(){this._getDrawLayer().clear(),delete this._geometry,delete this._clickCoords},n._getMouseContainerPoint=function(t){var e=this._getRegisterMode()["action"];return(e[0].indexOf("mousedown")>=0||e[0].indexOf("touchstart")>=0)&&Rn(t["domEvent"]),t["containerPoint"]},n._isValidContainerPoint=function(t){var e=this._map.getSize(),n=e["width"],r=e["height"];return!(t.x<0||t.y<0)&&!(t.x>n||t.y>r)},n._getSnapResult=function(t,e){var n=this.getMap(),r=[];if(this.options.edgeAutoComplete){var i=this._clickCoords[(this._historyPointer||1)-1];r.push(n._prjToContainerPoint(i));var o=this._clickCoords[(this._historyPointer||1)-2];o&&r.push(n._prjToContainerPoint(o))}var a=t(e,r);e=(a.effectedVertex?a.point:a)||e;var s=n._containerPointToPrj(e);return a.effectedVertex&&(a.effectedVertex=a.effectedVertex.map((function(t){return n._containerPointToPrj(t)}))),{prjCoord:s,effectedVertex:a.effectedVertex||[]}},n._getDrawLayer=function(){var t=f+"drawtool",e=this._map.getLayer(t);return e||(e=new Cs(t,{enableSimplify:!1,enableAltitude:this.options["enableAltitude"]}),this._map.addLayer(e)),e},n._fireEvent=function(t,e){e||(e={}),e=b({},e),this._geometry&&(e["geometry"]=this._getRegisterMode()["generate"](this._geometry,{drawTool:this}),e.tempGeometry=this._geometry),As.prototype._fireEvent.call(this,t,e)},e}(As);Ps.mergeOptions(ks);var Rs=function(t){function e(e){var n;return n=t.call(this,e)||this,n.drawTool=new Ps({mode:"boxZoom",ignoreMouseleave:!1}),n}pt(e,t);var n=e.prototype;return n.addHooks=function(){this.target.on("_mousedown",this._onMouseDown,this)},n.removeHooks=function(){this.target.off("_mousedown",this._onMouseDown,this),this.drawTool.isEnabled()&&this.drawTool.remove()},n._onMouseDown=function(t){this.target.options["boxZoom"]&&t.domEvent.shiftKey&&this.drawTool.setSymbol(this.target.options["boxZoomSymbol"]).on("drawend",this._boxZoom,this).addTo(this.target)},n._boxZoom=function(t){var e=this.target;this.drawTool.remove();var n=t.geometry,r=n.getCenter(),i=n.getSymbol(),o=i.markerWidth,a=i.markerHeight,s=new Vr(r,e.locateByPoint(r,o,a),e.getProjection()),u=e.getFitZoom(s);e._animateTo({center:s.getCenter(),zoom:u})},e}(mr);ha.mergeOptions({boxZoom:!0,boxZoomSymbol:{markerType:"rectangle",markerLineWidth:3,markerLineColor:"#1bbc9b",markerLineDasharray:[10,5],markerFillOpacity:.1,markerFill:"#1bbc9b",markerWidth:1,markerHeight:1}}),ha.addOnLoadHook("addHandler","boxZoom",Rs);var js=30,Is=function(t){function e(){return t.apply(this,arguments)||this}pt(e,t);var n=e.prototype;return n.addHooks=function(){this.target&&this.target.on("_mousemove",this._onMouseMove,this)},n.removeHooks=function(){this.target&&this.target.off("_mousemove",this._onMouseMove,this)},n._onMouseMove=function(t){var e=this.target;if(e.options["autoPanAtEdge"]){var n=t.containerPoint,r=e.getContainerExtent();if(r){var i,o=n.x,a=n.y,s=r.xmax,u=r.ymax;o<js&&(i=[Math.abs(o-js),0]),a<js&&(i=[0,Math.abs(a-js)]),o+js>s&&(i=[-Math.abs(o+js-s),0]),a+js>u&&(i=[0,-Math.abs(a+js-u)]),i&&e.panBy(i,{duration:1})}}},e}(mr);function Ls(t,e,n){return t*(1-n)+e*n}ha.mergeOptions({autoPanAtEdge:!1}),ha.addOnLoadHook("addHandler","autoPanAtEdge",Is),ha.include({animateTo:function(t,e,n){var r=this;void 0===e&&(e={}),C(e)&&(n=e,e={});var i=this.getProjection(),o=this.getView(),a={},s=!0;for(var u in t)if(A(t,u)&&!x(t[u])&&("prjCenter"===u||!x(o[u])))if(s=!1,"center"===u){var c=new Ar(o[u]),l=new Ar(t[u]);c.equals(l)||(a["center"]=[c,l])}else if("prjCenter"===u){var f=new Ar(this._getPrjCenter()),h=new Ar(t[u]);f.equals(h)||(a["prjCenter"]=[f,h])}else o[u]!==t[u]&&"around"!==u&&(a[u]=[o[u],t[u]]);if(s)return null;this._animPlayer&&(this._isInternalAnimation?"running"===this._animPlayer.playState&&(this._animPlayer.pause(),this._prevAnimPlayer=this._animPlayer):(delete this._prevAnimPlayer,this._stopAnim(this._animPlayer)));var p=t["around"]||new yt(this.width/2,this.height/2),d=this._getRenderer(),v=function(t){d.callInNextFrame(t)},g=this._animPlayer=Aa.animate(a,{easing:e["easing"]||"out",duration:e["duration"]||this.options["zoomAnimationDuration"],framer:v,repeat:e["repeat"]},(function(t){if(r.isRemoved())g.finish();else{if("running"===g.playState){if(t.styles["center"]){var o=t.styles["center"];r._setPrjCenter(i.project(o)),r.onMoving(r._parseEventFromCoord(r.getCenter()))}else if(t.styles["prjCenter"]){var s=t.styles["prjCenter"];r._setPrjCenter(s),r.onMoving(r._parseEventFromCoord(r.getCenter()))}x(t.styles["zoom"])||r.onZooming(t.styles["zoom"],p),x(t.styles["pitch"])||r._setPitch(t.styles["pitch"]),x(t.styles["bearing"])||r._setBearing(t.styles["bearing"]),r._fireEvent("animating")}else"paused"===g.playState&&g!==r._mapAnimPlayer||(g._interupted||(a["center"]?r._setPrjCenter(i.project(a["center"][1])):a["prjCenter"]&&r._setPrjCenter(a["prjCenter"][1]),x(a["pitch"])||r._setPitch(a["pitch"][1]),x(a["bearing"])||r._setBearing(a["bearing"][1])),r._endAnim(g,a,p,e));n&&n(t)}}),this);return this._startAnim(a,p),g},_animateTo:function(t,e,n){return void 0===e&&(e={}),this._mapAnimPlayer&&this._stopAnim(this._mapAnimPlayer),this._isInternalAnimation=!0,this._mapAnimPlayer=this.animateTo(t,e,n),delete this._isInternalAnimation,this._mapAnimPlayer},flyTo:function(t,e,n){var r=this;void 0===e&&(e={}),this._animPlayer&&(this._isInternalAnimation?"running"===this._animPlayer.playState&&(this._animPlayer.pause(),this._prevAnimPlayer=this._animPlayer):(delete this._prevAnimPlayer,this._stopAnim(this._animPlayer))),C(e)&&(n=e,e={}),e=b({curve:1.42},e);var i=this;function o(t,e){return i.getResolution(e)/i.getResolution(t)}var a=t["around"]||new yt(this.width/2,this.height/2),s=this.getMinZoom(),u=this.getMaxZoom(),c=this.getProjection(),l=this.getView(),f=l.zoom,h=l.bearing,p=l.pitch,d="zoom"in t?Rt(+t.zoom,s,u):f,v="bearing"in t?+t.bearing:h,g="pitch"in t?+t.pitch:p,m=c.project(t.center&&new Ar(t.center)||this.getCenter()),y=o(d,f),_=c.project(this.getCenter()),x=m.sub(_),w=e.curve,E=Math.max(this.width,this.height),S=E/y,O=x.mag();if("minZoom"in e){var T=Rt(Math.min(e.minZoom,f,d),s,u),A=E/o(T,f);w=Math.sqrt(A/O*2)}var k=w*w;function M(t){var e=(S*S-E*E+(t?-1:1)*k*k*O*O)/(2*(t?S:E)*k*O);return Math.log(Math.sqrt(e*e+1)-e)}function P(t){return(Math.exp(t)-Math.exp(-t))/2}function R(t){return(Math.exp(t)+Math.exp(-t))/2}function j(t){return P(t)/R(t)}var I=M(0),L=function(t){return R(I)/R(I+w*t)},N=function(t){return E*((R(I)*j(I+w*t)-P(I))/k)/O},D=(M(1)-I)/w;if(Math.abs(O)<1e-6||!isFinite(D)){if(Math.abs(E-S)<1e-6)return this.animateTo(t,e,n);var F=S<E?-1:1;D=Math.abs(Math.log(S/E))/w,N=function(){return 0},L=function(t){return Math.exp(F*w*t)}}var B=this._getRenderer(),z=function(t){B.callInNextFrame(t)},U=this._animPlayer=Aa.animate({k:[0,1]},{easing:e["easing"]||"out",duration:e["duration"]||8,framer:z},(function(i){if(r.isRemoved())U.finish();else{var o=i.styles.k,s=o*D,u=1/L(s),c={};if(t.center){var l=1===o?m:_.add(x.multi(N(s)));c.prjCenter=[m,l]}if(f!==d){var y=1===o?d:r.getZoomForScale(u,f,!0);c.zoom=[f,y]}if(p!==g){var b=Ls(p,g,o);c.pitch=[g,b]}if(h!==v){var w=Ls(h,v,o);c.bearing=[v,w]}if("running"===U.playState){if(c["prjCenter"]){var E=c["prjCenter"];r._setPrjCenter(E[1]),r.onMoving(r._parseEventFromCoord(r.getCenter()))}c["zoom"]&&r.onZooming(c["zoom"][1],a),c["pitch"]&&r._setPitch(c["pitch"][1]),c["bearing"]&&r._setBearing(c["bearing"][1]),r._fireEvent("animating")}else"paused"===U.playState&&U!==r._mapAnimPlayer||(U._interupted||(c["prjCenter"]&&r._setPrjCenter(c["prjCenter"][1]),c["pitch"]&&r._setPitch(c["pitch"][1]),c["bearing"]&&r._setBearing(c["bearing"][1])),r._endAnim(U,c,a,e));n&&n(i)}}));return this._startAnim({center:t.center,zoom:t.zoom!==f,pitch:g!==p,bearing:v!==h},a),this},isAnimating:function(){return!!this._animPlayer},isRotating:function(){return this.isDragRotating()||!!this._animRotating},_endAnim:function(t,e,n,r){delete this._animRotating;var i,o=t._interupted?"animateinterrupted":"animateend";if(t===this._animPlayer&&delete this._animPlayer,t===this._mapAnimPlayer&&delete this._mapAnimPlayer,e["center"])i=t._interupted?this.getCenter():e["center"][1],this.onMoveEnd(this._parseEventFromCoord(i));else if(e["prjCenter"]){var a;a=t._interupted?this._getPrjCenter():e["prjCenter"][1];var s=this._parseEventFromCoord(this.getProjection().unproject(a));s["point2d"]=this._prjToPoint(a),this.onMoveEnd(s)}x(e["zoom"])||(t._interupted?this.onZoomEnd(this.getZoom(),n):r["wheelZoom"]?this.onZooming(e["zoom"][1],n):this.onZoomEnd(e["zoom"][1],n)),o&&this._fireEvent(o),x(e["pitch"])||this.getPitch()||this.getRenderer().setToRedraw(),r["wheelZoom"]||this._resumePrev(t)},_startAnim:function(t,e){this._animPlayer&&((t["center"]||t["prjCenter"])&&this.onMoveStart(),t["zoom"]&&!this.isZooming()&&this.onZoomStart(t["zoom"][1],e),(t["pitch"]||t["bearing"])&&(this._animRotating=!0),this._fireEvent("animatestart"),this._animPlayer.play())},_stopAnim:function(t){t&&(delete this._animRotating,"finished"!==t.playState&&(t._interupted=!0,t.cancel()),t===this._animPlayer&&delete this._animPlayer,t===this._mapAnimPlayer&&delete this._mapAnimPlayer)},_resumePrev:function(t){if(this._prevAnimPlayer){var e=this._prevAnimPlayer;"paused"!==e.playState&&delete this._prevAnimPlayer,t!==e&&(this._animPlayer=e,e.play())}}});var Ns="mousedown mouseup mouseover mouseout mouseenter mouseleave mousemove click dblclick contextmenu keypress touchstart touchmove touchend ";function Ds(t){if(!t._domMouseDownView)return!0;var e=t.getView(),n=t._domMouseDownView;return e.bearing!==n.bearing||e.pitch!==n.pitch}function Fs(t,e,n,r,i){var o=1/Math.tan(e/2),a=1/(r-i);return t[0]=o/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=o,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=(i+r)*a,t[11]=-1,t[12]=0,t[13]=0,t[14]=2*i*r*a,t[15]=0,t}function Bs(t,e,n){var r,i,o,a,s,u,c,l,f,h,p,d,v=n[0],g=n[1],m=n[2];return e===t?(t[12]=e[0]*v+e[4]*g+e[8]*m+e[12],t[13]=e[1]*v+e[5]*g+e[9]*m+e[13],t[14]=e[2]*v+e[6]*g+e[10]*m+e[14],t[15]=e[3]*v+e[7]*g+e[11]*m+e[15]):(r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],c=e[6],l=e[7],f=e[8],h=e[9],p=e[10],d=e[11],t[0]=r,t[1]=i,t[2]=o,t[3]=a,t[4]=s,t[5]=u,t[6]=c,t[7]=l,t[8]=f,t[9]=h,t[10]=p,t[11]=d,t[12]=r*v+s*g+f*m+e[12],t[13]=i*v+u*g+h*m+e[13],t[14]=o*v+c*g+p*m+e[14],t[15]=a*v+l*g+d*m+e[15]),t}function zs(t,e,n){var r=n[0],i=n[1],o=n[2];return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*o,t[9]=e[9]*o,t[10]=e[10]*o,t[11]=e[11]*o,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function Us(t,e,n){var r=Math.sin(n),i=Math.cos(n),o=e[4],a=e[5],s=e[6],u=e[7],c=e[8],l=e[9],f=e[10],h=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=o*i+c*r,t[5]=a*i+l*r,t[6]=s*i+f*r,t[7]=u*i+h*r,t[8]=c*i-o*r,t[9]=l*i-a*r,t[10]=f*i-s*r,t[11]=h*i-u*r,t}function Vs(t,e,n){var r=Math.sin(n),i=Math.cos(n),o=e[0],a=e[1],s=e[2],u=e[3],c=e[4],l=e[5],f=e[6],h=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*i+c*r,t[1]=a*i+l*r,t[2]=s*i+f*r,t[3]=u*i+h*r,t[4]=c*i-o*r,t[5]=l*i-a*r,t[6]=f*i-s*r,t[7]=h*i-u*r,t}function Hs(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],c=e[6],l=e[7],f=e[8],h=e[9],p=e[10],d=e[11],v=e[12],g=e[13],m=e[14],y=e[15],_=n[0],b=n[1],x=n[2],w=n[3];return t[0]=_*r+b*s+x*f+w*v,t[1]=_*i+b*u+x*h+w*g,t[2]=_*o+b*c+x*p+w*m,t[3]=_*a+b*l+x*d+w*y,_=n[4],b=n[5],x=n[6],w=n[7],t[4]=_*r+b*s+x*f+w*v,t[5]=_*i+b*u+x*h+w*g,t[6]=_*o+b*c+x*p+w*m,t[7]=_*a+b*l+x*d+w*y,_=n[8],b=n[9],x=n[10],w=n[11],t[8]=_*r+b*s+x*f+w*v,t[9]=_*i+b*u+x*h+w*g,t[10]=_*o+b*c+x*p+w*m,t[11]=_*a+b*l+x*d+w*y,_=n[12],b=n[13],x=n[14],w=n[15],t[12]=_*r+b*s+x*f+w*v,t[13]=_*i+b*u+x*h+w*g,t[14]=_*o+b*c+x*p+w*m,t[15]=_*a+b*l+x*d+w*y,t}function Gs(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],u=e[6],c=e[7],l=e[8],f=e[9],h=e[10],p=e[11],d=e[12],v=e[13],g=e[14],m=e[15],y=n*s-r*a,_=n*u-i*a,b=n*c-o*a,x=r*u-i*s,w=r*c-o*s,E=i*c-o*u,S=l*v-f*d,O=l*g-h*d,C=l*m-p*d,T=f*g-h*v,A=f*m-p*v,k=h*m-p*g,M=y*k-_*A+b*T+x*C-w*O+E*S;return M?(M=1/M,t[0]=(s*k-u*A+c*T)*M,t[1]=(i*A-r*k-o*T)*M,t[2]=(v*E-g*w+m*x)*M,t[3]=(h*w-f*E-p*x)*M,t[4]=(u*C-a*k-c*O)*M,t[5]=(n*k-i*C+o*O)*M,t[6]=(g*b-d*E-m*_)*M,t[7]=(l*E-h*b+p*_)*M,t[8]=(a*A-s*C+c*S)*M,t[9]=(r*C-n*A-o*S)*M,t[10]=(d*w-v*b+m*y)*M,t[11]=(f*b-l*w-p*y)*M,t[12]=(s*O-a*T-u*S)*M,t[13]=(n*T-r*O+i*S)*M,t[14]=(v*_-d*x-g*y)*M,t[15]=(l*x-f*_+h*y)*M,t):null}function Ws(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Zs(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function Ys(t,e,n,r){return t[0]=e,t[1]=n,t[2]=r,t}function Xs(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t}function qs(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t}function Ks(t){var e=t[0],n=t[1],r=t[2];return Math.sqrt(e*e+n*n+r*r)}function Qs(t,e){var n=e[0],r=e[1],i=e[2],o=n*n+r*r+i*i;return o>0&&(o=1/Math.sqrt(o),t[0]=e[0]*o,t[1]=e[1]*o,t[2]=e[2]*o),t}function $s(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function Js(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t}function tu(t,e,n){var r=e[0],i=e[1],o=e[2],a=n[0],s=n[1],u=n[2];return t[0]=i*u-o*s,t[1]=o*a-r*u,t[2]=r*s-i*a,t}function eu(t,e){var n=e[0]-t[0],r=e[1]-t[1],i=e[2]-t[2];return Math.hypot?Math.hypot(n,r,i):ru(n,r,i)}function nu(t,e,n){var r=e[0],i=e[1],o=e[2],a=n[3]*r+n[7]*i+n[11]*o+n[15];return a=a||1,t[0]=(n[0]*r+n[4]*i+n[8]*o+n[12])/a,t[1]=(n[1]*r+n[5]*i+n[9]*o+n[13])/a,t[2]=(n[2]*r+n[6]*i+n[10]*o+n[14])/a,t}function ru(){var t=0,e=arguments.length;while(e--)t+=arguments[e]*arguments[e];return Math.sqrt(t)}function iu(t,e,n){var r=e[0],i=e[1],o=e[2],a=1/(n[3]*r+n[7]*i+n[11]*o+n[15]);return t[0]=(n[0]*r+n[4]*i+n[8]*o+n[12])*a,t[1]=(n[1]*r+n[5]*i+n[9]*o+n[13])*a,t[2]=(n[2]*r+n[6]*i+n[10]*o+n[14])*a,t}function ou(t,e){var n,r=e[0],i=e[4],o=e[8],a=e[1],s=e[5],u=e[9],c=e[2],l=e[6],f=e[10],h=r+s+f;return h>0?(n=.5/Math.sqrt(h+1),t.w=.25/n,t.x=(l-u)*n,t.y=(o-c)*n,t.z=(a-i)*n):r>s&&r>f?(n=2*Math.sqrt(1+r-s-f),t.w=(l-u)/n,t.x=.25*n,t.y=(i+a)/n,t.z=(o+c)/n):s>f?(n=2*Math.sqrt(1+s-r-f),t.w=(o-c)/n,t.x=(i+a)/n,t.y=.25*n,t.z=(u+l)/n):(n=2*Math.sqrt(1+f-r-s),t.w=(a-i)/n,t.x=(o+c)/n,t.y=(u+l)/n,t.z=.25*n),this}function au(t,e){var n=t,r=e.x,i=e.y,o=e.z,a=e.w,s=r+r,u=i+i,c=o+o,l=r*s,f=r*u,h=r*c,p=i*u,d=i*c,v=o*c,g=a*s,m=a*u,y=a*c;return n[0]=1-(p+v),n[4]=f-y,n[8]=h+m,n[1]=f+y,n[5]=1-(l+v),n[9]=d-g,n[2]=h-m,n[6]=d+g,n[10]=1-(l+p),n[3]=0,n[7]=0,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n}function su(t,e){var n=t;return n[12]=e[0],n[13]=e[1],n[14]=e[2],t}function uu(t,e,n,r){var i=[0,0,0],o=[0,0,0],a=[0,0,0];return qs(a,e,n),0===Ks(a)&&(a[2]=1),Qs(a,a),tu(i,r,a),0===Ks(a)&&(1===Math.abs(r[2])?a[0]+=1e-4:a[2]+=1e-4,Qs(a,a),tu(i,r,a)),Qs(i,i),tu(o,a,i),t[0]=i[0],t[4]=o[0],t[8]=a[0],t[1]=i[1],t[5]=o[1],t[9]=a[1],t[2]=i[2],t[6]=o[2],t[10]=a[2],t}ha.include({_registerDomEvents:function(){var t=this._panels.mapWrapper||this._containerDOM;An(t,Ns,this._handleDOMEvent,this)},_removeDomEvents:function(){var t=this._panels.mapWrapper||this._containerDOM;kn(t,Ns,this._handleDOMEvent,this)},_handleDOMEvent:function(t){var e=this.options["clickTimeThreshold"],n=t.type,r="mousedown"===n||"touchstart"===n&&(!t.touches||1===t.touches.length);r&&(this._domMouseDownTime=_(),this._domMouseDownView=this.getView());var i="contextmenu"===n&&Ds(this);if("contextmenu"===n){Pn(t);var o=this._domMouseDownTime,a=_();a-o<=e&&!i&&this._fireDOMEvent(this,t,"dom:"+t.type)}else this._fireDOMEvent(this,t,"dom:"+t.type);if(!this._ignoreEvent(t)){var s,u=!1;if(r)this._mouseDownTime=_();else if("click"===n||"touchend"===n||"contextmenu"===n){if(!this._mouseDownTime)return;var c=this._mouseDownTime;delete this._mouseDownTime;var l=_();if(l-c>e){if("click"===n||"contextmenu"===n)return}else if("contextmenu"===n){if(i)return}else"touchend"===n&&(u=!0)}u&&(this._clickTime&&_()-this._clickTime<=e?(delete this._clickTime,s="dblclick",this._fireDOMEvent(this,t,"dom:dblclick")):(this._clickTime=_(),s="click",this._fireDOMEvent(this,t,"dom:click"))),this._ignoreEvent(t)||(this._fireDOMEvent(this,t,n),s&&this._fireDOMEvent(this,t,s))}},_ignoreEvent:function(t){if(!t||!this._panels.control)return!1;if(this._isEventOutMap(t))return!0;var e,n=t.srcElement||t.target;if(n)while(n&&n!==this._containerDOM){if(n.className&&n.className.indexOf&&(n.className.indexOf("maptalks-control")>=0||n.className.indexOf("maptalks-ui")>=0&&e&&!e["eventsPropagation"]))return!0;e=n,n=n.parentNode}return!1},_isEventOutMap:function(t){if(this.getPitch()>this.options["maxVisualPitch"]){var e=this._getActualEvent(t),n=Nn(e,this._containerDOM);if(!this.getContainerExtent().contains(n))return!0}return!1},_parseEvent:function(t,e){if(!t)return null;var n={domEvent:t};if("keypress"!==e){var r=this._getActualEvent(t);if(r&&void 0!==r.clientX){var i=Nn(r,this._containerDOM);n=b(n,{containerPoint:i,viewPoint:this.containerPointToViewPoint(i)});var o=this.options["maxVisualPitch"];(this.getPitch()<=o||i.y>=this.height-this._getVisualHeight(o))&&(n=b(n,{coordinate:this.containerPointToCoord(i),point2d:this._containerPointToPoint(i)}))}}return n},_parseEventFromCoord:function(t){var e=this.coordToContainerPoint(t),n=this.containerPointToViewPoint(e),r={coordinate:t,containerPoint:e,viewPoint:n,point2d:this.coordToPoint(t)};return r},_getActualEvent:function(t){return t.touches&&t.touches.length>0?t.touches[0]:t.changedTouches&&t.changedTouches.length>0?t.changedTouches[0]:t},_fireDOMEvent:function(t,e,n){if(!this.isRemoved()){var r=this._parseEvent(e,n);this._fireEvent(n,r)}},_getEventParams:function(t){var e=this,n={domEvent:t},r=t.touches&&t.touches.length>0?t.touches[0]:t.changedTouches&&t.changedTouches.length>0?t.changedTouches[0]:t;if(r){var i=Nn(r,e._containerDOM);n["coordinate"]=e.containerPointToCoordinate(i),n["containerPoint"]=i,n["viewPoint"]=e.containerPointToViewPoint(i),n["pont2d"]=e._containerPointToPoint(i)}return n}}),ha.addOnLoadHook("_registerDomEvents"),ha.include({isFullScreen:function(){return!!(document.webkitIsFullScreen||document.mozFullScreen||document.msFullscreenElement||document.fullscreenElement)},requestFullScreen:function(t){return this._fireEvent("fullscreenstart"),this._requestFullScreen(t||this._containerDOM),this._fireEvent("fullscreenend"),this},cancelFullScreen:function(){return this._cancelFullScreen(),this._fireEvent("cancelfullscreen"),this},_requestFullScreen:function(t){if(t.requestFullscreen)t.requestFullscreen();else if(t.mozRequestFullScreen)t.mozRequestFullScreen();else if(t.webkitRequestFullScreen)t.webkitRequestFullScreen();else if(t.msRequestFullScreen)t.msRequestFullScreen();else{var e="fullscreen=1,status=no,resizable=yes,top=0,left=0,scrollbars=no,titlebar=no,menubar=no,location=no,toolbar=no,z-look=yes,width="+(screen.availWidth-8)+",height="+(screen.availHeight-45),n=window.open(location.href,"_blank",e);null!==n&&(window.opener=null,window.close())}},_cancelFullScreen:function(){if(document.exitFullscreen)document.exitFullscreen();else if(document.mozCancelFullScreen)document.mozCancelFullScreen();else if(document.webkitCancelFullScreen)document.webkitCancelFullScreen();else{var t="fullscreen=no,status=yes,resizable=yes,scrollbars=no,titlebar=no,menubar=yes,location=yes,toolbar=yes,z-look=yes",e=window.open(location.href,"_blank",t);null!==e&&(window.opener=null,window.close())}}}),ha.include({panTo:function(t,e,n){if(void 0===e&&(e={}),!t)return this;if(C(e)&&(n=e,e={}),t=new Ar(t),"undefined"===typeof e["animation"]||e["animation"]){var r=this.getProjection().project(t);return this._panAnimation(r,e["duration"],n)}return this.setCenter(t),this},_panTo:function(t,e){return void 0===e&&(e={}),"undefined"===typeof e["animation"]||e["animation"]?this._panAnimation(t,e["duration"]):(this.onMoveStart(),this._setPrjCenter(t),this.onMoveEnd(this._parseEventFromCoord(this.getCenter())),this)},panBy:function(t,e,n){if(void 0===e&&(e={}),!t)return this;C(e)&&(n=e,e={}),t=new yt(t);var r=this.getContainerExtent(),i=r.ymin;if(i>0&&t.y>30){var o=t.y;t.y=30,t.x=30*t.x/o,console.warn("offset is limited to panBy when pitch is above maxPitch")}if(this.onMoveStart(),"undefined"===typeof e["animation"]||e["animation"]){t=t.multi(-1);var a=this._containerPointToPrj(new yt(this.width/2+t.x,this.height/2+t.y));this._panAnimation(a,e["duration"],n)}else this._offsetCenterByPixel(t),this.onMoveEnd(this._parseEventFromCoord(this.getCenter()));return this},_panAnimation:function(t,e,n){return this._animateTo({prjCenter:t},{duration:e||this.options["panAnimationDuration"]},n)}}),aa.fromJSON=function(t){if(Array.isArray(t)){for(var e=[],n=0,r=t.length;n<r;n++){var i=aa.fromJSON(t[n]);Array.isArray(t)?e=e.concat(i):e.push(i)}return e}return t&&!t["feature"]?Ka.toGeometry(t):(t["subType"]?(o=aa.getJSONClass(t["subType"]).fromJSON(t),x(t["feature"]["id"])||o.setId(t["feature"]["id"])):(o=Ka.toGeometry(t["feature"]),t["options"]&&o.config(t["options"])),t["symbol"]&&o.setSymbol(t["symbol"]),t["infoWindow"]&&o.setInfoWindow(t["infoWindow"]),o);var o},ua.fromJSON=function(t){if(!t)return null;var e=t["type"],n=ua.getJSONClass(e);if(!n||!n.fromJSON)throw new Error("unsupported layer type:"+e);return n.fromJSON(t)},ha.include({JSON_VERSION:"1.0",toJSON:function(t){t||(t={});var e={jsonVersion:this["JSON_VERSION"],version:this.VERSION,extent:this.getExtent().toJSON()};e["options"]=this.config(),e["options"]["center"]=this.getCenter(),e["options"]["zoom"]=this.getZoom(),e["options"]["bearing"]=this.getBearing(),e["options"]["pitch"]=this.getPitch();var n=this.getBaseLayer();(x(t["baseLayer"])||t["baseLayer"])&&n&&(e["baseLayer"]=n.toJSON(t["baseLayer"]));var r={};t["clipExtent"]&&(!0===t["clipExtent"]?r["clipExtent"]=this.getExtent():r["clipExtent"]=t["clipExtent"]);var i=[];if(x(t["layers"])||t["layers"]&&!Array.isArray(t["layers"])){for(var o=this.getLayers(),a=0,s=o.length;a<s;a++)if(o[a].toJSON){var u=b({},S(t["layers"])?t["layers"]:{},r);i.push(o[a].toJSON(u))}e["layers"]=i}else if(jt(t["layers"])){for(var c=t["layers"],l=0;l<c.length;l++){var f=c[l],h=this.getLayer(f["id"]);if(h.toJSON){var p=b({},f["options"],r);i.push(h.toJSON(p))}}e["layers"]=i}else e["layers"]=[];return e}}),ha.fromJSON=function(t,e,n){if(!t||!e)return null;n||(n={});var r=new ha(t,e["options"]);if(x(n["baseLayer"])||n["baseLayer"]){var i=ua.fromJSON(e["baseLayer"]);i&&r.setBaseLayer(i)}if(x(n["layers"])||n["layers"]){for(var o=[],a=e["layers"],s=0;s<a.length;s++){var u=ua.fromJSON(a[s]);o.push(u)}r.addLayer(o)}return r},ha.include({computeLength:function(t,e){if(!this.getProjection())return null;var n=new Ar(t),r=new Ar(e);return n.equals(r)?0:this.getProjection().measureLength(n,r)},computeGeometryLength:function(t){return t._computeGeodesicLength(this.getProjection())},computeGeometryArea:function(t){return t._computeGeodesicArea(this.getProjection())},identify:function(t,e){t=t||{};var n=new Ar(t["coordinate"]);return this._identify(t,e,(function(e){return e.identify(n,t)}))},identifyAtPoint:function(t,e){t=t||{};var n=new yt(t["containerPoint"]),r=this.containerPointToCoord(n);return this._identify(t,e,(function(e){return e.identifyAtPoint?e.identifyAtPoint(n,t):r?e.identify(r,t):[]}))},_identify:function(t,e,n){var r=t["layers"];if(!jt(r))return this;for(var i=t.eventTypes,o=[],a=0,s=r.length;a<s;a++)O(r[a])?o.push(this.getLayer(r[a])):o.push(r[a]);i&&(o=o.filter((function(t){return!t._hasGeoListeners||t._hasGeoListeners(i)})));for(var u=[],c=o.length-1;c>=0;c--){if(t["count"]&&u.length>=t["count"])break;var l=o[c];if(l&&l.getMap()&&(t["includeInvisible"]||l.isVisible())&&(t["includeInternals"]||!(l.getId().indexOf(f)>=0))){var h=n(l);h&&(Array.isArray(h)?St(u,h):u.push(h))}}return e.call(this,u),this}}),ha.include({_zoom:function(t,e){this.options["zoomable"]&&!this.isZooming()&&(e=this._checkZoomOrigin(e),t=this._checkZoom(t),this.onZoomStart(t,e),this._frameZoom=this.getZoom(),this.onZoomEnd(t,e))},_zoomAnimation:function(t,e,n){this.options["zoomable"]&&!this.isZooming()&&(t=this._checkZoom(t),this.getZoom()!==t&&(e=this._checkZoomOrigin(e),this._startZoomAnim(t,e,n)))},_checkZoomOrigin:function(t){return t&&!this.options["zoomInCenter"]||(t=new yt(this.width/2,this.height/2)),this.options["zoomOrigin"]&&(t=new yt(this.options["zoomOrigin"])),t},_startZoomAnim:function(t,e,n){x(n)&&(n=1);var r=this._getResolution(this._startZoomVal)/this._getResolution(t),i=this.options["zoomAnimationDuration"]*Math.abs(r-n)/Math.abs(r-1);this._frameZoom=this._startZoomVal,this._animateTo({zoom:t,around:e},{continueOnViewChanged:!0,duration:i})},onZoomStart:function(t,e){this.options["zoomable"]&&!this.isZooming()&&(this._mapAnimPlayer&&this._stopAnim(this._mapAnimPlayer),this._zooming=!0,this._startZoomVal=this.getZoom(),this._startZoomCoord=this._containerPointToPrj(e),this._fireEvent("zoomstart",{from:this._startZoomVal,to:t}))},onZooming:function(t,e,n){if(this.options["zoomable"]){var r=this._frameZoom;if(r!==t){x(n)&&(n=1),this._zoomTo(t,e);var i=this.getResolution(t),o=this.getResolution(this._startZoomVal),a=o/i/n,s=this._prjToContainerPoint(this._startZoomCoord,this._startZoomVal),u=this.getViewPoint();if(!this.isRotating()&&!s.equals(e)&&1!==a){var c=this.getPitch(),l=s._sub(e)._multi(1/(1-a));c&&(l.y/=Math.cos(c*Math.PI/180)),e=e.add(l)}var f={view:[a,0,0,a,(e.x-u.x)*(1-a),(e.y-u.y)*(1-a)]},h=this.getDevicePixelRatio();1!==h&&(e=e.multi(h)),f["container"]=[a,0,0,a,e.x*(1-a),e.y*(1-a)],this._fireEvent("zooming",{from:this._startZoomVal,to:t,origin:e,matrix:f}),this._frameZoom=t}}},onZoomEnd:function(t,e){if(this.options["zoomable"]){var n=this._startZoomVal;this._zoomTo(t,e),this._zooming=!1,this._getRenderer().onZoomEnd(),this._fireEvent("zoomend",{from:n,to:t}),this._verifyExtent(this._getPrjCenter())||this._panTo(this._prjMaxExtent.getCenter())}},_zoomTo:function(t,e){this._zoomLevel=t,this._calcMatrices(),e&&this._setPrjCoordAtContainerPoint(this._startZoomCoord,e)},_checkZoom:function(t){var e=this.getMaxZoom(),n=this.getMinZoom();return t<n&&(t=n),t>e&&(t=e),t}});var cu=Math.PI/180,lu=.6435011087932844,fu=new Ar(0,0);function hu(){return Ws(new Array(16))}ha.include({getFov:function(){return this._fov||(this._fov=lu),this._fov/cu},setFov:function(t){if(this.isZooming())return this;if(t=Math.max(.01,Math.min(60,t)),this._fov===t)return this;var e=this.getFov();return this._fov=t*cu,this._calcMatrices(),this._renderLayers(),this._fireEvent("fovchange",{from:e,to:this.getFov()}),this},getBearing:function(){return this._angle?-this._angle/cu:0},setBearing:function(t){return this._mapAnimPlayer&&this._stopAnim(this._mapAnimPlayer),this._setBearing(t)},_setBearing:function(t){if(ht.ie9)throw new Error("map can't rotate in IE9.");var e=-Pt(t,-180,180)*cu;if(this._angle===e)return this;var n=this.getBearing();return this._fireEvent("rotatestart",{from:n,to:e}),this._angle=e,this._calcMatrices(),this._renderLayers(),this._fireEvent("rotate",{from:n,to:e}),this._fireEvent("rotateend",{from:n,to:e}),this},getPitch:function(){return this._pitch?this._pitch/Math.PI*180:0},setPitch:function(t){return this._mapAnimPlayer&&this._stopAnim(this._mapAnimPlayer),this._setPitch(t)},_setPitch:function(t){if(ht.ie9)throw new Error("map can't tilt in IE9.");var e=Rt(t,0,this.options["maxPitch"])*cu;if(this._pitch===e)return this;var n=this.getPitch();return this._fireEvent("pitchstart",{from:n,to:e}),this._pitch=e,this._calcMatrices(),this._renderLayers(),this._fireEvent("pitch",{from:n,to:e}),this._fireEvent("pitchend",{from:n,to:e}),this},isTransforming:function(){return!(!this._pitch&&!this._angle)},getFrustumAltitude:function(){return this._frustumAltitude},_calcFrustumAltitude:function(){var t=90-this.getPitch(),e=this.getFov()/2,n=this.cameraPosition?this.cameraPosition[2]:0;if(e<=t)return n;e=Math.PI*e/180;var r=new yt(this.cameraPosition).distanceTo(new yt(this.cameraLookAt)),i=n*Math.tan(2*e),o=Math.tan(e)*(r+i);return n+o},_pointToContainerPoint:function(t,e,n,r){void 0===n&&(n=0);var i=this._getResolution(e);return this._pointAtResToContainerPoint(t,i,n,r)},_pointAtResToContainerPoint:function(t,e,n,r){void 0===n&&(n=0),r||(r=new yt(0,0)),t=this._pointAtResToPoint(t,e,r);var i,o=this.isTransforming(),a=e/this._getResolution();return o||n||(i=this._prjToPoint(this._getPrjCenter(),void 0,fu)),this._toContainerPoint(r,o,a,n,i),r},_pointsAtResToContainerPoints:function(t,e,n,r){void 0===n&&(n=[]),void 0===r&&(r=[]);var i=this.getPitch(),o=this.getBearing();if(0===i&&0===o){var a=this._get2DExtent(),s=a.xmin,u=a.ymin,c=a.xmax,l=a.ymax;if(c>s&&l>u){for(var f=e/this._getResolution(),h=this.getSize(),p=h.width,d=h.height,v=(c-s)/p,g=(l-u)/d,m=0,y=t.length;m<y;m++)if(t[m]){var _=r[m];_.x=t[m].x,_.y=t[m].y,_._multi(f),_.x=(_.x-s)*v,_.y=d-(_.y-u)*g}else r[m]=null;return r}}for(var b=Array.isArray(n),x=this.isTransforming(),w=e/this._getResolution(),E=this._prjToPoint(this._getPrjCenter(),void 0,fu),S=0,O=t.length;S<O;S++)if(t[S]){var C=r[S];C.x=t[S].x,C.y=t[S].y,C._multi(w);var T=b?n[S]||0:n;this._toContainerPoint(C,x,w,T,E)}else r[S]=null;return r},_toContainerPoint:function(){var t=[0,0,0];return function(e,n,r,i,o){var a=this.width/2,s=this.height/2;if(n||i){i*=r;var u=this._glScale;Ys(t,e.x*u,e.y*u,i*u);var c=this._projIfBehindCamera(t,this.cameraPosition,this.cameraForward);iu(c,c,this.projViewMatrix),e.x=c[0]*a+a,e.y=-c[1]*s+s}else e._sub(o.x,o.y),e.set(e.x,-e.y),e._add(a,s)}}(),_projIfBehindCamera:function(){var t=new Array(3),e=new Array(3),n=new Array(3);return function(r,i,o){qs(t,r,i);var a=$s(o,t);return a<=0&&(Js(e,o,1.01*a),Xs(r,i,qs(n,t,e))),r}}(),_containerPointToPoint:function(t,e,n){var r=this._getResolution(e);return this._containerPointToPointAtRes(t,r,n)},_containerPointToPointAtRes:function(){var t=[0,0,0],e=[0,0,0,1],n=[0,0,0,1];return function(r,i,o){if(this.isTransforming()){var a=this.width/2||1,s=this.height/2||1;Ys(t,(r.x-a)/a,(s-r.y)/s,0),Ys(e,t[0],t[1],0),Ys(n,t[0],t[1],1),e[3]=n[3]=1,iu(e,e,this.projViewMatrixInverse),iu(n,n,this.projViewMatrixInverse);var u=e[0],c=n[0],l=e[1],f=n[1],h=e[2],p=n[2],d=h===p?0:(0-h)/(p-h),v=Mt(u,c,d),g=Mt(l,f,d);return o?(o.x=v,o.y=g):o=new yt(v,g),o._multi(1/this._glScale),this._getResolution()===i?o:this._pointToPointAtRes(o,i,o)}var m=this._prjToPointAtRes(this._getPrjCenter(),i,o),y=this._getResolution()/i,_=y*(r.x-this.width/2),b=y*(r.y-this.height/2);return m._add(_,-b)}}(),_calcMatrices:function(){var t=hu();return function(){delete this._mapRes,delete this._mapGlRes,delete this._mapExtent2D,delete this._mapGlExtent2D;var e=this.getSize(),n=e.width||1,r=e.height||1;this._glScale=this.getGLScale();var i=this._getCameraWorldMatrix(),o=this.getFov()*Math.PI/180,a=this._getCameraFar(o,this.getPitch());this.cameraFar=a,this.cameraNear=this.cameraCenterDistance/20;var s=this.projMatrix||hu();Fs(s,o,n/r,this.cameraNear,a),this.projMatrix=s,this.viewMatrix=Gs(this.viewMatrix||hu(),i),this.projViewMatrix=Hs(this.projViewMatrix||hu(),s,this.viewMatrix),this._calcCascadeMatrixes(),this.projViewMatrixInverse=Hs(this.projViewMatrixInverse||hu(),i,Gs(t,s)),this.domCssMatrix=this._calcDomMatrix(),this._frustumAltitude=this._calcFrustumAltitude(),this._mapRes=this._getResolution(),this._mapGlRes=this.getGLRes(),this._mapExtent2D=this._get2DExtent(),this._mapGlExtent2D=this._get2DExtentAtRes(this._mapGlRes)}}(),_getCameraFar:function(t,e){var n=this.cameraCenterDistance=eu(this.cameraPosition,this.cameraLookAt),r=n,i=(this.options["cameraInfiniteFar"]?10:4)*n;if(e>0&&(e=e*Math.PI/180,2/Math.PI-e>t/2)){var o=Math.tan(t/2),a=Math.tan(e);i=Math.max(n*o/(1/a-o),i)}return r+=i,r+1},_calcCascadeMatrixes:function(){var t=hu();function e(e,n,r){var i=this.width,o=this.height,a=this.getFov()*Math.PI/180,s=this._getCameraFar(a,n),u=this.cameraCenterDistance;s=u+(s-u)/Math.cos((90-n)*Math.PI/180)*Math.cos((90-e)*Math.PI/180),Fs(t,a,i/o,.1,s);var c=this.viewMatrix;return Hs(r,t,c)}return function(){var t=this.getPitch(),n=this.options["cascadePitches"][0],r=this.options["cascadePitches"][1],i=this.cascadeFrustumMatrix0=this.cascadeFrustumMatrix0||hu(),o=this.cascadeFrustumMatrix1=this.cascadeFrustumMatrix1||hu();t>n?e.call(this,t,n,i):Zs(this.cascadeFrustumMatrix0,this.projViewMatrix),t>r?e.call(this,t,r,o):Zs(this.cascadeFrustumMatrix1,this.cascadeFrustumMatrix0)}}(),_calcDomMatrix:function(){var t=hu(),e=hu(),n=[1,-1,1],r=[0,0,0];return function(){var i=this.width||1,o=this.height||1,a=.5/Math.tan(this._fov/2)*o;return zs(t,this.projMatrix,n),Bs(t,t,Ys(r,0,0,-a)),this._pitch&&Us(t,t,this._pitch),this._angle&&Vs(t,t,this._angle),Ws(e),zs(e,e,Ys(r,i/2,-o/2,1)),Hs(this.domCssMatrix||hu(),e,t)}}(),_getFovZ:function(t){var e=this.getGLScale(t),n=this._getFovRatio();return e*(this.height||1)/2/n},_getCameraWorldMatrix:function(){var t={};return function(){var e=this.getGLRes(),n=this._prjToPointAtRes(this._prjCenter,e);this.cameraLookAt=Ys(this.cameraLookAt||[0,0,0],n.x,n.y,0);var r=this.getPitch()*cu,i=this.getBearing()*cu,o=this._getFovZ(),a=o*Math.cos(r),s=Math.sin(r)*o,u=n.x-s*Math.sin(i),c=n.y-s*Math.cos(i);this.cameraPosition=Ys(this.cameraPosition||[0,0,0],u,c,a),this.cameraToCenterDistance=eu(this.cameraPosition,this.cameraLookAt);var l=s||1,f=this.cameraUp=Ys(this.cameraUp||[0,0,0],Math.sin(i)*l,Math.cos(i)*l,0),h=this.cameraWorldMatrix=this.cameraWorldMatrix||hu();uu(h,this.cameraPosition,this.cameraLookAt,f);var p=this.cameraForward||[0,0,0];return qs(p,this.cameraLookAt,this.cameraPosition),this.cameraForward=Qs(p,p),ou(t,h),au(h,t),su(h,this.cameraPosition),h}}(),_getFovRatio:function(){var t=this.getFov();return Math.tan(t/2*cu)},_renderLayers:function(){if(!this.isInteracting()){var t=this._getLayers();t.forEach((function(t){if(t){var e=t._getRenderer();e&&e.setToRedraw&&e.setToRedraw()}}))}}}),ha.include({_onViewChange:function(t){this._viewHistory||(this._viewHistory=[],this._viewHistoryPointer=0);for(var e=this._getCurrentView(),n=this._viewHistory.length-1;n>=0;n--)if(Gt(t,this._viewHistory[n]))return this._viewHistoryPointer=n,void this._fireViewChange(e,t);this._viewHistoryPointer<this._viewHistory.length-1&&this._viewHistory.splice(this._viewHistoryPointer+1),this._viewHistory.push(t);var r=this.options["viewHistoryCount"];r>0&&this._viewHistory.length>r&&this._viewHistory.splice(0,this._viewHistory.length-r),this._viewHistoryPointer=this._viewHistory.length-1,this._fireViewChange(e,t)},zoomToPreviousView:function(t){if(void 0===t&&(t={}),!this.hasPreviousView())return null;var e=this._viewHistory[--this._viewHistoryPointer];return this._zoomToView(e,t),e},hasPreviousView:function(){return!(!this._viewHistory||0===this._viewHistoryPointer)},zoomToNextView:function(t){if(void 0===t&&(t={}),!this.hasNextView())return null;var e=this._viewHistory[++this._viewHistoryPointer];return this._zoomToView(e,t),e},hasNextView:function(){return!(!this._viewHistory||this._viewHistoryPointer===this._viewHistory.length-1)},_zoomToView:function(t,e){var n=this,r=this.getView();e["animation"]?this._animateTo(t,{duration:e["duration"]},(function(e){"finished"===e.state.playState&&n._fireViewChange(r,t)})):(this.setView(t),this._fireViewChange(r,t))},getViewHistory:function(){return this._viewHistory},_fireViewChange:function(t,e){this._fireEvent("viewchange",{old:t,new:e})},_getCurrentView:function(){return this._viewHistory?this._viewHistory[this._viewHistoryPointer]:null}}),ha.mergeOptions({viewHistory:!0,viewHistoryCount:10}),ha.include({getCollisionIndex:function(){return this._collisionIndex||this.createCollisionIndex(),this._collisionIndex||this.createCollisionIndex()},createCollisionIndex:function(){return this.clearCollisionIndex(),this._collisionIndex=new wr,this._collisionIndex},clearCollisionIndex:function(){return this.collisionFrameTime=0,this._collisionIndex&&this._collisionIndex.clear(),this}});var pu={mode:"LineString",language:"zh-CN",metric:!0,imperial:!1,symbol:{lineColor:"#000",lineWidth:3,lineOpacity:1},vertexSymbol:{markerType:"ellipse",markerFill:"#fff",markerLineColor:"#000",markerLineWidth:3,markerWidth:11,markerHeight:11},labelOptions:{textSymbol:{textFaceName:"monospace",textLineSpacing:1,textHorizontalAlignment:"right",textDx:15},boxStyle:{padding:[6,2],symbol:{markerType:"square",markerFill:"#fff",markerFillOpacity:.9,markerLineColor:"#b4b3b3"}}},clearButtonSymbol:[{markerType:"square",markerFill:"#fff",markerLineColor:"#b4b3b3",markerLineWidth:2,markerWidth:15,markerHeight:15,markerDx:20},{markerType:"x",markerWidth:10,markerHeight:10,markerDx:20}]},du=function(t){function e(e){var n;return n=t.call(this,e)||this,n.on("enable",n._afterEnable,dt(dt(n))).on("disable",n._afterDisable,dt(dt(n))),n._measureLayers=[],n}pt(e,t);var n=e.prototype;return n.clear=function(){if(jt(this._measureLayers))for(var t=0;t<this._measureLayers.length;t++)this._measureLayers[t].remove();return delete this._lastMeasure,delete this._lastVertex,this._measureLayers=[],this},n.getMeasureLayers=function(){return this._measureLayers},n.getLastMeasure=function(){return this._lastMeasure?this._lastMeasure:0},n.undo=function(){t.prototype.undo.call(this);var e=this._historyPointer;if(e!==this._vertexes.length)for(var n=e;n<this._vertexes.length;n++)this._vertexes[n].label&&this._vertexes[n].label.remove(),this._vertexes[n].marker.remove();return this},n.redo=function(){t.prototype.redo.call(this);var e=this._historyPointer-1;return this._vertexes[e]&&(this._vertexes[e].marker.getLayer()||(this._vertexes[e].label&&this._vertexes[e].label.addTo(this._measureMarkerLayer),this._vertexes[e].marker.addTo(this._measureMarkerLayer))),this},n._measure=function(t){var e,n,r=this.getMap();t instanceof aa?e=r.computeGeometryLength(t):Array.isArray(t)&&(e=r.getProjection().measureLength(t)),this._lastMeasure=e,n="zh-CN"===this.options["language"]?[" \u7c73"," \u516c\u91cc"," \u82f1\u5c3a"," \u82f1\u91cc"]:[" m"," km"," feet"," mile"];var i="";return this.options["metric"]&&(i+=e<1e3?e.toFixed(0)+n[0]:(e/1e3).toFixed(2)+n[1]),this.options["imperial"]&&(e*=3.2808399,i.length>0&&(i+="\n"),i+=e<5280?e.toFixed(0)+n[2]:(e/5280).toFixed(2)+n[3]),i},n._registerMeasureEvents=function(){this.on("drawstart",this._msOnDrawStart,this).on("drawvertex",this._msOnDrawVertex,this).on("mousemove",this._msOnMouseMove,this).on("drawend",this._msOnDrawEnd,this)},n._afterEnable=function(){this._registerMeasureEvents()},n._afterDisable=function(){this.off("drawstart",this._msOnDrawStart,this).off("drawvertex",this._msOnDrawVertex,this).off("mousemove",this._msOnMouseMove,this).off("drawend",this._msOnDrawEnd,this)},n._msOnDrawStart=function(t){var e=this.getMap(),n=e._pointToPrj(t["point2d"]),r=wt(),i="distancetool_"+r,o="distancetool_markers_"+r;e.getLayer(i)?(this._measureLineLayer=e.getLayer(i),this._measureMarkerLayer=e.getLayer(o)):(this._measureLineLayer=new Cs(i).addTo(e),this._measureMarkerLayer=new Cs(o).addTo(e)),this._measureLayers.push(this._measureLineLayer),this._measureLayers.push(this._measureMarkerLayer);var a=new Na(t["coordinate"],{symbol:this.options["vertexSymbol"]});a._setPrjCoordinates(n);var s="zh-CN"===this.options["language"]?"\u8d77\u70b9":"start",u=new gs(s,t["coordinate"],this.options["labelOptions"]);u._setPrjCoordinates(n),this._lastVertex=u,this._addVertexMarker(a,u)},n._msOnMouseMove=function(t){var e=this._measure(this._msGetCoordsToMeasure(t));if(!this._tailMarker){var n=pn(this.options["vertexSymbol"]);n["markerWidth"]/=2,n["markerHeight"]/=2,this._tailMarker=new Na(t["coordinate"],{symbol:n}).addTo(this._measureMarkerLayer),this._tailLabel=new gs(e,t["coordinate"],this.options["labelOptions"]).addTo(this._measureMarkerLayer)}var r=this._geometry._getPrjCoordinates(),i=r[r.length-1];this._tailMarker.setCoordinates(t["coordinate"]),this._tailMarker._setPrjCoordinates(i),this._tailLabel.setContent(e),this._tailLabel.setCoordinates(t["coordinate"]),this._tailLabel._setPrjCoordinates(i)},n._msGetCoordsToMeasure=function(t){return t["geometry"].getCoordinates().concat([t["coordinate"]])},n._msOnDrawVertex=function(t){var e=this._geometry._getPrjCoordinates(),n=e[e.length-1],r=t["geometry"],i=new Na(t["coordinate"],{symbol:this.options["vertexSymbol"]}),o=this._measure(r),a=new gs(o,t["coordinate"],this.options["labelOptions"]);this._addVertexMarker(i,a),a._setPrjCoordinates(n),i._setPrjCoordinates(n),this._lastVertex=a},n._addVertexMarker=function(t,e){this._vertexes||(this._vertexes=[]),void 0!==this._historyPointer&&this._vertexes.length>this._historyPointer-1&&(this._vertexes.length=this._historyPointer-1),this._vertexes.push({label:e,marker:t}),this._measureMarkerLayer.addGeometry(t),e&&this._measureMarkerLayer.addGeometry(e)},n._msOnDrawEnd=function(t){if(this._clearTailMarker(),t["geometry"]._getPrjCoordinates().length<2)return this._lastMeasure=0,void this._clearMeasureLayers();var e=this._lastVertex.getSize();e||(e=new We(10,10)),this._addClearMarker(this._lastVertex.getCoordinates(),this._lastVertex._getPrjCoordinates(),e["width"]);var n=t["geometry"].copy();n._setPrjCoordinates(t["geometry"]._getPrjCoordinates()),n.addTo(this._measureLineLayer),this._lastMeasure=n.getLength()},n._addClearMarker=function(t,e,n){var r=this.options["clearButtonSymbol"],i={markerDx:(r["markerDx"]||0)+n,textDx:(r["textDx"]||0)+n};Array.isArray(r)&&(i=r.map((function(t){return t?{markerDx:(t["markerDx"]||0)+n,textDx:(t["textDx"]||0)+n}:null}))),r=pn(r,i);var o=new Na(t,{symbol:r}),a=this._measureLineLayer,s=this._measureMarkerLayer;o.on("click",(function(){return a.remove(),s.remove(),!1}),this),o.addTo(this._measureMarkerLayer),o._setPrjCoordinates(e)},n._clearTailMarker=function(){this._tailMarker&&(this._tailMarker.remove(),delete this._tailMarker),this._tailLabel&&(this._tailLabel.remove(),delete this._tailLabel)},n._clearMeasureLayers=function(){this._measureLineLayer.remove(),this._measureMarkerLayer.remove()},e}(Ps);du.mergeOptions(pu);var vu={mode:"Polygon",symbol:{lineColor:"#000000",lineWidth:2,lineOpacity:1,lineDasharray:"",polygonFill:"#ffffff",polygonOpacity:.5}},gu=function(t){function e(e){var n;return n=t.call(this,e)||this,n._measureLayers=[],n}pt(e,t);var n=e.prototype;return n._measure=function(t){var e,n,r=this.getMap();t instanceof aa?e=r.computeGeometryArea(t):Array.isArray(t)&&(e=r.getProjection().measureArea(t)),this._lastMeasure=e,n="zh-CN"===this.options["language"]?[" \u5e73\u65b9\u7c73"," \u5e73\u65b9\u516c\u91cc"," \u5e73\u65b9\u82f1\u5c3a"," \u5e73\u65b9\u82f1\u91cc"]:[" sq.m"," sq.km"," sq.ft"," sq.mi"];var i="";if(this.options["metric"]&&(i+=e<1e6?e.toFixed(0)+n[0]:(e/1e6).toFixed(2)+n[1]),this.options["imperial"]){e*=3.2808399,i.length>0&&(i+="\n");var o=27878400;i+=e<o?e.toFixed(0)+n[2]:(e/o).toFixed(2)+n[3]}return i},n._msGetCoordsToMeasure=function(t){return t["geometry"].getShell().concat([t["coordinate"]])},n._msOnDrawVertex=function(t){var e=this.getMap()._pointToPrj(t["point2d"]),n=new Na(t["coordinate"],{symbol:this.options["vertexSymbol"]});n._setPrjCoordinates(e),this._measure(t["geometry"]),this._lastVertex=n,this._addVertexMarker(n)},n._msOnDrawEnd=function(t){var e;if(this._clearTailMarker(),t["point2d"])e=this.getMap()._pointToPrj(t["point2d"]);else{var n=t["geometry"]._getPrjCoordinates();n=n.slice(0,n.length-1),t["geometry"]._setPrjCoordinates(n),e=n[n.length-1]}if(t["geometry"]._getPrjCoordinates().length<3)return this._lastMeasure=0,void this._clearMeasureLayers();var r=this._measure(t["geometry"]),i=this.getMap().getProjection(),o=i.unproject(e),a=new gs(r,o,this.options["labelOptions"]).addTo(this._measureMarkerLayer);a._setPrjCoordinates(e);var s=a.getSize();s||(s=new We(10,10)),this._addClearMarker(o,e,s["width"]);var u=t["geometry"].copy();u._setPrjCoordinates(t["geometry"]._getPrjCoordinates()),u.addTo(this._measureLineLayer),this._lastMeasure=u.getArea()},e}(du);gu.mergeOptions(vu);var mu={create:function(t,e){var n=t.unproject(e[0]),r=new $a(n,0);return r._setPrjCoordinates(e[0]),r},update:function(t,e,n){var r=n.getMap(),i=Array.isArray(e)?e[e.length-1]:e,o=t.unproject(i),a=r.computeLength(n.getCenter(),o);n.setRadius(a)},generate:function(t){return t}};Ps.registerMode("circle",b({clickLimit:2,action:["click","mousemove","click"]},mu)),Ps.registerMode("freeHandCircle",b({action:["mousedown touchstart","mousemove touchmove","mouseup touchend"]},mu));var yu={create:function(t,e){var n=t.unproject(e[0]),r=new ts(n,0,0);return r._setPrjCoordinates(e[0]),r},update:function(t,e,n){var r=n.getMap(),i=n.getCenter(),o=Array.isArray(e)?e[e.length-1]:e,a=t.unproject(o),s=r.computeLength(i,new Ar({x:a.x,y:i.y})),u=r.computeLength(i,new Ar({x:i.x,y:a.y}));n.setWidth(2*s),n.setHeight(2*u)},generate:function(t){return t}};Ps.registerMode("ellipse",b({clickLimit:2,action:["click","mousemove","click"]},yu)),Ps.registerMode("freeHandEllipse",b({action:["mousedown touchstart","mousemove touchmove","mouseup touchend"]},yu));var _u={create:function(t,e){var n=new Ra([]);return n._firstClick=e[0],n},update:function(t,e,n,r){var i=n.getMap(),o=r["containerPoint"],a=i._prjToContainerPoint(n._firstClick),s=[[a.x,a.y],[o.x,a.y],[o.x,o.y],[a.x,o.y]];n.setCoordinates(s.map((function(t){return i.containerPointToCoord(new yt(t))}))),n._setPrjCoordinates(s.map((function(t){return i._containerPointToPrj(new yt(t))})))},generate:function(t){return t}};Ps.registerMode("rectangle",b({clickLimit:2,action:["click","mousemove","click"]},_u)),Ps.registerMode("freeHandRectangle",b({action:["mousedown touchstart","mousemove touchmove","mouseup touchend"]},_u)),Ps.registerMode("point",{clickLimit:1,action:["click","mousemove"],create:function(t,e){var n=t.unproject(e[0]),r=new Na(n);return r._setPrjCoordinates(e[0]),r},generate:function(t){return t},update:function(t,e,n){if(Array.isArray(e)&&(e=e[e.length-1]),!e)return n;var r=t.unproject(e);return n.setCoordinates(r),n}});var bu={create:function(t,e){var n=e.map((function(e){return t.unproject(e)})),r=new Ba(n);return r._setPrjCoordinates(e),r},update:function(t,e,n){var r,i=n.getSymbol();Array.isArray(e)?r=e:(r=n._getPrjCoordinates(),r.push(e));var o=r.map((function(e){return t.unproject(e)}));n.setCoordinates(o),n._setPrjCoordinates(r);var a=n.getLayer();if(a){var s=a.getGeometryById("polygon");if(!s&&r.length>=3){if(s=new Ra([o],{id:"polygon"}),i){var u=pn(i,{lineOpacity:0});s.setSymbol(u)}s.addTo(a)}s&&s._setPrjCoordinates(r)}},generate:function(t){var e=new Ra(t.getCoordinates(),{symbol:t.getSymbol()});return e._setPrjCoordinates(t._getPrjCoordinates()),e._projCode=t._projCode,e}};Ps.registerMode("polygon",b({action:["click","mousemove","dblclick"]},bu)),Ps.registerMode("freeHandPolygon",b({action:["mousedown touchstart","mousemove touchmove","mouseup touchend"]},bu));var xu={create:function(t,e){var n=e.map((function(e){return t.unproject(e)})),r=new Ba(n);return r._setPrjCoordinates(e),r},update:function(t,e,n){var r;Array.isArray(e)?r=e:(r=n._getPrjCoordinates(),r.push(e));var i=r.map((function(e){return t.unproject(e)}));n.setCoordinates(i),n._setPrjCoordinates(r)},generate:function(t){return t}};function wu(t){for(var e=t["tileInfo"],n=[e["cols"],e["rows"]],r=[],i=e["lods"],o=0,a=i.length;o<a;o++)r.push(i[o]["resolution"]);var s=t["fullExtent"],u=e["origin"],c=[1,-1,u["x"],u["y"]];return delete s["spatialReference"],{spatialReference:{resolutions:r,fullExtent:s},tileSystem:c,tileSize:n}}function Eu(t){for(var e="",n=t.split(""),r=n.length,i=r-1;i>=0;i--){if(isNaN(n[i]))break;e=n[i]+e}return e}function Su(t){var e=t.indexOf("EPSG")>-1?t:"EPSG:"+t;return e=Ou(e,[["4490","4326"],["102100","3857"],["900913","3857"]]),e}function Ou(t,e){return void 0===e&&(e=[]),e.forEach((function(e){var n=e[0],r=e[1];t=t.replace(n,r)})),t}function Cu(t){var e=t.projection,n=t.isArcgis,r=t.isGeoServer,i=t.isSuperMap,o=.0002645833333333333;return(n||r||i)&&(o=28e-5),e&&e.indexOf("4326")>-1&&(o=2.3767925226029154e-9,(n||i)&&(o=2.518101729011901e-9),r&&(o=2.51528279553466e-9)),o}Ps.registerMode("linestring",b({action:["click","mousemove","dblclick"]},xu)),Ps.registerMode("freeHandLinestring",b({action:["mousedown touchstart","mousemove touchmove","mouseup touchend"]},xu)),Ps.registerMode("arccurve",{action:["click","mousemove","dblclick"],create:function(t,e){var n=e.map((function(e){return t.unproject(e)})),r=new ss(n);return r._setPrjCoordinates(e),r},update:xu.update,generate:function(t){return t}}),Ps.registerMode("quadbeziercurve",{action:["click","mousemove","dblclick"],create:function(t,e){var n=e.map((function(e){return t.unproject(e)})),r=new cs(n);return r._setPrjCoordinates(e),r},update:xu.update,generate:function(t){return t}}),Ps.registerMode("cubicbeziercurve",{action:["click","mousemove","dblclick"],create:function(t,e){var n=e.map((function(e){return t.unproject(e)})),r=new us(n);return r._setPrjCoordinates(e),r},update:xu.update,generate:function(t){return t}}),Ps.registerMode("boxZoom",{action:["mousedown","mousemove","mouseup"],create:function(t,e){e=e[0];var n=t.unproject(e),r=new Na(n);return r._firstClick=e,r},update:function(t,e,n,r){var i=n.getMap(),o=i._prjToContainerPoint(n._firstClick),a=r["containerPoint"];e=i._containerPointToPrj(new Ar(Math.min(o.x,a.x),Math.min(o.y,a.y)));var s=t.unproject(e);n.setCoordinates(s)._setPrjCoordinates(e),n.updateSymbol({markerWidth:Math.abs(o.x-a.x),markerHeight:Math.abs(o.y-a.y)})},generate:function(t){return t}}),na.loadArcgis=function(t,e,n){if(void 0===n&&(n={jsonp:!0}),O(t)&&"{"!==t.substring(0,1))tr.getJSON(t,(function(t,n){if(t)e(t);else{var r=wu(n);e(null,r)}}),n);else{O(t)&&(t=Et(t));var r=wu(t);e(null,r)}return this};var Tu="wmts";function Au(t,e){var n=t.getElementsByTagName(e);if(n&&n.length)return n;var r=Tu+":"+e;return t.getElementsByTagName(r)}function ku(t,e){for(var n=0;n<t.length;n++){var r=t[n];if(r=r.getElementsByTagName("ows:Identifier")[0],r&&r.textContent===e)return t[n]}return null}function Mu(t,e,n){null==n.isArcgis&&(n.isArcgis=t.indexOf("arcgis")>-1),null==n.isSuperMap&&(n.isSuperMap=t.indexOf("supermap")>-1);var r=new DOMParser,i=r.parseFromString(t,"text/xml"),o=i.querySelectorAll("Contents")[0];if(!o)return[];var a=Au(o,"Layer");if(!a.length)return[];for(var s=[],u=0,c=o.childNodes.length;u<c;u++)"TileMatrixSet"===o.childNodes[u].localName&&s.push(o.childNodes[u]);if(!s.length)return[];for(var l=[],f=0,h=a.length;f<h;f++){var p=a[f],d=p.querySelectorAll("Style")[0];d&&(d=d.getElementsByTagName("ows:Identifier")[0],d&&(d=d.textContent));var v=p.getElementsByTagName("ows:Identifier")[0];v&&(v=v.textContent);var g=Au(p,"TileMatrixSetLink");if(0!==g.length)for(var m=0,y=g.length;m<y;m++){var _=g[m];_=Au(_,"TileMatrixSet")[0],_&&(_=_.textContent);var b=ku(s,_);if(b){var x=p.querySelectorAll("ResourceURL")[0],w="";x&&(w=x.attributes.template.value);var E=Pu(b,n),S=E.resolutions,O=E.tileSize,C=E.tileSystem,T=E.projection,A=E.TileMatrixSet,k=E.isGeoServer,M=E.levelStr;w.length||(w=e.substr(0,e.lastIndexOf("?")),w+="?SERVICE=WMTS&REQUEST=GetTile&VERSION=1.0.0&LAYER={LAYER}&STYLE={Style}&TILEMATRIXSET={TileMatrixSet}&FORMAT={tiles}&TILEMATRIX={TileMatrix}&TILEROW={TileRow}&TILECOL={TileCol}");var P=Ou(w,[["{LAYER}",v],["{Layer}",v],["{layer}",v],["{STYLE}",d],["{Style}",d],["{style}",d],["{TileMatrixSet}",A],["{TileMatrix}",k?M+":{z}":"{z}"],["{TileRow}","{y}"],["{TileCol}","{x}"],["{tiles}",k?"image/png":"tiles"]]);l.push({tileSize:O,tileSystem:C,spatialReference:{resolutions:S,projection:T},urlTemplate:P,info:{layerName:v,TileMatrixSet:A,style:d,tileSize:O,tileSystem:C,resolutions:S,projection:T,urlTemplate:P}})}}}return l}function Pu(t,e){void 0===e&&(e={});var n,r,i,o=Au(t,"TileMatrix"),a=[],s=[],u=[],c=!1;if(!n){var l=t.getElementsByTagName("ows:SupportedCRS")[0];l&&(n=l.textContent,n=n.split("EPSG")[1],n=Eu(n),n=Su(n))}r||(r=t.getElementsByTagName("ows:Identifier")[0],r&&(r=r.textContent)),e.projection=n;for(var f=1/0,h=0;h<o.length;h++){var p=o[h],d=p.getElementsByTagName("ows:Identifier")[0].textContent;isNaN(parseInt(d))?(i=d.substr(0,d.lastIndexOf(":")),d=d.split(":"),d=d[d.length-1],d=parseInt(d),c=!0,e.isGeoServer=!0):d=parseInt(d),f=Math.min(f,d);var v=Au(p,"ScaleDenominator")[0].textContent,g=Au(p,"TopLeftCorner")[0].textContent,m=Au(p,"TileWidth")[0].textContent,y=Au(p,"TileHeight")[0].textContent;if(0===u.length&&u.push(parseInt(m),parseInt(y)),0===s.length){var _=g.split(" ").filter((function(t){return""!==t})).map((function(t){return parseFloat(t)})),b=_[0],x=_[1];b>0?s.push(1,-1,x,b):s.push(1,-1,b,x)}var w=Cu(e),E=parseFloat(v)*w;a.push(E)}if(f>0)for(var S=a[0],O=f-1;O>=0;O--)S*=2,a.splice(0,0,S);return{resolutions:a,tileSize:u,tileSystem:s,projection:n,TileMatrixSet:r,isGeoServer:c,levelStr:i}}na.loadWMTS=function(t,e,n){return void 0===n&&(n={jsonp:!0}),O(t)&&tr.get(t,(function(r,i){if(r)e(r);else{var o=Mu(i,t,n);e(null,o)}}),n),this};var Ru={eventsPropagation:!1,eventsToStop:null,dx:0,dy:0,autoPan:!1,autoPanDuration:600,single:!0,animation:"scale",animationOnHide:!1,animationDuration:500,pitchWithMap:!1,rotateWithMap:!1,visible:!0,roundPoint:!1},ju=function(t){function e(e){return t.call(this,e)||this}pt(e,t);var n=e.prototype;return n.addTo=function(t){return this._owner=t,this._switchEvents("on"),this.onAdd&&this.onAdd(),this.fire("add"),this},n.getMap=function(){return this._owner?this._owner.getBaseLayer?this._owner:this._owner.getMap():null},n.show=function(t){var e=this.getMap();if(!e)return this;this.options["visible"]=!0,t=t||this._coordinate||this._owner.getCenter();var n=this.isVisible();this._showBySymbolChange||this.fire("showstart");var r=this._getUIContainer();this._coordinate=t,this._removePrevDOM(),this._mapEventsOn||this._switchMapEvents("on");var i=this.__uiDOM=this.buildOn(e);if(i["eventsPropagation"]=this.options["eventsPropagation"],this._observerDomSize(i),!i)return this._showBySymbolChange||this.fire("showend"),this;this._measureSize(i),this._singleton()&&(i._uiComponent=this,e[this._uiDomKey()]=i),this._setPosition(),i.style[Sn]=null,r.appendChild(i);var o=this._getAnimation();if(n&&(o.ok=!1),o.ok&&(o.fade&&(i.style.opacity=0),o.scale)){if(this.getTransformOrigin){var a=this.getTransformOrigin();i.style[En]=a}i.style[wn]=this._toCSSTranslate(this._pos)+" scale(0)"}this.isSupportZoomFilter()||(i.style.display=""),this.options["eventsToStop"]&&Xn(i,this.options["eventsToStop"],Rn),this.options["autoPan"]&&this._autoPan();var s=o.transition;return o.ok&&s&&(i.offsetHeight,s&&(i.style[Sn]=s),o.fade&&(i.style.opacity=1),o.scale&&(i.style[wn]=this._toCSSTranslate(this._pos)+" scale(1)")),this._showBySymbolChange||this.fire("showend"),this},n.hide=function(){var t=this;if(!this.getDOM())return this;this.options["visible"]=!1;var e=this._getAnimation(),n=this.getDOM();return this.options["animationOnHide"]||(e.ok=!1),e.ok?(n.offsetHeight,n.style[Sn]=e.transition,setTimeout((function(){n.style.display="none",t.fire("hide")}),this.options["animationDuration"])):(n.style.display="none",this.fire("hide")),e.fade&&(n.style.opacity=0),e.scale&&(n.style[wn]=this._toCSSTranslate(this._pos)+" scale(0)"),this._switchMapEvents("off"),this},n.isVisible=function(){if(!this.options["visible"])return!1;var t=this.getDOM();return this.getMap()&&t&&t.parentNode&&"none"!==t.style.display},n.remove=function(){return delete this._mapEventsOn,this._owner?(this.hide(),this._switchEvents("off"),this.onRemove&&this.onRemove(),!this._singleton()&&this.__uiDOM&&this._removePrevDOM(),delete this._owner,this.fire("remove"),this):this},n.getSize=function(){return this._domContentRect&&this._size&&(this._size.width=this._domContentRect.width,this._size.height=this._domContentRect.height),this._size?this._size.copy():null},n.getOwner=function(){return this._owner},n.getDOM=function(){return this.__uiDOM},n._roundPoint=function(t){return this.options.roundPoint&&(t=t._round()),t},n.getPosition=function(){if(!this.getMap())return null;var t=this._roundPoint(this._getViewPoint());if(this.getOffset){var e=this._roundPoint(this.getOffset());e&&t._add(e)}return t},n._getAnimation=function(){for(var t={fade:!1,scale:!1},e=this.options["animation"]?this.options["animation"].split(","):[],n=0;n<e.length;n++){var r=Ze(e[n]);"fade"===r?t.fade=!0:"scale"===r&&(t.scale=!0)}var i=null;return t.fade&&(i="opacity "+this.options["animationDuration"]+"ms"),t.scale&&(i=i?i+",":"",i+=wn+" "+this.options["animationDuration"]+"ms"),t.transition=i,t.ok=null!==i,t},n._getViewPoint=function(){var t=0,e=this._coordinate||{};w(e.z)?t=e.z:this._owner&&this._owner.getAltitude&&(t=this._owner.getAltitude()||0);var n=this._meterToPoint(this._coordinate,t);return this.getMap().coordToViewPoint(this._coordinate,void 0,n)._add(this.options["dx"],this.options["dy"])},n._meterToPoint=function(t,e){var n=this.getMap();return n.altitudeToPoint(e,n._getResolution())*At(e)},n._autoPan=function(){var t=this.getMap(),e=this.getDOM();if(!t.isMoving()){var n=this._getViewPoint()._round(),r=t.width,i=t.height,o=t.viewPointToContainerPoint(n),a=this.getOffset(),s=o.add(a),u=t._viewPointToPrj(n),c=parseInt(e.clientWidth),l=parseInt(e.clientHeight),f=50,h=0,p=0;if(s.x<0?h=-s.x+f:s.x+c>r&&(h=-(s.x+c-r)-f),s.y-l<0?p=Math.abs(s.y-l)+f:s.y+l>i&&(p=i-(s.y+l)-f),c>=r&&(h=r/2-o.x),0!==p||0!==h){var d=o.add(h,p),v=t._containerPointToPoint(d)._sub(t._prjToPoint(t._getPrjCenter())),g=t._pointToPrj(t._prjToPoint(u).sub(v));t._panAnimation(g)}}},n._measureSize=function(t){var e=this._getUIContainer();t.style.position="absolute";var n=t.style.bottom?"bottom":"top";if(t.style.display="",e.appendChild(t),t.getBoundingClientRect){var r=t.getBoundingClientRect();this._size=new We(r.width,r.height)}else this._size=new We(t.clientWidth,t.clientHeight);return t.style.display="none",t.style.left="0px",t.style[n]="0px",this._size},n._removePrevDOM=function(){this.onDomRemove&&this.onDomRemove();var t=this.options["eventsToStop"];if(this._singleton()){var e=this.getMap(),n=this._uiDomKey();if(e[n]){t&&qn(e[n],t,Rn);var r=e[n]._uiComponent;r&&r!==this&&r.isVisible()&&r.fire("hide"),Tn(e[n]),r&&!this.hideDom&&r._switchMapEvents("off"),delete e[n]}delete this.__uiDOM}else this.__uiDOM&&(t&&qn(this.__uiDOM,t,Rn),Tn(this.__uiDOM),delete this.__uiDOM);this._resizeObserver&&(this._resizeObserver.disconnect(),delete this._resizeObserver,delete this._domContentRect)},n._uiDomKey=function(){return"__ui_"+this._getClassName()},n._singleton=function(){return this.options["single"]},n._getUIContainer=function(){return this.getMap()._panels["ui"]},n._getClassName=function(){return"UIComponent"},n._switchMapEvents=function(t){var e=this.getMap();if(e){this._mapEventsOn="on"===t;var n=this._getDefaultEvents();if(this.getEvents&&b(n,this.getEvents()),n)for(var r in n)n.hasOwnProperty(r)&&e[t](r,n[r],this)}},n._switchEvents=function(t){var e=this._getOwnerEvents();if(this._owner)for(var n in e)e.hasOwnProperty(n)&&this._owner[t](n,e[n],this)},n._getDefaultEvents=function(){return{"zooming rotate pitch":this.onEvent,zoomend:this.onZoomEnd,moving:this.onMoving,moveend:this.onMoving,resize:this.onResize}},n._getOwnerEvents=function(){var t={};return this._owner&&this._owner instanceof aa&&(t.positionchange=this.onGeometryPositionChange,t.symbolchange=this._updatePosition),this.getOwnerEvents&&b(t,this.getOwnerEvents()),t},n.onGeometryPositionChange=function(t){this._owner&&this.isVisible()&&(this._showBySymbolChange=!0,this.show(t["target"].getCenter()),delete this._showBySymbolChange)},n.onMoving=function(){this.isVisible()&&this.getMap().isTransforming()&&this._updatePosition()},n.onEvent=function(){this.isVisible()&&this._updatePosition()},n.onZoomEnd=function(){this.isVisible()&&this._setPosition()},n.onResize=function(){this.isVisible()&&this._setPosition()},n.onDomSizeChange=function(){this.isVisible()&&this._setPosition()},n._updatePosition=function(){if(!this.getMap())return this;var t=this.getMap()._getRenderer();return t.callInNextFrame(this._setPosition.bind(this)),this},n._setPosition=function(){var t=this.getDOM();if(t){t.style[Sn]=null;var e=this.getPosition();this._pos=e,t.style[wn]=this._toCSSTranslate(e)+" scale(1)"}},n._toCSSTranslate=function(t){if(!t)return"";if(ht.any3d){var e=this.getMap(),n=e?e.getBearing():0,r=e?e.getPitch():0,i="";return this.options["pitchWithMap"]&&r&&(i+=" rotateX("+Math.round(r)+"deg)"),this.options["rotateWithMap"]&&n&&(i+=" rotateZ("+Math.round(-n)+"deg)"),"translate3d("+t.x+"px,"+t.y+"px, 0px)"+i}return"translate("+t.x+"px,"+t.y+"px)"},n._observerDomSize=function(t){var e=this;return t&&ht.resizeObserver&&!this._resizeObserver?(this._resizeObserver=new ResizeObserver((function(t){t.length?e._domContentRect=t[0].contentRect:delete e._domContentRect,e.onDomSizeChange&&e.onDomSizeChange()})),this._resizeObserver.observe(t),this):this},n.isSupportZoomFilter=function(){return!1},e.isSupport=function(t){return!!(t&&C(t.on)&&C(t.off)&&C(t.getCenter))},e}(vr(yr));ju.mergeOptions(Ru);var Iu={containerClass:null,eventsPropagation:!0,draggable:!1,single:!1,content:null,altitude:0,minZoom:0,maxZoom:null},Lu="mousedown mouseup mouseenter mouseover mouseout mousemove click dblclick contextmenu keypress touchstart touchmove touchend",Nu=function(t){function e(e,n){var r;return r=t.call(this,n)||this,r._markerCoord=new Ar(e),r}pt(e,t);var n=e.prototype;return n._getClassName=function(){return"UIMarker"},n.setCoordinates=function(t){return this._markerCoord=t,this.fire("positionchange"),this.isVisible()&&(this._coordinate=this._markerCoord,this._setPosition()),this},n.getCoordinates=function(){return this._markerCoord},n.getCenter=function(){return this.getCoordinates()},n.getAltitude=function(){var t=this.getCoordinates()||{};return w(t.z)?t.z:this.options.altitude||0},n.setContent=function(t){var e=this.options["content"];return this.options["content"]=t,this.fire("contentchange",{old:e,new:t}),this.isVisible()&&this.show(),this},n.getContent=function(){return this.options["content"]},n.onAdd=function(){this.show()},n.show=function(){return t.prototype.show.call(this,this._markerCoord)},n.flash=function(t,e,n,r){return Zt.call(this,t,e,n,r)},n.buildOn=function(){var t,e=this.options["content"],n=O(e);return n||C(e)?(t=On("div"),n?t.innerHTML=this.options["content"]:e.bind(this)(t)):t=this.options["content"],this.options["containerClass"]&&(t.className=this.options["containerClass"]),this._registerDOMEvents(t),t},n.getOffset=function(){var t=this.getSize();return new yt(-t.width/2,-t.height/2)},n.getTransformOrigin=function(){return"center center"},n.onDomRemove=function(){var t=this.getDOM();this._removeDOMEvents(t)},n.isDragging=function(){return!!this["draggable"]&&this["draggable"].isDragging()},n._registerDOMEvents=function(t){Xn(t,Lu,this._onDomEvents,this)},n._onDomEvents=function(t){var e=this.getMap()._parseEvent(t,t.type),n=t.type;if("mousedown"===n&&(this._mousedownEvent=t),"mouseup"===n&&(this._mouseupEvent=t),("click"!==n||!this._mouseClickPositionIsChange())&&("touchstart"===n&&(this._touchstartTime=_()),this.fire(t.type,e),"touchend"===n&&ht.touch)){var r=this.getMap().options.clickTimeThreshold||280;_()-this._touchstartTime<r&&this._onDomEvents(b({},t,{type:"click"}))}},n._removeDOMEvents=function(t){qn(t,Lu,this._onDomEvents,this)},n._mouseClickPositionIsChange=function(){var t=this._mousedownEvent||{},e=t.x,n=t.y,r=this._mouseupEvent||{},i=r.x,o=r.y;return e!==i||n!==o},n._getConnectPoints=function(){var t=this.getMap(),e=t.coordToContainerPoint(this.getCoordinates()),n=this.getSize(),r=n.width,i=n.height,o=[t.containerPointToCoordinate(e.add(-r/2,0)),t.containerPointToCoordinate(e.add(r/2,0)),t.containerPointToCoordinate(e.add(0,i/2)),t.containerPointToCoordinate(e.add(0,-i/2))];return o},n._getViewPoint=function(){var t=0;if(this._owner){var e=this.getAltitude();e>0&&(t=this._meterToPoint(this._coordinate,e))}return this.getMap().coordToViewPoint(this._coordinate,void 0,t)._add(this.options["dx"],this.options["dy"])},n._getDefaultEvents=function(){return b({},t.prototype._getDefaultEvents.call(this),{"zooming zoomend":this.onZoomFilter})},n._setPosition=function(){this.onZoomFilter(),t.prototype._setPosition.call(this)},n.onZoomFilter=function(){var t=this.getDOM();t&&(this.isVisible()||"none"===t.style.display?this.isVisible()&&"none"===t.style.display&&(t.style.display=""):t.style.display="none")},n.isVisible=function(){var t=this.getMap();if(!t)return!1;if(!this.options["visible"])return!1;var e=t.getZoom(),n=this.options,r=n.minZoom,i=n.maxZoom;if(!x(r)&&e<r||!x(i)&&e>i)return!1;var o=this.getDOM();return o&&!0},n.isSupportZoomFilter=function(){return!0},e}(Er(ju));Nu.mergeOptions(Iu);var Du=ht.touch?"touchstart mousedown":"mousedown",Fu=function(t){function e(e){return t.call(this,e)||this}pt(e,t);var n=e.prototype;return n.addHooks=function(){this.target.on(Du,this._startDrag,this)},n.removeHooks=function(){this.target.off(Du,this._startDrag,this)},n._startDrag=function(t){var e=t["domEvent"];e.touches&&e.touches.length>1||2===e.button||this.isDragging()||(this.target.on("click",this._endDrag,this),this._lastCoord=t["coordinate"],this._lastPoint=t["containerPoint"],this._prepareDragHandler(),this._dragHandler.onMouseDown(t["domEvent"]),this.target.fire("dragstart",t))},n._prepareDragHandler=function(){this._dragHandler=new Tr(this.target.getDOM(),{cancelOn:this._cancelOn.bind(this),ignoreMouseleave:!0}),this._dragHandler.on("mousedown",this._onMouseDown,this),this._dragHandler.on("dragging",this._dragging,this),this._dragHandler.on("mouseup",this._endDrag,this),this._dragHandler.enable()},n._cancelOn=function(t){var e=t.srcElement||t.target,n=e.tagName.toLowerCase();return"button"===n||"input"===n||"select"===n||"option"===n||"textarea"===n},n._onMouseDown=function(t){Rn(t["domEvent"])},n._dragging=function(t){var e=this.target,n=e.getMap(),r=n._parseEvent(t["domEvent"]),i=r["domEvent"];if(!(i.touches&&i.touches.length>1))if(this._isDragging){var o=r["coordinate"],a=r["containerPoint"];this._lastCoord||(this._lastCoord=o),this._lastPoint||(this._lastPoint=a);var s=o.sub(this._lastCoord),u=a.sub(this._lastPoint);this._lastCoord=o,this._lastPoint=a,this.target.setCoordinates(this.target.getCoordinates().add(s)),r["coordOffset"]=s,r["pointOffset"]=u,e.fire("dragging",r)}else this._isDragging=!0},n._endDrag=function(t){var e=this.target,n=e.getMap();if(this._dragHandler&&(e.off("click",this._endDrag,this),this._dragHandler.disable(),delete this._dragHandler),delete this._lastCoord,delete this._lastPoint,this._isDragging=!1,n){var r=n._parseEvent(t["domEvent"]);e&&e._mouseClickPositionIsChange&&e._mouseClickPositionIsChange()&&e.fire("dragend",r)}},n.isDragging=function(){return!!this._isDragging},e}(mr);Nu.addInitHook("addHandler","draggable",Fu);var Bu=/\{ *([\w_]+) *\}/g,zu={containerClass:"maptalks-msgBox",autoPan:!0,autoCloseOn:null,autoOpenOn:"click",width:"auto",minHeight:120,custom:!1,title:null,content:null,enableTemplate:!1},Uu=new We(0,0),Vu=function(t){function e(){return t.apply(this,arguments)||this}pt(e,t);var n=e.prototype;return n._getClassName=function(){return"InfoWindow"},n.addTo=function(e){return e instanceof aa&&(e.getInfoWindow()&&e.getInfoWindow()!==this&&e.removeInfoWindow(),e._infoWindow=this),t.prototype.addTo.call(this,e)},n.setContent=function(t){var e=this.options["content"];return this.options["content"]=t,this.fire("contentchange",{old:e,new:t}),this.isVisible()&&this.show(this._coordinate),this},n.getContent=function(){return this.options["content"]},n.setTitle=function(t){var e=t;return this.options["title"]=t,this.fire("contentchange",{old:e,new:t}),this.isVisible()&&this.show(this._coordinate),this},n.getTitle=function(){return this.options["title"]},n.buildOn=function(){var t=C(this.options["content"]),e=O(this.options["content"]);if(this.options["custom"]){if(e||t){var n=On("div");return e?(n.innerHTML=this.options["content"],this._replaceTemplate(n)):this.options["content"].bind(this)(n),n}return this._replaceTemplate(this.options["content"]),this.options["content"]}var r=On("div");this.options["containerClass"]&&(r.className=this.options["containerClass"]);var i=this._getWindowWidth();r.style.width=w(i)?i+"px":"auto",r.style.bottom="0px";var o='<em class="maptalks-ico"></em>';this.options["title"]&&(o+="<h2>"+this.options["title"]+"</h2>"),o+='<a href="javascript:void(0);" class="maptalks-close"></a><div class="maptalks-msgContent"></div>',r.innerHTML=o,this._replaceTemplate(r);var a=r.querySelector(".maptalks-msgContent");e||t?e?a.innerHTML=this.options["content"]:this.options["content"].bind(this)(a):a.appendChild(this.options["content"]),this._onCloseBtnClick=this.hide.bind(this);var s=r.querySelector(".maptalks-close");return An(s,"click touchend",this._onCloseBtnClick),t||this._replaceTemplate(a),r},n._replaceTemplate=function(t){if(this.options["enableTemplate"]&&this._owner&&this._owner.getProperties&&t&&t.innerHTML){var e=this._owner.getProperties()||{};if(S(e)){var n=t.innerHTML;t.innerHTML=n.replace(Bu,(function(t,n){return e[n]}))}}return this},n.getTransformOrigin=function(){var t=this.getSize();return t.width/2+"px bottom"},n.getOffset=function(){var t=this.getSize(),e=new yt(-t["width"]/2,0);this.options["custom"]?e._sub(0,t["height"]):e._sub(4,12);var n=this.getOwner();if(n instanceof Na||n instanceof Ga){var r,i;if(n instanceof Na)r=n._getPainter(),i=n.getSize();else{var o=n.getGeometries();if(!o||!o.length)return e;r=o[0]._getPainter(),i=o[0].getSize()}if(i||(i=Uu),r){var a=r.getFixedExtent();e._add(a.xmax-i.width/2,a.ymin)}else e._add(0,-i.height)}return e},n.show=function(e){return this.getMap()&&this.getMap().options["enableInfoWindow"]?t.prototype.show.call(this,e):this},n.getEvents=function(){if(!this.options["autoCloseOn"])return null;var t={};return t[this.options["autoCloseOn"]]=this.hide,t},n.getOwnerEvents=function(){var t=this.getOwner();if(!this.options["autoOpenOn"]||!t)return null;var e={};return e[this.options["autoOpenOn"]]=this._onAutoOpen,e},n.onRemove=function(){this.onDomRemove()},n.onDomRemove=function(){if(this._onCloseBtnClick){var t=this.getDOM(),e=t.childNodes[2];kn(e,"click touchend",this._onCloseBtnClick),delete this._onCloseBtnClick}},n._onAutoOpen=function(t){var e=this,n=this.getOwner();setTimeout((function(){n instanceof Na||n instanceof ju?e.show(n.getCoordinates()):n instanceof Ga?e.show(n.findClosest(t.coordinate)):n instanceof Ba||n instanceof Ya?(e.getMap().getScale()>=8&&(t.coordinate=e._rectifyMouseCoordinte(n,t.coordinate)),e.show(t.coordinate)):e.show(t.coordinate)}),1)},n._rectifyMouseCoordinte=function(t,e){var n=this;return t instanceof Ba?this._rectifyLineStringMouseCoordinate(t,e).coordinate:t instanceof Ya?t.getGeometries().map((function(t){return n._rectifyLineStringMouseCoordinate(t,e)})).sort((function(t,e){return t.dis-e.dis}))[0].coordinate:e},n._rectifyLineStringMouseCoordinate=function(t,e){for(var n=this,r=t.getCoordinates().map((function(t){return n.getMap().coordToContainerPoint(t)})),i=this.getMap().coordToContainerPoint(e),o=1/0,a=-1,s=0,u=r.length;s<u;s++){var c=r[s],l=i.distanceTo(c);l<o&&(o=l,a=s)}var f=[];0===a?f.push(r[0],r[1]):a===r.length-1?f.push(r[a-1],r[a]):f.push(r[a-1],r[a],r[a+1]);for(var h=[],p=this.getMap().getSize(),d=p.width,v=p.height,g=0,m=f.length-1;g<m;g++){var y=f[g],_=f[g+1];if(y.x===_.x)for(var b=Math.max(0,Math.min(y.y,_.y)),x=Math.min(v,Math.max(y.y,_.y)),w=b;w<=x;w++)h.push(new yt(y.x,w));else for(var E=(_.y-y.y)/(_.x-y.x),S=Math.max(0,Math.min(y.x,_.x)),O=Math.min(d,Math.max(y.x,_.x)),C=S;C<=O;C++){var T=E*(C-y.x)+y.y;h.push(new yt(C,T))}}for(var A=1/0,k=-1,M=0,P=h.length;M<P;M++){var R=h[M],j=i.distanceTo(R);j<A&&(A=j,k=M)}return{dis:A,coordinate:k<0?e:this.getMap().containerPointToCoord(h[k])}},n._getWindowWidth=function(){var t=zu.width,e=this.options["width"];return e||(e=t),e},e}(ju);Vu.mergeOptions(zu);var Hu="remove hide shapechange positionchange dragend animatestart",Gu={width:0,height:0,animation:"fade",containerClass:"maptalks-tooltip",showTimeout:400},Wu=function(t){pt(n,t);var e=n.prototype;function n(e,n){var r;return void 0===n&&(n={}),r=t.call(this,n)||this,r._content=e,r}return e._getClassName=function(){return"ToolTip"},e.addTo=function(e){if(n.isSupport(e))return e.on("mousemove",this.onMouseMove,this),e.on("mouseout",this.onMouseOut,this),e.on(Hu,this.hideDom,this),t.prototype.addTo.call(this,e);throw new Error("Invalid geometry or UIMarker the tooltip is added to.")},e.setStyle=function(t){return this.options.containerClass=t,this},e.getStyle=function(){return this.options.containerClass},e.getContent=function(){return this._content},e.buildOn=function(){var t=On("div"),e=this.options||{};e.height&&(t.style.height=e.height+"px"),e.width&&(t.style.width=e.width+"px");var n=e.containerClass||e.cssName;return!n&&e.height&&(t.style.lineHeight=e.height+"px"),C(this._content)?this._content.bind(this)(t):t.innerHTML='<div class="'+n+'">'+this._content+"</div>",t},e.onMouseOut=function(){clearTimeout(this._timeout),this.isVisible()&&this._removePrevDOM(),this._switchMapEvents("off")},e.onMouseMove=function(t){var e=this;clearTimeout(this._timeout);var n=this.getMap();if(n){var r=n.locateByPoint(t.coordinate,-5,25);0===this.options["showTimeout"]?this.show(r):this._timeout=setTimeout((function(){n&&e.show(r)}),this.options["showTimeout"])}},e.onRemove=function(){clearTimeout(this._timeout),this._owner&&(this._owner.off("mouseover",this.onMouseOver,this),this._owner.off("mouseout",this.onMouseOut,this),this._owner.off(Hu,this.hideDom,this))},e.hideDom=function(){return this.hide()},e.onEvent=function(){return t.prototype.onEvent.call(this),this.hideDom(),this},e._getViewPoint=function(){return this.getMap().coordToViewPoint(this._coordinate,void 0,0)._add(this.options["dx"],this.options["dy"])},n}(ju);Wu.mergeOptions(Gu);var Zu={containerClass:"maptalks-menu",animation:null,animationDelay:10,animationOnHide:!1,autoPan:!1,width:160,maxHeight:0,custom:!1,items:[]},Yu=function(t){function e(e){return t.call(this,e)||this}pt(e,t);var n=e.prototype;return n._getClassName=function(){return"Menu"},n.addTo=function(t){return t._menu&&t._menu!==this&&t.removeMenu(),t._menu=this,this._owner=t,ju.prototype.addTo.apply(this,arguments)},n.setItems=function(t){return this.options["items"]=t,this},n.getItems=function(){return this.options["items"]||[]},n.buildOn=function(){if(this.options["custom"]){if(O(this.options["items"])){var t=On("div");return t.innerHTML=this.options["items"],t}return this.options["items"]}var e=On("div");this.options["containerClass"]&&zn(e,this.options["containerClass"]),e.style.width=this._getMenuWidth()+"px";var n=this._createMenuItemDom();return e.appendChild(n),Xn(e,"contextmenu",Pn),e},n.getOffset=function(){if(!this.getMap())return null;var t=this.getMap().getSize(),e=this.getMap().viewPointToContainerPoint(this._getViewPoint()),n=this.getSize(),r=0,i=0;return e.x+n["width"]>t["width"]&&(r=-n["width"]),e.y+n["height"]>t["height"]&&(i=-n["height"]),new yt(r,i)},n.getTransformOrigin=function(){var t=this.getOffset()._multi(-1);return t.x+"px "+t.y+"px"},n.getEvents=function(){return{"_zoomstart _zoomend _movestart _dblclick _click":this._removePrevDOM}},n._createMenuItemDom=function(){var t=this,e=this.getMap(),n=On("ul");zn(n,"maptalks-menu-items");var r,i,o=this.getItems();function a(n){return function(r){var i=e._parseEvent(r,"click");i["target"]=t,i["owner"]=t._owner,i["index"]=n;var o=this._callback(i);!1!==o&&(t.hide(),t._owner&&t._owner.fire("closemenu"))}}for(var s=0,u=o.length;s<u;s++){if(r=o[s],"-"===r||"_"===r)i=On("li"),zn(i,"maptalks-menu-splitter");else{i=On("li");var c=r["item"];C(c)&&(c=c({owner:this._owner,index:s})),i.innerHTML=c,i._callback=r["click"],Xn(i,"click",a(s))}n.appendChild(i)}var l=this.options["maxHeight"]||0;return l>0&&Fn(n,"max-height: "+l+"px; overflow-y: auto;"),n},n._getMenuWidth=function(){var t=160,e=this.options["width"]||t;return e},e}(ju);Yu.mergeOptions(Zu);var Xu={setMenu:function(t){return this._menuOptions=t,this._menu?this._menu.setOptions(t):this.on("contextmenu",this._defaultOpenMenu,this),this},getMenu:function(){return this._menu},openMenu:function(t){var e=this instanceof ha?this:this.getMap();return t||(t=this.getCenter()),this._menu?this._menu.show(t):this._menuOptions&&e&&(this._bindMenu(),this._menu.show(t)),this.fire("openmenu",{coordinate:t}),this},setMenuItems:function(t){return this._menuOptions||(this._menuOptions={}),Array.isArray(t)&&(this._menuOptions["custom"]=!1),this._menuOptions["items"]=t,this.setMenu(this._menuOptions),this},getMenuItems:function(){return this._menu?this._menu.getItems():this._menuOptions&&this._menuOptions["items"]||[]},closeMenu:function(){return this._menu&&this._menu.hide(),this.fire("closemenu",{}),this},removeMenu:function(){return this.off("contextmenu",this._defaultOpenMenu,this),this._unbindMenu(),delete this._menuOptions,this.fire("removemenu",{}),this},_bindMenu:function(){return this._menuOptions?(this._menu=new Yu(this._menuOptions),this._menu.addTo(this),this):this},_unbindMenu:function(){return this._menu&&(this.closeMenu(),this._menu.remove(),delete this._menu),this},_defaultOpenMenu:function(t){return this.openMenu(t["coordinate"]),!1}};ha.include(Xu),aa.include(Xu);var qu=function(t){function e(e){return e&&e["position"]&&!O(e["position"])&&(e["position"]=b({},e["position"])),t.call(this,e)||this}pt(e,t);var n=e.prototype;return n.addTo=function(t){if(this.remove(),!t.options["control"])return this;this._map=t;var e=t._panels.control;return this.__ctrlContainer=On("div"),Fn(this.__ctrlContainer,"position:absolute;overflow:visible;"),this.update(),e.appendChild(this.__ctrlContainer),this.onAdd&&this.onAdd(),this.fire("add",{dom:e}),this},n.update=function(){return this.__ctrlContainer.innerHTML="",this._controlDom=this.buildOn(this.getMap()),this._controlDom&&(this._updatePosition(),this.__ctrlContainer.appendChild(this._controlDom)),this},n.getMap=function(){return this._map},n.getPosition=function(){return b({},this._parse(this.options["position"]))},n.setPosition=function(t){return O(t)?this.options["position"]=t:this.options["position"]=b({},t),this._updatePosition(),this},n.getContainerPoint=function(){var t,e,n=this.getPosition(),r=this.getMap().getSize();return x(n["left"])?x(n["right"])||(t=r["width"]-parseInt(n["right"])):t=parseInt(n["left"]),x(n["top"])?x(n["bottom"])||(e=r["height"]-parseInt(n["bottom"])):e=parseInt(n["top"]),new yt(t,e)},n.getContainer=function(){return this.__ctrlContainer},n.getDOM=function(){return this._controlDom},n.show=function(){return this.__ctrlContainer.style.display="",this},n.hide=function(){return this.__ctrlContainer.style.display="none",this},n.isVisible=function(){return this.__ctrlContainer&&""===this.__ctrlContainer.style.display},n.remove=function(){return this._map?(Tn(this.__ctrlContainer),this.onRemove&&this.onRemove(),delete this._map,delete this.__ctrlContainer,delete this._controlDom,this.fire("remove"),this):this},n._parse=function(t){var n=t;return O(t)&&(n=e["positions"][n]),n},n._updatePosition=function(){var t=this.getPosition();for(var e in t||(t={top:20,left:20}),t)t.hasOwnProperty(e)&&(t[e]=parseInt(t[e]),this.__ctrlContainer.style[e]=t[e]+"px");this.fire("positionchange",{position:b({},t)})},e}(vr(yr));qu.positions={"top-left":{top:20,left:20},"top-right":{top:20,right:20},"bottom-left":{bottom:20,left:20},"bottom-right":{bottom:20,right:20}},ha.mergeOptions({control:!0}),ha.include({addControl:function(t){return this._containerDOM.getContext||t.addTo(this),this},removeControl:function(t){return t&&t.getMap()===this?(t.remove(),this):this}});var Ku={position:{bottom:0,left:0},content:'<a href="http://maptalks.org" target="_blank">maptalks</a>'},Qu="addlayer removelayer setbaselayer baselayerremove",$u=function(t){function e(){return t.apply(this,arguments)||this}pt(e,t);var n=e.prototype;return n.buildOn=function(){return this._attributionContainer=On("div"),this._attributionContainer.className="maptalks-attribution",this._update(),this._attributionContainer},n.onAdd=function(){this.getMap().on(Qu,this._update,this)},n.onRemove=function(){this.getMap().off(Qu,this._update,this)},n._update=function(){var t=this.getMap();if(t){var e=t._getLayers((function(t){return t.options["attribution"]})).reverse().map((function(t){return t.options["attribution"]})),n=this.options["content"]+(e.length>0?" - "+e.join(", "):"");this._attributionContainer.innerHTML='<span style="padding:0px 4px">'+n+"</span>"}},e}(qu);$u.mergeOptions(Ku),ha.mergeOptions({attribution:!0}),ha.addOnLoadHook((function(){var t=this.options["attribution"]||this.options["attributionControl"];t&&(this.attributionControl=new $u(t),this.addControl(this.attributionControl))}));var Ju={position:"top-right",baseTitle:"Base Layers",overlayTitle:"Layers",excludeLayers:[],containerClass:"maptalks-layer-switcher"},tc=function(t){function e(){return t.apply(this,arguments)||this}pt(e,t);var n=e.prototype;return n.buildOn=function(){var t=this.container=On("div",this.options["containerClass"]),e=this.panel=On("div","panel"),n=this.button=On("button");return t.appendChild(n),t.appendChild(e),t},n.onAdd=function(){Xn(this.button,"mouseover",this._show,this),Xn(this.panel,"mouseleave",this._hide,this),Xn(this.getMap(),"click",this._hide,this)},n.onRemove=function(){this.panel&&(qn(this.button,"mouseover",this._show,this),qn(this.panel,"mouseleave",this._hide,this),qn(this.getMap(),"click",this._hide,this),Tn(this.panel),Tn(this.button),delete this.panel,delete this.button,delete this.container)},n._show=function(){Bn(this.container,"shown")||(zn(this.container,"shown"),this._createPanel())},n._hide=function(t){this.panel.contains(t.toElement||t.relatedTarget)||Un(this.container,this.options["containerClass"])},n._createPanel=function(){this.panel.innerHTML="";var t=On("ul");this.panel.appendChild(t),this._renderLayers(this.getMap(),t)},n._renderLayers=function(t,e){var n=this,r=t.getBaseLayer(),i=t.getLayers(),o=i.length;if(r){var a=r.layers||[r],s=On("li","group"),u=On("ul"),c=On("label");c.innerHTML=this.options["baseTitle"],s.appendChild(c);for(var l=0,f=a.length;l<f;l++){var h=a[l];this._isExcluded(h)&&(u.appendChild(this._renderLayer(a[l],!0)),s.appendChild(u),e.appendChild(s))}}if(o){var p=On("li","group"),d=On("ul"),v=On("label"),g=On("input");g.type="checkbox",g.checked=!0,v.innerHTML=this.options["overlayTitle"],p.appendChild(g),p.appendChild(v);for(var m=function(t){var e=t.target.checked,n=t.target.parentNode;if(n){var r=n.getElementsByTagName("ul")[0];if(r){var i=function(t){var n=t._layer;n&&n[e?"show":"hide"]()},o=function(t){var n=t._layer,r=t.childNodes[0];r&&(r.checked=e),n&&n[e?"show":"hide"]()};i(n),r.childNodes.forEach((function(t){o(t);var e=t.getElementsByTagName("ul")[0];e&&(i(t),e.childNodes.forEach((function(t){o(t)})))}))}}},y=0;y<o;y++){var _=i[y];this._isExcluded(_)&&(_.getLayers?function(){var t=On("li","group"),e=On("ul"),r=On("label"),i=On("input");r.innerHTML=_.getId(),i.type="checkbox",i.checked=_.isVisible(),i.onchange=m,t.appendChild(i),t.appendChild(r),t.appendChild(e),t._layer=_,d.appendChild(t);var o=_.getLayers()||[];o.forEach((function(t){e.appendChild(n._renderLayer(t,!1,i.checked))}))}():d.appendChild(this._renderLayer(_)),_&&!_.isVisible()&&(g.checked=!1))}p.appendChild(d),e.appendChild(p),g.onchange=m}},n._isExcluded=function(t){var e=t.getId(),n=this.options["excludeLayers"];return!(n.length&&n.indexOf(e)>=0)},n._renderLayer=function(t,e,n){var r=this;void 0===n&&(n=!0);var i=On("li","layer"),o=On("label"),a=On("input"),s=this.getMap(),u=t.options["visible"];t.options["visible"]=!0;var c=t.isVisible();return t.options["visible"]=u,i.className="layer",e?(a.type="radio",a.name="base"):a.type="checkbox",a.checked=u&&c,n||(a.checked=!1),c||a.setAttribute("disabled","disabled"),a.onchange=function(e){if("radio"===e.target.type){var n=s.getBaseLayer(),i=n.layers;if(i)for(var o=0,a=i.length;o<a;o++){var u=i[o];u[u===t?"show":"hide"]()}else n.isVisible()||n.show();s._fireEvent("setbaselayer")}else t[e.target.checked?"show":"hide"]();r.fire("layerchange",{target:t})},i.appendChild(a),o.innerHTML=t.getId(),i.appendChild(o),i._layer=t,i},e}(qu);tc.mergeOptions(Ju),ha.mergeOptions({layerSwitcherControl:!1}),ha.addOnLoadHook((function(){this.options["layerSwitcherControl"]&&(this.layerSwitcherControl=new tc(this.options["layerSwitcherControl"]),this.addControl(this.layerSwitcherControl))}));var ec={level:4,position:{right:1,bottom:1},size:[300,200],maximize:!0,symbol:{lineWidth:3,lineColor:"#1bbc9b",polygonFill:"#1bbc9b",polygonOpacity:.4},containerClass:"maptalks-overview",buttonClass:"maptalks-overview-button"},nc=function(t){function e(){return t.apply(this,arguments)||this}pt(e,t);var n=e.prototype;return n.buildOn=function(){var t=this.options["size"];this.options["maximize"]||(t=[0,0]);var e=On("div"),n=this.mapContainer=On("div");n.style.width=t[0]+"px",n.style.height=t[1]+"px",n.className=this.options["containerClass"];var r=this.button=On("div");return r.className=this.options["buttonClass"],e.appendChild(n),e.appendChild(r),e},n.onAdd=function(){this.options["maximize"]&&this._createOverview(),this.getMap().on("resize moving zooming rotate dragrotating viewchange",this._update,this).on("setbaselayer",this._updateBaseLayer,this).on("spatialreferencechange",this._updateSpatialReference,this),Xn(this.button,"click",this._onButtonClick,this),this._updateButtonText()},n.onRemove=function(){this.getMap().off("resize moving zooming rotate dragrotating viewchange",this._update,this).off("setbaselayer",this._updateBaseLayer,this).off("spatialreferencechange",this._updateSpatialReference,this),this._overview&&(this._overview.remove(),delete this._overview,delete this._perspective),qn(this.button,"click",this._onButtonClick,this)},n.maxmize=function(){var t=this.options["size"],e=this.mapContainer;return e.style.width=t[0]+"px",e.style.height=t[1]+"px",this._createOverview(),this},n.minimize=function(){this._overview&&this._overview.remove(),delete this._overview,delete this._perspective;var t=this.mapContainer;return t.style.width="0px",t.style.height="0px",this},n.getOverviewMap=function(){return this._overview},n._onButtonClick=function(){this._overview?this.minimize():this.maxmize(),this._updateButtonText()},n._updateButtonText=function(){this._overview?this.button.innerHTML="-":this.button.innerHTML="+"},n._createOverview=function(){var t=this.getMap(),e=this.mapContainer,n=t.config();b(n,{center:t.getCenter(),zoom:this._getOverviewZoom(),zoomAnimationDuration:150,pitch:0,bearing:0,scrollWheelZoom:!1,checkSize:!1,doubleClickZoom:!1,touchZoom:!1,control:!1,draggable:!1,maxExtent:null}),this._overview=new ha(e,n),this._updateBaseLayer(),this._perspective=new Ra(this._getPerspectiveCoords(),{draggable:!0,cursor:"move",symbol:this.options["symbol"]}).on("dragend",this._onDragEnd,this),new Cs("perspective_layer",this._perspective).addTo(this._overview),this.fire("load")},n._getOverviewZoom=function(){var t=this.getMap(),e=t.getZoom(),n=t.getMinZoom(),r=this.options["level"];if(r>0){for(var i=r;i>0;i--)if(e-i>=n)return e-i}else for(var o=r;o<0;o++)if(e-o>=n)return e-o;return e},n._onDragEnd=function(){var t=this._perspective.getCenter();this._overview.setCenter(t),this.getMap().panTo(t)},n._getPerspectiveCoords=function(){var t=this.getMap(),e=t.getProjection();return t.getContainerExtent().toArray().map((function(n){if(e){var r=t._containerPointToPrj(n);return t._fixPrjOnWorldWide(r),e.unproject(r)}return t.containerPointToCoordinate(n)}))},n._update=function(){if(this._overview){Ln(this._overview._containerDOM);var t=this._getPerspectiveCoords();this._perspective.setCoordinates(t),this._overview.setCenterAndZoom(this.getMap().getCenter(),this._getOverviewZoom())}},n._updateSpatialReference=function(){if(this._overview){var t=this.getMap(),e=t.options["spatialReference"];this._overview.setSpatialReference(e)}},n._updateBaseLayer=function(){if(this._overview){var t=this.getMap(),e=t.getBaseLayer();if(e){var n=e.layers,r=0;if(n)for(var i=0,o=n.length;i<o;i++){var a=n[i];if(a.isVisible()){r=i;break}}var s=e.toJSON(),u=null;n?(u=s.layers[r].options,u.visible=!0):u=s.options,this._overview.setMinZoom(u.minZoom||null).setMaxZoom(u.maxZoom||null),delete u.minZoom,delete u.maxZoom,delete s.options.canvas,s.options.visible=!0,s.options.renderer="canvas";var c=ua.fromJSON(s);for(var l in e)C(e[l])&&e.hasOwnProperty(l)&&e[l]!==e.constructor.prototype[l]&&(c[l]=e[l]);this._overview.setBaseLayer(c)}else this._overview.setBaseLayer(null)}},e}(qu);nc.mergeOptions(ec),ha.mergeOptions({overviewControl:!1}),ha.addOnLoadHook((function(){this.options["overviewControl"]&&(this.overviewControl=new nc(this.options["overviewControl"]),this.addControl(this.overviewControl))}));var rc={position:"top-right",draggable:!0,custom:!1,content:"",closeButton:!0},ic=function(t){function e(){return t.apply(this,arguments)||this}pt(e,t);var n=e.prototype;return n.buildOn=function(){var t;if(this.options["custom"])O(this.options["content"])?(t=On("div"),t.innerHTML=this.options["content"]):t=this.options["content"];else{if(t=On("div","maptalks-panel"),this.options["closeButton"]){var e=On("a","maptalks-close");e.href="javascript:;",e.onclick=function(){t.style.display="none"},t.appendChild(e)}var n=On("div","maptalks-panel-content");n.innerHTML=this.options["content"],t.appendChild(n)}return this.draggable=new Tr(t,{cancelOn:this._cancelOn.bind(this),ignoreMouseleave:!0}),this.draggable.on("dragstart",this._onDragStart,this).on("dragging",this._onDragging,this).on("dragend",this._onDragEnd,this),this.options["draggable"]&&this.draggable.enable(),t},n.update=function(){return this.draggable&&(this.draggable.disable(),delete this.draggable),qu.prototype.update.call(this)},n.setContent=function(t){var e=this.options["content"];return this.options["content"]=t,this.fire("contentchange",{old:e,new:t}),this.isVisible()&&this.update(),this},n.getContent=function(){return this.options["content"]},n._cancelOn=function(t){var e=t.srcElement||t.target,n=e.tagName.toLowerCase();return"button"===n||"input"===n||"select"===n||"option"===n||"textarea"===n},n._onDragStart=function(t){this._startPos=t["mousePos"],this._startPosition=b({},this.getPosition()),this.fire("dragstart",t)},n._onDragging=function(t){var e=t["mousePos"],n=e.sub(this._startPos),r=this._startPosition,i=this.getPosition();x(i["top"])||(i["top"]=parseInt(r["top"])+n.y),x(i["bottom"])||(i["bottom"]=parseInt(r["bottom"])-n.y),x(i["left"])||(i["left"]=parseInt(r["left"])+n.x),x(i["right"])||(i["right"]=parseInt(r["right"])-n.x),this.setPosition(i),this.fire("dragging",t)},n._onDragEnd=function(t){delete this._startPos,delete this._startPosition,this.fire("dragend",t)},n._getConnectPoints=function(){var t=this.getMap(),e=this.getContainerPoint(),n=this.getDOM(),r=parseInt(n.clientWidth),i=parseInt(n.clientHeight),o=[t.containerPointToCoordinate(e.add(r/2,0)),t.containerPointToCoordinate(e.add(r,i/2)),t.containerPointToCoordinate(e.add(r/2,i)),t.containerPointToCoordinate(e.add(0,i/2))];return o},e}(qu);ic.mergeOptions(rc);var oc={position:"bottom-left",maxWidth:100,metric:!0,imperial:!1,containerClass:null},ac=function(t){function e(){return t.apply(this,arguments)||this}pt(e,t);var n=e.prototype;return n.buildOn=function(t){return this._map=t,this._scaleContainer=On("div",this.options["containerClass"]),this._addScales(),t.on("zoomend",this._update,this),this._map._loaded&&this._update(),this._scaleContainer},n.onRemove=function(){this.getMap().off("zoomend",this._update,this)},n._addScales=function(){var t="border: 2px solid #000000;border-top: none;line-height: 1.1;padding: 0px;color: #000000;font-size: 11px;text-align:center;white-space: nowrap;overflow: hidden;-moz-box-sizing: content-box;box-sizing: content-box;background: #fff; background: rgba(255, 255, 255, 0);";this.options["metric"]&&(this._mScale=Cn("div",this.options["containerClass"]?null:t,this._scaleContainer)),this.options["imperial"]&&(this._iScale=Cn("div",this.options["containerClass"]?null:t,this._scaleContainer))},n._update=function(){var t=this._map,e=t.pixelToDistance(this.options["maxWidth"],0);this._updateScales(e)},n._updateScales=function(t){this.options["metric"]&&t&&this._updateMetric(t),this.options["imperial"]&&t&&this._updateImperial(t)},n._updateMetric=function(t){var e=this._getRoundNum(t),n=e<1e3?e+" m":e/1e3+" km";this._updateScale(this._mScale,n,e/t)},n._updateImperial=function(t){var e,n,r,i=3.2808399*t;i>5280?(e=i/5280,n=this._getRoundNum(e),this._updateScale(this._iScale,n+" mile",n/e)):(r=this._getRoundNum(i),this._updateScale(this._iScale,r+" feet",r/i))},n._updateScale=function(t,e,n){t["style"]["width"]=Math.round(this.options["maxWidth"]*n)+"px",t["innerHTML"]=e},n._getRoundNum=function(t){var e=Math.pow(10,(Math.floor(t)+"").length-1),n=t/e;return n=n>=10?10:n>=5?5:n>=3?3:n>=2?2:1,e*n},e}(qu);ac.mergeOptions(oc),ha.mergeOptions({scaleControl:!1}),ha.addOnLoadHook((function(){this.options["scaleControl"]&&(this.scaleControl=new ac(this.options["scaleControl"]),this.addControl(this.scaleControl))}));var sc={height:28,vertical:!1,position:"top-right",reverseMenu:!1,items:{}},uc=function(t){function e(){return t.apply(this,arguments)||this}pt(e,t);var n=e.prototype;return n.buildOn=function(t){this._map=t;var e=On("div"),n=On("ul","maptalks-toolbar-hx");e.appendChild(n),this.options["vertical"]?zn(e,"maptalks-toolbar-vertical"):zn(e,"maptalks-toolbar-horizonal");var r=this;function i(t,e,n,i){var o=r._getItems()[e];return function(r){return Rn(r),t({target:o,index:e,childIndex:n,dom:i})}}var o=this.options["items"];if(jt(o))for(var a=0,s=o.length;a<s;a++){var u=o[a],c=On("li");if(28!==this.options["height"]&&(c.style.lineHeight=this.options["height"]+"px"),c.style.height=this.options["height"]+"px",c.style.cursor="pointer",Gn(u["item"])){c.style.textAlign="center";var l=Wn("div",u["item"]);c.innerHTML='<div style="margin-top:'+(this.options["height"]-l["height"])/2+'px;">'+u["item"]+"</div>"}else c.innerHTML=u["item"];if(u["click"]&&Xn(c,"click",i(u["click"],a,null,c)),jt(u["children"])){var f=this._createDropMenu(a);c.appendChild(f),c._menu=f,Xn(c,"mouseover",(function(){this._menu.style.display=""})),Xn(c,"mouseout",(function(){this._menu.style.display="none"}))}n.appendChild(c)}return e},n._createDropMenu=function(t){var e=this;function n(t,n,r){var i=e._getItems()[n]["children"][r];return function(e){return Rn(e),t({target:i,index:n,childIndex:r})}}var r=On("div","maptalks-dropMenu"),i=this._getItems(),o=i.length,a=On("ul"),s=i[t]["children"];t===o-1&&s&&(r.style.cssText="right: 0px;",a.style.cssText="right: 0px;position: absolute;",this.options["reverseMenu"]&&(a.style.bottom=0)),r.appendChild(On("em","maptalks-ico"));for(var u=0,c=0,l=s.length;c<l;c++){var f=$e(s[c]["item"],"12px");f.width>u&&(u=f.width)}for(var h=0,p=s.length;h<p;h++){var d=s[h],v=On("li");v.innerHTML='<a href="javascript:;">'+d["item"]+"</a>",v.style.cursor="pointer",v.style.width=u+24+"px",Xn(v.childNodes[0],"click",n(d["click"],t,h)),a.appendChild(v)}if(this.options["vertical"]){var g=u<95?95:u;this.options["reverseMenu"]?r.style.right=-(g+20)+"px":r.style.left=-(g+20)+"px"}else this.options["reverseMenu"]?r.style.bottom="28px":r.style.top="28px";return r.appendChild(a),r.style.display="none",r},n._getItems=function(){return this.options["items"]||[]},e}(qu);uc.mergeOptions(sc);var cc={position:"top-left",slider:!0,zoomLevel:!0,seamless:!1},lc=10,fc=function(t){function e(){return t.apply(this,arguments)||this}pt(e,t);var n=e.prototype;return n.buildOn=function(t){var e=this.options,n=On("div","maptalks-zoom");if(e["zoomLevel"]){var r=On("span","maptalks-zoom-zoomlevel");n.appendChild(r),this._levelDOM=r}var i=On("div","maptalks-zoom-slider"),o=On("a","maptalks-zoom-zoomin");if(o.href="javascript:;",o.innerHTML="+",i.appendChild(o),this._zoomInButton=o,e["slider"]){var a=On("div","maptalks-zoom-slider-box"),s=On("div","maptalks-zoom-slider-ruler"),u=On("span","maptalks-zoom-slider-reading"),c=On("span","maptalks-zoom-slider-dot");s.appendChild(u),a.appendChild(s),a.appendChild(c),i.appendChild(a),this._sliderBox=a,this._sliderRuler=s,this._sliderReading=u,this._sliderDot=c}var l=On("a","maptalks-zoom-zoomout");return l.href="javascript:;",l.innerHTML="-",i.appendChild(l),this._zoomOutButton=l,n.appendChild(i),t.on("_zoomend _zooming _zoomstart _spatialreferencechange",this._update,this),this._update(),this._registerDomEvents(),n},n.onRemove=function(){this.getMap().off("_zoomend _zooming _zoomstart _spatialreferencechange",this._update,this),this._zoomInButton&&qn(this._zoomInButton,"click",this._onZoomInClick,this),this._zoomOutButton&&qn(this._zoomOutButton,"click",this._onZoomOutClick,this),this._sliderRuler&&(qn(this._sliderRuler,"click",this._onClickRuler,this),this.dotDragger.disable(),delete this.dotDragger)},n._update=function(){var t=this.getMap();if(this._sliderBox){var e=(t.getMaxZoom()-t.getMinZoom())*lc;this._sliderBox.style.height=e+16+"px",this._sliderRuler.style.height=e+8+"px",this._sliderRuler.style.cursor="pointer";var n=(t.getMaxZoom()-t.getZoom())*lc;this._sliderReading.style.height=(t.getZoom()-t.getMinZoom()+1)*lc+"px",this._sliderDot.style.top=n+"px"}this._updateText()},n._updateText=function(){if(this._levelDOM){var t=this.getMap(),e=t.getZoom();E(e)||(e=Math.floor(10*e)/10),this._levelDOM.innerHTML=e}},n._registerDomEvents=function(){this._zoomInButton&&Xn(this._zoomInButton,"click",this._onZoomInClick,this),this._zoomOutButton&&Xn(this._zoomOutButton,"click",this._onZoomOutClick,this),this._sliderRuler&&(Xn(this._sliderRuler,"click",this._onClickRuler,this),this.dotDragger=new Tr(this._sliderDot,{ignoreMouseleave:!0}),this.dotDragger.on("dragstart",this._onDotDragstart,this).on("dragging dragend",this._onDotDrag,this).enable())},n._onZoomInClick=function(t){Pn(t),this.getMap().zoomIn()},n._onZoomOutClick=function(t){Pn(t),this.getMap().zoomOut()},n._onClickRuler=function(t){Pn(t);var e=this.getMap(),n=Nn(t,this._sliderRuler),r=n.y,i=e.getMaxZoom(),o=Math.floor(i-r/lc);e.setZoom(o)},n._onDotDragstart=function(t){Pn(t.domEvent);var e=this.getMap(),n=e.getSize().toPoint()._multi(.5);e.onZoomStart(e.getZoom(),n)},n._onDotDrag=function(t){Pn(t.domEvent);var e=this.getMap(),n=e.getSize().toPoint()._multi(.5),r=Nn(t.domEvent,this._sliderRuler),i=e.getMaxZoom(),o=e.getMinZoom(),a=r.y,s=i-a/lc;i<s?(s=i,a=0):o>s&&(s=o,a=(i-o)*lc),"dragging"===t.type?e.onZooming(s,n,1):"dragend"===t.type&&(this.options["seamless"]?e.onZoomEnd(s,n):e.onZoomEnd(Math.round(s),n)),this._sliderDot.style.top=a+"px",this._sliderReading.style.height=(e.getZoom()-o+1)*lc+"px",this._updateText()},e}(qu);fc.mergeOptions(cc),ha.mergeOptions({zoomControl:!1}),ha.addOnLoadHook((function(){this.options["zoomControl"]&&(this.zoomControl=new fc(this.options["zoomControl"]),this.addControl(this.zoomControl))}));var hc=function(){function t(t,e,n,r){Array.isArray(t)?(this.scale={x:t[0],y:t[1]},this.origin={x:t[2],y:t[3]}):(this.scale={x:t,y:e},this.origin={x:n,y:r})}return t.getDefault=function(t){return"baidu"===t["code"].toLowerCase()?"baidu":t["code"].toLowerCase()==="EPSG:4326".toLowerCase()?"tms-global-geodetic":"identity"===t["code"].toLowerCase()?[1,-1,0,0]:"web-mercator"},t}(),pc=6378137*Math.PI;b(hc,{"web-mercator":new hc([1,-1,-pc,pc]),"tms-global-mercator":new hc([1,1,-pc,-pc]),"tms-global-geodetic":new hc([1,1,-180,-90]),baidu:new hc([1,1,0,0])});var dc=function(){function t(t,e,n,r){this.map=t,this.tileSize=r,this.fullExtent=n,this.prepareTileInfo(e,n),this._xScale=n["right"]>=n["left"]?1:-1,this._yScale=n["top"]>=n["bottom"]?1:-1;var i=t.getGLRes();this._pointOrigin=t._prjToPointAtRes(new yt(this.tileSystem["origin"]),i),this._glRes=i}var e=t.prototype;return e.prepareTileInfo=function(t,e){if(O(t)?t=hc[t.toLowerCase()]:Array.isArray(t)&&(t=new hc(t)),!t)throw new Error("Invalid TileSystem");this.tileSystem=t;var n=e["right"]>e["left"]?1:-1,r=e["top"]>e["bottom"]?-1:1,i=t["origin"]["x"],o=t["origin"]["y"];this.transformation=new Gr([n,r,i,o])},e._getTileNum=function(t,e){var n=this.tileSystem,r=this["tileSize"],i=1e-7,o=Math.floor(i*n["scale"]["x"]+t.x/(r["width"]*e)),a=Math.ceil(i*n["scale"]["y"]+t.y/(r["height"]*e));return{x:n["scale"]["x"]*o,y:n["scale"]["y"]*a}},e.getTileIndex=function(t,e,n){var r=this.tileSystem,i=this.transformation.transform(t,1),o=this._getTileNum(i,e);return r["scale"]["x"]<0&&(o["x"]-=1),r["scale"]["y"]>0&&(o["y"]-=1),this.getNeighorTileIndex(o["x"],o["y"],0,0,e,n)},e.getNeighorTileIndex=function(t,e,n,r,i,o){var a=this.tileSystem,s=t+a["scale"]["x"]*n,u=e-a["scale"]["y"]*r,c=!1,l=s,f=u,h=this._getTileFullIndex(i);return o&&(!0!==o&&"x"!==o||(h["xmax"]===h["xmin"]?s=h["xmin"]:s<h["xmin"]?(s=h["xmax"]-(h["xmin"]-s)%(h["xmax"]-h["xmin"]),s===h["xmax"]&&(s=h["xmin"])):s>=h["xmax"]&&(s=h["xmin"]+(s-h["xmin"])%(h["xmax"]-h["xmin"]))),!0!==o&&"y"!==o||(h["ymax"]===h["ymin"]?u=h["ymin"]:u>=h["ymax"]?u=h["ymin"]+(u-h["ymin"])%(h["ymax"]-h["ymin"]):u<h["ymin"]&&(u=h["ymax"]-(h["ymin"]-u)%(h["ymax"]-h["ymin"]),u===h["ymax"]&&(u=h["ymin"])))),(s<h["xmin"]||s>h["xmax"]||u>h["ymax"]||u<h["ymin"])&&(c=!0),{x:s,y:u,idx:l,idy:f,out:c}},e._getTileFullIndex=function(t){if(this._tileFullIndex||(this._tileFullIndex={}),this._tileFullIndex[t])return this._tileFullIndex[t];var e=this.fullExtent,n=this.transformation,r=this._getTileNum(n.transform(new Ar(e["left"],e["top"]),1),t),i=this._getTileNum(n.transform(new Ar(e["right"],e["bottom"]),1),t),o=this.tileSystem;return o["scale"]["x"]<0&&(r.x-=1,i.x-=1),o["scale"]["y"]>0&&(r.y-=1,i.y-=1),this._tileFullIndex[t]=new Vr(r,i),this._tileFullIndex[t]},e.getTilePrjNW=function(t,e,n){var r=this.tileSystem,i=this["tileSize"],o=r["origin"]["y"]+this._yScale*r["scale"]["y"]*(e+(1===r["scale"]["y"]?1:0))*n*i["height"],a=r["origin"]["x"]+this._xScale*r["scale"]["x"]*(t+(1===r["scale"]["x"]?0:1))*n*i["width"];return new Ar(a,o)},e.getTilePointNW=function(t,e,n){var r=this._glRes/n,i=this.tileSystem,o=this["tileSize"],a=this._pointOrigin.y*r+this._yScale*i["scale"]["y"]*(e+(1===i["scale"]["y"]?1:0))*o["height"],s=this._pointOrigin.x*r+this._xScale*i["scale"]["x"]*(t+(1===i["scale"]["x"]?0:1))*o["width"];return new yt(s,a)},e.getTilePrjSE=function(t,e,n){var r=this.tileSystem,i=this["tileSize"],o=r["origin"]["y"]+this._yScale*r["scale"]["y"]*(e+(1===r["scale"]["y"]?0:1))*n*i["height"],a=r["origin"]["x"]+this._xScale*r["scale"]["x"]*(t+(1===r["scale"]["x"]?1:0))*n*i["width"];return new Ar(a,o)},e.getTilePointSE=function(t,e,n){var r=this._glRes/n,i=this.tileSystem,o=this["tileSize"],a=this._pointOrigin.y*r+this._yScale*i["scale"]["y"]*(e+(1===i["scale"]["y"]?0:1))*o["height"],s=this._pointOrigin.x*r+this._xScale*i["scale"]["x"]*(t+(1===i["scale"]["x"]?1:0))*o["width"];return new yt(s,a)},e.getTilePrjExtent=function(t,e,n){var r=this.getTilePrjNW(t,e,n),i=this.getTilePrjSE(t,e,n);return new Vr(r,i)},t}(),vc=1,gc=new yt(0,0),mc=32,yc="undefined"!==typeof Set,_c=function(){function t(){this._table=yc?new Set:{}}var e=t.prototype;return e.add=function(t){yc?this._table.add(t):this._table[t]=!0},e.has=function(t){return yc?this._table.has(t):this._table[t]},e.reset=function(){yc?this._table.clear():this._table={}},t}(),bc={urlTemplate:null,subdomains:null,errorUrl:null,repeatWorld:!0,background:!0,backgroundZoomDiff:6,loadingLimitOnInteracting:3,tileRetryCount:0,placeholder:!1,crossOrigin:null,tileSize:[256,256],offset:[0,0],tileSystem:null,fadeAnimation:!R,debug:!1,spatialReference:null,maxCacheSize:256,renderer:function(){return ht.webgl?"gl":"canvas"}(),clipByPitch:!0,maxAvailableZoom:null,cascadeTiles:!0,zoomOffset:0,pyramidMode:1,decodeImageInWorker:!1,tileLimitPerFrame:0,backZoomOffset:0},xc=/\{ *([\w_]+) *\}/g,wc=new yt(0,0),Ec=new yt(0,0),Sc=new yt(0,0),Oc=new yt(0,0),Cc=new yt(0,0),Tc=new yt(0,0),Ac=[[0,0,0],[0,0,0]],kc=[0,0,0],Mc=[0,0,0],Pc=[],Rc=function(t){function e(){return t.apply(this,arguments)||this}pt(e,t),e.fromJSON=function(t){return t&&"TileLayer"===t["type"]?new e(t["id"],t["options"]):null};var n=e.prototype;return n.getTileSize=function(){if(this._tileSize)return this._tileSize;var t=this.options["tileSize"];return w(t)&&(t=[t,t]),this._tileSize=new We(t),this._tileSize},n.getTiles=function(t,e){return this._coordCache={},this._isPyramidMode()?this._getPyramidTiles(t,e):this._getCascadeTiles(t,e)},n._isPyramidMode=function(){var t=this.getSpatialReference();return!this._disablePyramid&&!this._hasOwnSR&&this.options["pyramidMode"]&&t&&t.isPyramid()},n._getTileFullExtent=function(){if(this._tileFullExtent)return this._tileFullExtent;var t=this.getSpatialReference(),e=t.getFullExtent(),n=t.getResolution(0),r=this.getMap();return this._tileFullExtent=e.convertTo((function(t){return r._prjToPointAtRes(t,n,gc)})),this._tileFullExtent},n._getRootNodes=function(t){var e=this.getMap();if(this._rootNodes){var n=this._rootNodes,r=n.tiles,i=n.mapWidth,o=n.mapHeight;if(e.width!==i||e.height!==o){for(var a=this._getRootError(),s=0;s<r.length;s++)r[s].error=a;this._rootNodes.mapWidth=e.width,this._rootNodes.mapHeight=e.height}for(var u=0;u<r.length;u++)r[u].offset[0]=t[0],r[u].offset[1]=t[1];return this._rootNodes}var c=this.getSpatialReference(),l=c.getResolution(0),f=this._getTileConfig(),h=c.getFullExtent(),p=f.tileSystem,d=p.origin,v=p.scale,g=f.getTilePrjExtent(0,0,l),m=g.getWidth(),y=g.getHeight(),_=1e-5,b=Math.abs((d.x-h.left)/m);b=Math.ceil(b-_);var x=Math.abs((h.right-d.x)/m);x=Math.ceil(x-_);var w=Math.ceil(Math.abs(h.top-d.y)/y);w=Math.ceil(w-_);var E=Math.ceil(Math.abs(h.bottom-d.y)/y);if(E=Math.ceil(E-_),(x+b)*(E+w)>mc)return{status:0,error:"Too many root nodes"};for(var S=this._getRootError(),O=[],C=0,T=-b;T<x;T++)for(var A=-w;A<E;A++){var k=v.y<0?A:-(A+1);O.push({x:T,y:k,z:C,idx:T,idy:k,res:l,extent2d:f.getTilePrjExtent(T,k,l).convertTo((function(t){return e._prjToPointAtRes(t,l,gc)})),id:this._getTileId(T,k,C),url:this.getTileUrl(T,k,C+this.options["zoomOffset"]),offset:[0,0],error:S,children:[]})}return this._rootNodes={status:1,tiles:O,mapWidth:e.width,mapHeight:e.height},this._getRootNodes(t)},n._getRootError=function(){var t=this.getMap(),e=M(t.getFov()),n=t.width/t.height,r=t.cameraPosition[2],i=r*Math.tan(.5*e),o=i*n,a=Math.sqrt(r*r+i*i+o*o),s=t._getFovZ(0),u=s*(a/r),c=this.getSpatialReference(),l=c.getResolution(0);return u*l/t.getResolution(0)},n._getPyramidTiles=function(t,e){var n=this.getMap();isNaN(+t)&&(t=this._getTileZoom(n.getZoom()));var r,i=this.getSpatialReference(),o=Math.min(t,this.getMaxZoom()),a=n.projViewMatrix,s=this._getTileFullExtent(),u=this._getTileOffset(0);if(this.options["repeatWorld"]){var c=n.getContainerExtent(),l=this._convertToExtent2d(c),f=i.getResolution(0)/n.getResolution();if(l.within(s.copy()._scale(f))){var h=this._getRootNodes(u);if(1!==h.status)return console.warn(h.error),this._disablePyramid=!0,this.getTiles(t,e);r=h.tiles.concat()}else{var p=n.getPitch(),d=n.options["cascadePitches"][1],v=Math.floor(n._getVisualHeight(d)),g=p<=d?c:new Hr(0,n.height-v,n.width,n.height);this._visitedTiles=new _c;var m=this._getTiles(0,g,2,e&&e.getRenderer(),!0),y=this._getRootError();m.tiles.forEach((function(t){t.error=y})),r=m.tiles}}else{var _=this._getRootNodes(u);if(1!==_.status)return console.warn(_.error),this._disablePyramid=!0,this.getTiles(t,e);r=_.tiles.concat()}var b=n.getGLRes(),x={0:u},w=this.options["backZoomOffset"]+t,E=new Hr,S=[];while(r.length>0){var O=r.pop();O.z!==o?(x[O.z+1]||(x[O.z+1]=this._getTileOffset(O.z+1)),this._splitNode(O,a,r,S,E,o,x[O.z+1],e&&e.getRenderer(),b),w<t&&S[S.length-1]!==O&&w===O.z&&S.push(O)):(E._combine(O.extent2d),S.push(O))}return{tileGrids:[{extent:E,count:S.length,tiles:S,offset:[0,0],zoom:t}],count:S.length}},n._splitNode=function(t,e,n,r,i,o,a,s,u){for(var c=this._getTileConfig().tileSystem,l=c.scale.y,f=t.z+1,h=this.getSpatialReference(),p=t.x,d=t.y,v=t.extent2d,g=t.idx,m=t.idy,y=2,_=v.getWidth()/2*y,b=v.getHeight()/2*y,x=v.xmin*y,w=v.ymax*y,E=v.ymin*y,S=s||this.getRenderer(),O=!1,C=[],T=h.getResolution(f),A=T/u,k=0;k<4;k++){var M=k%2,P=k>>1,R=(p<<1)+M,j=(d<<1)+P,I=(g<<1)+M,L=(m<<1)+P;t.children||(t.children=[]);var N=t.children[k];N||(N=this._getTileId(I,L,f),t.children[k]=N);var D=S.isTileCachedOrLoading(N),F=void 0,B=D&&D.info;if(!B){if(this.tileInfoCache||(this.tileInfoCache=new Jn(4*this.options["maxCacheSize"])),B=this.tileInfoCache.get(N),!B){if(l<0){var z=x+M*_,U=w-P*b;F=new Hr(z,U-b,z+_,U)}else{var V=x+M*_,H=E+P*b;F=new Hr(V,H,V+_,H+b)}B={x:R,y:j,idx:I,idy:L,z:f,extent2d:F,error:t.error/2,res:T,id:N,parentNodeId:t.id,children:[],url:this.getTileUrl(R,j,f+this.options["zoomOffset"]),offset:a},this.tileInfoCache.add(N,B)}s&&(B["layer"]=this.getId())}B.error=t.error/2,B.offset[0]=a[0],B.offset[1]=a[1];var G=this._isTileVisible(B,e,A,o,a);if(1===G)O=!0;else{if(-1===G)continue;if(0===G&&f!==o)return r.push(t),void i._combine(t.extent2d)}C.push(B)}f===o?O?n.push.apply(n,C):(r.push(t),i._combine(t.extent2d)):n.push.apply(n,C)},n._isTileVisible=function(t,e,n,r,i){if(0===t.z)return 1;if(!this._isTileInFrustum(t,e,n,i))return-1;var o=this.options["maxError"];x(o)&&(o=vc);var a=this._getScreenSpaceError(t,n,r,i);return a>=o?1:0},n._isTileInFrustum=function(t,e,n,r){if(!this._zScale){var i=this.getMap(),o=i.getGLRes();this._zScale=i.altitudeToPoint(100,o)/100}var a=t.extent2d,s=a.xmin,u=a.ymin,l=a.xmax,f=a.ymax;return Ac[0][0]=(s-r[0])*n,Ac[0][1]=(u-r[1])*n,Ac[0][2]=(t.minAltitude||0)*this._zScale,Ac[1][0]=(l-r[0])*n,Ac[1][1]=(f-r[1])*n,Ac[1][2]=(t.maxAltitude||0)*this._zScale,Object(c["a"])(e,Ac)},n._getScreenSpaceError=function(t,e,n,r){var i=t.error,o=this.getMap(),a=t.extent2d,s=a.xmin,u=a.ymin,c=a.xmax,l=a.ymax;kc[0]=(s-r[0])*e,kc[1]=(u-r[1])*e,Mc[0]=(c-r[0])*e,Mc[1]=(l-r[1])*e;var f,h=jc(kc,Mc,o.cameraPosition),p=Math.max(Math.abs(h),1e-7),d=Math.abs(t.z-n);f=o.height<1e3||d<=1?1:d<=2?.7:.605;var v=i*f/p;return v},n._getCascadeTiles=function(t,e){var n=this.getMap(),r=n.getPitch(),i=e&&e.getRenderer(),o=n.getContainerExtent(),a=[],s=0,u=this.getMinZoom(),c=n.options["cascadePitches"][0],l=n.options["cascadePitches"][1],f=Math.floor(n._getVisualHeight(l)),h=x(t)?this._getTileZoom(n.getZoom()):t;if(this._visitedTiles=new _c,!x(t)||!this.options["cascadeTiles"]||r<=c||!x(u)&&h<=u){var p=r<=l?o:new Hr(0,n.height-f,n.width,n.height),d=this._getTiles(h,p,2,i);return d&&(s+=d.tiles.length,a.push(d)),{tileGrids:a,count:s}}var v=Math.floor(n._getVisualHeight(c)),g=new Hr(0,n.height-v,n.width,n.height),m=this._getTiles(h,g,0,i);s+=m?m.tiles.length:0,a.push(m);var y,_,b=g.ymin,w=n.getSpatialReference().getZoomDirection(),E=w;if(r>l){h-E<=u&&(E=0);var S=new Hr(0,n.height-f,n.width,b);y=this._getTiles(h-E,S,1,i),s+=y?y.tiles.length:0,b=S.ymin,E+=4*w,a.push(y)}if(h-E>=u){var O=new Hr(0,o.ymin,n.width,b);_=this._getTiles(h-E,O,2,i),s+=_?_.tiles.length:0,a.push(_)}return y&&_&&(a[1]=_,a[2]=y),{tileGrids:a,count:s}},n.getTileUrl=function(t,e,n){var r=this.options["urlTemplate"],i="";if(this.options["subdomains"]){var o=this.options["subdomains"];if(jt(o)){var a=o.length,s=(t+e)%a;s<0&&(s=0),i=o[s]}}if(C(r))return r(t,e,n,i);var u={x:t,y:e,z:n,s:i};return this.options.token&&(u.token=this.options.token),this.options.customTags&&b(u,this.options.customTags),r.replace(xc,(function(t,e){var n=u[e];if(void 0===n)throw new Error("No value provided for variable "+t);return"function"===typeof n&&(n=n(u)),n}))},n.clear=function(){return this._renderer&&this._renderer.clear(),this.tileInfoCache&&this.tileInfoCache.reset(),this.fire("clear"),this},n.toJSON=function(){var t={type:this.getJSONType(),id:this.getId(),options:this.config()};return t},n.getSpatialReference=function(){var t=this.getMap();if(t&&(!this.options["spatialReference"]||na.equals(this.options["spatialReference"],t.options["spatialReference"])))return t.getSpatialReference();if(this._sr)return this._sr;var e=this.options["spatialReference"];if(O(e)&&(e=na.getPreset(e),!e))throw new Error("Unsupported spatial reference: "+this.options["spatialReference"]+", possible values: "+na.getAllPresets().join());return this._sr=new na(e),this._srMinZoom=this._sr.getMinZoom(),this._srMaxZoom=this._sr.getMaxZoom(),this._hasOwnSR=this._sr.toJSON().projection!==t.getSpatialReference().toJSON().projection,this._sr},n.getMinZoom=function(){var e=this.getSpatialReference();return e!==this.getMap().getSpatialReference()?Math.max(t.prototype.getMinZoom.call(this),this._srMinZoom):t.prototype.getMinZoom.call(this)},n.getMaxZoom=function(){var e=this.getSpatialReference();return e!==this.getMap().getSpatialReference()?Math.min(t.prototype.getMaxZoom.call(this),this._srMaxZoom):t.prototype.getMaxZoom.call(this)},n._getTileZoom=function(t){if(!this._hasOwnSR){var e=this.getMap().getResolution(t),n=this.getSpatialReference().getResolution(t),r=Math.log(n/e)*Math.LOG2E;t+=r}var i=this.options["maxAvailableZoom"];return!x(i)&&t>i&&(t=i),E(t)||(t=Math.round(t)),t=Math.max(0,t),t},n._getTiles=function(t,e,n,r,i){var o=this.getMap(),a=t,s=o.projViewMatrix,u=o.getResolution(t)/o.getResolution(t-1)===.5;n<2&&(0===n&&u&&(a-=1),s=0===n?o.cascadeFrustumMatrix0:1===n?o.cascadeFrustumMatrix1:o.projViewMatrix);var c=a+this.options["zoomOffset"],l=this._getTileOffset(c),f=l[0]||l[1],h={zoom:a,extent:null,offset:l,tiles:[]};if(c<0)return h;if(!o||!this.isVisible()||!o.width||!o.height)return h;if(!i){var p=this.getMinZoom(),d=this.getMaxZoom();if(!x(p)&&a<p||!x(d)&&a>d)return h}var v=this._getTileConfig();if(!v)return h;var g,m={zoom:l},y=this.getSpatialReference(),_=y.getResolution(c);g=this._hasOwnSR?o.getGLScale(a):_/o.getGLRes();var b=!this._hasOwnSR&&this.options["repeatWorld"],w=this._convertToExtent2d(e),E=this._getMask2DExtent();if(E){var S=E.intersection(w);if(!S)return h;e=S.convertTo((function(t){return o._pointToContainerPoint(t,void 0,0,gc)}))}var O,C=o._containerPointToPrj(e.getCenter(),wc),T=o._prjToPoint(C,c,Ec);O=f?this._project(o._pointToPrj(T._add(l),c,Ec),Ec):this._project(C,Ec);var A=o.getGLScale()/o.getGLScale(c);Sc.x=w.xmin*A,Sc.y=w.ymax*A,Oc.x=w.xmax*A,Oc.y=w.ymin*A;for(var k=this._project(o._pointToPrj(Sc._add(l),c,Sc),Sc),M=this._project(o._pointToPrj(Oc._add(l),c,Oc),Oc),P=v.getTileIndex(O,_,b),R=v.getTileIndex(k,_,b),j=v.getTileIndex(M,_,b),I=Math.ceil(Math.abs(P.idy-R.idy)),L=Math.ceil(Math.abs(P.idx-R.idx)),N=Math.ceil(Math.abs(P.idy-j.idy)),D=Math.ceil(Math.abs(P.idx-j.idx)),F=(I+N+1)*(L+D+1),B=this.getTileSize(),z=this.getRenderer()||r,U=this._getTileConfig().tileSystem.scale,V=[],H=new Hr,G=new yt(0,0),W=-I;W<=N;W++){var Z=-L,Y=-1/0,X=!1;while(Z>=Y&&Z<=D){var q=v.getNeighorTileIndex(P.idx,P.idy,Z,W,_,b);Y===-1/0?Z++:Z--;var K=this._getTileId(q.idx,q.idy,a);if(!(q.out||this._visitedTiles&&this._visitedTiles.has(K))){var Q=z&&z.isTileCachedOrLoading(K);Q&&(Q=Q.info);var $=void 0;if(Q){var J=Q,tt=J.extent2d;G.set(tt.xmin,tt.ymax),$=G}else if(this._hasOwnSR){var et=v.getTilePrjNW(q.x,q.y,_);$=o._prjToPoint(this._unproject(et,Oc),a)}else $=v.getTilePointNW(q.x,q.y,_);var nt=void 0,rt=void 0;if(this._hasOwnSR){var it=void 0;if(this._hasOwnSR){var ot=v.getTilePrjSE(q.x,q.y,_);it=o._prjToPoint(this._unproject(ot,Oc),a,Oc)}else it=v.getTilePointSE(q.x,q.y,_);nt=Math.ceil(Math.abs(it.x-$.x)),rt=Math.ceil(Math.abs(it.y-$.y))}else nt=B.width,rt=B.height;var at=U.x*(q.idx-q.x)*nt,st=U.y*(q.idy-q.y)*rt;Q||!at&&!st||$._add(at,st);var ut=Q&&Q.extent2d||new Hr($.x,$.y-rt,$.x+nt,$.y);if(F<=4||X||this._isTileInExtent(s,ut,l,g)){var ct=this._hasOwnSR?o._getResolution(a):_;this._visitedTiles&&0===n&&this._visitedTiles.add(K),u&&0===n?(this._splitTiles(s,V,z,q,a+1,ct,ut,at,st,m,r),H._combine(ut)):(Q?(Q.offset[0]=l[0],Q.offset[1]=l[1]):(Q={z:a,x:q.x,y:q.y,idx:q.idx,idy:q.idy,extent2d:ut,offset:l,id:K,res:ct,url:this.getTileUrl(q.x,q.y,a)},r&&(Q["layer"]=this.getId())),V.push(Q),H._combine(ut)),Y===-1/0?(Y=Z,Z=D):X||(X=!0)}}}}if(V.length){var lt=o._containerPointToPoint(e.getCenter(),a,gc)._add(l),ft=new yt(0,0),ht=new yt(0,0);V.sort((function(t,e){return ft.set((t.extent2d.xmin+t.extent2d.xmax)/2,(t.extent2d.ymin+t.extent2d.ymax)/2),ht.set((e.extent2d.xmin+e.extent2d.xmax)/2,(e.extent2d.ymin+e.extent2d.ymax)/2),ft.distanceTo(lt)-ht.distanceTo(lt)}))}return{offset:l,zoom:t,extent:H,tiles:V}},n._convertToExtent2d=function(t){var e=this,n=this.getMap();return t.convertTo((function(t){var r;if(t.y>0&&t.y<n.height){var i=(0===t.x?0:1)+t.y;e._coordCache[i]||(e._coordCache[i]=n._containerPointToPoint(t)),r=e._coordCache[i]}return r=n._containerPointToPoint(t,void 0,gc),r}))},n._splitTiles=function(t,e,n,r,i,o,a,s,u,c,l){var f=this._getTileConfig().tileSystem.scale.y,h=this.getMap().getGLScale(i),p=Cc.set(2*a.xmin,f<0?2*a.ymax:2*a.ymin),d=a.getWidth(),v=a.getHeight(),g=2*r.idx,m=2*r.idy,y=2*r.x,_=2*r.y,b=this._checkAndAddTile(t,n,g,m,y,_,i,o,0,0,d,v,p,h,c,l);b&&e.push(b),b=this._checkAndAddTile(t,n,g,m,y,_,i,o,0,1,d,v,p,h,c,l),b&&e.push(b),b=this._checkAndAddTile(t,n,g,m,y,_,i,o,1,0,d,v,p,h,c,l),b&&e.push(b),b=this._checkAndAddTile(t,n,g,m,y,_,i,o,1,1,d,v,p,h,c,l),b&&e.push(b)},n._checkAndAddTile=function(t,e,n,r,i,o,a,s,u,c,l,f,h,p,d,v){var g=this._getTileId(n+u,r+c,a);if(this._visitedTiles&&this._visitedTiles.has(g))return null;var m=d[a];m||(m=d[a]=this._getTileOffset(a));var y=this._getTileConfig().tileSystem.scale.y,_=new Hr(h.x+u*l,h.y+y*c*f,h.x+(u+1)*l,h.y+y*(c+1)*f);if(!this._isSplittedTileInExtent(t,_,m,p))return null;var b=s/2,x=e&&e.isTileCachedOrLoading(g);return x?x=x.info:(x={z:a,x:i+u,y:o+c,extent2d:_,id:g,offset:m,res:b,url:this.getTileUrl(i+u,o+c,a+this.options["zoomOffset"])},v&&(x["layer"]=this.getId())),x},n._getTileOffset=function(t){var e=this.options["offset"];return C(e)&&(e=e.call(this,t)),w(e)?[e,e]:e||[0,0]},n._getTileId=function(t,e,n,r){return(r||this.getId())+"_"+e+"_"+t+"_"+n},n._project=function(t,e){if(this._hasOwnSR){var n=this.getMap(),r=n.getProjection(),i=this.getSpatialReference().getProjection();return i.project(r.unproject(t,e),e)}return t},n._unproject=function(t,e){if(this._hasOwnSR){var n=this.getMap(),r=this.getSpatialReference(),i=n.getProjection(),o=r.getProjection();return i.project(o.unproject(t,e),e)}return t},n._initTileConfig=function(){var t=this.getMap(),e=this.getTileSize(),n=this.getSpatialReference(),r=n.getProjection(),i=n.getFullExtent();this._defaultTileConfig=new dc(t,hc.getDefault(r),i,e),this.options.hasOwnProperty("tileSystem")&&(this._tileConfig=new dc(t,this.options["tileSystem"],i,e)),delete this._rootNodes,delete this._tileFullExtent,delete this._disablePyramid},n._getTileConfig=function(){return this._defaultTileConfig||this._initTileConfig(),this._tileConfig||this._defaultTileConfig},n._bindMap=function(e){var n=e.getBaseLayer();return n===this&&(n.options.hasOwnProperty("forceRenderOnMoving")||this.config({forceRenderOnMoving:!0})),this._onSpatialReferenceChange(),t.prototype._bindMap.apply(this,arguments)},n._isTileInExtent=function(t,e,n,r){var i,o=this.getMap();if(t!==o.projViewMatrix){var a=e.getCenter(Tc)._sub(n[0],n[1])._multi(r);Ys(Pc,a.x,a.y,0);var s=nu(Pc,Pc,o.projViewMatrix);i=s[1]<0?o.projViewMatrix:t}else i=o.projViewMatrix;return Ac[0][0]=(e.xmin-n[0])*r,Ac[0][1]=(e.ymin-n[1])*r,Ac[1][0]=(e.xmax-n[0])*r,Ac[1][1]=(e.ymax-n[1])*r,Object(c["a"])(i,Ac)},n._isSplittedTileInExtent=function(t,e,n,r){var i=this.getMap();return Ac[0][0]=(e.xmin-n[0])*r,Ac[0][1]=(e.ymin-n[1])*r,Ac[1][0]=(e.xmax-n[0])*r,Ac[1][1]=(e.ymax-n[1])*r,Object(c["a"])(i.projViewMatrix,Ac)},n.getEvents=function(){return{spatialreferencechange:this._onSpatialReferenceChange}},n._onSpatialReferenceChange=function(){delete this._tileConfig,delete this._defaultTileConfig,delete this._sr,delete this._srMinZoom,delete this._hasOwnSR,delete this._rootNodes,this.tileInfoCache&&this.tileInfoCache.reset();var t=this.getRenderer();t&&t.clear()},e}(ua);function jc(t,e,n){var r=Math.max(t[0]-n[0],0,n[0]-e[0]),i=Math.max(t[1]-n[1],0,n[1]-e[1]),o=Math.max(t[2]-n[2],0,n[2]-e[2]);return Math.sqrt(r*r+i*i+o*o)}Rc.registerJSONType("TileLayer"),Rc.mergeOptions(bc);var Ic={maxCacheSize:1024},Lc=new We(256,256),Nc="show hide remove";function Dc(t){return Array.isArray(t)||(t=[t]),t}var Fc=function(t){function e(e,n,r){var i;return i=t.call(this,e,r)||this,i.layers=n||[],i._checkChildren(),i.layerMap={},i._groupChildren=[],i}pt(e,t),e.fromJSON=function(t){if(!t||"GroupTileLayer"!==t["type"])return null;var n=t["layers"].map((function(t){return ua.fromJSON(t)}));return new e(t["id"],n,t["options"])};var n=e.prototype;return n.getLayers=function(){return this.layers},n.addLayer=function(t){var e=this;void 0===t&&(t=[]),t=Dc(t);var n=this.layers.length;return t.forEach((function(t){t instanceof Rc&&(-1!==e.layers.indexOf(t)||e.layerMap[t.getId()]||e.layers.push(t))})),n!==this.layers.length&&(this._sortLayers(),this._refresh(),this._renderLayers()),this},n.removeLayer=function(t){var e=this;void 0===t&&(t=[]),t=Dc(t);var n=this.layers.length;return t.forEach((function(t){if(t instanceof Rc||(t=e.layerMap[t]),t instanceof Rc){var n=e.layers.indexOf(t);n>=0&&(e.layers.splice(n,1),t._doRemove(),t.off(Nc,e._onLayerShowHide,e))}})),n!==this.layers.length&&(this._refresh(),this._renderLayers()),this},n.clearLayers=function(){var t=this;return this.layers.forEach((function(e){e._doRemove(),e.off(Nc,t._onLayerShowHide,t)})),this.layers=[],this._refresh(),this._renderLayers(),this},n.toJSON=function(){var t={type:this.getJSONType(),id:this.getId(),layers:this.layers.map((function(t){return t.toJSON()})),options:this.config()};return t},n.getTileSize=function(t){var e=this.getLayer(t);return e?e.getTileSize():Lc},n.getTiles=function(t,e){for(var n=this.layers,r=[],i=0,o=0,a=n.length;o<a;o++){var s=n[o];if(s&&s.options["visible"]&&s.isVisible()&&s.getMap()){var u=s.getTiles(t,e||this);u&&0!==u.count&&(i+=u.count,St(r,u.tileGrids))}}return{count:i,tileGrids:r}},n.onAdd=function(){this._sortLayers(),this._refresh(),t.prototype.onAdd.call(this)},n.onRemove=function(){var e=this;this.layers.forEach((function(t){t._doRemove(),t.off(Nc,e._onLayerShowHide,e)})),this.layerMap={},this._groupChildren=[],t.prototype.onRemove.call(this)},n.getLayer=function(t){return this.getChildLayer(t)},n.getChildLayer=function(t){var e=this.layerMap[t];if(e)return e;for(var n=0;n<this._groupChildren.length;n++){var r=this._groupChildren[n].getChildLayer(t);if(r)return r}return null},n._onLayerShowHide=function(t){var e=t||{},n=e.type,r=e.target;return"remove"===n&&r&&(this.layers.splice(this.layers.indexOf(r),1),r._doRemove(),r.off(Nc,this._onLayerShowHide,this),this._refresh()),this._renderLayers(),this},n._renderLayers=function(){var t=this.getRenderer();return t&&t.setToRedraw(),this},n._refresh=function(){var t=this,e=this.getMap();return this._groupChildren=[],this.layerMap={},this.layers.forEach((function(n){t.layerMap[n.getId()]=n,n.getChildLayer&&t._groupChildren.push(n),n.getMap()||n._bindMap(e),n.on(Nc,t._onLayerShowHide,t)})),this},n.isVisible=function(){if(!t.prototype.isVisible.call(this))return!1;for(var e=this.layers,n=0,r=e.length;n<r;n++)if(e[n].isVisible())return!0;return!1},n._checkChildren=function(){var t=this,e={};this.layers.forEach((function(n){var r=n.getId();if(e[r])throw new Error("Duplicate child layer id ("+r+") in the GroupTileLayer ("+t.getId()+")");e[r]=1}))},n._sortLayers=function(){this.layers.sort((function(t,e){return t.options.zIndex-e.options.zIndex}))},e}(Rc);Fc.registerJSONType("GroupTileLayer"),Fc.mergeOptions(Ic);var Bc={crs:null,uppercase:!1,detectRetina:!1},zc={service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},Uc=function(t){function e(e,n){var r;r=t.call(this,e)||this;var i=b({},zc);for(var o in n)o in r.options||(i[o]=n[o]);r.setOptions(n),r.setZIndex(n.zIndex);var a=r.getTileSize();return i.width=a.width,i.height=a.height,r.wmsParams=i,r._wmsVersion=parseFloat(i.version),r}pt(e,t);var n=e.prototype;return n.onAdd=function(){var e=this.getMap().getDevicePixelRatio(),n=Bc.detectRetina?e:1;this.wmsParams.width*=n,this.wmsParams.height*=n;var r=this.options.crs||this.getMap().getProjection().code,i=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[i]=r,t.prototype.onAdd.call(this)},n.getTileUrl=function(e,n,r){var i=this.getSpatialReference().getResolution(r),o=this._getTileConfig(),a=o.getTilePrjExtent(e,n,i),s=a.getMax(),u=a.getMin(),c=(this._wmsVersion>=1.3&&("EPSG:4326"===this.wmsParams.crs||"EPSG:4490"===this.wmsParams.crs)?[u.y,u.x,s.y,s.x]:[u.x,u.y,s.x,s.y]).join(","),l=t.prototype.getTileUrl.call(this,e,n,r);return l+Vc(this.wmsParams,l,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+c},n.toJSON=function(){return{type:"WMSTileLayer",id:this.getId(),options:this.config()}},e.fromJSON=function(t){return t&&"WMSTileLayer"===t["type"]?new e(t["id"],t["options"]):null},e}(Rc);function Vc(t,e,n){var r=[];for(var i in t)r.push(encodeURIComponent(n?i.toUpperCase():i)+"="+encodeURIComponent(t[i]));return(e&&-1!==e.indexOf("?")?"&":"?")+r.join("&")}Uc.registerJSONType("WMSTileLayer"),Uc.mergeOptions(Bc);var Hc=function(t){function e(e,n){var r;return r=t.call(this,e,n)||this,r.options.hasOwnProperty("forceRenderOnMoving")||(r.options["forceRenderOnMoving"]=!1),r}pt(e,t);var n=e.prototype;return n.drawTile=function(){},n.toJSON=function(){return{type:"CanvasTileLayer",id:this.getId(),options:this.config()}},e.fromJSON=function(t){return t&&"CanvasTileLayer"===t["type"]?new e(t["id"],t["options"]):null},e}(Rc);function Gc(t,e){for(var n={alpha:!0,stencil:!0,preserveDrawingBuffer:!0,antialias:!1},r=["webgl","experimental-webgl"],i=null,o=0;o<r.length;++o){try{i=t.getContext(r[o],e||n)}catch(cf){}if(i)break}return i}function Wc(t,e,n){var r=t.createShader(e);t.shaderSource(r,n),t.compileShader(r);var i=t.getShaderParameter(r,t.COMPILE_STATUS);if(!i){var o=t.getShaderInfoLog(r);throw t.deleteShader(r),new Error("Failed to compile shader: "+o)}return r}function Zc(t,e,n){var r=Wc(t,t.VERTEX_SHADER,e),i=Wc(t,t.FRAGMENT_SHADER,n);if(!r||!i)return null;var o=t.createProgram();return o?(t.attachShader(o,r),t.attachShader(o,i),t.linkProgram(o),{program:o,vertexShader:r,fragmentShader:i}):null}function Yc(t,e,n){if(Array.isArray(n[0])){for(var r=Float32Array.BYTES_PER_ELEMENT,i=0,o=0;o<n.length;o++)i+=n[o][1]||0;for(var a=0,s=0;s<n.length;s++){var u=t.getAttribLocation(e,n[s][0]);if(u<0)throw new Error("Failed to get the storage location of "+n[s][0]);t.vertexAttribPointer(u,n[s][1],t[n[s][2]||"FLOAT"],!1,r*i,r*a),a+=n[s][1]||0,t.enableVertexAttribArray(u)}}else{var c=t.getAttribLocation(e,n[0]);t.vertexAttribPointer(c,n[1],t[n[2]||"FLOAT"],!1,0,0),t.enableVertexAttribArray(c)}}Hc.registerJSONType("CanvasTileLayer");var Xc={vertexShader:"\n        attribute vec2 a_position;\n\n        attribute vec2 a_texCoord;\n\n        uniform mat4 u_matrix;\n\n        varying vec2 v_texCoord;\n\n        void main() {\n            gl_Position = u_matrix * vec4(a_position, 0., 1.);\n\n            v_texCoord = a_texCoord;\n        }\n    ",fragmentShader:"\n        precision mediump float;\n\n        uniform sampler2D u_image;\n\n        uniform float u_opacity;\n        uniform float u_debug_line;\n\n        varying vec2 v_texCoord;\n\n        void main() {\n            if (u_debug_line == 1.) {\n                gl_FragColor = vec4(0., 1., 0., 1.);\n            } else {\n                gl_FragColor = texture2D(u_image, v_texCoord) * u_opacity;\n            }\n        }\n    "},qc=[0,0],Kc=[0,0,0],Qc=new Array(16),$c=new yt(20,20),Jc=function(t){var e=function(t){function e(){return t.apply(this,arguments)||this}pt(e,t);var n=e.prototype;return n.drawGLImage=function(t,e,n,r,i,o,a,s){this.gl.program!==this.program&&this.useProgram(this.program);var u=this.gl;this.loadTexture(t);var c=this.canvas.gl&&this.canvas.gl.wrap;if(c){var l=this.layer&&this.layer.options["opacity"];x(l)&&(l=1),a*=l}Kc[0]=e||0,Kc[1]=n||0;var f=Ws(Qc);Bs(f,f,Kc),zs(f,f,[o,o,1]),Hs(f,this.getMap().projViewMatrix,f),u.uniformMatrix4fv(this.program["u_matrix"],!1,f),u.uniform1f(this.program["u_opacity"],a),u.uniform1f(this.program["u_debug_line"],0);var h=t.glBuffer;!h||h.width===r&&h.height===i||(this.saveImageBuffer(h),delete t.glBuffer),t.glBuffer?u.bindBuffer(u.ARRAY_BUFFER,h):t.glBuffer=this.bufferTileData(0,0,r,i),qc[0]="a_position",qc[1]=2,qc[2]=t.glBuffer.type,this.enableVertexAttrib(qc),u.drawArrays(u.TRIANGLE_STRIP,0,4),s&&this.drawDebug(f,0,0,r,i,s)},n.drawDebug=function(t,e,n,r,i,o){var a=this.gl;a.bindBuffer(a.ARRAY_BUFFER,this._debugBuffer),this.enableVertexAttrib(["a_position",2,"FLOAT"]),a.bufferData(a.ARRAY_BUFFER,new Float32Array([e,n,e+r,n,e+r,n-i,e,n-i,e,n]),a.DYNAMIC_DRAW),a.uniformMatrix4fv(this.program["u_matrix"],!1,t),a.uniform1f(this.program["u_opacity"],1),a.uniform1f(this.program["u_debug_line"],1),a.drawArrays(a.LINE_STRIP,0,5);var s=this._debugInfoCanvas;if(!s){var u=this.getMap().getDevicePixelRatio()>1?2:1;s=this._debugInfoCanvas=document.createElement("canvas"),s.width=256*u,s.height=32*u;var c=s.getContext("2d");c.font="20px monospace",c.scale(u,u)}var l=s.getContext("2d");l.clearRect(0,0,s.width,s.height);var f=this.layer.options["debugOutline"];ur.fillText(l,o,$c,f),this.loadTexture(s),a.texImage2D(a.TEXTURE_2D,0,a.RGBA,a.RGBA,a.UNSIGNED_BYTE,s),r=256;var h=e,p=e+r,d=n-i+32,v=n-i;a.bufferData(a.ARRAY_BUFFER,this.set8(h,d,h,v,p,d,p,v),a.DYNAMIC_DRAW),a.uniform1f(this.program["u_debug_line"],0),a.drawArrays(a.TRIANGLE_STRIP,0,4)},n.bufferTileData=function(t,e,n,r,i){var o,a=t,s=t+n,u=e,c=e-r;o=E(a)&&E(s)&&E(u)&&E(c)?this.set8Int(a,u,a,c,s,u,s,c):this.set8(a,u,a,c,s,u,s,c);var l=this.loadImageBuffer(o,i);return l.width=n,l.height=r,l.type=o instanceof Int16Array?"SHORT":"FLOAT",l},n.drawTinImage=function(t,e,n,r,i){var o=this.gl;this.loadTexture(t),o.uniformMatrix4fv(this.program["u_matrix"],!1,this.getMap().projViewMatrix),o.uniform1f(this.program["u_opacity"],i),o.bindBuffer(o.ARRAY_BUFFER,this.posBuffer),this.enableVertexAttrib(["a_position",3]),o.bufferData(o.ARRAY_BUFFER,new Float32Array(e),o.DYNAMIC_DRAW),o.bindBuffer(o.ARRAY_BUFFER,this.texBuffer),this.enableVertexAttrib(["a_texCoord",2]),o.bufferData(o.ARRAY_BUFFER,new Float32Array(n),o.DYNAMIC_DRAW),o.bufferData(o.ELEMENT_ARRAY_BUFFER,new Uint16Array(r),o.DYNAMIC_DRAW),o.drawElements(o.TRIANGLES,r.length,o.UNSIGNED_SHORT,0)},n.createCanvas2=function(){this.canvas2=ur.createCanvas(this.canvas.width,this.canvas.height)},n.createGLContext=function(){this.canvas.gl&&this.canvas.gl.wrap?this.gl=this.canvas.gl.wrap():this.gl=Gc(this.canvas2||this.canvas,this.layer.options["glOptions"]);var t=this.gl;t.clearColor(0,0,0,0),t.disable(t.DEPTH_TEST),t.enable(t.STENCIL_TEST),t.enable(t.BLEND),t.blendFunc(t.ONE,t.ONE_MINUS_SRC_ALPHA),this.program=this.createProgram(Xc["vertexShader"],this.layer.options["fragmentShader"]||Xc["fragmentShader"]),this._debugBuffer=this.createBuffer(),this.useProgram(this.program),this.texBuffer=this.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.texBuffer),this.enableVertexAttrib(["a_texCoord",2,"UNSIGNED_BYTE"]),t.bufferData(t.ARRAY_BUFFER,new Uint8Array([0,0,0,1,1,0,1,1]),t.STATIC_DRAW),this.enableSampler("u_image"),t.activeTexture(t["TEXTURE0"]),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0)},n.resizeGLCanvas=function(){this.gl&&this.gl.viewport(0,0,this.canvas.width,this.canvas.height),this.canvas2&&(this.canvas2.width===this.canvas.width&&this.canvas2.height===this.canvas.height||(this.canvas2.width=this.canvas.width,this.canvas2.height=this.canvas.height))},n.clearGLCanvas=function(){this.gl&&(this.gl.clearStencil(255),this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.STENCIL_BUFFER_BIT))},n.disposeImage=function(t){t&&(t.texture&&this.saveTexture(t.texture),t.glBuffer&&this.saveImageBuffer(t.glBuffer),delete t.texture,delete t.glBuffer)},n._createTexture=function(t){var e=this.gl,n=this.getTexture()||e.createTexture();return e.bindTexture(e.TEXTURE_2D,n),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,t),E(kt(t.width))&&E(kt(t.width))&&e.generateMipmap(e.TEXTURE_2D),n},n.getTexture=function(){this._textures||(this._textures=[]);var t=this._textures;return t&&t.length>0?t.pop():null},n.saveTexture=function(t){this._textures.push(t)},n.loadTexture=function(t){var e=this.gl,n=t.texture;return n||(n=this._createTexture(t),t.texture=n),e.bindTexture(e.TEXTURE_2D,n),n},n.getImageBuffer=function(){this._imageBuffers||(this._imageBuffers=[]);var t=this._imageBuffers;return t&&t.length>0?t.pop():null},n.saveImageBuffer=function(t){this._imageBuffers||(this._imageBuffers=[]),this._imageBuffers.push(t)},n.loadImageBuffer=function(t,e){var n=this.gl,r=e||this.createImageBuffer();return n.bindBuffer(n.ARRAY_BUFFER,r),n.bufferData(n.ARRAY_BUFFER,t,n.STATIC_DRAW),r},n.createImageBuffer=function(){return this.getImageBuffer()||this.createBuffer()},n.removeGLCanvas=function(){var t=this.gl;if(t){if(this._debugBuffer&&(t.deleteBuffer(this._debugBuffer),delete this._debugBuffer),this._buffers&&(this._buffers.forEach((function(e){t.deleteBuffer(e)})),delete this._buffers),this._textures&&(this._textures.forEach((function(e){return t.deleteTexture(e)})),delete this._textures),this._debugInfoCanvas){var e=this._debugInfoCanvas.texture;e&&t.deleteTexture(e),delete this._debugInfoCanvas.texture,delete this._debugInfoCanvas}var n=t.program;t.deleteShader(n.fragmentShader),t.deleteShader(n.vertexShader),t.deleteProgram(n),delete this.gl,delete this.canvas2}},n.createBuffer=function(){var t=this.gl,e=t.createBuffer();if(!e)throw new Error("Failed to create the buffer object");return this._buffers||(this._buffers=[]),this._buffers.push(e),e},n.enableVertexAttrib=function(t){Yc(this.gl,this.gl.program,t)},n.createProgram=function(t,e){for(var n=this.gl,r=Zc(n,t,e),i=r.program,o=r.vertexShader,a=r.fragmentShader,s=n.getProgramParameter(i,35718),u=[],c=0;c<s;++c){var l=n.getActiveUniform(i,c);u.push(l.name)}return i.vertexShader=o,i.fragmentShader=a,this._initUniforms(i,u),i},n.useProgram=function(t){var e=this.gl;return e.useProgram(t),e.program=t,this},n.enableSampler=function(t,e){var n=this.gl,r=this._getUniform(n.program,t);return e||(e=0),n.uniform1i(r,e),r},n._initUniforms=function(t,e){for(var n=0;n<e.length;n++){var r=e[n],i=e[n],o=r.indexOf("[");o>=0&&(r=r.substring(0,o),R||(i=i.substring(0,o))),t[r]=this._getUniform(t,i)}},n._getUniform=function(t,e){var n=this.gl,r=n.getUniformLocation(t,e);if(!r)throw new Error("Failed to get the storage location of "+e);return r},e}(t);return b(e.prototype,{set8:function(){var t=ht.ie9?null:new Float32Array(8);return function(e,n,r,i,o,a,s,u){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t[4]=o,t[5]=a,t[6]=s,t[7]=u,t}}(),set8Int:function(){var t=ht.ie9?null:new Int16Array(8);return function(e,n,r,i,o,a,s,u){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t[4]=o,t[5]=a,t[6]=s,t[7]=u,t}}()}),e},tl={renderer:ht.webgl?"gl":"canvas",crossOrigin:null},el=new yt(0,0),nl=function(t){function e(e,n,r){var i;return!n||Array.isArray(n)||n.url||(r=n,n=null),i=t.call(this,e,r)||this,i._images=n,i}pt(e,t);var n=e.prototype;return n.onAdd=function(){this._prepareImages(this._images)},n.setImages=function(t){return this._images=t,this._prepareImages(t),this},n.getImages=function(){return this._images},n._prepareImages=function(t){t=t||[],Array.isArray(t)||(t=[t]);var e=this.getMap(),n=e.getGLRes();this._imageData=t.map((function(t){var r=new Vr(t.extent);return b({},t,{extent:r,extent2d:r.convertTo((function(t){return e.coordToPointAtRes(t,n)}))})})),this._images=t;var r=this.getRenderer();r&&r.refreshImages()},e}(ua);nl.mergeOptions(tl);var rl=[],il=function(t){function e(){return t.apply(this,arguments)||this}pt(e,t);var n=e.prototype;return n.isDrawable=function(){return!this.getMap().getPitch()||(console&&console.warn("ImageLayer with canvas renderer can't be pitched, use gl renderer ('renderer' : 'gl') instead."),!1)},n.checkResources=function(){var t=this;if(this._imageLoaded)return rl;var e=this.layer,n=e._imageData.map((function(t){return[t.url,null,null]}));if(this.resources){var r=[],i=new Li;n.forEach((function(e){if(t.resources.isResourceLoaded(e)){var n=t.resources.getImage(e);i.addResource(e,n)}else r.push(e)})),this.resources.forEach((function(e,n){i.isResourceLoaded(e)||t.retireImage(n.image)})),this.resources=i,n=r}return this._imageLoaded=!0,n},n.retireImage=function(t){t.close&&t.close()},n.refreshImages=function(){this._imageLoaded=!1,this.setToRedraw()},n.draw=function(){this.isDrawable()&&(this.prepareCanvas(),this._painted=!1,this._drawImages(),this.completeRender())},n._drawImages=function(){var t=this.layer._imageData,e=this.getMap(),n=e._get2DExtentAtRes(e.getGLRes());if(t&&t.length)for(var r=0;r<t.length;r++){var i=t[r].extent2d,o=this.resources&&this.resources.getImage(t[r].url);o&&n.intersects(i)&&(this._painted=!0,this._drawImage(o,i,t[r].opacity||1))}},n._drawImage=function(t,e,n){var r=0,i=this.context;n<1&&(r=i.globalAlpha,i.globalAlpha=n);var o=this.getMap(),a=el.set(e.xmin,e.ymax),s=o._pointAtResToContainerPoint(a,o.getGLRes()),u=s.x,c=s.y,l=o.getBearing();l&&(i.save(),i.translate(u,c),l&&i.rotate(-l*Math.PI/180),u=c=0);var f=o.getGLScale();i.drawImage(t,u,c,e.getWidth()/f,e.getHeight()/f),l&&i.restore(),r&&(i.globalAlpha=r)},n.drawOnInteracting=function(){this.draw()},e}(Ii),ol=function(t){function e(){return t.apply(this,arguments)||this}pt(e,t);var n=e.prototype;return n.isDrawable=function(){return!0},n._drawImage=function(t,e,n){this.drawGLImage(t,e.xmin,e.ymax,e.getWidth(),e.getHeight(),1,n)},n.createContext=function(){this.createGLContext()},n.resizeCanvas=function(e){this.canvas&&(t.prototype.resizeCanvas.call(this,e),this.resizeGLCanvas())},n.clearCanvas=function(){this.canvas&&(t.prototype.clearCanvas.call(this),this.clearGLCanvas())},n.retireImage=function(t){t.close&&t.close(),this.disposeImage(t)},n.onRemove=function(){this.removeGLCanvas(),t.prototype.onRemove.call(this)},e}(Jc(il));nl.registerRenderer("canvas",il),nl.registerRenderer("gl",ol);var al=function(t){function e(){return t.apply(this,arguments)||this}pt(e,t);var n=e.prototype;return n.getPrepareParams=function(){return[]},n.getDrawParams=function(){return[]},n.onCanvasCreate=function(){this.canvas&&this.layer.options["doubleBuffer"]&&(this.buffer=ur.createCanvas(this.canvas.width,this.canvas.height,this.getMap().CanvasClass))},n.needToRedraw=function(){if(this.layer.options["animation"])return!0;var e=this.getMap();return!(e.isInteracting()&&!this.layer.drawOnInteracting)&&t.prototype.needToRedraw.call(this)},n.draw=function(){this.prepareCanvas(),this.prepareDrawContext(),this._drawLayer.apply(this,arguments)},n.drawOnInteracting=function(){this._drawLayerOnInteracting.apply(this,arguments)},n.getCanvasImage=function(){var e=t.prototype.getCanvasImage.call(this);if(e&&e.image&&this.layer.options["doubleBuffer"]){var n=e.image;this.buffer.width===n.width&&this.buffer.height===n.height||(this.buffer.width=n.width,this.buffer.height=n.height);var r=this.buffer.getContext("2d"),i=this.layer.doubleBuffer(r,this.context);(void 0===i||i)&&(ur.image(r,n,0,0),e.image=this.buffer)}return e},n.remove=function(){return delete this._drawContext,t.prototype.remove.call(this)},n.onZoomStart=function(e){this.layer.onZoomStart(e),t.prototype.onZoomStart.call(this,e)},n.onZooming=function(e){this.layer.onZooming(e),t.prototype.onZooming.call(this,e)},n.onZoomEnd=function(e){this.layer.onZoomEnd(e),t.prototype.onZoomEnd.call(this,e)},n.onMoveStart=function(e){this.layer.onMoveStart(e),t.prototype.onMoveStart.call(this,e)},n.onMoving=function(e){this.layer.onMoving(e),t.prototype.onMoving.call(this,e)},n.onMoveEnd=function(e){this.layer.onMoveEnd(e),t.prototype.onMoveEnd.call(this,e)},n.onResize=function(e){this.layer.onResize(e),t.prototype.onResize.call(this,e)},n.prepareDrawContext=function(){if(!this._predrawed){var t=sl(this.getPrepareParams());this._drawContext=this.layer.prepareToDraw.apply(this.layer,[this.context].concat(t)),this._drawContext||(this._drawContext=[]),Array.isArray(this._drawContext)||(this._drawContext=[this._drawContext]),this._predrawed=!0}},n._prepareDrawParams=function(){if(!this.getMap())return null;var t=this.getViewExtent();if(t["maskExtent"]&&!t["extent"].intersects(t["maskExtent"]))return this.completeRender(),null;var e=[this.context,t],n=sl(this.getDrawParams());return e.push.apply(e,n),e.push.apply(e,this._drawContext),e},n._drawLayer=function(){var t=this._prepareDrawParams();if(t){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];this.layer.draw.apply(this.layer,t.concat(n)),this.completeRender()}},n._drawLayerOnInteracting=function(){if(this.layer.drawOnInteracting){var t=this._prepareDrawParams();if(t){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];this.layer.drawOnInteracting.apply(this.layer,t.concat(n)),this.completeRender()}}},e}(Ii);function sl(t){return t||(t=[]),Array.isArray(t)||(t=[t]),t}var ul={doubleBuffer:!1,animation:!1},cl=function(t){function e(){return t.apply(this,arguments)||this}pt(e,t);var n=e.prototype;return n.isCanvasRender=function(){return!0},n.prepareToDraw=function(){},n.draw=function(){},n.redraw=function(){return this._getRenderer()&&this._getRenderer().setToRedraw(),this},n.play=function(){return this.config("animation",!0),this},n.pause=function(){return this.config("animation",!1),this},n.isPlaying=function(){return this.options["animation"]},n.clearCanvas=function(){return this._getRenderer()&&this._getRenderer().clearCanvas(),this},n.requestMapToRender=function(){return this._getRenderer()&&this._getRenderer().requestMapToRender(),this},n.completeRender=function(){return this._getRenderer()&&this._getRenderer().completeRender(),this},n.onCanvasCreate=function(){return this},n.onZoomStart=function(){},n.onZooming=function(){},n.onZoomEnd=function(){},n.onMoveStart=function(){},n.onMoving=function(){},n.onMoveEnd=function(){},n.onResize=function(){},n.doubleBuffer=function(t){return t.clearRect(0,0,t.canvas.width,t.canvas.height),this},e}(ua);cl.mergeOptions(ul),cl.registerRenderer("canvas",al);var ll=new yt(0,0),fl={animation:!0},hl=function(t){function e(){return t.apply(this,arguments)||this}pt(e,t);var n=e.prototype;return n.getParticles=function(){},n.draw=function(t,e){var n=this.getParticles(_());if(n&&0!==n.length){var r=this.getMap(),i=e.extent;e.maskExtent&&(i=e.extent.intersection(e.maskExtent)),i=i.convertTo((function(t){return r._pointToContainerPoint(t,void 0,0,ll)}));for(var o=2*Math.PI,a=0,s=n.length;a<s;a++){var u=n[a].point;if(i.contains(u)){var c=n[a].color||this.options["lineColor"]||"#fff",l=n[a].r;t.fillStyle!==c&&(t.fillStyle=c),l<=2?t.fillRect(u.x-l/2,u.y-l/2,l,l):(t.beginPath(),t.arc(u.x,u.y,l/2,0,o),t.fill())}}this._fillCanvas(t)}else{var f=this._getRenderer();f&&(this._getRenderer()._shouldClear=!0)}},n._fillCanvas=function(t){var e=t.globalCompositeOperation;t.globalCompositeOperation="destination-out";var n=this.options["trail"]||30;t.fillStyle="rgba(0, 0, 0, "+1/n+")",t.fillRect(0,0,t.canvas.width,t.canvas.height),t.globalCompositeOperation=e},e}(cl);hl.mergeOptions(fl),hl.registerRenderer("canvas",function(t){function e(){return t.apply(this,arguments)||this}pt(e,t);var n=e.prototype;return n.draw=function(){this.canvas&&this.layer.options["animation"]&&!this._shouldClear||(this.prepareCanvas(),this._shouldClear=!1),this.prepareDrawContext(),this._drawLayer()},n.drawOnInteracting=function(){this.draw(),this._shouldClear=!1},n.onSkipDrawOnInteracting=function(){this._shouldClear=!0},e}(al));var pl,dl,vl=new Li,gl=function(t){function e(e,n,r){var i;i=t.call(this,r)||this,i.target=e,e.once("remove",i["delete"],dt(dt(i)));var o=i.options["symbol"],a=o["markerLineWidth"]||1;return i.w=o["markerWidth"]+a,i.h=o["markerHeight"]+a,i.opacity=x(o["opacity"])?1:o["opacity"],i.map=n,i.events=r.events,i._fetchImage(),i.addTo(n),i}pt(e,t);var n=e.prototype;return n.getCursor=function(){return this.options["cursor"]||"default"},n._fetchImage=function(){var t=this.map,e=this.options.symbol,n=e.markerFile;this.url=n||fn(e);var r=vl.getImage(this.url);if(!r){var i=this.w,o=this.h;if(n)r=new Image,r.onload=function(){var e=t.getRenderer();e&&e.setToRedraw()},r.src=this.url;else{var a=document.createElement("canvas");a.width=i,a.height=o;var s=a.getContext("2d");r=_o(s,{x:i/2,y:o/2},e,vl)}vl.addResource([this.url,i,o],r)}vl.login(this.url),this._img=r},n.setContainerPoint=function(t){this._point=t,this._point._sub(this.w/2,this.h/2)},n.getContainerPoint=function(){return this._point.add(this.w/2,this.h/2)},n.offset=function(t){this._point._add(t)},n.render=function(t){if(!this._img)return!1;var e=this.options["symbol"],n=e["markerDx"]||0,r=e["markerDy"]||0,i=this.map,o=this._point,a=o.x,s=o.y,u=this.w,c=this.h;if(a+u>0&&a<i.width&&s+c>0&&s<i.height){var l=i.getDevicePixelRatio();return t.globalAlpha=this.opacity,t.drawImage(this._img,Math.round((a+n)*l),Math.round((s+r)*l),Math.round(u*l),Math.round(c*l)),!0}return!1},n["delete"]=function(){if(this.map){var t=this.map.getRenderer();t&&t.removeTopElement(this)}vl.logout(this.url),this._dragger&&(this._dragger.disable(),delete this._dragger),delete this.map},n.hitTest=function(t){var e=this.options["symbol"],n=e["markerDx"]||0,r=e["markerDy"]||0,i=this.w,o=this.h,a=this._point.x+n,s=this._point.y+r;return t.x>=a&&t.x<=a+i&&t.y>=s&&t.y<=s+o},n.addTo=function(t){this.map=t;var e=t.getRenderer();e.addTopElement(this)},n.onEvent=function(t){this.fire(t.type,t)},n.mousedown=function(t){var e=t.target,n=this.options["cursor"];n&&e.setCursor(n),this.onDragstart(t)},n.onDragstart=function(t){var e=t.containerPoint,n=t.target,r=n._panels.mapWrapper||n._containerDOM,i=this._dragger=new Tr(r);i.on("dragging",this.onDragging,this).on("mouseup",this.onDragend,this).enable(),i.type="handle",i.onMouseDown(t["domEvent"]),pl=e.x,dl=e.y,this.fire("dragstart",{containerPoint:e})},n.onDragging=function(t){if(this._dragger){var e=this.map,n=Nn(t.domEvent,e._containerDOM),r={x:n.x-pl,y:n.y-dl},i=e.containerPointToCoord(new yt(pl,dl)),o=e.containerPointToCoord(n);pl=n.x,dl=n.y,this.offset(r),this.fire("dragging",{containerPoint:n,coordOffset:o._sub(i)})}},n.onDragend=function(t){if(this._dragger){var e=this.map;e.resetCursor();var n=Nn(t.domEvent,e._containerDOM),r={x:n.x-pl,y:n.y-dl};this.offset(r),this._dragger.disable(),delete this._dragger,this.fire("dragend",{containerPoint:n})}},e}(vr(yr)),ml=function(){function t(t,e){this.target=t,t.once("remove",this["delete"],this),this.map=e,this.addTo(e)}var e=t.prototype;return e.setPoints=function(t){this.points=t;var e=t.map((function(t){return t.x})),n=t.map((function(t){return t.y}));this.xmin=Math.min.apply(Math,e),this.xmax=Math.max.apply(Math,e),this.ymin=Math.min.apply(Math,n),this.ymax=Math.max.apply(Math,n)},e.hitTest=function(){return!1},e.render=function(t){var e=this.map;if(!(this.xmax<=0||this.xmin>=e.width||this.ymax<=0||this.ymin>=e.height)){var n=e.getDevicePixelRatio(),r=.5;t.lineWidth=1,t.strokeStyle="#000",t.globalAlpha=1,t.beginPath();var i=this.points;t.moveTo(a(i[0].x),a(i[0].y));for(var o=1;o<this.points.length;o++)t.lineTo(a(i[o].x),a(i[o].y));t.closePath(),t.stroke()}function a(t){return Math.round(t)*n+r}},e.addTo=function(t){this.map=t;var e=t.getRenderer();e.addTopElement(this)},e["delete"]=function(){if(this.map){var t=this.map.getRenderer();t&&t.removeTopElement(this)}},t}(),yl=f+"_edit_stage_";function _l(t,e){return{markerType:t,markerFill:"#fff",markerLineColor:"#000",markerLineWidth:2,markerWidth:10,markerHeight:10,opacity:e}}var bl={fixAspectRatio:!1,symbol:null,removeVertexOn:"contextmenu",centerHandleSymbol:_l("ellipse",1),vertexHandleSymbol:_l("square",1),newVertexHandleSymbol:_l("square",.4)},xl=function(t){function e(e,n){var r;return r=t.call(this,n)||this,r._geometry=e,r._geometry?r:dt(r)}pt(e,t);var n=e.prototype;return n.getMap=function(){return this._geometry.getMap()},n.prepare=function(){var t=this.getMap();t&&(t.on("drawtopstart",this._refresh,this),this.options["symbol"]&&(this._originalSymbol=this._geometry.getSymbol(),this._geometry.setSymbol(this.options["symbol"])),this._prepareEditStageLayer())},n._prepareEditStageLayer=function(){var t=this._geometry.getLayer();if("canvas"===t.options["renderer"]){var e=this.getMap(),n=wt(),r=yl+n+"_shadow";if(this._shadowLayer=e.getLayer(r),!this._shadowLayer){var i=t.constructor;this._shadowLayer=new i(r),e.addLayer(this._shadowLayer)}}},n.start=function(){if(this._geometry&&this._geometry.getMap()&&!this._geometry.editing){this.editing=!0,this.prepare();var t,e=this._geometry,n=this._geometry.getLayer(),r="canvas"===n.options["renderer"];this._geometryDraggble=e.options["draggable"],r?(e.config("draggable",!1),t=e.copy(),t.setSymbol(e._getInternalSymbol()),t.copyEventListeners(e),e._getParent()&&t.copyEventListeners(e._getParent()),t._setEventTarget(e),t.setId(null).config({draggable:!1}),this._shadow=t,e.hide()):e instanceof Na&&e.config("draggable",!0),this._switchGeometryEvents("on"),(e instanceof Na||e instanceof $a||e instanceof es||e instanceof ts)&&this._createOrRefreshOutline(),this._shadowLayer&&this._shadowLayer.bringToFront().addGeometry(t),e instanceof Na?t&&(t.config("draggable",!0),t.on("dragend",this._onMarkerDragEnd,this)):this._createCenterHandle(),e instanceof Na&&!1!==this.options["resize"]?this.createMarkerEditor():e instanceof $a?this.createCircleEditor():e instanceof es||e instanceof ts?this.createEllipseOrRectEditor():e instanceof rs||(e instanceof Ra||e instanceof Ba)&&this.createPolygonEditor()}},n.stop=function(){delete this._history,delete this._historyPointer,delete this._editOutline,this._switchGeometryEvents("off");var t=this.getMap();t?(this._geometry.config("draggable",this._geometryDraggble),this._shadow&&(delete this._shadow,delete this._geometryDraggble,this._geometry.show()),this._shadowLayer&&(this._shadowLayer.remove(),delete this._shadowLayer),this._refreshHooks=[],this.options["symbol"]&&(this._geometry.setSymbol(this._originalSymbol),delete this._originalSymbol),this.editing=!1,this.fire("remove")):this.fire("remove")},n.isEditing=function(){return!x(this.editing)&&this.editing},n._getGeometryEvents=function(){return{symbolchange:this._onGeoSymbolChange,dragstart:this._onDragStart,dragend:this._onDragEnd,"positionchange shapechange":this._exeAndReset}},n._switchGeometryEvents=function(t){if(this._geometry){var e=this._getGeometryEvents();for(var n in e)this._geometry[t](n,e[n],this)}},n._onGeoSymbolChange=function(t){this._shadow&&this._shadow.setSymbol(t.target._getInternalSymbol())},n._onMarkerDragEnd=function(){this._update("setCoordinates",this._shadow.getCoordinates().toArray())},n._createOrRefreshOutline=function(){var t=this._geometry,e=this._editOutline;e||(this._editOutline=new ml(this,this.getMap()),this._addRefreshHook(this._createOrRefreshOutline));var n=this._editOutline.points;if(t instanceof Na)this._editOutline.setPoints(t.getContainerExtent().toArray(n));else{var r=this.getMap(),i=t._getPrjExtent();n=i.toArray(n),n.forEach((function(t){return r._prjToContainerPoint(t,null,t)})),this._editOutline.setPoints(n)}return e},n._createCenterHandle=function(){var t,e=this,n=this.getMap(),r=this.options["centerHandleSymbol"],i=n.coordToContainerPoint(this._geometry.getCenter()),o=this.createHandle(i,{symbol:r,cursor:"move",onDown:function(){if(e._shadow){t=e._shadow.copy();var n=hn(t._getInternalSymbol(),.5);t.setSymbol(n).addTo(e._geometry.getLayer())}},onMove:function(n){var r=n["coordOffset"];t?t.translate(r):e._geometry.translate(r)},onUp:function(){var n=t||e._geometry;e._update("setCoordinates",Ar.toNumberArrays(n.getCoordinates())),t&&t.remove()}});this._addRefreshHook((function(){var t=e._geometry.getCenter();o.setContainerPoint(n.coordToContainerPoint(t))}))},n._createHandleInstance=function(t,e){var n=this.getMap(),r=_e(e["symbol"],(function(){return[n.getZoom(),{"{bearing}":n.getBearing(),"{pitch}":n.getPitch(),"{zoom}":n.getZoom()}]})),i=this.options["removeVertexOn"],o=new gl(this,n,{symbol:r,cursor:e["cursor"],events:i});return o.setContainerPoint(t),o},n.createHandle=function(t,e){e||(e={});var n=this._createHandleInstance(t,e),r=this;function i(t){return this._updating=!0,e.onDown&&(this._geometry.fire("handledragstart"),e.onDown.call(r,t["containerPoint"],t)),!1}function o(t){return r._hideContext(),e.onMove&&(this._geometry.fire("handledragging"),e.onMove.call(r,t)),!1}function a(t){return e.onUp&&(this._geometry.fire("handledragend"),e.onUp.call(r,t)),this._updating=!1,!1}return n.on("dragstart",i,this),n.on("dragging",o,this),n.on("dragend",a,this),e.onRefresh&&(n.refresh=e.onRefresh),n},n._createResizeHandles=function(t,e,n){var r=this,i=["nw-resize","n-resize","ne-resize","w-resize","e-resize","sw-resize","s-resize","se-resize"],o=[null,"y",null,"x","x",null,"y",null],a=this._geometry,s=a instanceof Na;function u(){if(s){var t=a.getContainerExtent();return[new yt(t["xmin"],t["ymin"]),new yt((t["xmax"]+t["xmin"])/2,t["ymin"]),new yt(t["xmax"],t["ymin"]),new yt(t["xmin"],(t["ymin"]+t["ymax"])/2),new yt(t["xmax"],(t["ymin"]+t["ymax"])/2),new yt(t["xmin"],t["ymax"]),new yt((t["xmax"]+t["xmin"])/2,t["ymax"]),new yt(t["xmax"],t["ymax"])]}var e=a._getPrjExtent();return[new yt(e["xmin"],e["ymax"]),new yt((e["xmax"]+e["xmin"])/2,e["ymax"]),new yt(e["xmax"],e["ymax"]),new yt(e["xmin"],(e["ymax"]+e["ymin"])/2),new yt(e["xmax"],(e["ymax"]+e["ymin"])/2),new yt(e["xmin"],e["ymin"]),new yt((e["xmax"]+e["xmin"])/2,e["ymin"]),new yt(e["xmax"],e["ymin"])]}t||(t=[]);var c=this,l=[],f={},h=this.getMap(),p=this.options["vertexHandleSymbol"],d=function(){for(var d=u(),v=function(u){if(Array.isArray(t)){var v=t.some((function(t){return t===u}));if(v)return"continue"}var g=d[u],m=s?g:h._prjToContainerPoint(g);if(l.length<d.length-t.length){var y=r.createHandle(m,{symbol:p,cursor:i[u],axis:o[u],onMove:function(t){return function(n){c._updating=!0,e(n.containerPoint,t),a.fire("resizing")}}(u),onUp:function(){c._updating=!1,n()}});f[u]=l.length,l.push(y)}else l[f[u]].setContainerPoint(m)},g=0;g<d.length;g++)v(g)};return d(),this._addRefreshHook(d),l},n.createMarkerEditor=function(){var t=this,e=this._shadow||this._geometry,n=this.getMap();if(e._canEdit()){this._history||this._recordHistory(p());var r=e._getInternalSymbol(),i=new yt(0,0);w(r["markerDx"])&&(i.x=r["markerDx"]),w(r["markerDy"])&&(i.y=r["markerDy"]);var o=null,a="middle",s="middle";if(Do.test(r)){var u=r["markerType"];"pin"===u||"pie"===u||"bar"===u?(o=[5,6,7],a="bottom"):"rectangle"===u&&(o=[0,1,2,3,5],a="top",s="left")}else(Po.test(r)||Fo.test(r))&&(a="bottom",o=[5,6,7]);var c,l=[2,1,2,0,0,2,1,2];if(this.options["fixAspectRatio"]){var f=e.getSize();c=f.width/f.height}var h=this._createResizeHandles(o,(function(r,u){if(o&&o.indexOf(u)>=0){var f=n.containerPointToCoordinate(r.sub(i)),p=e.getCoordinates();f.x=p.x,e.setCoordinates(f),t._updateCoordFromShadow(!0);var d=h[h.length-1-u],v=d.getContainerPoint();r=v}var g=n.coordToContainerPoint(e.getCoordinates()).add(i),m=e._getInternalSymbol(),y=r.sub(g);"bottom"===a&&r.y>g.y&&(y.y=0);var _="middle"===a?2:1,b="left"===s?1:2,x=Math.abs(y.x)*b,w=Math.abs(y.y)*_;c&&(x=Math.max(x,w*c),w=x/c);var E=l[u];e instanceof ds?((c||0===E||2===E)&&(e.setWidth(x),e!==t._geometry&&t._geometry.setWidth(x)),(c||1===E||2===E)&&(e.setHeight(w),e!==t._geometry&&t._geometry.setHeight(w))):((c||0===E||2===E)&&(m["markerWidth"]=Math.min(x,t._geometry.options["maxMarkerWidth"]||1/0)),(c||1===E||2===E)&&(m["markerHeight"]=Math.min(w,t._geometry.options["maxMarkerHeight"]||1/0)),e.setSymbol(m),e!==t._geometry&&t._geometry.setSymbol(m))}),(function(){t._update(p())}))}else console&&console.warn("A marker can't be resized with symbol:",e.getSymbol());function p(){var t=[["setCoordinates",e.getCoordinates().toArray()]];return e instanceof ds?(t.push(["setWidth",e.getWidth()]),t.push(["setHeight",e.getHeight()])):t.push(["setSymbol",e.getSymbol()]),t}},n.createCircleEditor=function(){var t=this,e=this._shadow||this._geometry,n=this.getMap();this._history||this._recordHistory([["setCoordinates",e.getCoordinates().toArray()],["setRadius",e.getRadius()]]),this._createResizeHandles(null,(function(r){var i=e.getCenter(),o=n.containerPointToCoord(r),a=new Ba([[i.x,i.y],[o.x,i.y]]),s=new Ba([[i.x,i.y],[i.x,o.y]]),u=Math.max(n.computeGeometryLength(a),n.computeGeometryLength(s));e.setRadius(u),e!==t._geometry&&t._geometry.setRadius(u)}),(function(){t._update("setRadius",e.getRadius())}))},n.createEllipseOrRectEditor=function(){var t=this,e=[2,1,2,0,0,2,1,2],n=this._shadow||this._geometry;this._history||this._recordHistory(s());var r,i=this.getMap(),o=this._geometry instanceof es;this.options["fixAspectRatio"]&&(r=n.getWidth()/n.getHeight());var a=this._createResizeHandles(null,(function(s,u){var c,l,f,h=o?1:2,p=a[u],d=p.getContainerPoint(),v=e[u];if(o){var g=a[7-u],m=g.getContainerPoint();c=d.sub(m);var y=c.abs();l=i.pixelToDistance(y.x,0),f=i.pixelToDistance(0,y.y);var _=n.getSize(),b=n.getCoordinates(),x=n.getWidth(),w=n.getHeight(),E=i.containerPointToCoord(s),S=i.containerPointToCoord(m),O=new Ba([[S.x,S.y],[E.x,S.y]]),C=new Ba([[S.x,S.y],[S.x,E.y]]);if(l=i.computeGeometryLength(O),f=i.computeGeometryLength(C),0===v)if(r&&(y.y=y.x/r,_.height=Math.abs(y.y),f=l/r),d.y=m.y-_.height/2,E.y=b.y,4===u)E.x=Math.min(E.x,b.x);else{var T=i.locate(b,x,0);E.x=i.locate(new Ar(T.x,E.y),-l,0).x}else if(1===v)r&&(y.x=y.y*r,_.width=Math.abs(y.x),l=f*r),d.x=m.x-_.width/2,E.x=b.x,E.y=Math.max(E.y,S.y);else{if(r&&(l>f*r?(f=l/r,d.y=m.y+y.x*At(c.y)/r):(l=f*r,d.x=m.x+y.y*At(c.x)*r)),0===u||5===u){var A=0===u?i.locate(b,x,0):i.locate(b,x,-w);E.x=i.locate(new Ar(A.x,E.y),-l,0).x}else E.x=Math.min(E.x,S.x);E.y=Math.max(E.y,S.y)}n.setCoordinates(E),t._updateCoordFromShadow(!0)}else{var k=n.getCenter(),M=i.containerPointToCoord(d),P=new Ba([[k.x,k.y],[M.x,k.y]]),R=new Ba([[k.x,k.y],[k.x,M.y]]);l=i.computeGeometryLength(P),f=i.computeGeometryLength(R),r&&(l=Math.max(l,f*r),f=l/r)}(r||0===v||2===v)&&(n.setWidth(l*h),n!==t._geometry&&t._geometry.setWidth(l*h)),(r||1===v||2===v)&&(n.setHeight(f*h),n!==t._geometry&&t._geometry.setHeight(f*h))}),(function(){t._update(s())}));function s(){return[["setCoordinates",n.getCoordinates().toArray()],["setWidth",n.getWidth()],["setHeight",n.getHeight()]]}},n.createPolygonEditor=function(){var t=this.getMap(),e=this._shadow||this._geometry,n=this;this._history||this._recordHistory("setCoordinates",Ar.toNumberArrays(e.getCoordinates()));var r=e instanceof Ra?3:2,i="maptalks--editor-vertex-index",o={0:[]},a={0:[]};function s(t){if(void 0===t&&(t=0),e instanceof Ra){var n=e.getCoordinates()[t]||[];return n.slice(0,n.length-1)}return e.getCoordinates()}function u(t){return void 0===t&&(t=0),0===t?e._getPrjCoordinates():e._getPrjHoles()[t-1]}function c(){for(var t in o){for(var e=o[t].length-1;e>=0;e--)o[t][e][i]=e;for(var r=a[t].length-1;r>=0;r--)a[t][r][i]=r}n._updateCoordFromShadow()}function l(t){n._updating=!0;var s=t["target"],l=s[i],f=w(s._ringIndex)?s._ringIndex:0,h=u(f);if(!(h.length<=r)){var p,d=e instanceof Ba&&(0===l||l===h.length-1);h.splice(l,1),f>0?e._prjHoles[f-1]=h:e._setPrjCoordinates(h),e._updateCache(),o[f].splice(l,1)[0]["delete"](),l<a[f].length&&a[f].splice(l,1)[0]["delete"](),p=0===l?a[f].length-1:l-1,a[f].splice(p,1)[0]["delete"](),d||a[f].splice(p,0,g.call(n,p,f)),c(),n._updating=!1}}function f(r,i,o){void 0===o&&(o=0);var s=n._geometry.snapTo;s&&C(s)&&(r=n._geometry.snapTo(r)||r);var c,l=u(o),f=t._containerPointToPrj(r.sub(p())),h=l[i];h.x=f.x,h.y=f.y,e._updateCache(),e.onShapeChanged(),n._updateCoordFromShadow(!0),c=0===i?a[o].length-1:i-1,a[o][i]&&a[o][i].refresh(),a[o][c]&&a[o][c].refresh()}var h=new yt(0,0);function p(){var t=e._getCompiledSymbol();return h.x=t.lineDx||0,h.y=t.lineDy||0,h}function d(e,r,o){void 0===r&&(r=0);var a=(o||s(r))[e],u=n.createHandle(t.coordToContainerPoint(a)._add(p()),{symbol:n.options["vertexHandleSymbol"],cursor:"pointer",axis:null,onMove:function(){f(u.getContainerPoint(),u[i],r)},onRefresh:function(e,n){a=(n||s(r))[u[i]];var o=t.coordToContainerPoint(a);u.setContainerPoint(o._add(p()))},onUp:function(){n._updateCoordFromShadow()},onDown:function(t,e){!e||!e.domEvent||e.domEvent.button}});return u[i]=e,u._ringIndex=r,u.on(n.options["removeVertexOn"],l),u}var v=!1;function g(r,l,h){void 0===l&&(l=0);var m,y=h||s(l);m=r+1>=y.length?y[0]:y[r+1];var _=y[r].add(m).multi(.5),b=n.createHandle(_,{symbol:n.options["newVertexHandleSymbol"],cursor:"pointer",axis:null,onDown:function(r,o){if(!o||!o.domEvent||2!==o.domEvent.button){var s=u(l),c=b[i],f=b.getContainerPoint(),h=t._containerPointToPrj(f);s.splice(c+1,0,h),l>0?e._prjHoles[l-1]=s:e._setPrjCoordinates(s),e._updateCache(),b.opacity=1,a[l].splice(c,0,g.call(n,c,l),g.call(n,c+1,l)),v=!0}},onMove:function(){f(b.getContainerPoint(),b[i]+1,l)},onUp:function(t){if(t&&t.domEvent&&2===t.domEvent.button)v=!1;else{var e=b[i];Ot(b,a[l]),b["delete"](),o[l].splice(e+1,0,d.call(n,e+1,l)),c(),n._updateCoordFromShadow(),v=!1}},onRefresh:function(e,n){y=n||s(e);var r,o=b[i];r=o===y.length-1?0:o+1;var a=y[o].add(y[r]).multi(.5),u=t.coordToContainerPoint(a);b.setContainerPoint(u._add(p()))}});return b[i]=r,b}if(e instanceof Ra)for(var m=e.getHoles().length+1,y=0;y<m;y++){o[y]=[],a[y]=[];for(var _=s(y),b=0,x=_.length;b<x;b++)o[y].push(d.call(this,b,y,_)),b<x-1&&a[y].push(g.call(this,b,y,_));a[y].push(g.call(this,_.length-1,y,_))}else{for(var E=0,S=s(E),O=0,T=S.length;O<T;O++)o[E].push(d.call(this,O,E,S)),O<T-1&&a[E].push(g.call(this,O,E,S));a[E].length&&2===e.getCoordinates().length&&(a[E][0].options.symbol["markerDx"]=12)}this._addRefreshHook((function(){if(!v){for(var t in a)for(var n=s(t),r=a[t].length-1;r>=0;r--)a[t][r].refresh(t,n);for(var i in a[0].length&&e instanceof Ba&&(2===e.getCoordinates().length?a[0][0].options.symbol["markerDx"]=12:e.getCoordinates().length>2&&(a[0][0].options.symbol["markerDx"]=0)),o)for(var u=s(i),c=o[i].length-1;c>=0;c--)o[i][c].refresh(i,u)}}))},n._refresh=function(){if(this._refreshHooks)for(var t=this._refreshHooks.length-1;t>=0;t--)this._refreshHooks[t].call(this)},n._hideContext=function(){this._geometry&&(this._geometry.closeMenu(),this._geometry.closeInfoWindow())},n._addRefreshHook=function(t){t&&(this._refreshHooks||(this._refreshHooks=[]),this._refreshHooks.push(t))},n._update=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];this._exeHistory([t,n]),this._recordHistory.apply(this,[t].concat(n))},n._updateCoordFromShadow=function(t){var e=this._shadow||this._geometry,n=e.getCoordinates(),r=this._geometry,i=this._updating;this._updating=!0,r.setCoordinates(n),t||this._recordHistory("setCoordinates",Ar.toNumberArrays(r.getCoordinates())),this._updating=i},n._recordHistory=function(t){this._history||(this._history=[],this._historyPointer=0);for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];if(this._history.length){var i=this._history[this._history.length-1];if(i[0]===t&&JSON.stringify(i[1])===JSON.stringify(n))return}this._historyPointer<this._history.length-1&&this._history.splice(this._historyPointer+1),this._history.push([t,n]),this._historyPointer=this._history.length-1,this._geometry.fire("editrecord")},n.cancel=function(){if(!this._history||0===this._historyPointer)return this;this._historyPointer=0;var t=this._history[0];return this._exeAndReset(t),this},n.undo=function(){if(!this._history||0===this._historyPointer)return this;var t=this._history[--this._historyPointer];return this._exeAndReset(t),this},n.redo=function(){if(!this._history||this._historyPointer===this._history.length-1)return this;var t=this._history[++this._historyPointer];return this._exeAndReset(t),this},n._exeAndReset=function(t){if(!this._updating){this._exeHistory(t);var e=this._history,n=this._historyPointer;this.stop(),this._history=e,this._historyPointer=n,this.start()}},n._onDragStart=function(){this._updating=!0},n._onDragEnd=function(){this._updating=!1},n._exeHistory=function(t){if(Array.isArray(t)){var e=this._updating;this._updating=!0;var n=this._shadow||this._geometry,r=this._geometry;Array.isArray(t[0])?t[0].forEach((function(t){var e=t[0],i=t.slice(1);n[e].apply(n,i),n!==r&&r[e].apply(r,i)})):(n[t[0]].apply(n,t[1]),n!==r&&r[t[0]].apply(r,t[1])),this._updating=e}},e}(vr(yr));xl.mergeOptions(bl);var wl={startEditText:function(){return this.getMap()?(this.hide(),this.endEditText(),this._prepareEditor(),this._fireEvent("edittextstart"),this):this},endEditText:function(){if(this._textEditor){var t=this._textEditor.innerHTML;t=t.replace(/<p>/gi,"").replace(/<\/p>/gi,"<br/>"),this._textEditor.innerHTML=t;var e=this._textEditor.innerText.replace(/[\r\n]+$/gi,"");this.setContent(e),qn(this._textEditor,"mousedown dblclick",Rn),this.getMap().off("mousedown",this.endEditText,this),this._editUIMarker.remove(),delete this._editUIMarker,this._textEditor.onkeyup=null,delete this._textEditor,this.show(),this._fireEvent("edittextend")}return this},isEditingText:function(){return!!this._textEditor},getTextEditor:function(){return this._editUIMarker},_prepareEditor:function(){var t=this.getMap(),e=this._createEditor();this._textEditor=e,t.on("mousedown",this.endEditText,this);var n=this._getEditorOffset();this._editUIMarker=new Nu(this.getCoordinates(),{animation:null,content:e,dx:n.dx,dy:n.dy}).addTo(t),this._setCursorToLast(this._textEditor)},_getEditorOffset:function(){var t=this._getInternalSymbol()||{},e=0,n=0,r=t["textHorizontalAlignment"];return"middle"===r||x(r)?(e=(t["textDx"]||0)-2,n=(t["textDy"]||0)-2):(e=(t["markerDx"]||0)-2,n=(t["markerDy"]||0)-2),{dx:e,dy:n}},_createEditor:function(){var t=this.getContent(),e=this.getSize(),n=this._getInternalSymbol()||{},r=e.width,i=n["textFill"]||"#000000",o=n["textSize"]||12,a=e.height,s=n["markerLineColor"]||"#000",u=n["markerFill"]||"#3398CC",c=n["textLineSpacing"]||0,l=On("div");return l.contentEditable=!0,l.style.cssText="background:"+u+"; border:1px solid "+s+";\n            color:"+i+";font-size:"+o+"px;width:"+(r-2)+"px;height:"+(a-2)+"px;margin: auto;\n            line-height:"+(o+c)+"px;outline: 0; padding:0; margin:0;word-wrap: break-word;\n            overflow: hidden;-webkit-user-modify: read-write-plaintext-only;",l.innerText=t,Xn(l,"mousedown dblclick",Rn),l.onkeyup=function(t){var e=l.style.height||0;13===t.keyCode&&(l.style.height=parseInt(e)+o/2+"px")},l},_setCursorToLast:function(t){var e;window.getSelection?(t.focus(),e=window.getSelection(),e.selectAllChildren(t),e.collapseToEnd()):document.selection&&(e=document.selection.createRange(),e.moveToElementText(t),e.collapse(!1),e.select())}};hs.include(wl),aa.include({animate:function(t,e,n){var r=this;this._animPlayer&&this._animPlayer.finish(),C(e)&&(n=e),e||(e={});var i,o=this.getMap(),a=this._getProjection(),s=this._prepareAnimationStyles(t),u=e["focus"];if(delete this._animationStarted,o){var c=o._getRenderer(),l=function(t){c.callInNextFrame(t)};e["framer"]=l}var f=Aa.animate(s,e,(function(t){if(o&&o.isRemoved())f.finish();else{o&&!r._animationStarted&&u&&o.onMoveStart();var e=t.styles;for(var s in e)if("symbol"!==s&&"translate"!==s&&e.hasOwnProperty(s)){var c="set"+s[0].toUpperCase()+s.slice(1);r[c](e[s])}var l=e["translate"];if(l){var h=l;i&&(h=l.sub(i)),i=l,r.translate(h)}var p=e["symbol"];if(p){var d=r.getSymbol()||{};r.setSymbol(pn(d,p))}if(o&&u){var v=a.project(r.getCenter());o._setPrjCenter(v);var g=o._parseEventFromCoord(a.unproject(v));"running"!==f.playState?o.onMoveEnd(g):o.onMoving(g)}r._fireAnimateEvent(f.playState),n&&n(t)}}),this);return this._animPlayer=f,this._animPlayer.play()},_prepareAnimationStyles:function(t){var e=this._getInternalSymbol(),n={};for(var r in t)if(t.hasOwnProperty(r)){var i=t[r];if("translate"!==r&&"symbol"!==r){var o="get"+r[0].toUpperCase()+r.substring(1),a=this[o]();n[r]=[a,i]}else if("symbol"===r){var s=void 0;if(Array.isArray(t["symbol"])){if(!Array.isArray(e))throw new Error("geometry'symbol isn't a composite symbol, while the symbol in styles is.");s=[];for(var u=t["symbol"],c=0;c<u.length;c++)if(u[c]){var l={};for(var f in u[c])u[c].hasOwnProperty(f)&&(l[f]=[e[c][f],u[c][f]]);s.push(l)}else s.push(null)}else{if(Array.isArray(e))throw new Error("geometry'symbol is a composite symbol, while the symbol in styles isn't.");for(var h in s={},i)i.hasOwnProperty(h)&&(s[h]=[e[h],i[h]])}n["symbol"]=s}else"translate"===r&&(n["translate"]=new Ar(i))}return n},_fireAnimateEvent:function(t){"finished"===t?(delete this._animationStarted,this._fireEvent("animateend")):"running"===t&&(this._animationStarted?this._fireEvent("animating"):(this._fireEvent("animatestart"),this._animationStarted=!0))}});var El=f+"_drag_stage",Sl=ht.touch?"touchstart mousedown":"mousedown",Ol=function(t){function e(e){return t.call(this,e)||this}pt(e,t);var n=e.prototype;return n.addHooks=function(){this.target.on(Sl,this._startDrag,this)},n.removeHooks=function(){this._endDrag(),this.target.off(Sl,this._startDrag,this),delete this.container},n._prepareDragHandler=function(){this._dragHandler=new Tr(this.container),this._dragHandler.on("dragging",this._dragging,this).on("mouseup",this._endDrag,this).enable()},n._prepareShadow=function(){var t=this,e=this.target,n="canvas"===e.getLayer().options["renderer"];if(n){this._prepareDragStageLayer(),this._shadow&&this._shadow.remove();var r=this._shadow=e.copy();if(r.getGeometries){var i=r.getGeometries(),o=e.getGeometries();i.forEach((function(e,n){t._updateShadowSymbol(e,o[n])}))}else this._updateShadowSymbol(r,e);r.setId(null),this._prepareShadowConnectors()}},n._updateShadowSymbol=function(t,e){if(t.setSymbol(e._getInternalSymbol()),e.options["dragShadow"]){var n=hn(t._getInternalSymbol(),.5);t.setSymbol(n)}},n._prepareShadowConnectors=function(){var t=this.target,e=this._shadow,n=this._dragStageLayer._getRenderer().resources,r=[];if(_s._hasConnectors(t))for(var i=_s._getConnectors(t),o=0,a=i.length;o<a;o++){var s=i[o],u=s.config(),c=s._getInternalSymbol();u["symbol"]=hn(c,.5);var l=void 0;l=s.getConnectSource()===t?new s.constructor(e,s.getConnectTarget(),u):new s.constructor(s.getConnectSource(),e,u),r.push(l),s.getLayer()&&s.getLayer()._getRenderer()&&n.merge(s.getLayer()._getRenderer().resources)}this._shadowConnectors=r,r.push(e),this._dragStageLayer.bringToFront().addGeometry(r)},n._onTargetUpdated=function(){this._shadow&&this._shadow.setSymbol(this.target._getSymbol())},n._prepareDragStageLayer=function(){var t=this.target.getMap(),e=this.target.getLayer();this._dragStageLayer=t.getLayer(El),this._dragStageLayer||(this._dragStageLayer=new Cs(El,{enableAltitude:e.options["enableAltitude"],altitudeProperty:e.options["altitudeProperty"]}),t.addLayer(this._dragStageLayer));var n=new Li;n.merge(e._getRenderer().resources),this._dragStageLayer._getRenderer().resources=n},n._startDrag=function(t){var e=this.target.getMap();if(e){var n=this.target._getParent();if(!n&&!this.isDragging()){var r=t["domEvent"];r.touches&&r.touches.length>1||2===r.button||(this.container=e._panels.mapWrapper||e._containerDOM,this.target.on("click",this._endDrag,this),this._lastCoord=this._correctCoord(t["coordinate"]),this._lastPoint=t["containerPoint"],this._prepareDragHandler(),this._dragHandler.onMouseDown(t["domEvent"]),Xn(this.container,"mouseleave",this._endDrag,this),this._startParam=t,this._moved=!1)}}},n._dragging=function(t){var e=this.target,n=e.getMap(),r=n._parseEvent(t["domEvent"]),i=r["domEvent"];if(!(i.touches&&i.touches.length>1)){var o=n._getVisualHeight(n.options["maxVisualPitch"]);if(!(r.containerPoint.y<n.height-o)){if(!this._moved)return this._moved=!0,e.on("symbolchange",this._onTargetUpdated,this),this._isDragging=!0,this._prepareShadow(),this._shadow&&(e.options["dragShadow"]||e.hide(),this._shadow._fireEvent("dragstart",r)),this.target._fireEvent("dragstart",this._startParam||r),void delete this._startParam;var a=this._shadow||e,s=a.options["dragOnAxis"],u=a.options["dragOnScreenAxis"],c=r["containerPoint"],l=r["coordinate"];this._lastPoint=this._lastPoint||c,this._lastCoord=this._lastCoord||l,u?("x"===s?c.y=this._lastPoint.y:"y"===s&&(c.x=this._lastPoint.x),l=n.containerPointToCoord(c)):l=this._correctCoord(l);var f=c.sub(this._lastPoint),h=l.sub(this._lastCoord);u||("x"===s?f.y=h.y=0:"y"===s&&(f.x=h.x=0)),this._lastPoint=c,this._lastCoord=l,a.translate(h),a===e||e.options["dragShadow"]||e.translate(h),r["coordOffset"]=h,r["pointOffset"]=f,a._fireEvent("dragging",r),a!==e&&e._fireEvent("dragging",r)}}},n._endDrag=function(t){if(this._dragHandler&&(this._dragHandler.disable(),delete this._dragHandler),this.container&&qn(this.container,"mouseleave",this._endDrag,this),this.target){var e=this.target;e.off("click",this._endDrag,this),e.off("symbolchange",this._onTargetUpdated,this),delete this._lastCoord,delete this._lastPoint,this._isDragging=!1;var n=e.getMap();if(this.enabled()&&n){var r=n._parseEvent(t?t["domEvent"]:null);this._updateTargetAndRemoveShadow(r),this._moved&&e._fireEvent("dragend",r)}}},n.isDragging=function(){return!!this._isDragging},n._updateTargetAndRemoveShadow=function(t){if(this._shadow){var e=this.target,n=e.getMap();e.options["dragShadow"]||e.show();var r=this._shadow;if(r){if(e.options["dragShadow"])if(e.getGeometries){var i=r.getGeometries(),o=e.getGeometries();i.forEach((function(t,e){o[e].setCoordinates(i[e].getCoordinates())}))}else e.setCoordinates(r.getCoordinates());r._fireEvent("dragend",t),r.remove(),delete this._shadow}this._shadowConnectors&&(n.getLayer(El).removeGeometry(this._shadowConnectors),delete this._shadowConnectors),this._dragStageLayer&&(this._dragStageLayer._getRenderer().resources=new Li,this._dragStageLayer.remove())}},n._correctCoord=function(t){var e=this.target.getMap();if(!e.getPitch())return t;var n=this.target;if(!n.getMinAltitude())return t;var r=(n.getMinAltitude()+n.getMaxAltitude())/2;return e.locateByPoint(t,0,-r)},e}(mr);aa.mergeOptions({draggable:!1,dragShadow:!0,dragOnAxis:null,dragOnScreenAxis:!1}),aa.addInitHook("addHandler","draggable",Ol),aa.include({isDragging:function(){return this._getParent()?this._getParent().isDragging():!!this["draggable"]&&this["draggable"].isDragging()}}),aa.include({startEdit:function(t){return this.getMap()&&this.options["editable"]?(this._editor&&this.endEdit(),this._editor=new xl(this,t),this._editor.start(),this._getParent()||this.fire("editstart"),this):this},endEdit:function(){return this._editor&&(this._editor.stop(),delete this._editor,this._getParent()||this.fire("editend")),this},redoEdit:function(){return this.isEditing()?(this._editor.redo(),this._getParent()||this.fire("redoedit"),this):this},undoEdit:function(){return this.isEditing()?(this._editor.undo(),this._getParent()||this.fire("undoedit"),this):this},cancelEdit:function(){return this.isEditing()?(this._editor.cancel(),this._getParent()||this.fire("canceledit"),this):this},isEditing:function(){return!!this._editor&&this._editor.isEditing()}}),aa.include({_onEvent:function(t,e){var n=this.getMap();if(n){var r=e||this._getEventTypeToFire(t);"contextmenu"===r&&this.listens("contextmenu")&&(Rn(t),Pn(t));var i=n._getEventParams(t);w(this._pickGeometryIndex)&&(i.pickGeometryIndex=this._pickGeometryIndex),this._fireEvent(r,i)}},_getEventTypeToFire:function(t){return t.type}}),aa.include({setInfoWindow:function(t){return this.removeInfoWindow(),t instanceof Vu?(this._infoWindow=t,this._infoWinOptions=b({},this._infoWindow.options),this._infoWindow.addTo(this),this):(this._infoWinOptions=b({},t),this._infoWindow?this._infoWindow.setOptions(t):this.getMap()&&this._bindInfoWindow(),this)},getInfoWindow:function(){return this._infoWindow?this._infoWindow:null},openInfoWindow:function(t){return this.getMap()?(t||(t=this.getCenter()),this._infoWindow?this._infoWindow.show(t):this._infoWinOptions&&this.getMap()&&(this._bindInfoWindow(),this._infoWindow.show(t)),this):this},closeInfoWindow:function(){return this._infoWindow&&this._infoWindow.hide(),this},removeInfoWindow:function(){return this._unbindInfoWindow(),delete this._infoWinOptions,delete this._infoWindow,this},_bindInfoWindow:function(){var t=this._infoWinOptions;return t?(this._infoWindow=new Vu(t),this._infoWindow.addTo(this),this):this},_unbindInfoWindow:function(){return this._infoWindow&&(this.closeInfoWindow(),this._infoWindow.remove(),delete this._infoWindow),this}});var Cl=new yt(0,0),Tl=new yt(0,0),Al=new yt(0,0),kl=new yt(0,0),Ml=[],Pl=function(t){function e(){return t.call(this,Pi)||this}pt(e,t);var n=e.prototype;return n.checkUrl=function(t){return t&&O(t)?Kt(t):t},n.fetchImage=function(t,e,n,r){t=this.checkUrl(t);var i={url:t,fetchOptions:r};this.send(i,Ml,n,e)},e}(ki),Rl=new Image,jl=function(t){function e(e){var n;return n=t.call(this,e)||this,n.tilesInView={},n.tilesLoading={},n._parentTiles=[],n._childTiles=[],n._tileQueue=[],n.tileCache=new Jn(e.options["maxCacheSize"],n.deleteTile.bind(dt(dt(n)))),!ht.decodeImageInWorker||!n.layer.options["decodeImageInWorker"]||"gl"!==e.options["renderer"]&&ht.safari||(n._tileImageWorkerConn=new Pl),n._compareTiles=Nl.bind(dt(dt(n))),n}pt(e,t);var n=e.prototype;return n.getCurrentTileZoom=function(){return this._tileZoom},n.draw=function(t,e){var n=this.getMap();if(this.isDrawable()){var r=this.prepareCanvas();if(!r||r.intersects(this.canvasExtent2D)){var i;this._renderTimestamp!==t&&(this._consumeTileQueue(),this._renderTimestamp=t);var o=!1,a=this._frameTiles;if(a&&t===a.timestamp){if(a.empty)return;i=a}else{if(i=this._getTilesInCurrentFrame(),!i)return this._frameTiles={empty:!0,timestamp:t},void this.completeRender();o=!0,this._frameTiles=i,this._frameTiles.timestamp=t,i.loadingCount&&this.loadTileQueue(i.tileQueue)}var s=i,u=s.tiles,c=s.childTiles,l=s.parentTiles,f=s.placeholders,h=s.loading,p=s.loadingCount;this._drawTiles(u,l,c,f,e),p||h||(n.isAnimating()||!this._parentTiles.length&&!this._childTiles.length||(this._parentTiles=[],this._childTiles=[],this.setToRedraw()),this.completeRender()),o&&this._retireTiles()}else this.completeRender()}},n.getTileGridsInCurrentFrame=function(){return this._frameTileGrids},n._getTilesInCurrentFrame=function(){var t=this.getMap(),e=this.layer,n=e.getTiles();if(this._frameTileGrids=n,n=n.tileGrids,!n||!n.length)return null;var r=n.reduce((function(t,e){return t+(e&&e.tiles&&e.tiles.length||0)}),0);r>=this.tileCache.max/2&&this.tileCache.setMaxSize(2*r+1);var i=0,o=!1,a={},s=[],u=[],c={},l=[],f={},h=[],p={},d={},v=this._markTiles(),g=this._getLoadLimit(),m=n.length;this._tileZoom=n[0]["zoom"];for(var y=0;y<m;y++){var _=n[y],b=_["tiles"],x=void 0;b.length&&(x=this._generatePlaceHolder(b[0].res));for(var w=0,E=b.length;w<E;w++){var S=b[w],O=S["id"],C=!1;if(this._isLoadingTile(O))C=o=!0,this.tilesLoading[O].current=!0;else{var T=this._getCachedTile(O);if(T)T.image&&this.getTileOpacity(T.image)<1&&(C=o=!0,this.setToRedraw()),s.push(T);else{C=o=!0;var A=g&&i+v[0]>g;if(!A&&(!t.isInteracting()||t.isMoving()||t.isRotating())){i++;var k=O;d[k]=S}}}if(C&&!a[O]){a[O]=1,x&&!p[O]&&(S.cache=!1,h.push({image:x,info:S}),p[O]=1);var M=this._findParentTile(S);if(M){var P=M.info.id;void 0===c[P]&&(c[P]=u.length,u.push(M))}else if(!u.length){var R=this._findChildTiles(S);R.length&&R.forEach((function(t){f[t.info.id]||(l.push(t),f[t.info.id]=1)}))}}}}return u.length&&(l.length=0,this._childTiles.length=0),{childTiles:l,parentTiles:u,tiles:s,placeholders:h,loading:o,loadingCount:i,tileQueue:d}},n.isTileCachedOrLoading=function(t){return this.tileCache.get(t)||this.tilesInView[t]||this.tilesLoading[t]},n._drawTiles=function(t,e,n,r,i){var o=this;e.length&&(e.sort((function(t,e){return Math.abs(e.info.z-o._tileZoom)-Math.abs(t.info.z-o._tileZoom)})),this._parentTiles=e),n.length&&(this._childTiles=n);var a={tiles:t,parentTiles:this._parentTiles,childTiles:this._childTiles,parentContext:i};this.onDrawTileStart(a,i),1===this.layer.options["opacity"]&&(this._childTiles.forEach((function(t){return o._drawTile(t.info,t.image,i)})),this._parentTiles.forEach((function(t){return o._drawTile(t.info,t.image,i)}))),t.sort(this._compareTiles);for(var s=0,u=t.length;s<u;s++)this._drawTileAndCache(t[s],i);this.layer.options["opacity"]<1&&(this._childTiles.forEach((function(t){return o._drawTile(t.info,t.image,i)})),this._parentTiles.forEach((function(t){return o._drawTile(t.info,t.image,i)}))),r.forEach((function(t){return o._drawTile(t.info,t.image,i)})),this.onDrawTileEnd(a,i)},n.onDrawTileStart=function(){},n.onDrawTileEnd=function(){},n._drawTile=function(t,e,n){e&&this.drawTile(t,e,n)},n._drawTileAndCache=function(t,e){t.current=!0,this.tilesInView[t.info.id]=t,this._drawTile(t.info,t.image,e),this.tileCache.add(t.info.id,t)},n.drawOnInteracting=function(t,e,n){this.draw(e,n)},n.needToRedraw=function(){var e=this.getMap();return!!this._tileQueue.length||(e.getPitch()?t.prototype.needToRedraw.call(this):!(!e.isRotating()&&!e.isZooming())||(e.isMoving()?!!this.layer.options["forceRenderOnMoving"]:t.prototype.needToRedraw.call(this)))},n.hitDetect=function(){return!1},n._getLoadLimit=function(){return this.getMap().isInteracting()?this.layer.options["loadingLimitOnInteracting"]:0},n.isDrawable=function(){return!this.getMap().getPitch()||(console&&console.warn("TileLayer with canvas renderer can't be pitched, use gl renderer ('renderer' : 'gl') instead."),this.clear(),!1)},n.clear=function(){this._retireTiles(!0),this.tileCache.reset(),this.tilesInView={},this.tilesLoading={},this._parentTiles=[],this._childTiles=[],t.prototype.clear.call(this)},n._isLoadingTile=function(t){return!!this.tilesLoading[t]},n.clipCanvas=function(e){return t.prototype.clipCanvas.call(this,e)},n._clipByPitch=function(t){var e=this.getMap();if(e.getPitch()<=e.options["maxVisualPitch"])return!1;if(!this.layer.options["clipByPitch"])return!1;var n=e.getContainerExtent(),r=e.getDevicePixelRatio();return t.save(),t.strokeStyle="rgba(0, 0, 0, 0)",t.beginPath(),t.rect(0,Math.ceil(n.ymin)*r,Math.ceil(n.getWidth())*r,Math.ceil(n.getHeight())*r),t.stroke(),t.clip(),!0},n.loadTileQueue=function(t){for(var e in t)if(t.hasOwnProperty(e)){var n=t[e],r=this.loadTile(n);void 0===r.loadTime&&(this.tilesLoading[n["id"]]={image:r,current:!0,info:n})}},n.loadTile=function(t){var e;if(this._tileImageWorkerConn&&this.loadTileImage===this.constructor.prototype.loadTileImage)e={},this._fetchImage(e,t);else{var n=this.layer.getTileSize(t.layer);e=new Image,e.width=n["width"],e.height=n["height"],e.onload=this.onTileLoad.bind(this,e,t),e.onerror=this.onTileError.bind(this,e,t),this.loadTileImage(e,t["url"])}return e},n._fetchImage=function(t,e){var n=this;if(t instanceof Image)t.src=e.url;else{var r=e.x,i=e.y,o=Math.abs(r+i)%this._tileImageWorkerConn.workers.length;this._tileImageWorkerConn.fetchImage(e.url,o,(function(r,i){r?n.onTileError(t,e,r):qt(i,(function(t){n.onTileLoad(t,e)}))}),this.layer.options["fetchOptions"]||{referrer:document.location.href,headers:{accept:"image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8"}})}},n.loadTileImage=function(t,e){var n=this.layer.options["crossOrigin"];return x(n)||(t.crossOrigin=n),bt(t,[e])},n.abortTileLoading=function(t){t&&(t.onload=Il,t.onerror=Il,t.src=Ht)},n.onTileLoad=function(t,e){this._tileQueue.push({tileInfo:e,tileData:t})},n._consumeTileQueue=function(){var t=0,e=this.layer.options["tileLimitPerFrame"],n=this._tileQueue;while(n.length&&(e<=0||t<e)){var r=n.shift(),i=r.tileData,o=r.tileInfo;this.checkTileInQueue(i,o)&&(this.consumeTile(i,o),t++)}},n.checkTileInQueue=function(){return!0},n.consumeTile=function(t,e){if(this.layer){var n=e["id"];if(this.tilesInView){var r={tile:e,tileImage:t};this.layer.fire("tileload",r),t=r.tileImage,t.loadTime=_(),delete this.tilesLoading[n],this._addTileToCache(e,t),this.setToRedraw()}}},n.onTileError=function(t,e){if(this.layer){t.onerrorTick=t.onerrorTick||0;var n=this.layer.options["tileRetryCount"];if(n>t.onerrorTick)return t.onerrorTick++,void this._fetchImage(t,e);var r=this.layer.options["errorUrl"];if(r){if(t instanceof Image&&t.src!==r)return void(t.src=r);t=new Image,t.src=r}t=t instanceof Image?t:Rl,this.abortTileLoading(t,e),t.loadTime=0,delete this.tilesLoading[e["id"]],this._addTileToCache(e,t),this.setToRedraw(),this.layer.fire("tileerror",{tile:e})}},n.drawTile=function(t,e){if(e&&this.getMap()){var n=t.extent2d,r=t.offset,i=Cl.set(n.xmin-r[0],n.ymax-r[1]),o=t.z,a=t.id,s=this.getMap(),u=s.getZoom(),c=this.context,l=s._pointAtResToContainerPoint(i,t.res,0,Tl),f=s.getBearing(),h=f||u!==o,p=this.getTileOpacity(e),d=c.globalAlpha;p<1&&(c.globalAlpha=p,this.setToRedraw()),h||l._round();var v=l.x,g=l.y,m=t.extent2d.xmax-t.extent2d.xmin,y=t.extent2d.ymax-t.extent2d.ymin;if(h){c.save(),c.translate(v,g),f&&(c.rotate(-f*Math.PI/180),m+=.1,y+=.1);var _=s._getResolution();if(_!==t.res){var b=t.res/_;c.scale(b,b)}v=g=0}if(ur.image(c,e,v,g,m,y),this.layer.options["debug"]){var x=this.layer.options["debugOutline"];c.save(),c.strokeStyle=x,c.fillStyle=x,c.strokeWidth=10,c.font="20px monospace";var w=new yt(v,g);ur.rectangle(c,w,{width:m,height:y},1,0),ur.fillText(c,this.getDebugInfo(a),w._add(32,y-14),x),ur.drawCross(c,v+m/2,g+y/2,2,x),c.restore()}h&&c.restore(),c.globalAlpha!==d&&(c.globalAlpha=d),this.setCanvasUpdated()}},n.getDebugInfo=function(t){var e=t.split("_"),n=e.length;return"x:"+e[n-2]+", y:"+e[n-3]+", z:"+e[n-1]},n._findChildTiles=function(t){var e=this._getLayerOfTile(t.layer);if(!e||!e.options["background"])return[];for(var n=this.getMap(),r=[],i=t.res,o=t.extent2d.getMin(),a=t.extent2d.getMax(),s=e._project(n._pointToPrjAtRes(o,i,Al),Al),u=e._project(n._pointToPrjAtRes(a,i,kl),kl),c=3,l=1;l<c;l++)this._findChildTilesAt(r,s,u,e,t.z+l);return r},n._findChildTilesAt=function(t,e,n,r,i){var o=r.options["zoomOffset"],a=r.getId(),s=r.getSpatialReference().getResolution(i+o);if(s)for(var u,c,l=r._getTileConfig().getTileIndex(e,s),f=r._getTileConfig().getTileIndex(n,s),h=Math.min(l.idx,f.idx),p=Math.max(l.idx,f.idx),d=Math.min(l.idy,f.idy),v=Math.max(l.idy,f.idy),g=h;g<p;g++)for(var m=d;m<v;m++)u=r._getTileId(g,m,i+o,a),this.tileCache.has(u)&&(c=this.tileCache.getAndRemove(u),t.push(c),this.tileCache.add(u,c))},n._findParentTile=function(t){var e=this.getMap(),n=this._getLayerOfTile(t.layer);if(!n||!n.options["background"])return null;for(var r=n.getSpatialReference(),i=r.getZoomDirection(),o=n.options["zoomOffset"],a=n.options["backgroundZoomDiff"],s=t.res,u=t.extent2d.getCenter(),c=n._project(e._pointToPrjAtRes(u,s)),l=1;l<=a;l++){var f=t.z-i*l,h=r.getResolution(f+o);if(h){var p=n._getTileConfig().getTileIndex(c,h),d=n._getTileId(p.x,p.y,f+o,t.layer);if(this.tileCache.has(d)){var v=this.tileCache.getAndRemove(d);return this.tileCache.add(d,v),v}}}return null},n._getLayerOfTile=function(t){return this.layer.getChildLayer?this.layer.getChildLayer(t):this.layer},n._getCachedTile=function(t){var e=this.tilesInView,n=this.tileCache.getAndRemove(t);if(n){e[t]=n;var r=this.tilesLoading;if(r&&r[t]){r[t].current=!1;var i=r[t],o=i.image,a=i.info;this.abortTileLoading(o,a),delete r[t]}}else n=e[t];return n},n._addTileToCache=function(t,e){this.tilesInView[t.id]={image:e,current:!0,info:t}},n.getTileOpacity=function(t){return this.layer.options["fadeAnimation"]&&t.loadTime?Math.min(1,(_()-t.loadTime)/(1e3/60*10)):1},n.onRemove=function(){this.clear(),delete this.tileCache,delete this._tilePlaceHolder,t.prototype.onRemove.call(this)},n._markTiles=function(){var t=0,e=0;if(this.tilesLoading)for(var n in this.tilesLoading)this.tilesLoading[n].current=!1,t++;if(this.tilesInView)for(var r in this.tilesInView)this.tilesInView[r].current=!1,e++;return[t,e]},n._retireTiles=function(t){for(var e in this.tilesLoading){var n=this.tilesLoading[e];!t&&n.current||(n.image&&this.abortTileLoading(n.image,n.info),this.deleteTile(n),delete this.tilesLoading[e])}for(var r in this.tilesInView){var i=this.tilesInView[r];i.current||(delete this.tilesInView[r],this.tileCache.has(r)||this.deleteTile(i))}},n.deleteTile=function(t){t&&t.image&&(t.image.close&&t.image.close(),t.image.onload=null,t.image.onerror=null)},n._generatePlaceHolder=function(t){var e=this.getMap(),n=this.layer.options["placeholder"];if(!n||e.getPitch())return null;var r=this.layer.getTileSize(),i=t/e._getResolution(),o=this._tilePlaceHolder=this._tilePlaceHolder||ur.createCanvas(1,1,e.CanvasClass);return o.width=r.width*i,o.height=r.height*i,C(n)?n(o):Ll(o),o},e}(Ii);function Il(){return!1}function Ll(t){var e=t.getContext("2d"),n=t.width,r=t.height,i=n/16,o=r/16;e.beginPath();for(var a=0;a<16;a++)e.moveTo(0,a*o),e.lineTo(n,a*o),e.moveTo(a*i,0),e.lineTo(a*i,r);e.strokeStyle="rgba(180, 180, 180, 0.1)",e.lineWidth=1,e.stroke(),e.beginPath();for(var s=[[0,0],[n,0],[0,r],[n,r],[0,0],[0,r],[n,0],[n,r],[0,r/2],[n,r/2],[n/2,0],[n/2,r]],u=1;u<s.length;u+=2)e.moveTo(s[u-1][0],s[u-1][1]),e.lineTo(s[u][0],s[u][1]);e.lineWidth=4,e.stroke()}function Nl(t,e){return Math.abs(this._tileZoom-t.info.z)-Math.abs(this._tileZoom-e.info.z)}Rc.registerRenderer("canvas",jl);var Dl=new yt(0,0),Fl={properties:{}},Bl=function(t){function e(){return t.apply(this,arguments)||this}pt(e,t);var n=e.prototype;return n.isDrawable=function(){return!0},n.needToRedraw=function(){var e=this.getMap();return!(!this._gl()||e.getPitch()||!e.isZooming()||e.isMoving()||e.isRotating())||t.prototype.needToRedraw.call(this)},n.onDrawTileStart=function(t,e){var n=this.gl;if(n.stencilOp(n.KEEP,n.KEEP,n.REPLACE),e&&e.renderTarget){var r=e.renderTarget.fbo;if(r){var i=e.renderTarget.getFramebuffer(r);n.bindFramebuffer(n.FRAMEBUFFER,i)}}},n.onDrawTileEnd=function(t,e){var n=this.gl;if(e&&e.renderTarget){var r=e.renderTarget.fbo;r&&n.bindFramebuffer(n.FRAMEBUFFER,null)}},n.drawTile=function(e,n,r){if(!r||!r.sceneFilter||r.sceneFilter(Fl)){var i=this.getMap();if(e&&i&&n){var o=e._glScale=e._glScale||e.res/i.getGLRes(),a=e.extent2d.xmax-e.extent2d.xmin,s=e.extent2d.ymax-e.extent2d.ymin;if(!1!==e.cache&&this._bindGLBuffer(n,a,s),this._gl()){var u=e.extent2d,c=e.offset,l=Dl.set(u.xmin-c[0],e.extent2d.ymax-c[1]),f=l.x*o,h=l.y*o,p=this.getTileOpacity(n),d=null;this.layer.options["debug"]&&(d=this.getDebugInfo(e.id));var v=this.gl;v.stencilFunc(v.LEQUAL,Math.abs(this.getCurrentTileZoom()-e.z),255),this.drawGLImage(n,f,h,a,s,o,p,d),p<1?this.setToRedraw():this.setCanvasUpdated()}else t.prototype.drawTile.call(this,e,n)}}},n._bindGLBuffer=function(t,e,n){t.glBuffer||(t.glBuffer=this.bufferTileData(0,0,e,n))},n.loadTileImage=function(t,e){var n=this.layer.options["crossOrigin"];t.crossOrigin=null!==n?n:"",t.src=e},n.onCanvasCreate=function(){this.canvas.gl&&this.canvas.gl.wrap||this.createCanvas2()},n.createContext=function(){t.prototype.createContext.call(this),this.createGLContext()},n.resizeCanvas=function(e){this.canvas&&(t.prototype.resizeCanvas.call(this,e),this.resizeGLCanvas())},n.clearCanvas=function(){this.canvas&&(t.prototype.clearCanvas.call(this),this.clearGLCanvas())},n.getCanvasImage=function(){if(!this._gl()||!this.canvas2)return t.prototype.getCanvasImage.call(this);var e=t.prototype.getCanvasImage.call(this);return e&&(e.image=this.canvas2),e},n._gl=function(){if(this.canvas.gl&&this.canvas.gl.wrap)return!0;var t=this.getMap();return t&&(t.getPitch()||t.getBearing())||this.layer&&!!this.layer.options["fragmentShader"]},n.deleteTile=function(e){t.prototype.deleteTile.call(this,e),e&&e.image&&this.disposeImage(e.image),delete e.image},n.onRemove=function(){t.prototype.onRemove.call(this),this.removeGLCanvas()},e}(Jc(jl));function zl(t){var e=this.layer.getTileSize(),n=this.canvas.constructor,r=this.getMap(),i=r.getDevicePixelRatio(),o=ur.createCanvas(e["width"]*i,e["height"]*i,n);o["layer"]=this.layer;var a=this,s=new yt(t["extent2d"].xmin,t["extent2d"].ymax),u=new Vr(r.pointToCoordinate(s),r.pointToCoordinate(s.add(e.width,e.height)),r.getProjection());return this.layer.drawTile(o,{url:t["url"],point:s,center:r.pointToCoordinate(s.add(e["width"]/2,e["height"]/2)),extent:u,z:t["z"],x:t["x"],y:t["y"]},(function(e){e?a.onTileError(o,t):a.onTileLoad(o,t)})),o}Rc.registerRenderer("gl",Bl);var Ul=function(t){function e(){return t.apply(this,arguments)||this}pt(e,t);var n=e.prototype;return n.loadTile=function(){return zl.apply(this,arguments)},e}(jl),Vl=function(t){function e(){return t.apply(this,arguments)||this}pt(e,t);var n=e.prototype;return n.loadTile=function(){return zl.apply(this,arguments)},e}(Bl);Hc.registerRenderer("canvas",Ul),Hc.registerRenderer("gl",Vl);var Hl="undefined"!==typeof Int8Array?new Int8Array([-1,1,0,-1,-1,0,1,1,0,1,-1,0]):[],Gl="\n    attribute vec3 a_position;\n    uniform mat4 transform;\n\n    void main()\n    {\n        gl_Position = transform * vec4(a_position, 1.0);\n    }\n",Wl="\n    precision mediump float;\n    uniform vec3 color;\n    void main()\n    {\n        gl_FragColor = vec4(color, 1.0);\n    }\n";(function(){function t(t,e,n){this.gl=t,this.quadVertices=e||Hl,this.attributes=["a_position",3,Zl(e)],this.debug=n}var e=t.prototype;e.start=function(){var t=this.gl;t.enable(t.STENCIL_TEST),t.stencilMask(255),t.stencilOp(t.KEEP,t.REPLACE,t.REPLACE),t.depthMask(!1),this._save(),this.buffer||(this._createBuffer(),this._createProgram()),t.useProgram(this.program),t.bindBuffer(t.ARRAY_BUFFER,this.buffer),Yc(t,this.program,this.attributes),this.transformLoc||(this.transformLoc=t.getUniformLocation(this.program,"transform")),this.colorLoc||(this.colorLoc=t.getUniformLocation(this.program,"color")),this.debug||t.colorMask(!1,!1,!1,!1)},e.end=function(){var t=this.gl;t.depthMask(!0),this._restore(),this.debug||t.colorMask(!0,!0,!0,!0)},e.draw=function(t){var e=this.gl;e.uniformMatrix4fv(this.transformLoc,!1,t),e.uniform3fv(this.colorLoc,[Math.random(),Math.random(),Math.random()]),e.drawArrays(e.TRIANGLE_STRIP,0,4)},e.remove=function(){var t=this.gl;return this.buffer&&t.deleteBuffer(this.buffer),this.program&&(t.deleteShader(this.program.fragmentShader),t.deleteShader(this.program.vertexShader),t.deleteProgram(this.program)),delete this.transformLoc,delete this.gl,this},e.stencilMask=function(t){return this.gl.stencilMask(t),this},e.stencilFunc=function(t,e,n){return this.ref=e,this.gl.stencilFunc(t,e,n),this},e.stencilOp=function(t,e,n){return this.gl.stencilOp(t,e,n),this},e.resetFunc=function(){return this.ref=1,this.gl.stencilFunc(this.gl.ALWAYS,1,255),this},e._save=function(){var t=this.gl;this._savedProgram=t.program},e._restore=function(){var t=this.gl;t.program=this._savedProgram,t.program&&t.useProgram(t.program)},e._createBuffer=function(){var t=this.gl;if(this.buffer=t.createBuffer(),!this.buffer)throw new Error("Failed to create the buffer object");t.bindBuffer(t.ARRAY_BUFFER,this.buffer),t.bufferData(t.ARRAY_BUFFER,this.quadVertices,t.STATIC_DRAW)},e._createProgram=function(){var t=Zc(this.gl,Gl,Wl),e=t.program,n=t.vertexShader,r=t.fragmentShader;e.vertexShader=n,e.fragmentShader=r,this.program=e}})();function Zl(t){return t instanceof Float32Array?"FLOAT":t instanceof Int16Array?"SHORT":t instanceof Uint16Array?"UNSIGNED_SHORT":t instanceof Int8Array?"BYTE":t instanceof Uint8Array||t instanceof Uint8ClampedArray?"UNSIGNED_BYTE":"FLOAT"}var Yl=function(t){function e(){return t.apply(this,arguments)||this}pt(e,t);var n=e.prototype;return n.checkResources=function(){var t=this._geosToCheck;if(this._resourceChecked||t||(t=this.layer._geoList),!jt(t))return[];for(var e=[],n={},r=t.length-1;r>=0;r--){var i=t[r],o=i._getExternalResources();if(o.length)if(this.resources)for(var a=0;a<o.length;a++){var s=o[a][0];this.resources.isResourceLoaded(o[a])||n[s]||(e.push(o[a]),n[s]=1)}else e.push.apply(e,o)}return this._resourceChecked=!0,delete this._geosToCheck,e},n.render=function(){return this.layer._sortGeometries(),t.prototype.render.apply(this,arguments)},n._addGeoToCheckRes=function(t){t&&(Array.isArray(t)||(t=[t]),this._geosToCheck||(this._geosToCheck=[]),St(this._geosToCheck,t))},n.onGeometryAdd=function(t){this._addGeoToCheckRes(t),Xl(this)},n.onGeometryRemove=function(){Xl(this)},n.onGeometrySymbolChange=function(t){this._addGeoToCheckRes(t.target),Xl(this)},n.onGeometryShapeChange=function(){Xl(this)},n.onGeometryPositionChange=function(){Xl(this)},n.onGeometryZIndexChange=function(){Xl(this)},n.onGeometryShow=function(){Xl(this)},n.onGeometryHide=function(){Xl(this)},n.onGeometryPropertiesChange=function(){Xl(this)},e}(Ii);function Xl(t){t.layer.options["drawImmediate"]&&t.render(),t.setToRedraw()}var ql=new Hr,Kl=[],Ql=new Hr,$l="center",Jl=function(t){function e(){return t.apply(this,arguments)||this}pt(e,t);var n=e.prototype;return n.getImageData=function(){if(!this.layer.options["geometryEvents"]||!this._lastRenderTime||_()-this._lastRenderTime<32)return null;if(!this.context||!this.context.canvas)return null;if(!this._imageData){var t=this.context.canvas,e=t.width,n=t.height;try{this._imageData=this.context.getImageData(0,0,e,n)}catch(r){console.warn("hit detect failed with tainted canvas, some geometries have external resources in another domain:\n",r)}}return this._imageData},n.clearImageData=function(){this._imageData=null,delete this._imageData,this._lastRenderTime=_()},n.checkResources=function(){var e=this,n=t.prototype.checkResources.apply(this,arguments),r=this.layer.getStyle();return r&&(Array.isArray(r)||(r=[r]),r.forEach((function(t){for(var r=Ve(t["symbol"],!0),i=0,o=r.length;i<o;i++)e.resources.isResourceLoaded(r[i])||n.push(r[i])}))),n},n.needToRedraw=function(){var e=this.getMap();return!(!e.isInteracting()||!this.layer.options["enableAltitude"])||!(e.isZooming()&&!e.isRotating()&&!e.getPitch()&&!this._hasPoint&&this.layer.constructor===Cs)&&t.prototype.needToRedraw.call(this)},n.draw=function(){if(this.getMap()){if(!this.layer.isVisible()||this.layer.isEmpty())return this.clearCanvas(),void this.completeRender();this.prepareCanvas(),this.drawGeos(),this.completeRender()}},n.isBlank=function(){return!!this.context&&!this.context.canvas._drawn},n.drawOnInteracting=function(){if(this._geosToDraw){this._updateMapStateCache(),this._updateDisplayExtent();var t=this.getMap(),e=this.layer.getCount(),n=this.mapStateCache.resolution;(t.isZooming()&&t.options["seamlessZoom"]&&void 0!==this._drawnRes&&n>1.5*this._drawnRes&&this._geosToDraw.length<e||t.isMoving()||t.isInteracting())&&(this.prepareToDraw(),this._batchConversionMarkers(this.mapStateCache.glRes),this._onlyHasPoint||this.forEachGeo(this.checkGeo,this),this._drawnRes=n),this._sortByDistanceToCamera(t.cameraPosition);for(var r=0,i=this._geosToDraw.length;r<i;r++){var o=this._geosToDraw[r];o._isCheck||o.isVisible()?(o._paint(this._displayExtent),this._geosToDraw[r]._cPoint=void 0,this._geosToDraw[r]._inCurrentView=void 0):(delete o._cPoint,delete o._inCurrentView)}this.clearImageData()}},n.show=function(){this.layer.forEach((function(t){t._repaint()})),t.prototype.show.apply(this,arguments)},n.forEachGeo=function(t,e){this.layer.forEach(t,e)},n.drawGeos=function(){this._updateMapStateCache(),this._drawnRes=this.mapStateCache.resolution,this._updateDisplayExtent(),this.prepareToDraw(),this._batchConversionMarkers(this.mapStateCache.glRes),this._onlyHasPoint||this.forEachGeo(this.checkGeo,this),this._sortByDistanceToCamera(this.getMap().cameraPosition);for(var t=0,e=this._geosToDraw.length;t<e;t++)this._geosToDraw[t]._paint(),this._geosToDraw[t]._cPoint=void 0,this._geosToDraw[t]._inCurrentView=void 0;this.clearImageData()},n.prepareToDraw=function(){this._hasPoint=!1,this._geosToDraw=[]},n.checkGeo=function(t){if("Point"!==t.type||void 0===this._onlyHasPoint){if(t._isCheck=!1,t&&t.isVisible()&&t.getMap()&&t.getLayer()&&t.getLayer().isCanvasRender()){var e=t._getPainter(),n=!0;if(t._inCurrentView)n=!0;else if(!1===t._inCurrentView)n=!1;else{var r=e.get2DExtent(this.resources,ql);r&&r.intersects(this._displayExtent)||(n=!1)}n&&(e.hasPoint()&&(this._hasPoint=!0),t._isCheck=!0,this._geosToDraw.push(t))}}else t._inCurrentView&&(this._hasPoint=!0,t._isCheck=!0,this._geosToDraw.push(t))},n.onZoomEnd=function(){delete this.canvasExtent2D,t.prototype.onZoomEnd.apply(this,arguments)},n.onRemove=function(){this.forEachGeo((function(t){t.onHide()})),delete this._geosToDraw},n.onGeometryPropertiesChange=function(e){e&&this.layer._styleGeometry(e["target"]),t.prototype.onGeometryPropertiesChange.call(this,e)},n._updateDisplayExtent=function(){var t=this.canvasExtent2D;if(this._maskExtent){if(!this._maskExtent.intersects(t))return void this.completeRender();t=t.intersection(this._maskExtent)}this._displayExtent=t},n.identifyAtPoint=function(t,e){void 0===e&&(e={});var n=this._geosToDraw;return n?this.layer._hitGeos(n,t,e):[]},n._updateMapStateCache=function(){var t=this.getMap(),e=t._pointToContainerPoint(this.southWest)._add(0,-t.height),n=t.getResolution(),r=t.getPitch(),i=t.getBearing(),o=t.getGLScale(),a=t.getGLRes(),s=t.getContainerExtent(),u=t._get2DExtent(),c=t._get2DExtentAtRes(a);return this.mapStateCache={resolution:n,pitch:r,bearing:i,glScale:o,glRes:a,_2DExtent:u,glExtent:c,containerExtent:s,offset:e},this},n._batchConversionMarkers=function(t){if(this._onlyHasPoint=void 0,!this._constructorIsThis())return[];var e=[],n=[],r=[],i={},o=this.layer,a=o.options,s=o.getAltitude?o.getAltitude():0,u=o.isCanvasRender();this._onlyHasPoint=!0;for(var c=0,l=0,f=this.layer._geoList.length;l<f;l++){var h=this.layer._geoList[l],p=h.getType();if("Point"===p){var d=h._painter;d||(d=h._getPainter());var v=d.getRenderPoints($l)[0][0],g=a["enableAltitude"]?h.getAltitude():s;void 0===i[g]&&(i[g]=d.getAltitude()),e[c]=v,r[c]=i[g],n[c]=h,c++}else this._onlyHasPoint=!1}if(0===c)return[];var m=this.getMap(),y=Yt(e,"_pt");y=m._pointsAtResToContainerPoints(e,t,r,y);for(var _=m.getContainerExtent(),b=_.xmax,x=_.ymax,w=_.xmin,E=_.ymin,S={},O=0,C=n.length;O<C;O++){var T=n[O];if(T._cPoint=y[O],T._cPoint){var A=y[O],k=A.x,M=A.y;if(T._inCurrentView=k>=w&&M>=E&&k<=b&&M<=x,!T._inCurrentView){var P=T.getSymbolHash(),R=void 0;R=P?S[P]=S[P]||T._painter.getFixedExtent():T._painter.getFixedExtent(),Ql.set(R.xmin,R.ymin,R.xmax,R.ymax),Ql._add(y[O]),T._inCurrentView=Ql.intersects(_)}T._inCurrentView&&(T.isVisible()&&u||(T._inCurrentView=!1),this._onlyHasPoint&&T._inCurrentView&&(this._hasPoint=!0,T._isCheck=!0,this._geosToDraw.push(T)))}else T._inCurrentView=!1}return y},n._sortByDistanceToCamera=function(t){if(this.layer.options["sortByDistanceToCamera"]&&this._geosToDraw.length){var e=this.getMap(),n=e.distanceToPoint(1e3,0,e.getGLScale()).x,r=n/1e3,i="center";this._geosToDraw.sort((function(e,n){var o=e.getType(),a=n.getType();if("Point"!==o||"Point"!==a)return 0;var s=e._painter,u=n._painter;if(!s||!u)return 0;var c=s.getRenderPoints(i)[0][0],l=u.getRenderPoints(i)[0][0],f=s.getAltitude()*r,h=u.getAltitude()*r;Ys(Kl,c.x,c.y,f);var p=eu(Kl,t);Ys(Kl,l.x,l.y,h);var d=eu(Kl,t);return d-p}))}},n._constructorIsThis=function(){return this.constructor===e},e}(Yl);Cs.registerRenderer("canvas",Jl);var tf=function(t){function e(e){var n;return n=t.call(this)||this,n.map=e,n._handlerQueue=[],n._thisDocVisibilitychange=n._onDocVisibilitychange.bind(dt(dt(n))),n._thisDocDragStart=n._onDocDragStart.bind(dt(dt(n))),n._thisDocDragEnd=n._onDocDragEnd.bind(dt(dt(n))),n}pt(e,t);var n=e.prototype;return n.callInNextFrame=function(t){this._handlerQueue.push(t)},n.executeFrameCallbacks=function(){var t=this._handlerQueue;this._handlerQueue=[];for(var e=0,n=t.length;e<n;e++)t[e]()},n.offsetPlatform=function(t,e){if(!this.map._panels.front)return this;if(!e&&0===t.x&&0===t.y)return this;var n=this.map._panels,r=this._frontCount=n.back.layerDOM.childElementCount,i=this._backCount=n.front.layerDOM.childElementCount,o=this._uiCount=n.front.uiDOM.childElementCount;if(r||i||o){var a=this.map.offsetPlatform();a=t?a.add(t)._round():a.round(),i&&In(n.back,a),(r||o)&&In(n.front,a)}return this},n.domChanged=function(){var t=this.map._panels;if(!t.front)return!1;var e=t.back.layerDOM.childElementCount;if(void 0===this._frontCount||this._frontCount!==e)return!0;var n=t.front.layerDOM.childElementCount;if(void 0===this._backCount||this._backCount!==n)return!0;var r=t.front.uiDOM.childElementCount;return void 0===this._uiCount||this._uiCount!==r},n.resetContainer=function(){if(this.map&&(this.map._resetMapViewPoint(),this.map._panels.front)){var t=new yt(0,0);In(this.map._panels.back,t),In(this.map._panels.front,t)}},n.onZoomEnd=function(){this.resetContainer()},n.onLoad=function(){this._frameLoop()},n._onDocVisibilitychange=function(){"visible"===document.visibilityState&&this.setToRedraw()},n._getWrapPanel=function(){if(!this.map)return null;var t=this.map.getPanels();return t&&t.mapWrapper},n._onDocDragStart=function(){var t=this._getWrapPanel();t&&(t.style.overflow="visible")},n._onDocDragEnd=function(){var t=this._getWrapPanel();t&&(t.style.overflow="hidden")},n._containerIsOffscreen=function(){var t=this.map.getContainer();if(!t||!t.style||"none"===t.style.display)return!0;var e=Math.min(t.clientWidth,t.clientHeight);return e<=0},e}(yr),ef=function(t){function e(e){var n;return n=t.call(this,e)||this,n._containerIsCanvas=!!e._containerDOM.getContext,n._registerEvents(),n._loopTime=0,n}pt(e,t);var n=e.prototype;return n.load=function(){this.initContainer()},n.renderFrame=function(t){var e=this.map;if(!e||!e.options["renderable"])return!1;if(e.options["stopRenderOnOffscreen"]&&this._containerIsOffscreen())return!0;this._updateDomPosition(t),delete this._isViewChanged,e._fireEvent("framestart"),this.updateMapDOM(),e.clearCollisionIndex();var n=this._getAllLayerToRender();this.drawLayers(n,t);var r=this.drawLayerCanvas(n);return r&&(this.drawTops(),this._drawCenterCross()),e._fireEvent("frameend"),this._recordView(),this._mapview=this._getMapView(),delete this._spatialRefChanged,this._fireLayerLoadEvents(),this.executeFrameCallbacks(),this._canvasUpdated=!1,!0},n.updateMapDOM=function(){var t=this.map;if(!t.isZooming()){var e=t._getViewPointFrameOffset();e?t.offsetPlatform(e):this.domChanged()&&this.offsetPlatform(null,!0)}},n.drawLayers=function(t,e){for(var n=this.map,r=n.isInteracting(),i=[],o=[],a=n.options["fpsOnInteracting"]||0,s=0===a?0:1e3/a,u=this.map.options["layerCanvasLimitOnInteracting"],c=t.length,l=n.getBaseLayer(),f=0,h=0;h<c;h++){var p=t[h];if(p.isVisible()){var d=p.isCanvasRender();d&&i.push(p.getId());var v=p._getRenderer();if(v){var g=this._checkLayerRedraw(p);d&&v.isCanvasUpdated()&&(g||o.push(p.getId()),this.setLayerCanvasUpdated());var m=v.__zoomTransformMatrix;if(delete v.__zoomTransformMatrix,g){if(r&&d){if(u>0&&c-1-h>u&&p!==l){p._getRenderer().clearCanvas();continue}f+=this._drawCanvasLayerOnInteracting(p,f,s,e)}else r&&v.drawOnInteracting?(v.prepareRender&&v.prepareRender(),v.checkAndDraw?v.checkAndDraw(v.drawOnInteracting,this._eventParam,e):v.drawOnInteracting(this._eventParam,e)):(v.render(e),d&&m&&v.isLoadingResource()&&(v.__zoomTransformMatrix=m));d&&(o.push(p.getId()),this.setLayerCanvasUpdated())}else d&&r&&(n.isZooming()&&!n.getPitch()?(v.prepareRender(),v.__zoomTransformMatrix=this._zoomMatrix):(n.getPitch()||n.isRotating())&&v.clearCanvas())}}}var y=this._canvasIds||[],_=this._updatedIds||[];if(this._canvasIds=i,this._updatedIds=o,!this.isLayerCanvasUpdated()){var b="---";y.join(b)===i.join(b)&&_.join(b)===o.join(b)||this.setLayerCanvasUpdated()}},n._checkLayerRedraw=function(t){if(this.isSpatialReferenceChanged())return!0;var e=this.map,n=t._getRenderer();return t.isCanvasRender()?n.testIfNeedRedraw():!(!n.needToRedraw||!n.needToRedraw())||(e.isInteracting()||this.isViewChanged())},n._drawCanvasLayerOnInteracting=function(t,e,n,r){var i=this.map,o=t._getRenderer(),a=o.getDrawTime(),s=0===n||n>0&&e+a<=n;if(o.mustRenderOnInteracting&&o.mustRenderOnInteracting())o.render(r);else{if(o.drawOnInteracting&&(t===i.getBaseLayer()||s||i.isZooming()&&t.options["forceRenderOnZooming"]||i.isMoving()&&t.options["forceRenderOnMoving"]||i.isRotating()&&t.options["forceRenderOnRotating"]))return o.prepareRender(),o.prepareCanvas(),o.checkAndDraw?o.checkAndDraw(o.drawOnInteracting,this._eventParam,r):o.drawOnInteracting(this._eventParam,r),a;!i.isZooming()||i.getPitch()||i.isRotating()?(i.getPitch()||i.isRotating())&&o.clearCanvas():(o.prepareRender(),o.__zoomTransformMatrix=this._zoomMatrix)}return o.drawOnInteracting&&!s&&o.onSkipDrawOnInteracting(this._eventParam,r),0},n._fireLayerLoadEvents=function(){if(this._updatedIds&&this._updatedIds.length>0){var t=this.map;this._updatedIds.reverse().forEach((function(e){var n=t.getLayer(e);if(n){var r=n._getRenderer();r&&r.isRenderComplete()&&n.fire("layerload")}}))}},n.isLayerCanvasUpdated=function(){return this._canvasUpdated},n.setLayerCanvasUpdated=function(){this._canvasUpdated=!0},n.drawLayerCanvas=function(t){var e=this.map;if(!e)return!1;if(!this.isLayerCanvasUpdated()&&!this.isViewChanged())return!1;this.canvas||this.createCanvas(),e._fireEvent("renderstart",{context:this.context}),this._updateCanvasSize()||this.clearCanvas();for(var n,r=e.isInteracting(),i=e.options["layerCanvasLimitOnInteracting"],o=t.length,a=[],s=0;s<o;s++)if(t[s].isVisible()&&t[s].isCanvasRender()){var u=t[s]._getRenderer();if(u){var c=this._getLayerImage(t[s]);c&&c["image"]&&(t[s]===e.getBaseLayer()?n=[t[s],c]:a.push([t[s],c]))}}var l=this.canvas.width,f=this.canvas.height;n&&(this._drawLayerCanvasImage(n[0],n[1],l,f),this._drawFog()),o=a.length;for(var h=r&&i>=0&&o>i?o-i:0,p=h;p<o;p++)this._drawLayerCanvasImage(a[p][0],a[p][1],l,f);return e._fireEvent("renderend",{context:this.context}),!0},n.setToRedraw=function(){for(var t=this._getAllLayerToRender(),e=0,n=t.length;e<n;e++){var r=t[e].getRenderer();r&&r.canvas&&r.setToRedraw&&r.setToRedraw()}},n.updateMapSize=function(t){if(t&&!this._containerIsCanvas){var e=t["width"]+"px",n=t["height"]+"px",r=this.map._panels;r.mapWrapper.style.width=e,r.mapWrapper.style.height=n,this._updateCanvasSize()}},n.getMainPanel=function(){return this.map?this._containerIsCanvas?this.map._containerDOM:this.map._panels?this.map._panels.mapWrapper:null:null},n.toDataURL=function(t,e){return this.canvas?this.canvas.toDataURL(t,e):null},n.remove=function(){ht.webgl&&"undefined"!==typeof document&&(kn(document,"visibilitychange",this._thisDocVisibilitychange,this),kn(document,"dragstart",this._thisDocDragStart,this),kn(document,"dragend",this._thisDocDragEnd,this)),this._resizeInterval&&clearInterval(this._resizeInterval),delete this.context,delete this.canvas,delete this.map,delete this._spatialRefChanged,this._cancelFrameLoop()},n.hitDetect=function(t){var e=this.map;if(e&&e.options["hitDetect"]&&!e.isInteracting()){var n=e._getLayers(),r="default",i=e.options["hitDetectLimit"]||0,o=0;t&&t._round&&t._round();for(var a=n.length-1;a>=0;a--){var s=n[a];if(!(!s.options["hitDetect"]||s.isEmpty&&s.isEmpty())){var u=s._getRenderer();if(u&&u.hitDetect&&(!u.isBlank||!u.isBlank())){if("default"!==s.options["cursor"]&&u.hitDetect(t)){r=s.options["cursor"]||"pointer";break}if(o++,i>0&&o>i)break}}}e._trySetCursor(r)}},n._getLayerImage=function(t){var e=t._getRenderer();return e.getCanvasImage?e.getCanvasImage():null},n.initContainer=function(){var t=this.map._panels;function e(e,n,r,i){var o=On("div",n);return r&&(o.style.cssText=r),t[e]=o,i||jn(o),o}var n=this.map._containerDOM;if(!this._containerIsCanvas){n.innerHTML="";var r="position:absolute;top:0px;left:0px;",i=e("mapWrapper","maptalks-wrapper","position:absolute;overflow:hidden;",!0),o=e("allLayers","maptalks-all-layers",r+"padding:0px;margin:0px;z-index:0;overflow:visible;",!0),a=e("backStatic","maptalks-back-static",r+"z-index:0;",!0),s=e("back","maptalks-back",r+"z-index:1;"),u=e("backLayer","maptalks-back-layer",r),c=e("canvasContainer","maptalks-canvas-layer",r+"border:none;z-index:2;"),l=e("frontStatic","maptalks-front-static",r+"z-index:3;",!0),f=e("front","maptalks-front",r+"z-index:4;",!0),h=e("frontLayer","maptalks-front-layer",r+"z-index:0;"),p=e("ui","maptalks-ui",r+"border:none;z-index:1;",!0),d=e("control","maptalks-control","z-index:1",!0);n.appendChild(i),o.appendChild(a),s.appendChild(u),s.layerDOM=u,o.appendChild(s),o.appendChild(c),f.appendChild(h),f.layerDOM=h,f.uiDOM=p,o.appendChild(l),o.appendChild(f),f.appendChild(p),i.appendChild(o),i.appendChild(d),this.createCanvas(),this.resetContainer();var v=this.map._getContainerDomSize();this.updateMapSize(v)}},n.isViewChanged=function(){if(void 0!==this._isViewChanged)return this._isViewChanged;var t=this._mapview,e=this._getMapView();return this._isViewChanged=!t||!Gt(t,e),this._isViewChanged},n._recordView=function(){var t=this.map;!t._onViewChange||t.isInteracting()||t.isAnimating()||Gt(t.getView(),t._getCurrentView())||t._onViewChange(t.getView())},n.isSpatialReferenceChanged=function(){return this._spatialRefChanged},n._getMapView=function(){var t=this.map,e=t._getPrjCenter();return{x:e.x,y:e.y,zoom:t.getZoom(),pitch:t.getPitch(),bearing:t.getBearing(),width:t.width,height:t.height}},n._frameLoop=function(t){var e=this;this.map?(t=t||0,this._frameTimestamp=t,this._resizeCount=0,this.renderFrame(t),this._animationFrame=vt((function(t){e._frameLoop(t)}))):this._cancelFrameLoop()},n._cancelFrameLoop=function(){this._animationFrame&&gt(this._animationFrame)},n._drawLayerCanvasImage=function(t,e,n,r){var i=this.context,o=e["point"].round(),a=this.map.getDevicePixelRatio();1!==a&&o._multi(a);var s=e["image"],u=s.width,c=s.height;if(!(o.x+u<=0||o.y+c<=0)){var l=t.options["opacity"];if(w(l)||(l=1),!(l<=0)){var f=e["opacity"];if(w(f)||(f=1),!(f<=0)){var h=i.globalAlpha;l<1&&(i.globalAlpha*=l),f<1&&(i.globalAlpha*=f),t.options["cssFilter"]&&(i.filter=t.options["cssFilter"]);var p=t.getRenderer(),d=p.__zoomTransformMatrix,v=p.clipCanvas(this.context);d&&(i.save(),i.setTransform.apply(i,d)),i.drawImage(s,0,0,u,c,o.x,o.y,n,r),d&&i.restore(),v&&i.restore(),"none"!==i.filter&&(i.filter="none"),i.globalAlpha=h}}}},n._drawCenterCross=function(){var t=this.map.options["centerCross"];if(t){var e=this.context,n=new yt(this.canvas.width/2,this.canvas.height/2);C(t)?t(e,n):ur.drawCross(this.context,n.x,n.y,2,"#f00")}},n._drawContainerExtent=function(){var t=this.map.options.cascadePitches,e=this.map.height-this.map._getVisualHeight(t[0]),n=this.map.height-this.map._getVisualHeight(t[1]),r=this.map.getContainerExtent(),i=this.context;i.beginPath(),i.moveTo(0,r.ymin),i.lineTo(r.xmax,r.ymin),i.stroke(),i.beginPath(),i.moveTo(0,e),i.lineTo(r.xmax,e),i.stroke(),i.beginPath(),i.moveTo(0,n),i.lineTo(r.xmax,n),i.stroke()},n._drawFog=function(){var t=this.map;if(!(t.getPitch()<=t.options["maxVisualPitch"])&&t.options["fog"]){var e=30,n=t.getDevicePixelRatio(),r=this.context,i=t.getContainerExtent(),o=(t.height-t._getVisualHeight(75))*n;o<0&&(o=0);var a=i.ymin*n,s=Math.ceil(a-o),u=t.options["fogColor"].join(),c=r.createLinearGradient(0,o,0,a+e),l=1-e/(s+e);c.addColorStop(0,"rgba("+u+", 0)"),c.addColorStop(.3,"rgba("+u+", 0.3)"),c.addColorStop(l,"rgba("+u+", 1)"),c.addColorStop(1,"rgba("+u+", 0)"),r.beginPath(),r.fillStyle=c,r.fillRect(0,o,Math.ceil(i.getWidth())*n,Math.ceil(s+e))}},n._getAllLayerToRender=function(){return this.map._getLayers()},n.clearCanvas=function(){this.canvas&&ur.clearRect(this.context,0,0,this.canvas.width,this.canvas.height)},n._updateCanvasSize=function(){if(!this.canvas||this._containerIsCanvas)return!1;var t=this.map,e=t.getSize(),n=this.canvas,r=t.getDevicePixelRatio(),i=Jt(e,r),o=i.width,a=i.height,s=i.cssWidth,u=i.cssHeight;return!n.style||n.style.width===s&&n.style.height===u||(n.style.width=s,n.style.height=u),(o!==n.width||a!==n.height)&&(n.height=a,n.width=o,this.topLayer.width=n.width,this.topLayer.height=n.height,!0)},n.createCanvas=function(){this.topLayer=On("canvas"),this.topCtx=this.topLayer.getContext("2d"),this._containerIsCanvas?this.canvas=this.map._containerDOM:(this.canvas=On("canvas"),this._updateCanvasSize(),this.map._panels.canvasContainer.appendChild(this.canvas)),this.context=this.canvas.getContext("2d")},n._updateDomPosition=function(t){void 0===this._checkPositionTime&&(this._checkPositionTime=-1/0);var e=Math.abs(t-this._checkPositionTime);return e>=500&&(Ln(this.map._containerDOM),this._checkPositionTime=Math.min(t,this._checkPositionTime)),this},n._checkSize=function(){this.map&&this.map.checkSize()},n._setCheckSizeInterval=function(t){var e=this;ht.resizeObserver?(this._resizeObserver&&this._resizeObserver.disconnect(),this.map&&(this._resizeObserver=new ResizeObserver((function(t){!e.map||e.map.isRemoved()?e._resizeObserver.disconnect():t.length&&(e.map._containerDomContentRect=t[0].contentRect,e._checkSize(t[0].contentRect),e._resizeCount=e._resizeCount||0,e.renderFrame((e._frameTimestamp||0)+ ++e._resizeCount/100))})),this._resizeObserver.observe(this.map._containerDOM))):(clearInterval(this._resizeInterval),this._checkSizeInterval=t,this._resizeInterval=setInterval((function(){!e.map||e.map.isRemoved()?clearInterval(e._resizeInterval):e._checkSize()}),this._checkSizeInterval))},n._registerEvents=function(){var t=this,e=this.map;e.options["checkSize"]&&!R&&"undefined"!==typeof window&&this._setCheckSizeInterval(e.options["checkSizeInterval"]),ht.mobile||e.on("_mousemove",this._onMapMouseMove,this),e.on("_dragrotatestart _dragrotating _dragrotateend _movestart _moving _moveend _zoomstart",(function(e){t._eventParam=e})),e.on("_zooming",(function(n){e.getPitch()||(t._zoomMatrix=n["matrix"]["container"]),t._eventParam=n})),e.on("_zoomend",(function(e){t._eventParam=e,delete t._zoomMatrix})),e.on("_spatialreferencechange",(function(){t._spatialRefChanged=!0})),ht.webgl&&"undefined"!==typeof document&&(An(document,"visibilitychange",this._thisDocVisibilitychange,this),An(document,"dragstart",this._thisDocDragStart,this),An(document,"dragend",this._thisDocDragEnd,this)),ht.addDPRListening&&ht.addDPRListening(this.map)},n._onMapMouseMove=function(t){var e=this,n=this.map;!n.isInteracting()&&n.options["hitDetect"]&&(this._hitDetectFrame&&gt(this._hitDetectFrame),this._hitDetectFrame=vt((function(){e.hitDetect(t["containerPoint"])})))},n._getCanvasLayers=function(){return this.map._getLayers((function(t){return t.isCanvasRender()}))},n.addTopElement=function(t){this._tops||(this._tops=[]),this._tops.push(t)},n.removeTopElement=function(t){if(this._tops){var e=this._tops.indexOf(t);e>=0&&this._tops.splice(e,1)}},n.getTopElements=function(){return this._tops||[]},n.drawTops=function(){this.topCtx.clearRect(0,0,this.topLayer.width,this.topLayer.height),this.map.fire("drawtopstart"),this.map.fire("drawtops");for(var t=this.getTopElements(),e=!1,n=0;n<t.length;n++)t[n].render(this.topCtx)&&(e=!0);e&&this.context.drawImage(this.topLayer,0,0),this.map.fire("drawtopsend")},e}(tf);ha.registerRenderer("canvas",ef),ha.mergeOptions({fog:!1,fogColor:[233,233,233]});var nf={_getRenderPoints:function(){return[[this._getCenter2DPoint(this.getMap().getGLRes())],null]}};Na.include(nf),ts.include(nf),$a.include(nf),rs.include(nf),es.include({_getRenderPoints:function(t){var e=this.getMap(),n=e.getGLRes();if("vertex"===t){for(var r=this._trimRing(this.getShell()),i=[],o=0,a=r.length;o<a;o++)i.push(e.coordToPointAtRes(r[o],n));return[i,null]}var s=e.coordToPointAtRes(this.getCenter(),n);return[[s],null]}});var rf={_getRenderPoints:function(t){var e,n=this.getMap(),r=n.getGLRes(),i=null;if("point"===t)e=this._getPath2DPoints(this._getPrjCoordinates(),!1,r),e&&e.length>0&&Array.isArray(e[0])&&(e=e[0].concat(e[1]));else if("vertex"===t)if(e=this._getPath2DPoints(this._getPrjCoordinates(),!1,r),i=[],e&&e.length>0&&Array.isArray(e[0])){for(var o=0,a=e.length;o<a;o++)for(var s=0,u=e[o].length;s<u;s++)0===s?i.push([e[o][s],e[o][s+1]]):i.push([e[o][s-1],e[o][s]]);e=e[0].concat(e[1])}else for(var c=0,l=e.length;c<l;c++)0===c?i.push([e[c],e[c+1]]):i.push([e[c-1],e[c]]);else if("line"===t){e=[],i=[];var f=this._getPath2DPoints(this._getPrjCoordinates(),!1,r),h=f.length>0&&Array.isArray(f[0]);if(h)for(var p,d=1,v=f.length;d<v;d++){p=f[d],this instanceof Ra&&p.length>0&&!p[0].equals(p[p.length-1])&&p.push(p[0]);for(var g=1,m=p.length;g<m;g++)e.push(p[g].add(p[g-1])._multi(.5)),i.push([p[g-1],p[g]])}else{this instanceof Ra&&f.length>0&&!f[0].equals(f[f.length-1])&&f.push(f[0]);for(var y=1,_=f.length;y<_;y++)e.push(f[y].add(f[y-1])._multi(.5)),i.push([f[y-1],f[y]])}}else if("vertex-first"===t){var b=this._getPrjCoordinates(),x=b.length,w=x?n._prjToPointAtRes(b[0],r):null;e=x?[w]:[],i=x?[[w,b[1]?n._prjToPointAtRes(b[1],r):w]]:[]}else if("vertex-last"===t){var E=this._getPrjCoordinates(),S=E.length,O=S?n._prjToPointAtRes(E[S-1],r):null;e=S?[O]:[];var C=S>1?S-2:S-1;i=S?[[E[C]?n._prjToPointAtRes(E[C],r):O,O]]:[]}else{var T=this.getCenter();if(T){var A=this._getProjection().project(T);e=[n._prjToPointAtRes(A,r)]}else e=[]}return[e,i]}};Ba.include(rf),Ra.include(rf);var of={within:!1,center:[0,0]};function af(t){if(t&&t._containerBbox){of.within=!1;var e=t._containerBbox,n=e.minx,r=e.miny,i=e.maxx,o=e.maxy,a=Math.abs(i-n),s=Math.abs(o-r);a<=1&&s<=1&&(of.within=!0,of.center[0]=(n+i)/2,of.center[1]=(r+o)/2),delete t._containerBbox}else of.within=!1;return of}aa.include({_redrawWhenPitch:function(){return!1},_redrawWhenRotate:function(){return!1}});var sf={_redrawWhenPitch:function(){return!0},_redrawWhenRotate:function(){return this instanceof ts||this instanceof rs},_paintAsPath:function(){var t=this.getMap(),e=this.getAltitude();return e>0||t.getPitch()||this instanceof ts&&t.getBearing()},_getPaintParams:function(){var t=this.getMap();if(this._paintAsPath())return Ra.prototype._getPaintParams.call(this,!0);var e=this._getPrjCoordinates(),n=t._prjToPointAtRes(e,t.getGLRes()),r=this._getRenderSize(n);return[n].concat(r)},_paintOn:function(){return this._paintAsPath()?ur.polygon.apply(ur,arguments):ur.ellipse.apply(ur,arguments)},_getRenderSize:function(t){var e=this.getMap(),n=e.getGLRes(),r=this._getPrjExtent(),i=e._prjToPointAtRes(r.getMin(),n),o=e._prjToPointAtRes(r.getMax(),n);return[Math.abs(o.x-i.x)/2,Math.abs(o.y-t.y),Math.abs(t.y-i.y)]}};ts.include(sf),$a.include(sf),es.include({_getPaintParams:function(){var t=this.getMap(),e=this._getPrjShell(),n=this._getPath2DPoints(e,!1,t.getGLRes());return[n]},_paintOn:ur.polygon}),rs.include(sf,{_redrawWhenPitch:function(){return!0},_getPaintParams:function(){if(this._paintAsPath())return Ra.prototype._getPaintParams.call(this,!0);var t=this.getMap(),e=t._prjToPointAtRes(this._getPrjCoordinates(),t.getGLRes()),n=this._getRenderSize(e);return[e,n[0],[this.getStartAngle(),this.getEndAngle()]]},_paintOn:function(){if(this._paintAsPath())return ur.polygon.apply(ur,arguments);var t=this.getMap().getBearing(),e=arguments;return t&&(e[3]=e[3].slice(0),e[3][0]+=t,e[3][1]+=t),ur.sector.apply(ur,e)}}),Ma.include({_paintAsPath:function(){return!0}}),Ba.include({arrowStyles:{classic:[3,4]},_getArrowShape:function(t,e,n,r,i){if(!t||!e||t.equals(e))return null;i||(i=0);var o,a=n*r[0],s=n*r[1]+i,u=a/2+i;o=e.nextCtrlPoint||e.prevCtrlPoint?e.prevCtrlPoint?e.sub(new yt(e.prevCtrlPoint)):e.sub(new yt(e.nextCtrlPoint)):e.sub(t),o._unit();var c=e.sub(o.multi(s));o._perp();var l=c.add(o.multi(u));o._multi(-1);var f=c.add(o.multi(u));return[l,e,f,l]},_getPaintParams:function(){var t=this._getPrjCoordinates(),e=this._getPath2DPoints(t,!1,this.getMap().getGLRes());return[e]},_paintOn:function(t,e,n,r,i){var o=af(this._painter);o.within?ur.pixelRect(t,o.center,n,r):this.options["smoothness"]?ur.paintSmoothLine(t,e,n,this.options["smoothness"],!1,this._animIdx,this._animTailRatio):ur.path(t,e,n,null,i),this._paintArrow(t,e,n)},_getArrowPlacement:function(){return this.options["arrowPlacement"]},_getArrowStyle:function(){var t=this.options["arrowStyle"];return t?Array.isArray(t)?t:this.arrowStyles[t]:null},_getArrows:function(t,e,n){var r=this._getArrowStyle();if(!r||t.length<2)return[];for(var i=t.length>0&&Array.isArray(t[0]),o=i?t:[t],a=this._getArrowPlacement(),s=[],u=this.getMap(),c=u.coordToContainerPoint(this.getFirstCoordinate()),l=u.coordToContainerPoint(this.getLastCoordinate()),f=o.length-1;f>=0;f--){if("vertex-first"===a||"vertex-firstlast"===a&&o[f][0].closeTo(c,.01)){var h=this._getArrowShape(o[f][1],o[f][0],e,r,n);h&&s.push(h)}if("vertex-last"===a||"vertex-firstlast"===a&&o[f][o[f].length-1].closeTo(l,.01)){var p=this._getArrowShape(o[f][o[f].length-2],o[f][o[f].length-1],e,r,n);p&&s.push(p)}else"point"===a&&this._getArrowPoints(s,o[f],e,r,n)}return s},_getArrowPoints:function(t,e,n,r,i){for(var o=0,a=e.length-1;o<a;o++){var s=this._getArrowShape(e[o],e[o+1],n,r,i);s&&t.push(s)}},_paintArrow:function(t,e,n){var r=this._getInternalSymbol()["lineWidth"];(!w(r)||r<3)&&(r=3);var i=this._getArrows(e,r);if(i.length){t.setLineDash&&t.setLineDash([]);for(var o=i.length-1;o>=0;o--)t.fillStyle=t.strokeStyle,ur.polygon(t,i[o],n,n)}}}),Ra.include({_getPaintParams:function(t){var e=this.getMap().getGLRes(),n=this._getPrjShell(),r=this._getPath2DPoints(n,t,e),i=r.length>0&&Array.isArray(r[0]);i&&(r=[[r[0]],[r[1]]]);var o=this._getPrjHoles(),a=[];if(o&&o.length>0){for(var s=this._simplified,u=0;u<o.length;u++){var c=this._getPath2DPoints(o[u],t,e);Array.isArray(c)&&i?Array.isArray(c[0])?(r[0].push(c[0]),r[1].push(c[1])):r[0].push(c):a.push(c)}s&&(this._simplified=s)}return i||(r=[r],St(r,a)),[r]},_paintOn:function(t,e,n,r,i){var o=af(this._painter);o.within?ur.pixelRect(t,o.center,n,r):ur.polygon(t,e,n,r,i,this.options["smoothness"])}}),ha.VERSION=l}).call(this,n("Q2Ig"))},GXnB:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Metadata=void 0;var r=n("xfSm"),i=function(){function t(t,e){this.key=t,this.value=e}return t.prototype.toString=function(){return this.key===r.NAMED_TAG?"named: "+this.value.toString()+" ":"tagged: { key:"+this.key.toString()+", value: "+this.value+" }"},t}();e.Metadata=i},GXvd:function(t,e,n){var r=n("dG/n");r("species")},GarU:function(t,e){t.exports=function(t,e,n){if(!(t instanceof e))throw TypeError("Incorrect "+(n?n+" ":"")+"invocation");return t}},GoyQ:function(t,e){function n(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}t.exports=n},Gytx:function(t,e){t.exports=function(t,e,n,r){var i=n?n.call(r,t,e):void 0;if(void 0!==i)return!!i;if(t===e)return!0;if("object"!==typeof t||!t||"object"!==typeof e||!e)return!1;var o=Object.keys(t),a=Object.keys(e);if(o.length!==a.length)return!1;for(var s=Object.prototype.hasOwnProperty.bind(e),u=0;u<o.length;u++){var c=o[u];if(!s(c))return!1;var l=t[c],f=e[c];if(i=n?n.call(r,l,f,c):void 0,!1===i||void 0===i&&l!==f)return!1}return!0}},"H+LF":function(t,e,n){"use strict";var r=n("bWFh"),i=n("rKzb");r("WeakSet",(function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}}),i)},H1Ra:function(t,e,n){"use strict";var r=n("q1tI"),i=n.n(r),o=function(){var t=/(?:^|\s)lang(?:uage)?-([\w-]+)(?=\s|$)/i,e=0,n={},r={util:{encode:function t(e){return e instanceof i?new i(e.type,t(e.content),e.alias):Array.isArray(e)?e.map(t):e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(t){return Object.prototype.toString.call(t).slice(8,-1)},objId:function(t){return t["__id"]||Object.defineProperty(t,"__id",{value:++e}),t["__id"]},clone:function t(e,n){var i,o;switch(n=n||{},r.util.type(e)){case"Object":if(o=r.util.objId(e),n[o])return n[o];for(var a in i={},n[o]=i,e)e.hasOwnProperty(a)&&(i[a]=t(e[a],n));return i;case"Array":return o=r.util.objId(e),n[o]?n[o]:(i=[],n[o]=i,e.forEach((function(e,r){i[r]=t(e,n)})),i);default:return e}},getLanguage:function(e){while(e){var n=t.exec(e.className);if(n)return n[1].toLowerCase();e=e.parentElement}return"none"},setLanguage:function(e,n){e.className=e.className.replace(RegExp(t,"gi"),""),e.classList.add("language-"+n)},isActive:function(t,e,n){var r="no-"+e;while(t){var i=t.classList;if(i.contains(e))return!0;if(i.contains(r))return!1;t=t.parentElement}return!!n}},languages:{plain:n,plaintext:n,text:n,txt:n,extend:function(t,e){var n=r.util.clone(r.languages[t]);for(var i in e)n[i]=e[i];return n},insertBefore:function(t,e,n,i){i=i||r.languages;var o=i[t],a={};for(var s in o)if(o.hasOwnProperty(s)){if(s==e)for(var u in n)n.hasOwnProperty(u)&&(a[u]=n[u]);n.hasOwnProperty(s)||(a[s]=o[s])}var c=i[t];return i[t]=a,r.languages.DFS(r.languages,(function(e,n){n===c&&e!=t&&(this[e]=a)})),a},DFS:function t(e,n,i,o){o=o||{};var a=r.util.objId;for(var s in e)if(e.hasOwnProperty(s)){n.call(e,s,e[s],i||s);var u=e[s],c=r.util.type(u);"Object"!==c||o[a(u)]?"Array"!==c||o[a(u)]||(o[a(u)]=!0,t(u,n,s,o)):(o[a(u)]=!0,t(u,n,null,o))}}},plugins:{},highlight:function(t,e,n){var o={code:t,grammar:e,language:n};return r.hooks.run("before-tokenize",o),o.tokens=r.tokenize(o.code,o.grammar),r.hooks.run("after-tokenize",o),i.stringify(r.util.encode(o.tokens),o.language)},tokenize:function(t,e){var n=e.rest;if(n){for(var r in n)e[r]=n[r];delete e.rest}var i=new s;return u(i,i.head,t),a(t,i,e,i.head,0),l(i)},hooks:{all:{},add:function(t,e){var n=r.hooks.all;n[t]=n[t]||[],n[t].push(e)},run:function(t,e){var n=r.hooks.all[t];if(n&&n.length)for(var i,o=0;i=n[o++];)i(e)}},Token:i};function i(t,e,n,r){this.type=t,this.content=e,this.alias=n,this.length=0|(r||"").length}function o(t,e,n,r){t.lastIndex=e;var i=t.exec(n);if(i&&r&&i[1]){var o=i[1].length;i.index+=o,i[0]=i[0].slice(o)}return i}function a(t,e,n,s,l,f){for(var h in n)if(n.hasOwnProperty(h)&&n[h]){var p=n[h];p=Array.isArray(p)?p:[p];for(var d=0;d<p.length;++d){if(f&&f.cause==h+","+d)return;var v=p[d],g=v.inside,m=!!v.lookbehind,y=!!v.greedy,_=v.alias;if(y&&!v.pattern.global){var b=v.pattern.toString().match(/[imsuy]*$/)[0];v.pattern=RegExp(v.pattern.source,b+"g")}for(var x=v.pattern||v,w=s.next,E=l;w!==e.tail;E+=w.value.length,w=w.next){if(f&&E>=f.reach)break;var S=w.value;if(e.length>t.length)return;if(!(S instanceof i)){var O,C=1;if(y){if(O=o(x,E,t,m),!O||O.index>=t.length)break;var T=O.index,A=O.index+O[0].length,k=E;k+=w.value.length;while(T>=k)w=w.next,k+=w.value.length;if(k-=w.value.length,E=k,w.value instanceof i)continue;for(var M=w;M!==e.tail&&(k<A||"string"===typeof M.value);M=M.next)C++,k+=M.value.length;C--,S=t.slice(E,k),O.index-=E}else if(O=o(x,0,S,m),!O)continue;T=O.index;var P=O[0],R=S.slice(0,T),j=S.slice(T+P.length),I=E+S.length;f&&I>f.reach&&(f.reach=I);var L=w.prev;R&&(L=u(e,L,R),E+=R.length),c(e,L,C);var N=new i(h,g?r.tokenize(P,g):P,_,P);if(w=u(e,L,N),j&&u(e,w,j),C>1){var D={cause:h+","+d,reach:I};a(t,e,n,w.prev,E,D),f&&D.reach>f.reach&&(f.reach=D.reach)}}}}}}function s(){var t={value:null,prev:null,next:null},e={value:null,prev:t,next:null};t.next=e,this.head=t,this.tail=e,this.length=0}function u(t,e,n){var r=e.next,i={value:n,prev:e,next:r};return e.next=i,r.prev=i,t.length++,i}function c(t,e,n){for(var r=e.next,i=0;i<n&&r!==t.tail;i++)r=r.next;e.next=r,r.prev=e,t.length-=i}function l(t){var e=[],n=t.head.next;while(n!==t.tail)e.push(n.value),n=n.next;return e}return i.stringify=function t(e,n){if("string"==typeof e)return e;if(Array.isArray(e)){var i="";return e.forEach((function(e){i+=t(e,n)})),i}var o={type:e.type,content:t(e.content,n),tag:"span",classes:["token",e.type],attributes:{},language:n},a=e.alias;a&&(Array.isArray(a)?Array.prototype.push.apply(o.classes,a):o.classes.push(a)),r.hooks.run("wrap",o);var s="";for(var u in o.attributes)s+=" "+u+'="'+(o.attributes[u]||"").replace(/"/g,"&quot;")+'"';return"<"+o.tag+' class="'+o.classes.join(" ")+'"'+s+">"+o.content+"</"+o.tag+">"},r}(),a=o;o["default"]=o,a.languages.markup={comment:{pattern:/<!--(?:(?!<!--)[\s\S])*?-->/,greedy:!0},prolog:{pattern:/<\?[\s\S]+?\?>/,greedy:!0},doctype:{pattern:/<!DOCTYPE(?:[^>"'[\]]|"[^"]*"|'[^']*')+(?:\[(?:[^<"'\]]|"[^"]*"|'[^']*'|<(?!!--)|<!--(?:[^-]|-(?!->))*-->)*\]\s*)?>/i,greedy:!0,inside:{"internal-subset":{pattern:/(^[^\[]*\[)[\s\S]+(?=\]>$)/,lookbehind:!0,greedy:!0,inside:null},string:{pattern:/"[^"]*"|'[^']*'/,greedy:!0},punctuation:/^<!|>$|[[\]]/,"doctype-tag":/^DOCTYPE/i,name:/[^\s<>'"]+/}},cdata:{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,greedy:!0},tag:{pattern:/<\/?(?!\d)[^\s>\/=$<%]+(?:\s(?:\s*[^\s>\/=]+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))|(?=[\s/>])))+)?\s*\/?>/,greedy:!0,inside:{tag:{pattern:/^<\/?[^\s>\/]+/,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"special-attr":[],"attr-value":{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/,inside:{punctuation:[{pattern:/^=/,alias:"attr-equals"},/"|'/]}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:[{pattern:/&[\da-z]{1,8};/i,alias:"named-entity"},/&#x?[\da-f]{1,8};/i]},a.languages.markup["tag"].inside["attr-value"].inside["entity"]=a.languages.markup["entity"],a.languages.markup["doctype"].inside["internal-subset"].inside=a.languages.markup,a.hooks.add("wrap",(function(t){"entity"===t.type&&(t.attributes["title"]=t.content.replace(/&amp;/,"&"))})),Object.defineProperty(a.languages.markup.tag,"addInlined",{value:function(t,e){var n={};n["language-"+e]={pattern:/(^<!\[CDATA\[)[\s\S]+?(?=\]\]>$)/i,lookbehind:!0,inside:a.languages[e]},n["cdata"]=/^<!\[CDATA\[|\]\]>$/i;var r={"included-cdata":{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,inside:n}};r["language-"+e]={pattern:/[\s\S]+/,inside:a.languages[e]};var i={};i[t]={pattern:RegExp(/(<__[^>]*>)(?:<!\[CDATA\[(?:[^\]]|\](?!\]>))*\]\]>|(?!<!\[CDATA\[)[\s\S])*?(?=<\/__>)/.source.replace(/__/g,(function(){return t})),"i"),lookbehind:!0,greedy:!0,inside:r},a.languages.insertBefore("markup","cdata",i)}}),Object.defineProperty(a.languages.markup.tag,"addAttribute",{value:function(t,e){a.languages.markup.tag.inside["special-attr"].push({pattern:RegExp(/(^|["'\s])/.source+"(?:"+t+")"+/\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))/.source,"i"),lookbehind:!0,inside:{"attr-name":/^[^\s=]+/,"attr-value":{pattern:/=[\s\S]+/,inside:{value:{pattern:/(^=\s*(["']|(?!["'])))\S[\s\S]*(?=\2$)/,lookbehind:!0,alias:[e,"language-"+e],inside:a.languages[e]},punctuation:[{pattern:/^=/,alias:"attr-equals"},/"|'/]}}}})}}),a.languages.html=a.languages.markup,a.languages.mathml=a.languages.markup,a.languages.svg=a.languages.markup,a.languages.xml=a.languages.extend("markup",{}),a.languages.ssml=a.languages.xml,a.languages.atom=a.languages.xml,a.languages.rss=a.languages.xml,function(t){var e="\\b(?:BASH|BASHOPTS|BASH_ALIASES|BASH_ARGC|BASH_ARGV|BASH_CMDS|BASH_COMPLETION_COMPAT_DIR|BASH_LINENO|BASH_REMATCH|BASH_SOURCE|BASH_VERSINFO|BASH_VERSION|COLORTERM|COLUMNS|COMP_WORDBREAKS|DBUS_SESSION_BUS_ADDRESS|DEFAULTS_PATH|DESKTOP_SESSION|DIRSTACK|DISPLAY|EUID|GDMSESSION|GDM_LANG|GNOME_KEYRING_CONTROL|GNOME_KEYRING_PID|GPG_AGENT_INFO|GROUPS|HISTCONTROL|HISTFILE|HISTFILESIZE|HISTSIZE|HOME|HOSTNAME|HOSTTYPE|IFS|INSTANCE|JOB|LANG|LANGUAGE|LC_ADDRESS|LC_ALL|LC_IDENTIFICATION|LC_MEASUREMENT|LC_MONETARY|LC_NAME|LC_NUMERIC|LC_PAPER|LC_TELEPHONE|LC_TIME|LESSCLOSE|LESSOPEN|LINES|LOGNAME|LS_COLORS|MACHTYPE|MAILCHECK|MANDATORY_PATH|NO_AT_BRIDGE|OLDPWD|OPTERR|OPTIND|ORBIT_SOCKETDIR|OSTYPE|PAPERSIZE|PATH|PIPESTATUS|PPID|PS1|PS2|PS3|PS4|PWD|RANDOM|REPLY|SECONDS|SELINUX_INIT|SESSION|SESSIONTYPE|SESSION_MANAGER|SHELL|SHELLOPTS|SHLVL|SSH_AUTH_SOCK|TERM|UID|UPSTART_EVENTS|UPSTART_INSTANCE|UPSTART_JOB|UPSTART_SESSION|USER|WINDOWID|XAUTHORITY|XDG_CONFIG_DIRS|XDG_CURRENT_DESKTOP|XDG_DATA_DIRS|XDG_GREETER_DATA_DIR|XDG_MENU_PREFIX|XDG_RUNTIME_DIR|XDG_SEAT|XDG_SEAT_PATH|XDG_SESSION_DESKTOP|XDG_SESSION_ID|XDG_SESSION_PATH|XDG_SESSION_TYPE|XDG_VTNR|XMODIFIERS)\\b",n={pattern:/(^(["']?)\w+\2)[ \t]+\S.*/,lookbehind:!0,alias:"punctuation",inside:null},r={bash:n,environment:{pattern:RegExp("\\$"+e),alias:"constant"},variable:[{pattern:/\$?\(\([\s\S]+?\)\)/,greedy:!0,inside:{variable:[{pattern:/(^\$\(\([\s\S]+)\)\)/,lookbehind:!0},/^\$\(\(/],number:/\b0x[\dA-Fa-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:[Ee]-?\d+)?/,operator:/--|\+\+|\*\*=?|<<=?|>>=?|&&|\|\||[=!+\-*/%<>^&|]=?|[?~:]/,punctuation:/\(\(?|\)\)?|,|;/}},{pattern:/\$\((?:\([^)]+\)|[^()])+\)|`[^`]+`/,greedy:!0,inside:{variable:/^\$\(|^`|\)$|`$/}},{pattern:/\$\{[^}]+\}/,greedy:!0,inside:{operator:/:[-=?+]?|[!\/]|##?|%%?|\^\^?|,,?/,punctuation:/[\[\]]/,environment:{pattern:RegExp("(\\{)"+e),lookbehind:!0,alias:"constant"}}},/\$(?:\w+|[#?*!@$])/],entity:/\\(?:[abceEfnrtv\\"]|O?[0-7]{1,3}|U[0-9a-fA-F]{8}|u[0-9a-fA-F]{4}|x[0-9a-fA-F]{1,2})/};t.languages.bash={shebang:{pattern:/^#!\s*\/.*/,alias:"important"},comment:{pattern:/(^|[^"{\\$])#.*/,lookbehind:!0},"function-name":[{pattern:/(\bfunction\s+)[\w-]+(?=(?:\s*\(?:\s*\))?\s*\{)/,lookbehind:!0,alias:"function"},{pattern:/\b[\w-]+(?=\s*\(\s*\)\s*\{)/,alias:"function"}],"for-or-select":{pattern:/(\b(?:for|select)\s+)\w+(?=\s+in\s)/,alias:"variable",lookbehind:!0},"assign-left":{pattern:/(^|[\s;|&]|[<>]\()\w+(?=\+?=)/,inside:{environment:{pattern:RegExp("(^|[\\s;|&]|[<>]\\()"+e),lookbehind:!0,alias:"constant"}},alias:"variable",lookbehind:!0},string:[{pattern:/((?:^|[^<])<<-?\s*)(\w+)\s[\s\S]*?(?:\r?\n|\r)\2/,lookbehind:!0,greedy:!0,inside:r},{pattern:/((?:^|[^<])<<-?\s*)(["'])(\w+)\2\s[\s\S]*?(?:\r?\n|\r)\3/,lookbehind:!0,greedy:!0,inside:{bash:n}},{pattern:/(^|[^\\](?:\\\\)*)"(?:\\[\s\S]|\$\([^)]+\)|\$(?!\()|`[^`]+`|[^"\\`$])*"/,lookbehind:!0,greedy:!0,inside:r},{pattern:/(^|[^$\\])'[^']*'/,lookbehind:!0,greedy:!0},{pattern:/\$'(?:[^'\\]|\\[\s\S])*'/,greedy:!0,inside:{entity:r.entity}}],environment:{pattern:RegExp("\\$?"+e),alias:"constant"},variable:r.variable,function:{pattern:/(^|[\s;|&]|[<>]\()(?:add|apropos|apt|apt-cache|apt-get|aptitude|aspell|automysqlbackup|awk|basename|bash|bc|bconsole|bg|bzip2|cal|cat|cfdisk|chgrp|chkconfig|chmod|chown|chroot|cksum|clear|cmp|column|comm|composer|cp|cron|crontab|csplit|curl|cut|date|dc|dd|ddrescue|debootstrap|df|diff|diff3|dig|dir|dircolors|dirname|dirs|dmesg|docker|docker-compose|du|egrep|eject|env|ethtool|expand|expect|expr|fdformat|fdisk|fg|fgrep|file|find|fmt|fold|format|free|fsck|ftp|fuser|gawk|git|gparted|grep|groupadd|groupdel|groupmod|groups|grub-mkconfig|gzip|halt|head|hg|history|host|hostname|htop|iconv|id|ifconfig|ifdown|ifup|import|install|ip|jobs|join|kill|killall|less|link|ln|locate|logname|logrotate|look|lpc|lpr|lprint|lprintd|lprintq|lprm|ls|lsof|lynx|make|man|mc|mdadm|mkconfig|mkdir|mke2fs|mkfifo|mkfs|mkisofs|mknod|mkswap|mmv|more|most|mount|mtools|mtr|mutt|mv|nano|nc|netstat|nice|nl|node|nohup|notify-send|npm|nslookup|op|open|parted|passwd|paste|pathchk|ping|pkill|pnpm|podman|podman-compose|popd|pr|printcap|printenv|ps|pushd|pv|quota|quotacheck|quotactl|ram|rar|rcp|reboot|remsync|rename|renice|rev|rm|rmdir|rpm|rsync|scp|screen|sdiff|sed|sendmail|seq|service|sftp|sh|shellcheck|shuf|shutdown|sleep|slocate|sort|split|ssh|stat|strace|su|sudo|sum|suspend|swapon|sync|tac|tail|tar|tee|time|timeout|top|touch|tr|traceroute|tsort|tty|umount|uname|unexpand|uniq|units|unrar|unshar|unzip|update-grub|uptime|useradd|userdel|usermod|users|uudecode|uuencode|v|vcpkg|vdir|vi|vim|virsh|vmstat|wait|watch|wc|wget|whereis|which|who|whoami|write|xargs|xdg-open|yarn|yes|zenity|zip|zsh|zypper)(?=$|[)\s;|&])/,lookbehind:!0},keyword:{pattern:/(^|[\s;|&]|[<>]\()(?:case|do|done|elif|else|esac|fi|for|function|if|in|select|then|until|while)(?=$|[)\s;|&])/,lookbehind:!0},builtin:{pattern:/(^|[\s;|&]|[<>]\()(?:\.|:|alias|bind|break|builtin|caller|cd|command|continue|declare|echo|enable|eval|exec|exit|export|getopts|hash|help|let|local|logout|mapfile|printf|pwd|read|readarray|readonly|return|set|shift|shopt|source|test|times|trap|type|typeset|ulimit|umask|unalias|unset)(?=$|[)\s;|&])/,lookbehind:!0,alias:"class-name"},boolean:{pattern:/(^|[\s;|&]|[<>]\()(?:false|true)(?=$|[)\s;|&])/,lookbehind:!0},"file-descriptor":{pattern:/\B&\d\b/,alias:"important"},operator:{pattern:/\d?<>|>\||\+=|=[=~]?|!=?|<<[<-]?|[&\d]?>>|\d[<>]&?|[<>][&=]?|&[>&]?|\|[&|]?/,inside:{"file-descriptor":{pattern:/^\d/,alias:"important"}}},punctuation:/\$?\(\(?|\)\)?|\.\.|[{}[\];\\]/,number:{pattern:/(^|\s)(?:[1-9]\d*|0)(?:[.,]\d+)?\b/,lookbehind:!0}},n.inside=t.languages.bash;for(var i=["comment","function-name","for-or-select","assign-left","string","environment","function","keyword","builtin","boolean","file-descriptor","operator","punctuation","number"],o=r.variable[1].inside,a=0;a<i.length;a++)o[i[a]]=t.languages.bash[i[a]];t.languages.shell=t.languages.bash}(a),a.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|trait)\s+|\bcatch\s+\()[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:break|catch|continue|do|else|finally|for|function|if|in|instanceof|new|null|return|throw|try|while)\b/,boolean:/\b(?:false|true)\b/,function:/\b\w+(?=\()/,number:/\b0x[\da-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/[<>]=?|[!=]=?=?|--?|\+\+?|&&?|\|\|?|[?*/~^%]/,punctuation:/[{}[\];(),.:]/},a.languages.c=a.languages.extend("clike",{comment:{pattern:/\/\/(?:[^\r\n\\]|\\(?:\r\n?|\n|(?![\r\n])))*|\/\*[\s\S]*?(?:\*\/|$)/,greedy:!0},string:{pattern:/"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"/,greedy:!0},"class-name":{pattern:/(\b(?:enum|struct)\s+(?:__attribute__\s*\(\([\s\S]*?\)\)\s*)?)\w+|\b[a-z]\w*_t\b/,lookbehind:!0},keyword:/\b(?:_Alignas|_Alignof|_Atomic|_Bool|_Complex|_Generic|_Imaginary|_Noreturn|_Static_assert|_Thread_local|__attribute__|asm|auto|break|case|char|const|continue|default|do|double|else|enum|extern|float|for|goto|if|inline|int|long|register|return|short|signed|sizeof|static|struct|switch|typedef|typeof|union|unsigned|void|volatile|while)\b/,function:/\b[a-z_]\w*(?=\s*\()/i,number:/(?:\b0x(?:[\da-f]+(?:\.[\da-f]*)?|\.[\da-f]+)(?:p[+-]?\d+)?|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?)[ful]{0,4}/i,operator:/>>=?|<<=?|->|([-+&|:])\1|[?:~]|[-+*/%&|^!=<>]=?/}),a.languages.insertBefore("c","string",{char:{pattern:/'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n]){0,32}'/,greedy:!0}}),a.languages.insertBefore("c","string",{macro:{pattern:/(^[\t ]*)#\s*[a-z](?:[^\r\n\\/]|\/(?!\*)|\/\*(?:[^*]|\*(?!\/))*\*\/|\\(?:\r\n|[\s\S]))*/im,lookbehind:!0,greedy:!0,alias:"property",inside:{string:[{pattern:/^(#\s*include\s*)<[^>]+>/,lookbehind:!0},a.languages.c["string"]],char:a.languages.c["char"],comment:a.languages.c["comment"],"macro-name":[{pattern:/(^#\s*define\s+)\w+\b(?!\()/i,lookbehind:!0},{pattern:/(^#\s*define\s+)\w+\b(?=\()/i,lookbehind:!0,alias:"function"}],directive:{pattern:/^(#\s*)[a-z]+/,lookbehind:!0,alias:"keyword"},"directive-hash":/^#/,punctuation:/##|\\(?=[\r\n])/,expression:{pattern:/\S[\s\S]*/,inside:a.languages.c}}}}),a.languages.insertBefore("c","function",{constant:/\b(?:EOF|NULL|SEEK_CUR|SEEK_END|SEEK_SET|__DATE__|__FILE__|__LINE__|__TIMESTAMP__|__TIME__|__func__|stderr|stdin|stdout)\b/}),delete a.languages.c["boolean"],function(t){var e=/\b(?:alignas|alignof|asm|auto|bool|break|case|catch|char|char16_t|char32_t|char8_t|class|co_await|co_return|co_yield|compl|concept|const|const_cast|consteval|constexpr|constinit|continue|decltype|default|delete|do|double|dynamic_cast|else|enum|explicit|export|extern|final|float|for|friend|goto|if|import|inline|int|int16_t|int32_t|int64_t|int8_t|long|module|mutable|namespace|new|noexcept|nullptr|operator|override|private|protected|public|register|reinterpret_cast|requires|return|short|signed|sizeof|static|static_assert|static_cast|struct|switch|template|this|thread_local|throw|try|typedef|typeid|typename|uint16_t|uint32_t|uint64_t|uint8_t|union|unsigned|using|virtual|void|volatile|wchar_t|while)\b/,n=/\b(?!<keyword>)\w+(?:\s*\.\s*\w+)*\b/.source.replace(/<keyword>/g,(function(){return e.source}));t.languages.cpp=t.languages.extend("c",{"class-name":[{pattern:RegExp(/(\b(?:class|concept|enum|struct|typename)\s+)(?!<keyword>)\w+/.source.replace(/<keyword>/g,(function(){return e.source}))),lookbehind:!0},/\b[A-Z]\w*(?=\s*::\s*\w+\s*\()/,/\b[A-Z_]\w*(?=\s*::\s*~\w+\s*\()/i,/\b\w+(?=\s*<(?:[^<>]|<(?:[^<>]|<[^<>]*>)*>)*>\s*::\s*\w+\s*\()/],keyword:e,number:{pattern:/(?:\b0b[01']+|\b0x(?:[\da-f']+(?:\.[\da-f']*)?|\.[\da-f']+)(?:p[+-]?[\d']+)?|(?:\b[\d']+(?:\.[\d']*)?|\B\.[\d']+)(?:e[+-]?[\d']+)?)[ful]{0,4}/i,greedy:!0},operator:/>>=?|<<=?|->|--|\+\+|&&|\|\||[?:~]|<=>|[-+*/%&|^!=<>]=?|\b(?:and|and_eq|bitand|bitor|not|not_eq|or|or_eq|xor|xor_eq)\b/,boolean:/\b(?:false|true)\b/}),t.languages.insertBefore("cpp","string",{module:{pattern:RegExp(/(\b(?:import|module)\s+)/.source+"(?:"+/"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|<[^<>\r\n]*>/.source+"|"+/<mod-name>(?:\s*:\s*<mod-name>)?|:\s*<mod-name>/.source.replace(/<mod-name>/g,(function(){return n}))+")"),lookbehind:!0,greedy:!0,inside:{string:/^[<"][\s\S]+/,operator:/:/,punctuation:/\./}},"raw-string":{pattern:/R"([^()\\ ]{0,16})\([\s\S]*?\)\1"/,alias:"string",greedy:!0}}),t.languages.insertBefore("cpp","keyword",{"generic-function":{pattern:/\b(?!operator\b)[a-z_]\w*\s*<(?:[^<>]|<[^<>]*>)*>(?=\s*\()/i,inside:{function:/^\w+/,generic:{pattern:/<[\s\S]+/,alias:"class-name",inside:t.languages.cpp}}}}),t.languages.insertBefore("cpp","operator",{"double-colon":{pattern:/::/,alias:"punctuation"}}),t.languages.insertBefore("cpp","class-name",{"base-clause":{pattern:/(\b(?:class|struct)\s+\w+\s*:\s*)[^;{}"'\s]+(?:\s+[^;{}"'\s]+)*(?=\s*[;{])/,lookbehind:!0,greedy:!0,inside:t.languages.extend("cpp",{})}}),t.languages.insertBefore("inside","double-colon",{"class-name":/\b[a-z_]\w*\b(?!\s*::)/i},t.languages.cpp["base-clause"])}(a),function(t){var e=/(?:"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n])*')/;t.languages.css={comment:/\/\*[\s\S]*?\*\//,atrule:{pattern:/@[\w-](?:[^;{\s]|\s+(?![\s{]))*(?:;|(?=\s*\{))/,inside:{rule:/^@[\w-]+/,"selector-function-argument":{pattern:/(\bselector\s*\(\s*(?![\s)]))(?:[^()\s]|\s+(?![\s)])|\((?:[^()]|\([^()]*\))*\))+(?=\s*\))/,lookbehind:!0,alias:"selector"},keyword:{pattern:/(^|[^\w-])(?:and|not|only|or)(?![\w-])/,lookbehind:!0}}},url:{pattern:RegExp("\\burl\\((?:"+e.source+"|"+/(?:[^\\\r\n()"']|\\[\s\S])*/.source+")\\)","i"),greedy:!0,inside:{function:/^url/i,punctuation:/^\(|\)$/,string:{pattern:RegExp("^"+e.source+"$"),alias:"url"}}},selector:{pattern:RegExp("(^|[{}\\s])[^{}\\s](?:[^{};\"'\\s]|\\s+(?![\\s{])|"+e.source+")*(?=\\s*\\{)"),lookbehind:!0},string:{pattern:e,greedy:!0},property:{pattern:/(^|[^-\w\xA0-\uFFFF])(?!\s)[-_a-z\xA0-\uFFFF](?:(?!\s)[-\w\xA0-\uFFFF])*(?=\s*:)/i,lookbehind:!0},important:/!important\b/i,function:{pattern:/(^|[^-a-z0-9])[-a-z0-9]+(?=\()/i,lookbehind:!0},punctuation:/[(){};:,]/},t.languages.css["atrule"].inside.rest=t.languages.css;var n=t.languages.markup;n&&(n.tag.addInlined("style","css"),n.tag.addAttribute("style","css"))}(a),function(t){var e,n=/("|')(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/;t.languages.css.selector={pattern:t.languages.css.selector.pattern,lookbehind:!0,inside:e={"pseudo-element":/:(?:after|before|first-letter|first-line|selection)|::[-\w]+/,"pseudo-class":/:[-\w]+/,class:/\.[-\w]+/,id:/#[-\w]+/,attribute:{pattern:RegExp("\\[(?:[^[\\]\"']|"+n.source+")*\\]"),greedy:!0,inside:{punctuation:/^\[|\]$/,"case-sensitivity":{pattern:/(\s)[si]$/i,lookbehind:!0,alias:"keyword"},namespace:{pattern:/^(\s*)(?:(?!\s)[-*\w\xA0-\uFFFF])*\|(?!=)/,lookbehind:!0,inside:{punctuation:/\|$/}},"attr-name":{pattern:/^(\s*)(?:(?!\s)[-\w\xA0-\uFFFF])+/,lookbehind:!0},"attr-value":[n,{pattern:/(=\s*)(?:(?!\s)[-\w\xA0-\uFFFF])+(?=\s*$)/,lookbehind:!0}],operator:/[|~*^$]?=/}},"n-th":[{pattern:/(\(\s*)[+-]?\d*[\dn](?:\s*[+-]\s*\d+)?(?=\s*\))/,lookbehind:!0,inside:{number:/[\dn]+/,operator:/[+-]/}},{pattern:/(\(\s*)(?:even|odd)(?=\s*\))/i,lookbehind:!0}],combinator:/>|\+|~|\|\|/,punctuation:/[(),]/}},t.languages.css["atrule"].inside["selector-function-argument"].inside=e,t.languages.insertBefore("css","property",{variable:{pattern:/(^|[^-\w\xA0-\uFFFF])--(?!\s)[-_a-z\xA0-\uFFFF](?:(?!\s)[-\w\xA0-\uFFFF])*/i,lookbehind:!0}});var r={pattern:/(\b\d+)(?:%|[a-z]+(?![\w-]))/,lookbehind:!0},i={pattern:/(^|[^\w.-])-?(?:\d+(?:\.\d+)?|\.\d+)/,lookbehind:!0};t.languages.insertBefore("css","function",{operator:{pattern:/(\s)[+\-*\/](?=\s)/,lookbehind:!0},hexcode:{pattern:/\B#[\da-f]{3,8}\b/i,alias:"color"},color:[{pattern:/(^|[^\w-])(?:AliceBlue|AntiqueWhite|Aqua|Aquamarine|Azure|Beige|Bisque|Black|BlanchedAlmond|Blue|BlueViolet|Brown|BurlyWood|CadetBlue|Chartreuse|Chocolate|Coral|CornflowerBlue|Cornsilk|Crimson|Cyan|DarkBlue|DarkCyan|DarkGoldenRod|DarkGr[ae]y|DarkGreen|DarkKhaki|DarkMagenta|DarkOliveGreen|DarkOrange|DarkOrchid|DarkRed|DarkSalmon|DarkSeaGreen|DarkSlateBlue|DarkSlateGr[ae]y|DarkTurquoise|DarkViolet|DeepPink|DeepSkyBlue|DimGr[ae]y|DodgerBlue|FireBrick|FloralWhite|ForestGreen|Fuchsia|Gainsboro|GhostWhite|Gold|GoldenRod|Gr[ae]y|Green|GreenYellow|HoneyDew|HotPink|IndianRed|Indigo|Ivory|Khaki|Lavender|LavenderBlush|LawnGreen|LemonChiffon|LightBlue|LightCoral|LightCyan|LightGoldenRodYellow|LightGr[ae]y|LightGreen|LightPink|LightSalmon|LightSeaGreen|LightSkyBlue|LightSlateGr[ae]y|LightSteelBlue|LightYellow|Lime|LimeGreen|Linen|Magenta|Maroon|MediumAquaMarine|MediumBlue|MediumOrchid|MediumPurple|MediumSeaGreen|MediumSlateBlue|MediumSpringGreen|MediumTurquoise|MediumVioletRed|MidnightBlue|MintCream|MistyRose|Moccasin|NavajoWhite|Navy|OldLace|Olive|OliveDrab|Orange|OrangeRed|Orchid|PaleGoldenRod|PaleGreen|PaleTurquoise|PaleVioletRed|PapayaWhip|PeachPuff|Peru|Pink|Plum|PowderBlue|Purple|Red|RosyBrown|RoyalBlue|SaddleBrown|Salmon|SandyBrown|SeaGreen|SeaShell|Sienna|Silver|SkyBlue|SlateBlue|SlateGr[ae]y|Snow|SpringGreen|SteelBlue|Tan|Teal|Thistle|Tomato|Transparent|Turquoise|Violet|Wheat|White|WhiteSmoke|Yellow|YellowGreen)(?![\w-])/i,lookbehind:!0},{pattern:/\b(?:hsl|rgb)\(\s*\d{1,3}\s*,\s*\d{1,3}%?\s*,\s*\d{1,3}%?\s*\)\B|\b(?:hsl|rgb)a\(\s*\d{1,3}\s*,\s*\d{1,3}%?\s*,\s*\d{1,3}%?\s*,\s*(?:0|0?\.\d+|1)\s*\)\B/i,inside:{unit:r,number:i,function:/[\w-]+(?=\()/,punctuation:/[(),]/}}],entity:/\\[\da-f]{1,8}/i,unit:r,number:i})}(a),a.languages.javascript=a.languages.extend("clike",{"class-name":[a.languages.clike["class-name"],{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$A-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\.(?:constructor|prototype))/,lookbehind:!0}],keyword:[{pattern:/((?:^|\})\s*)catch\b/,lookbehind:!0},{pattern:/(^|[^.]|\.\.\.\s*)\b(?:as|assert(?=\s*\{)|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally(?=\s*(?:\{|$))|for|from(?=\s*(?:['"]|$))|function|(?:get|set)(?=\s*(?:[#\[$\w\xA0-\uFFFF]|$))|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\b/,lookbehind:!0}],function:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,number:{pattern:RegExp(/(^|[^\w$])/.source+"(?:"+/NaN|Infinity/.source+"|"+/0[bB][01]+(?:_[01]+)*n?/.source+"|"+/0[oO][0-7]+(?:_[0-7]+)*n?/.source+"|"+/0[xX][\dA-Fa-f]+(?:_[\dA-Fa-f]+)*n?/.source+"|"+/\d+(?:_\d+)*n/.source+"|"+/(?:\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\.\d+(?:_\d+)*)(?:[Ee][+-]?\d+(?:_\d+)*)?/.source+")"+/(?![\w$])/.source),lookbehind:!0},operator:/--|\+\+|\*\*=?|=>|&&=?|\|\|=?|[!=]==|<<=?|>>>?=?|[-+*/%&|^!=<>]=?|\.{3}|\?\?=?|\?\.?|[~:]/}),a.languages.javascript["class-name"][0].pattern=/(\b(?:class|extends|implements|instanceof|interface|new)\s+)[\w.\\]+/,a.languages.insertBefore("javascript","keyword",{regex:{pattern:/((?:^|[^$\w\xA0-\uFFFF."'\])\s]|\b(?:return|yield))\s*)\/(?:\[(?:[^\]\\\r\n]|\\.)*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}(?=(?:\s|\/\*(?:[^*]|\*(?!\/))*\*\/)*(?:$|[\r\n,.;:})\]]|\/\/))/,lookbehind:!0,greedy:!0,inside:{"regex-source":{pattern:/^(\/)[\s\S]+(?=\/[a-z]*$)/,lookbehind:!0,alias:"language-regex",inside:a.languages.regex},"regex-delimiter":/^\/|\/$/,"regex-flags":/^[a-z]+$/}},"function-variable":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)\s*=>))/,alias:"function"},parameter:[{pattern:/(function(?:\s+(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)?\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\))/,lookbehind:!0,inside:a.languages.javascript},{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$a-z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*=>)/i,lookbehind:!0,inside:a.languages.javascript},{pattern:/(\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*=>)/,lookbehind:!0,inside:a.languages.javascript},{pattern:/((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\w\xA0-\uFFFF]))(?:(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*)\(\s*|\]\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*\{)/,lookbehind:!0,inside:a.languages.javascript}],constant:/\b[A-Z](?:[A-Z_]|\dx?)*\b/}),a.languages.insertBefore("javascript","string",{hashbang:{pattern:/^#!.*/,greedy:!0,alias:"comment"},"template-string":{pattern:/`(?:\\[\s\S]|\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}|(?!\$\{)[^\\`])*`/,greedy:!0,inside:{"template-punctuation":{pattern:/^`|`$/,alias:"string"},interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}/,lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:a.languages.javascript}},string:/[\s\S]+/}},"string-property":{pattern:/((?:^|[,{])[ \t]*)(["'])(?:\\(?:\r\n|[\s\S])|(?!\2)[^\\\r\n])*\2(?=\s*:)/m,lookbehind:!0,greedy:!0,alias:"property"}}),a.languages.insertBefore("javascript","operator",{"literal-property":{pattern:/((?:^|[,{])[ \t]*)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*:)/m,lookbehind:!0,alias:"property"}}),a.languages.markup&&(a.languages.markup.tag.addInlined("script","javascript"),a.languages.markup.tag.addAttribute(/on(?:abort|blur|change|click|composition(?:end|start|update)|dblclick|error|focus(?:in|out)?|key(?:down|up)|load|mouse(?:down|enter|leave|move|out|over|up)|reset|resize|scroll|select|slotchange|submit|unload|wheel)/.source,"javascript")),a.languages.js=a.languages.javascript,function(t){var e=/#(?!\{).+/,n={pattern:/#\{[^}]+\}/,alias:"variable"};t.languages.coffeescript=t.languages.extend("javascript",{comment:e,string:[{pattern:/'(?:\\[\s\S]|[^\\'])*'/,greedy:!0},{pattern:/"(?:\\[\s\S]|[^\\"])*"/,greedy:!0,inside:{interpolation:n}}],keyword:/\b(?:and|break|by|catch|class|continue|debugger|delete|do|each|else|extend|extends|false|finally|for|if|in|instanceof|is|isnt|let|loop|namespace|new|no|not|null|of|off|on|or|own|return|super|switch|then|this|throw|true|try|typeof|undefined|unless|until|when|while|window|with|yes|yield)\b/,"class-member":{pattern:/@(?!\d)\w+/,alias:"variable"}}),t.languages.insertBefore("coffeescript","comment",{"multiline-comment":{pattern:/###[\s\S]+?###/,alias:"comment"},"block-regex":{pattern:/\/{3}[\s\S]*?\/{3}/,alias:"regex",inside:{comment:e,interpolation:n}}}),t.languages.insertBefore("coffeescript","string",{"inline-javascript":{pattern:/`(?:\\[\s\S]|[^\\`])*`/,inside:{delimiter:{pattern:/^`|`$/,alias:"punctuation"},script:{pattern:/[\s\S]+/,alias:"language-javascript",inside:t.languages.javascript}}},"multiline-string":[{pattern:/'''[\s\S]*?'''/,greedy:!0,alias:"string"},{pattern:/"""[\s\S]*?"""/,greedy:!0,alias:"string",inside:{interpolation:n}}]}),t.languages.insertBefore("coffeescript","keyword",{property:/(?!\d)\w+(?=\s*:(?!:))/}),delete t.languages.coffeescript["template-string"],t.languages.coffee=t.languages.coffeescript}(a),function(t){var e=/[*&][^\s[\]{},]+/,n=/!(?:<[\w\-%#;/?:@&=+$,.!~*'()[\]]+>|(?:[a-zA-Z\d-]*!)?[\w\-%#;/?:@&=+$.~*'()]+)?/,r="(?:"+n.source+"(?:[ \t]+"+e.source+")?|"+e.source+"(?:[ \t]+"+n.source+")?)",i=/(?:[^\s\x00-\x08\x0e-\x1f!"#%&'*,\-:>?@[\]`{|}\x7f-\x84\x86-\x9f\ud800-\udfff\ufffe\uffff]|[?:-]<PLAIN>)(?:[ \t]*(?:(?![#:])<PLAIN>|:<PLAIN>))*/.source.replace(/<PLAIN>/g,(function(){return/[^\s\x00-\x08\x0e-\x1f,[\]{}\x7f-\x84\x86-\x9f\ud800-\udfff\ufffe\uffff]/.source})),o=/"(?:[^"\\\r\n]|\\.)*"|'(?:[^'\\\r\n]|\\.)*'/.source;function a(t,e){e=(e||"").replace(/m/g,"")+"m";var n=/([:\-,[{]\s*(?:\s<<prop>>[ \t]+)?)(?:<<value>>)(?=[ \t]*(?:$|,|\]|\}|(?:[\r\n]\s*)?#))/.source.replace(/<<prop>>/g,(function(){return r})).replace(/<<value>>/g,(function(){return t}));return RegExp(n,e)}t.languages.yaml={scalar:{pattern:RegExp(/([\-:]\s*(?:\s<<prop>>[ \t]+)?[|>])[ \t]*(?:((?:\r?\n|\r)[ \t]+)\S[^\r\n]*(?:\2[^\r\n]+)*)/.source.replace(/<<prop>>/g,(function(){return r}))),lookbehind:!0,alias:"string"},comment:/#.*/,key:{pattern:RegExp(/((?:^|[:\-,[{\r\n?])[ \t]*(?:<<prop>>[ \t]+)?)<<key>>(?=\s*:\s)/.source.replace(/<<prop>>/g,(function(){return r})).replace(/<<key>>/g,(function(){return"(?:"+i+"|"+o+")"}))),lookbehind:!0,greedy:!0,alias:"atrule"},directive:{pattern:/(^[ \t]*)%.+/m,lookbehind:!0,alias:"important"},datetime:{pattern:a(/\d{4}-\d\d?-\d\d?(?:[tT]|[ \t]+)\d\d?:\d{2}:\d{2}(?:\.\d*)?(?:[ \t]*(?:Z|[-+]\d\d?(?::\d{2})?))?|\d{4}-\d{2}-\d{2}|\d\d?:\d{2}(?::\d{2}(?:\.\d*)?)?/.source),lookbehind:!0,alias:"number"},boolean:{pattern:a(/false|true/.source,"i"),lookbehind:!0,alias:"important"},null:{pattern:a(/null|~/.source,"i"),lookbehind:!0,alias:"important"},string:{pattern:a(o),lookbehind:!0,greedy:!0},number:{pattern:a(/[+-]?(?:0x[\da-f]+|0o[0-7]+|(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?|\.inf|\.nan)/.source,"i"),lookbehind:!0},tag:n,important:e,punctuation:/---|[:[\]{}\-,|>?]|\.\.\./},t.languages.yml=t.languages.yaml}(a),function(t){var e=/(?:\\.|[^\\\n\r]|(?:\n|\r\n?)(?![\r\n]))/.source;function n(t){return t=t.replace(/<inner>/g,(function(){return e})),RegExp(/((?:^|[^\\])(?:\\{2})*)/.source+"(?:"+t+")")}var r=/(?:\\.|``(?:[^`\r\n]|`(?!`))+``|`[^`\r\n]+`|[^\\|\r\n`])+/.source,i=/\|?__(?:\|__)+\|?(?:(?:\n|\r\n?)|(?![\s\S]))/.source.replace(/__/g,(function(){return r})),o=/\|?[ \t]*:?-{3,}:?[ \t]*(?:\|[ \t]*:?-{3,}:?[ \t]*)+\|?(?:\n|\r\n?)/.source;t.languages.markdown=t.languages.extend("markup",{}),t.languages.insertBefore("markdown","prolog",{"front-matter-block":{pattern:/(^(?:\s*[\r\n])?)---(?!.)[\s\S]*?[\r\n]---(?!.)/,lookbehind:!0,greedy:!0,inside:{punctuation:/^---|---$/,"front-matter":{pattern:/\S+(?:\s+\S+)*/,alias:["yaml","language-yaml"],inside:t.languages.yaml}}},blockquote:{pattern:/^>(?:[\t ]*>)*/m,alias:"punctuation"},table:{pattern:RegExp("^"+i+o+"(?:"+i+")*","m"),inside:{"table-data-rows":{pattern:RegExp("^("+i+o+")(?:"+i+")*$"),lookbehind:!0,inside:{"table-data":{pattern:RegExp(r),inside:t.languages.markdown},punctuation:/\|/}},"table-line":{pattern:RegExp("^("+i+")"+o+"$"),lookbehind:!0,inside:{punctuation:/\||:?-{3,}:?/}},"table-header-row":{pattern:RegExp("^"+i+"$"),inside:{"table-header":{pattern:RegExp(r),alias:"important",inside:t.languages.markdown},punctuation:/\|/}}}},code:[{pattern:/((?:^|\n)[ \t]*\n|(?:^|\r\n?)[ \t]*\r\n?)(?: {4}|\t).+(?:(?:\n|\r\n?)(?: {4}|\t).+)*/,lookbehind:!0,alias:"keyword"},{pattern:/^```[\s\S]*?^```$/m,greedy:!0,inside:{"code-block":{pattern:/^(```.*(?:\n|\r\n?))[\s\S]+?(?=(?:\n|\r\n?)^```$)/m,lookbehind:!0},"code-language":{pattern:/^(```).+/,lookbehind:!0},punctuation:/```/}}],title:[{pattern:/\S.*(?:\n|\r\n?)(?:==+|--+)(?=[ \t]*$)/m,alias:"important",inside:{punctuation:/==+$|--+$/}},{pattern:/(^\s*)#.+/m,lookbehind:!0,alias:"important",inside:{punctuation:/^#+|#+$/}}],hr:{pattern:/(^\s*)([*-])(?:[\t ]*\2){2,}(?=\s*$)/m,lookbehind:!0,alias:"punctuation"},list:{pattern:/(^\s*)(?:[*+-]|\d+\.)(?=[\t ].)/m,lookbehind:!0,alias:"punctuation"},"url-reference":{pattern:/!?\[[^\]]+\]:[\t ]+(?:\S+|<(?:\\.|[^>\\])+>)(?:[\t ]+(?:"(?:\\.|[^"\\])*"|'(?:\\.|[^'\\])*'|\((?:\\.|[^)\\])*\)))?/,inside:{variable:{pattern:/^(!?\[)[^\]]+/,lookbehind:!0},string:/(?:"(?:\\.|[^"\\])*"|'(?:\\.|[^'\\])*'|\((?:\\.|[^)\\])*\))$/,punctuation:/^[\[\]!:]|[<>]/},alias:"url"},bold:{pattern:n(/\b__(?:(?!_)<inner>|_(?:(?!_)<inner>)+_)+__\b|\*\*(?:(?!\*)<inner>|\*(?:(?!\*)<inner>)+\*)+\*\*/.source),lookbehind:!0,greedy:!0,inside:{content:{pattern:/(^..)[\s\S]+(?=..$)/,lookbehind:!0,inside:{}},punctuation:/\*\*|__/}},italic:{pattern:n(/\b_(?:(?!_)<inner>|__(?:(?!_)<inner>)+__)+_\b|\*(?:(?!\*)<inner>|\*\*(?:(?!\*)<inner>)+\*\*)+\*/.source),lookbehind:!0,greedy:!0,inside:{content:{pattern:/(^.)[\s\S]+(?=.$)/,lookbehind:!0,inside:{}},punctuation:/[*_]/}},strike:{pattern:n(/(~~?)(?:(?!~)<inner>)+\2/.source),lookbehind:!0,greedy:!0,inside:{content:{pattern:/(^~~?)[\s\S]+(?=\1$)/,lookbehind:!0,inside:{}},punctuation:/~~?/}},"code-snippet":{pattern:/(^|[^\\`])(?:``[^`\r\n]+(?:`[^`\r\n]+)*``(?!`)|`[^`\r\n]+`(?!`))/,lookbehind:!0,greedy:!0,alias:["code","keyword"]},url:{pattern:n(/!?\[(?:(?!\])<inner>)+\](?:\([^\s)]+(?:[\t ]+"(?:\\.|[^"\\])*")?\)|[ \t]?\[(?:(?!\])<inner>)+\])/.source),lookbehind:!0,greedy:!0,inside:{operator:/^!/,content:{pattern:/(^\[)[^\]]+(?=\])/,lookbehind:!0,inside:{}},variable:{pattern:/(^\][ \t]?\[)[^\]]+(?=\]$)/,lookbehind:!0},url:{pattern:/(^\]\()[^\s)]+/,lookbehind:!0},string:{pattern:/(^[ \t]+)"(?:\\.|[^"\\])*"(?=\)$)/,lookbehind:!0}}}}),["url","bold","italic","strike"].forEach((function(e){["url","bold","italic","strike","code-snippet"].forEach((function(n){e!==n&&(t.languages.markdown[e].inside.content.inside[n]=t.languages.markdown[n])}))})),t.hooks.add("after-tokenize",(function(t){function e(t){if(t&&"string"!==typeof t)for(var n=0,r=t.length;n<r;n++){var i=t[n];if("code"===i.type){var o=i.content[1],a=i.content[3];if(o&&a&&"code-language"===o.type&&"code-block"===a.type&&"string"===typeof o.content){var s=o.content.replace(/\b#/g,"sharp").replace(/\b\+\+/g,"pp");s=(/[a-z][\w-]*/i.exec(s)||[""])[0].toLowerCase();var u="language-"+s;a.alias?"string"===typeof a.alias?a.alias=[a.alias,u]:a.alias.push(u):a.alias=[u]}}else e(i.content)}}"markdown"!==t.language&&"md"!==t.language||e(t.tokens)})),t.hooks.add("wrap",(function(e){if("code-block"===e.type){for(var n="",r=0,i=e.classes.length;r<i;r++){var o=e.classes[r],a=/language-(.+)/.exec(o);if(a){n=a[1];break}}var s=t.languages[n];if(s)e.content=t.highlight(c(e.content),s,n);else if(n&&"none"!==n&&t.plugins.autoloader){var u="md-"+(new Date).valueOf()+"-"+Math.floor(1e16*Math.random());e.attributes["id"]=u,t.plugins.autoloader.loadLanguages(n,(function(){var e=document.getElementById(u);e&&(e.innerHTML=t.highlight(e.textContent,t.languages[n],n))}))}}}));var a=RegExp(t.languages.markup.tag.pattern.source,"gi"),s={amp:"&",lt:"<",gt:">",quot:'"'},u=String.fromCodePoint||String.fromCharCode;function c(t){var e=t.replace(a,"");return e=e.replace(/&(\w{1,8}|#x?[\da-f]{1,8});/gi,(function(t,e){var n;if(e=e.toLowerCase(),"#"===e[0])return n="x"===e[1]?parseInt(e.slice(2),16):Number(e.slice(1)),u(n);var r=s[e];return r||t})),e}t.languages.md=t.languages.markdown}(a),a.languages.graphql={comment:/#.*/,description:{pattern:/(?:"""(?:[^"]|(?!""")")*"""|"(?:\\.|[^\\"\r\n])*")(?=\s*[a-z_])/i,greedy:!0,alias:"string",inside:{"language-markdown":{pattern:/(^"(?:"")?)(?!\1)[\s\S]+(?=\1$)/,lookbehind:!0,inside:a.languages.markdown}}},string:{pattern:/"""(?:[^"]|(?!""")")*"""|"(?:\\.|[^\\"\r\n])*"/,greedy:!0},number:/(?:\B-|\b)\d+(?:\.\d+)?(?:e[+-]?\d+)?\b/i,boolean:/\b(?:false|true)\b/,variable:/\$[a-z_]\w*/i,directive:{pattern:/@[a-z_]\w*/i,alias:"function"},"attr-name":{pattern:/\b[a-z_]\w*(?=\s*(?:\((?:[^()"]|"(?:\\.|[^\\"\r\n])*")*\))?:)/i,greedy:!0},"atom-input":{pattern:/\b[A-Z]\w*Input\b/,alias:"class-name"},scalar:/\b(?:Boolean|Float|ID|Int|String)\b/,constant:/\b[A-Z][A-Z_\d]*\b/,"class-name":{pattern:/(\b(?:enum|implements|interface|on|scalar|type|union)\s+|&\s*|:\s*|\[)[A-Z_]\w*/,lookbehind:!0},fragment:{pattern:/(\bfragment\s+|\.{3}\s*(?!on\b))[a-zA-Z_]\w*/,lookbehind:!0,alias:"function"},"definition-mutation":{pattern:/(\bmutation\s+)[a-zA-Z_]\w*/,lookbehind:!0,alias:"function"},"definition-query":{pattern:/(\bquery\s+)[a-zA-Z_]\w*/,lookbehind:!0,alias:"function"},keyword:/\b(?:directive|enum|extend|fragment|implements|input|interface|mutation|on|query|repeatable|scalar|schema|subscription|type|union)\b/,operator:/[!=|&]|\.{3}/,"property-query":/\w+(?=\s*\()/,object:/\w+(?=\s*\{)/,punctuation:/[!(){}\[\]:=,]/,property:/\w+/},a.hooks.add("after-tokenize",(function(t){if("graphql"===t.language)for(var e=t.tokens.filter((function(t){return"string"!==typeof t&&"comment"!==t.type&&"scalar"!==t.type})),n=0;n<e.length;){var r=e[n++];if("keyword"===r.type&&"mutation"===r.content){var i=[];if(f(["definition-mutation","punctuation"])&&"("===l(1).content){n+=2;var o=h(/^\($/,/^\)$/);if(-1===o)continue;for(;n<o;n++){var a=l(0);"variable"===a.type&&(p(a,"variable-input"),i.push(a.content))}n=o+1}if(f(["punctuation","property-query"])&&"{"===l(0).content&&(n++,p(l(0),"property-mutation"),i.length>0)){var s=h(/^\{$/,/^\}$/);if(-1===s)continue;for(var u=n;u<s;u++){var c=e[u];"variable"===c.type&&i.indexOf(c.content)>=0&&p(c,"variable-input")}}}}function l(t){return e[n+t]}function f(t,e){e=e||0;for(var n=0;n<t.length;n++){var r=l(n+e);if(!r||r.type!==t[n])return!1}return!0}function h(t,r){for(var i=1,o=n;o<e.length;o++){var a=e[o],s=a.content;if("punctuation"===a.type&&"string"===typeof s)if(t.test(s))i++;else if(r.test(s)&&(i--,0===i))return o}return-1}function p(t,e){var n=t.alias;n?Array.isArray(n)||(t.alias=n=[n]):t.alias=n=[],n.push(e)}})),a.languages.sql={comment:{pattern:/(^|[^\\])(?:\/\*[\s\S]*?\*\/|(?:--|\/\/|#).*)/,lookbehind:!0},variable:[{pattern:/@(["'`])(?:\\[\s\S]|(?!\1)[^\\])+\1/,greedy:!0},/@[\w.$]+/],string:{pattern:/(^|[^@\\])("|')(?:\\[\s\S]|(?!\2)[^\\]|\2\2)*\2/,greedy:!0,lookbehind:!0},identifier:{pattern:/(^|[^@\\])`(?:\\[\s\S]|[^`\\]|``)*`/,greedy:!0,lookbehind:!0,inside:{punctuation:/^`|`$/}},function:/\b(?:AVG|COUNT|FIRST|FORMAT|LAST|LCASE|LEN|MAX|MID|MIN|MOD|NOW|ROUND|SUM|UCASE)(?=\s*\()/i,keyword:/\b(?:ACTION|ADD|AFTER|ALGORITHM|ALL|ALTER|ANALYZE|ANY|APPLY|AS|ASC|AUTHORIZATION|AUTO_INCREMENT|BACKUP|BDB|BEGIN|BERKELEYDB|BIGINT|BINARY|BIT|BLOB|BOOL|BOOLEAN|BREAK|BROWSE|BTREE|BULK|BY|CALL|CASCADED?|CASE|CHAIN|CHAR(?:ACTER|SET)?|CHECK(?:POINT)?|CLOSE|CLUSTERED|COALESCE|COLLATE|COLUMNS?|COMMENT|COMMIT(?:TED)?|COMPUTE|CONNECT|CONSISTENT|CONSTRAINT|CONTAINS(?:TABLE)?|CONTINUE|CONVERT|CREATE|CROSS|CURRENT(?:_DATE|_TIME|_TIMESTAMP|_USER)?|CURSOR|CYCLE|DATA(?:BASES?)?|DATE(?:TIME)?|DAY|DBCC|DEALLOCATE|DEC|DECIMAL|DECLARE|DEFAULT|DEFINER|DELAYED|DELETE|DELIMITERS?|DENY|DESC|DESCRIBE|DETERMINISTIC|DISABLE|DISCARD|DISK|DISTINCT|DISTINCTROW|DISTRIBUTED|DO|DOUBLE|DROP|DUMMY|DUMP(?:FILE)?|DUPLICATE|ELSE(?:IF)?|ENABLE|ENCLOSED|END|ENGINE|ENUM|ERRLVL|ERRORS|ESCAPED?|EXCEPT|EXEC(?:UTE)?|EXISTS|EXIT|EXPLAIN|EXTENDED|FETCH|FIELDS|FILE|FILLFACTOR|FIRST|FIXED|FLOAT|FOLLOWING|FOR(?: EACH ROW)?|FORCE|FOREIGN|FREETEXT(?:TABLE)?|FROM|FULL|FUNCTION|GEOMETRY(?:COLLECTION)?|GLOBAL|GOTO|GRANT|GROUP|HANDLER|HASH|HAVING|HOLDLOCK|HOUR|IDENTITY(?:COL|_INSERT)?|IF|IGNORE|IMPORT|INDEX|INFILE|INNER|INNODB|INOUT|INSERT|INT|INTEGER|INTERSECT|INTERVAL|INTO|INVOKER|ISOLATION|ITERATE|JOIN|KEYS?|KILL|LANGUAGE|LAST|LEAVE|LEFT|LEVEL|LIMIT|LINENO|LINES|LINESTRING|LOAD|LOCAL|LOCK|LONG(?:BLOB|TEXT)|LOOP|MATCH(?:ED)?|MEDIUM(?:BLOB|INT|TEXT)|MERGE|MIDDLEINT|MINUTE|MODE|MODIFIES|MODIFY|MONTH|MULTI(?:LINESTRING|POINT|POLYGON)|NATIONAL|NATURAL|NCHAR|NEXT|NO|NONCLUSTERED|NULLIF|NUMERIC|OFF?|OFFSETS?|ON|OPEN(?:DATASOURCE|QUERY|ROWSET)?|OPTIMIZE|OPTION(?:ALLY)?|ORDER|OUT(?:ER|FILE)?|OVER|PARTIAL|PARTITION|PERCENT|PIVOT|PLAN|POINT|POLYGON|PRECEDING|PRECISION|PREPARE|PREV|PRIMARY|PRINT|PRIVILEGES|PROC(?:EDURE)?|PUBLIC|PURGE|QUICK|RAISERROR|READS?|REAL|RECONFIGURE|REFERENCES|RELEASE|RENAME|REPEAT(?:ABLE)?|REPLACE|REPLICATION|REQUIRE|RESIGNAL|RESTORE|RESTRICT|RETURN(?:ING|S)?|REVOKE|RIGHT|ROLLBACK|ROUTINE|ROW(?:COUNT|GUIDCOL|S)?|RTREE|RULE|SAVE(?:POINT)?|SCHEMA|SECOND|SELECT|SERIAL(?:IZABLE)?|SESSION(?:_USER)?|SET(?:USER)?|SHARE|SHOW|SHUTDOWN|SIMPLE|SMALLINT|SNAPSHOT|SOME|SONAME|SQL|START(?:ING)?|STATISTICS|STATUS|STRIPED|SYSTEM_USER|TABLES?|TABLESPACE|TEMP(?:ORARY|TABLE)?|TERMINATED|TEXT(?:SIZE)?|THEN|TIME(?:STAMP)?|TINY(?:BLOB|INT|TEXT)|TOP?|TRAN(?:SACTIONS?)?|TRIGGER|TRUNCATE|TSEQUAL|TYPES?|UNBOUNDED|UNCOMMITTED|UNDEFINED|UNION|UNIQUE|UNLOCK|UNPIVOT|UNSIGNED|UPDATE(?:TEXT)?|USAGE|USE|USER|USING|VALUES?|VAR(?:BINARY|CHAR|CHARACTER|YING)|VIEW|WAITFOR|WARNINGS|WHEN|WHERE|WHILE|WITH(?: ROLLUP|IN)?|WORK|WRITE(?:TEXT)?|YEAR)\b/i,boolean:/\b(?:FALSE|NULL|TRUE)\b/i,number:/\b0x[\da-f]+\b|\b\d+(?:\.\d*)?|\B\.\d+\b/i,operator:/[-+*\/=%^~]|&&?|\|\|?|!=?|<(?:=>?|<|>)?|>[>=]?|\b(?:AND|BETWEEN|DIV|ILIKE|IN|IS|LIKE|NOT|OR|REGEXP|RLIKE|SOUNDS LIKE|XOR)\b/i,punctuation:/[;[\]()`,.]/},function(t){var e=t.languages.javascript["template-string"],n=e.pattern.source,r=e.inside["interpolation"],i=r.inside["interpolation-punctuation"],o=r.pattern.source;function a(e,r){if(t.languages[e])return{pattern:RegExp("((?:"+r+")\\s*)"+n),lookbehind:!0,greedy:!0,inside:{"template-punctuation":{pattern:/^`|`$/,alias:"string"},"embedded-code":{pattern:/[\s\S]+/,alias:e}}}}function s(t,e){return"___"+e.toUpperCase()+"_"+t+"___"}function u(e,n,r){var i={code:e,grammar:n,language:r};return t.hooks.run("before-tokenize",i),i.tokens=t.tokenize(i.code,i.grammar),t.hooks.run("after-tokenize",i),i.tokens}function c(e){var n={};n["interpolation-punctuation"]=i;var o=t.tokenize(e,n);if(3===o.length){var a=[1,1];a.push.apply(a,u(o[1],t.languages.javascript,"javascript")),o.splice.apply(o,a)}return new t.Token("interpolation",o,r.alias,e)}function l(e,n,r){var i=t.tokenize(e,{interpolation:{pattern:RegExp(o),lookbehind:!0}}),a=0,l={},f=i.map((function(t){if("string"===typeof t)return t;var n,i=t.content;while(-1!==e.indexOf(n=s(a++,r)));return l[n]=i,n})).join(""),h=u(f,n,r),p=Object.keys(l);function d(t){for(var e=0;e<t.length;e++){if(a>=p.length)return;var n=t[e];if("string"===typeof n||"string"===typeof n.content){var r=p[a],i="string"===typeof n?n:n.content,o=i.indexOf(r);if(-1!==o){++a;var s=i.substring(0,o),u=c(l[r]),f=i.substring(o+r.length),h=[];if(s&&h.push(s),h.push(u),f){var v=[f];d(v),h.push.apply(h,v)}"string"===typeof n?(t.splice.apply(t,[e,1].concat(h)),e+=h.length-1):n.content=h}}else{var g=n.content;Array.isArray(g)?d(g):d([g])}}}return a=0,d(h),new t.Token(r,h,"language-"+r,e)}t.languages.javascript["template-string"]=[a("css",/\b(?:styled(?:\([^)]*\))?(?:\s*\.\s*\w+(?:\([^)]*\))*)*|css(?:\s*\.\s*(?:global|resolve))?|createGlobalStyle|keyframes)/.source),a("html",/\bhtml|\.\s*(?:inner|outer)HTML\s*\+?=/.source),a("svg",/\bsvg/.source),a("markdown",/\b(?:markdown|md)/.source),a("graphql",/\b(?:gql|graphql(?:\s*\.\s*experimental)?)/.source),a("sql",/\bsql/.source),e].filter(Boolean);var f={javascript:!0,js:!0,typescript:!0,ts:!0,jsx:!0,tsx:!0};function h(t){return"string"===typeof t?t:Array.isArray(t)?t.map(h).join(""):h(t.content)}t.hooks.add("after-tokenize",(function(e){function n(e){for(var r=0,i=e.length;r<i;r++){var o=e[r];if("string"!==typeof o){var a=o.content;if(Array.isArray(a))if("template-string"===o.type){var s=a[1];if(3===a.length&&"string"!==typeof s&&"embedded-code"===s.type){var u=h(s),c=s.alias,f=Array.isArray(c)?c[0]:c,p=t.languages[f];if(!p)continue;a[1]=l(u,p,f)}}else n(a);else"string"!==typeof a&&n([a])}}}e.language in f&&n(e.tokens)}))}(a),function(t){t.languages.typescript=t.languages.extend("javascript",{"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|type)\s+)(?!keyof\b)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?:\s*<(?:[^<>]|<(?:[^<>]|<[^<>]*>)*>)*>)?/,lookbehind:!0,greedy:!0,inside:null},builtin:/\b(?:Array|Function|Promise|any|boolean|console|never|number|string|symbol|unknown)\b/}),t.languages.typescript.keyword.push(/\b(?:abstract|declare|is|keyof|readonly|require)\b/,/\b(?:asserts|infer|interface|module|namespace|type)\b(?=\s*(?:[{_$a-zA-Z\xA0-\uFFFF]|$))/,/\btype\b(?=\s*(?:[\{*]|$))/),delete t.languages.typescript["parameter"],delete t.languages.typescript["literal-property"];var e=t.languages.extend("typescript",{});delete e["class-name"],t.languages.typescript["class-name"].inside=e,t.languages.insertBefore("typescript","function",{decorator:{pattern:/@[$\w\xA0-\uFFFF]+/,inside:{at:{pattern:/^@/,alias:"operator"},function:/^[\s\S]+/}},"generic-function":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*<(?:[^<>]|<(?:[^<>]|<[^<>]*>)*>)*>(?=\s*\()/,greedy:!0,inside:{function:/^#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*/,generic:{pattern:/<[\s\S]+/,alias:"class-name",inside:e}}}}),t.languages.ts=t.languages.typescript}(a),function(t){function e(t,e){return RegExp(t.replace(/<ID>/g,(function(){return/(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*/.source})),e)}t.languages.insertBefore("javascript","function-variable",{"method-variable":{pattern:RegExp("(\\.\\s*)"+t.languages.javascript["function-variable"].pattern.source),lookbehind:!0,alias:["function-variable","method","function","property-access"]}}),t.languages.insertBefore("javascript","function",{method:{pattern:RegExp("(\\.\\s*)"+t.languages.javascript["function"].source),lookbehind:!0,alias:["function","property-access"]}}),t.languages.insertBefore("javascript","constant",{"known-class-name":[{pattern:/\b(?:(?:Float(?:32|64)|(?:Int|Uint)(?:8|16|32)|Uint8Clamped)?Array|ArrayBuffer|BigInt|Boolean|DataView|Date|Error|Function|Intl|JSON|(?:Weak)?(?:Map|Set)|Math|Number|Object|Promise|Proxy|Reflect|RegExp|String|Symbol|WebAssembly)\b/,alias:"class-name"},{pattern:/\b(?:[A-Z]\w*)Error\b/,alias:"class-name"}]}),t.languages.insertBefore("javascript","keyword",{imports:{pattern:e(/(\bimport\b\s*)(?:<ID>(?:\s*,\s*(?:\*\s*as\s+<ID>|\{[^{}]*\}))?|\*\s*as\s+<ID>|\{[^{}]*\})(?=\s*\bfrom\b)/.source),lookbehind:!0,inside:t.languages.javascript},exports:{pattern:e(/(\bexport\b\s*)(?:\*(?:\s*as\s+<ID>)?(?=\s*\bfrom\b)|\{[^{}]*\})/.source),lookbehind:!0,inside:t.languages.javascript}}),t.languages.javascript["keyword"].unshift({pattern:/\b(?:as|default|export|from|import)\b/,alias:"module"},{pattern:/\b(?:await|break|catch|continue|do|else|finally|for|if|return|switch|throw|try|while|yield)\b/,alias:"control-flow"},{pattern:/\bnull\b/,alias:["null","nil"]},{pattern:/\bundefined\b/,alias:"nil"}),t.languages.insertBefore("javascript","operator",{spread:{pattern:/\.{3}/,alias:"operator"},arrow:{pattern:/=>/,alias:"operator"}}),t.languages.insertBefore("javascript","punctuation",{"property-access":{pattern:e(/(\.\s*)#?<ID>/.source),lookbehind:!0},"maybe-class-name":{pattern:/(^|[^$\w\xA0-\uFFFF])[A-Z][$\w\xA0-\uFFFF]+/,lookbehind:!0},dom:{pattern:/\b(?:document|(?:local|session)Storage|location|navigator|performance|window)\b/,alias:"variable"},console:{pattern:/\bconsole(?=\s*\.)/,alias:"class-name"}});for(var n=["function","function-variable","method","method-variable","property-access"],r=0;r<n.length;r++){var i=n[r],o=t.languages.javascript[i];"RegExp"===t.util.type(o)&&(o=t.languages.javascript[i]={pattern:o});var a=o.inside||{};o.inside=a,a["maybe-class-name"]=/^[A-Z][\s\S]*/}}(a),function(t){var e=t.util.clone(t.languages.javascript),n=/(?:\s|\/\/.*(?!.)|\/\*(?:[^*]|\*(?!\/))\*\/)/.source,r=/(?:\{(?:\{(?:\{[^{}]*\}|[^{}])*\}|[^{}])*\})/.source,i=/(?:\{<S>*\.{3}(?:[^{}]|<BRACES>)*\})/.source;function o(t,e){return t=t.replace(/<S>/g,(function(){return n})).replace(/<BRACES>/g,(function(){return r})).replace(/<SPREAD>/g,(function(){return i})),RegExp(t,e)}i=o(i).source,t.languages.jsx=t.languages.extend("markup",e),t.languages.jsx.tag.pattern=o(/<\/?(?:[\w.:-]+(?:<S>+(?:[\w.:$-]+(?:=(?:"(?:\\[\s\S]|[^\\"])*"|'(?:\\[\s\S]|[^\\'])*'|[^\s{'"/>=]+|<BRACES>))?|<SPREAD>))*<S>*\/?)?>/.source),t.languages.jsx.tag.inside["tag"].pattern=/^<\/?[^\s>\/]*/,t.languages.jsx.tag.inside["attr-value"].pattern=/=(?!\{)(?:"(?:\\[\s\S]|[^\\"])*"|'(?:\\[\s\S]|[^\\'])*'|[^\s'">]+)/,t.languages.jsx.tag.inside["tag"].inside["class-name"]=/^[A-Z]\w*(?:\.[A-Z]\w*)*$/,t.languages.jsx.tag.inside["comment"]=e["comment"],t.languages.insertBefore("inside","attr-name",{spread:{pattern:o(/<SPREAD>/.source),inside:t.languages.jsx}},t.languages.jsx.tag),t.languages.insertBefore("inside","special-attr",{script:{pattern:o(/=<BRACES>/.source),alias:"language-javascript",inside:{"script-punctuation":{pattern:/^=(?=\{)/,alias:"punctuation"},rest:t.languages.jsx}}},t.languages.jsx.tag);var a=function t(e){return e?"string"===typeof e?e:"string"===typeof e.content?e.content:e.content.map(t).join(""):""},s=function e(n){for(var r=[],i=0;i<n.length;i++){var o=n[i],s=!1;if("string"!==typeof o&&("tag"===o.type&&o.content[0]&&"tag"===o.content[0].type?"</"===o.content[0].content[0].content?r.length>0&&r[r.length-1].tagName===a(o.content[0].content[1])&&r.pop():"/>"===o.content[o.content.length-1].content||r.push({tagName:a(o.content[0].content[1]),openedBraces:0}):r.length>0&&"punctuation"===o.type&&"{"===o.content?r[r.length-1].openedBraces++:r.length>0&&r[r.length-1].openedBraces>0&&"punctuation"===o.type&&"}"===o.content?r[r.length-1].openedBraces--:s=!0),(s||"string"===typeof o)&&r.length>0&&0===r[r.length-1].openedBraces){var u=a(o);i<n.length-1&&("string"===typeof n[i+1]||"plain-text"===n[i+1].type)&&(u+=a(n[i+1]),n.splice(i+1,1)),i>0&&("string"===typeof n[i-1]||"plain-text"===n[i-1].type)&&(u=a(n[i-1])+u,n.splice(i-1,1),i--),n[i]=new t.Token("plain-text",u,null,u)}o.content&&"string"!==typeof o.content&&e(o.content)}};t.hooks.add("after-tokenize",(function(t){"jsx"!==t.language&&"tsx"!==t.language||s(t.tokens)}))}(a),function(t){t.languages.diff={coord:[/^(?:\*{3}|-{3}|\+{3}).*$/m,/^@@.*@@$/m,/^\d.*$/m]};var e={"deleted-sign":"-","deleted-arrow":"<","inserted-sign":"+","inserted-arrow":">",unchanged:" ",diff:"!"};Object.keys(e).forEach((function(n){var r=e[n],i=[];/^\w+$/.test(n)||i.push(/\w+/.exec(n)[0]),"diff"===n&&i.push("bold"),t.languages.diff[n]={pattern:RegExp("^(?:["+r+"].*(?:\r\n?|\n|(?![\\s\\S])))+","m"),alias:i,inside:{line:{pattern:/(.)(?=[\s\S]).*(?:\r\n?|\n)?/,lookbehind:!0},prefix:{pattern:/[\s\S]/,alias:/\w+/.exec(n)[0]}}}})),Object.defineProperty(t.languages.diff,"PREFIXES",{value:e})}(a),a.languages.git={comment:/^#.*/m,deleted:/^[-\u2013].*/m,inserted:/^\+.*/m,string:/("|')(?:\\.|(?!\1)[^\\\r\n])*\1/,command:{pattern:/^.*\$ git .*$/m,inside:{parameter:/\s--?\w+/}},coord:/^@@.*@@$/m,"commit-sha1":/^commit \w{40}$/m},a.languages.go=a.languages.extend("clike",{string:{pattern:/(^|[^\\])"(?:\\.|[^"\\\r\n])*"|`[^`]*`/,lookbehind:!0,greedy:!0},keyword:/\b(?:break|case|chan|const|continue|default|defer|else|fallthrough|for|func|go(?:to)?|if|import|interface|map|package|range|return|select|struct|switch|type|var)\b/,boolean:/\b(?:_|false|iota|nil|true)\b/,number:[/\b0(?:b[01_]+|o[0-7_]+)i?\b/i,/\b0x(?:[a-f\d_]+(?:\.[a-f\d_]*)?|\.[a-f\d_]+)(?:p[+-]?\d+(?:_\d+)*)?i?(?!\w)/i,/(?:\b\d[\d_]*(?:\.[\d_]*)?|\B\.\d[\d_]*)(?:e[+-]?[\d_]+)?i?(?!\w)/i],operator:/[*\/%^!=]=?|\+[=+]?|-[=-]?|\|[=|]?|&(?:=|&|\^=?)?|>(?:>=?|=)?|<(?:<=?|=|-)?|:=|\.\.\./,builtin:/\b(?:append|bool|byte|cap|close|complex|complex(?:64|128)|copy|delete|error|float(?:32|64)|u?int(?:8|16|32|64)?|imag|len|make|new|panic|print(?:ln)?|real|recover|rune|string|uintptr)\b/}),a.languages.insertBefore("go","string",{char:{pattern:/'(?:\\.|[^'\\\r\n]){0,10}'/,greedy:!0}}),delete a.languages.go["class-name"],function(t){function e(t,e){return"___"+t.toUpperCase()+e+"___"}Object.defineProperties(t.languages["markup-templating"]={},{buildPlaceholders:{value:function(n,r,i,o){if(n.language===r){var a=n.tokenStack=[];n.code=n.code.replace(i,(function(t){if("function"===typeof o&&!o(t))return t;var i,s=a.length;while(-1!==n.code.indexOf(i=e(r,s)))++s;return a[s]=t,i})),n.grammar=t.languages.markup}}},tokenizePlaceholders:{value:function(n,r){if(n.language===r&&n.tokenStack){n.grammar=t.languages[r];var i=0,o=Object.keys(n.tokenStack);a(n.tokens)}function a(s){for(var u=0;u<s.length;u++){if(i>=o.length)break;var c=s[u];if("string"===typeof c||c.content&&"string"===typeof c.content){var l=o[i],f=n.tokenStack[l],h="string"===typeof c?c:c.content,p=e(r,l),d=h.indexOf(p);if(d>-1){++i;var v=h.substring(0,d),g=new t.Token(r,t.tokenize(f,n.grammar),"language-"+r,f),m=h.substring(d+p.length),y=[];v&&y.push.apply(y,a([v])),y.push(g),m&&y.push.apply(y,a([m])),"string"===typeof c?s.splice.apply(s,[u,1].concat(y)):c.content=y}}else c.content&&a(c.content)}return s}}}})}(a),function(t){t.languages.handlebars={comment:/\{\{![\s\S]*?\}\}/,delimiter:{pattern:/^\{\{\{?|\}\}\}?$/,alias:"punctuation"},string:/(["'])(?:\\.|(?!\1)[^\\\r\n])*\1/,number:/\b0x[\dA-Fa-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:[Ee][+-]?\d+)?/,boolean:/\b(?:false|true)\b/,block:{pattern:/^(\s*(?:~\s*)?)[#\/]\S+?(?=\s*(?:~\s*)?$|\s)/,lookbehind:!0,alias:"keyword"},brackets:{pattern:/\[[^\]]+\]/,inside:{punctuation:/\[|\]/,variable:/[\s\S]+/}},punctuation:/[!"#%&':()*+,.\/;<=>@\[\\\]^`{|}~]/,variable:/[^!"#%&'()*+,\/;<=>@\[\\\]^`{|}~\s]+/},t.hooks.add("before-tokenize",(function(e){var n=/\{\{\{[\s\S]+?\}\}\}|\{\{[\s\S]+?\}\}/g;t.languages["markup-templating"].buildPlaceholders(e,"handlebars",n)})),t.hooks.add("after-tokenize",(function(e){t.languages["markup-templating"].tokenizePlaceholders(e,"handlebars")})),t.languages.hbs=t.languages.handlebars}(a),a.languages.json={property:{pattern:/(^|[^\\])"(?:\\.|[^\\"\r\n])*"(?=\s*:)/,lookbehind:!0,greedy:!0},string:{pattern:/(^|[^\\])"(?:\\.|[^\\"\r\n])*"(?!\s*:)/,lookbehind:!0,greedy:!0},comment:{pattern:/\/\/.*|\/\*[\s\S]*?(?:\*\/|$)/,greedy:!0},number:/-?\b\d+(?:\.\d+)?(?:e[+-]?\d+)?\b/i,punctuation:/[{}[\],]/,operator:/:/,boolean:/\b(?:false|true)\b/,null:{pattern:/\bnull\b/,alias:"keyword"}},a.languages.webmanifest=a.languages.json,a.languages.less=a.languages.extend("css",{comment:[/\/\*[\s\S]*?\*\//,{pattern:/(^|[^\\])\/\/.*/,lookbehind:!0}],atrule:{pattern:/@[\w-](?:\((?:[^(){}]|\([^(){}]*\))*\)|[^(){};\s]|\s+(?!\s))*?(?=\s*\{)/,inside:{punctuation:/[:()]/}},selector:{pattern:/(?:@\{[\w-]+\}|[^{};\s@])(?:@\{[\w-]+\}|\((?:[^(){}]|\([^(){}]*\))*\)|[^(){};@\s]|\s+(?!\s))*?(?=\s*\{)/,inside:{variable:/@+[\w-]+/}},property:/(?:@\{[\w-]+\}|[\w-])+(?:\+_?)?(?=\s*:)/,operator:/[+\-*\/]/}),a.languages.insertBefore("less","property",{variable:[{pattern:/@[\w-]+\s*:/,inside:{punctuation:/:/}},/@@?[\w-]+/],"mixin-usage":{pattern:/([{;]\s*)[.#](?!\d)[\w-].*?(?=[(;])/,lookbehind:!0,alias:"function"}}),a.languages.makefile={comment:{pattern:/(^|[^\\])#(?:\\(?:\r\n|[\s\S])|[^\\\r\n])*/,lookbehind:!0},string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"builtin-target":{pattern:/\.[A-Z][^:#=\s]+(?=\s*:(?!=))/,alias:"builtin"},target:{pattern:/^(?:[^:=\s]|[ \t]+(?![\s:]))+(?=\s*:(?!=))/m,alias:"symbol",inside:{variable:/\$+(?:(?!\$)[^(){}:#=\s]+|(?=[({]))/}},variable:/\$+(?:(?!\$)[^(){}:#=\s]+|\([@*%<^+?][DF]\)|(?=[({]))/,keyword:/-include\b|\b(?:define|else|endef|endif|export|ifn?def|ifn?eq|include|override|private|sinclude|undefine|unexport|vpath)\b/,function:{pattern:/(\()(?:abspath|addsuffix|and|basename|call|dir|error|eval|file|filter(?:-out)?|findstring|firstword|flavor|foreach|guile|if|info|join|lastword|load|notdir|or|origin|patsubst|realpath|shell|sort|strip|subst|suffix|value|warning|wildcard|word(?:list|s)?)(?=[ \t])/,lookbehind:!0},operator:/(?:::|[?:+!])?=|[|@]/,punctuation:/[:;(){}]/},a.languages.objectivec=a.languages.extend("c",{string:{pattern:/@?"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"/,greedy:!0},keyword:/\b(?:asm|auto|break|case|char|const|continue|default|do|double|else|enum|extern|float|for|goto|if|in|inline|int|long|register|return|self|short|signed|sizeof|static|struct|super|switch|typedef|typeof|union|unsigned|void|volatile|while)\b|(?:@interface|@end|@implementation|@protocol|@class|@public|@protected|@private|@property|@try|@catch|@finally|@throw|@synthesize|@dynamic|@selector)\b/,operator:/-[->]?|\+\+?|!=?|<<?=?|>>?=?|==?|&&?|\|\|?|[~^%?*\/@]/}),delete a.languages.objectivec["class-name"],a.languages.objc=a.languages.objectivec,a.languages.ocaml={comment:{pattern:/\(\*[\s\S]*?\*\)/,greedy:!0},char:{pattern:/'(?:[^\\\r\n']|\\(?:.|[ox]?[0-9a-f]{1,3}))'/i,greedy:!0},string:[{pattern:/"(?:\\(?:[\s\S]|\r\n)|[^\\\r\n"])*"/,greedy:!0},{pattern:/\{([a-z_]*)\|[\s\S]*?\|\1\}/,greedy:!0}],number:[/\b(?:0b[01][01_]*|0o[0-7][0-7_]*)\b/i,/\b0x[a-f0-9][a-f0-9_]*(?:\.[a-f0-9_]*)?(?:p[+-]?\d[\d_]*)?(?!\w)/i,/\b\d[\d_]*(?:\.[\d_]*)?(?:e[+-]?\d[\d_]*)?(?!\w)/i],directive:{pattern:/\B#\w+/,alias:"property"},label:{pattern:/\B~\w+/,alias:"property"},"type-variable":{pattern:/\B'\w+/,alias:"function"},variant:{pattern:/`\w+/,alias:"symbol"},keyword:/\b(?:as|assert|begin|class|constraint|do|done|downto|else|end|exception|external|for|fun|function|functor|if|in|include|inherit|initializer|lazy|let|match|method|module|mutable|new|nonrec|object|of|open|private|rec|sig|struct|then|to|try|type|val|value|virtual|when|where|while|with)\b/,boolean:/\b(?:false|true)\b/,"operator-like-punctuation":{pattern:/\[[<>|]|[>|]\]|\{<|>\}/,alias:"punctuation"},operator:/\.[.~]|:[=>]|[=<>@^|&+\-*\/$%!?~][!$%&*+\-.\/:<=>?@^|~]*|\b(?:and|asr|land|lor|lsl|lsr|lxor|mod|or)\b/,punctuation:/;;|::|[(){}\[\].,:;#]|\b_\b/},a.languages.python={comment:{pattern:/(^|[^\\])#.*/,lookbehind:!0,greedy:!0},"string-interpolation":{pattern:/(?:f|fr|rf)(?:("""|''')[\s\S]*?\1|("|')(?:\\.|(?!\2)[^\\\r\n])*\2)/i,greedy:!0,inside:{interpolation:{pattern:/((?:^|[^{])(?:\{\{)*)\{(?!\{)(?:[^{}]|\{(?!\{)(?:[^{}]|\{(?!\{)(?:[^{}])+\})+\})+\}/,lookbehind:!0,inside:{"format-spec":{pattern:/(:)[^:(){}]+(?=\}$)/,lookbehind:!0},"conversion-option":{pattern:/![sra](?=[:}]$)/,alias:"punctuation"},rest:null}},string:/[\s\S]+/}},"triple-quoted-string":{pattern:/(?:[rub]|br|rb)?("""|''')[\s\S]*?\1/i,greedy:!0,alias:"string"},string:{pattern:/(?:[rub]|br|rb)?("|')(?:\\.|(?!\1)[^\\\r\n])*\1/i,greedy:!0},function:{pattern:/((?:^|\s)def[ \t]+)[a-zA-Z_]\w*(?=\s*\()/g,lookbehind:!0},"class-name":{pattern:/(\bclass\s+)\w+/i,lookbehind:!0},decorator:{pattern:/(^[\t ]*)@\w+(?:\.\w+)*/m,lookbehind:!0,alias:["annotation","punctuation"],inside:{punctuation:/\./}},keyword:/\b(?:_(?=\s*:)|and|as|assert|async|await|break|case|class|continue|def|del|elif|else|except|exec|finally|for|from|global|if|import|in|is|lambda|match|nonlocal|not|or|pass|print|raise|return|try|while|with|yield)\b/,builtin:/\b(?:__import__|abs|all|any|apply|ascii|basestring|bin|bool|buffer|bytearray|bytes|callable|chr|classmethod|cmp|coerce|compile|complex|delattr|dict|dir|divmod|enumerate|eval|execfile|file|filter|float|format|frozenset|getattr|globals|hasattr|hash|help|hex|id|input|int|intern|isinstance|issubclass|iter|len|list|locals|long|map|max|memoryview|min|next|object|oct|open|ord|pow|property|range|raw_input|reduce|reload|repr|reversed|round|set|setattr|slice|sorted|staticmethod|str|sum|super|tuple|type|unichr|unicode|vars|xrange|zip)\b/,boolean:/\b(?:False|None|True)\b/,number:/\b0(?:b(?:_?[01])+|o(?:_?[0-7])+|x(?:_?[a-f0-9])+)\b|(?:\b\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\B\.\d+(?:_\d+)*)(?:e[+-]?\d+(?:_\d+)*)?j?(?!\w)/i,operator:/[-+%=]=?|!=|:=|\*\*?=?|\/\/?=?|<[<=>]?|>[=>]?|[&|^~]/,punctuation:/[{}[\];(),.:]/},a.languages.python["string-interpolation"].inside["interpolation"].inside.rest=a.languages.python,a.languages.py=a.languages.python,a.languages.reason=a.languages.extend("clike",{string:{pattern:/"(?:\\(?:\r\n|[\s\S])|[^\\\r\n"])*"/,greedy:!0},"class-name":/\b[A-Z]\w*/,keyword:/\b(?:and|as|assert|begin|class|constraint|do|done|downto|else|end|exception|external|for|fun|function|functor|if|in|include|inherit|initializer|lazy|let|method|module|mutable|new|nonrec|object|of|open|or|private|rec|sig|struct|switch|then|to|try|type|val|virtual|when|while|with)\b/,operator:/\.{3}|:[:=]|\|>|->|=(?:==?|>)?|<=?|>=?|[|^?'#!~`]|[+\-*\/]\.?|\b(?:asr|land|lor|lsl|lsr|lxor|mod)\b/}),a.languages.insertBefore("reason","class-name",{char:{pattern:/'(?:\\x[\da-f]{2}|\\o[0-3][0-7][0-7]|\\\d{3}|\\.|[^'\\\r\n])'/,greedy:!0},constructor:/\b[A-Z]\w*\b(?!\s*\.)/,label:{pattern:/\b[a-z]\w*(?=::)/,alias:"symbol"}}),delete a.languages.reason["function"],function(t){t.languages.sass=t.languages.extend("css",{comment:{pattern:/^([ \t]*)\/[\/*].*(?:(?:\r?\n|\r)\1[ \t].+)*/m,lookbehind:!0,greedy:!0}}),t.languages.insertBefore("sass","atrule",{"atrule-line":{pattern:/^(?:[ \t]*)[@+=].+/m,greedy:!0,inside:{atrule:/(?:@[\w-]+|[+=])/}}}),delete t.languages.sass.atrule;var e=/\$[-\w]+|#\{\$[-\w]+\}/,n=[/[+*\/%]|[=!]=|<=?|>=?|\b(?:and|not|or)\b/,{pattern:/(\s)-(?=\s)/,lookbehind:!0}];t.languages.insertBefore("sass","property",{"variable-line":{pattern:/^[ \t]*\$.+/m,greedy:!0,inside:{punctuation:/:/,variable:e,operator:n}},"property-line":{pattern:/^[ \t]*(?:[^:\s]+ *:.*|:[^:\s].*)/m,greedy:!0,inside:{property:[/[^:\s]+(?=\s*:)/,{pattern:/(:)[^:\s]+/,lookbehind:!0}],punctuation:/:/,variable:e,operator:n,important:t.languages.sass.important}}}),delete t.languages.sass.property,delete t.languages.sass.important,t.languages.insertBefore("sass","punctuation",{selector:{pattern:/^([ \t]*)\S(?:,[^,\r\n]+|[^,\r\n]*)(?:,[^,\r\n]+)*(?:,(?:\r?\n|\r)\1[ \t]+\S(?:,[^,\r\n]+|[^,\r\n]*)(?:,[^,\r\n]+)*)*/m,lookbehind:!0,greedy:!0}})}(a),a.languages.scss=a.languages.extend("css",{comment:{pattern:/(^|[^\\])(?:\/\*[\s\S]*?\*\/|\/\/.*)/,lookbehind:!0},atrule:{pattern:/@[\w-](?:\([^()]+\)|[^()\s]|\s+(?!\s))*?(?=\s+[{;])/,inside:{rule:/@[\w-]+/}},url:/(?:[-a-z]+-)?url(?=\()/i,selector:{pattern:/(?=\S)[^@;{}()]?(?:[^@;{}()\s]|\s+(?!\s)|#\{\$[-\w]+\})+(?=\s*\{(?:\}|\s|[^}][^:{}]*[:{][^}]))/,inside:{parent:{pattern:/&/,alias:"important"},placeholder:/%[-\w]+/,variable:/\$[-\w]+|#\{\$[-\w]+\}/}},property:{pattern:/(?:[-\w]|\$[-\w]|#\{\$[-\w]+\})+(?=\s*:)/,inside:{variable:/\$[-\w]+|#\{\$[-\w]+\}/}}}),a.languages.insertBefore("scss","atrule",{keyword:[/@(?:content|debug|each|else(?: if)?|extend|for|forward|function|if|import|include|mixin|return|use|warn|while)\b/i,{pattern:/( )(?:from|through)(?= )/,lookbehind:!0}]}),a.languages.insertBefore("scss","important",{variable:/\$[-\w]+|#\{\$[-\w]+\}/}),a.languages.insertBefore("scss","function",{"module-modifier":{pattern:/\b(?:as|hide|show|with)\b/i,alias:"keyword"},placeholder:{pattern:/%[-\w]+/,alias:"selector"},statement:{pattern:/\B!(?:default|optional)\b/i,alias:"keyword"},boolean:/\b(?:false|true)\b/,null:{pattern:/\bnull\b/,alias:"keyword"},operator:{pattern:/(\s)(?:[-+*\/%]|[=!]=|<=?|>=?|and|not|or)(?=\s)/,lookbehind:!0}}),a.languages.scss["atrule"].inside.rest=a.languages.scss,function(t){var e={pattern:/(\b\d+)(?:%|[a-z]+)/,lookbehind:!0},n={pattern:/(^|[^\w.-])-?(?:\d+(?:\.\d+)?|\.\d+)/,lookbehind:!0},r={comment:{pattern:/(^|[^\\])(?:\/\*[\s\S]*?\*\/|\/\/.*)/,lookbehind:!0},url:{pattern:/\burl\((["']?).*?\1\)/i,greedy:!0},string:{pattern:/("|')(?:(?!\1)[^\\\r\n]|\\(?:\r\n|[\s\S]))*\1/,greedy:!0},interpolation:null,func:null,important:/\B!(?:important|optional)\b/i,keyword:{pattern:/(^|\s+)(?:(?:else|for|if|return|unless)(?=\s|$)|@[\w-]+)/,lookbehind:!0},hexcode:/#[\da-f]{3,6}/i,color:[/\b(?:AliceBlue|AntiqueWhite|Aqua|Aquamarine|Azure|Beige|Bisque|Black|BlanchedAlmond|Blue|BlueViolet|Brown|BurlyWood|CadetBlue|Chartreuse|Chocolate|Coral|CornflowerBlue|Cornsilk|Crimson|Cyan|DarkBlue|DarkCyan|DarkGoldenRod|DarkGr[ae]y|DarkGreen|DarkKhaki|DarkMagenta|DarkOliveGreen|DarkOrange|DarkOrchid|DarkRed|DarkSalmon|DarkSeaGreen|DarkSlateBlue|DarkSlateGr[ae]y|DarkTurquoise|DarkViolet|DeepPink|DeepSkyBlue|DimGr[ae]y|DodgerBlue|FireBrick|FloralWhite|ForestGreen|Fuchsia|Gainsboro|GhostWhite|Gold|GoldenRod|Gr[ae]y|Green|GreenYellow|HoneyDew|HotPink|IndianRed|Indigo|Ivory|Khaki|Lavender|LavenderBlush|LawnGreen|LemonChiffon|LightBlue|LightCoral|LightCyan|LightGoldenRodYellow|LightGr[ae]y|LightGreen|LightPink|LightSalmon|LightSeaGreen|LightSkyBlue|LightSlateGr[ae]y|LightSteelBlue|LightYellow|Lime|LimeGreen|Linen|Magenta|Maroon|MediumAquaMarine|MediumBlue|MediumOrchid|MediumPurple|MediumSeaGreen|MediumSlateBlue|MediumSpringGreen|MediumTurquoise|MediumVioletRed|MidnightBlue|MintCream|MistyRose|Moccasin|NavajoWhite|Navy|OldLace|Olive|OliveDrab|Orange|OrangeRed|Orchid|PaleGoldenRod|PaleGreen|PaleTurquoise|PaleVioletRed|PapayaWhip|PeachPuff|Peru|Pink|Plum|PowderBlue|Purple|Red|RosyBrown|RoyalBlue|SaddleBrown|Salmon|SandyBrown|SeaGreen|SeaShell|Sienna|Silver|SkyBlue|SlateBlue|SlateGr[ae]y|Snow|SpringGreen|SteelBlue|Tan|Teal|Thistle|Tomato|Transparent|Turquoise|Violet|Wheat|White|WhiteSmoke|Yellow|YellowGreen)\b/i,{pattern:/\b(?:hsl|rgb)\(\s*\d{1,3}\s*,\s*\d{1,3}%?\s*,\s*\d{1,3}%?\s*\)\B|\b(?:hsl|rgb)a\(\s*\d{1,3}\s*,\s*\d{1,3}%?\s*,\s*\d{1,3}%?\s*,\s*(?:0|0?\.\d+|1)\s*\)\B/i,inside:{unit:e,number:n,function:/[\w-]+(?=\()/,punctuation:/[(),]/}}],entity:/\\[\da-f]{1,8}/i,unit:e,boolean:/\b(?:false|true)\b/,operator:[/~|[+!\/%<>?=]=?|[-:]=|\*[*=]?|\.{2,3}|&&|\|\||\B-\B|\b(?:and|in|is(?: a| defined| not|nt)?|not|or)\b/],number:n,punctuation:/[{}()\[\];:,]/};r["interpolation"]={pattern:/\{[^\r\n}:]+\}/,alias:"variable",inside:{delimiter:{pattern:/^\{|\}$/,alias:"punctuation"},rest:r}},r["func"]={pattern:/[\w-]+\([^)]*\).*/,inside:{function:/^[^(]+/,rest:r}},t.languages.stylus={"atrule-declaration":{pattern:/(^[ \t]*)@.+/m,lookbehind:!0,inside:{atrule:/^@[\w-]+/,rest:r}},"variable-declaration":{pattern:/(^[ \t]*)[\w$-]+\s*.?=[ \t]*(?:\{[^{}]*\}|\S.*|$)/m,lookbehind:!0,inside:{variable:/^\S+/,rest:r}},statement:{pattern:/(^[ \t]*)(?:else|for|if|return|unless)[ \t].+/m,lookbehind:!0,inside:{keyword:/^\S+/,rest:r}},"property-declaration":{pattern:/((?:^|\{)([ \t]*))(?:[\w-]|\{[^}\r\n]+\})+(?:\s*:\s*|[ \t]+)(?!\s)[^{\r\n]*(?:;|[^{\r\n,]$(?!(?:\r?\n|\r)(?:\{|\2[ \t])))/m,lookbehind:!0,inside:{property:{pattern:/^[^\s:]+/,inside:{interpolation:r.interpolation}},rest:r}},selector:{pattern:/(^[ \t]*)(?:(?=\S)(?:[^{}\r\n:()]|::?[\w-]+(?:\([^)\r\n]*\)|(?![\w-]))|\{[^}\r\n]+\})+)(?:(?:\r?\n|\r)(?:\1(?:(?=\S)(?:[^{}\r\n:()]|::?[\w-]+(?:\([^)\r\n]*\)|(?![\w-]))|\{[^}\r\n]+\})+)))*(?:,$|\{|(?=(?:\r?\n|\r)(?:\{|\1[ \t])))/m,lookbehind:!0,inside:{interpolation:r.interpolation,comment:r.comment,punctuation:/[{},]/}},func:r.func,string:r.string,comment:{pattern:/(^|[^\\])(?:\/\*[\s\S]*?\*\/|\/\/.*)/,lookbehind:!0,greedy:!0},interpolation:r.interpolation,punctuation:/[{}()\[\];:.]/}}(a),function(t){var e=t.util.clone(t.languages.typescript);t.languages.tsx=t.languages.extend("jsx",e),delete t.languages.tsx["parameter"],delete t.languages.tsx["literal-property"];var n=t.languages.tsx.tag;n.pattern=RegExp(/(^|[^\w$]|(?=<\/))/.source+"(?:"+n.pattern.source+")",n.pattern.flags),n.lookbehind=!0}(a),a.languages.wasm={comment:[/\(;[\s\S]*?;\)/,{pattern:/;;.*/,greedy:!0}],string:{pattern:/"(?:\\[\s\S]|[^"\\])*"/,greedy:!0},keyword:[{pattern:/\b(?:align|offset)=/,inside:{operator:/=/}},{pattern:/\b(?:(?:f32|f64|i32|i64)(?:\.(?:abs|add|and|ceil|clz|const|convert_[su]\/i(?:32|64)|copysign|ctz|demote\/f64|div(?:_[su])?|eqz?|extend_[su]\/i32|floor|ge(?:_[su])?|gt(?:_[su])?|le(?:_[su])?|load(?:(?:8|16|32)_[su])?|lt(?:_[su])?|max|min|mul|neg?|nearest|or|popcnt|promote\/f32|reinterpret\/[fi](?:32|64)|rem_[su]|rot[lr]|shl|shr_[su]|sqrt|store(?:8|16|32)?|sub|trunc(?:_[su]\/f(?:32|64))?|wrap\/i64|xor))?|memory\.(?:grow|size))\b/,inside:{punctuation:/\./}},/\b(?:anyfunc|block|br(?:_if|_table)?|call(?:_indirect)?|data|drop|elem|else|end|export|func|get_(?:global|local)|global|if|import|local|loop|memory|module|mut|nop|offset|param|result|return|select|set_(?:global|local)|start|table|tee_local|then|type|unreachable)\b/],variable:/\$[\w!#$%&'*+\-./:<=>?@\\^`|~]+/,number:/[+-]?\b(?:\d(?:_?\d)*(?:\.\d(?:_?\d)*)?(?:[eE][+-]?\d(?:_?\d)*)?|0x[\da-fA-F](?:_?[\da-fA-F])*(?:\.[\da-fA-F](?:_?[\da-fA-D])*)?(?:[pP][+-]?\d(?:_?\d)*)?)\b|\binf\b|\bnan(?::0x[\da-fA-F](?:_?[\da-fA-D])*)?\b/,punctuation:/[()]/};var s=a,u={plain:{backgroundColor:"#2a2734",color:"#9a86fd"},styles:[{types:["comment","prolog","doctype","cdata","punctuation"],style:{color:"#6c6783"}},{types:["namespace"],style:{opacity:.7}},{types:["tag","operator","number"],style:{color:"#e09142"}},{types:["property","function"],style:{color:"#9a86fd"}},{types:["tag-id","selector","atrule-id"],style:{color:"#eeebff"}},{types:["attr-name"],style:{color:"#c4b9fe"}},{types:["boolean","string","entity","url","attr-value","keyword","control","directive","unit","statement","regex","atrule","placeholder","variable"],style:{color:"#ffcc99"}},{types:["deleted"],style:{textDecorationLine:"line-through"}},{types:["inserted"],style:{textDecorationLine:"underline"}},{types:["italic"],style:{fontStyle:"italic"}},{types:["important","bold"],style:{fontWeight:"bold"}},{types:["important"],style:{color:"#c4b9fe"}}]},c=u,l={Prism:s,theme:c};function f(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function h(){return h=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},h.apply(this,arguments)}var p=/\r\n|\r|\n/,d=function(t){0===t.length?t.push({types:["plain"],content:"\n",empty:!0}):1===t.length&&""===t[0].content&&(t[0].content="\n",t[0].empty=!0)},v=function(t,e){var n=t.length;return n>0&&t[n-1]===e?t:t.concat(e)},g=function(t){var e=[[]],n=[t],r=[0],i=[t.length],o=0,a=0,s=[],u=[s];while(a>-1){while((o=r[a]++)<i[a]){var c=void 0,l=e[a],f=n[a],h=f[o];if("string"===typeof h?(l=a>0?l:["plain"],c=h):(l=v(l,h.type),h.alias&&(l=v(l,h.alias)),c=h.content),"string"===typeof c){var g=c.split(p),m=g.length;s.push({types:l,content:g[0]});for(var y=1;y<m;y++)d(s),u.push(s=[]),s.push({types:l,content:g[y]})}else a++,e.push(l),n.push(c),r.push(0),i.push(c.length)}a--,e.pop(),n.pop(),r.pop(),i.pop()}return d(s),u},m=function(t,e){var n=t.plain,r=Object.create(null),i=t.styles.reduce((function(t,n){var r=n.languages,i=n.style;return r&&!r.includes(e)||n.types.forEach((function(e){var n=h({},t[e],i);t[e]=n})),t}),r);return i.root=n,i.plain=h({},n,{backgroundColor:null}),i};function y(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&-1===e.indexOf(r)&&(n[r]=t[r]);return n}var _=function(t){function e(){var e=this,n=[],r=arguments.length;while(r--)n[r]=arguments[r];t.apply(this,n),f(this,"getThemeDict",(function(t){if(void 0!==e.themeDict&&t.theme===e.prevTheme&&t.language===e.prevLanguage)return e.themeDict;e.prevTheme=t.theme,e.prevLanguage=t.language;var n=t.theme?m(t.theme,t.language):void 0;return e.themeDict=n})),f(this,"getLineProps",(function(t){var n=t.key,r=t.className,i=t.style,o=y(t,["key","className","style","line"]),a=o,s=h({},a,{className:"token-line",style:void 0,key:void 0}),u=e.getThemeDict(e.props);return void 0!==u&&(s.style=u.plain),void 0!==i&&(s.style=void 0!==s.style?h({},s.style,i):i),void 0!==n&&(s.key=n),r&&(s.className+=" "+r),s})),f(this,"getStyleForToken",(function(t){var n=t.types,r=t.empty,i=n.length,o=e.getThemeDict(e.props);if(void 0!==o){if(1===i&&"plain"===n[0])return r?{display:"inline-block"}:void 0;if(1===i&&!r)return o[n[0]];var a=r?{display:"inline-block"}:{},s=n.map((function(t){return o[t]}));return Object.assign.apply(Object,[a].concat(s))}})),f(this,"getTokenProps",(function(t){var n=t.key,r=t.className,i=t.style,o=t.token,a=y(t,["key","className","style","token"]),s=a,u=h({},s,{className:"token "+o.types.join(" "),children:o.content,style:e.getStyleForToken(o),key:void 0});return void 0!==i&&(u.style=void 0!==u.style?h({},u.style,i):i),void 0!==n&&(u.key=n),r&&(u.className+=" "+r),u})),f(this,"tokenize",(function(t,e,n,r){var i={code:e,grammar:n,language:r,tokens:[]};t.hooks.run("before-tokenize",i);var o=i.tokens=t.tokenize(i.code,i.grammar,i.language);return t.hooks.run("after-tokenize",i),o}))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.render=function(){var t=this.props,e=t.Prism,n=t.language,r=t.code,i=t.children,o=this.getThemeDict(this.props),a=e.languages[n],s=void 0!==a?this.tokenize(e,r,a,n):[r],u=g(s);return i({tokens:u,className:"prism-code language-"+n,style:void 0!==o?o.root:{},getLineProps:this.getLineProps,getTokenProps:this.getTokenProps})},e}(r["Component"]),b=_,x=n("dEAq");n("qHiR"),n("foS9");function w(){return w=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},w.apply(this,arguments)}function E(t,e){return A(t)||T(t,e)||O(t,e)||S()}function S(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function O(t,e){if(t){if("string"===typeof t)return C(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?C(t,e):void 0}}function C(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function T(t,e){var n=null==t?null:"undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(t);!(a=(r=n.next()).done);a=!0)if(o.push(r.value),e&&o.length===e)break}catch(u){s=!0,i=u}finally{try{a||null==n["return"]||n["return"]()}finally{if(s)throw i}}return o}}function A(t){if(Array.isArray(t))return t}var k={acss:"css",axml:"xml"};e["a"]=function(t){var e=t.code,n=t.lang,r=t.showCopy,o=void 0===r||r,a=Object(x["useCopy"])(),s=E(a,2),u=s[0],c=s[1];return i.a.createElement("div",{className:"__dumi-default-code-block"},i.a.createElement(b,w({},l,{code:e,language:k[n]||n,theme:void 0}),(function(t){var n=t.className,r=t.style,a=t.tokens,s=t.getLineProps,l=t.getTokenProps;return i.a.createElement("pre",{className:n,style:r},o&&i.a.createElement("button",{className:"__dumi-default-icon __dumi-default-code-block-copy-btn","data-status":c,onClick:function(){return u(e)}}),a.map((function(t,e){return i.a.createElement("div",s({line:t,key:e}),t.map((function(t,e){return i.a.createElement("span",l({token:t,key:e}))})))})))})))}},H8j4:function(t,e,n){var r=n("QkVE");function i(t,e){var n=r(this,t),i=n.size;return n.set(t,e),this.size+=n.size==i?0:1,this}t.exports=i},HAuM:function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(String(t)+" is not a function");return t}},HDyB:function(t,e,n){var r=n("nmnc"),i=n("JHRd"),o=n("ljhN"),a=n("or5M"),s=n("7fqy"),u=n("rEGp"),c=1,l=2,f="[object Boolean]",h="[object Date]",p="[object Error]",d="[object Map]",v="[object Number]",g="[object RegExp]",m="[object Set]",y="[object String]",_="[object Symbol]",b="[object ArrayBuffer]",x="[object DataView]",w=r?r.prototype:void 0,E=w?w.valueOf:void 0;function S(t,e,n,r,w,S,O){switch(n){case x:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case b:return!(t.byteLength!=e.byteLength||!S(new i(t),new i(e)));case f:case h:case v:return o(+t,+e);case p:return t.name==e.name&&t.message==e.message;case g:case y:return t==e+"";case d:var C=s;case m:var T=r&c;if(C||(C=u),t.size!=e.size&&!T)return!1;var A=O.get(t);if(A)return A==e;r|=l,O.set(t,e);var k=a(C(t),C(e),r,w,S,O);return O["delete"](t),k;case _:if(E)return E.call(t)==E.call(e)}return!1}t.exports=S},HH4o:function(t,e,n){var r=n("tiKp"),i=r("iterator"),o=!1;try{var a=0,s={next:function(){return{done:!!a++}},return:function(){o=!0}};s[i]=function(){return this},Array.from(s,(function(){throw 2}))}catch(u){}t.exports=function(t,e){if(!e&&!o)return!1;var n=!1;try{var r={};r[i]=function(){return{next:function(){return{done:n=!0}}}},t(r)}catch(u){}return n}},HNyW:function(t,e,n){var r=n("NC/Y");t.exports=/(iphone|ipod|ipad).*applewebkit/i.test(r)},HOxn:function(t,e,n){var r=n("Cwc5"),i=n("Kz5y"),o=r(i,"Promise");t.exports=o},HYAF:function(t,e){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on "+t);return t}},"HaE+":function(t,e,n){"use strict";function r(t,e,n,r,i,o,a){try{var s=t[o](a),u=s.value}catch(c){return void n(c)}s.done?e(u):Promise.resolve(u).then(r,i)}function i(t){return function(){var e=this,n=arguments;return new Promise((function(i,o){var a=t.apply(e,n);function s(t){r(a,i,o,s,u,"next",t)}function u(t){r(a,i,o,s,u,"throw",t)}s(void 0)}))}}n.d(e,"a",(function(){return i}))},Hd5f:function(t,e,n){var r=n("0Dky"),i=n("tiKp"),o=n("LQDL"),a=i("species");t.exports=function(t){return o>=51||!r((function(){var e=[],n=e.constructor={};return n[a]=function(){return{foo:1}},1!==e[t](Boolean).foo}))}},HfwV:function(t,e,n){"use strict";var r=n("xnQO");function i(t,e,n,r,i){this.properties={},this.extent=n,this.type=0,this._pbf=t,this._geometry=-1,this._keys=r,this._values=i,t.readFields(o,this,e)}function o(t,e,n){1==t?e.id=n.readVarint():2==t?a(n,e):3==t?e.type=n.readVarint():4==t&&(e._geometry=n.pos)}function a(t,e){var n=t.readVarint()+t.pos;while(t.pos<n){var r=e._keys[t.readVarint()],i=e._values[t.readVarint()];e.properties[r]=i}}function s(t){var e=t.length;if(e<=1)return[t];for(var n,r,i=[],o=0;o<e;o++){var a=u(t[o]);0!==a&&(void 0===r&&(r=a<0),r===a<0?(n&&i.push(n),n=[t[o]]):n.push(t[o]))}return n&&i.push(n),i}function u(t){for(var e,n,r=0,i=0,o=t.length,a=o-1;i<o;a=i++)e=t[i],n=t[a],r+=(n.x-e.x)*(e.y+n.y);return r}t.exports=i,i.types=["Unknown","Point","LineString","Polygon"],i.prototype.loadGeometry=function(){var t=this._pbf;t.pos=this._geometry;var e,n=t.readVarint()+t.pos,i=1,o=0,a=0,s=0,u=[];while(t.pos<n){if(o<=0){var c=t.readVarint();i=7&c,o=c>>3}if(o--,1===i||2===i)a+=t.readSVarint(),s+=t.readSVarint(),1===i&&(e&&u.push(e),e=[]),e.push(new r(a,s));else{if(7!==i)throw new Error("unknown command "+i);e&&e.push(e[0].clone())}}return e&&u.push(e),u},i.prototype.bbox=function(){var t=this._pbf;t.pos=this._geometry;var e=t.readVarint()+t.pos,n=1,r=0,i=0,o=0,a=1/0,s=-1/0,u=1/0,c=-1/0;while(t.pos<e){if(r<=0){var l=t.readVarint();n=7&l,r=l>>3}if(r--,1===n||2===n)i+=t.readSVarint(),o+=t.readSVarint(),i<a&&(a=i),i>s&&(s=i),o<u&&(u=o),o>c&&(c=o);else if(7!==n)throw new Error("unknown command "+n)}return[a,u,s,c]},i.prototype.toGeoJSON=function(t,e,n){var r,o,a=this.extent*Math.pow(2,n),u=this.extent*t,c=this.extent*e,l=this.loadGeometry(),f=i.types[this.type];function h(t){for(var e=0;e<t.length;e++){var n=t[e],r=180-360*(n.y+c)/a;t[e]=[360*(n.x+u)/a-180,360/Math.PI*Math.atan(Math.exp(r*Math.PI/180))-90]}}switch(this.type){case 1:var p=[];for(r=0;r<l.length;r++)p[r]=l[r][0];l=p,h(l);break;case 2:for(r=0;r<l.length;r++)h(l[r]);break;case 3:for(l=s(l),r=0;r<l.length;r++)for(o=0;o<l[r].length;o++)h(l[r][o]);break}1===l.length?l=l[0]:f="Multi"+f;var d={type:"Feature",geometry:{type:f,coordinates:l},properties:this.properties};return"id"in this&&(d.id=this.id),d}},HiXI:function(t,e,n){"use strict";var r=n("I+eb"),i=n("WKiH").end,o=n("yNLB"),a=o("trimEnd"),s=a?function(){return i(this)}:"".trimEnd;r({target:"String",proto:!0,forced:a},{trimEnd:s,trimRight:s})},HpQ9:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ContainerSnapshot=void 0;var r=function(){function t(){}return t.of=function(e,n){var r=new t;return r.bindings=e,r.middleware=n,r},t}();e.ContainerSnapshot=r},HsHA:function(t,e){var n=Math.log;t.exports=Math.log1p||function(t){return(t=+t)>-1e-8&&t<1e-8?t-t*t/2:n(1+t)}},Hvzi:function(t,e){function n(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}t.exports=n},"I+eb":function(t,e,n){var r=n("2oRo"),i=n("Bs8V").f,o=n("kRJp"),a=n("busE"),s=n("zk60"),u=n("6JNq"),c=n("lMq5");t.exports=function(t,e){var n,l,f,h,p,d,v=t.target,g=t.global,m=t.stat;if(l=g?r:m?r[v]||s(v,{}):(r[v]||{}).prototype,l)for(f in e){if(p=e[f],t.noTargetGet?(d=i(l,f),h=d&&d.value):h=l[f],n=c(g?f:v+(m?".":"#")+f,t.forced),!n&&void 0!==h){if(typeof p===typeof h)continue;u(p,h)}(t.sham||h&&h.sham)&&o(p,"sham",!0),a(l,f,p,t)}}},I1Gw:function(t,e,n){var r=n("dG/n");r("split")},I8vh:function(t,e,n){var r=n("ppGB"),i=Math.max,o=Math.min;t.exports=function(t,e){var n=r(t);return n<0?i(n+e,0):o(n,e)}},I9xj:function(t,e,n){var r=n("1E5z");r(Math,"Math",!0)},"IL/d":function(t,e,n){"use strict";var r=n("iqeF"),i=n("67WC").exportTypedArrayStaticMethod,o=n("oHi+");i("from",o,r)},IZzc:function(t,e,n){"use strict";var r=n("67WC"),i=r.aTypedArray,o=r.exportTypedArrayMethod,a=[].sort;o("sort",(function(t){return a.call(i(this),t)}))},ImZN:function(t,e,n){var r=n("glrk"),i=n("6VoE"),o=n("UMSQ"),a=n("A2ZE"),s=n("NaFW"),u=n("m92n"),c=function(t,e){this.stopped=t,this.result=e},l=t.exports=function(t,e,n,l,f){var h,p,d,v,g,m,y,_=a(e,n,l?2:1);if(f)h=t;else{if(p=s(t),"function"!=typeof p)throw TypeError("Target is not iterable");if(i(p)){for(d=0,v=o(t.length);v>d;d++)if(g=l?_(r(y=t[d])[0],y[1]):_(t[d]),g&&g instanceof c)return g;return new c(!1)}h=p.call(t)}m=h.next;while(!(y=m.call(h)).done)if(g=u(h,_,y.value,l),"object"==typeof g&&g&&g instanceof c)return g;return new c(!1)};l.stop=function(t){return new c(!0,t)}},Ioao:function(t,e,n){var r=n("heNW"),i=Math.max;function o(t,e,n){return e=i(void 0===e?t.length-1:e,0),function(){var o=arguments,a=-1,s=i(o.length-e,0),u=Array(s);while(++a<s)u[a]=o[e+a];a=-1;var c=Array(e+1);while(++a<e)c[a]=o[a];return c[e]=n(u),r(t,this,c)}}t.exports=o},IyRk:function(t,e){(function(e){t.exports=function(){var t={873:function(t){var e;e=function(){return this}();try{e=e||new Function("return this")()}catch(n){"object"===typeof window&&(e=window)}t.exports=e}},n={};function r(e){if(n[e])return n[e].exports;var i=n[e]={exports:{}},o=!0;try{t[e](i,i.exports,r),o=!1}finally{o&&delete n[e]}return i.exports}return r.ab=e+"/",r(873)}()}).call(this,"/")},JBy8:function(t,e,n){var r=n("yoRg"),i=n("eDl+"),o=i.concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return r(t,o)}},JHRd:function(t,e,n){var r=n("Kz5y"),i=r.Uint8Array;t.exports=i},JHgL:function(t,e,n){var r=n("QkVE");function i(t){return r(this,t).get(t)}t.exports=i},JSQU:function(t,e,n){var r=n("YESw"),i="__lodash_hash_undefined__";function o(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=r&&void 0===e?i:e,this}t.exports=o},JTJg:function(t,e,n){"use strict";var r=n("I+eb"),i=n("WjRb"),o=n("HYAF"),a=n("qxPZ");r({target:"String",proto:!0,forced:!a("includes")},{includes:function(t){return!!~String(o(this)).indexOf(i(t),arguments.length>1?arguments[1]:void 0)}})},JTzB:function(t,e,n){var r=n("NykK"),i=n("ExA7"),o="[object Arguments]";function a(t){return i(t)&&r(t)==o}t.exports=a},JX7q:function(t,e,n){"use strict";function r(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}n.d(e,"a",(function(){return r}))},JevA:function(t,e,n){var r=n("I+eb"),i=n("wg0c");r({target:"Number",stat:!0,forced:Number.parseInt!=i},{parseInt:i})},JfAA:function(t,e,n){"use strict";var r=n("busE"),i=n("glrk"),o=n("0Dky"),a=n("rW0t"),s="toString",u=RegExp.prototype,c=u[s],l=o((function(){return"/a/b"!=c.call({source:"a",flags:"b"})})),f=c.name!=s;(l||f)&&r(RegExp.prototype,s,(function(){var t=i(this),e=String(t.source),n=t.flags,r=String(void 0===n&&t instanceof RegExp&&!("flags"in u)?a.call(t):n);return"/"+e+"/"+r}),{unsafe:!0})},Ji7U:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n("s4An");function i(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Object(r["a"])(t,e)}},JiZb:function(t,e,n){"use strict";var r=n("0GbY"),i=n("m/L8"),o=n("tiKp"),a=n("g6v/"),s=o("species");t.exports=function(t){var e=r(t),n=i.f;a&&e&&!e[s]&&n(e,s,{configurable:!0,get:function(){return this}})}},Junv:function(t,e,n){"use strict";var r=n("I+eb"),i=n("6LWA"),o=[].reverse,a=[1,2];r({target:"Array",proto:!0,forced:String(a)===String(a.reverse())},{reverse:function(){return i(this)&&(this.length=this.length),o.call(this)}})},JwUS:function(t,e,n){"use strict";var r=n("I+eb"),i=n("xDBR"),o=n("glrk"),a=n("HAuM"),s=n("WGBp"),u=n("ImZN");r({target:"Set",proto:!0,real:!0,forced:i},{reduce:function(t){var e=o(this),n=s(e),r=arguments.length<2,i=r?void 0:arguments[1];if(a(t),u(n,(function(n){r?(r=!1,i=n):i=t(i,n,n,e)}),void 0,!1,!0),r)throw TypeError("Reduce of empty set with no initial value");return i}})},KMkd:function(t,e){function n(){this.__data__=[],this.size=0}t.exports=n},KQm4:function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var r=n("a3WO");function i(t){if(Array.isArray(t))return Object(r["a"])(t)}function o(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}var a=n("BsWD");function s(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function u(t){return i(t)||o(t)||Object(a["a"])(t)||s()}},KcUY:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=void 0;var r=s(n("q1tI")),i=o(n("nLCz"));function o(t){return t&&t.__esModule?t:{default:t}}function a(t){if("function"!==typeof WeakMap)return null;var e=new WeakMap,n=new WeakMap;return(a=function(t){return t?n:e})(t)}function s(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!==u(t)&&"function"!==typeof t)return{default:t};var n=a(e);if(n&&n.has(t))return n.get(t);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if("default"!==o&&Object.prototype.hasOwnProperty.call(t,o)){var s=i?Object.getOwnPropertyDescriptor(t,o):null;s&&(s.get||s.set)?Object.defineProperty(r,o,s):r[o]=t[o]}return r["default"]=t,n&&n.set(t,r),r}function u(t){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},u(t)}function c(t,e){var n="undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=h(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n["return"]||n["return"]()}finally{if(s)throw o}}}}function l(t,e){return v(t)||d(t,e)||h(t,e)||f()}function f(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function h(t,e){if(t){if("string"===typeof t)return p(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?p(t,e):void 0}}function p(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function d(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o,a,s=[],u=!0,c=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);u=!0);}catch(l){c=!0,i=l}finally{try{if(!u&&null!=n["return"]&&(a=n["return"](),Object(a)!==a))return}finally{if(c)throw i}}return s}}function v(t){if(Array.isArray(t))return t}function g(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function m(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?g(Object(n),!0).forEach((function(e){y(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function y(t,e,n){return e=_(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _(t){var e=b(t,"string");return"symbol"===u(e)?e:String(e)}function b(t,e){if("object"!==u(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==u(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}var x=function(t,e){var n=function(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];var o=r[1].replace(/([^^])\/$/,"$1");return m(m({},(null===(t=r[0].find((function(t){var e=t.path;return e===o})))||void 0===t?void 0:t.meta)||{}),{},{__pathname:e})},i=(0,r.useState)(n(t,e)),o=l(i,2),a=o[0],s=o[1];return(0,r.useLayoutEffect)((function(){s(n(t,e))}),[e]),a},w=function(t,e){var n=function(){for(var e,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(null===(e=r[0].find((function(t){return new RegExp("/".concat(t.name,"(/|$)")).test(r[1])})))||void 0===e?void 0:e.name)||t[0].name},i=(0,r.useState)(n(t,e)),o=l(i,2),a=o[0],s=o[1];return(0,r.useLayoutEffect)((function(){s(n(t,e))}),[e]),a},E=function(t,e,n){var i=function(){for(var t,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];for(var i=n[0].navs[n[1]]||[],o="*",a=i.length-1;a>=0;a-=1){var s=i[a],u=[s].concat(s.children).filter(Boolean),c=u.find((function(t){return t.path&&new RegExp("^".concat(t.path.replace(/\.html$/,""),"(/|.|$)")).test(n[2])}));if(c){o=c.path;break}}return(null===(t=n[0].menus[n[1]])||void 0===t?void 0:t[o])||[]},o=(0,r.useState)(i(t,e,n)),a=l(o,2),s=a[0],u=a[1];return(0,r.useLayoutEffect)((function(){u(i(t,e,n))}),[t.navs,t.menus,e,n]),s},S=function(t,e,n){var i=function(){for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return r[0]===r[1][0].name?r[2].path:"".concat(n.path,"/").concat(t).replace(/\/\//,"/")},o=(0,r.useState)(i(t,e,n)),a=l(o,2),s=a[0],u=a[1];return(0,r.useLayoutEffect)((function(){u(i(t,e,n))}),[t]),s},O=function t(e){var n,r,i=c(e);try{for(i.s();!(r=i.n()).done;){var o=r.value;if(o.__dumiRoot){n=o.routes;break}if(o.routes&&(n=t(o.routes)))break}}catch(a){i.e(a)}finally{i.f()}return n},C=function(t){var e=t.location,n=t.route,o=t.children,a=t.config,s=t.apis,u=t.demos,c=e.pathname.replace(n.path.replace(/^\/$/,"//"),""),l=O(t.routes)||[],f=x(l,e.pathname),h=w(a.locales,c),p=E(a,h,e.pathname),d=S(h,a.locales,n);return r["default"].createElement(i["default"].Provider,{value:{config:a,meta:f.__pathname===e.pathname?f:{},locale:h,nav:a.navs[h]||[],menu:p,base:d,routes:l,apis:s,demos:u}},o)},T=C;e["default"]=T},KfNM:function(t,e){var n=Object.prototype,r=n.toString;function i(t){return r.call(t)}t.exports=i},KhsS:function(t,e,n){var r=n("dG/n");r("match")},KrxN:function(t,e,n){var r=n("I+eb"),i=180/Math.PI;r({target:"Math",stat:!0},{degrees:function(t){return t*i}})},Kwbf:function(t,e,n){"use strict";var r={};function i(t,e){0}function o(t,e,n){e||r[n]||(t(!1,n),r[n]=!0)}function a(t,e){o(i,t,e)}e["a"]=a},Kz25:function(t,e,n){"use strict";n("PKPk");var r,i=n("I+eb"),o=n("g6v/"),a=n("DTth"),s=n("2oRo"),u=n("N+g0"),c=n("busE"),l=n("GarU"),f=n("UTVS"),h=n("YNrV"),p=n("TfTi"),d=n("ZUd8").codeAt,v=n("X7LM"),g=n("1E5z"),m=n("mGGf"),y=n("afO8"),_=s.URL,b=m.URLSearchParams,x=m.getState,w=y.set,E=y.getterFor("URL"),S=Math.floor,O=Math.pow,C="Invalid authority",T="Invalid scheme",A="Invalid host",k="Invalid port",M=/[A-Za-z]/,P=/[\d+-.A-Za-z]/,R=/\d/,j=/^(0x|0X)/,I=/^[0-7]+$/,L=/^\d+$/,N=/^[\dA-Fa-f]+$/,D=/[\u0000\u0009\u000A\u000D #%/:?@[\\]]/,F=/[\u0000\u0009\u000A\u000D #/:?@[\\]]/,B=/^[\u0000-\u001F ]+|[\u0000-\u001F ]+$/g,z=/[\u0009\u000A\u000D]/g,U=function(t,e){var n,r,i;if("["==e.charAt(0)){if("]"!=e.charAt(e.length-1))return A;if(n=H(e.slice(1,-1)),!n)return A;t.host=n}else if($(t)){if(e=v(e),D.test(e))return A;if(n=V(e),null===n)return A;t.host=n}else{if(F.test(e))return A;for(n="",r=p(e),i=0;i<r.length;i++)n+=K(r[i],Z);t.host=n}},V=function(t){var e,n,r,i,o,a,s,u=t.split(".");if(u.length&&""==u[u.length-1]&&u.pop(),e=u.length,e>4)return t;for(n=[],r=0;r<e;r++){if(i=u[r],""==i)return t;if(o=10,i.length>1&&"0"==i.charAt(0)&&(o=j.test(i)?16:8,i=i.slice(8==o?1:2)),""===i)a=0;else{if(!(10==o?L:8==o?I:N).test(i))return t;a=parseInt(i,o)}n.push(a)}for(r=0;r<e;r++)if(a=n[r],r==e-1){if(a>=O(256,5-e))return null}else if(a>255)return null;for(s=n.pop(),r=0;r<n.length;r++)s+=n[r]*O(256,3-r);return s},H=function(t){var e,n,r,i,o,a,s,u=[0,0,0,0,0,0,0,0],c=0,l=null,f=0,h=function(){return t.charAt(f)};if(":"==h()){if(":"!=t.charAt(1))return;f+=2,c++,l=c}while(h()){if(8==c)return;if(":"!=h()){e=n=0;while(n<4&&N.test(h()))e=16*e+parseInt(h(),16),f++,n++;if("."==h()){if(0==n)return;if(f-=n,c>6)return;r=0;while(h()){if(i=null,r>0){if(!("."==h()&&r<4))return;f++}if(!R.test(h()))return;while(R.test(h())){if(o=parseInt(h(),10),null===i)i=o;else{if(0==i)return;i=10*i+o}if(i>255)return;f++}u[c]=256*u[c]+i,r++,2!=r&&4!=r||c++}if(4!=r)return;break}if(":"==h()){if(f++,!h())return}else if(h())return;u[c++]=e}else{if(null!==l)return;f++,c++,l=c}}if(null!==l){a=c-l,c=7;while(0!=c&&a>0)s=u[c],u[c--]=u[l+a-1],u[l+--a]=s}else if(8!=c)return;return u},G=function(t){for(var e=null,n=1,r=null,i=0,o=0;o<8;o++)0!==t[o]?(i>n&&(e=r,n=i),r=null,i=0):(null===r&&(r=o),++i);return i>n&&(e=r,n=i),e},W=function(t){var e,n,r,i;if("number"==typeof t){for(e=[],n=0;n<4;n++)e.unshift(t%256),t=S(t/256);return e.join(".")}if("object"==typeof t){for(e="",r=G(t),n=0;n<8;n++)i&&0===t[n]||(i&&(i=!1),r===n?(e+=n?":":"::",i=!0):(e+=t[n].toString(16),n<7&&(e+=":")));return"["+e+"]"}return t},Z={},Y=h({},Z,{" ":1,'"':1,"<":1,">":1,"`":1}),X=h({},Y,{"#":1,"?":1,"{":1,"}":1}),q=h({},X,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),K=function(t,e){var n=d(t,0);return n>32&&n<127&&!f(e,t)?t:encodeURIComponent(t)},Q={ftp:21,file:null,http:80,https:443,ws:80,wss:443},$=function(t){return f(Q,t.scheme)},J=function(t){return""!=t.username||""!=t.password},tt=function(t){return!t.host||t.cannotBeABaseURL||"file"==t.scheme},et=function(t,e){var n;return 2==t.length&&M.test(t.charAt(0))&&(":"==(n=t.charAt(1))||!e&&"|"==n)},nt=function(t){var e;return t.length>1&&et(t.slice(0,2))&&(2==t.length||"/"===(e=t.charAt(2))||"\\"===e||"?"===e||"#"===e)},rt=function(t){var e=t.path,n=e.length;!n||"file"==t.scheme&&1==n&&et(e[0],!0)||e.pop()},it=function(t){return"."===t||"%2e"===t.toLowerCase()},ot=function(t){return t=t.toLowerCase(),".."===t||"%2e."===t||".%2e"===t||"%2e%2e"===t},at={},st={},ut={},ct={},lt={},ft={},ht={},pt={},dt={},vt={},gt={},mt={},yt={},_t={},bt={},xt={},wt={},Et={},St={},Ot={},Ct={},Tt=function(t,e,n,i){var o,a,s,u,c=n||at,l=0,h="",d=!1,v=!1,g=!1;n||(t.scheme="",t.username="",t.password="",t.host=null,t.port=null,t.path=[],t.query=null,t.fragment=null,t.cannotBeABaseURL=!1,e=e.replace(B,"")),e=e.replace(z,""),o=p(e);while(l<=o.length){switch(a=o[l],c){case at:if(!a||!M.test(a)){if(n)return T;c=ut;continue}h+=a.toLowerCase(),c=st;break;case st:if(a&&(P.test(a)||"+"==a||"-"==a||"."==a))h+=a.toLowerCase();else{if(":"!=a){if(n)return T;h="",c=ut,l=0;continue}if(n&&($(t)!=f(Q,h)||"file"==h&&(J(t)||null!==t.port)||"file"==t.scheme&&!t.host))return;if(t.scheme=h,n)return void($(t)&&Q[t.scheme]==t.port&&(t.port=null));h="","file"==t.scheme?c=_t:$(t)&&i&&i.scheme==t.scheme?c=ct:$(t)?c=pt:"/"==o[l+1]?(c=lt,l++):(t.cannotBeABaseURL=!0,t.path.push(""),c=St)}break;case ut:if(!i||i.cannotBeABaseURL&&"#"!=a)return T;if(i.cannotBeABaseURL&&"#"==a){t.scheme=i.scheme,t.path=i.path.slice(),t.query=i.query,t.fragment="",t.cannotBeABaseURL=!0,c=Ct;break}c="file"==i.scheme?_t:ft;continue;case ct:if("/"!=a||"/"!=o[l+1]){c=ft;continue}c=dt,l++;break;case lt:if("/"==a){c=vt;break}c=Et;continue;case ft:if(t.scheme=i.scheme,a==r)t.username=i.username,t.password=i.password,t.host=i.host,t.port=i.port,t.path=i.path.slice(),t.query=i.query;else if("/"==a||"\\"==a&&$(t))c=ht;else if("?"==a)t.username=i.username,t.password=i.password,t.host=i.host,t.port=i.port,t.path=i.path.slice(),t.query="",c=Ot;else{if("#"!=a){t.username=i.username,t.password=i.password,t.host=i.host,t.port=i.port,t.path=i.path.slice(),t.path.pop(),c=Et;continue}t.username=i.username,t.password=i.password,t.host=i.host,t.port=i.port,t.path=i.path.slice(),t.query=i.query,t.fragment="",c=Ct}break;case ht:if(!$(t)||"/"!=a&&"\\"!=a){if("/"!=a){t.username=i.username,t.password=i.password,t.host=i.host,t.port=i.port,c=Et;continue}c=vt}else c=dt;break;case pt:if(c=dt,"/"!=a||"/"!=h.charAt(l+1))continue;l++;break;case dt:if("/"!=a&&"\\"!=a){c=vt;continue}break;case vt:if("@"==a){d&&(h="%40"+h),d=!0,s=p(h);for(var m=0;m<s.length;m++){var y=s[m];if(":"!=y||g){var _=K(y,q);g?t.password+=_:t.username+=_}else g=!0}h=""}else if(a==r||"/"==a||"?"==a||"#"==a||"\\"==a&&$(t)){if(d&&""==h)return C;l-=p(h).length+1,h="",c=gt}else h+=a;break;case gt:case mt:if(n&&"file"==t.scheme){c=xt;continue}if(":"!=a||v){if(a==r||"/"==a||"?"==a||"#"==a||"\\"==a&&$(t)){if($(t)&&""==h)return A;if(n&&""==h&&(J(t)||null!==t.port))return;if(u=U(t,h),u)return u;if(h="",c=wt,n)return;continue}"["==a?v=!0:"]"==a&&(v=!1),h+=a}else{if(""==h)return A;if(u=U(t,h),u)return u;if(h="",c=yt,n==mt)return}break;case yt:if(!R.test(a)){if(a==r||"/"==a||"?"==a||"#"==a||"\\"==a&&$(t)||n){if(""!=h){var b=parseInt(h,10);if(b>65535)return k;t.port=$(t)&&b===Q[t.scheme]?null:b,h=""}if(n)return;c=wt;continue}return k}h+=a;break;case _t:if(t.scheme="file","/"==a||"\\"==a)c=bt;else{if(!i||"file"!=i.scheme){c=Et;continue}if(a==r)t.host=i.host,t.path=i.path.slice(),t.query=i.query;else if("?"==a)t.host=i.host,t.path=i.path.slice(),t.query="",c=Ot;else{if("#"!=a){nt(o.slice(l).join(""))||(t.host=i.host,t.path=i.path.slice(),rt(t)),c=Et;continue}t.host=i.host,t.path=i.path.slice(),t.query=i.query,t.fragment="",c=Ct}}break;case bt:if("/"==a||"\\"==a){c=xt;break}i&&"file"==i.scheme&&!nt(o.slice(l).join(""))&&(et(i.path[0],!0)?t.path.push(i.path[0]):t.host=i.host),c=Et;continue;case xt:if(a==r||"/"==a||"\\"==a||"?"==a||"#"==a){if(!n&&et(h))c=Et;else if(""==h){if(t.host="",n)return;c=wt}else{if(u=U(t,h),u)return u;if("localhost"==t.host&&(t.host=""),n)return;h="",c=wt}continue}h+=a;break;case wt:if($(t)){if(c=Et,"/"!=a&&"\\"!=a)continue}else if(n||"?"!=a)if(n||"#"!=a){if(a!=r&&(c=Et,"/"!=a))continue}else t.fragment="",c=Ct;else t.query="",c=Ot;break;case Et:if(a==r||"/"==a||"\\"==a&&$(t)||!n&&("?"==a||"#"==a)){if(ot(h)?(rt(t),"/"==a||"\\"==a&&$(t)||t.path.push("")):it(h)?"/"==a||"\\"==a&&$(t)||t.path.push(""):("file"==t.scheme&&!t.path.length&&et(h)&&(t.host&&(t.host=""),h=h.charAt(0)+":"),t.path.push(h)),h="","file"==t.scheme&&(a==r||"?"==a||"#"==a))while(t.path.length>1&&""===t.path[0])t.path.shift();"?"==a?(t.query="",c=Ot):"#"==a&&(t.fragment="",c=Ct)}else h+=K(a,X);break;case St:"?"==a?(t.query="",c=Ot):"#"==a?(t.fragment="",c=Ct):a!=r&&(t.path[0]+=K(a,Z));break;case Ot:n||"#"!=a?a!=r&&("'"==a&&$(t)?t.query+="%27":t.query+="#"==a?"%23":K(a,Z)):(t.fragment="",c=Ct);break;case Ct:a!=r&&(t.fragment+=K(a,Y));break}l++}},At=function(t){var e,n,r=l(this,At,"URL"),i=arguments.length>1?arguments[1]:void 0,a=String(t),s=w(r,{type:"URL"});if(void 0!==i)if(i instanceof At)e=E(i);else if(n=Tt(e={},String(i)),n)throw TypeError(n);if(n=Tt(s,a,null,e),n)throw TypeError(n);var u=s.searchParams=new b,c=x(u);c.updateSearchParams(s.query),c.updateURL=function(){s.query=String(u)||null},o||(r.href=Mt.call(r),r.origin=Pt.call(r),r.protocol=Rt.call(r),r.username=jt.call(r),r.password=It.call(r),r.host=Lt.call(r),r.hostname=Nt.call(r),r.port=Dt.call(r),r.pathname=Ft.call(r),r.search=Bt.call(r),r.searchParams=zt.call(r),r.hash=Ut.call(r))},kt=At.prototype,Mt=function(){var t=E(this),e=t.scheme,n=t.username,r=t.password,i=t.host,o=t.port,a=t.path,s=t.query,u=t.fragment,c=e+":";return null!==i?(c+="//",J(t)&&(c+=n+(r?":"+r:"")+"@"),c+=W(i),null!==o&&(c+=":"+o)):"file"==e&&(c+="//"),c+=t.cannotBeABaseURL?a[0]:a.length?"/"+a.join("/"):"",null!==s&&(c+="?"+s),null!==u&&(c+="#"+u),c},Pt=function(){var t=E(this),e=t.scheme,n=t.port;if("blob"==e)try{return new URL(e.path[0]).origin}catch(r){return"null"}return"file"!=e&&$(t)?e+"://"+W(t.host)+(null!==n?":"+n:""):"null"},Rt=function(){return E(this).scheme+":"},jt=function(){return E(this).username},It=function(){return E(this).password},Lt=function(){var t=E(this),e=t.host,n=t.port;return null===e?"":null===n?W(e):W(e)+":"+n},Nt=function(){var t=E(this).host;return null===t?"":W(t)},Dt=function(){var t=E(this).port;return null===t?"":String(t)},Ft=function(){var t=E(this),e=t.path;return t.cannotBeABaseURL?e[0]:e.length?"/"+e.join("/"):""},Bt=function(){var t=E(this).query;return t?"?"+t:""},zt=function(){return E(this).searchParams},Ut=function(){var t=E(this).fragment;return t?"#"+t:""},Vt=function(t,e){return{get:t,set:e,configurable:!0,enumerable:!0}};if(o&&u(kt,{href:Vt(Mt,(function(t){var e=E(this),n=String(t),r=Tt(e,n);if(r)throw TypeError(r);x(e.searchParams).updateSearchParams(e.query)})),origin:Vt(Pt),protocol:Vt(Rt,(function(t){var e=E(this);Tt(e,String(t)+":",at)})),username:Vt(jt,(function(t){var e=E(this),n=p(String(t));if(!tt(e)){e.username="";for(var r=0;r<n.length;r++)e.username+=K(n[r],q)}})),password:Vt(It,(function(t){var e=E(this),n=p(String(t));if(!tt(e)){e.password="";for(var r=0;r<n.length;r++)e.password+=K(n[r],q)}})),host:Vt(Lt,(function(t){var e=E(this);e.cannotBeABaseURL||Tt(e,String(t),gt)})),hostname:Vt(Nt,(function(t){var e=E(this);e.cannotBeABaseURL||Tt(e,String(t),mt)})),port:Vt(Dt,(function(t){var e=E(this);tt(e)||(t=String(t),""==t?e.port=null:Tt(e,t,yt))})),pathname:Vt(Ft,(function(t){var e=E(this);e.cannotBeABaseURL||(e.path=[],Tt(e,t+"",wt))})),search:Vt(Bt,(function(t){var e=E(this);t=String(t),""==t?e.query=null:("?"==t.charAt(0)&&(t=t.slice(1)),e.query="",Tt(e,t,Ot)),x(e.searchParams).updateSearchParams(e.query)})),searchParams:Vt(zt),hash:Vt(Ut,(function(t){var e=E(this);t=String(t),""!=t?("#"==t.charAt(0)&&(t=t.slice(1)),e.fragment="",Tt(e,t,Ct)):e.fragment=null}))}),c(kt,"toJSON",(function(){return Mt.call(this)}),{enumerable:!0}),c(kt,"toString",(function(){return Mt.call(this)}),{enumerable:!0}),_){var Ht=_.createObjectURL,Gt=_.revokeObjectURL;Ht&&c(At,"createObjectURL",(function(t){return Ht.apply(_,arguments)})),Gt&&c(At,"revokeObjectURL",(function(t){return Gt.apply(_,arguments)}))}g(At,"URL"),i({global:!0,forced:!a,sham:!o},{URL:At})},Kz5y:function(t,e,n){var r=n("WFqU"),i="object"==typeof self&&self&&self.Object===Object&&self,o=r||i||Function("return this")();t.exports=o},L8xA:function(t,e){function n(t){var e=this.__data__,n=e["delete"](t);return this.size=e.size,n}t.exports=n},"LK+K":function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var r=n("foSv"),i=n("2WcH"),o=n("md7G");function a(t){var e=Object(i["a"])();return function(){var n,i=Object(r["a"])(t);if(e){var a=Object(r["a"])(this).constructor;n=Reflect.construct(i,arguments,a)}else n=i.apply(this,arguments);return Object(o["a"])(this,n)}}},LKBx:function(t,e,n){"use strict";var r=n("I+eb"),i=n("Bs8V").f,o=n("UMSQ"),a=n("WjRb"),s=n("HYAF"),u=n("qxPZ"),c=n("xDBR"),l="".startsWith,f=Math.min,h=u("startsWith"),p=!c&&!h&&!!function(){var t=i(String.prototype,"startsWith");return t&&!t.writable}();r({target:"String",proto:!0,forced:!p&&!h},{startsWith:function(t){var e=String(s(this));a(t);var n=o(f(arguments.length>1?arguments[1]:void 0,e.length)),r=String(t);return l?l.call(e,r,n):e.slice(n,n+r.length)===r}})},LKzl:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BindingWhenOnSyntax=void 0;var r=n("406g"),i=n("z4Hk"),o=function(){function t(t){this._binding=t,this._bindingWhenSyntax=new i.BindingWhenSyntax(this._binding),this._bindingOnSyntax=new r.BindingOnSyntax(this._binding)}return t.prototype.when=function(t){return this._bindingWhenSyntax.when(t)},t.prototype.whenTargetNamed=function(t){return this._bindingWhenSyntax.whenTargetNamed(t)},t.prototype.whenTargetIsDefault=function(){return this._bindingWhenSyntax.whenTargetIsDefault()},t.prototype.whenTargetTagged=function(t,e){return this._bindingWhenSyntax.whenTargetTagged(t,e)},t.prototype.whenInjectedInto=function(t){return this._bindingWhenSyntax.whenInjectedInto(t)},t.prototype.whenParentNamed=function(t){return this._bindingWhenSyntax.whenParentNamed(t)},t.prototype.whenParentTagged=function(t,e){return this._bindingWhenSyntax.whenParentTagged(t,e)},t.prototype.whenAnyAncestorIs=function(t){return this._bindingWhenSyntax.whenAnyAncestorIs(t)},t.prototype.whenNoAncestorIs=function(t){return this._bindingWhenSyntax.whenNoAncestorIs(t)},t.prototype.whenAnyAncestorNamed=function(t){return this._bindingWhenSyntax.whenAnyAncestorNamed(t)},t.prototype.whenAnyAncestorTagged=function(t,e){return this._bindingWhenSyntax.whenAnyAncestorTagged(t,e)},t.prototype.whenNoAncestorNamed=function(t){return this._bindingWhenSyntax.whenNoAncestorNamed(t)},t.prototype.whenNoAncestorTagged=function(t,e){return this._bindingWhenSyntax.whenNoAncestorTagged(t,e)},t.prototype.whenAnyAncestorMatches=function(t){return this._bindingWhenSyntax.whenAnyAncestorMatches(t)},t.prototype.whenNoAncestorMatches=function(t){return this._bindingWhenSyntax.whenNoAncestorMatches(t)},t.prototype.onActivation=function(t){return this._bindingOnSyntax.onActivation(t)},t}();e.BindingWhenOnSyntax=o},LPSS:function(t,e,n){var r,i,o,a=n("2oRo"),s=n("0Dky"),u=n("xrYK"),c=n("A2ZE"),l=n("G+Rx"),f=n("zBJ4"),h=n("HNyW"),p=a.location,d=a.setImmediate,v=a.clearImmediate,g=a.process,m=a.MessageChannel,y=a.Dispatch,_=0,b={},x="onreadystatechange",w=function(t){if(b.hasOwnProperty(t)){var e=b[t];delete b[t],e()}},E=function(t){return function(){w(t)}},S=function(t){w(t.data)},O=function(t){a.postMessage(t+"",p.protocol+"//"+p.host)};d&&v||(d=function(t){var e=[],n=1;while(arguments.length>n)e.push(arguments[n++]);return b[++_]=function(){("function"==typeof t?t:Function(t)).apply(void 0,e)},r(_),_},v=function(t){delete b[t]},"process"==u(g)?r=function(t){g.nextTick(E(t))}:y&&y.now?r=function(t){y.now(E(t))}:m&&!h?(i=new m,o=i.port2,i.port1.onmessage=S,r=c(o.postMessage,o,1)):!a.addEventListener||"function"!=typeof postMessage||a.importScripts||s(O)||"file:"===p.protocol?r=x in f("script")?function(t){l.appendChild(f("script"))[x]=function(){l.removeChild(this),w(t)}}:function(t){setTimeout(E(t),0)}:(r=O,a.addEventListener("message",S,!1))),t.exports={set:d,clear:v}},LQDL:function(t,e,n){var r,i,o=n("2oRo"),a=n("NC/Y"),s=o.process,u=s&&s.versions,c=u&&u.v8;c?(r=c.split("."),i=r[0]+r[1]):a&&(r=a.match(/Edge\/(\d+)/),(!r||r[1]>=74)&&(r=a.match(/Chrome\/(\d+)/),r&&(i=r[1]))),t.exports=i&&+i},LXxW:function(t,e){function n(t,e){var n=-1,r=null==t?0:t.length,i=0,o=[];while(++n<r){var a=t[n];e(a,n,t)&&(o[i++]=a)}return o}t.exports=n},LcsW:function(t,e,n){var r=n("kekF"),i=r(Object.getPrototypeOf,Object);t.exports=i},LgvC:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Binding=void 0;var r=n("FV85"),i=n("d9O0"),o=function(){function t(t,e){this.id=i.id(),this.activated=!1,this.serviceIdentifier=t,this.scope=e,this.type=r.BindingTypeEnum.Invalid,this.constraint=function(t){return!0},this.implementationType=null,this.cache=null,this.factory=null,this.provider=null,this.onActivation=null,this.dynamicValue=null}return t.prototype.clone=function(){var e=new t(this.serviceIdentifier,this.scope);return e.activated=e.scope===r.BindingScopeEnum.Singleton&&this.activated,e.implementationType=this.implementationType,e.dynamicValue=this.dynamicValue,e.scope=this.scope,e.type=this.type,e.factory=this.factory,e.provider=this.provider,e.constraint=this.constraint,e.onActivation=this.onActivation,e.cache=this.cache,e},t}();e.Binding=o},LsHQ:function(t,e,n){var r=n("EA7m"),i=n("mv/X");function o(t){return r((function(e,n){var r=-1,o=n.length,a=o>1?n[o-1]:void 0,s=o>2?n[2]:void 0;a=t.length>3&&"function"==typeof a?(o--,a):void 0,s&&i(n[0],n[1],s)&&(a=o<3?void 0:a,o=1),e=Object(e);while(++r<o){var u=n[r];u&&t(e,u,r,a)}return e}))}t.exports=o},LtsZ:function(t,e,n){"use strict";n.r(e),n.d(e,"createBrowserHistory",(function(){return i["a"]})),n.d(e,"createHashHistory",(function(){return i["b"]})),n.d(e,"createMemoryHistory",(function(){return i["d"]})),n.d(e,"__RouterContext",(function(){return o["h"]})),n.d(e,"Link",(function(){return y})),n.d(e,"MemoryRouter",(function(){return o["a"]})),n.d(e,"NavLink",(function(){return w})),n.d(e,"Prompt",(function(){return o["b"]})),n.d(e,"Redirect",(function(){return o["c"]})),n.d(e,"Route",(function(){return o["d"]})),n.d(e,"Router",(function(){return o["e"]})),n.d(e,"StaticRouter",(function(){return o["f"]})),n.d(e,"Switch",(function(){return o["g"]})),n.d(e,"matchPath",(function(){return o["i"]})),n.d(e,"useHistory",(function(){return o["j"]})),n.d(e,"useLocation",(function(){return o["k"]})),n.d(e,"useParams",(function(){return o["l"]})),n.d(e,"useRouteMatch",(function(){return o["m"]})),n.d(e,"withRouter",(function(){return o["n"]})),n.d(e,"ApplyPluginsType",(function(){return et})),n.d(e,"Plugin",(function(){return ot})),n.d(e,"dynamic",(function(){return J})),n.d(e,"isBrowser",(function(){return nt}));var r=n("qLMh"),i=n("YS25"),o=n("Ty5D"),a=n("dI71"),s=n("q1tI"),u=n.n(s),c=n("wx14"),l=n("zLVn"),f=n("9R94");u.a.Component;u.a.Component;var h=function(t,e){return"function"===typeof t?t(e):t},p=function(t,e){return"string"===typeof t?Object(i["c"])(t,null,null,e):t},d=function(t){return t},v=u.a.forwardRef;function g(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}"undefined"===typeof v&&(v=d);var m=v((function(t,e){var n=t.innerRef,r=t.navigate,i=t.onClick,o=Object(l["a"])(t,["innerRef","navigate","onClick"]),a=o.target,s=Object(c["a"])({},o,{onClick:function(t){try{i&&i(t)}catch(e){throw t.preventDefault(),e}t.defaultPrevented||0!==t.button||a&&"_self"!==a||g(t)||(t.preventDefault(),r())}});return s.ref=d!==v&&e||n,u.a.createElement("a",s)}));var y=v((function(t,e){var n=t.component,r=void 0===n?m:n,i=t.replace,a=t.to,s=t.innerRef,g=Object(l["a"])(t,["component","replace","to","innerRef"]);return u.a.createElement(o["h"].Consumer,null,(function(t){t||Object(f["a"])(!1);var n=t.history,o=p(h(a,t.location),t.location),l=o?n.createHref(o):"",m=Object(c["a"])({},g,{href:l,navigate:function(){var e=h(a,t.location),r=i?n.replace:n.push;r(e)}});return d!==v?m.ref=e||s:m.innerRef=s,u.a.createElement(r,m)}))})),_=function(t){return t},b=u.a.forwardRef;function x(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.filter((function(t){return t})).join(" ")}"undefined"===typeof b&&(b=_);var w=b((function(t,e){var n=t["aria-current"],r=void 0===n?"page":n,i=t.activeClassName,a=void 0===i?"active":i,s=t.activeStyle,d=t.className,v=t.exact,g=t.isActive,m=t.location,w=t.sensitive,E=t.strict,S=t.style,O=t.to,C=t.innerRef,T=Object(l["a"])(t,["aria-current","activeClassName","activeStyle","className","exact","isActive","location","sensitive","strict","style","to","innerRef"]);return u.a.createElement(o["h"].Consumer,null,(function(t){t||Object(f["a"])(!1);var n=m||t.location,i=p(h(O,n),n),l=i.pathname,A=l&&l.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1"),k=A?Object(o["i"])(n.pathname,{path:A,exact:v,sensitive:w,strict:E}):null,M=!!(g?g(k,n):k),P=M?x(d,a):d,R=M?Object(c["a"])({},S,{},s):S,j=Object(c["a"])({"aria-current":M&&r||null,className:P,style:R,to:i},T);return _!==b?j.ref=e||C:j.innerRef=C,u.a.createElement(y,j)}))})),E=n("8L3h");function S(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function O(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?S(Object(n),!0).forEach((function(e){R(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):S(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function C(t){return C="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},C(t)}function T(t,e,n,r,i,o,a){try{var s=t[o](a),u=s.value}catch(c){return void n(c)}s.done?e(u):Promise.resolve(u).then(r,i)}function A(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){T(o,r,i,a,s,"next",t)}function s(t){T(o,r,i,a,s,"throw",t)}a(void 0)}))}}function k(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function M(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function P(t,e,n){return e&&M(t.prototype,e),n&&M(t,n),t}function R(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function j(t){return I(t)||L(t)||N(t)||F()}function I(t){if(Array.isArray(t))return t}function L(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function N(t,e){if(t){if("string"===typeof t)return D(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?D(t,e):void 0}}function D(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function F(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function B(t,e){var n="undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=N(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n["return"]||n["return"]()}finally{if(s)throw o}}}}var z=Object(s["createContext"])(null),U=[],V=[],H=!1;function G(t){var e=t(),n={loading:!0,loaded:null,error:null};return n.promise=e.then((function(t){return n.loading=!1,n.loaded=t,t}))["catch"]((function(t){throw n.loading=!1,n.error=t,t})),n}function W(t){var e={loading:!1,loaded:{},error:null},n=[];try{Object.keys(t).forEach((function(r){var i=G(t[r]);i.loading?e.loading=!0:(e.loaded[r]=i.loaded,e.error=i.error),n.push(i.promise),i.promise.then((function(t){e.loaded[r]=t}))["catch"]((function(t){e.error=t}))}))}catch(r){e.error=r}return e.promise=Promise.all(n).then((function(t){return e.loading=!1,t}))["catch"]((function(t){throw e.loading=!1,t})),e}function Z(t){return t&&t.__esModule?t["default"]:t}function Y(t,e){return Object(s["createElement"])(Z(t),e)}function X(t,e){var n=Object.assign({loader:null,loading:null,delay:200,timeout:null,render:Y,webpack:null,modules:null},e),r=null;function i(){if(!r){var e=new q(t,n);r={getCurrentValue:e.getCurrentValue.bind(e),subscribe:e.subscribe.bind(e),retry:e.retry.bind(e),promise:e.promise.bind(e)}}return r.promise()}if("undefined"===typeof window&&U.push(i),!H&&"undefined"!==typeof window&&"function"===typeof n.webpack){var o=n.webpack();V.push((function(t){var e,n=B(o);try{for(n.s();!(e=n.n()).done;){var r=e.value;if(-1!==t.indexOf(r))return i()}}catch(a){n.e(a)}finally{n.f()}}))}var a=function(t,e){i();var o=Object(s["useContext"])(z),a=Object(E["useSubscription"])(r);return Object(s["useImperativeHandle"])(e,(function(){return{retry:r.retry}})),o&&Array.isArray(n.modules)&&n.modules.forEach((function(t){o(t)})),a.loading||a.error?Object(s["createElement"])(n.loading,{isLoading:a.loading,pastDelay:a.pastDelay,timedOut:a.timedOut,error:a.error,retry:r.retry}):a.loaded?n.render(a.loaded,t):null},u=Object(s["forwardRef"])(a);return u.preload=function(){return i()},u.displayName="LoadableComponent",u}var q=function(){function t(e,n){k(this,t),this._loadFn=e,this._opts=n,this._callbacks=new Set,this._delay=null,this._timeout=null,this.retry()}return P(t,[{key:"promise",value:function(){return this._res.promise}},{key:"retry",value:function(){var t=this;this._clearTimeouts(),this._res=this._loadFn(this._opts.loader),this._state={pastDelay:!1,timedOut:!1};var e=this._res,n=this._opts;e.loading&&("number"===typeof n.delay&&(0===n.delay?this._state.pastDelay=!0:this._delay=setTimeout((function(){t._update({pastDelay:!0})}),n.delay)),"number"===typeof n.timeout&&(this._timeout=setTimeout((function(){t._update({timedOut:!0})}),n.timeout))),this._res.promise.then((function(){t._update(),t._clearTimeouts()}))["catch"]((function(e){t._update(),t._clearTimeouts()})),this._update({})}},{key:"_update",value:function(t){this._state=O(O({},this._state),t),this._callbacks.forEach((function(t){return t()}))}},{key:"_clearTimeouts",value:function(){clearTimeout(this._delay),clearTimeout(this._timeout)}},{key:"getCurrentValue",value:function(){return O(O({},this._state),{},{error:this._res.error,loaded:this._res.loaded,loading:this._res.loading})}},{key:"subscribe",value:function(t){var e=this;return this._callbacks.add(t),function(){e._callbacks["delete"](t)}}}]),t}();function K(t){return X(G,t)}function Q(t){if("function"!==typeof t.render)throw new Error("LoadableMap requires a `render(loaded, props)` function");return X(W,t)}function $(t,e){var n=[];while(t.length){var r=t.pop();n.push(r(e))}return Promise.all(n).then((function(){if(t.length)return $(t,e)}))}function J(t){var e=K,n={loading:function(t){t.error,t.isLoading;return Object(s["createElement"])("p",null,"loading...")}};if("function"===typeof t)n.loader=t;else{if("object"!==C(t))throw new Error("Unexpect arguments ".concat(t));n=O(O({},n),t)}return e(n)}function tt(t,e){if(!t)throw new Error(e)}K.Map=Q,K.preloadAll=function(){return new Promise((function(t,e){$(U).then(t,e)}))},K.preloadReady=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return new Promise((function(e){var n=function(){return H=!0,e()};$(V,t).then(n,n)}))},"undefined"!==typeof window&&(window.__NEXT_PRELOADREADY=K.preloadReady);var et,nt=function(){return"undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement};function rt(t){var e=t.fns,n=t.args;if(1===e.length)return e[0];var r=e.pop();return e.reduce((function(t,e){return function(){return e(t,n)}}),r)}function it(t){return!!t&&"object"===C(t)&&"function"===typeof t.then}(function(t){t["compose"]="compose",t["modify"]="modify",t["event"]="event"})(et||(et={}));var ot=function(){function t(e){k(this,t),this.validKeys=void 0,this.hooks={},this.validKeys=(null===e||void 0===e?void 0:e.validKeys)||[]}return P(t,[{key:"register",value:function(t){var e=this;tt(!!t.apply,"register failed, plugin.apply must supplied"),tt(!!t.path,"register failed, plugin.path must supplied"),Object.keys(t.apply).forEach((function(n){tt(e.validKeys.indexOf(n)>-1,"register failed, invalid key ".concat(n," from plugin ").concat(t.path,".")),e.hooks[n]||(e.hooks[n]=[]),e.hooks[n]=e.hooks[n].concat(t.apply[n])}))}},{key:"getHooks",value:function(t){var e=t.split("."),n=j(e),r=n[0],i=n.slice(1),o=this.hooks[r]||[];return i.length&&(o=o.map((function(t){try{var e,n=t,r=B(i);try{for(r.s();!(e=r.n()).done;){var o=e.value;n=n[o]}}catch(a){r.e(a)}finally{r.f()}return n}catch(s){return null}})).filter(Boolean)),o}},{key:"applyPlugins",value:function(t){var e=t.key,n=t.type,i=t.initialValue,o=t.args,a=t.async,s=this.getHooks(e)||[];switch(o&&tt("object"===C(o),"applyPlugins failed, args must be plain object."),n){case et.modify:return a?s.reduce(function(){var t=A(Object(r["a"])().mark((function t(n,i){var a;return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(tt("function"===typeof i||"object"===C(i)||it(i),"applyPlugins failed, all hooks for key ".concat(e," must be function, plain object or Promise.")),!it(n)){t.next=5;break}return t.next=4,n;case 4:n=t.sent;case 5:if("function"!==typeof i){t.next=16;break}if(a=i(n,o),!it(a)){t.next=13;break}return t.next=10,a;case 10:return t.abrupt("return",t.sent);case 13:return t.abrupt("return",a);case 14:t.next=21;break;case 16:if(!it(i)){t.next=20;break}return t.next=19,i;case 19:i=t.sent;case 20:return t.abrupt("return",O(O({},n),i));case 21:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),it(i)?i:Promise.resolve(i)):s.reduce((function(t,n){return tt("function"===typeof n||"object"===C(n),"applyPlugins failed, all hooks for key ".concat(e," must be function or plain object.")),"function"===typeof n?n(t,o):O(O({},t),n)}),i);case et.event:return s.forEach((function(t){tt("function"===typeof t,"applyPlugins failed, all hooks for key ".concat(e," must be function.")),t(o)}));case et.compose:return function(){return rt({fns:s.concat(i),args:o})()}}}}]),t}()},LvDl:function(t,e,n){(function(t,r){var i;(function(){var o,a="4.17.21",s=200,u="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",c="Expected a function",l="Invalid `variable` option passed into `_.template`",f="__lodash_hash_undefined__",h=500,p="__lodash_placeholder__",d=1,v=2,g=4,m=1,y=2,_=1,b=2,x=4,w=8,E=16,S=32,O=64,C=128,T=256,A=512,k=30,M="...",P=800,R=16,j=1,I=2,L=3,N=1/0,D=9007199254740991,F=17976931348623157e292,B=NaN,z=4294967295,U=z-1,V=z>>>1,H=[["ary",C],["bind",_],["bindKey",b],["curry",w],["curryRight",E],["flip",A],["partial",S],["partialRight",O],["rearg",T]],G="[object Arguments]",W="[object Array]",Z="[object AsyncFunction]",Y="[object Boolean]",X="[object Date]",q="[object DOMException]",K="[object Error]",Q="[object Function]",$="[object GeneratorFunction]",J="[object Map]",tt="[object Number]",et="[object Null]",nt="[object Object]",rt="[object Promise]",it="[object Proxy]",ot="[object RegExp]",at="[object Set]",st="[object String]",ut="[object Symbol]",ct="[object Undefined]",lt="[object WeakMap]",ft="[object WeakSet]",ht="[object ArrayBuffer]",pt="[object DataView]",dt="[object Float32Array]",vt="[object Float64Array]",gt="[object Int8Array]",mt="[object Int16Array]",yt="[object Int32Array]",_t="[object Uint8Array]",bt="[object Uint8ClampedArray]",xt="[object Uint16Array]",wt="[object Uint32Array]",Et=/\b__p \+= '';/g,St=/\b(__p \+=) '' \+/g,Ot=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Ct=/&(?:amp|lt|gt|quot|#39);/g,Tt=/[&<>"']/g,At=RegExp(Ct.source),kt=RegExp(Tt.source),Mt=/<%-([\s\S]+?)%>/g,Pt=/<%([\s\S]+?)%>/g,Rt=/<%=([\s\S]+?)%>/g,jt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,It=/^\w*$/,Lt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Nt=/[\\^$.*+?()[\]{}|]/g,Dt=RegExp(Nt.source),Ft=/^\s+/,Bt=/\s/,zt=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Ut=/\{\n\/\* \[wrapped with (.+)\] \*/,Vt=/,? & /,Ht=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Gt=/[()=,{}\[\]\/\s]/,Wt=/\\(\\)?/g,Zt=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Yt=/\w*$/,Xt=/^[-+]0x[0-9a-f]+$/i,qt=/^0b[01]+$/i,Kt=/^\[object .+?Constructor\]$/,Qt=/^0o[0-7]+$/i,$t=/^(?:0|[1-9]\d*)$/,Jt=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,te=/($^)/,ee=/['\n\r\u2028\u2029\\]/g,ne="\\ud800-\\udfff",re="\\u0300-\\u036f",ie="\\ufe20-\\ufe2f",oe="\\u20d0-\\u20ff",ae=re+ie+oe,se="\\u2700-\\u27bf",ue="a-z\\xdf-\\xf6\\xf8-\\xff",ce="\\xac\\xb1\\xd7\\xf7",le="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",fe="\\u2000-\\u206f",he=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",pe="A-Z\\xc0-\\xd6\\xd8-\\xde",de="\\ufe0e\\ufe0f",ve=ce+le+fe+he,ge="['\u2019]",me="["+ne+"]",ye="["+ve+"]",_e="["+ae+"]",be="\\d+",xe="["+se+"]",we="["+ue+"]",Ee="[^"+ne+ve+be+se+ue+pe+"]",Se="\\ud83c[\\udffb-\\udfff]",Oe="(?:"+_e+"|"+Se+")",Ce="[^"+ne+"]",Te="(?:\\ud83c[\\udde6-\\uddff]){2}",Ae="[\\ud800-\\udbff][\\udc00-\\udfff]",ke="["+pe+"]",Me="\\u200d",Pe="(?:"+we+"|"+Ee+")",Re="(?:"+ke+"|"+Ee+")",je="(?:"+ge+"(?:d|ll|m|re|s|t|ve))?",Ie="(?:"+ge+"(?:D|LL|M|RE|S|T|VE))?",Le=Oe+"?",Ne="["+de+"]?",De="(?:"+Me+"(?:"+[Ce,Te,Ae].join("|")+")"+Ne+Le+")*",Fe="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Be="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",ze=Ne+Le+De,Ue="(?:"+[xe,Te,Ae].join("|")+")"+ze,Ve="(?:"+[Ce+_e+"?",_e,Te,Ae,me].join("|")+")",He=RegExp(ge,"g"),Ge=RegExp(_e,"g"),We=RegExp(Se+"(?="+Se+")|"+Ve+ze,"g"),Ze=RegExp([ke+"?"+we+"+"+je+"(?="+[ye,ke,"$"].join("|")+")",Re+"+"+Ie+"(?="+[ye,ke+Pe,"$"].join("|")+")",ke+"?"+Pe+"+"+je,ke+"+"+Ie,Be,Fe,be,Ue].join("|"),"g"),Ye=RegExp("["+Me+ne+ae+de+"]"),Xe=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,qe=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Ke=-1,Qe={};Qe[dt]=Qe[vt]=Qe[gt]=Qe[mt]=Qe[yt]=Qe[_t]=Qe[bt]=Qe[xt]=Qe[wt]=!0,Qe[G]=Qe[W]=Qe[ht]=Qe[Y]=Qe[pt]=Qe[X]=Qe[K]=Qe[Q]=Qe[J]=Qe[tt]=Qe[nt]=Qe[ot]=Qe[at]=Qe[st]=Qe[lt]=!1;var $e={};$e[G]=$e[W]=$e[ht]=$e[pt]=$e[Y]=$e[X]=$e[dt]=$e[vt]=$e[gt]=$e[mt]=$e[yt]=$e[J]=$e[tt]=$e[nt]=$e[ot]=$e[at]=$e[st]=$e[ut]=$e[_t]=$e[bt]=$e[xt]=$e[wt]=!0,$e[K]=$e[Q]=$e[lt]=!1;var Je={"\xc0":"A","\xc1":"A","\xc2":"A","\xc3":"A","\xc4":"A","\xc5":"A","\xe0":"a","\xe1":"a","\xe2":"a","\xe3":"a","\xe4":"a","\xe5":"a","\xc7":"C","\xe7":"c","\xd0":"D","\xf0":"d","\xc8":"E","\xc9":"E","\xca":"E","\xcb":"E","\xe8":"e","\xe9":"e","\xea":"e","\xeb":"e","\xcc":"I","\xcd":"I","\xce":"I","\xcf":"I","\xec":"i","\xed":"i","\xee":"i","\xef":"i","\xd1":"N","\xf1":"n","\xd2":"O","\xd3":"O","\xd4":"O","\xd5":"O","\xd6":"O","\xd8":"O","\xf2":"o","\xf3":"o","\xf4":"o","\xf5":"o","\xf6":"o","\xf8":"o","\xd9":"U","\xda":"U","\xdb":"U","\xdc":"U","\xf9":"u","\xfa":"u","\xfb":"u","\xfc":"u","\xdd":"Y","\xfd":"y","\xff":"y","\xc6":"Ae","\xe6":"ae","\xde":"Th","\xfe":"th","\xdf":"ss","\u0100":"A","\u0102":"A","\u0104":"A","\u0101":"a","\u0103":"a","\u0105":"a","\u0106":"C","\u0108":"C","\u010a":"C","\u010c":"C","\u0107":"c","\u0109":"c","\u010b":"c","\u010d":"c","\u010e":"D","\u0110":"D","\u010f":"d","\u0111":"d","\u0112":"E","\u0114":"E","\u0116":"E","\u0118":"E","\u011a":"E","\u0113":"e","\u0115":"e","\u0117":"e","\u0119":"e","\u011b":"e","\u011c":"G","\u011e":"G","\u0120":"G","\u0122":"G","\u011d":"g","\u011f":"g","\u0121":"g","\u0123":"g","\u0124":"H","\u0126":"H","\u0125":"h","\u0127":"h","\u0128":"I","\u012a":"I","\u012c":"I","\u012e":"I","\u0130":"I","\u0129":"i","\u012b":"i","\u012d":"i","\u012f":"i","\u0131":"i","\u0134":"J","\u0135":"j","\u0136":"K","\u0137":"k","\u0138":"k","\u0139":"L","\u013b":"L","\u013d":"L","\u013f":"L","\u0141":"L","\u013a":"l","\u013c":"l","\u013e":"l","\u0140":"l","\u0142":"l","\u0143":"N","\u0145":"N","\u0147":"N","\u014a":"N","\u0144":"n","\u0146":"n","\u0148":"n","\u014b":"n","\u014c":"O","\u014e":"O","\u0150":"O","\u014d":"o","\u014f":"o","\u0151":"o","\u0154":"R","\u0156":"R","\u0158":"R","\u0155":"r","\u0157":"r","\u0159":"r","\u015a":"S","\u015c":"S","\u015e":"S","\u0160":"S","\u015b":"s","\u015d":"s","\u015f":"s","\u0161":"s","\u0162":"T","\u0164":"T","\u0166":"T","\u0163":"t","\u0165":"t","\u0167":"t","\u0168":"U","\u016a":"U","\u016c":"U","\u016e":"U","\u0170":"U","\u0172":"U","\u0169":"u","\u016b":"u","\u016d":"u","\u016f":"u","\u0171":"u","\u0173":"u","\u0174":"W","\u0175":"w","\u0176":"Y","\u0177":"y","\u0178":"Y","\u0179":"Z","\u017b":"Z","\u017d":"Z","\u017a":"z","\u017c":"z","\u017e":"z","\u0132":"IJ","\u0133":"ij","\u0152":"Oe","\u0153":"oe","\u0149":"'n","\u017f":"s"},tn={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},en={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},nn={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},rn=parseFloat,on=parseInt,an="object"==typeof t&&t&&t.Object===Object&&t,sn="object"==typeof self&&self&&self.Object===Object&&self,un=an||sn||Function("return this")(),cn=e&&!e.nodeType&&e,ln=cn&&"object"==typeof r&&r&&!r.nodeType&&r,fn=ln&&ln.exports===cn,hn=fn&&an.process,pn=function(){try{var t=ln&&ln.require&&ln.require("util").types;return t||hn&&hn.binding&&hn.binding("util")}catch(e){}}(),dn=pn&&pn.isArrayBuffer,vn=pn&&pn.isDate,gn=pn&&pn.isMap,mn=pn&&pn.isRegExp,yn=pn&&pn.isSet,_n=pn&&pn.isTypedArray;function bn(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function xn(t,e,n,r){var i=-1,o=null==t?0:t.length;while(++i<o){var a=t[i];e(r,a,n(a),t)}return r}function wn(t,e){var n=-1,r=null==t?0:t.length;while(++n<r)if(!1===e(t[n],n,t))break;return t}function En(t,e){var n=null==t?0:t.length;while(n--)if(!1===e(t[n],n,t))break;return t}function Sn(t,e){var n=-1,r=null==t?0:t.length;while(++n<r)if(!e(t[n],n,t))return!1;return!0}function On(t,e){var n=-1,r=null==t?0:t.length,i=0,o=[];while(++n<r){var a=t[n];e(a,n,t)&&(o[i++]=a)}return o}function Cn(t,e){var n=null==t?0:t.length;return!!n&&Fn(t,e,0)>-1}function Tn(t,e,n){var r=-1,i=null==t?0:t.length;while(++r<i)if(n(e,t[r]))return!0;return!1}function An(t,e){var n=-1,r=null==t?0:t.length,i=Array(r);while(++n<r)i[n]=e(t[n],n,t);return i}function kn(t,e){var n=-1,r=e.length,i=t.length;while(++n<r)t[i+n]=e[n];return t}function Mn(t,e,n,r){var i=-1,o=null==t?0:t.length;r&&o&&(n=t[++i]);while(++i<o)n=e(n,t[i],i,t);return n}function Pn(t,e,n,r){var i=null==t?0:t.length;r&&i&&(n=t[--i]);while(i--)n=e(n,t[i],i,t);return n}function Rn(t,e){var n=-1,r=null==t?0:t.length;while(++n<r)if(e(t[n],n,t))return!0;return!1}var jn=Vn("length");function In(t){return t.split("")}function Ln(t){return t.match(Ht)||[]}function Nn(t,e,n){var r;return n(t,(function(t,n,i){if(e(t,n,i))return r=n,!1})),r}function Dn(t,e,n,r){var i=t.length,o=n+(r?1:-1);while(r?o--:++o<i)if(e(t[o],o,t))return o;return-1}function Fn(t,e,n){return e===e?dr(t,e,n):Dn(t,zn,n)}function Bn(t,e,n,r){var i=n-1,o=t.length;while(++i<o)if(r(t[i],e))return i;return-1}function zn(t){return t!==t}function Un(t,e){var n=null==t?0:t.length;return n?Zn(t,e)/n:B}function Vn(t){return function(e){return null==e?o:e[t]}}function Hn(t){return function(e){return null==t?o:t[e]}}function Gn(t,e,n,r,i){return i(t,(function(t,i,o){n=r?(r=!1,t):e(n,t,i,o)})),n}function Wn(t,e){var n=t.length;t.sort(e);while(n--)t[n]=t[n].value;return t}function Zn(t,e){var n,r=-1,i=t.length;while(++r<i){var a=e(t[r]);a!==o&&(n=n===o?a:n+a)}return n}function Yn(t,e){var n=-1,r=Array(t);while(++n<t)r[n]=e(n);return r}function Xn(t,e){return An(e,(function(e){return[e,t[e]]}))}function qn(t){return t?t.slice(0,yr(t)+1).replace(Ft,""):t}function Kn(t){return function(e){return t(e)}}function Qn(t,e){return An(e,(function(e){return t[e]}))}function $n(t,e){return t.has(e)}function Jn(t,e){var n=-1,r=t.length;while(++n<r&&Fn(e,t[n],0)>-1);return n}function tr(t,e){var n=t.length;while(n--&&Fn(e,t[n],0)>-1);return n}function er(t,e){var n=t.length,r=0;while(n--)t[n]===e&&++r;return r}var nr=Hn(Je),rr=Hn(tn);function ir(t){return"\\"+nn[t]}function or(t,e){return null==t?o:t[e]}function ar(t){return Ye.test(t)}function sr(t){return Xe.test(t)}function ur(t){var e,n=[];while(!(e=t.next()).done)n.push(e.value);return n}function cr(t){var e=-1,n=Array(t.size);return t.forEach((function(t,r){n[++e]=[r,t]})),n}function lr(t,e){return function(n){return t(e(n))}}function fr(t,e){var n=-1,r=t.length,i=0,o=[];while(++n<r){var a=t[n];a!==e&&a!==p||(t[n]=p,o[i++]=n)}return o}function hr(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n}function pr(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=[t,t]})),n}function dr(t,e,n){var r=n-1,i=t.length;while(++r<i)if(t[r]===e)return r;return-1}function vr(t,e,n){var r=n+1;while(r--)if(t[r]===e)return r;return r}function gr(t){return ar(t)?br(t):jn(t)}function mr(t){return ar(t)?xr(t):In(t)}function yr(t){var e=t.length;while(e--&&Bt.test(t.charAt(e)));return e}var _r=Hn(en);function br(t){var e=We.lastIndex=0;while(We.test(t))++e;return e}function xr(t){return t.match(We)||[]}function wr(t){return t.match(Ze)||[]}var Er=function t(e){e=null==e?un:Sr.defaults(un.Object(),e,Sr.pick(un,qe));var n=e.Array,r=e.Date,i=e.Error,Bt=e.Function,Ht=e.Math,ne=e.Object,re=e.RegExp,ie=e.String,oe=e.TypeError,ae=n.prototype,se=Bt.prototype,ue=ne.prototype,ce=e["__core-js_shared__"],le=se.toString,fe=ue.hasOwnProperty,he=0,pe=function(){var t=/[^.]+$/.exec(ce&&ce.keys&&ce.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),de=ue.toString,ve=le.call(ne),ge=un._,me=re("^"+le.call(fe).replace(Nt,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ye=fn?e.Buffer:o,_e=e.Symbol,be=e.Uint8Array,xe=ye?ye.allocUnsafe:o,we=lr(ne.getPrototypeOf,ne),Ee=ne.create,Se=ue.propertyIsEnumerable,Oe=ae.splice,Ce=_e?_e.isConcatSpreadable:o,Te=_e?_e.iterator:o,Ae=_e?_e.toStringTag:o,ke=function(){try{var t=Ya(ne,"defineProperty");return t({},"",{}),t}catch(e){}}(),Me=e.clearTimeout!==un.clearTimeout&&e.clearTimeout,Pe=r&&r.now!==un.Date.now&&r.now,Re=e.setTimeout!==un.setTimeout&&e.setTimeout,je=Ht.ceil,Ie=Ht.floor,Le=ne.getOwnPropertySymbols,Ne=ye?ye.isBuffer:o,De=e.isFinite,Fe=ae.join,Be=lr(ne.keys,ne),ze=Ht.max,Ue=Ht.min,Ve=r.now,We=e.parseInt,Ze=Ht.random,Ye=ae.reverse,Xe=Ya(e,"DataView"),Je=Ya(e,"Map"),tn=Ya(e,"Promise"),en=Ya(e,"Set"),nn=Ya(e,"WeakMap"),an=Ya(ne,"create"),sn=nn&&new nn,cn={},ln=Rs(Xe),hn=Rs(Je),pn=Rs(tn),jn=Rs(en),In=Rs(nn),Hn=_e?_e.prototype:o,dr=Hn?Hn.valueOf:o,br=Hn?Hn.toString:o;function xr(t){if(Ol(t)&&!ul(t)&&!(t instanceof Tr)){if(t instanceof Cr)return t;if(fe.call(t,"__wrapped__"))return Is(t)}return new Cr(t)}var Er=function(){function t(){}return function(e){if(!Sl(e))return{};if(Ee)return Ee(e);t.prototype=e;var n=new t;return t.prototype=o,n}}();function Or(){}function Cr(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=o}function Tr(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=z,this.__views__=[]}function Ar(){var t=new Tr(this.__wrapped__);return t.__actions__=ia(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=ia(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=ia(this.__views__),t}function kr(){if(this.__filtered__){var t=new Tr(this);t.__dir__=-1,t.__filtered__=!0}else t=this.clone(),t.__dir__*=-1;return t}function Mr(){var t=this.__wrapped__.value(),e=this.__dir__,n=ul(t),r=e<0,i=n?t.length:0,o=$a(0,i,this.__views__),a=o.start,s=o.end,u=s-a,c=r?s:a-1,l=this.__iteratees__,f=l.length,h=0,p=Ue(u,this.__takeCount__);if(!n||!r&&i==u&&p==u)return Bo(t,this.__actions__);var d=[];t:while(u--&&h<p){c+=e;var v=-1,g=t[c];while(++v<f){var m=l[v],y=m.iteratee,_=m.type,b=y(g);if(_==I)g=b;else if(!b){if(_==j)continue t;break t}}d[h++]=g}return d}function Pr(t){var e=-1,n=null==t?0:t.length;this.clear();while(++e<n){var r=t[e];this.set(r[0],r[1])}}function Rr(){this.__data__=an?an(null):{},this.size=0}function jr(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}function Ir(t){var e=this.__data__;if(an){var n=e[t];return n===f?o:n}return fe.call(e,t)?e[t]:o}function Lr(t){var e=this.__data__;return an?e[t]!==o:fe.call(e,t)}function Nr(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=an&&e===o?f:e,this}function Dr(t){var e=-1,n=null==t?0:t.length;this.clear();while(++e<n){var r=t[e];this.set(r[0],r[1])}}function Fr(){this.__data__=[],this.size=0}function Br(t){var e=this.__data__,n=li(e,t);if(n<0)return!1;var r=e.length-1;return n==r?e.pop():Oe.call(e,n,1),--this.size,!0}function zr(t){var e=this.__data__,n=li(e,t);return n<0?o:e[n][1]}function Ur(t){return li(this.__data__,t)>-1}function Vr(t,e){var n=this.__data__,r=li(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this}function Hr(t){var e=-1,n=null==t?0:t.length;this.clear();while(++e<n){var r=t[e];this.set(r[0],r[1])}}function Gr(){this.size=0,this.__data__={hash:new Pr,map:new(Je||Dr),string:new Pr}}function Wr(t){var e=Wa(this,t)["delete"](t);return this.size-=e?1:0,e}function Zr(t){return Wa(this,t).get(t)}function Yr(t){return Wa(this,t).has(t)}function Xr(t,e){var n=Wa(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this}function qr(t){var e=-1,n=null==t?0:t.length;this.__data__=new Hr;while(++e<n)this.add(t[e])}function Kr(t){return this.__data__.set(t,f),this}function Qr(t){return this.__data__.has(t)}function $r(t){var e=this.__data__=new Dr(t);this.size=e.size}function Jr(){this.__data__=new Dr,this.size=0}function ti(t){var e=this.__data__,n=e["delete"](t);return this.size=e.size,n}function ei(t){return this.__data__.get(t)}function ni(t){return this.__data__.has(t)}function ri(t,e){var n=this.__data__;if(n instanceof Dr){var r=n.__data__;if(!Je||r.length<s-1)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new Hr(r)}return n.set(t,e),this.size=n.size,this}function ii(t,e){var n=ul(t),r=!n&&sl(t),i=!n&&!r&&pl(t),o=!n&&!r&&!i&&zl(t),a=n||r||i||o,s=a?Yn(t.length,ie):[],u=s.length;for(var c in t)!e&&!fe.call(t,c)||a&&("length"==c||i&&("offset"==c||"parent"==c)||o&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||as(c,u))||s.push(c);return s}function oi(t){var e=t.length;return e?t[yo(0,e-1)]:o}function ai(t,e){return ks(ia(t),gi(e,0,t.length))}function si(t){return ks(ia(t))}function ui(t,e,n){(n!==o&&!il(t[e],n)||n===o&&!(e in t))&&di(t,e,n)}function ci(t,e,n){var r=t[e];fe.call(t,e)&&il(r,n)&&(n!==o||e in t)||di(t,e,n)}function li(t,e){var n=t.length;while(n--)if(il(t[n][0],e))return n;return-1}function fi(t,e,n,r){return wi(t,(function(t,i,o){e(r,t,n(t),o)})),r}function hi(t,e){return t&&oa(e,Ef(e),t)}function pi(t,e){return t&&oa(e,Sf(e),t)}function di(t,e,n){"__proto__"==e&&ke?ke(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function vi(t,e){var r=-1,i=e.length,a=n(i),s=null==t;while(++r<i)a[r]=s?o:mf(t,e[r]);return a}function gi(t,e,n){return t===t&&(n!==o&&(t=t<=n?t:n),e!==o&&(t=t>=e?t:e)),t}function mi(t,e,n,r,i,a){var s,u=e&d,c=e&v,l=e&g;if(n&&(s=i?n(t,r,i,a):n(t)),s!==o)return s;if(!Sl(t))return t;var f=ul(t);if(f){if(s=es(t),!u)return ia(t,s)}else{var h=Qa(t),p=h==Q||h==$;if(pl(t))return Xo(t,u);if(h==nt||h==G||p&&!i){if(s=c||p?{}:ns(t),!u)return c?sa(t,pi(s,t)):aa(t,hi(s,t))}else{if(!$e[h])return i?t:{};s=rs(t,h,u)}}a||(a=new $r);var m=a.get(t);if(m)return m;a.set(t,s),Dl(t)?t.forEach((function(r){s.add(mi(r,e,n,r,t,a))})):Cl(t)&&t.forEach((function(r,i){s.set(i,mi(r,e,n,i,t,a))}));var y=l?c?za:Ba:c?Sf:Ef,_=f?o:y(t);return wn(_||t,(function(r,i){_&&(i=r,r=t[i]),ci(s,i,mi(r,e,n,i,t,a))})),s}function yi(t){var e=Ef(t);return function(n){return _i(n,t,e)}}function _i(t,e,n){var r=n.length;if(null==t)return!r;t=ne(t);while(r--){var i=n[r],a=e[i],s=t[i];if(s===o&&!(i in t)||!a(s))return!1}return!0}function bi(t,e,n){if("function"!=typeof t)throw new oe(c);return Os((function(){t.apply(o,n)}),e)}function xi(t,e,n,r){var i=-1,o=Cn,a=!0,u=t.length,c=[],l=e.length;if(!u)return c;n&&(e=An(e,Kn(n))),r?(o=Tn,a=!1):e.length>=s&&(o=$n,a=!1,e=new qr(e));t:while(++i<u){var f=t[i],h=null==n?f:n(f);if(f=r||0!==f?f:0,a&&h===h){var p=l;while(p--)if(e[p]===h)continue t;c.push(f)}else o(e,h,r)||c.push(f)}return c}xr.templateSettings={escape:Mt,evaluate:Pt,interpolate:Rt,variable:"",imports:{_:xr}},xr.prototype=Or.prototype,xr.prototype.constructor=xr,Cr.prototype=Er(Or.prototype),Cr.prototype.constructor=Cr,Tr.prototype=Er(Or.prototype),Tr.prototype.constructor=Tr,Pr.prototype.clear=Rr,Pr.prototype["delete"]=jr,Pr.prototype.get=Ir,Pr.prototype.has=Lr,Pr.prototype.set=Nr,Dr.prototype.clear=Fr,Dr.prototype["delete"]=Br,Dr.prototype.get=zr,Dr.prototype.has=Ur,Dr.prototype.set=Vr,Hr.prototype.clear=Gr,Hr.prototype["delete"]=Wr,Hr.prototype.get=Zr,Hr.prototype.has=Yr,Hr.prototype.set=Xr,qr.prototype.add=qr.prototype.push=Kr,qr.prototype.has=Qr,$r.prototype.clear=Jr,$r.prototype["delete"]=ti,$r.prototype.get=ei,$r.prototype.has=ni,$r.prototype.set=ri;var wi=la(Pi),Ei=la(Ri,!0);function Si(t,e){var n=!0;return wi(t,(function(t,r,i){return n=!!e(t,r,i),n})),n}function Oi(t,e,n){var r=-1,i=t.length;while(++r<i){var a=t[r],s=e(a);if(null!=s&&(u===o?s===s&&!Bl(s):n(s,u)))var u=s,c=a}return c}function Ci(t,e,n,r){var i=t.length;n=Xl(n),n<0&&(n=-n>i?0:i+n),r=r===o||r>i?i:Xl(r),r<0&&(r+=i),r=n>r?0:ql(r);while(n<r)t[n++]=e;return t}function Ti(t,e){var n=[];return wi(t,(function(t,r,i){e(t,r,i)&&n.push(t)})),n}function Ai(t,e,n,r,i){var o=-1,a=t.length;n||(n=os),i||(i=[]);while(++o<a){var s=t[o];e>0&&n(s)?e>1?Ai(s,e-1,n,r,i):kn(i,s):r||(i[i.length]=s)}return i}var ki=fa(),Mi=fa(!0);function Pi(t,e){return t&&ki(t,e,Ef)}function Ri(t,e){return t&&Mi(t,e,Ef)}function ji(t,e){return On(e,(function(e){return xl(t[e])}))}function Ii(t,e){e=Go(e,t);var n=0,r=e.length;while(null!=t&&n<r)t=t[Ps(e[n++])];return n&&n==r?t:o}function Li(t,e,n){var r=e(t);return ul(t)?r:kn(r,n(t))}function Ni(t){return null==t?t===o?ct:et:Ae&&Ae in ne(t)?Xa(t):_s(t)}function Di(t,e){return t>e}function Fi(t,e){return null!=t&&fe.call(t,e)}function Bi(t,e){return null!=t&&e in ne(t)}function zi(t,e,n){return t>=Ue(e,n)&&t<ze(e,n)}function Ui(t,e,r){var i=r?Tn:Cn,a=t[0].length,s=t.length,u=s,c=n(s),l=1/0,f=[];while(u--){var h=t[u];u&&e&&(h=An(h,Kn(e))),l=Ue(h.length,l),c[u]=!r&&(e||a>=120&&h.length>=120)?new qr(u&&h):o}h=t[0];var p=-1,d=c[0];t:while(++p<a&&f.length<l){var v=h[p],g=e?e(v):v;if(v=r||0!==v?v:0,!(d?$n(d,g):i(f,g,r))){u=s;while(--u){var m=c[u];if(!(m?$n(m,g):i(t[u],g,r)))continue t}d&&d.push(g),f.push(v)}}return f}function Vi(t,e,n,r){return Pi(t,(function(t,i,o){e(r,n(t),i,o)})),r}function Hi(t,e,n){e=Go(e,t),t=xs(t,e);var r=null==t?t:t[Ps(ou(e))];return null==r?o:bn(r,t,n)}function Gi(t){return Ol(t)&&Ni(t)==G}function Wi(t){return Ol(t)&&Ni(t)==ht}function Zi(t){return Ol(t)&&Ni(t)==X}function Yi(t,e,n,r,i){return t===e||(null==t||null==e||!Ol(t)&&!Ol(e)?t!==t&&e!==e:Xi(t,e,n,r,Yi,i))}function Xi(t,e,n,r,i,o){var a=ul(t),s=ul(e),u=a?W:Qa(t),c=s?W:Qa(e);u=u==G?nt:u,c=c==G?nt:c;var l=u==nt,f=c==nt,h=u==c;if(h&&pl(t)){if(!pl(e))return!1;a=!0,l=!1}if(h&&!l)return o||(o=new $r),a||zl(t)?La(t,e,n,r,i,o):Na(t,e,u,n,r,i,o);if(!(n&m)){var p=l&&fe.call(t,"__wrapped__"),d=f&&fe.call(e,"__wrapped__");if(p||d){var v=p?t.value():t,g=d?e.value():e;return o||(o=new $r),i(v,g,n,r,o)}}return!!h&&(o||(o=new $r),Da(t,e,n,r,i,o))}function qi(t){return Ol(t)&&Qa(t)==J}function Ki(t,e,n,r){var i=n.length,a=i,s=!r;if(null==t)return!a;t=ne(t);while(i--){var u=n[i];if(s&&u[2]?u[1]!==t[u[0]]:!(u[0]in t))return!1}while(++i<a){u=n[i];var c=u[0],l=t[c],f=u[1];if(s&&u[2]){if(l===o&&!(c in t))return!1}else{var h=new $r;if(r)var p=r(l,f,c,t,e,h);if(!(p===o?Yi(f,l,m|y,r,h):p))return!1}}return!0}function Qi(t){if(!Sl(t)||fs(t))return!1;var e=xl(t)?me:Kt;return e.test(Rs(t))}function $i(t){return Ol(t)&&Ni(t)==ot}function Ji(t){return Ol(t)&&Qa(t)==at}function to(t){return Ol(t)&&El(t.length)&&!!Qe[Ni(t)]}function eo(t){return"function"==typeof t?t:null==t?Ph:"object"==typeof t?ul(t)?so(t[0],t[1]):ao(t):Gh(t)}function no(t){if(!ps(t))return Be(t);var e=[];for(var n in ne(t))fe.call(t,n)&&"constructor"!=n&&e.push(n);return e}function ro(t){if(!Sl(t))return ys(t);var e=ps(t),n=[];for(var r in t)("constructor"!=r||!e&&fe.call(t,r))&&n.push(r);return n}function io(t,e){return t<e}function oo(t,e){var r=-1,i=ll(t)?n(t.length):[];return wi(t,(function(t,n,o){i[++r]=e(t,n,o)})),i}function ao(t){var e=Za(t);return 1==e.length&&e[0][2]?vs(e[0][0],e[0][1]):function(n){return n===t||Ki(n,t,e)}}function so(t,e){return us(t)&&ds(e)?vs(Ps(t),e):function(n){var r=mf(n,t);return r===o&&r===e?_f(n,t):Yi(e,r,m|y)}}function uo(t,e,n,r,i){t!==e&&ki(e,(function(a,s){if(i||(i=new $r),Sl(a))co(t,e,s,n,uo,r,i);else{var u=r?r(Es(t,s),a,s+"",t,e,i):o;u===o&&(u=a),ui(t,s,u)}}),Sf)}function co(t,e,n,r,i,a,s){var u=Es(t,n),c=Es(e,n),l=s.get(c);if(l)ui(t,n,l);else{var f=a?a(u,c,n+"",t,e,s):o,h=f===o;if(h){var p=ul(c),d=!p&&pl(c),v=!p&&!d&&zl(c);f=c,p||d||v?ul(u)?f=u:fl(u)?f=ia(u):d?(h=!1,f=Xo(c,!0)):v?(h=!1,f=Jo(c,!0)):f=[]:Il(c)||sl(c)?(f=u,sl(u)?f=Ql(u):Sl(u)&&!xl(u)||(f=ns(c))):h=!1}h&&(s.set(c,f),i(f,c,r,a,s),s["delete"](c)),ui(t,n,f)}}function lo(t,e){var n=t.length;if(n)return e+=e<0?n:0,as(e,n)?t[e]:o}function fo(t,e,n){e=e.length?An(e,(function(t){return ul(t)?function(e){return Ii(e,1===t.length?t[0]:t)}:t})):[Ph];var r=-1;e=An(e,Kn(Ga()));var i=oo(t,(function(t,n,i){var o=An(e,(function(e){return e(t)}));return{criteria:o,index:++r,value:t}}));return Wn(i,(function(t,e){return ea(t,e,n)}))}function ho(t,e){return po(t,e,(function(e,n){return _f(t,n)}))}function po(t,e,n){var r=-1,i=e.length,o={};while(++r<i){var a=e[r],s=Ii(t,a);n(s,a)&&So(o,Go(a,t),s)}return o}function vo(t){return function(e){return Ii(e,t)}}function go(t,e,n,r){var i=r?Bn:Fn,o=-1,a=e.length,s=t;t===e&&(e=ia(e)),n&&(s=An(t,Kn(n)));while(++o<a){var u=0,c=e[o],l=n?n(c):c;while((u=i(s,l,u,r))>-1)s!==t&&Oe.call(s,u,1),Oe.call(t,u,1)}return t}function mo(t,e){var n=t?e.length:0,r=n-1;while(n--){var i=e[n];if(n==r||i!==o){var o=i;as(i)?Oe.call(t,i,1):No(t,i)}}return t}function yo(t,e){return t+Ie(Ze()*(e-t+1))}function _o(t,e,r,i){var o=-1,a=ze(je((e-t)/(r||1)),0),s=n(a);while(a--)s[i?a:++o]=t,t+=r;return s}function bo(t,e){var n="";if(!t||e<1||e>D)return n;do{e%2&&(n+=t),e=Ie(e/2),e&&(t+=t)}while(e);return n}function xo(t,e){return Cs(bs(t,e,Ph),t+"")}function wo(t){return oi(Vf(t))}function Eo(t,e){var n=Vf(t);return ks(n,gi(e,0,n.length))}function So(t,e,n,r){if(!Sl(t))return t;e=Go(e,t);var i=-1,a=e.length,s=a-1,u=t;while(null!=u&&++i<a){var c=Ps(e[i]),l=n;if("__proto__"===c||"constructor"===c||"prototype"===c)return t;if(i!=s){var f=u[c];l=r?r(f,c,u):o,l===o&&(l=Sl(f)?f:as(e[i+1])?[]:{})}ci(u,c,l),u=u[c]}return t}var Oo=sn?function(t,e){return sn.set(t,e),t}:Ph,Co=ke?function(t,e){return ke(t,"toString",{configurable:!0,enumerable:!1,value:Th(e),writable:!0})}:Ph;function To(t){return ks(Vf(t))}function Ao(t,e,r){var i=-1,o=t.length;e<0&&(e=-e>o?0:o+e),r=r>o?o:r,r<0&&(r+=o),o=e>r?0:r-e>>>0,e>>>=0;var a=n(o);while(++i<o)a[i]=t[i+e];return a}function ko(t,e){var n;return wi(t,(function(t,r,i){return n=e(t,r,i),!n})),!!n}function Mo(t,e,n){var r=0,i=null==t?r:t.length;if("number"==typeof e&&e===e&&i<=V){while(r<i){var o=r+i>>>1,a=t[o];null!==a&&!Bl(a)&&(n?a<=e:a<e)?r=o+1:i=o}return i}return Po(t,e,Ph,n)}function Po(t,e,n,r){var i=0,a=null==t?0:t.length;if(0===a)return 0;e=n(e);var s=e!==e,u=null===e,c=Bl(e),l=e===o;while(i<a){var f=Ie((i+a)/2),h=n(t[f]),p=h!==o,d=null===h,v=h===h,g=Bl(h);if(s)var m=r||v;else m=l?v&&(r||p):u?v&&p&&(r||!d):c?v&&p&&!d&&(r||!g):!d&&!g&&(r?h<=e:h<e);m?i=f+1:a=f}return Ue(a,U)}function Ro(t,e){var n=-1,r=t.length,i=0,o=[];while(++n<r){var a=t[n],s=e?e(a):a;if(!n||!il(s,u)){var u=s;o[i++]=0===a?0:a}}return o}function jo(t){return"number"==typeof t?t:Bl(t)?B:+t}function Io(t){if("string"==typeof t)return t;if(ul(t))return An(t,Io)+"";if(Bl(t))return br?br.call(t):"";var e=t+"";return"0"==e&&1/t==-N?"-0":e}function Lo(t,e,n){var r=-1,i=Cn,o=t.length,a=!0,u=[],c=u;if(n)a=!1,i=Tn;else if(o>=s){var l=e?null:ka(t);if(l)return hr(l);a=!1,i=$n,c=new qr}else c=e?[]:u;t:while(++r<o){var f=t[r],h=e?e(f):f;if(f=n||0!==f?f:0,a&&h===h){var p=c.length;while(p--)if(c[p]===h)continue t;e&&c.push(h),u.push(f)}else i(c,h,n)||(c!==u&&c.push(h),u.push(f))}return u}function No(t,e){return e=Go(e,t),t=xs(t,e),null==t||delete t[Ps(ou(e))]}function Do(t,e,n,r){return So(t,e,n(Ii(t,e)),r)}function Fo(t,e,n,r){var i=t.length,o=r?i:-1;while((r?o--:++o<i)&&e(t[o],o,t));return n?Ao(t,r?0:o,r?o+1:i):Ao(t,r?o+1:0,r?i:o)}function Bo(t,e){var n=t;return n instanceof Tr&&(n=n.value()),Mn(e,(function(t,e){return e.func.apply(e.thisArg,kn([t],e.args))}),n)}function zo(t,e,r){var i=t.length;if(i<2)return i?Lo(t[0]):[];var o=-1,a=n(i);while(++o<i){var s=t[o],u=-1;while(++u<i)u!=o&&(a[o]=xi(a[o]||s,t[u],e,r))}return Lo(Ai(a,1),e,r)}function Uo(t,e,n){var r=-1,i=t.length,a=e.length,s={};while(++r<i){var u=r<a?e[r]:o;n(s,t[r],u)}return s}function Vo(t){return fl(t)?t:[]}function Ho(t){return"function"==typeof t?t:Ph}function Go(t,e){return ul(t)?t:us(t,e)?[t]:Ms(Jl(t))}var Wo=xo;function Zo(t,e,n){var r=t.length;return n=n===o?r:n,!e&&n>=r?t:Ao(t,e,n)}var Yo=Me||function(t){return un.clearTimeout(t)};function Xo(t,e){if(e)return t.slice();var n=t.length,r=xe?xe(n):new t.constructor(n);return t.copy(r),r}function qo(t){var e=new t.constructor(t.byteLength);return new be(e).set(new be(t)),e}function Ko(t,e){var n=e?qo(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}function Qo(t){var e=new t.constructor(t.source,Yt.exec(t));return e.lastIndex=t.lastIndex,e}function $o(t){return dr?ne(dr.call(t)):{}}function Jo(t,e){var n=e?qo(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}function ta(t,e){if(t!==e){var n=t!==o,r=null===t,i=t===t,a=Bl(t),s=e!==o,u=null===e,c=e===e,l=Bl(e);if(!u&&!l&&!a&&t>e||a&&s&&c&&!u&&!l||r&&s&&c||!n&&c||!i)return 1;if(!r&&!a&&!l&&t<e||l&&n&&i&&!r&&!a||u&&n&&i||!s&&i||!c)return-1}return 0}function ea(t,e,n){var r=-1,i=t.criteria,o=e.criteria,a=i.length,s=n.length;while(++r<a){var u=ta(i[r],o[r]);if(u){if(r>=s)return u;var c=n[r];return u*("desc"==c?-1:1)}}return t.index-e.index}function na(t,e,r,i){var o=-1,a=t.length,s=r.length,u=-1,c=e.length,l=ze(a-s,0),f=n(c+l),h=!i;while(++u<c)f[u]=e[u];while(++o<s)(h||o<a)&&(f[r[o]]=t[o]);while(l--)f[u++]=t[o++];return f}function ra(t,e,r,i){var o=-1,a=t.length,s=-1,u=r.length,c=-1,l=e.length,f=ze(a-u,0),h=n(f+l),p=!i;while(++o<f)h[o]=t[o];var d=o;while(++c<l)h[d+c]=e[c];while(++s<u)(p||o<a)&&(h[d+r[s]]=t[o++]);return h}function ia(t,e){var r=-1,i=t.length;e||(e=n(i));while(++r<i)e[r]=t[r];return e}function oa(t,e,n,r){var i=!n;n||(n={});var a=-1,s=e.length;while(++a<s){var u=e[a],c=r?r(n[u],t[u],u,n,t):o;c===o&&(c=t[u]),i?di(n,u,c):ci(n,u,c)}return n}function aa(t,e){return oa(t,qa(t),e)}function sa(t,e){return oa(t,Ka(t),e)}function ua(t,e){return function(n,r){var i=ul(n)?xn:fi,o=e?e():{};return i(n,t,Ga(r,2),o)}}function ca(t){return xo((function(e,n){var r=-1,i=n.length,a=i>1?n[i-1]:o,s=i>2?n[2]:o;a=t.length>3&&"function"==typeof a?(i--,a):o,s&&ss(n[0],n[1],s)&&(a=i<3?o:a,i=1),e=ne(e);while(++r<i){var u=n[r];u&&t(e,u,r,a)}return e}))}function la(t,e){return function(n,r){if(null==n)return n;if(!ll(n))return t(n,r);var i=n.length,o=e?i:-1,a=ne(n);while(e?o--:++o<i)if(!1===r(a[o],o,a))break;return n}}function fa(t){return function(e,n,r){var i=-1,o=ne(e),a=r(e),s=a.length;while(s--){var u=a[t?s:++i];if(!1===n(o[u],u,o))break}return e}}function ha(t,e,n){var r=e&_,i=va(t);function o(){var e=this&&this!==un&&this instanceof o?i:t;return e.apply(r?n:this,arguments)}return o}function pa(t){return function(e){e=Jl(e);var n=ar(e)?mr(e):o,r=n?n[0]:e.charAt(0),i=n?Zo(n,1).join(""):e.slice(1);return r[t]()+i}}function da(t){return function(e){return Mn(wh(qf(e).replace(He,"")),t,"")}}function va(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var n=Er(t.prototype),r=t.apply(n,e);return Sl(r)?r:n}}function ga(t,e,r){var i=va(t);function a(){var s=arguments.length,u=n(s),c=s,l=Ha(a);while(c--)u[c]=arguments[c];var f=s<3&&u[0]!==l&&u[s-1]!==l?[]:fr(u,l);if(s-=f.length,s<r)return Ta(t,e,_a,a.placeholder,o,u,f,o,o,r-s);var h=this&&this!==un&&this instanceof a?i:t;return bn(h,this,u)}return a}function ma(t){return function(e,n,r){var i=ne(e);if(!ll(e)){var a=Ga(n,3);e=Ef(e),n=function(t){return a(i[t],t,i)}}var s=t(e,n,r);return s>-1?i[a?e[s]:s]:o}}function ya(t){return Fa((function(e){var n=e.length,r=n,i=Cr.prototype.thru;t&&e.reverse();while(r--){var a=e[r];if("function"!=typeof a)throw new oe(c);if(i&&!s&&"wrapper"==Va(a))var s=new Cr([],!0)}r=s?r:n;while(++r<n){a=e[r];var u=Va(a),l="wrapper"==u?Ua(a):o;s=l&&ls(l[0])&&l[1]==(C|w|S|T)&&!l[4].length&&1==l[9]?s[Va(l[0])].apply(s,l[3]):1==a.length&&ls(a)?s[u]():s.thru(a)}return function(){var t=arguments,r=t[0];if(s&&1==t.length&&ul(r))return s.plant(r).value();var i=0,o=n?e[i].apply(this,t):r;while(++i<n)o=e[i].call(this,o);return o}}))}function _a(t,e,r,i,a,s,u,c,l,f){var h=e&C,p=e&_,d=e&b,v=e&(w|E),g=e&A,m=d?o:va(t);function y(){var o=arguments.length,_=n(o),b=o;while(b--)_[b]=arguments[b];if(v)var x=Ha(y),w=er(_,x);if(i&&(_=na(_,i,a,v)),s&&(_=ra(_,s,u,v)),o-=w,v&&o<f){var E=fr(_,x);return Ta(t,e,_a,y.placeholder,r,_,E,c,l,f-o)}var S=p?r:this,O=d?S[t]:t;return o=_.length,c?_=ws(_,c):g&&o>1&&_.reverse(),h&&l<o&&(_.length=l),this&&this!==un&&this instanceof y&&(O=m||va(O)),O.apply(S,_)}return y}function ba(t,e){return function(n,r){return Vi(n,t,e(r),{})}}function xa(t,e){return function(n,r){var i;if(n===o&&r===o)return e;if(n!==o&&(i=n),r!==o){if(i===o)return r;"string"==typeof n||"string"==typeof r?(n=Io(n),r=Io(r)):(n=jo(n),r=jo(r)),i=t(n,r)}return i}}function wa(t){return Fa((function(e){return e=An(e,Kn(Ga())),xo((function(n){var r=this;return t(e,(function(t){return bn(t,r,n)}))}))}))}function Ea(t,e){e=e===o?" ":Io(e);var n=e.length;if(n<2)return n?bo(e,t):e;var r=bo(e,je(t/gr(e)));return ar(e)?Zo(mr(r),0,t).join(""):r.slice(0,t)}function Sa(t,e,r,i){var o=e&_,a=va(t);function s(){var e=-1,u=arguments.length,c=-1,l=i.length,f=n(l+u),h=this&&this!==un&&this instanceof s?a:t;while(++c<l)f[c]=i[c];while(u--)f[c++]=arguments[++e];return bn(h,o?r:this,f)}return s}function Oa(t){return function(e,n,r){return r&&"number"!=typeof r&&ss(e,n,r)&&(n=r=o),e=Yl(e),n===o?(n=e,e=0):n=Yl(n),r=r===o?e<n?1:-1:Yl(r),_o(e,n,r,t)}}function Ca(t){return function(e,n){return"string"==typeof e&&"string"==typeof n||(e=Kl(e),n=Kl(n)),t(e,n)}}function Ta(t,e,n,r,i,a,s,u,c,l){var f=e&w,h=f?s:o,p=f?o:s,d=f?a:o,v=f?o:a;e|=f?S:O,e&=~(f?O:S),e&x||(e&=~(_|b));var g=[t,e,i,d,h,v,p,u,c,l],m=n.apply(o,g);return ls(t)&&Ss(m,g),m.placeholder=r,Ts(m,t,e)}function Aa(t){var e=Ht[t];return function(t,n){if(t=Kl(t),n=null==n?0:Ue(Xl(n),292),n&&De(t)){var r=(Jl(t)+"e").split("e"),i=e(r[0]+"e"+(+r[1]+n));return r=(Jl(i)+"e").split("e"),+(r[0]+"e"+(+r[1]-n))}return e(t)}}var ka=en&&1/hr(new en([,-0]))[1]==N?function(t){return new en(t)}:Bh;function Ma(t){return function(e){var n=Qa(e);return n==J?cr(e):n==at?pr(e):Xn(e,t(e))}}function Pa(t,e,n,r,i,a,s,u){var l=e&b;if(!l&&"function"!=typeof t)throw new oe(c);var f=r?r.length:0;if(f||(e&=~(S|O),r=i=o),s=s===o?s:ze(Xl(s),0),u=u===o?u:Xl(u),f-=i?i.length:0,e&O){var h=r,p=i;r=i=o}var d=l?o:Ua(t),v=[t,e,n,r,i,h,p,a,s,u];if(d&&ms(v,d),t=v[0],e=v[1],n=v[2],r=v[3],i=v[4],u=v[9]=v[9]===o?l?0:t.length:ze(v[9]-f,0),!u&&e&(w|E)&&(e&=~(w|E)),e&&e!=_)g=e==w||e==E?ga(t,e,u):e!=S&&e!=(_|S)||i.length?_a.apply(o,v):Sa(t,e,n,r);else var g=ha(t,e,n);var m=d?Oo:Ss;return Ts(m(g,v),t,e)}function Ra(t,e,n,r){return t===o||il(t,ue[n])&&!fe.call(r,n)?e:t}function ja(t,e,n,r,i,a){return Sl(t)&&Sl(e)&&(a.set(e,t),uo(t,e,o,ja,a),a["delete"](e)),t}function Ia(t){return Il(t)?o:t}function La(t,e,n,r,i,a){var s=n&m,u=t.length,c=e.length;if(u!=c&&!(s&&c>u))return!1;var l=a.get(t),f=a.get(e);if(l&&f)return l==e&&f==t;var h=-1,p=!0,d=n&y?new qr:o;a.set(t,e),a.set(e,t);while(++h<u){var v=t[h],g=e[h];if(r)var _=s?r(g,v,h,e,t,a):r(v,g,h,t,e,a);if(_!==o){if(_)continue;p=!1;break}if(d){if(!Rn(e,(function(t,e){if(!$n(d,e)&&(v===t||i(v,t,n,r,a)))return d.push(e)}))){p=!1;break}}else if(v!==g&&!i(v,g,n,r,a)){p=!1;break}}return a["delete"](t),a["delete"](e),p}function Na(t,e,n,r,i,o,a){switch(n){case pt:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case ht:return!(t.byteLength!=e.byteLength||!o(new be(t),new be(e)));case Y:case X:case tt:return il(+t,+e);case K:return t.name==e.name&&t.message==e.message;case ot:case st:return t==e+"";case J:var s=cr;case at:var u=r&m;if(s||(s=hr),t.size!=e.size&&!u)return!1;var c=a.get(t);if(c)return c==e;r|=y,a.set(t,e);var l=La(s(t),s(e),r,i,o,a);return a["delete"](t),l;case ut:if(dr)return dr.call(t)==dr.call(e)}return!1}function Da(t,e,n,r,i,a){var s=n&m,u=Ba(t),c=u.length,l=Ba(e),f=l.length;if(c!=f&&!s)return!1;var h=c;while(h--){var p=u[h];if(!(s?p in e:fe.call(e,p)))return!1}var d=a.get(t),v=a.get(e);if(d&&v)return d==e&&v==t;var g=!0;a.set(t,e),a.set(e,t);var y=s;while(++h<c){p=u[h];var _=t[p],b=e[p];if(r)var x=s?r(b,_,p,e,t,a):r(_,b,p,t,e,a);if(!(x===o?_===b||i(_,b,n,r,a):x)){g=!1;break}y||(y="constructor"==p)}if(g&&!y){var w=t.constructor,E=e.constructor;w==E||!("constructor"in t)||!("constructor"in e)||"function"==typeof w&&w instanceof w&&"function"==typeof E&&E instanceof E||(g=!1)}return a["delete"](t),a["delete"](e),g}function Fa(t){return Cs(bs(t,o,Xs),t+"")}function Ba(t){return Li(t,Ef,qa)}function za(t){return Li(t,Sf,Ka)}var Ua=sn?function(t){return sn.get(t)}:Bh;function Va(t){var e=t.name+"",n=cn[e],r=fe.call(cn,e)?n.length:0;while(r--){var i=n[r],o=i.func;if(null==o||o==t)return i.name}return e}function Ha(t){var e=fe.call(xr,"placeholder")?xr:t;return e.placeholder}function Ga(){var t=xr.iteratee||Rh;return t=t===Rh?eo:t,arguments.length?t(arguments[0],arguments[1]):t}function Wa(t,e){var n=t.__data__;return cs(e)?n["string"==typeof e?"string":"hash"]:n.map}function Za(t){var e=Ef(t),n=e.length;while(n--){var r=e[n],i=t[r];e[n]=[r,i,ds(i)]}return e}function Ya(t,e){var n=or(t,e);return Qi(n)?n:o}function Xa(t){var e=fe.call(t,Ae),n=t[Ae];try{t[Ae]=o;var r=!0}catch(a){}var i=de.call(t);return r&&(e?t[Ae]=n:delete t[Ae]),i}var qa=Le?function(t){return null==t?[]:(t=ne(t),On(Le(t),(function(e){return Se.call(t,e)})))}:Xh,Ka=Le?function(t){var e=[];while(t)kn(e,qa(t)),t=we(t);return e}:Xh,Qa=Ni;function $a(t,e,n){var r=-1,i=n.length;while(++r<i){var o=n[r],a=o.size;switch(o.type){case"drop":t+=a;break;case"dropRight":e-=a;break;case"take":e=Ue(e,t+a);break;case"takeRight":t=ze(t,e-a);break}}return{start:t,end:e}}function Ja(t){var e=t.match(Ut);return e?e[1].split(Vt):[]}function ts(t,e,n){e=Go(e,t);var r=-1,i=e.length,o=!1;while(++r<i){var a=Ps(e[r]);if(!(o=null!=t&&n(t,a)))break;t=t[a]}return o||++r!=i?o:(i=null==t?0:t.length,!!i&&El(i)&&as(a,i)&&(ul(t)||sl(t)))}function es(t){var e=t.length,n=new t.constructor(e);return e&&"string"==typeof t[0]&&fe.call(t,"index")&&(n.index=t.index,n.input=t.input),n}function ns(t){return"function"!=typeof t.constructor||ps(t)?{}:Er(we(t))}function rs(t,e,n){var r=t.constructor;switch(e){case ht:return qo(t);case Y:case X:return new r(+t);case pt:return Ko(t,n);case dt:case vt:case gt:case mt:case yt:case _t:case bt:case xt:case wt:return Jo(t,n);case J:return new r;case tt:case st:return new r(t);case ot:return Qo(t);case at:return new r;case ut:return $o(t)}}function is(t,e){var n=e.length;if(!n)return t;var r=n-1;return e[r]=(n>1?"& ":"")+e[r],e=e.join(n>2?", ":" "),t.replace(zt,"{\n/* [wrapped with "+e+"] */\n")}function os(t){return ul(t)||sl(t)||!!(Ce&&t&&t[Ce])}function as(t,e){var n=typeof t;return e=null==e?D:e,!!e&&("number"==n||"symbol"!=n&&$t.test(t))&&t>-1&&t%1==0&&t<e}function ss(t,e,n){if(!Sl(n))return!1;var r=typeof e;return!!("number"==r?ll(n)&&as(e,n.length):"string"==r&&e in n)&&il(n[e],t)}function us(t,e){if(ul(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!Bl(t))||(It.test(t)||!jt.test(t)||null!=e&&t in ne(e))}function cs(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}function ls(t){var e=Va(t),n=xr[e];if("function"!=typeof n||!(e in Tr.prototype))return!1;if(t===n)return!0;var r=Ua(n);return!!r&&t===r[0]}function fs(t){return!!pe&&pe in t}(Xe&&Qa(new Xe(new ArrayBuffer(1)))!=pt||Je&&Qa(new Je)!=J||tn&&Qa(tn.resolve())!=rt||en&&Qa(new en)!=at||nn&&Qa(new nn)!=lt)&&(Qa=function(t){var e=Ni(t),n=e==nt?t.constructor:o,r=n?Rs(n):"";if(r)switch(r){case ln:return pt;case hn:return J;case pn:return rt;case jn:return at;case In:return lt}return e});var hs=ce?xl:qh;function ps(t){var e=t&&t.constructor,n="function"==typeof e&&e.prototype||ue;return t===n}function ds(t){return t===t&&!Sl(t)}function vs(t,e){return function(n){return null!=n&&(n[t]===e&&(e!==o||t in ne(n)))}}function gs(t){var e=zc(t,(function(t){return n.size===h&&n.clear(),t})),n=e.cache;return e}function ms(t,e){var n=t[1],r=e[1],i=n|r,o=i<(_|b|C),a=r==C&&n==w||r==C&&n==T&&t[7].length<=e[8]||r==(C|T)&&e[7].length<=e[8]&&n==w;if(!o&&!a)return t;r&_&&(t[2]=e[2],i|=n&_?0:x);var s=e[3];if(s){var u=t[3];t[3]=u?na(u,s,e[4]):s,t[4]=u?fr(t[3],p):e[4]}return s=e[5],s&&(u=t[5],t[5]=u?ra(u,s,e[6]):s,t[6]=u?fr(t[5],p):e[6]),s=e[7],s&&(t[7]=s),r&C&&(t[8]=null==t[8]?e[8]:Ue(t[8],e[8])),null==t[9]&&(t[9]=e[9]),t[0]=e[0],t[1]=i,t}function ys(t){var e=[];if(null!=t)for(var n in ne(t))e.push(n);return e}function _s(t){return de.call(t)}function bs(t,e,r){return e=ze(e===o?t.length-1:e,0),function(){var i=arguments,o=-1,a=ze(i.length-e,0),s=n(a);while(++o<a)s[o]=i[e+o];o=-1;var u=n(e+1);while(++o<e)u[o]=i[o];return u[e]=r(s),bn(t,this,u)}}function xs(t,e){return e.length<2?t:Ii(t,Ao(e,0,-1))}function ws(t,e){var n=t.length,r=Ue(e.length,n),i=ia(t);while(r--){var a=e[r];t[r]=as(a,n)?i[a]:o}return t}function Es(t,e){if(("constructor"!==e||"function"!==typeof t[e])&&"__proto__"!=e)return t[e]}var Ss=As(Oo),Os=Re||function(t,e){return un.setTimeout(t,e)},Cs=As(Co);function Ts(t,e,n){var r=e+"";return Cs(t,is(r,js(Ja(r),n)))}function As(t){var e=0,n=0;return function(){var r=Ve(),i=R-(r-n);if(n=r,i>0){if(++e>=P)return arguments[0]}else e=0;return t.apply(o,arguments)}}function ks(t,e){var n=-1,r=t.length,i=r-1;e=e===o?r:e;while(++n<e){var a=yo(n,i),s=t[a];t[a]=t[n],t[n]=s}return t.length=e,t}var Ms=gs((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(Lt,(function(t,n,r,i){e.push(r?i.replace(Wt,"$1"):n||t)})),e}));function Ps(t){if("string"==typeof t||Bl(t))return t;var e=t+"";return"0"==e&&1/t==-N?"-0":e}function Rs(t){if(null!=t){try{return le.call(t)}catch(e){}try{return t+""}catch(e){}}return""}function js(t,e){return wn(H,(function(n){var r="_."+n[0];e&n[1]&&!Cn(t,r)&&t.push(r)})),t.sort()}function Is(t){if(t instanceof Tr)return t.clone();var e=new Cr(t.__wrapped__,t.__chain__);return e.__actions__=ia(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}function Ls(t,e,r){e=(r?ss(t,e,r):e===o)?1:ze(Xl(e),0);var i=null==t?0:t.length;if(!i||e<1)return[];var a=0,s=0,u=n(je(i/e));while(a<i)u[s++]=Ao(t,a,a+=e);return u}function Ns(t){var e=-1,n=null==t?0:t.length,r=0,i=[];while(++e<n){var o=t[e];o&&(i[r++]=o)}return i}function Ds(){var t=arguments.length;if(!t)return[];var e=n(t-1),r=arguments[0],i=t;while(i--)e[i-1]=arguments[i];return kn(ul(r)?ia(r):[r],Ai(e,1))}var Fs=xo((function(t,e){return fl(t)?xi(t,Ai(e,1,fl,!0)):[]})),Bs=xo((function(t,e){var n=ou(e);return fl(n)&&(n=o),fl(t)?xi(t,Ai(e,1,fl,!0),Ga(n,2)):[]})),zs=xo((function(t,e){var n=ou(e);return fl(n)&&(n=o),fl(t)?xi(t,Ai(e,1,fl,!0),o,n):[]}));function Us(t,e,n){var r=null==t?0:t.length;return r?(e=n||e===o?1:Xl(e),Ao(t,e<0?0:e,r)):[]}function Vs(t,e,n){var r=null==t?0:t.length;return r?(e=n||e===o?1:Xl(e),e=r-e,Ao(t,0,e<0?0:e)):[]}function Hs(t,e){return t&&t.length?Fo(t,Ga(e,3),!0,!0):[]}function Gs(t,e){return t&&t.length?Fo(t,Ga(e,3),!0):[]}function Ws(t,e,n,r){var i=null==t?0:t.length;return i?(n&&"number"!=typeof n&&ss(t,e,n)&&(n=0,r=i),Ci(t,e,n,r)):[]}function Zs(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=null==n?0:Xl(n);return i<0&&(i=ze(r+i,0)),Dn(t,Ga(e,3),i)}function Ys(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=r-1;return n!==o&&(i=Xl(n),i=n<0?ze(r+i,0):Ue(i,r-1)),Dn(t,Ga(e,3),i,!0)}function Xs(t){var e=null==t?0:t.length;return e?Ai(t,1):[]}function qs(t){var e=null==t?0:t.length;return e?Ai(t,N):[]}function Ks(t,e){var n=null==t?0:t.length;return n?(e=e===o?1:Xl(e),Ai(t,e)):[]}function Qs(t){var e=-1,n=null==t?0:t.length,r={};while(++e<n){var i=t[e];r[i[0]]=i[1]}return r}function $s(t){return t&&t.length?t[0]:o}function Js(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=null==n?0:Xl(n);return i<0&&(i=ze(r+i,0)),Fn(t,e,i)}function tu(t){var e=null==t?0:t.length;return e?Ao(t,0,-1):[]}var eu=xo((function(t){var e=An(t,Vo);return e.length&&e[0]===t[0]?Ui(e):[]})),nu=xo((function(t){var e=ou(t),n=An(t,Vo);return e===ou(n)?e=o:n.pop(),n.length&&n[0]===t[0]?Ui(n,Ga(e,2)):[]})),ru=xo((function(t){var e=ou(t),n=An(t,Vo);return e="function"==typeof e?e:o,e&&n.pop(),n.length&&n[0]===t[0]?Ui(n,o,e):[]}));function iu(t,e){return null==t?"":Fe.call(t,e)}function ou(t){var e=null==t?0:t.length;return e?t[e-1]:o}function au(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=r;return n!==o&&(i=Xl(n),i=i<0?ze(r+i,0):Ue(i,r-1)),e===e?vr(t,e,i):Dn(t,zn,i,!0)}function su(t,e){return t&&t.length?lo(t,Xl(e)):o}var uu=xo(cu);function cu(t,e){return t&&t.length&&e&&e.length?go(t,e):t}function lu(t,e,n){return t&&t.length&&e&&e.length?go(t,e,Ga(n,2)):t}function fu(t,e,n){return t&&t.length&&e&&e.length?go(t,e,o,n):t}var hu=Fa((function(t,e){var n=null==t?0:t.length,r=vi(t,e);return mo(t,An(e,(function(t){return as(t,n)?+t:t})).sort(ta)),r}));function pu(t,e){var n=[];if(!t||!t.length)return n;var r=-1,i=[],o=t.length;e=Ga(e,3);while(++r<o){var a=t[r];e(a,r,t)&&(n.push(a),i.push(r))}return mo(t,i),n}function du(t){return null==t?t:Ye.call(t)}function vu(t,e,n){var r=null==t?0:t.length;return r?(n&&"number"!=typeof n&&ss(t,e,n)?(e=0,n=r):(e=null==e?0:Xl(e),n=n===o?r:Xl(n)),Ao(t,e,n)):[]}function gu(t,e){return Mo(t,e)}function mu(t,e,n){return Po(t,e,Ga(n,2))}function yu(t,e){var n=null==t?0:t.length;if(n){var r=Mo(t,e);if(r<n&&il(t[r],e))return r}return-1}function _u(t,e){return Mo(t,e,!0)}function bu(t,e,n){return Po(t,e,Ga(n,2),!0)}function xu(t,e){var n=null==t?0:t.length;if(n){var r=Mo(t,e,!0)-1;if(il(t[r],e))return r}return-1}function wu(t){return t&&t.length?Ro(t):[]}function Eu(t,e){return t&&t.length?Ro(t,Ga(e,2)):[]}function Su(t){var e=null==t?0:t.length;return e?Ao(t,1,e):[]}function Ou(t,e,n){return t&&t.length?(e=n||e===o?1:Xl(e),Ao(t,0,e<0?0:e)):[]}function Cu(t,e,n){var r=null==t?0:t.length;return r?(e=n||e===o?1:Xl(e),e=r-e,Ao(t,e<0?0:e,r)):[]}function Tu(t,e){return t&&t.length?Fo(t,Ga(e,3),!1,!0):[]}function Au(t,e){return t&&t.length?Fo(t,Ga(e,3)):[]}var ku=xo((function(t){return Lo(Ai(t,1,fl,!0))})),Mu=xo((function(t){var e=ou(t);return fl(e)&&(e=o),Lo(Ai(t,1,fl,!0),Ga(e,2))})),Pu=xo((function(t){var e=ou(t);return e="function"==typeof e?e:o,Lo(Ai(t,1,fl,!0),o,e)}));function Ru(t){return t&&t.length?Lo(t):[]}function ju(t,e){return t&&t.length?Lo(t,Ga(e,2)):[]}function Iu(t,e){return e="function"==typeof e?e:o,t&&t.length?Lo(t,o,e):[]}function Lu(t){if(!t||!t.length)return[];var e=0;return t=On(t,(function(t){if(fl(t))return e=ze(t.length,e),!0})),Yn(e,(function(e){return An(t,Vn(e))}))}function Nu(t,e){if(!t||!t.length)return[];var n=Lu(t);return null==e?n:An(n,(function(t){return bn(e,o,t)}))}var Du=xo((function(t,e){return fl(t)?xi(t,e):[]})),Fu=xo((function(t){return zo(On(t,fl))})),Bu=xo((function(t){var e=ou(t);return fl(e)&&(e=o),zo(On(t,fl),Ga(e,2))})),zu=xo((function(t){var e=ou(t);return e="function"==typeof e?e:o,zo(On(t,fl),o,e)})),Uu=xo(Lu);function Vu(t,e){return Uo(t||[],e||[],ci)}function Hu(t,e){return Uo(t||[],e||[],So)}var Gu=xo((function(t){var e=t.length,n=e>1?t[e-1]:o;return n="function"==typeof n?(t.pop(),n):o,Nu(t,n)}));function Wu(t){var e=xr(t);return e.__chain__=!0,e}function Zu(t,e){return e(t),t}function Yu(t,e){return e(t)}var Xu=Fa((function(t){var e=t.length,n=e?t[0]:0,r=this.__wrapped__,i=function(e){return vi(e,t)};return!(e>1||this.__actions__.length)&&r instanceof Tr&&as(n)?(r=r.slice(n,+n+(e?1:0)),r.__actions__.push({func:Yu,args:[i],thisArg:o}),new Cr(r,this.__chain__).thru((function(t){return e&&!t.length&&t.push(o),t}))):this.thru(i)}));function qu(){return Wu(this)}function Ku(){return new Cr(this.value(),this.__chain__)}function Qu(){this.__values__===o&&(this.__values__=Zl(this.value()));var t=this.__index__>=this.__values__.length,e=t?o:this.__values__[this.__index__++];return{done:t,value:e}}function $u(){return this}function Ju(t){var e,n=this;while(n instanceof Or){var r=Is(n);r.__index__=0,r.__values__=o,e?i.__wrapped__=r:e=r;var i=r;n=n.__wrapped__}return i.__wrapped__=t,e}function tc(){var t=this.__wrapped__;if(t instanceof Tr){var e=t;return this.__actions__.length&&(e=new Tr(this)),e=e.reverse(),e.__actions__.push({func:Yu,args:[du],thisArg:o}),new Cr(e,this.__chain__)}return this.thru(du)}function ec(){return Bo(this.__wrapped__,this.__actions__)}var nc=ua((function(t,e,n){fe.call(t,n)?++t[n]:di(t,n,1)}));function rc(t,e,n){var r=ul(t)?Sn:Si;return n&&ss(t,e,n)&&(e=o),r(t,Ga(e,3))}function ic(t,e){var n=ul(t)?On:Ti;return n(t,Ga(e,3))}var oc=ma(Zs),ac=ma(Ys);function sc(t,e){return Ai(gc(t,e),1)}function uc(t,e){return Ai(gc(t,e),N)}function cc(t,e,n){return n=n===o?1:Xl(n),Ai(gc(t,e),n)}function lc(t,e){var n=ul(t)?wn:wi;return n(t,Ga(e,3))}function fc(t,e){var n=ul(t)?En:Ei;return n(t,Ga(e,3))}var hc=ua((function(t,e,n){fe.call(t,n)?t[n].push(e):di(t,n,[e])}));function pc(t,e,n,r){t=ll(t)?t:Vf(t),n=n&&!r?Xl(n):0;var i=t.length;return n<0&&(n=ze(i+n,0)),Fl(t)?n<=i&&t.indexOf(e,n)>-1:!!i&&Fn(t,e,n)>-1}var dc=xo((function(t,e,r){var i=-1,o="function"==typeof e,a=ll(t)?n(t.length):[];return wi(t,(function(t){a[++i]=o?bn(e,t,r):Hi(t,e,r)})),a})),vc=ua((function(t,e,n){di(t,n,e)}));function gc(t,e){var n=ul(t)?An:oo;return n(t,Ga(e,3))}function mc(t,e,n,r){return null==t?[]:(ul(e)||(e=null==e?[]:[e]),n=r?o:n,ul(n)||(n=null==n?[]:[n]),fo(t,e,n))}var yc=ua((function(t,e,n){t[n?0:1].push(e)}),(function(){return[[],[]]}));function _c(t,e,n){var r=ul(t)?Mn:Gn,i=arguments.length<3;return r(t,Ga(e,4),n,i,wi)}function bc(t,e,n){var r=ul(t)?Pn:Gn,i=arguments.length<3;return r(t,Ga(e,4),n,i,Ei)}function xc(t,e){var n=ul(t)?On:Ti;return n(t,Uc(Ga(e,3)))}function wc(t){var e=ul(t)?oi:wo;return e(t)}function Ec(t,e,n){e=(n?ss(t,e,n):e===o)?1:Xl(e);var r=ul(t)?ai:Eo;return r(t,e)}function Sc(t){var e=ul(t)?si:To;return e(t)}function Oc(t){if(null==t)return 0;if(ll(t))return Fl(t)?gr(t):t.length;var e=Qa(t);return e==J||e==at?t.size:no(t).length}function Cc(t,e,n){var r=ul(t)?Rn:ko;return n&&ss(t,e,n)&&(e=o),r(t,Ga(e,3))}var Tc=xo((function(t,e){if(null==t)return[];var n=e.length;return n>1&&ss(t,e[0],e[1])?e=[]:n>2&&ss(e[0],e[1],e[2])&&(e=[e[0]]),fo(t,Ai(e,1),[])})),Ac=Pe||function(){return un.Date.now()};function kc(t,e){if("function"!=typeof e)throw new oe(c);return t=Xl(t),function(){if(--t<1)return e.apply(this,arguments)}}function Mc(t,e,n){return e=n?o:e,e=t&&null==e?t.length:e,Pa(t,C,o,o,o,o,e)}function Pc(t,e){var n;if("function"!=typeof e)throw new oe(c);return t=Xl(t),function(){return--t>0&&(n=e.apply(this,arguments)),t<=1&&(e=o),n}}var Rc=xo((function(t,e,n){var r=_;if(n.length){var i=fr(n,Ha(Rc));r|=S}return Pa(t,r,e,n,i)})),jc=xo((function(t,e,n){var r=_|b;if(n.length){var i=fr(n,Ha(jc));r|=S}return Pa(e,r,t,n,i)}));function Ic(t,e,n){e=n?o:e;var r=Pa(t,w,o,o,o,o,o,e);return r.placeholder=Ic.placeholder,r}function Lc(t,e,n){e=n?o:e;var r=Pa(t,E,o,o,o,o,o,e);return r.placeholder=Lc.placeholder,r}function Nc(t,e,n){var r,i,a,s,u,l,f=0,h=!1,p=!1,d=!0;if("function"!=typeof t)throw new oe(c);function v(e){var n=r,a=i;return r=i=o,f=e,s=t.apply(a,n),s}function g(t){return f=t,u=Os(_,e),h?v(t):s}function m(t){var n=t-l,r=t-f,i=e-n;return p?Ue(i,a-r):i}function y(t){var n=t-l,r=t-f;return l===o||n>=e||n<0||p&&r>=a}function _(){var t=Ac();if(y(t))return b(t);u=Os(_,m(t))}function b(t){return u=o,d&&r?v(t):(r=i=o,s)}function x(){u!==o&&Yo(u),f=0,r=l=i=u=o}function w(){return u===o?s:b(Ac())}function E(){var t=Ac(),n=y(t);if(r=arguments,i=this,l=t,n){if(u===o)return g(l);if(p)return Yo(u),u=Os(_,e),v(l)}return u===o&&(u=Os(_,e)),s}return e=Kl(e)||0,Sl(n)&&(h=!!n.leading,p="maxWait"in n,a=p?ze(Kl(n.maxWait)||0,e):a,d="trailing"in n?!!n.trailing:d),E.cancel=x,E.flush=w,E}var Dc=xo((function(t,e){return bi(t,1,e)})),Fc=xo((function(t,e,n){return bi(t,Kl(e)||0,n)}));function Bc(t){return Pa(t,A)}function zc(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new oe(c);var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=t.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(zc.Cache||Hr),n}function Uc(t){if("function"!=typeof t)throw new oe(c);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}function Vc(t){return Pc(2,t)}zc.Cache=Hr;var Hc=Wo((function(t,e){e=1==e.length&&ul(e[0])?An(e[0],Kn(Ga())):An(Ai(e,1),Kn(Ga()));var n=e.length;return xo((function(r){var i=-1,o=Ue(r.length,n);while(++i<o)r[i]=e[i].call(this,r[i]);return bn(t,this,r)}))})),Gc=xo((function(t,e){var n=fr(e,Ha(Gc));return Pa(t,S,o,e,n)})),Wc=xo((function(t,e){var n=fr(e,Ha(Wc));return Pa(t,O,o,e,n)})),Zc=Fa((function(t,e){return Pa(t,T,o,o,o,e)}));function Yc(t,e){if("function"!=typeof t)throw new oe(c);return e=e===o?e:Xl(e),xo(t,e)}function Xc(t,e){if("function"!=typeof t)throw new oe(c);return e=null==e?0:ze(Xl(e),0),xo((function(n){var r=n[e],i=Zo(n,0,e);return r&&kn(i,r),bn(t,this,i)}))}function qc(t,e,n){var r=!0,i=!0;if("function"!=typeof t)throw new oe(c);return Sl(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),Nc(t,e,{leading:r,maxWait:e,trailing:i})}function Kc(t){return Mc(t,1)}function Qc(t,e){return Gc(Ho(e),t)}function $c(){if(!arguments.length)return[];var t=arguments[0];return ul(t)?t:[t]}function Jc(t){return mi(t,g)}function tl(t,e){return e="function"==typeof e?e:o,mi(t,g,e)}function el(t){return mi(t,d|g)}function nl(t,e){return e="function"==typeof e?e:o,mi(t,d|g,e)}function rl(t,e){return null==e||_i(t,e,Ef(e))}function il(t,e){return t===e||t!==t&&e!==e}var ol=Ca(Di),al=Ca((function(t,e){return t>=e})),sl=Gi(function(){return arguments}())?Gi:function(t){return Ol(t)&&fe.call(t,"callee")&&!Se.call(t,"callee")},ul=n.isArray,cl=dn?Kn(dn):Wi;function ll(t){return null!=t&&El(t.length)&&!xl(t)}function fl(t){return Ol(t)&&ll(t)}function hl(t){return!0===t||!1===t||Ol(t)&&Ni(t)==Y}var pl=Ne||qh,dl=vn?Kn(vn):Zi;function vl(t){return Ol(t)&&1===t.nodeType&&!Il(t)}function gl(t){if(null==t)return!0;if(ll(t)&&(ul(t)||"string"==typeof t||"function"==typeof t.splice||pl(t)||zl(t)||sl(t)))return!t.length;var e=Qa(t);if(e==J||e==at)return!t.size;if(ps(t))return!no(t).length;for(var n in t)if(fe.call(t,n))return!1;return!0}function ml(t,e){return Yi(t,e)}function yl(t,e,n){n="function"==typeof n?n:o;var r=n?n(t,e):o;return r===o?Yi(t,e,o,n):!!r}function _l(t){if(!Ol(t))return!1;var e=Ni(t);return e==K||e==q||"string"==typeof t.message&&"string"==typeof t.name&&!Il(t)}function bl(t){return"number"==typeof t&&De(t)}function xl(t){if(!Sl(t))return!1;var e=Ni(t);return e==Q||e==$||e==Z||e==it}function wl(t){return"number"==typeof t&&t==Xl(t)}function El(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=D}function Sl(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function Ol(t){return null!=t&&"object"==typeof t}var Cl=gn?Kn(gn):qi;function Tl(t,e){return t===e||Ki(t,e,Za(e))}function Al(t,e,n){return n="function"==typeof n?n:o,Ki(t,e,Za(e),n)}function kl(t){return jl(t)&&t!=+t}function Ml(t){if(hs(t))throw new i(u);return Qi(t)}function Pl(t){return null===t}function Rl(t){return null==t}function jl(t){return"number"==typeof t||Ol(t)&&Ni(t)==tt}function Il(t){if(!Ol(t)||Ni(t)!=nt)return!1;var e=we(t);if(null===e)return!0;var n=fe.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&le.call(n)==ve}var Ll=mn?Kn(mn):$i;function Nl(t){return wl(t)&&t>=-D&&t<=D}var Dl=yn?Kn(yn):Ji;function Fl(t){return"string"==typeof t||!ul(t)&&Ol(t)&&Ni(t)==st}function Bl(t){return"symbol"==typeof t||Ol(t)&&Ni(t)==ut}var zl=_n?Kn(_n):to;function Ul(t){return t===o}function Vl(t){return Ol(t)&&Qa(t)==lt}function Hl(t){return Ol(t)&&Ni(t)==ft}var Gl=Ca(io),Wl=Ca((function(t,e){return t<=e}));function Zl(t){if(!t)return[];if(ll(t))return Fl(t)?mr(t):ia(t);if(Te&&t[Te])return ur(t[Te]());var e=Qa(t),n=e==J?cr:e==at?hr:Vf;return n(t)}function Yl(t){if(!t)return 0===t?t:0;if(t=Kl(t),t===N||t===-N){var e=t<0?-1:1;return e*F}return t===t?t:0}function Xl(t){var e=Yl(t),n=e%1;return e===e?n?e-n:e:0}function ql(t){return t?gi(Xl(t),0,z):0}function Kl(t){if("number"==typeof t)return t;if(Bl(t))return B;if(Sl(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=Sl(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=qn(t);var n=qt.test(t);return n||Qt.test(t)?on(t.slice(2),n?2:8):Xt.test(t)?B:+t}function Ql(t){return oa(t,Sf(t))}function $l(t){return t?gi(Xl(t),-D,D):0===t?t:0}function Jl(t){return null==t?"":Io(t)}var tf=ca((function(t,e){if(ps(e)||ll(e))oa(e,Ef(e),t);else for(var n in e)fe.call(e,n)&&ci(t,n,e[n])})),ef=ca((function(t,e){oa(e,Sf(e),t)})),nf=ca((function(t,e,n,r){oa(e,Sf(e),t,r)})),rf=ca((function(t,e,n,r){oa(e,Ef(e),t,r)})),of=Fa(vi);function af(t,e){var n=Er(t);return null==e?n:hi(n,e)}var sf=xo((function(t,e){t=ne(t);var n=-1,r=e.length,i=r>2?e[2]:o;i&&ss(e[0],e[1],i)&&(r=1);while(++n<r){var a=e[n],s=Sf(a),u=-1,c=s.length;while(++u<c){var l=s[u],f=t[l];(f===o||il(f,ue[l])&&!fe.call(t,l))&&(t[l]=a[l])}}return t})),uf=xo((function(t){return t.push(o,ja),bn(Af,o,t)}));function cf(t,e){return Nn(t,Ga(e,3),Pi)}function lf(t,e){return Nn(t,Ga(e,3),Ri)}function ff(t,e){return null==t?t:ki(t,Ga(e,3),Sf)}function hf(t,e){return null==t?t:Mi(t,Ga(e,3),Sf)}function pf(t,e){return t&&Pi(t,Ga(e,3))}function df(t,e){return t&&Ri(t,Ga(e,3))}function vf(t){return null==t?[]:ji(t,Ef(t))}function gf(t){return null==t?[]:ji(t,Sf(t))}function mf(t,e,n){var r=null==t?o:Ii(t,e);return r===o?n:r}function yf(t,e){return null!=t&&ts(t,e,Fi)}function _f(t,e){return null!=t&&ts(t,e,Bi)}var bf=ba((function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=de.call(e)),t[e]=n}),Th(Ph)),xf=ba((function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=de.call(e)),fe.call(t,e)?t[e].push(n):t[e]=[n]}),Ga),wf=xo(Hi);function Ef(t){return ll(t)?ii(t):no(t)}function Sf(t){return ll(t)?ii(t,!0):ro(t)}function Of(t,e){var n={};return e=Ga(e,3),Pi(t,(function(t,r,i){di(n,e(t,r,i),t)})),n}function Cf(t,e){var n={};return e=Ga(e,3),Pi(t,(function(t,r,i){di(n,r,e(t,r,i))})),n}var Tf=ca((function(t,e,n){uo(t,e,n)})),Af=ca((function(t,e,n,r){uo(t,e,n,r)})),kf=Fa((function(t,e){var n={};if(null==t)return n;var r=!1;e=An(e,(function(e){return e=Go(e,t),r||(r=e.length>1),e})),oa(t,za(t),n),r&&(n=mi(n,d|v|g,Ia));var i=e.length;while(i--)No(n,e[i]);return n}));function Mf(t,e){return Rf(t,Uc(Ga(e)))}var Pf=Fa((function(t,e){return null==t?{}:ho(t,e)}));function Rf(t,e){if(null==t)return{};var n=An(za(t),(function(t){return[t]}));return e=Ga(e),po(t,n,(function(t,n){return e(t,n[0])}))}function jf(t,e,n){e=Go(e,t);var r=-1,i=e.length;i||(i=1,t=o);while(++r<i){var a=null==t?o:t[Ps(e[r])];a===o&&(r=i,a=n),t=xl(a)?a.call(t):a}return t}function If(t,e,n){return null==t?t:So(t,e,n)}function Lf(t,e,n,r){return r="function"==typeof r?r:o,null==t?t:So(t,e,n,r)}var Nf=Ma(Ef),Df=Ma(Sf);function Ff(t,e,n){var r=ul(t),i=r||pl(t)||zl(t);if(e=Ga(e,4),null==n){var o=t&&t.constructor;n=i?r?new o:[]:Sl(t)&&xl(o)?Er(we(t)):{}}return(i?wn:Pi)(t,(function(t,r,i){return e(n,t,r,i)})),n}function Bf(t,e){return null==t||No(t,e)}function zf(t,e,n){return null==t?t:Do(t,e,Ho(n))}function Uf(t,e,n,r){return r="function"==typeof r?r:o,null==t?t:Do(t,e,Ho(n),r)}function Vf(t){return null==t?[]:Qn(t,Ef(t))}function Hf(t){return null==t?[]:Qn(t,Sf(t))}function Gf(t,e,n){return n===o&&(n=e,e=o),n!==o&&(n=Kl(n),n=n===n?n:0),e!==o&&(e=Kl(e),e=e===e?e:0),gi(Kl(t),e,n)}function Wf(t,e,n){return e=Yl(e),n===o?(n=e,e=0):n=Yl(n),t=Kl(t),zi(t,e,n)}function Zf(t,e,n){if(n&&"boolean"!=typeof n&&ss(t,e,n)&&(e=n=o),n===o&&("boolean"==typeof e?(n=e,e=o):"boolean"==typeof t&&(n=t,t=o)),t===o&&e===o?(t=0,e=1):(t=Yl(t),e===o?(e=t,t=0):e=Yl(e)),t>e){var r=t;t=e,e=r}if(n||t%1||e%1){var i=Ze();return Ue(t+i*(e-t+rn("1e-"+((i+"").length-1))),e)}return yo(t,e)}var Yf=da((function(t,e,n){return e=e.toLowerCase(),t+(n?Xf(e):e)}));function Xf(t){return xh(Jl(t).toLowerCase())}function qf(t){return t=Jl(t),t&&t.replace(Jt,nr).replace(Ge,"")}function Kf(t,e,n){t=Jl(t),e=Io(e);var r=t.length;n=n===o?r:gi(Xl(n),0,r);var i=n;return n-=e.length,n>=0&&t.slice(n,i)==e}function Qf(t){return t=Jl(t),t&&kt.test(t)?t.replace(Tt,rr):t}function $f(t){return t=Jl(t),t&&Dt.test(t)?t.replace(Nt,"\\$&"):t}var Jf=da((function(t,e,n){return t+(n?"-":"")+e.toLowerCase()})),th=da((function(t,e,n){return t+(n?" ":"")+e.toLowerCase()})),eh=pa("toLowerCase");function nh(t,e,n){t=Jl(t),e=Xl(e);var r=e?gr(t):0;if(!e||r>=e)return t;var i=(e-r)/2;return Ea(Ie(i),n)+t+Ea(je(i),n)}function rh(t,e,n){t=Jl(t),e=Xl(e);var r=e?gr(t):0;return e&&r<e?t+Ea(e-r,n):t}function ih(t,e,n){t=Jl(t),e=Xl(e);var r=e?gr(t):0;return e&&r<e?Ea(e-r,n)+t:t}function oh(t,e,n){return n||null==e?e=0:e&&(e=+e),We(Jl(t).replace(Ft,""),e||0)}function ah(t,e,n){return e=(n?ss(t,e,n):e===o)?1:Xl(e),bo(Jl(t),e)}function sh(){var t=arguments,e=Jl(t[0]);return t.length<3?e:e.replace(t[1],t[2])}var uh=da((function(t,e,n){return t+(n?"_":"")+e.toLowerCase()}));function ch(t,e,n){return n&&"number"!=typeof n&&ss(t,e,n)&&(e=n=o),n=n===o?z:n>>>0,n?(t=Jl(t),t&&("string"==typeof e||null!=e&&!Ll(e))&&(e=Io(e),!e&&ar(t))?Zo(mr(t),0,n):t.split(e,n)):[]}var lh=da((function(t,e,n){return t+(n?" ":"")+xh(e)}));function fh(t,e,n){return t=Jl(t),n=null==n?0:gi(Xl(n),0,t.length),e=Io(e),t.slice(n,n+e.length)==e}function hh(t,e,n){var r=xr.templateSettings;n&&ss(t,e,n)&&(e=o),t=Jl(t),e=nf({},e,r,Ra);var a,s,u=nf({},e.imports,r.imports,Ra),c=Ef(u),f=Qn(u,c),h=0,p=e.interpolate||te,d="__p += '",v=re((e.escape||te).source+"|"+p.source+"|"+(p===Rt?Zt:te).source+"|"+(e.evaluate||te).source+"|$","g"),g="//# sourceURL="+(fe.call(e,"sourceURL")?(e.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Ke+"]")+"\n";t.replace(v,(function(e,n,r,i,o,u){return r||(r=i),d+=t.slice(h,u).replace(ee,ir),n&&(a=!0,d+="' +\n__e("+n+") +\n'"),o&&(s=!0,d+="';\n"+o+";\n__p += '"),r&&(d+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),h=u+e.length,e})),d+="';\n";var m=fe.call(e,"variable")&&e.variable;if(m){if(Gt.test(m))throw new i(l)}else d="with (obj) {\n"+d+"\n}\n";d=(s?d.replace(Et,""):d).replace(St,"$1").replace(Ot,"$1;"),d="function("+(m||"obj")+") {\n"+(m?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(a?", __e = _.escape":"")+(s?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+d+"return __p\n}";var y=Eh((function(){return Bt(c,g+"return "+d).apply(o,f)}));if(y.source=d,_l(y))throw y;return y}function ph(t){return Jl(t).toLowerCase()}function dh(t){return Jl(t).toUpperCase()}function vh(t,e,n){if(t=Jl(t),t&&(n||e===o))return qn(t);if(!t||!(e=Io(e)))return t;var r=mr(t),i=mr(e),a=Jn(r,i),s=tr(r,i)+1;return Zo(r,a,s).join("")}function gh(t,e,n){if(t=Jl(t),t&&(n||e===o))return t.slice(0,yr(t)+1);if(!t||!(e=Io(e)))return t;var r=mr(t),i=tr(r,mr(e))+1;return Zo(r,0,i).join("")}function mh(t,e,n){if(t=Jl(t),t&&(n||e===o))return t.replace(Ft,"");if(!t||!(e=Io(e)))return t;var r=mr(t),i=Jn(r,mr(e));return Zo(r,i).join("")}function yh(t,e){var n=k,r=M;if(Sl(e)){var i="separator"in e?e.separator:i;n="length"in e?Xl(e.length):n,r="omission"in e?Io(e.omission):r}t=Jl(t);var a=t.length;if(ar(t)){var s=mr(t);a=s.length}if(n>=a)return t;var u=n-gr(r);if(u<1)return r;var c=s?Zo(s,0,u).join(""):t.slice(0,u);if(i===o)return c+r;if(s&&(u+=c.length-u),Ll(i)){if(t.slice(u).search(i)){var l,f=c;i.global||(i=re(i.source,Jl(Yt.exec(i))+"g")),i.lastIndex=0;while(l=i.exec(f))var h=l.index;c=c.slice(0,h===o?u:h)}}else if(t.indexOf(Io(i),u)!=u){var p=c.lastIndexOf(i);p>-1&&(c=c.slice(0,p))}return c+r}function _h(t){return t=Jl(t),t&&At.test(t)?t.replace(Ct,_r):t}var bh=da((function(t,e,n){return t+(n?" ":"")+e.toUpperCase()})),xh=pa("toUpperCase");function wh(t,e,n){return t=Jl(t),e=n?o:e,e===o?sr(t)?wr(t):Ln(t):t.match(e)||[]}var Eh=xo((function(t,e){try{return bn(t,o,e)}catch(n){return _l(n)?n:new i(n)}})),Sh=Fa((function(t,e){return wn(e,(function(e){e=Ps(e),di(t,e,Rc(t[e],t))})),t}));function Oh(t){var e=null==t?0:t.length,n=Ga();return t=e?An(t,(function(t){if("function"!=typeof t[1])throw new oe(c);return[n(t[0]),t[1]]})):[],xo((function(n){var r=-1;while(++r<e){var i=t[r];if(bn(i[0],this,n))return bn(i[1],this,n)}}))}function Ch(t){return yi(mi(t,d))}function Th(t){return function(){return t}}function Ah(t,e){return null==t||t!==t?e:t}var kh=ya(),Mh=ya(!0);function Ph(t){return t}function Rh(t){return eo("function"==typeof t?t:mi(t,d))}function jh(t){return ao(mi(t,d))}function Ih(t,e){return so(t,mi(e,d))}var Lh=xo((function(t,e){return function(n){return Hi(n,t,e)}})),Nh=xo((function(t,e){return function(n){return Hi(t,n,e)}}));function Dh(t,e,n){var r=Ef(e),i=ji(e,r);null!=n||Sl(e)&&(i.length||!r.length)||(n=e,e=t,t=this,i=ji(e,Ef(e)));var o=!(Sl(n)&&"chain"in n)||!!n.chain,a=xl(t);return wn(i,(function(n){var r=e[n];t[n]=r,a&&(t.prototype[n]=function(){var e=this.__chain__;if(o||e){var n=t(this.__wrapped__),i=n.__actions__=ia(this.__actions__);return i.push({func:r,args:arguments,thisArg:t}),n.__chain__=e,n}return r.apply(t,kn([this.value()],arguments))})})),t}function Fh(){return un._===this&&(un._=ge),this}function Bh(){}function zh(t){return t=Xl(t),xo((function(e){return lo(e,t)}))}var Uh=wa(An),Vh=wa(Sn),Hh=wa(Rn);function Gh(t){return us(t)?Vn(Ps(t)):vo(t)}function Wh(t){return function(e){return null==t?o:Ii(t,e)}}var Zh=Oa(),Yh=Oa(!0);function Xh(){return[]}function qh(){return!1}function Kh(){return{}}function Qh(){return""}function $h(){return!0}function Jh(t,e){if(t=Xl(t),t<1||t>D)return[];var n=z,r=Ue(t,z);e=Ga(e),t-=z;var i=Yn(r,e);while(++n<t)e(n);return i}function tp(t){return ul(t)?An(t,Ps):Bl(t)?[t]:ia(Ms(Jl(t)))}function ep(t){var e=++he;return Jl(t)+e}var np=xa((function(t,e){return t+e}),0),rp=Aa("ceil"),ip=xa((function(t,e){return t/e}),1),op=Aa("floor");function ap(t){return t&&t.length?Oi(t,Ph,Di):o}function sp(t,e){return t&&t.length?Oi(t,Ga(e,2),Di):o}function up(t){return Un(t,Ph)}function cp(t,e){return Un(t,Ga(e,2))}function lp(t){return t&&t.length?Oi(t,Ph,io):o}function fp(t,e){return t&&t.length?Oi(t,Ga(e,2),io):o}var hp=xa((function(t,e){return t*e}),1),pp=Aa("round"),dp=xa((function(t,e){return t-e}),0);function vp(t){return t&&t.length?Zn(t,Ph):0}function gp(t,e){return t&&t.length?Zn(t,Ga(e,2)):0}return xr.after=kc,xr.ary=Mc,xr.assign=tf,xr.assignIn=ef,xr.assignInWith=nf,xr.assignWith=rf,xr.at=of,xr.before=Pc,xr.bind=Rc,xr.bindAll=Sh,xr.bindKey=jc,xr.castArray=$c,xr.chain=Wu,xr.chunk=Ls,xr.compact=Ns,xr.concat=Ds,xr.cond=Oh,xr.conforms=Ch,xr.constant=Th,xr.countBy=nc,xr.create=af,xr.curry=Ic,xr.curryRight=Lc,xr.debounce=Nc,xr.defaults=sf,xr.defaultsDeep=uf,xr.defer=Dc,xr.delay=Fc,xr.difference=Fs,xr.differenceBy=Bs,xr.differenceWith=zs,xr.drop=Us,xr.dropRight=Vs,xr.dropRightWhile=Hs,xr.dropWhile=Gs,xr.fill=Ws,xr.filter=ic,xr.flatMap=sc,xr.flatMapDeep=uc,xr.flatMapDepth=cc,xr.flatten=Xs,xr.flattenDeep=qs,xr.flattenDepth=Ks,xr.flip=Bc,xr.flow=kh,xr.flowRight=Mh,xr.fromPairs=Qs,xr.functions=vf,xr.functionsIn=gf,xr.groupBy=hc,xr.initial=tu,xr.intersection=eu,xr.intersectionBy=nu,xr.intersectionWith=ru,xr.invert=bf,xr.invertBy=xf,xr.invokeMap=dc,xr.iteratee=Rh,xr.keyBy=vc,xr.keys=Ef,xr.keysIn=Sf,xr.map=gc,xr.mapKeys=Of,xr.mapValues=Cf,xr.matches=jh,xr.matchesProperty=Ih,xr.memoize=zc,xr.merge=Tf,xr.mergeWith=Af,xr.method=Lh,xr.methodOf=Nh,xr.mixin=Dh,xr.negate=Uc,xr.nthArg=zh,xr.omit=kf,xr.omitBy=Mf,xr.once=Vc,xr.orderBy=mc,xr.over=Uh,xr.overArgs=Hc,xr.overEvery=Vh,xr.overSome=Hh,xr.partial=Gc,xr.partialRight=Wc,xr.partition=yc,xr.pick=Pf,xr.pickBy=Rf,xr.property=Gh,xr.propertyOf=Wh,xr.pull=uu,xr.pullAll=cu,xr.pullAllBy=lu,xr.pullAllWith=fu,xr.pullAt=hu,xr.range=Zh,xr.rangeRight=Yh,xr.rearg=Zc,xr.reject=xc,xr.remove=pu,xr.rest=Yc,xr.reverse=du,xr.sampleSize=Ec,xr.set=If,xr.setWith=Lf,xr.shuffle=Sc,xr.slice=vu,xr.sortBy=Tc,xr.sortedUniq=wu,xr.sortedUniqBy=Eu,xr.split=ch,xr.spread=Xc,xr.tail=Su,xr.take=Ou,xr.takeRight=Cu,xr.takeRightWhile=Tu,xr.takeWhile=Au,xr.tap=Zu,xr.throttle=qc,xr.thru=Yu,xr.toArray=Zl,xr.toPairs=Nf,xr.toPairsIn=Df,xr.toPath=tp,xr.toPlainObject=Ql,xr.transform=Ff,xr.unary=Kc,xr.union=ku,xr.unionBy=Mu,xr.unionWith=Pu,xr.uniq=Ru,xr.uniqBy=ju,xr.uniqWith=Iu,xr.unset=Bf,xr.unzip=Lu,xr.unzipWith=Nu,xr.update=zf,xr.updateWith=Uf,xr.values=Vf,xr.valuesIn=Hf,xr.without=Du,xr.words=wh,xr.wrap=Qc,xr.xor=Fu,xr.xorBy=Bu,xr.xorWith=zu,xr.zip=Uu,xr.zipObject=Vu,xr.zipObjectDeep=Hu,xr.zipWith=Gu,xr.entries=Nf,xr.entriesIn=Df,xr.extend=ef,xr.extendWith=nf,Dh(xr,xr),xr.add=np,xr.attempt=Eh,xr.camelCase=Yf,xr.capitalize=Xf,xr.ceil=rp,xr.clamp=Gf,xr.clone=Jc,xr.cloneDeep=el,xr.cloneDeepWith=nl,xr.cloneWith=tl,xr.conformsTo=rl,xr.deburr=qf,xr.defaultTo=Ah,xr.divide=ip,xr.endsWith=Kf,xr.eq=il,xr.escape=Qf,xr.escapeRegExp=$f,xr.every=rc,xr.find=oc,xr.findIndex=Zs,xr.findKey=cf,xr.findLast=ac,xr.findLastIndex=Ys,xr.findLastKey=lf,xr.floor=op,xr.forEach=lc,xr.forEachRight=fc,xr.forIn=ff,xr.forInRight=hf,xr.forOwn=pf,xr.forOwnRight=df,xr.get=mf,xr.gt=ol,xr.gte=al,xr.has=yf,xr.hasIn=_f,xr.head=$s,xr.identity=Ph,xr.includes=pc,xr.indexOf=Js,xr.inRange=Wf,xr.invoke=wf,xr.isArguments=sl,xr.isArray=ul,xr.isArrayBuffer=cl,xr.isArrayLike=ll,xr.isArrayLikeObject=fl,xr.isBoolean=hl,xr.isBuffer=pl,xr.isDate=dl,xr.isElement=vl,xr.isEmpty=gl,xr.isEqual=ml,xr.isEqualWith=yl,xr.isError=_l,xr.isFinite=bl,xr.isFunction=xl,xr.isInteger=wl,xr.isLength=El,xr.isMap=Cl,xr.isMatch=Tl,xr.isMatchWith=Al,xr.isNaN=kl,xr.isNative=Ml,xr.isNil=Rl,xr.isNull=Pl,xr.isNumber=jl,xr.isObject=Sl,xr.isObjectLike=Ol,xr.isPlainObject=Il,xr.isRegExp=Ll,xr.isSafeInteger=Nl,xr.isSet=Dl,xr.isString=Fl,xr.isSymbol=Bl,xr.isTypedArray=zl,xr.isUndefined=Ul,xr.isWeakMap=Vl,xr.isWeakSet=Hl,xr.join=iu,xr.kebabCase=Jf,xr.last=ou,xr.lastIndexOf=au,xr.lowerCase=th,xr.lowerFirst=eh,xr.lt=Gl,xr.lte=Wl,xr.max=ap,xr.maxBy=sp,xr.mean=up,xr.meanBy=cp,xr.min=lp,xr.minBy=fp,xr.stubArray=Xh,xr.stubFalse=qh,xr.stubObject=Kh,xr.stubString=Qh,xr.stubTrue=$h,xr.multiply=hp,xr.nth=su,xr.noConflict=Fh,xr.noop=Bh,xr.now=Ac,xr.pad=nh,xr.padEnd=rh,xr.padStart=ih,xr.parseInt=oh,xr.random=Zf,xr.reduce=_c,xr.reduceRight=bc,xr.repeat=ah,xr.replace=sh,xr.result=jf,xr.round=pp,xr.runInContext=t,xr.sample=wc,xr.size=Oc,xr.snakeCase=uh,xr.some=Cc,xr.sortedIndex=gu,xr.sortedIndexBy=mu,xr.sortedIndexOf=yu,xr.sortedLastIndex=_u,xr.sortedLastIndexBy=bu,xr.sortedLastIndexOf=xu,xr.startCase=lh,xr.startsWith=fh,xr.subtract=dp,xr.sum=vp,xr.sumBy=gp,xr.template=hh,xr.times=Jh,xr.toFinite=Yl,xr.toInteger=Xl,xr.toLength=ql,xr.toLower=ph,xr.toNumber=Kl,xr.toSafeInteger=$l,xr.toString=Jl,xr.toUpper=dh,xr.trim=vh,xr.trimEnd=gh,xr.trimStart=mh,xr.truncate=yh,xr.unescape=_h,xr.uniqueId=ep,xr.upperCase=bh,xr.upperFirst=xh,xr.each=lc,xr.eachRight=fc,xr.first=$s,Dh(xr,function(){var t={};return Pi(xr,(function(e,n){fe.call(xr.prototype,n)||(t[n]=e)})),t}(),{chain:!1}),xr.VERSION=a,wn(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(t){xr[t].placeholder=xr})),wn(["drop","take"],(function(t,e){Tr.prototype[t]=function(n){n=n===o?1:ze(Xl(n),0);var r=this.__filtered__&&!e?new Tr(this):this.clone();return r.__filtered__?r.__takeCount__=Ue(n,r.__takeCount__):r.__views__.push({size:Ue(n,z),type:t+(r.__dir__<0?"Right":"")}),r},Tr.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}})),wn(["filter","map","takeWhile"],(function(t,e){var n=e+1,r=n==j||n==L;Tr.prototype[t]=function(t){var e=this.clone();return e.__iteratees__.push({iteratee:Ga(t,3),type:n}),e.__filtered__=e.__filtered__||r,e}})),wn(["head","last"],(function(t,e){var n="take"+(e?"Right":"");Tr.prototype[t]=function(){return this[n](1).value()[0]}})),wn(["initial","tail"],(function(t,e){var n="drop"+(e?"":"Right");Tr.prototype[t]=function(){return this.__filtered__?new Tr(this):this[n](1)}})),Tr.prototype.compact=function(){return this.filter(Ph)},Tr.prototype.find=function(t){return this.filter(t).head()},Tr.prototype.findLast=function(t){return this.reverse().find(t)},Tr.prototype.invokeMap=xo((function(t,e){return"function"==typeof t?new Tr(this):this.map((function(n){return Hi(n,t,e)}))})),Tr.prototype.reject=function(t){return this.filter(Uc(Ga(t)))},Tr.prototype.slice=function(t,e){t=Xl(t);var n=this;return n.__filtered__&&(t>0||e<0)?new Tr(n):(t<0?n=n.takeRight(-t):t&&(n=n.drop(t)),e!==o&&(e=Xl(e),n=e<0?n.dropRight(-e):n.take(e-t)),n)},Tr.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},Tr.prototype.toArray=function(){return this.take(z)},Pi(Tr.prototype,(function(t,e){var n=/^(?:filter|find|map|reject)|While$/.test(e),r=/^(?:head|last)$/.test(e),i=xr[r?"take"+("last"==e?"Right":""):e],a=r||/^find/.test(e);i&&(xr.prototype[e]=function(){var e=this.__wrapped__,s=r?[1]:arguments,u=e instanceof Tr,c=s[0],l=u||ul(e),f=function(t){var e=i.apply(xr,kn([t],s));return r&&h?e[0]:e};l&&n&&"function"==typeof c&&1!=c.length&&(u=l=!1);var h=this.__chain__,p=!!this.__actions__.length,d=a&&!h,v=u&&!p;if(!a&&l){e=v?e:new Tr(this);var g=t.apply(e,s);return g.__actions__.push({func:Yu,args:[f],thisArg:o}),new Cr(g,h)}return d&&v?t.apply(this,s):(g=this.thru(f),d?r?g.value()[0]:g.value():g)})})),wn(["pop","push","shift","sort","splice","unshift"],(function(t){var e=ae[t],n=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",r=/^(?:pop|shift)$/.test(t);xr.prototype[t]=function(){var t=arguments;if(r&&!this.__chain__){var i=this.value();return e.apply(ul(i)?i:[],t)}return this[n]((function(n){return e.apply(ul(n)?n:[],t)}))}})),Pi(Tr.prototype,(function(t,e){var n=xr[e];if(n){var r=n.name+"";fe.call(cn,r)||(cn[r]=[]),cn[r].push({name:e,func:n})}})),cn[_a(o,b).name]=[{name:"wrapper",func:o}],Tr.prototype.clone=Ar,Tr.prototype.reverse=kr,Tr.prototype.value=Mr,xr.prototype.at=Xu,xr.prototype.chain=qu,xr.prototype.commit=Ku,xr.prototype.next=Qu,xr.prototype.plant=Ju,xr.prototype.reverse=tc,xr.prototype.toJSON=xr.prototype.valueOf=xr.prototype.value=ec,xr.prototype.first=xr.prototype.head,Te&&(xr.prototype[Te]=$u),xr},Sr=Er();un._=Sr,i=function(){return Sr}.call(e,n,e,r),i===o||(r.exports=i)}).call(this)}).call(this,n("IyRk"),n("hOG+")(t))},Lw8S:function(t,e){function n(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function r(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}t.exports=r,t.exports.__esModule=!0,t.exports["default"]=t.exports},"M/Q6":function(t,e,n){"use strict";var r=n("q1tI"),i=n.n(r);n("x8cr");function o(){return o=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},o.apply(this,arguments)}e["a"]=function(t){return i.a.createElement("div",o({className:"__dumi-default-alert"},t))}},MIOZ:function(t,e){function n(t,e){var n=null==t?null:"undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(t);!(a=(r=n.next()).done);a=!0)if(o.push(r.value),e&&o.length===e)break}catch(u){s=!0,i=u}finally{try{a||null==n["return"]||n["return"]()}finally{if(s)throw i}}return o}}t.exports=n,t.exports.__esModule=!0,t.exports["default"]=t.exports},MMmD:function(t,e,n){var r=n("lSCD"),i=n("shjB");function o(t){return null!=t&&i(t.length)&&!r(t)}t.exports=o},MNnm:function(t,e,n){"use strict";function r(){return!("undefined"===typeof window||!window.document||!window.document.createElement)}n.d(e,"a",(function(){return r}))},MON2:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.STACK_OVERFLOW=e.CIRCULAR_DEPENDENCY_IN_FACTORY=e.POST_CONSTRUCT_ERROR=e.MULTIPLE_POST_CONSTRUCT_METHODS=e.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK=e.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE=e.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE=e.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT=e.ARGUMENTS_LENGTH_MISMATCH=e.INVALID_DECORATOR_OPERATION=e.INVALID_TO_SELF_VALUE=e.INVALID_FUNCTION_BINDING=e.INVALID_MIDDLEWARE_RETURN=e.NO_MORE_SNAPSHOTS_AVAILABLE=e.INVALID_BINDING_TYPE=e.NOT_IMPLEMENTED=e.CIRCULAR_DEPENDENCY=e.UNDEFINED_INJECT_ANNOTATION=e.MISSING_INJECT_ANNOTATION=e.MISSING_INJECTABLE_ANNOTATION=e.NOT_REGISTERED=e.CANNOT_UNBIND=e.AMBIGUOUS_MATCH=e.KEY_NOT_FOUND=e.NULL_ARGUMENT=e.DUPLICATED_METADATA=e.DUPLICATED_INJECTABLE_DECORATOR=void 0,e.DUPLICATED_INJECTABLE_DECORATOR="Cannot apply @injectable decorator multiple times.",e.DUPLICATED_METADATA="Metadata key was used more than once in a parameter:",e.NULL_ARGUMENT="NULL argument",e.KEY_NOT_FOUND="Key Not Found",e.AMBIGUOUS_MATCH="Ambiguous match found for serviceIdentifier:",e.CANNOT_UNBIND="Could not unbind serviceIdentifier:",e.NOT_REGISTERED="No matching bindings found for serviceIdentifier:",e.MISSING_INJECTABLE_ANNOTATION="Missing required @injectable annotation in:",e.MISSING_INJECT_ANNOTATION="Missing required @inject or @multiInject annotation in:";var r=function(t){return"@inject called with undefined this could mean that the class "+t+" has a circular dependency problem. You can use a LazyServiceIdentifer to  overcome this limitation."};e.UNDEFINED_INJECT_ANNOTATION=r,e.CIRCULAR_DEPENDENCY="Circular dependency found:",e.NOT_IMPLEMENTED="Sorry, this feature is not fully implemented yet.",e.INVALID_BINDING_TYPE="Invalid binding type:",e.NO_MORE_SNAPSHOTS_AVAILABLE="No snapshot available to restore.",e.INVALID_MIDDLEWARE_RETURN="Invalid return type in middleware. Middleware must return!",e.INVALID_FUNCTION_BINDING="Value provided to function binding must be a function!",e.INVALID_TO_SELF_VALUE="The toSelf function can only be applied when a constructor is used as service identifier",e.INVALID_DECORATOR_OPERATION="The @inject @multiInject @tagged and @named decorators must be applied to the parameters of a class constructor or a class property.";var i=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return"The number of constructor arguments in the derived class "+t[0]+" must be >= than the number of constructor arguments of its base class."};e.ARGUMENTS_LENGTH_MISMATCH=i,e.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT="Invalid Container constructor argument. Container options must be an object.",e.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE="Invalid Container option. Default scope must be a string ('singleton' or 'transient').",e.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE="Invalid Container option. Auto bind injectable must be a boolean",e.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK="Invalid Container option. Skip base check must be a boolean",e.MULTIPLE_POST_CONSTRUCT_METHODS="Cannot apply @postConstruct decorator multiple times in the same class";var o=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return"@postConstruct error in class "+t[0]+": "+t[1]};e.POST_CONSTRUCT_ERROR=o;var a=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return"It looks like there is a circular dependency in one of the '"+t[0]+"' bindings. Please investigate bindings withservice identifier '"+t[1]+"'."};e.CIRCULAR_DEPENDENCY_IN_FACTORY=a,e.STACK_OVERFLOW="Maximum call stack size exceeded"},MgzW:function(t,e,n){"use strict";var r=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable;function a(t){if(null===t||void 0===t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}function s(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},n=0;n<10;n++)e["_"+String.fromCharCode(n)]=n;var r=Object.getOwnPropertyNames(e).map((function(t){return e[t]}));if("0123456789"!==r.join(""))return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach((function(t){i[t]=t})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},i)).join("")}catch(o){return!1}}t.exports=s()?Object.assign:function(t,e){for(var n,s,u=a(t),c=1;c<arguments.length;c++){for(var l in n=Object(arguments[c]),n)i.call(n,l)&&(u[l]=n[l]);if(r){s=r(n);for(var f=0;f<s.length;f++)o.call(n,s[f])&&(u[s[f]]=n[s[f]])}}return u}},Mpie:function(t,e,n){},MrPd:function(t,e,n){var r=n("hypo"),i=n("ljhN"),o=Object.prototype,a=o.hasOwnProperty;function s(t,e,n){var o=t[e];a.call(t,e)&&i(o,n)&&(void 0!==n||e in t)||r(t,e,n)}t.exports=s},MvSz:function(t,e,n){var r=n("LXxW"),i=n("0ycA"),o=Object.prototype,a=o.propertyIsEnumerable,s=Object.getOwnPropertySymbols,u=s?function(t){return null==t?[]:(t=Object(t),r(s(t),(function(e){return a.call(t,e)})))}:i;t.exports=u},"N+g0":function(t,e,n){var r=n("g6v/"),i=n("m/L8"),o=n("glrk"),a=n("33Wh");t.exports=r?Object.defineProperties:function(t,e){o(t);var n,r=a(e),s=r.length,u=0;while(s>u)i.f(t,n=r[u++],e[n]);return t}},"NC/Y":function(t,e,n){var r=n("0GbY");t.exports=r("navigator","userAgent")||""},NKxu:function(t,e,n){var r=n("lSCD"),i=n("E2jh"),o=n("GoyQ"),a=n("3Fdi"),s=/[\\^$.*+?()[\]{}|]/g,u=/^\[object .+?Constructor\]$/,c=Function.prototype,l=Object.prototype,f=c.toString,h=l.hasOwnProperty,p=RegExp("^"+f.call(h).replace(s,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function d(t){if(!o(t)||i(t))return!1;var e=r(t)?p:u;return e.test(a(t))}t.exports=d},NV22:function(t,e,n){var r=n("I+eb"),i=n("glrk"),o=n("4oU/"),a=n("ntOU"),s=n("afO8"),u="Seeded Random",c=u+" Generator",l=s.set,f=s.getterFor(c),h='Math.seededPRNG() argument should have a "seed" field with a finite value.',p=a((function(t){l(this,{type:c,seed:t%2147483647})}),u,(function(){var t=f(this),e=t.seed=(1103515245*t.seed+12345)%2147483647;return{value:(1073741823&e)/1073741823,done:!1}}));r({target:"Math",stat:!0,forced:!0},{seededPRNG:function(t){var e=i(t).seed;if(!o(e))throw TypeError(h);return new p(e)}})},NaFW:function(t,e,n){var r=n("9d/t"),i=n("P4y1"),o=n("tiKp"),a=o("iterator");t.exports=function(t){if(void 0!=t)return t[a]||t["@@iterator"]||i[r(t)]}},Npjl:function(t,e){function n(t,e){return null==t?void 0:t[e]}t.exports=n},NqR8:function(t,e,n){var r=n("I+eb");r({target:"Math",stat:!0},{isubh:function(t,e,n,r){var i=t>>>0,o=e>>>0,a=n>>>0;return o-(r>>>0)-((~i&a|~(i^a)&i-a>>>0)>>>31)|0}})},NykK:function(t,e,n){var r=n("nmnc"),i=n("AP2z"),o=n("KfNM"),a="[object Null]",s="[object Undefined]",u=r?r.toStringTag:void 0;function c(t){return null==t?void 0===t?s:a:u&&u in Object(t)?i(t):o(t)}t.exports=c},O0oS:function(t,e,n){var r=n("Cwc5"),i=function(){try{var t=r(Object,"defineProperty");return t({},"",{}),t}catch(e){}}();t.exports=i},O741:function(t,e,n){var r=n("hh1v");t.exports=function(t){if(!r(t)&&null!==t)throw TypeError("Can't set "+String(t)+" as a prototype");return t}},ODXe:function(t,e,n){"use strict";function r(t){if(Array.isArray(t))return t}function i(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o,a,s=[],u=!0,c=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);u=!0);}catch(l){c=!0,i=l}finally{try{if(!u&&null!=n["return"]&&(a=n["return"](),Object(a)!==a))return}finally{if(c)throw i}}return s}}n.d(e,"a",(function(){return s}));var o=n("BsWD");function a(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function s(t,e){return r(t)||i(t,e)||Object(o["a"])(t,e)||a()}},"Of+w":function(t,e,n){var r=n("Cwc5"),i=n("Kz5y"),o=r(i,"WeakMap");t.exports=o},P4y1:function(t,e){t.exports={}},P940:function(t,e,n){"use strict";t.exports=function(){var t=arguments.length,e=new Array(t);while(t--)e[t]=arguments[t];return new this(e)}},PF2M:function(t,e,n){"use strict";var r=n("67WC"),i=n("UMSQ"),o=n("GC2F"),a=n("ewvW"),s=n("0Dky"),u=r.aTypedArray,c=r.exportTypedArrayMethod,l=s((function(){new Int8Array(1).set({})}));c("set",(function(t){u(this);var e=o(arguments.length>1?arguments[1]:void 0,1),n=this.length,r=a(t),s=i(r.length),c=0;if(s+e>n)throw RangeError("Wrong length");while(c<s)this[e+c]=r[c++]}),l)},PKPk:function(t,e,n){"use strict";var r=n("ZUd8").charAt,i=n("afO8"),o=n("fdAy"),a="String Iterator",s=i.set,u=i.getterFor(a);o(String,"String",(function(t){s(this,{type:a,string:String(t),index:0})}),(function(){var t,e=u(this),n=e.string,i=e.index;return i>=n.length?{value:void 0,done:!0}:(t=r(n,i),e.index+=t.length,{value:t,done:!1})}))},Q1l4:function(t,e){function n(t,e){var n=-1,r=t.length;e||(e=Array(r));while(++n<r)e[n]=t[n];return e}t.exports=n},Q2Ig:function(t,e,n){e.nextTick=function(t){var e=Array.prototype.slice.call(arguments);e.shift(),setTimeout((function(){t.apply(null,e)}),0)},e.platform=e.arch=e.execPath=e.title="browser",e.pid=1,e.browser=!0,e.env={},e.argv=[],e.binding=function(t){throw new Error("No such module. (Possibly not yet loaded)")},function(){var t,r="/";e.cwd=function(){return r},e.chdir=function(e){t||(t=n("33yf")),r=t.resolve(e,r)}}(),e.exit=e.kill=e.umask=e.dlopen=e.uptime=e.memoryUsage=e.uvCounters=function(){},e.features={}},Q7Pz:function(t,e,n){"use strict";var r=n("I+eb"),i=n("xDBR"),o=n("glrk"),a=n("Sssf"),s=n("i4U9"),u=n("ImZN");r({target:"Map",proto:!0,real:!0,forced:i},{includes:function(t){return u(a(o(this)),(function(e,n){if(s(n,t))return u.stop()}),void 0,!0,!0).stopped}})},Q9SF:function(t,e){function n(t){if(Array.isArray(t))return t}t.exports=n,t.exports.__esModule=!0,t.exports["default"]=t.exports},QCnb:function(t,e,n){"use strict";t.exports=n("+wdc")},QFcT:function(t,e,n){var r=n("I+eb"),i=Math.hypot,o=Math.abs,a=Math.sqrt,s=!!i&&i(1/0,NaN)!==1/0;r({target:"Math",stat:!0,forced:s},{hypot:function(t,e){var n,r,i=0,s=0,u=arguments.length,c=0;while(s<u)n=o(arguments[s++]),c<n?(r=c/n,i=i*r*r+1,c=n):n>0?(r=n/c,i+=r*r):i+=n;return c===1/0?1/0:c*a(i)}})},QGkA:function(t,e,n){var r=n("RNIs");r("flat")},QGke:function(t,e,n){var r=n("z01/")["default"];function i(){"use strict";t.exports=i=function(){return e},t.exports.__esModule=!0,t.exports["default"]=t.exports;var e={},n=Object.prototype,o=n.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},s=a.iterator||"@@iterator",u=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function l(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(k){l=function(t,e,n){return t[e]=n}}function f(t,e,n,r){var i=e&&e.prototype instanceof d?e:d,o=Object.create(i.prototype),a=new C(r||[]);return o._invoke=function(t,e,n){var r="suspendedStart";return function(i,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw o;return A()}for(n.method=i,n.arg=o;;){var a=n.delegate;if(a){var s=E(a,n);if(s){if(s===p)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=h(t,e,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===p)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}(t,n,a),o}function h(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(k){return{type:"throw",arg:k}}}e.wrap=f;var p={};function d(){}function v(){}function g(){}var m={};l(m,s,(function(){return this}));var y=Object.getPrototypeOf,_=y&&y(y(T([])));_&&_!==n&&o.call(_,s)&&(m=_);var b=g.prototype=d.prototype=Object.create(m);function x(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function w(t,e){function n(i,a,s,u){var c=h(t[i],t,a);if("throw"!==c.type){var l=c.arg,f=l.value;return f&&"object"==r(f)&&o.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,s,u)}),(function(t){n("throw",t,s,u)})):e.resolve(f).then((function(t){l.value=t,s(l)}),(function(t){return n("throw",t,s,u)}))}u(c.arg)}var i;this._invoke=function(t,r){function o(){return new e((function(e,i){n(t,r,e,i)}))}return i=i?i.then(o,o):o()}}function E(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator["return"]&&(e.method="return",e.arg=void 0,E(t,e),"throw"===e.method))return p;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return p}var r=h(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,p;var i=r.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,p):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,p)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function C(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function T(t){if(t){var e=t[s];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,r=function e(){for(;++n<t.length;)if(o.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return r.next=r}}return{next:A}}function A(){return{value:void 0,done:!0}}return v.prototype=g,l(b,"constructor",g),l(g,"constructor",v),v.displayName=l(g,c,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===v||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,l(t,c,"GeneratorFunction")),t.prototype=Object.create(b),t},e.awrap=function(t){return{__await:t}},x(w.prototype),l(w.prototype,u,(function(){return this})),e.AsyncIterator=w,e.async=function(t,n,r,i,o){void 0===o&&(o=Promise);var a=new w(f(t,n,r,i),o);return e.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},x(b),l(b,c,"Generator"),l(b,s,(function(){return this})),l(b,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=T,C.prototype={constructor:C,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!t)for(var e in this)"t"===e.charAt(0)&&o.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(n,r){return a.type="throw",a.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=o.call(i,"catchLoc"),u=o.call(i,"finallyLoc");if(s&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&o.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,p):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),p},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),O(n),p}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;O(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:T(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),p}},e}t.exports=i,t.exports.__esModule=!0,t.exports["default"]=t.exports},QIpd:function(t,e,n){var r=n("xrYK");t.exports=function(t){if("number"!=typeof t&&"Number"!=r(t))throw TypeError("Incorrect invocation");return+t}},QcOe:function(t,e,n){var r=n("GoyQ"),i=n("6sVZ"),o=n("7Ix3"),a=Object.prototype,s=a.hasOwnProperty;function u(t){if(!r(t))return o(t);var e=i(t),n=[];for(var a in t)("constructor"!=a||!e&&s.call(t,a))&&n.push(a);return n}t.exports=u},QkVE:function(t,e,n){var r=n("EpBk");function i(t,e){var n=t.__data__;return r(e)?n["string"==typeof e?"string":"hash"]:n.map}t.exports=i},QkVN:function(t,e,n){var r=n("+Qka"),i=n("LsHQ"),o=i((function(t,e,n){r(t,e,n)}));t.exports=o},Qo3T:function(t,e,n){"use strict";(function(t){var r;n.d(e,"a",(function(){return i}));var i,o=function(){return r||(r="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:"undefined"!==typeof t?t:{})};r=o(),i="undefined"===typeof window?{devicePixelRatio:1,navigator:{userAgent:"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/95.0.4638.69 Safari/537.36",browserLanguage:"zh-CN",language:"zh-CN",platform:""},location:"",document:{documentElement:{style:{}},createEvent:function(){return!0},getElementById:function(t){return!0},createElement:function(){return{className:"",classList:{add:function(){return""}}}},createElementNS:function(){return!0},addEventListener:function(){return!0},removeEventListener:function(){return!0},querySelector:function(){return!1}},performance:{mark:function(t){return null},clearMeasures:function(t){return null},clearMarks:function(t){return null},measure:function(t,e,n){return{duration:0}},now:function(){return(new Date).getTime()}},Blob:"",dispatchEvent:function(t){return!0},Event:function(t,e){return!0},createElement:function(){return!0},createElementNS:function(){return!0},XMLHttpRequest:function(){return!0},addEventListener:function(){return!0},removeEventListener:function(){return!0},requestAnimationFrame:function(){return!0},cancelAnimationFrame:function(){return!0},clearTimeout:function(){return!0}}:window}).call(this,n("IyRk"))},Qo9l:function(t,e,n){var r=n("2oRo");t.exports=r},QoRX:function(t,e){function n(t,e){var n=-1,r=null==t?0:t.length;while(++n<r)if(e(t[n],n,t))return!0;return!1}t.exports=n},QqLw:function(t,e,n){var r=n("tadb"),i=n("ebwN"),o=n("HOxn"),a=n("yGk4"),s=n("Of+w"),u=n("NykK"),c=n("3Fdi"),l="[object Map]",f="[object Object]",h="[object Promise]",p="[object Set]",d="[object WeakMap]",v="[object DataView]",g=c(r),m=c(i),y=c(o),_=c(a),b=c(s),x=u;(r&&x(new r(new ArrayBuffer(1)))!=v||i&&x(new i)!=l||o&&x(o.resolve())!=h||a&&x(new a)!=p||s&&x(new s)!=d)&&(x=function(t){var e=u(t),n=e==f?t.constructor:void 0,r=n?c(n):"";if(r)switch(r){case g:return v;case m:return l;case y:return h;case _:return p;case b:return d}return e}),t.exports=x},"R3/m":function(t,e,n){"use strict";var r=n("I+eb"),i=n("xDBR"),o=n("glrk"),a=n("A2ZE"),s=n("Sssf"),u=n("ImZN");r({target:"Map",proto:!0,real:!0,forced:i},{every:function(t){var e=o(this),n=s(e),r=a(t,arguments.length>1?arguments[1]:void 0,3);return!u(n,(function(t,n){if(!r(n,t,e))return u.stop()}),void 0,!0,!0).stopped}})},R5yR:function(t,e,n){var r=n("9xmf"),i=n("rhT+"),o=n("mGKP"),a=n("XWE6");function s(t){return r(t)||i(t)||o(t)||a()}t.exports=s,t.exports.__esModule=!0,t.exports["default"]=t.exports},RK3t:function(t,e,n){var r=n("0Dky"),i=n("xrYK"),o="".split;t.exports=r((function(){return!Object("z").propertyIsEnumerable(0)}))?function(t){return"String"==i(t)?o.call(t,""):Object(t)}:Object},RN6c:function(t,e,n){var r=n("2oRo");t.exports=function(t,e){var n=r.console;n&&n.error&&(1===arguments.length?n.error(t):n.error(t,e))}},RNIs:function(t,e,n){var r=n("tiKp"),i=n("fHMY"),o=n("m/L8"),a=r("unscopables"),s=Array.prototype;void 0==s[a]&&o.f(s,a,{configurable:!0,value:i(null)}),t.exports=function(t){s[a][t]=!0}},ROdP:function(t,e,n){var r=n("hh1v"),i=n("xrYK"),o=n("tiKp"),a=o("match");t.exports=function(t){var e;return r(t)&&(void 0!==(e=t[a])?!!e:"RegExp"==i(t))}},"RR/i":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.typeConstraint=e.namedConstraint=e.taggedConstraint=e.traverseAncerstors=void 0;var r=n("xfSm"),i=n("GXnB"),o=function t(e,n){var r=e.parentRequest;return null!==r&&(!!n(r)||t(r,n))};e.traverseAncerstors=o;var a=function(t){return function(e){var n=function(n){return null!==n&&null!==n.target&&n.target.matchesTag(t)(e)};return n.metaData=new i.Metadata(t,e),n}};e.taggedConstraint=a;var s=a(r.NAMED_TAG);e.namedConstraint=s;var u=function(t){return function(e){var n=null;if(null!==e){if(n=e.bindings[0],"string"===typeof t){var r=n.serviceIdentifier;return r===t}var i=e.bindings[0].implementationType;return t===i}return!1}};e.typeConstraint=u},RZMt:function(t,e,n){},Rm1S:function(t,e,n){"use strict";var r=n("14Sl"),i=n("glrk"),o=n("UMSQ"),a=n("HYAF"),s=n("iqWW"),u=n("FMNM");r("match",1,(function(t,e,n){return[function(e){var n=a(this),r=void 0==e?void 0:e[t];return void 0!==r?r.call(e,n):new RegExp(e)[t](String(n))},function(t){var r=n(e,t,this);if(r.done)return r.value;var a=i(t),c=String(this);if(!a.global)return u(a,c);var l=a.unicode;a.lastIndex=0;var f,h=[],p=0;while(null!==(f=u(a,c))){var d=String(f[0]);h[p]=d,""===d&&(a.lastIndex=s(c,o(a.lastIndex),l)),p++}return 0===p?null:h}]}))},SEBh:function(t,e,n){var r=n("glrk"),i=n("HAuM"),o=n("tiKp"),a=o("species");t.exports=function(t,e){var n,o=r(t).constructor;return void 0===o||void 0==(n=r(o)[a])?e:i(n)}},SL6q:function(t,e,n){var r=n("I+eb"),i=n("voyM"),o=n("vo4V");r({target:"Math",stat:!0},{fscale:function(t,e,n,r,a){return o(i(t,e,n,r,a))}})},STAE:function(t,e,n){var r=n("0Dky");t.exports=!!Object.getOwnPropertySymbols&&!r((function(){return!String(Symbol())}))},SUU4:function(t,e,n){(function(e,r){t.exports=r(n("szb8"))})(0,(function(t){"use strict";var e=function(t){return t instanceof Uint8Array||t instanceof Uint16Array||t instanceof Uint32Array||t instanceof Int8Array||t instanceof Int16Array||t instanceof Int32Array||t instanceof Float32Array||t instanceof Float64Array||t instanceof Uint8ClampedArray},n=function(t,e){for(var n=Object.keys(e),r=0;r<n.length;++r)t[n[r]]=e[n[r]];return t},r="\n";function i(t){return"undefined"!==typeof atob?atob(t):"base64:"+t}function o(t){var e=new Error("(regl) "+t);throw console.error(e),e}function a(t,e){t||o(e)}function s(t){return t?": "+t:""}function u(t,e,n){t in e||o("unknown parameter ("+t+")"+s(n)+". possible values: "+Object.keys(e).join())}function c(t,n){e(t)||o("invalid parameter type"+s(n)+". must be a typed array")}function l(t,e){switch(e){case"number":return"number"===typeof t;case"object":return"object"===typeof t;case"string":return"string"===typeof t;case"boolean":return"boolean"===typeof t;case"function":return"function"===typeof t;case"undefined":return"undefined"===typeof t;case"symbol":return"symbol"===typeof t}}function f(t,e,n){l(t,e)||o("invalid parameter type"+s(n)+". expected "+e+", got "+typeof t)}function h(t,e){t>=0&&(0|t)===t||o("invalid parameter type, ("+t+")"+s(e)+". must be a nonnegative integer")}function p(t,e,n){e.indexOf(t)<0&&o("invalid value"+s(n)+". must be one of: "+e)}var d=["gl","canvas","container","attributes","pixelRatio","extensions","optionalExtensions","profile","onDone"];function v(t){Object.keys(t).forEach((function(t){d.indexOf(t)<0&&o('invalid regl constructor argument "'+t+'". must be one of '+d)}))}function g(t,e){t+="";while(t.length<e)t=" "+t;return t}function m(){this.name="unknown",this.lines=[],this.index={},this.hasErrors=!1}function y(t,e){this.number=t,this.line=e,this.errors=[]}function _(t,e,n){this.file=t,this.line=e,this.message=n}function b(){var t=new Error,e=(t.stack||t).toString(),n=/compileProcedure.*\n\s*at.*\((.*)\)/.exec(e);if(n)return n[1];var r=/compileProcedure.*\n\s*at\s+(.*)(\n|$)/.exec(e);return r?r[1]:"unknown"}function x(){var t=new Error,e=(t.stack||t).toString(),n=/at REGLCommand.*\n\s+at.*\((.*)\)/.exec(e);if(n)return n[1];var r=/at REGLCommand.*\n\s+at\s+(.*)\n/.exec(e);return r?r[1]:"unknown"}function w(t,e){var n=t.split("\n"),r=1,o=0,a={unknown:new m,0:new m};a.unknown.name=a[0].name=e||b(),a.unknown.lines.push(new y(0,""));for(var s=0;s<n.length;++s){var u=n[s],c=/^\s*#\s*(\w+)\s+(.+)\s*$/.exec(u);if(c)switch(c[1]){case"line":var l=/(\d+)(\s+\d+)?/.exec(c[2]);l&&(r=0|l[1],l[2]&&(o=0|l[2],o in a||(a[o]=new m)));break;case"define":var f=/SHADER_NAME(_B64)?\s+(.*)$/.exec(c[2]);f&&(a[o].name=f[1]?i(f[2]):f[2]);break}a[o].lines.push(new y(r++,u))}return Object.keys(a).forEach((function(t){var e=a[t];e.lines.forEach((function(t){e.index[t.number]=t}))})),a}function E(t){var e=[];return t.split("\n").forEach((function(t){if(!(t.length<5)){var n=/^ERROR:\s+(\d+):(\d+):\s*(.*)$/.exec(t);n?e.push(new _(0|n[1],0|n[2],n[3].trim())):t.length>0&&e.push(new _("unknown",0,t))}})),e}function S(t,e){e.forEach((function(e){var n=t[e.file];if(n){var r=n.index[e.line];if(r)return r.errors.push(e),void(n.hasErrors=!0)}t.unknown.hasErrors=!0,t.unknown.lines[0].errors.push(e)}))}function O(t,e,n,i,o){if(!t.getShaderParameter(e,t.COMPILE_STATUS)){var s=t.getShaderInfoLog(e),u=i===t.FRAGMENT_SHADER?"fragment":"vertex";R(n,"string",u+" shader source must be a string",o);var c=w(n,o),l=E(s);S(c,l),Object.keys(c).forEach((function(t){var e=c[t];if(e.hasErrors){var n=[""],i=[""];o("file number "+t+": "+e.name+"\n","color:red;text-decoration:underline;font-weight:bold"),e.lines.forEach((function(t){if(t.errors.length>0){o(g(t.number,4)+"|  ","background-color:yellow; font-weight:bold"),o(t.line+r,"color:red; background-color:yellow; font-weight:bold");var e=0;t.errors.forEach((function(n){var i=n.message,a=/^\s*'(.*)'\s*:\s*(.*)$/.exec(i);if(a){var s=a[1];switch(i=a[2],s){case"assign":s="=";break}e=Math.max(t.line.indexOf(s,e),0)}else e=0;o(g("| ",6)),o(g("^^^",e+3)+r,"font-weight:bold"),o(g("| ",6)),o(i+r,"font-weight:bold")})),o(g("| ",6)+r)}else o(g(t.number,4)+"|  "),o(t.line+r,"color:red")})),"undefined"===typeof document||window.chrome?console.log(n.join("")):(i[0]=n.join("%c"),console.log.apply(console,i))}function o(t,e){n.push(t),i.push(e||"")}})),a.raise("Error compiling "+u+" shader, "+c[0].name)}}function C(t,e,n,i,o){if(!t.getProgramParameter(e,t.LINK_STATUS)){var s=t.getProgramInfoLog(e),u=w(n,o),c=w(i,o),l='Error linking program with vertex shader, "'+c[0].name+'", and fragment shader "'+u[0].name+'"';"undefined"!==typeof document?console.log("%c"+l+r+"%c"+s,"color:red;text-decoration:underline;font-weight:bold","color:red"):console.log(l+r+s),a.raise(l)}}function T(t){t._commandRef=b()}function A(t,e,n,r){function i(t){return t?r.id(t):0}function o(t,e){Object.keys(e).forEach((function(e){t[r.id(e)]=!0}))}T(t),t._fragId=i(t["static"].frag),t._vertId=i(t["static"].vert);var a=t._uniformSet={};o(a,e["static"]),o(a,e.dynamic);var s=t._attributeSet={};o(s,n["static"]),o(s,n.dynamic),t._hasCount="count"in t["static"]||"count"in t.dynamic||"elements"in t["static"]||"elements"in t.dynamic}function k(t,e){var n=x();o(t+" in command "+(e||b())+("unknown"===n?"":" called from "+n))}function M(t,e,n){t||k(e,n||b())}function P(t,e,n,r){t in e||k("unknown parameter ("+t+")"+s(n)+". possible values: "+Object.keys(e).join(),r||b())}function R(t,e,n,r){l(t,e)||k("invalid parameter type"+s(n)+". expected "+e+", got "+typeof t,r||b())}function j(t){t()}function I(t,e,n){t.texture?p(t.texture._texture.internalformat,e,"unsupported texture format for attachment"):p(t.renderbuffer._renderbuffer.format,n,"unsupported renderbuffer format for attachment")}var L=33071,N=9728,D=9984,F=9985,B=9986,z=9987,U=5120,V=5121,H=5122,G=5123,W=5124,Z=5125,Y=5126,X=32819,q=32820,K=33635,Q=34042,$=36193,J={};function tt(t,e){return t===q||t===X||t===K?2:t===Q?4:J[t]*e}function et(t){return!(t&t-1)&&!!t}function nt(t,e,n){var r,i=e.width,o=e.height,s=e.channels;a(i>0&&i<=n.maxTextureSize&&o>0&&o<=n.maxTextureSize,"invalid texture shape"),t.wrapS===L&&t.wrapT===L||a(et(i)&&et(o),"incompatible wrap mode for texture, both width and height must be power of 2"),1===e.mipmask?1!==i&&1!==o&&a(t.minFilter!==D&&t.minFilter!==B&&t.minFilter!==F&&t.minFilter!==z,"min filter requires mipmap"):(a(et(i)&&et(o),"texture must be a square power of 2 to support mipmapping"),a(e.mipmask===(i<<1)-1,"missing or incomplete mipmap data")),e.type===Y&&(n.extensions.indexOf("oes_texture_float_linear")<0&&a(t.minFilter===N&&t.magFilter===N,"filter not supported, must enable oes_texture_float_linear"),a(!t.genMipmaps,"mipmap generation not supported with float textures"));var u=e.images;for(r=0;r<16;++r)if(u[r]){var c=i>>r,l=o>>r;a(e.mipmask&1<<r,"missing mipmap data");var f=u[r];if(a(f.width===c&&f.height===l,"invalid shape for mip images"),a(f.format===e.format&&f.internalformat===e.internalformat&&f.type===e.type,"incompatible type for mip image"),f.compressed);else if(f.data){var h=Math.ceil(tt(f.type,s)*c/f.unpackAlignment)*f.unpackAlignment;a(f.data.byteLength===h*l,"invalid data for image, buffer size is inconsistent with image format")}else f.element||f.copy}else t.genMipmaps||a(0===(e.mipmask&1<<r),"extra mipmap data");e.compressed&&a(!t.genMipmaps,"mipmap generation for compressed images not supported")}function rt(t,e,n,r){var i=t.width,o=t.height,s=t.channels;a(i>0&&i<=r.maxTextureSize&&o>0&&o<=r.maxTextureSize,"invalid texture shape"),a(i===o,"cube map must be square"),a(e.wrapS===L&&e.wrapT===L,"wrap mode not supported by cube map");for(var u=0;u<n.length;++u){var c=n[u];a(c.width===i&&c.height===o,"inconsistent cube map face shape"),e.genMipmaps&&(a(!c.compressed,"can not generate mipmap for compressed textures"),a(1===c.mipmask,"can not specify mipmaps and generate mipmaps"));for(var l=c.images,f=0;f<16;++f){var h=l[f];if(h){var p=i>>f,d=o>>f;a(c.mipmask&1<<f,"missing mipmap data"),a(h.width===p&&h.height===d,"invalid shape for mip images"),a(h.format===t.format&&h.internalformat===t.internalformat&&h.type===t.type,"incompatible type for mip image"),h.compressed||(h.data?a(h.data.byteLength===p*d*Math.max(tt(h.type,s),h.unpackAlignment),"invalid data for image, buffer size is inconsistent with image format"):h.element||h.copy)}}}}J[U]=J[V]=1,J[H]=J[G]=J[$]=J[K]=J[X]=J[q]=2,J[W]=J[Z]=J[Y]=J[Q]=4;var it=n(a,{optional:j,raise:o,commandRaise:k,command:M,parameter:u,commandParameter:P,constructor:v,type:f,commandType:R,isTypedArray:c,nni:h,oneOf:p,shaderError:O,linkError:C,callSite:x,saveCommandRef:T,saveDrawInfo:A,framebufferFormat:I,guessCommand:b,texture2D:nt,textureCube:rt}),ot=0,at=0,st=5,ut=6;function ct(t,e){this.id=ot++,this.type=t,this.data=e}function lt(t){return t.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}function ft(t){if(0===t.length)return[];var e=t.charAt(0),n=t.charAt(t.length-1);if(t.length>1&&e===n&&('"'===e||"'"===e))return['"'+lt(t.substr(1,t.length-2))+'"'];var r=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(t);if(r)return ft(t.substr(0,r.index)).concat(ft(r[1])).concat(ft(t.substr(r.index+r[0].length)));var i=t.split(".");if(1===i.length)return['"'+lt(t)+'"'];for(var o=[],a=0;a<i.length;++a)o=o.concat(ft(i[a]));return o}function ht(t){return"["+ft(t).join("][")+"]"}function pt(t,e){return new ct(t,ht(e+""))}function dt(t){return"function"===typeof t&&!t._reglType||t instanceof ct}function vt(t,e){return"function"===typeof t?new ct(at,t):"number"===typeof t||"boolean"===typeof t?new ct(st,t):Array.isArray(t)?new ct(ut,t.map((function(t,n){return vt(t,e+"["+n+"]")}))):t instanceof ct?t:void it(!1,"invalid option type in uniform "+e)}var gt={DynamicVariable:ct,define:pt,isDynamic:dt,unbox:vt,accessor:ht},mt={next:"function"===typeof requestAnimationFrame?function(t){return requestAnimationFrame(t)}:function(t){return setTimeout(t,16)},cancel:"function"===typeof cancelAnimationFrame?function(t){return cancelAnimationFrame(t)}:clearTimeout},yt="undefined"!==typeof my&&!!my&&"function"===typeof my.showToast&&!0!==my.isFRM,_t=yt?function(){return+new Date}:"undefined"!==typeof performance&&performance.now?function(){return performance.now()}:function(){return+new Date};function bt(){var t={"":0},e=[""];return{id:function(n){var r=t[n];return r||(r=t[n]=e.length,e.push(n),r)},str:function(t){return e[t]}}}function xt(t,e,r){var i,o=document.createElement("canvas");function a(){var e=window.innerWidth,n=window.innerHeight;if(t!==document.body){var i=o.getBoundingClientRect();e=i.right-i.left,n=i.bottom-i.top}o.width=r*e,o.height=r*n}function s(){i?i.disconnect():window.removeEventListener("resize",a),t.removeChild(o)}return n(o.style,{border:0,margin:0,padding:0,top:0,left:0,width:"100%",height:"100%"}),t.appendChild(o),t===document.body&&(o.style.position="absolute",n(t.style,{margin:0,padding:0})),t!==document.body&&"function"===typeof ResizeObserver?(i=new ResizeObserver((function(){setTimeout(a)})),i.observe(t)):window.addEventListener("resize",a,!1),a(),{canvas:o,onDestroy:s}}function wt(t,e){function n(n){try{return t.getContext(n,e)}catch(r){return null}}return n("webgl")||n("experimental-webgl")||n("webgl-experimental")}function Et(t){return"string"===typeof t.nodeName&&"function"===typeof t.appendChild&&"function"===typeof t.getBoundingClientRect}function St(t){return"function"===typeof t.drawArrays||"function"===typeof t.drawElements}function Ot(t){return"string"===typeof t?t.split():(it(Array.isArray(t),"invalid extension array"),t)}function Ct(t){return"string"===typeof t?(it("undefined"!==typeof document,"not supported outside of DOM"),document.querySelector(t)):t}function Tt(t){var e,n,r,i,o=t||{},a={},s=[],u=[],c="undefined"===typeof window?1:window.devicePixelRatio,l=!1,f=function(t){t&&it.raise(t)},h=function(){};if("string"===typeof o?(it("undefined"!==typeof document,"selector queries only supported in DOM environments"),e=document.querySelector(o),it(e,"invalid query string for element")):"object"===typeof o?Et(o)?e=o:St(o)?(i=o,r=i.canvas):(it.constructor(o),"gl"in o?i=o.gl:"canvas"in o?r=Ct(o.canvas):"container"in o&&(n=Ct(o.container)),"attributes"in o&&(a=o.attributes,it.type(a,"object","invalid context attributes")),"extensions"in o&&(s=Ot(o.extensions)),"optionalExtensions"in o&&(u=Ot(o.optionalExtensions)),"onDone"in o&&(it.type(o.onDone,"function","invalid or missing onDone callback"),f=o.onDone),"profile"in o&&(l=!!o.profile),"pixelRatio"in o&&(c=+o.pixelRatio,it(c>0,"invalid pixel ratio"))):it.raise("invalid arguments to regl"),e&&("canvas"===e.nodeName.toLowerCase()?r=e:n=e),!i){if(!r){it("undefined"!==typeof document,"must manually specify webgl context outside of DOM environments");var p=xt(n||document.body,f,c);if(!p)return null;r=p.canvas,h=p.onDestroy}void 0===a.premultipliedAlpha&&(a.premultipliedAlpha=!0),i=wt(r,a)}return i?{gl:i,canvas:r,container:n,extensions:s,optionalExtensions:u,pixelRatio:c,profile:l,onDone:f,onDestroy:h}:(h(),f("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}function At(t,e){var n={};function r(t){it.type(t,"string","extension name must be string");var e,r=t.toLowerCase();try{e=n[r]=i(t)}catch(o){}return!!e}function i(e){return t.getExtension(e)?t.getExtension(e):t.getExtension(e.toLowerCase())?t.getExtension(e.toLowerCase()):null}for(var o=0;o<e.extensions.length;++o){var a=e.extensions[o];if(!r(a))return e.onDestroy(),e.onDone('"'+a+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return e.optionalExtensions.forEach(r),{extensions:n,restore:function(){Object.keys(n).forEach((function(t){if(n[t]&&!r(t))throw new Error("(regl): error restoring extension "+t)}))}}}function kt(t,e){for(var n=Array(t),r=0;r<t;++r)n[r]=e(r);return n}var Mt=5120,Pt=5121,Rt=5122,jt=5123,It=5124,Lt=5125,Nt=5126;function Dt(t){for(var e=16;e<=1<<28;e*=16)if(t<=e)return e;return 0}function Ft(t){var e,n;return e=(t>65535)<<4,t>>>=e,n=(t>255)<<3,t>>>=n,e|=n,n=(t>15)<<2,t>>>=n,e|=n,n=(t>3)<<1,t>>>=n,e|=n,e|t>>1}function Bt(){var t=kt(8,(function(){return[]}));function e(e){var n=Dt(e),r=t[Ft(n)>>2];return r.length>0?r.pop():new ArrayBuffer(n)}function n(e){t[Ft(e.byteLength)>>2].push(e)}function r(t,n){var r=null;switch(t){case Mt:r=new Int8Array(e(n),0,n);break;case Pt:r=new Uint8Array(e(n),0,n);break;case Rt:r=new Int16Array(e(2*n),0,n);break;case jt:r=new Uint16Array(e(2*n),0,n);break;case It:r=new Int32Array(e(4*n),0,n);break;case Lt:r=new Uint32Array(e(4*n),0,n);break;case Nt:r=new Float32Array(e(4*n),0,n);break;default:return null}return r.length!==n?r.subarray(0,n):r}function i(t){n(t.buffer)}return{alloc:e,free:n,allocType:r,freeType:i}}var zt=Bt();zt.zero=Bt();var Ut=3408,Vt=3410,Ht=3411,Gt=3412,Wt=3413,Zt=3414,Yt=3415,Xt=33901,qt=33902,Kt=3379,Qt=3386,$t=34921,Jt=36347,te=36348,ee=35661,ne=35660,re=34930,ie=36349,oe=34076,ae=34024,se=7936,ue=7937,ce=7938,le=35724,fe=34047,he=36063,pe=34852,de=3553,ve=34067,ge=34069,me=33984,ye=6408,_e=5126,be=5121,xe=36160,we=36053,Ee=36064,Se=16384,Oe=function(t,e){var n=1;e.ext_texture_filter_anisotropic&&(n=t.getParameter(fe));var r=1,i=1;e.webgl_draw_buffers&&(r=t.getParameter(pe),i=t.getParameter(he));var o=!!e.oes_texture_float;if(o){var a=t.createTexture();t.bindTexture(de,a),t.texImage2D(de,0,ye,1,1,0,ye,_e,null);var s=t.createFramebuffer();if(t.bindFramebuffer(xe,s),t.framebufferTexture2D(xe,Ee,de,a,0),t.bindTexture(de,null),t.checkFramebufferStatus(xe)!==we)o=!1;else{t.viewport(0,0,1,1),t.clearColor(1,0,0,1),t.clear(Se);var u=zt.allocType(_e,4);t.readPixels(0,0,1,1,ye,_e,u),t.getError()?o=!1:(t.deleteFramebuffer(s),t.deleteTexture(a),o=1===u[0]),zt.freeType(u)}}var c="undefined"!==typeof navigator&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent)),l=!0;if(!c){var f=t.createTexture(),h=zt.allocType(be,36);t.activeTexture(me),t.bindTexture(ve,f),t.texImage2D(ge,0,ye,3,3,0,ye,be,h),zt.freeType(h),t.bindTexture(ve,null),t.deleteTexture(f),l=!t.getError()}return{colorBits:[t.getParameter(Vt),t.getParameter(Ht),t.getParameter(Gt),t.getParameter(Wt)],depthBits:t.getParameter(Zt),stencilBits:t.getParameter(Yt),subpixelBits:t.getParameter(Ut),extensions:Object.keys(e).filter((function(t){return!!e[t]})),maxAnisotropic:n,maxDrawbuffers:r,maxColorAttachments:i,pointSizeDims:t.getParameter(Xt),lineWidthDims:t.getParameter(qt),maxViewportDims:t.getParameter(Qt),maxCombinedTextureUnits:t.getParameter(ee),maxCubeMapSize:t.getParameter(oe),maxRenderbufferSize:t.getParameter(ae),maxTextureUnits:t.getParameter(re),maxTextureSize:t.getParameter(Kt),maxAttributes:t.getParameter($t),maxVertexUniforms:t.getParameter(Jt),maxVertexTextureUnits:t.getParameter(ne),maxVaryingVectors:t.getParameter(te),maxFragmentUniforms:t.getParameter(ie),glsl:t.getParameter(le),renderer:t.getParameter(ue),vendor:t.getParameter(se),version:t.getParameter(ce),readFloat:o,npotTextureCube:l}};function Ce(t){return!!t&&"object"===typeof t&&Array.isArray(t.shape)&&Array.isArray(t.stride)&&"number"===typeof t.offset&&t.shape.length===t.stride.length&&(Array.isArray(t.data)||e(t.data))}var Te=function(t){return Object.keys(t).map((function(e){return t[e]}))},Ae={shape:Ie,flatten:je};function ke(t,e,n){for(var r=0;r<e;++r)n[r]=t[r]}function Me(t,e,n,r){for(var i=0,o=0;o<e;++o)for(var a=t[o],s=0;s<n;++s)r[i++]=a[s]}function Pe(t,e,n,r,i,o){for(var a=o,s=0;s<e;++s)for(var u=t[s],c=0;c<n;++c)for(var l=u[c],f=0;f<r;++f)i[a++]=l[f]}function Re(t,e,n,r,i){for(var o=1,a=n+1;a<e.length;++a)o*=e[a];var s=e[n];if(e.length-n===4){var u=e[n+1],c=e[n+2],l=e[n+3];for(a=0;a<s;++a)Pe(t[a],u,c,l,r,i),i+=o}else for(a=0;a<s;++a)Re(t[a],e,n+1,r,i),i+=o}function je(t,e,n,r){var i=1;if(e.length)for(var o=0;o<e.length;++o)i*=e[o];else i=0;var a=r||zt.allocType(n,i);switch(e.length){case 0:break;case 1:ke(t,e[0],a);break;case 2:Me(t,e[0],e[1],a);break;case 3:Pe(t,e[0],e[1],e[2],a,0);break;default:Re(t,e,0,a,0)}return a}function Ie(t){for(var e=[],n=t;n.length;n=n[0])e.push(n.length);return e}var Le={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},Ne=5120,De=5122,Fe=5124,Be=5121,ze=5123,Ue=5125,Ve=5126,He=5126,Ge={int8:Ne,int16:De,int32:Fe,uint8:Be,uint16:ze,uint32:Ue,float:Ve,float32:He},We=35048,Ze=35040,Ye={dynamic:We,stream:Ze,static:35044},Xe=Ae.flatten,qe=Ae.shape,Ke=35044,Qe=35040,$e=5121,Je=5126,tn=[];function en(t){return 0|Le[Object.prototype.toString.call(t)]}function nn(t,e){for(var n=0;n<e.length;++n)t[n]=e[n]}function rn(t,e,n,r,i,o,a){for(var s=0,u=0;u<n;++u)for(var c=0;c<r;++c)t[s++]=e[i*u+o*c+a]}function on(t,n,r,i){var o=0,a={};function s(e){this.id=o++,this.buffer=t.createBuffer(),this.type=e,this.usage=Ke,this.byteLength=0,this.dimension=1,this.dtype=$e,this.persistentData=null,r.profile&&(this.stats={size:0})}s.prototype.bind=function(){t.bindBuffer(this.type,this.buffer)},s.prototype.destroy=function(){p(this)};var u=[];function c(t,e){var n=u.pop();return n||(n=new s(t)),n.bind(),h(n,e,Qe,0,1,!1),n}function l(t){u.push(t)}function f(e,n,r){e.byteLength=n.byteLength,t.bufferData(e.type,n,r)}function h(t,n,r,i,o,a){var s,u;if(t.usage=r,Array.isArray(n)){if(t.dtype=i||Je,n.length>0)if(Array.isArray(n[0])){s=qe(n);for(var c=1,l=1;l<s.length;++l)c*=s[l];t.dimension=c,u=Xe(n,s,t.dtype),f(t,u,r),a?t.persistentData=u:zt.freeType(u)}else if("number"===typeof n[0]){t.dimension=o;var h=zt.allocType(t.dtype,n.length);nn(h,n),f(t,h,r),a?t.persistentData=h:zt.freeType(h)}else e(n[0])?(t.dimension=n[0].length,t.dtype=i||en(n[0])||Je,u=Xe(n,[n.length,n[0].length],t.dtype),f(t,u,r),a?t.persistentData=u:zt.freeType(u)):it.raise("invalid buffer data")}else if(e(n))t.dtype=i||en(n),t.dimension=o,f(t,n,r),a&&(t.persistentData=new Uint8Array(new Uint8Array(n.buffer)));else if(Ce(n)){s=n.shape;var p=n.stride,d=n.offset,v=0,g=0,m=0,y=0;1===s.length?(v=s[0],g=1,m=p[0],y=0):2===s.length?(v=s[0],g=s[1],m=p[0],y=p[1]):it.raise("invalid shape"),t.dtype=i||en(n.data)||Je,t.dimension=g;var _=zt.allocType(t.dtype,v*g);rn(_,n.data,v,g,m,y,d),f(t,_,r),a?t.persistentData=_:zt.freeType(_)}else n instanceof ArrayBuffer?(t.dtype=$e,t.dimension=o,f(t,n,r),a&&(t.persistentData=new Uint8Array(new Uint8Array(n)))):it.raise("invalid buffer data")}function p(e){n.bufferCount--,i(e);var r=e.buffer;it(r,"buffer must not be deleted already"),t.deleteBuffer(r),e.buffer=null,delete a[e.id]}function d(i,o,u,c){n.bufferCount++;var l=new s(o);function f(n){var i=Ke,o=null,a=0,s=0,u=1;return Array.isArray(n)||e(n)||Ce(n)||n instanceof ArrayBuffer?o=n:"number"===typeof n?a=0|n:n&&(it.type(n,"object","buffer arguments must be an object, a number or an array"),"data"in n&&(it(null===o||Array.isArray(o)||e(o)||Ce(o),"invalid data for buffer"),o=n.data),"usage"in n&&(it.parameter(n.usage,Ye,"invalid buffer usage"),i=Ye[n.usage]),"type"in n&&(it.parameter(n.type,Ge,"invalid buffer type"),s=Ge[n.type]),"dimension"in n&&(it.type(n.dimension,"number","invalid dimension"),u=0|n.dimension),"length"in n&&(it.nni(a,"buffer length must be a nonnegative integer"),a=0|n.length)),l.bind(),o?h(l,o,i,s,u,c):(a&&t.bufferData(l.type,a,i),l.dtype=s||$e,l.usage=i,l.dimension=u,l.byteLength=a),r.profile&&(l.stats.size=l.byteLength*tn[l.dtype]),f}function d(e,n){it(n+e.byteLength<=l.byteLength,"invalid buffer subdata call, buffer is too small.  Can't write data of size "+e.byteLength+" starting from offset "+n+" to a buffer of size "+l.byteLength),t.bufferSubData(l.type,n,e)}function v(t,n){var r,i=0|(n||0);if(l.bind(),e(t)||t instanceof ArrayBuffer)d(t,i);else if(Array.isArray(t)){if(t.length>0)if("number"===typeof t[0]){var o=zt.allocType(l.dtype,t.length);nn(o,t),d(o,i),zt.freeType(o)}else if(Array.isArray(t[0])||e(t[0])){r=qe(t);var a=Xe(t,r,l.dtype);d(a,i),zt.freeType(a)}else it.raise("invalid buffer data")}else if(Ce(t)){r=t.shape;var s=t.stride,u=0,c=0,h=0,p=0;1===r.length?(u=r[0],c=1,h=s[0],p=0):2===r.length?(u=r[0],c=r[1],h=s[0],p=s[1]):it.raise("invalid shape");var v=Array.isArray(t.data)?l.dtype:en(t.data),g=zt.allocType(v,u*c);rn(g,t.data,u,c,h,p,t.offset),d(g,i),zt.freeType(g)}else it.raise("invalid data for buffer subdata");return f}return a[l.id]=l,u||f(i),f._reglType="buffer",f._buffer=l,f.subdata=v,r.profile&&(f.stats=l.stats),f.destroy=function(){p(l)},f}function v(){Te(a).forEach((function(e){e.buffer=t.createBuffer(),t.bindBuffer(e.type,e.buffer),t.bufferData(e.type,e.persistentData||e.byteLength,e.usage)}))}return r.profile&&(n.getTotalBufferSize=function(){var t=0;return Object.keys(a).forEach((function(e){t+=a[e].stats.size})),t}),{create:d,createStream:c,destroyStream:l,clear:function(){Te(a).forEach(p),u.forEach(p)},getBuffer:function(t){return t&&t._buffer instanceof s?t._buffer:null},restore:v,_initBuffer:h}}tn[5120]=1,tn[5122]=2,tn[5124]=4,tn[5121]=1,tn[5123]=2,tn[5125]=4,tn[5126]=4;var an=0,sn=0,un=1,cn=1,ln=4,fn=4,hn={points:an,point:sn,lines:un,line:cn,triangles:ln,triangle:fn,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},pn=0,dn=1,vn=4,gn=5120,mn=5121,yn=5122,_n=5123,bn=5124,xn=5125,wn=34963,En=35040,Sn=35044;function On(t,n,r,i){var o={},a=0,s={uint8:mn,uint16:_n};function u(t){this.id=a++,o[this.id]=this,this.buffer=t,this.primType=vn,this.vertCount=0,this.type=0}n.oes_element_index_uint&&(s.uint32=xn),u.prototype.bind=function(){this.buffer.bind()};var c=[];function l(t){var e=c.pop();return e||(e=new u(r.create(null,wn,!0,!1)._buffer)),h(e,t,En,-1,-1,0,0),e}function f(t){c.push(t)}function h(i,o,a,s,u,c,l){var f;if(i.buffer.bind(),o){var h=l;l||e(o)&&(!Ce(o)||e(o.data))||(h=n.oes_element_index_uint?xn:_n),r._initBuffer(i.buffer,o,a,h,3)}else t.bufferData(wn,c,a),i.buffer.dtype=f||mn,i.buffer.usage=a,i.buffer.dimension=3,i.buffer.byteLength=c;if(f=l,!l){switch(i.buffer.dtype){case mn:case gn:f=mn;break;case _n:case yn:f=_n;break;case xn:case bn:f=xn;break;default:it.raise("unsupported type for element array")}i.buffer.dtype=f}i.type=f,it(f!==xn||!!n.oes_element_index_uint,"32 bit element buffers not supported, enable oes_element_index_uint first");var p=u;p<0&&(p=i.buffer.byteLength,f===_n?p>>=1:f===xn&&(p>>=2)),i.vertCount=p;var d=s;if(s<0){d=vn;var v=i.buffer.dimension;1===v&&(d=pn),2===v&&(d=dn),3===v&&(d=vn)}i.primType=d}function p(t){i.elementsCount--,it(null!==t.buffer,"must not double destroy elements"),delete o[t.id],t.buffer.destroy(),t.buffer=null}function d(t,n){var o=r.create(null,wn,!0),a=new u(o._buffer);function c(t){if(t)if("number"===typeof t)o(t),a.primType=vn,a.vertCount=0|t,a.type=mn;else{var n=null,r=Sn,i=-1,u=-1,l=0,f=0;Array.isArray(t)||e(t)||Ce(t)?n=t:(it.type(t,"object","invalid arguments for elements"),"data"in t&&(n=t.data,it(Array.isArray(n)||e(n)||Ce(n),"invalid data for element buffer")),"usage"in t&&(it.parameter(t.usage,Ye,"invalid element buffer usage"),r=Ye[t.usage]),"primitive"in t&&(it.parameter(t.primitive,hn,"invalid element buffer primitive"),i=hn[t.primitive]),"count"in t&&(it("number"===typeof t.count&&t.count>=0,"invalid vertex count for elements"),u=0|t.count),"type"in t&&(it.parameter(t.type,s,"invalid buffer type"),f=s[t.type]),"length"in t?l=0|t.length:(l=u,f===_n||f===yn?l*=2:f!==xn&&f!==bn||(l*=4))),h(a,n,r,i,u,l,f)}else o(),a.primType=vn,a.vertCount=0,a.type=mn;return c}return i.elementsCount++,c(t),c._reglType="elements",c._elements=a,c.subdata=function(t,e){return o.subdata(t,e),c},c.destroy=function(){p(a)},c}return{create:d,createStream:l,destroyStream:f,getElements:function(t){return"function"===typeof t&&t._elements instanceof u?t._elements:null},clear:function(){Te(o).forEach(p)}}}var Cn=new Float32Array(1),Tn=new Uint32Array(Cn.buffer),An=5123;function kn(t){for(var e=zt.allocType(An,t.length),n=0;n<t.length;++n)if(isNaN(t[n]))e[n]=65535;else if(t[n]===1/0)e[n]=31744;else if(t[n]===-1/0)e[n]=64512;else{Cn[0]=t[n];var r=Tn[0],i=r>>>31<<15,o=(r<<1>>>24)-127,a=r>>13&1023;if(o<-24)e[n]=i;else if(o<-14){var s=-14-o;e[n]=i+(a+1024>>s)}else e[n]=o>15?i+31744:i+(o+15<<10)+a}return e}function Mn(t){return Array.isArray(t)||e(t)}var Pn=function(t){return!(t&t-1)&&!!t},Rn=34467,jn=3553,In=34067,Ln=34069,Nn=6408,Dn=6406,Fn=6407,Bn=6409,zn=6410,Un=32854,Vn=32855,Hn=36194,Gn=32819,Wn=32820,Zn=33635,Yn=34042,Xn=6402,qn=34041,Kn=35904,Qn=35906,$n=36193,Jn=33776,tr=33777,er=33778,nr=33779,rr=35986,ir=35987,or=34798,ar=35840,sr=35841,ur=35842,cr=35843,lr=36196,fr=5121,hr=5123,pr=5125,dr=5126,vr=10242,gr=10243,mr=10497,yr=33071,_r=33648,br=10240,xr=10241,wr=9728,Er=9729,Sr=9984,Or=9985,Cr=9986,Tr=9987,Ar=33170,kr=4352,Mr=4353,Pr=4354,Rr=34046,jr=3317,Ir=37440,Lr=37441,Nr=37443,Dr=37444,Fr=33984,Br=[Sr,Cr,Or,Tr],zr=[0,Bn,zn,Fn,Nn],Ur={};function Vr(t){return"[object "+t+"]"}Ur[Bn]=Ur[Dn]=Ur[Xn]=1,Ur[qn]=Ur[zn]=2,Ur[Fn]=Ur[Kn]=3,Ur[Nn]=Ur[Qn]=4;var Hr=Vr("HTMLCanvasElement"),Gr=Vr("OffscreenCanvas"),Wr=Vr("CanvasRenderingContext2D"),Zr=Vr("ImageBitmap"),Yr=Vr("HTMLImageElement"),Xr=Vr("HTMLVideoElement"),qr=Object.keys(Le).concat([Hr,Gr,Wr,Zr,Yr,Xr]),Kr=[];Kr[fr]=1,Kr[dr]=4,Kr[$n]=2,Kr[hr]=2,Kr[pr]=4;var Qr=[];function $r(t){return Array.isArray(t)&&(0===t.length||"number"===typeof t[0])}function Jr(t){if(!Array.isArray(t))return!1;var e=t.length;return!(0===e||!Mn(t[0]))}function ti(t){return Object.prototype.toString.call(t)}function ei(t){return ti(t)===Hr}function ni(t){return ti(t)===Gr}function ri(t){return ti(t)===Wr}function ii(t){return ti(t)===Zr}function oi(t){return ti(t)===Yr}function ai(t){return ti(t)===Xr}function si(t){var e="undefined"!==typeof my&&!!my&&"function"===typeof my.showToast&&!0!==my.isFRM;return!!(e&&t&&t.getContext)}function ui(t){var e="undefined"!==typeof my&&!!my&&"function"===typeof my.showToast&&!0!==my.isFRM;return!!(e&&t&&"src"in t&&"crossOrigin"in t)}function ci(t){if(!t)return!1;if(si(t)||ui(t))return!0;var e=ti(t);return qr.indexOf(e)>=0||($r(t)||Jr(t)||Ce(t))}function li(t){return 0|Le[Object.prototype.toString.call(t)]}function fi(t,e){var n=e.length;switch(t.type){case fr:case hr:case pr:case dr:var r=zt.allocType(t.type,n);r.set(e),t.data=r;break;case $n:t.data=kn(e);break;default:it.raise("unsupported texture type, must specify a typed array")}}function hi(t,e){return zt.allocType(t.type===$n?dr:t.type,e)}function pi(t,e){t.type===$n?(t.data=kn(e),zt.freeType(e)):t.data=e}function di(t,e,n,r,i,o){for(var a=t.width,s=t.height,u=t.channels,c=a*s*u,l=hi(t,c),f=0,h=0;h<s;++h)for(var p=0;p<a;++p)for(var d=0;d<u;++d)l[f++]=e[n*p+r*h+i*d+o];pi(t,l)}function vi(t,e,n,r,i,o){var a;if(a="undefined"!==typeof Qr[t]?Qr[t]:Ur[t]*Kr[e],o&&(a*=6),i){var s=0,u=n;while(u>=1)s+=a*u*u,u/=2;return s}return a*n*r}function gi(t,r,i,o,a,s,u){var c={"don't care":kr,"dont care":kr,nice:Pr,fast:Mr},l={repeat:mr,clamp:yr,mirror:_r},f={nearest:wr,linear:Er},h=n({mipmap:Tr,"nearest mipmap nearest":Sr,"linear mipmap nearest":Or,"nearest mipmap linear":Cr,"linear mipmap linear":Tr},f),p={none:0,browser:Dr},d={uint8:fr,rgba4:Gn,rgb565:Zn,"rgb5 a1":Wn},v={alpha:Dn,luminance:Bn,"luminance alpha":zn,rgb:Fn,rgba:Nn,rgba4:Un,"rgb5 a1":Vn,rgb565:Hn},g={};r.ext_srgb&&(v.srgb=Kn,v.srgba=Qn),r.oes_texture_float&&(d.float32=d["float"]=dr),r.oes_texture_half_float&&(d["float16"]=d["half float"]=$n),r.webgl_depth_texture&&(n(v,{depth:Xn,"depth stencil":qn}),n(d,{uint16:hr,uint32:pr,"depth stencil":Yn})),r.webgl_compressed_texture_s3tc&&n(g,{"rgb s3tc dxt1":Jn,"rgba s3tc dxt1":tr,"rgba s3tc dxt3":er,"rgba s3tc dxt5":nr}),r.webgl_compressed_texture_atc&&n(g,{"rgb atc":rr,"rgba atc explicit alpha":ir,"rgba atc interpolated alpha":or}),r.webgl_compressed_texture_pvrtc&&n(g,{"rgb pvrtc 4bppv1":ar,"rgb pvrtc 2bppv1":sr,"rgba pvrtc 4bppv1":ur,"rgba pvrtc 2bppv1":cr}),r.webgl_compressed_texture_etc1&&(g["rgb etc1"]=lr);var m=Array.prototype.slice.call(t.getParameter(Rn)||new Uint32Array(0));Object.keys(g).forEach((function(t){var e=g[t];m.indexOf(e)>=0&&(v[t]=e)}));var y=Object.keys(v);i.textureFormats=y;var _=[];Object.keys(v).forEach((function(t){var e=v[t];_[e]=t}));var b=[];Object.keys(d).forEach((function(t){var e=d[t];b[e]=t}));var x=[];Object.keys(f).forEach((function(t){var e=f[t];x[e]=t}));var w=[];Object.keys(h).forEach((function(t){var e=h[t];w[e]=t}));var E=[];Object.keys(l).forEach((function(t){var e=l[t];E[e]=t}));var S=y.reduce((function(t,e){var n=v[e];return n===Bn||n===Dn||n===Bn||n===zn||n===Xn||n===qn||r.ext_srgb&&(n===Kn||n===Qn)?t[n]=n:n===Vn||e.indexOf("rgba")>=0?t[n]=Nn:t[n]=Fn,t}),{});function O(){this.internalformat=Nn,this.format=Nn,this.type=fr,this.compressed=!1,this.premultiplyAlpha=!1,this.flipY=!1,this.unpackAlignment=1,this.colorSpace=Dr,this.width=0,this.height=0,this.channels=0}function C(t,e){t.internalformat=e.internalformat,t.format=e.format,t.type=e.type,t.compressed=e.compressed,t.premultiplyAlpha=e.premultiplyAlpha,t.flipY=e.flipY,t.unpackAlignment=e.unpackAlignment,t.colorSpace=e.colorSpace,t.width=e.width,t.height=e.height,t.channels=e.channels}function T(t,e){if("object"===typeof e&&e){if("premultiplyAlpha"in e&&(it.type(e.premultiplyAlpha,"boolean","invalid premultiplyAlpha"),t.premultiplyAlpha=e.premultiplyAlpha),"flipY"in e&&(it.type(e.flipY,"boolean","invalid texture flip"),t.flipY=e.flipY),"alignment"in e&&(it.oneOf(e.alignment,[1,2,4,8],"invalid texture unpack alignment"),t.unpackAlignment=e.alignment),"colorSpace"in e&&(it.parameter(e.colorSpace,p,"invalid colorSpace"),t.colorSpace=p[e.colorSpace]),"type"in e){var n=e.type;it(r.oes_texture_float||!("float"===n||"float32"===n),"you must enable the OES_texture_float extension in order to use floating point textures."),it(r.oes_texture_half_float||!("half float"===n||"float16"===n),"you must enable the OES_texture_half_float extension in order to use 16-bit floating point textures."),it(r.webgl_depth_texture||!("uint16"===n||"uint32"===n||"depth stencil"===n),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),it.parameter(n,d,"invalid texture type"),t.type=d[n]}var o=t.width,a=t.height,s=t.channels,u=!1;"shape"in e?(it(Array.isArray(e.shape)&&e.shape.length>=2,"shape must be an array"),o=e.shape[0],a=e.shape[1],3===e.shape.length&&(s=e.shape[2],it(s>0&&s<=4,"invalid number of channels"),u=!0),it(o>=0&&o<=i.maxTextureSize,"invalid width"),it(a>=0&&a<=i.maxTextureSize,"invalid height")):("radius"in e&&(o=a=e.radius,it(o>=0&&o<=i.maxTextureSize,"invalid radius")),"width"in e&&(o=e.width,it(o>=0&&o<=i.maxTextureSize,"invalid width")),"height"in e&&(a=e.height,it(a>=0&&a<=i.maxTextureSize,"invalid height")),"channels"in e&&(s=e.channels,it(s>0&&s<=4,"invalid number of channels"),u=!0)),t.width=0|o,t.height=0|a,t.channels=0|s;var c=!1;if("format"in e){var l=e.format;it(r.webgl_depth_texture||!("depth"===l||"depth stencil"===l),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),it.parameter(l,v,"invalid texture format");var f=t.internalformat=v[l];t.format=S[f],l in d&&("type"in e||(t.type=d[l])),l in g&&(t.compressed=!0),c=!0}!u&&c?t.channels=Ur[t.format]:u&&!c?t.channels!==zr[t.format]&&(t.format=t.internalformat=zr[t.channels]):c&&u&&it(t.channels===Ur[t.format],"number of channels inconsistent with specified format")}}function A(e){t.pixelStorei(Ir,e.flipY),t.pixelStorei(Lr,e.premultiplyAlpha),t.pixelStorei(Nr,e.colorSpace),t.pixelStorei(jr,e.unpackAlignment)}function k(){O.call(this),this.xOffset=0,this.yOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function M(t,n){var r=null;if(ci(n)?r=n:n&&(it.type(n,"object","invalid pixel data type"),T(t,n),"x"in n&&(t.xOffset=0|n.x),"y"in n&&(t.yOffset=0|n.y),ci(n.data)&&(r=n.data)),it(!t.compressed||r instanceof Uint8Array,"compressed texture data must be stored in a uint8array"),n.copy){it(!r,"can not specify copy and data field for the same texture");var o=a.viewportWidth,s=a.viewportHeight;t.width=t.width||o-t.xOffset,t.height=t.height||s-t.yOffset,t.needsCopy=!0,it(t.xOffset>=0&&t.xOffset<o&&t.yOffset>=0&&t.yOffset<s&&t.width>0&&t.width<=o&&t.height>0&&t.height<=s,"copy texture read out of bounds")}else if(r){if(e(r))t.channels=t.channels||4,t.data=r,"type"in n||t.type!==fr||(t.type=li(r));else if($r(r))t.channels=t.channels||4,fi(t,r),t.alignment=1,t.needsFree=!0;else if(Ce(r)){var u=r.data;Array.isArray(u)||t.type!==fr||(t.type=li(u));var c,l,f,h,p,d,v=r.shape,g=r.stride;3===v.length?(f=v[2],d=g[2]):(it(2===v.length,"invalid ndarray pixel data, must be 2 or 3D"),f=1,d=1),c=v[0],l=v[1],h=g[0],p=g[1],t.alignment=1,t.width=c,t.height=l,t.channels=f,t.format=t.internalformat=zr[f],t.needsFree=!0,di(t,u,h,p,d,r.offset)}else if(si(r)||ei(r)||ni(r)||ri(r))si(r)||ei(r)||ni(r)?t.element=r:t.element=r.canvas,t.width=t.element.width,t.height=t.element.height,t.channels=4;else if(ii(r))t.element=r,t.width=r.width,t.height=r.height,t.channels=4;else if(oi(r))t.element=r,t.width=r.naturalWidth,t.height=r.naturalHeight,t.channels=4;else if(ui(r))t.element=r,t.width=r.width,t.height=r.height,t.channels=4;else if(ai(r))t.element=r,t.width=r.videoWidth,t.height=r.videoHeight,t.channels=4;else if(Jr(r)){var m=t.width||r[0].length,y=t.height||r.length,_=t.channels;_=Mn(r[0][0])?_||r[0][0].length:_||1;for(var b=Ae.shape(r),x=1,w=0;w<b.length;++w)x*=b[w];var E=hi(t,x);Ae.flatten(r,b,"",E),pi(t,E),t.alignment=1,t.width=m,t.height=y,t.channels=_,t.format=t.internalformat=zr[_],t.needsFree=!0}}else t.width=t.width||1,t.height=t.height||1,t.channels=t.channels||4;t.type===dr?it(i.extensions.indexOf("oes_texture_float")>=0,"oes_texture_float extension not enabled"):t.type===$n&&it(i.extensions.indexOf("oes_texture_half_float")>=0,"oes_texture_half_float extension not enabled")}function P(e,n,r){var i=e.element,a=e.data,s=e.internalformat,u=e.format,c=e.type,l=e.width,f=e.height;A(e),i?t.texImage2D(n,r,u,u,c,i):e.compressed?t.compressedTexImage2D(n,r,s,l,f,0,a):e.needsCopy?(o(),t.copyTexImage2D(n,r,u,e.xOffset,e.yOffset,l,f,0)):t.texImage2D(n,r,u,l,f,0,u,c,a||null)}function R(e,n,r,i,a){var s=e.element,u=e.data,c=e.internalformat,l=e.format,f=e.type,h=e.width,p=e.height;A(e),s?t.texSubImage2D(n,a,r,i,l,f,s):e.compressed?t.compressedTexSubImage2D(n,a,r,i,c,h,p,u):e.needsCopy?(o(),t.copyTexSubImage2D(n,a,r,i,e.xOffset,e.yOffset,h,p)):t.texSubImage2D(n,a,r,i,h,p,l,f,u)}var j=[];function I(){return j.pop()||new k}function L(t){t.needsFree&&zt.freeType(t.data),k.call(t),j.push(t)}function N(){O.call(this),this.genMipmaps=!1,this.mipmapHint=kr,this.mipmask=0,this.images=Array(16)}function D(t,e,n){var r=t.images[0]=I();t.mipmask=1,r.width=t.width=e,r.height=t.height=n,r.channels=t.channels=4}function F(t,e){var n=null;if(ci(e))n=t.images[0]=I(),C(n,t),M(n,e),t.mipmask=1;else if(T(t,e),Array.isArray(e.mipmap))for(var r=e.mipmap,i=0;i<r.length;++i)n=t.images[i]=I(),C(n,t),n.width>>=i,n.height>>=i,M(n,r[i]),t.mipmask|=1<<i;else n=t.images[0]=I(),C(n,t),M(n,e),t.mipmask=1;C(t,t.images[0]),!t.compressed||t.internalformat!==Jn&&t.internalformat!==tr&&t.internalformat!==er&&t.internalformat!==nr||it(t.width%4===0&&t.height%4===0,"for compressed texture formats, mipmap level 0 must have width and height that are a multiple of 4")}function B(t,e){for(var n=t.images,r=0;r<n.length;++r){if(!n[r])return;P(n[r],e,r)}}var z=[];function U(){var t=z.pop()||new N;O.call(t),t.mipmask=0;for(var e=0;e<16;++e)t.images[e]=null;return t}function V(t){for(var e=t.images,n=0;n<e.length;++n)e[n]&&L(e[n]),e[n]=null;z.push(t)}function H(){this.minFilter=wr,this.magFilter=wr,this.wrapS=yr,this.wrapT=yr,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=kr}function G(t,e){if("min"in e){var n=e.min;it.parameter(n,h),t.minFilter=h[n],Br.indexOf(t.minFilter)>=0&&!("faces"in e)&&(t.genMipmaps=!0)}if("mag"in e){var r=e.mag;it.parameter(r,f),t.magFilter=f[r]}var o=t.wrapS,a=t.wrapT;if("wrap"in e){var s=e.wrap;"string"===typeof s?(it.parameter(s,l),o=a=l[s]):Array.isArray(s)&&(it.parameter(s[0],l),it.parameter(s[1],l),o=l[s[0]],a=l[s[1]])}else{if("wrapS"in e){var u=e.wrapS;it.parameter(u,l),o=l[u]}if("wrapT"in e){var p=e.wrapT;it.parameter(p,l),a=l[p]}}if(t.wrapS=o,t.wrapT=a,"anisotropic"in e){var d=e.anisotropic;it("number"===typeof d&&d>=1&&d<=i.maxAnisotropic,"aniso samples must be between 1 and "),t.anisotropic=e.anisotropic}if("mipmap"in e){var v=!1;switch(typeof e.mipmap){case"string":it.parameter(e.mipmap,c,"invalid mipmap hint"),t.mipmapHint=c[e.mipmap],t.genMipmaps=!0,v=!0;break;case"boolean":v=t.genMipmaps=e.mipmap;break;case"object":it(Array.isArray(e.mipmap),"invalid mipmap type"),t.genMipmaps=!1,v=!0;break;default:it.raise("invalid mipmap type")}v&&!("min"in e)&&(t.minFilter=Sr)}}function W(e,n){t.texParameteri(n,xr,e.minFilter),t.texParameteri(n,br,e.magFilter),t.texParameteri(n,vr,e.wrapS),t.texParameteri(n,gr,e.wrapT),r.ext_texture_filter_anisotropic&&t.texParameteri(n,Rr,e.anisotropic),e.genMipmaps&&(t.hint(Ar,e.mipmapHint),t.generateMipmap(n))}var Z=0,Y={},X=i.maxTextureUnits,q=Array(X).map((function(){return null}));function K(e){O.call(this),this.mipmask=0,this.internalformat=Nn,this.id=Z++,this.refCount=1,this.target=e,this.texture=t.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new H,u.profile&&(this.stats={size:0})}function Q(e){t.activeTexture(Fr),t.bindTexture(e.target,e.texture)}function $(){var e=q[0];e?t.bindTexture(e.target,e.texture):t.bindTexture(jn,null)}function J(e){var n=e.texture;it(n,"must not double destroy texture");var r=e.unit,i=e.target;r>=0&&(t.activeTexture(Fr+r),t.bindTexture(i,null),q[r]=null),t.deleteTexture(n),e.texture=null,e.params=null,e.pixels=null,e.refCount=0,delete Y[e.id],s.textureCount--}function tt(e,n){var r=new K(jn);function o(t,e){var n=r.texInfo;H.call(n);var a=U();return"number"===typeof t?D(a,0|t,"number"===typeof e?0|e:0|t):t?(it.type(t,"object","invalid arguments to regl.texture"),G(n,t),F(a,t)):D(a,1,1),n.genMipmaps&&(a.mipmask=(a.width<<1)-1),r.mipmask=a.mipmask,C(r,a),it.texture2D(n,a,i),r.internalformat=a.internalformat,o.width=a.width,o.height=a.height,Q(r),B(a,jn),W(n,jn),$(),V(a),u.profile&&(r.stats.size=vi(r.internalformat,r.type,a.width,a.height,n.genMipmaps,!1)),o.format=_[r.internalformat],o.type=b[r.type],o.mag=x[n.magFilter],o.min=w[n.minFilter],o.wrapS=E[n.wrapS],o.wrapT=E[n.wrapT],o}function a(t,e,n,i){it(!!t,"must specify image data");var a=0|e,s=0|n,u=0|i,c=I();return C(c,r),c.width=0,c.height=0,M(c,t),c.width=c.width||(r.width>>u)-a,c.height=c.height||(r.height>>u)-s,it(r.type===c.type&&r.format===c.format&&r.internalformat===c.internalformat,"incompatible format for texture.subimage"),it(a>=0&&s>=0&&a+c.width<=r.width&&s+c.height<=r.height,"texture.subimage write out of bounds"),it(r.mipmask&1<<u,"missing mipmap data"),it(c.data||c.element||c.needsCopy,"missing image data"),Q(r),R(c,jn,a,s,u),$(),L(c),o}function c(e,n){var i=0|e,a=0|n||i;if(i===r.width&&a===r.height)return o;o.width=r.width=i,o.height=r.height=a,Q(r);for(var s=0;r.mipmask>>s;++s){var c=i>>s,l=a>>s;if(!c||!l)break;t.texImage2D(jn,s,r.format,c,l,0,r.format,r.type,null)}return $(),u.profile&&(r.stats.size=vi(r.internalformat,r.type,i,a,!1,!1)),o}return Y[r.id]=r,s.textureCount++,o(e,n),o.subimage=a,o.resize=c,o._reglType="texture2d",o._texture=r,u.profile&&(o.stats=r.stats),o.destroy=function(){r.decRef()},o}function et(e,n,r,o,a,c){var l=new K(In);Y[l.id]=l,s.cubeCount++;var f=new Array(6);function h(t,e,n,r,o,a){var s,c=l.texInfo;for(H.call(c),s=0;s<6;++s)f[s]=U();if("number"!==typeof t&&t)if("object"===typeof t)if(e)F(f[0],t),F(f[1],e),F(f[2],n),F(f[3],r),F(f[4],o),F(f[5],a);else if(G(c,t),T(l,t),"faces"in t){var p=t.faces;for(it(Array.isArray(p)&&6===p.length,"cube faces must be a length 6 array"),s=0;s<6;++s)it("object"===typeof p[s]&&!!p[s],"invalid input for cube map face"),C(f[s],l),F(f[s],p[s])}else for(s=0;s<6;++s)F(f[s],t);else it.raise("invalid arguments to cube map");else{var d=0|t||1;for(s=0;s<6;++s)D(f[s],d,d)}for(C(l,f[0]),it.optional((function(){i.npotTextureCube||it(Pn(l.width)&&Pn(l.height),"your browser does not support non power or two texture dimensions")})),c.genMipmaps?l.mipmask=(f[0].width<<1)-1:l.mipmask=f[0].mipmask,it.textureCube(l,c,f,i),l.internalformat=f[0].internalformat,h.width=f[0].width,h.height=f[0].height,Q(l),s=0;s<6;++s)B(f[s],Ln+s);for(W(c,In),$(),u.profile&&(l.stats.size=vi(l.internalformat,l.type,h.width,h.height,c.genMipmaps,!0)),h.format=_[l.internalformat],h.type=b[l.type],h.mag=x[c.magFilter],h.min=w[c.minFilter],h.wrapS=E[c.wrapS],h.wrapT=E[c.wrapT],s=0;s<6;++s)V(f[s]);return h}function p(t,e,n,r,i){it(!!e,"must specify image data"),it("number"===typeof t&&t===(0|t)&&t>=0&&t<6,"invalid face");var o=0|n,a=0|r,s=0|i,u=I();return C(u,l),u.width=0,u.height=0,M(u,e),u.width=u.width||(l.width>>s)-o,u.height=u.height||(l.height>>s)-a,it(l.type===u.type&&l.format===u.format&&l.internalformat===u.internalformat,"incompatible format for texture.subimage"),it(o>=0&&a>=0&&o+u.width<=l.width&&a+u.height<=l.height,"texture.subimage write out of bounds"),it(l.mipmask&1<<s,"missing mipmap data"),it(u.data||u.element||u.needsCopy,"missing image data"),Q(l),R(u,Ln+t,o,a,s),$(),L(u),h}function d(e){var n=0|e;if(n!==l.width){h.width=l.width=n,h.height=l.height=n,Q(l);for(var r=0;r<6;++r)for(var i=0;l.mipmask>>i;++i)t.texImage2D(Ln+r,i,l.format,n>>i,n>>i,0,l.format,l.type,null);return $(),u.profile&&(l.stats.size=vi(l.internalformat,l.type,h.width,h.height,!1,!0)),h}}return h(e,n,r,o,a,c),h.subimage=p,h.resize=d,h._reglType="textureCube",h._texture=l,u.profile&&(h.stats=l.stats),h.destroy=function(){l.decRef()},h}function nt(){for(var e=0;e<X;++e)t.activeTexture(Fr+e),t.bindTexture(jn,null),q[e]=null;Te(Y).forEach(J),s.cubeCount=0,s.textureCount=0}function rt(){for(var e=0;e<X;++e){var n=q[e];n&&(n.bindCount=0,n.unit=-1,q[e]=null)}Te(Y).forEach((function(e){e.texture=t.createTexture(),t.bindTexture(e.target,e.texture);for(var n=0;n<32;++n)if(0!==(e.mipmask&1<<n))if(e.target===jn)t.texImage2D(jn,n,e.internalformat,e.width>>n,e.height>>n,0,e.internalformat,e.type,null);else for(var r=0;r<6;++r)t.texImage2D(Ln+r,n,e.internalformat,e.width>>n,e.height>>n,0,e.internalformat,e.type,null);W(e.texInfo,e.target)}))}function ot(){for(var e=0;e<X;++e){var n=q[e];n&&(n.bindCount=0,n.unit=-1,q[e]=null),t.activeTexture(Fr+e),t.bindTexture(jn,null),t.bindTexture(In,null)}}return n(K.prototype,{bind:function(){var e=this;e.bindCount+=1;var n=e.unit;if(n<0){for(var r=0;r<X;++r){var i=q[r];if(i){if(i.bindCount>0)continue;i.unit=-1}q[r]=e,n=r;break}n>=X&&it.raise("insufficient number of texture units"),u.profile&&s.maxTextureUnits<n+1&&(s.maxTextureUnits=n+1),e.unit=n,t.activeTexture(Fr+n),t.bindTexture(e.target,e.texture)}return n},unbind:function(){this.bindCount-=1},decRef:function(){--this.refCount<=0&&J(this)}}),u.profile&&(s.getTotalTextureSize=function(){var t=0;return Object.keys(Y).forEach((function(e){t+=Y[e].stats.size})),t}),{create2D:tt,createCube:et,clear:nt,getTexture:function(t){return null},restore:rt,refresh:ot}}Qr[Un]=2,Qr[Vn]=2,Qr[Hn]=2,Qr[qn]=4,Qr[Jn]=.5,Qr[tr]=.5,Qr[er]=1,Qr[nr]=1,Qr[rr]=.5,Qr[ir]=1,Qr[or]=1,Qr[ar]=.5,Qr[sr]=.25,Qr[ur]=.5,Qr[cr]=.25,Qr[lr]=.5;var mi=36161,yi=32854,_i=32855,bi=36194,xi=33189,wi=36168,Ei=34041,Si=35907,Oi=34836,Ci=34842,Ti=34843,Ai=[];function ki(t,e,n){return Ai[t]*e*n}Ai[yi]=2,Ai[_i]=2,Ai[bi]=2,Ai[xi]=2,Ai[wi]=1,Ai[Ei]=4,Ai[Si]=4,Ai[Oi]=16,Ai[Ci]=8,Ai[Ti]=6;var Mi=function(t,e,n,r,i){var o={rgba4:yi,rgb565:bi,"rgb5 a1":_i,depth:xi,stencil:wi,"depth stencil":Ei};e.ext_srgb&&(o["srgba"]=Si),e.ext_color_buffer_half_float&&(o["rgba16f"]=Ci,o["rgb16f"]=Ti),e.webgl_color_buffer_float&&(o["rgba32f"]=Oi);var a=[];Object.keys(o).forEach((function(t){var e=o[t];a[e]=t}));var s=0,u={};function c(t){this.id=s++,this.refCount=1,this.renderbuffer=t,this.format=yi,this.width=0,this.height=0,i.profile&&(this.stats={size:0})}function l(e){var n=e.renderbuffer;it(n,"must not double destroy renderbuffer"),t.bindRenderbuffer(mi,null),t.deleteRenderbuffer(n),e.renderbuffer=null,e.refCount=0,delete u[e.id],r.renderbufferCount--}function f(e,s){var l=new c(t.createRenderbuffer());function f(e,r){var s=0,u=0,c=yi;if("object"===typeof e&&e){var h=e;if("shape"in h){var p=h.shape;it(Array.isArray(p)&&p.length>=2,"invalid renderbuffer shape"),s=0|p[0],u=0|p[1]}else"radius"in h&&(s=u=0|h.radius),"width"in h&&(s=0|h.width),"height"in h&&(u=0|h.height);"format"in h&&(it.parameter(h.format,o,"invalid renderbuffer format"),c=o[h.format])}else"number"===typeof e?(s=0|e,u="number"===typeof r?0|r:s):e?it.raise("invalid arguments to renderbuffer constructor"):s=u=1;if(it(s>0&&u>0&&s<=n.maxRenderbufferSize&&u<=n.maxRenderbufferSize,"invalid renderbuffer size"),s!==l.width||u!==l.height||c!==l.format)return f.width=l.width=s,f.height=l.height=u,l.format=c,t.bindRenderbuffer(mi,l.renderbuffer),t.renderbufferStorage(mi,c,s,u),it(0===t.getError(),"invalid render buffer format"),i.profile&&(l.stats.size=ki(l.format,l.width,l.height)),f.format=a[l.format],f}function h(e,r){var o=0|e,a=0|r||o;return o===l.width&&a===l.height||(it(o>0&&a>0&&o<=n.maxRenderbufferSize&&a<=n.maxRenderbufferSize,"invalid renderbuffer size"),f.width=l.width=o,f.height=l.height=a,t.bindRenderbuffer(mi,l.renderbuffer),t.renderbufferStorage(mi,l.format,o,a),it(0===t.getError(),"invalid render buffer format"),i.profile&&(l.stats.size=ki(l.format,l.width,l.height))),f}return u[l.id]=l,r.renderbufferCount++,f(e,s),f.resize=h,f._reglType="renderbuffer",f._renderbuffer=l,i.profile&&(f.stats=l.stats),f.destroy=function(){l.decRef()},f}function h(){Te(u).forEach((function(e){e.renderbuffer=t.createRenderbuffer(),t.bindRenderbuffer(mi,e.renderbuffer),t.renderbufferStorage(mi,e.format,e.width,e.height)})),t.bindRenderbuffer(mi,null)}return c.prototype.decRef=function(){--this.refCount<=0&&l(this)},i.profile&&(r.getTotalRenderbufferSize=function(){var t=0;return Object.keys(u).forEach((function(e){t+=u[e].stats.size})),t}),{create:f,clear:function(){Te(u).forEach(l)},restore:h}},Pi=36160,Ri=36161,ji=3553,Ii=34069,Li=36064,Ni=36096,Di=36128,Fi=33306,Bi=36053,zi=36054,Ui=36055,Vi=36057,Hi=36061,Gi=36193,Wi=5121,Zi=5126,Yi=6407,Xi=6408,qi=6402,Ki=[Yi,Xi],Qi=[];Qi[Xi]=4,Qi[Yi]=3;var $i=[];$i[Wi]=1,$i[Zi]=4,$i[Gi]=2;var Ji=32854,to=32855,eo=36194,no=33189,ro=36168,io=34041,oo=35907,ao=34836,so=34842,uo=34843,co=[Ji,to,eo,oo,so,uo,ao],lo={};function fo(t,e,r,i,o,a){var s={cur:null,next:null,dirty:!1,setFBO:null},u=["rgba"],c=["rgba4","rgb565","rgb5 a1"];e.ext_srgb&&c.push("srgba"),e.ext_color_buffer_half_float&&c.push("rgba16f","rgb16f"),e.webgl_color_buffer_float&&c.push("rgba32f");var l=["uint8"];function f(t,e,n){this.target=t,this.texture=e,this.renderbuffer=n;var r=0,i=0;e?(r=e.width,i=e.height):n&&(r=n.width,i=n.height),this.width=r,this.height=i}function h(t){t&&(t.texture&&t.texture._texture.decRef(),t.renderbuffer&&t.renderbuffer._renderbuffer.decRef())}function p(t,e,n){if(t)if(t.texture){var r=t.texture._texture,i=Math.max(1,r.width),o=Math.max(1,r.height);it(i===e&&o===n,"inconsistent width/height for supplied texture"),r.refCount+=1}else{var a=t.renderbuffer._renderbuffer;it(a.width===e&&a.height===n,"inconsistent width/height for renderbuffer"),a.refCount+=1}}function d(e,n){n&&(n.texture?t.framebufferTexture2D(Pi,e,n.target,n.texture._texture.texture,0):t.framebufferRenderbuffer(Pi,e,Ri,n.renderbuffer._renderbuffer.renderbuffer))}function v(t){var e=ji,n=null,r=null,i=t;"object"===typeof t&&(i=t.data,"target"in t&&(e=0|t.target)),it.type(i,"function","invalid attachment data");var o=i._reglType;return"texture2d"===o?(n=i,it(e===ji)):"textureCube"===o?(n=i,it(e>=Ii&&e<Ii+6,"invalid cube map target")):"renderbuffer"===o?(r=i,e=Ri):it.raise("invalid regl object for attachment"),new f(e,n,r)}function g(t,e,n,r,a){if(n){var s=i.create2D({width:t,height:e,format:r,type:a});return s._texture.refCount=0,new f(ji,s,null)}var u=o.create({width:t,height:e,format:r});return u._renderbuffer.refCount=0,new f(Ri,null,u)}function m(t){return t&&(t.texture||t.renderbuffer)}function y(t,e,n){t&&(t.texture?t.texture.resize(e,n):t.renderbuffer&&t.renderbuffer.resize(e,n),t.width=e,t.height=n)}e.oes_texture_half_float&&l.push("half float","float16"),e.oes_texture_float&&l.push("float","float32");var _=0,b={};function x(){this.id=_++,b[this.id]=this,this.framebuffer=t.createFramebuffer(),this.width=0,this.height=0,this.colorAttachments=[],this.depthAttachment=null,this.stencilAttachment=null,this.depthStencilAttachment=null}function w(t){t.colorAttachments.forEach(h),h(t.depthAttachment),h(t.stencilAttachment),h(t.depthStencilAttachment)}function E(e){var n=e.framebuffer;it(n,"must not double destroy framebuffer"),t.deleteFramebuffer(n),e.framebuffer=null,a.framebufferCount--,delete b[e.id]}function S(e){var n;t.bindFramebuffer(Pi,e.framebuffer);var i=e.colorAttachments;for(n=0;n<i.length;++n)d(Li+n,i[n]);for(n=i.length;n<r.maxColorAttachments;++n)t.framebufferTexture2D(Pi,Li+n,ji,null,0);t.framebufferTexture2D(Pi,Fi,ji,null,0),t.framebufferTexture2D(Pi,Ni,ji,null,0),t.framebufferTexture2D(Pi,Di,ji,null,0),d(Ni,e.depthAttachment),d(Di,e.stencilAttachment),d(Fi,e.depthStencilAttachment);var o=t.checkFramebufferStatus(Pi);t.isContextLost()||o===Bi||it.raise("framebuffer configuration not supported, status = "+lo[o]),t.bindFramebuffer(Pi,s.next?s.next.framebuffer:null),s.cur=s.next,t.getError()}function O(t,i){var o=new x;function f(t,n){var i;it(s.next!==o,"can not update framebuffer which is currently in use");var a=0,h=0,d=!0,y=!0,_=null,b=!0,x="rgba",E="uint8",O=1,C=null,T=null,A=null,k=!1;if("number"===typeof t)a=0|t,h=0|n||a;else if(t){it.type(t,"object","invalid arguments for framebuffer");var M=t;if("shape"in M){var P=M.shape;it(Array.isArray(P)&&P.length>=2,"invalid shape for framebuffer"),a=P[0],h=P[1]}else"radius"in M&&(a=h=M.radius),"width"in M&&(a=M.width),"height"in M&&(h=M.height);("color"in M||"colors"in M)&&(_=M.color||M.colors,Array.isArray(_)&&it(1===_.length||e.webgl_draw_buffers,"multiple render targets not supported")),_||("colorCount"in M&&(O=0|M.colorCount,it(O>0,"invalid color buffer count")),"colorTexture"in M&&(b=!!M.colorTexture,x="rgba4"),"colorType"in M&&(E=M.colorType,b?(it(e.oes_texture_float||!("float"===E||"float32"===E),"you must enable OES_texture_float in order to use floating point framebuffer objects"),it(e.oes_texture_half_float||!("half float"===E||"float16"===E),"you must enable OES_texture_half_float in order to use 16-bit floating point framebuffer objects")):"half float"===E||"float16"===E?(it(e.ext_color_buffer_half_float,"you must enable EXT_color_buffer_half_float to use 16-bit render buffers"),x="rgba16f"):"float"!==E&&"float32"!==E||(it(e.webgl_color_buffer_float,"you must enable WEBGL_color_buffer_float in order to use 32-bit floating point renderbuffers"),x="rgba32f"),it.oneOf(E,l,"invalid color type")),"colorFormat"in M&&(x=M.colorFormat,u.indexOf(x)>=0?b=!0:c.indexOf(x)>=0?b=!1:it.optional((function(){b?it.oneOf(M.colorFormat,u,"invalid color format for texture"):it.oneOf(M.colorFormat,c,"invalid color format for renderbuffer")})))),("depthTexture"in M||"depthStencilTexture"in M)&&(k=!(!M.depthTexture&&!M.depthStencilTexture),it(!k||e.webgl_depth_texture,"webgl_depth_texture extension not supported")),"depth"in M&&("boolean"===typeof M.depth?d=M.depth:(C=M.depth,y=!1)),"stencil"in M&&("boolean"===typeof M.stencil?y=M.stencil:(T=M.stencil,d=!1)),"depthStencil"in M&&("boolean"===typeof M.depthStencil?d=y=M.depthStencil:(A=M.depthStencil,d=!1,y=!1))}else a=h=1;var R=null,j=null,I=null,L=null;if(Array.isArray(_))R=_.map(v);else if(_)R=[v(_)];else for(R=new Array(O),i=0;i<O;++i)R[i]=g(a,h,b,x,E);it(e.webgl_draw_buffers||R.length<=1,"you must enable the WEBGL_draw_buffers extension in order to use multiple color buffers."),it(R.length<=r.maxColorAttachments,"too many color attachments, not supported"),a=a||R[0].width,h=h||R[0].height,C?j=v(C):d&&!y&&(j=g(a,h,k,"depth","uint32")),T?I=v(T):y&&!d&&(I=g(a,h,!1,"stencil","uint8")),A?L=v(A):!C&&!T&&y&&d&&(L=g(a,h,k,"depth stencil","depth stencil")),it(!!C+!!T+!!A<=1,"invalid framebuffer configuration, can specify exactly one depth/stencil attachment");var N=null;for(i=0;i<R.length;++i)if(p(R[i],a,h),it(!R[i]||R[i].texture&&Ki.indexOf(R[i].texture._texture.format)>=0||R[i].renderbuffer&&co.indexOf(R[i].renderbuffer._renderbuffer.format)>=0,"framebuffer color attachment "+i+" is invalid"),R[i]&&R[i].texture){var D=Qi[R[i].texture._texture.format]*$i[R[i].texture._texture.type];null===N?N=D:it(N===D,"all color attachments much have the same number of bits per pixel.")}return p(j,a,h),it(!j||j.texture&&j.texture._texture.format===qi||j.renderbuffer&&j.renderbuffer._renderbuffer.format===no,"invalid depth attachment for framebuffer object"),p(I,a,h),it(!I||I.renderbuffer&&I.renderbuffer._renderbuffer.format===ro,"invalid stencil attachment for framebuffer object"),p(L,a,h),it(!L||L.texture&&L.texture._texture.format===io||L.renderbuffer&&L.renderbuffer._renderbuffer.format===io,"invalid depth-stencil attachment for framebuffer object"),w(o),o.width=a,o.height=h,o.colorAttachments=R,o.depthAttachment=j,o.stencilAttachment=I,o.depthStencilAttachment=L,f.color=R.map(m),f.depth=m(j),f.stencil=m(I),f.depthStencil=m(L),f.width=o.width,f.height=o.height,S(o),f}function h(t,e){it(s.next!==o,"can not resize a framebuffer which is currently in use");var n=Math.max(0|t,1),r=Math.max(0|e||n,1);if(n===o.width&&r===o.height)return f;for(var i=o.colorAttachments,a=0;a<i.length;++a)y(i[a],n,r);return y(o.depthAttachment,n,r),y(o.stencilAttachment,n,r),y(o.depthStencilAttachment,n,r),o.width=f.width=n,o.height=f.height=r,S(o),f}return a.framebufferCount++,f(t,i),n(f,{resize:h,_reglType:"framebuffer",_framebuffer:o,destroy:function(){E(o),w(o)},use:function(t){s.setFBO({framebuffer:f},t)}})}function C(t){var o=Array(6);function a(t){var r;it(o.indexOf(s.next)<0,"can not update framebuffer which is currently in use");var c,f={color:null},h=0,p=null,d="rgba",v="uint8",g=1;if("number"===typeof t)h=0|t;else if(t){it.type(t,"object","invalid arguments for framebuffer");var m=t;if("shape"in m){var y=m.shape;it(Array.isArray(y)&&y.length>=2,"invalid shape for framebuffer"),it(y[0]===y[1],"cube framebuffer must be square"),h=y[0]}else"radius"in m&&(h=0|m.radius),"width"in m?(h=0|m.width,"height"in m&&it(m.height===h,"must be square")):"height"in m&&(h=0|m.height);("color"in m||"colors"in m)&&(p=m.color||m.colors,Array.isArray(p)&&it(1===p.length||e.webgl_draw_buffers,"multiple render targets not supported")),p||("colorCount"in m&&(g=0|m.colorCount,it(g>0,"invalid color buffer count")),"colorType"in m&&(it.oneOf(m.colorType,l,"invalid color type"),v=m.colorType),"colorFormat"in m&&(d=m.colorFormat,it.oneOf(m.colorFormat,u,"invalid color format for texture"))),"depth"in m&&(f.depth=m.depth),"stencil"in m&&(f.stencil=m.stencil),"depthStencil"in m&&(f.depthStencil=m.depthStencil)}else h=1;if(p)if(Array.isArray(p))for(c=[],r=0;r<p.length;++r)c[r]=p[r];else c=[p];else{c=Array(g);var _={radius:h,format:d,type:v};for(r=0;r<g;++r)c[r]=i.createCube(_)}for(f.color=Array(c.length),r=0;r<c.length;++r){var b=c[r];it("function"===typeof b&&"textureCube"===b._reglType,"invalid cube map"),h=h||b.width,it(b.width===h&&b.height===h,"invalid cube map shape"),f.color[r]={target:Ii,data:c[r]}}for(r=0;r<6;++r){for(var x=0;x<c.length;++x)f.color[x].target=Ii+r;r>0&&(f.depth=o[0].depth,f.stencil=o[0].stencil,f.depthStencil=o[0].depthStencil),o[r]?o[r](f):o[r]=O(f)}return n(a,{width:h,height:h,color:c})}function c(t){var e,n=0|t;if(it(n>0&&n<=r.maxCubeMapSize,"invalid radius for cube fbo"),n===a.width)return a;var i=a.color;for(e=0;e<i.length;++e)i[e].resize(n);for(e=0;e<6;++e)o[e].resize(n);return a.width=a.height=n,a}return a(t),n(a,{faces:o,resize:c,_reglType:"framebufferCube",destroy:function(){o.forEach((function(t){t.destroy()}))}})}function T(){s.cur=null,s.next=null,s.dirty=!0,Te(b).forEach((function(e){e.framebuffer=t.createFramebuffer(),S(e)}))}return n(s,{getFramebuffer:function(t){if("function"===typeof t&&"framebuffer"===t._reglType){var e=t._framebuffer;if(e instanceof x)return e}return null},create:O,createCube:C,clear:function(){Te(b).forEach(E)},restore:T})}lo[Bi]="complete",lo[zi]="incomplete attachment",lo[Vi]="incomplete dimensions",lo[Ui]="incomplete, missing attachment",lo[Hi]="unsupported";var ho=5126,po=34962,vo=34963,go=["attributes","elements","offset","count","primitive","instances"];function mo(){this.state=0,this.x=0,this.y=0,this.z=0,this.w=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=ho,this.offset=0,this.stride=0,this.divisor=0}function yo(t,n,r,i,o,a,s){for(var u=r.maxAttributes,c=new Array(u),l=0;l<u;++l)c[l]=new mo;var f=0,h={},p={Record:mo,scope:{},state:c,currentVAO:null,targetVAO:null,restore:v()?w:function(){},createVAO:E,getVAO:m,destroyBuffer:d,setVAO:v()?y:_,clear:v()?b:function(){}};function d(e){for(var n=0;n<c.length;++n){var r=c[n];r.buffer===e&&(t.disableVertexAttribArray(n),r.buffer=null)}}function v(){return n.oes_vertex_array_object}function g(){return n.angle_instanced_arrays}function m(t){return"function"===typeof t&&t._vao?t._vao:null}function y(t){if(t!==p.currentVAO){var e=v();t?e.bindVertexArrayOES(t.vao):e.bindVertexArrayOES(null),p.currentVAO=t}}function _(e){if(e!==p.currentVAO){if(e)e.bindAttrs();else{for(var n=g(),r=0;r<c.length;++r){var i=c[r];i.buffer?(t.enableVertexAttribArray(r),i.buffer.bind(),t.vertexAttribPointer(r,i.size,i.type,i.normalized,i.stride,i.offfset),n&&i.divisor&&n.vertexAttribDivisorANGLE(r,i.divisor)):(t.disableVertexAttribArray(r),t.vertexAttrib4f(r,i.x,i.y,i.z,i.w))}s.elements?t.bindBuffer(vo,s.elements.buffer.buffer):t.bindBuffer(vo,null)}p.currentVAO=e}}function b(){Te(h).forEach((function(t){t.destroy()}))}function x(){this.id=++f,this.attributes=[],this.elements=null,this.ownsElements=!1,this.count=0,this.offset=0,this.instances=-1,this.primitive=4;var t=v();this.vao=t?t.createVertexArrayOES():null,h[this.id]=this,this.buffers=[]}function w(){var t=v();t&&Te(h).forEach((function(t){t.refresh()}))}function E(t){var r=new x;function s(t){var i;if(Array.isArray(t))i=t,r.elements&&r.ownsElements&&r.elements.destroy(),r.elements=null,r.ownsElements=!1,r.offset=0,r.count=0,r.instances=-1,r.primitive=4;else{if(it("object"===typeof t,"invalid arguments for create vao"),it("attributes"in t,"must specify attributes for vao"),t.elements){var c=t.elements;r.ownsElements?"function"===typeof c&&"elements"===c._reglType?(r.elements.destroy(),r.ownsElements=!1):(r.elements(c),r.ownsElements=!1):a.getElements(t.elements)?(r.elements=t.elements,r.ownsElements=!1):(r.elements=a.create(t.elements),r.ownsElements=!0)}else r.elements=null,r.ownsElements=!1;i=t.attributes,r.offset=0,r.count=-1,r.instances=-1,r.primitive=4,r.elements&&(r.count=r.elements._elements.vertCount,r.primitive=r.elements._elements.primType),"offset"in t&&(r.offset=0|t.offset),"count"in t&&(r.count=0|t.count),"instances"in t&&(r.instances=0|t.instances),"primitive"in t&&(it(t.primitive in hn,"bad primitive type: "+t.primitive),r.primitive=hn[t.primitive]),it.optional((function(){for(var e=Object.keys(t),n=0;n<e.length;++n)it(go.indexOf(e[n])>=0,'invalid option for vao: "'+e[n]+'" valid options are '+go)})),it(Array.isArray(i),"attributes must be an array")}it(i.length<u,"too many attributes"),it(i.length>0,"must specify at least one attribute");var l={},f=r.attributes;f.length=i.length;for(var h=0;h<i.length;++h){var p,d=i[h],v=f[h]=new mo,g=d.data||d;if(Array.isArray(g)||e(g)||Ce(g))r.buffers[h]&&(p=r.buffers[h],e(g)&&p._buffer.byteLength>=g.byteLength?p.subdata(g):(p.destroy(),r.buffers[h]=null)),r.buffers[h]||(p=r.buffers[h]=o.create(d,po,!1,!0)),v.buffer=o.getBuffer(p),v.size=0|v.buffer.dimension,v.normalized=!1,v.type=v.buffer.dtype,v.offset=0,v.stride=0,v.divisor=0,v.state=1,l[h]=1;else o.getBuffer(d)?(v.buffer=o.getBuffer(d),v.size=0|v.buffer.dimension,v.normalized=!1,v.type=v.buffer.dtype,v.offset=0,v.stride=0,v.divisor=0,v.state=1):o.getBuffer(d.buffer)?(v.buffer=o.getBuffer(d.buffer),v.size=0|(+d.size||v.buffer.dimension),v.normalized=!!d.normalized||!1,"type"in d?(it.parameter(d.type,Ge,"invalid buffer type"),v.type=Ge[d.type]):v.type=v.buffer.dtype,v.offset=0|(d.offset||0),v.stride=0|(d.stride||0),v.divisor=0|(d.divisor||0),v.state=1,it(v.size>=1&&v.size<=4,"size must be between 1 and 4"),it(v.offset>=0,"invalid offset"),it(v.stride>=0&&v.stride<=255,"stride must be between 0 and 255"),it(v.divisor>=0,"divisor must be positive"),it(!v.divisor||!!n.angle_instanced_arrays,"ANGLE_instanced_arrays must be enabled to use divisor")):"x"in d?(it(h>0,"first attribute must not be a constant"),v.x=+d.x||0,v.y=+d.y||0,v.z=+d.z||0,v.w=+d.w||0,v.state=2):it(!1,"invalid attribute spec for location "+h)}for(var m=0;m<r.buffers.length;++m)!l[m]&&r.buffers[m]&&(r.buffers[m].destroy(),r.buffers[m]=null);return r.refresh(),s}return i.vaoCount+=1,s.destroy=function(){for(var t=0;t<r.buffers.length;++t)r.buffers[t]&&r.buffers[t].destroy();r.buffers.length=0,r.ownsElements&&(r.elements.destroy(),r.elements=null,r.ownsElements=!1),r.destroy()},s._vao=r,s._reglType="vao",s(t)}return x.prototype.bindAttrs=function(){for(var e=g(),n=this.attributes,r=0;r<n.length;++r){var i=n[r];i.buffer?(t.enableVertexAttribArray(r),t.bindBuffer(po,i.buffer.buffer),t.vertexAttribPointer(r,i.size,i.type,i.normalized,i.stride,i.offset),e&&i.divisor&&e.vertexAttribDivisorANGLE(r,i.divisor)):(t.disableVertexAttribArray(r),t.vertexAttrib4f(r,i.x,i.y,i.z,i.w))}for(var o=n.length;o<u;++o)t.disableVertexAttribArray(o);var s=a.getElements(this.elements);s?t.bindBuffer(vo,s.buffer.buffer):t.bindBuffer(vo,null)},x.prototype.refresh=function(){var t=v();t&&(t.bindVertexArrayOES(this.vao),this.bindAttrs(),p.currentVAO=null,t.bindVertexArrayOES(null))},x.prototype.destroy=function(){if(this.vao){var t=v();this===p.currentVAO&&(p.currentVAO=null,t.bindVertexArrayOES(null)),t.deleteVertexArrayOES(this.vao),this.vao=null}this.ownsElements&&(this.elements.destroy(),this.elements=null,this.ownsElements=!1),h[this.id]&&(delete h[this.id],i.vaoCount-=1)},p}var _o=35632,bo=35633,xo=35718,wo=35721;function Eo(t,e,r,i){var o={},a={};function s(t,e,n,r){this.name=t,this.id=e,this.location=n,this.info=r}function u(t,e){for(var n=0;n<t.length;++n)if(t[n].id===e.id)return void(t[n].location=e.location);t.push(e)}function c(n,r,i){var s=n===_o?o:a,u=s[r];if(!u){var c=e.str(r);u=t.createShader(n),t.shaderSource(u,c),t.compileShader(u),it.shaderError(t,u,c,n,i),s[r]=u}return u}var l={},f=[],h=0;function p(t,e){this.id=h++,this.fragId=t,this.vertId=e,this.program=null,this.uniforms=[],this.attributes=[],this.refCount=1,i.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function d(n,r,o){var a,l,f=c(_o,n.fragId),h=c(bo,n.vertId),p=n.program=t.createProgram();if(t.attachShader(p,f),t.attachShader(p,h),o)for(a=0;a<o.length;++a){var d=o[a];t.bindAttribLocation(p,d[0],d[1])}t.linkProgram(p),it.linkError(t,p,e.str(n.fragId),e.str(n.vertId),r);var v=t.getProgramParameter(p,xo);i.profile&&(n.stats.uniformsCount=v);var g=n.uniforms;for(a=0;a<v;++a)if(l=t.getActiveUniform(p,a),l)if(l.size>1)for(var m=0;m<l.size;++m){var y=l.name.replace("[0]","["+m+"]");u(g,new s(y,e.id(y),t.getUniformLocation(p,y),l))}else u(g,new s(l.name,e.id(l.name),t.getUniformLocation(p,l.name),l));var _=t.getProgramParameter(p,wo);i.profile&&(n.stats.attributesCount=_);var b=n.attributes;for(a=0;a<_;++a)l=t.getActiveAttrib(p,a),l&&u(b,new s(l.name,e.id(l.name),t.getAttribLocation(p,l.name),l))}function v(){o={},a={};for(var t=0;t<f.length;++t)d(f[t],null,f[t].attributes.map((function(t){return[t.location,t.name]})))}return i.profile&&(r.getMaxUniformsCount=function(){var t=0;return f.forEach((function(e){e.stats.uniformsCount>t&&(t=e.stats.uniformsCount)})),t},r.getMaxAttributesCount=function(){var t=0;return f.forEach((function(e){e.stats.attributesCount>t&&(t=e.stats.attributesCount)})),t}),{clear:function(){var e=t.deleteShader.bind(t);Te(o).forEach(e),o={},Te(a).forEach(e),a={},f.forEach((function(e){t.deleteProgram(e.program)})),f.length=0,l={},r.shaderCount=0},program:function(e,i,s,u){it.command(e>=0,"missing vertex shader",s),it.command(i>=0,"missing fragment shader",s);var c=l[i];c||(c=l[i]={});var h=c[e];if(h&&(h.refCount++,!u))return h;var v=new p(i,e);return r.shaderCount++,d(v,s,u),h||(c[e]=v),f.push(v),n(v,{destroy:function(){if(v.refCount--,v.refCount<=0){t.deleteProgram(v.program);var e=f.indexOf(v);f.splice(e,1),r.shaderCount--}c[v.vertId].refCount<=0&&(t.deleteShader(a[v.vertId]),delete a[v.vertId],delete l[v.fragId][v.vertId]),Object.keys(l[v.fragId]).length||(t.deleteShader(o[v.fragId]),delete o[v.fragId],delete l[v.fragId])}})},restore:v,shader:c,frag:-1,vert:-1}}var So=6408,Oo=5121,Co=3333,To=5126;function Ao(t,n,r,i,o,a,s){function u(u){var c;null===n.next?(it(o.preserveDrawingBuffer,'you must create a webgl context with "preserveDrawingBuffer":true in order to read pixels from the drawing buffer'),c=Oo):(it(null!==n.next.colorAttachments[0].texture,"You cannot read from a renderbuffer"),c=n.next.colorAttachments[0].texture._texture.type,it.optional((function(){a.oes_texture_float?(it(c===Oo||c===To,"Reading from a framebuffer is only allowed for the types 'uint8' and 'float'"),c===To&&it(s.readFloat,"Reading 'float' values is not permitted in your browser. For a fallback, please see: https://www.npmjs.com/package/glsl-read-float")):it(c===Oo,"Reading from a framebuffer is only allowed for the type 'uint8'")})));var l=0,f=0,h=i.framebufferWidth,p=i.framebufferHeight,d=null;e(u)?d=u:u&&(it.type(u,"object","invalid arguments to regl.read()"),l=0|u.x,f=0|u.y,it(l>=0&&l<i.framebufferWidth,"invalid x offset for regl.read"),it(f>=0&&f<i.framebufferHeight,"invalid y offset for regl.read"),h=0|(u.width||i.framebufferWidth-l),p=0|(u.height||i.framebufferHeight-f),d=u.data||null),d&&(c===Oo?it(d instanceof Uint8Array,"buffer must be 'Uint8Array' when reading from a framebuffer of type 'uint8'"):c===To&&it(d instanceof Float32Array,"buffer must be 'Float32Array' when reading from a framebuffer of type 'float'")),it(h>0&&h+l<=i.framebufferWidth,"invalid width for read pixels"),it(p>0&&p+f<=i.framebufferHeight,"invalid height for read pixels"),r();var v=h*p*4;return d||(c===Oo?d=new Uint8Array(v):c===To&&(d=d||new Float32Array(v))),it.isTypedArray(d,"data buffer for regl.read() must be a typedarray"),it(d.byteLength>=v,"data buffer for regl.read() too small"),t.pixelStorei(Co,4),t.readPixels(l,f,h,p,So,c,d),d}function c(t){var e;return n.setFBO({framebuffer:t.framebuffer},(function(){e=u(t)})),e}function l(t){return t&&"framebuffer"in t?c(t):u(t)}return l}function ko(t){return Array.prototype.slice.call(t)}function Mo(t){return ko(t).join("")}function Po(){var e=0,r=[],i=[];function o(t){for(var n=0;n<i.length;++n)if(i[n]===t)return r[n];var o="g"+e++;return r.push(o),i.push(t),o}function a(){var t=[];function r(){t.push.apply(t,ko(arguments))}var i=[];function o(){var n="v"+e++;return i.push(n),arguments.length>0&&(t.push(n,"="),t.push.apply(t,ko(arguments)),t.push(";")),n}return n(r,{def:o,toString:function(){return Mo([i.length>0?"var "+i.join(",")+";":"",Mo(t)])}})}function s(){var t=a(),e=a(),r=t.toString,i=e.toString;function o(n,r){e(n,r,"=",t.def(n,r),";")}return n((function(){t.apply(t,ko(arguments))}),{def:t.def,entry:t,exit:e,save:o,set:function(e,n,r){o(e,n),t(e,n,"=",r,";")},toString:function(){return r()+i()}})}function u(){var t=Mo(arguments),e=s(),r=s(),i=e.toString,o=r.toString;return n(e,{then:function(){return e.apply(e,ko(arguments)),this},else:function(){return r.apply(r,ko(arguments)),this},toString:function(){var e=o();return e&&(e="else{"+e+"}"),Mo(["if(",t,"){",i(),"}",e])}})}var c=a(),l={};function f(t,e){var r=[];function i(){var t="a"+r.length;return r.push(t),t}e=e||0;for(var o=0;o<e;++o)i();var a=s(),u=a.toString,c=l[t]=n(a,{arg:i,toString:function(){return Mo(["function(",r.join(),"){",u(),"}"])}});return c}function h(){var e=['"use strict";',c,"return {"];Object.keys(l).forEach((function(t){e.push('"',t,'":',l[t].toString(),",")})),e.push("}");var n=Mo(e).replace(/;/g,";\n").replace(/}/g,"}\n").replace(/{/g,"{\n"),o="undefined"!==typeof my&&!!my&&"function"===typeof my.showToast&&!0!==my.isFRM,a=o?t.Function.apply(null,r.concat(n)):Function.apply(null,r.concat(n));return a.apply(null,i)}return{global:c,link:o,block:a,proc:f,scope:s,cond:u,compile:h}}var Ro="xyzw".split(""),jo=5121,Io=1,Lo=2,No=0,Do=1,Fo=2,Bo=3,zo=4,Uo=5,Vo=6,Ho="dither",Go="blend.enable",Wo="blend.color",Zo="blend.equation",Yo="blend.func",Xo="depth.enable",qo="depth.func",Ko="depth.range",Qo="depth.mask",$o="colorMask",Jo="cull.enable",ta="cull.face",ea="frontFace",na="lineWidth",ra="polygonOffset.enable",ia="polygonOffset.offset",oa="sample.alpha",aa="sample.enable",sa="sample.coverage",ua="stencil.enable",ca="stencil.mask",la="stencil.func",fa="stencil.opFront",ha="stencil.opBack",pa="scissor.enable",da="scissor.box",va="viewport",ga="profile",ma="framebuffer",ya="vert",_a="frag",ba="elements",xa="primitive",wa="count",Ea="offset",Sa="instances",Oa="vao",Ca="Width",Ta="Height",Aa=ma+Ca,ka=ma+Ta,Ma=va+Ca,Pa=va+Ta,Ra="drawingBuffer",ja=Ra+Ca,Ia=Ra+Ta,La=[Yo,Zo,la,fa,ha,sa,va,da,ia],Na=34962,Da=34963,Fa=35632,Ba=35633,za=3553,Ua=34067,Va=2884,Ha=3042,Ga=3024,Wa=2960,Za=2929,Ya=3089,Xa=32823,qa=32926,Ka=32928,Qa=5126,$a=35664,Ja=35665,ts=35666,es=5124,ns=35667,rs=35668,is=35669,os=35670,as=35671,ss=35672,us=35673,cs=35674,ls=35675,fs=35676,hs=35678,ps=35680,ds=4,vs=1028,gs=1029,ms=2304,ys=2305,_s=32775,bs=32776,xs=519,ws=7680,Es=0,Ss=1,Os=32774,Cs=513,Ts=36160,As=36064,ks={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},Ms=["constant color, constant alpha","one minus constant color, constant alpha","constant color, one minus constant alpha","one minus constant color, one minus constant alpha","constant alpha, constant color","constant alpha, one minus constant color","one minus constant alpha, constant color","one minus constant alpha, one minus constant color"],Ps={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},Rs={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},js={frag:Fa,vert:Ba},Is={cw:ms,ccw:ys};function Ls(t){return Array.isArray(t)||e(t)||Ce(t)}function Ns(t){return t.sort((function(t,e){return t===va?-1:e===va?1:t<e?-1:1}))}function Ds(t,e,n,r){this.thisDep=t,this.contextDep=e,this.propDep=n,this.append=r}function Fs(t){return t&&!(t.thisDep||t.contextDep||t.propDep)}function Bs(t){return new Ds(!1,!1,!1,t)}function zs(t,e){var n=t.type;if(n===No){var r=t.data.length;return new Ds(!0,r>=1,r>=2,e)}if(n===zo){var i=t.data;return new Ds(i.thisDep,i.contextDep,i.propDep,e)}if(n===Uo)return new Ds(!1,!1,!1,e);if(n===Vo){for(var o=!1,a=!1,s=!1,u=0;u<t.data.length;++u){var c=t.data[u];if(c.type===Do)s=!0;else if(c.type===Fo)a=!0;else if(c.type===Bo)o=!0;else if(c.type===No){o=!0;var l=c.data;l>=1&&(a=!0),l>=2&&(s=!0)}else c.type===zo&&(o=o||c.data.thisDep,a=a||c.data.contextDep,s=s||c.data.propDep)}return new Ds(o,a,s,e)}return new Ds(n===Bo,n===Fo,n===Do,e)}var Us=new Ds(!1,!1,!1,(function(){}));function Vs(t,e,r,i,o,a,s,u,c,l,f,h,p,d,v){var g=l.Record,m={add:32774,subtract:32778,"reverse subtract":32779};r.ext_blend_minmax&&(m.min=_s,m.max=bs);var y=r.angle_instanced_arrays,_=r.webgl_draw_buffers,b=r.oes_vertex_array_object,x={dirty:!0,profile:v.profile},w={},E=[],S={},O={};function C(t){return t.replace(".","_")}function T(t,e,n){var r=C(t);E.push(t),w[r]=x[r]=!!n,S[r]=e}function A(t,e,n){var r=C(t);E.push(t),Array.isArray(n)?(x[r]=n.slice(),w[r]=n.slice()):x[r]=w[r]=n,O[r]=e}T(Ho,Ga),T(Go,Ha),A(Wo,"blendColor",[0,0,0,0]),A(Zo,"blendEquationSeparate",[Os,Os]),A(Yo,"blendFuncSeparate",[Ss,Es,Ss,Es]),T(Xo,Za,!0),A(qo,"depthFunc",Cs),A(Ko,"depthRange",[0,1]),A(Qo,"depthMask",!0),A($o,$o,[!0,!0,!0,!0]),T(Jo,Va),A(ta,"cullFace",gs),A(ea,ea,ys),A(na,na,1),T(ra,Xa),A(ia,"polygonOffset",[0,0]),T(oa,qa),T(aa,Ka),A(sa,"sampleCoverage",[1,!1]),T(ua,Wa),A(ca,"stencilMask",-1),A(la,"stencilFunc",[xs,0,-1]),A(fa,"stencilOpSeparate",[vs,ws,ws,ws]),A(ha,"stencilOpSeparate",[gs,ws,ws,ws]),T(pa,Ya),A(da,"scissor",[0,0,t.drawingBufferWidth,t.drawingBufferHeight]),A(va,va,[0,0,t.drawingBufferWidth,t.drawingBufferHeight]);var k={gl:t,context:p,strings:e,next:w,current:x,draw:h,elements:a,buffer:o,shader:f,attributes:l.state,vao:l,uniforms:c,framebuffer:u,extensions:r,timer:d,isBufferArgs:Ls},M={primTypes:hn,compareFuncs:Ps,blendFuncs:ks,blendEquations:m,stencilOps:Rs,glTypes:Ge,orientationType:Is};it.optional((function(){k.isArrayLike=Mn})),_&&(M.backBuffer=[gs],M.drawBuffer=kt(i.maxDrawbuffers,(function(t){return 0===t?[0]:kt(t,(function(t){return As+t}))})));var P=0;function R(){var t=Po(),n=t.link,r=t.global;t.id=P++,t.batchId="0";var i=n(k),o=t.shared={props:"a0"};Object.keys(k).forEach((function(t){o[t]=r.def(i,".",t)})),it.optional((function(){t.CHECK=n(it),t.commandStr=it.guessCommand(),t.command=n(t.commandStr),t.assert=function(t,e,r){t("if(!(",e,"))",this.CHECK,".commandRaise(",n(r),",",this.command,");")},M.invalidBlendCombinations=Ms}));var a=t.next={},s=t.current={};Object.keys(O).forEach((function(t){Array.isArray(x[t])&&(a[t]=r.def(o.next,".",t),s[t]=r.def(o.current,".",t))}));var u=t.constants={};Object.keys(M).forEach((function(t){u[t]=r.def(JSON.stringify(M[t]))})),t.invoke=function(e,r){switch(r.type){case No:var i=["this",o.context,o.props,t.batchId];return e.def(n(r.data),".call(",i.slice(0,Math.max(r.data.length+1,4)),")");case Do:return e.def(o.props,r.data);case Fo:return e.def(o.context,r.data);case Bo:return e.def("this",r.data);case zo:return r.data.append(t,e),r.data.ref;case Uo:return r.data.toString();case Vo:return r.data.map((function(n){return t.invoke(e,n)}))}},t.attribCache={};var c={};return t.scopeAttrib=function(t){var r=e.id(t);if(r in c)return c[r];var i=l.scope[r];i||(i=l.scope[r]=new g);var o=c[r]=n(i);return o},t}function j(t){var e,n=t["static"],r=t.dynamic;if(ga in n){var i=!!n[ga];e=Bs((function(t,e){return i})),e.enable=i}else if(ga in r){var o=r[ga];e=zs(o,(function(t,e){return t.invoke(e,o)}))}return e}function I(t,e){var n=t["static"],r=t.dynamic;if(ma in n){var i=n[ma];return i?(i=u.getFramebuffer(i),it.command(i,"invalid framebuffer object"),Bs((function(t,e){var n=t.link(i),r=t.shared;e.set(r.framebuffer,".next",n);var o=r.context;return e.set(o,"."+Aa,n+".width"),e.set(o,"."+ka,n+".height"),n}))):Bs((function(t,e){var n=t.shared;e.set(n.framebuffer,".next","null");var r=n.context;return e.set(r,"."+Aa,r+"."+ja),e.set(r,"."+ka,r+"."+Ia),"null"}))}if(ma in r){var o=r[ma];return zs(o,(function(t,e){var n=t.invoke(e,o),r=t.shared,i=r.framebuffer,a=e.def(i,".getFramebuffer(",n,")");it.optional((function(){t.assert(e,"!"+n+"||"+a,"invalid framebuffer object")})),e.set(i,".next",a);var s=r.context;return e.set(s,"."+Aa,a+"?"+a+".width:"+s+"."+ja),e.set(s,"."+ka,a+"?"+a+".height:"+s+"."+Ia),a}))}return null}function L(t,e,n){var r=t["static"],i=t.dynamic;function o(t){if(t in r){var o=r[t];it.commandType(o,"object","invalid "+t,n.commandStr);var a,s,u=!0,c=0|o.x,l=0|o.y;return"width"in o?(a=0|o.width,it.command(a>=0,"invalid "+t,n.commandStr)):u=!1,"height"in o?(s=0|o.height,it.command(s>=0,"invalid "+t,n.commandStr)):u=!1,new Ds(!u&&e&&e.thisDep,!u&&e&&e.contextDep,!u&&e&&e.propDep,(function(t,e){var n=t.shared.context,r=a;"width"in o||(r=e.def(n,".",Aa,"-",c));var i=s;return"height"in o||(i=e.def(n,".",ka,"-",l)),[c,l,r,i]}))}if(t in i){var f=i[t],h=zs(f,(function(e,n){var r=e.invoke(n,f);it.optional((function(){e.assert(n,r+"&&typeof "+r+'==="object"',"invalid "+t)}));var i=e.shared.context,o=n.def(r,".x|0"),a=n.def(r,".y|0"),s=n.def('"width" in ',r,"?",r,".width|0:","(",i,".",Aa,"-",o,")"),u=n.def('"height" in ',r,"?",r,".height|0:","(",i,".",ka,"-",a,")");return it.optional((function(){e.assert(n,s+">=0&&"+u+">=0","invalid "+t)})),[o,a,s,u]}));return e&&(h.thisDep=h.thisDep||e.thisDep,h.contextDep=h.contextDep||e.contextDep,h.propDep=h.propDep||e.propDep),h}return e?new Ds(e.thisDep,e.contextDep,e.propDep,(function(t,e){var n=t.shared.context;return[0,0,e.def(n,".",Aa),e.def(n,".",ka)]})):null}var a=o(va);if(a){var s=a;a=new Ds(a.thisDep,a.contextDep,a.propDep,(function(t,e){var n=s.append(t,e),r=t.shared.context;return e.set(r,"."+Ma,n[2]),e.set(r,"."+Pa,n[3]),n}))}return{viewport:a,scissor_box:o(da)}}function N(t,e){var n=t["static"],r="string"===typeof n[_a]&&"string"===typeof n[ya];if(r){if(Object.keys(e.dynamic).length>0)return null;var i=e["static"],o=Object.keys(i);if(o.length>0&&"number"===typeof i[o[0]]){for(var a=[],s=0;s<o.length;++s)it("number"===typeof i[o[s]],"must specify all vertex attribute locations when using vaos"),a.push([0|i[o[s]],o[s]]);return a}}return null}function D(t,n,r){var i=t["static"],o=t.dynamic;function a(t){if(t in i){var n=e.id(i[t]);it.optional((function(){f.shader(js[t],n,it.guessCommand())}));var r=Bs((function(){return n}));return r.id=n,r}if(t in o){var a=o[t];return zs(a,(function(e,n){var r=e.invoke(n,a),i=n.def(e.shared.strings,".id(",r,")");return it.optional((function(){n(e.shared.shader,".shader(",js[t],",",i,",",e.command,");")})),i}))}return null}var s,u=a(_a),c=a(ya),l=null;return Fs(u)&&Fs(c)?(l=f.program(c.id,u.id,null,r),s=Bs((function(t,e){return t.link(l)}))):s=new Ds(u&&u.thisDep||c&&c.thisDep,u&&u.contextDep||c&&c.contextDep,u&&u.propDep||c&&c.propDep,(function(t,e){var n,r,i=t.shared.shader;n=u?u.append(t,e):e.def(i,".",_a),r=c?c.append(t,e):e.def(i,".",ya);var o=i+".program("+r+","+n;return it.optional((function(){o+=","+t.command})),e.def(o+")")})),{frag:u,vert:c,progVar:s,program:l}}function F(t,e){var n=t["static"],r=t.dynamic,i={},o=!1;function s(){if(Oa in n){var t=n[Oa];return null!==t&&null===l.getVAO(t)&&(t=l.createVAO(t)),o=!0,i.vao=t,Bs((function(e){var n=l.getVAO(t);return n?e.link(n):"null"}))}if(Oa in r){o=!0;var e=r[Oa];return zs(e,(function(t,n){var r=t.invoke(n,e);return n.def(t.shared.vao+".getVAO("+r+")")}))}return null}var u=s(),c=!1;function f(){if(ba in n){var t=n[ba];if(i.elements=t,Ls(t)){var s=i.elements=a.create(t,!0);t=a.getElements(s),c=!0}else t&&(t=a.getElements(t),c=!0,it.command(t,"invalid elements",e.commandStr));var l=Bs((function(e,n){if(t){var r=e.link(t);return e.ELEMENTS=r,r}return e.ELEMENTS=null,null}));return l.value=t,l}if(ba in r){c=!0;var f=r[ba];return zs(f,(function(t,e){var n=t.shared,r=n.isBufferArgs,i=n.elements,o=t.invoke(e,f),a=e.def("null"),s=e.def(r,"(",o,")"),u=t.cond(s).then(a,"=",i,".createStream(",o,");")["else"](a,"=",i,".getElements(",o,");");return it.optional((function(){t.assert(u["else"],"!"+o+"||"+a,"invalid elements")})),e.entry(u),e.exit(t.cond(s).then(i,".destroyStream(",a,");")),t.ELEMENTS=a,a}))}return o?new Ds(u.thisDep,u.contextDep,u.propDep,(function(t,e){return e.def(t.shared.vao+".currentVAO?"+t.shared.elements+".getElements("+t.shared.vao+".currentVAO.elements):null")})):null}var h=f();function p(){if(xa in n){var t=n[xa];return i.primitive=t,it.commandParameter(t,hn,"invalid primitve",e.commandStr),Bs((function(e,n){return hn[t]}))}if(xa in r){var a=r[xa];return zs(a,(function(t,e){var n=t.constants.primTypes,r=t.invoke(e,a);return it.optional((function(){t.assert(e,r+" in "+n,"invalid primitive, must be one of "+Object.keys(hn))})),e.def(n,"[",r,"]")}))}return c?Fs(h)?h.value?Bs((function(t,e){return e.def(t.ELEMENTS,".primType")})):Bs((function(){return ds})):new Ds(h.thisDep,h.contextDep,h.propDep,(function(t,e){var n=t.ELEMENTS;return e.def(n,"?",n,".primType:",ds)})):o?new Ds(u.thisDep,u.contextDep,u.propDep,(function(t,e){return e.def(t.shared.vao+".currentVAO?"+t.shared.vao+".currentVAO.primitive:"+ds)})):null}function d(t,a){if(t in n){var s=0|n[t];return a?i.offset=s:i.instances=s,it.command(!a||s>=0,"invalid "+t,e.commandStr),Bs((function(t,e){return a&&(t.OFFSET=s),s}))}if(t in r){var l=r[t];return zs(l,(function(e,n){var r=e.invoke(n,l);return a&&(e.OFFSET=r,it.optional((function(){e.assert(n,r+">=0","invalid "+t)}))),r}))}if(a){if(c)return Bs((function(t,e){return t.OFFSET=0,0}));if(o)return new Ds(u.thisDep,u.contextDep,u.propDep,(function(t,e){return e.def(t.shared.vao+".currentVAO?"+t.shared.vao+".currentVAO.offset:0")}))}else if(o)return new Ds(u.thisDep,u.contextDep,u.propDep,(function(t,e){return e.def(t.shared.vao+".currentVAO?"+t.shared.vao+".currentVAO.instances:-1")}));return null}var v=d(Ea,!0);function g(){if(wa in n){var t=0|n[wa];return i.count=t,it.command("number"===typeof t&&t>=0,"invalid vertex count",e.commandStr),Bs((function(){return t}))}if(wa in r){var a=r[wa];return zs(a,(function(t,e){var n=t.invoke(e,a);return it.optional((function(){t.assert(e,"typeof "+n+'==="number"&&'+n+">=0&&"+n+"===("+n+"|0)","invalid vertex count")})),n}))}if(c){if(Fs(h)){if(h)return v?new Ds(v.thisDep,v.contextDep,v.propDep,(function(t,e){var n=e.def(t.ELEMENTS,".vertCount-",t.OFFSET);return it.optional((function(){t.assert(e,n+">=0","invalid vertex offset/element buffer too small")})),n})):Bs((function(t,e){return e.def(t.ELEMENTS,".vertCount")}));var s=Bs((function(){return-1}));return it.optional((function(){s.MISSING=!0})),s}var l=new Ds(h.thisDep||v.thisDep,h.contextDep||v.contextDep,h.propDep||v.propDep,(function(t,e){var n=t.ELEMENTS;return t.OFFSET?e.def(n,"?",n,".vertCount-",t.OFFSET,":-1"):e.def(n,"?",n,".vertCount:-1")}));return it.optional((function(){l.DYNAMIC=!0})),l}if(o){var f=new Ds(u.thisDep,u.contextDep,u.propDep,(function(t,e){return e.def(t.shared.vao,".currentVAO?",t.shared.vao,".currentVAO.count:-1")}));return f}return null}var m=p(),y=g(),_=d(Sa,!1);return{elements:h,primitive:m,count:y,instances:_,offset:v,vao:u,vaoActive:o,elementsActive:c,static:i}}function B(t,e){var n=t["static"],r=t.dynamic,o={};return E.forEach((function(t){var a=C(t);function s(e,i){if(t in n){var s=e(n[t]);o[a]=Bs((function(){return s}))}else if(t in r){var u=r[t];o[a]=zs(u,(function(t,e){return i(t,e,t.invoke(e,u))}))}}switch(t){case Jo:case Go:case Ho:case ua:case Xo:case pa:case ra:case oa:case aa:case Qo:return s((function(n){return it.commandType(n,"boolean",t,e.commandStr),n}),(function(e,n,r){return it.optional((function(){e.assert(n,"typeof "+r+'==="boolean"',"invalid flag "+t,e.commandStr)})),r}));case qo:return s((function(n){return it.commandParameter(n,Ps,"invalid "+t,e.commandStr),Ps[n]}),(function(e,n,r){var i=e.constants.compareFuncs;return it.optional((function(){e.assert(n,r+" in "+i,"invalid "+t+", must be one of "+Object.keys(Ps))})),n.def(i,"[",r,"]")}));case Ko:return s((function(t){return it.command(Mn(t)&&2===t.length&&"number"===typeof t[0]&&"number"===typeof t[1]&&t[0]<=t[1],"depth range is 2d array",e.commandStr),t}),(function(t,e,n){it.optional((function(){t.assert(e,t.shared.isArrayLike+"("+n+")&&"+n+".length===2&&typeof "+n+'[0]==="number"&&typeof '+n+'[1]==="number"&&'+n+"[0]<="+n+"[1]","depth range must be a 2d array")}));var r=e.def("+",n,"[0]"),i=e.def("+",n,"[1]");return[r,i]}));case Yo:return s((function(t){it.commandType(t,"object","blend.func",e.commandStr);var n="srcRGB"in t?t.srcRGB:t.src,r="srcAlpha"in t?t.srcAlpha:t.src,i="dstRGB"in t?t.dstRGB:t.dst,o="dstAlpha"in t?t.dstAlpha:t.dst;return it.commandParameter(n,ks,a+".srcRGB",e.commandStr),it.commandParameter(r,ks,a+".srcAlpha",e.commandStr),it.commandParameter(i,ks,a+".dstRGB",e.commandStr),it.commandParameter(o,ks,a+".dstAlpha",e.commandStr),it.command(-1===Ms.indexOf(n+", "+i),"unallowed blending combination (srcRGB, dstRGB) = ("+n+", "+i+")",e.commandStr),[ks[n],ks[i],ks[r],ks[o]]}),(function(e,n,r){var i=e.constants.blendFuncs;function o(o,a){var s=n.def('"',o,a,'" in ',r,"?",r,".",o,a,":",r,".",o);return it.optional((function(){e.assert(n,s+" in "+i,"invalid "+t+"."+o+a+", must be one of "+Object.keys(ks))})),s}it.optional((function(){e.assert(n,r+"&&typeof "+r+'==="object"',"invalid blend func, must be an object")}));var a=o("src","RGB"),s=o("dst","RGB");it.optional((function(){var t=e.constants.invalidBlendCombinations;e.assert(n,t+".indexOf("+a+'+", "+'+s+") === -1 ","unallowed blending combination for (srcRGB, dstRGB)")}));var u=n.def(i,"[",a,"]"),c=n.def(i,"[",o("src","Alpha"),"]"),l=n.def(i,"[",s,"]"),f=n.def(i,"[",o("dst","Alpha"),"]");return[u,l,c,f]}));case Zo:return s((function(n){return"string"===typeof n?(it.commandParameter(n,m,"invalid "+t,e.commandStr),[m[n],m[n]]):"object"===typeof n?(it.commandParameter(n.rgb,m,t+".rgb",e.commandStr),it.commandParameter(n.alpha,m,t+".alpha",e.commandStr),[m[n.rgb],m[n.alpha]]):void it.commandRaise("invalid blend.equation",e.commandStr)}),(function(e,n,r){var i=e.constants.blendEquations,o=n.def(),a=n.def(),s=e.cond("typeof ",r,'==="string"');return it.optional((function(){function n(t,n,r){e.assert(t,r+" in "+i,"invalid "+n+", must be one of "+Object.keys(m))}n(s.then,t,r),e.assert(s["else"],r+"&&typeof "+r+'==="object"',"invalid "+t),n(s["else"],t+".rgb",r+".rgb"),n(s["else"],t+".alpha",r+".alpha")})),s.then(o,"=",a,"=",i,"[",r,"];"),s["else"](o,"=",i,"[",r,".rgb];",a,"=",i,"[",r,".alpha];"),n(s),[o,a]}));case Wo:return s((function(t){return it.command(Mn(t)&&4===t.length,"blend.color must be a 4d array",e.commandStr),kt(4,(function(e){return+t[e]}))}),(function(t,e,n){return it.optional((function(){t.assert(e,t.shared.isArrayLike+"("+n+")&&"+n+".length===4","blend.color must be a 4d array")})),kt(4,(function(t){return e.def("+",n,"[",t,"]")}))}));case ca:return s((function(t){return it.commandType(t,"number",a,e.commandStr),0|t}),(function(t,e,n){return it.optional((function(){t.assert(e,"typeof "+n+'==="number"',"invalid stencil.mask")})),e.def(n,"|0")}));case la:return s((function(n){it.commandType(n,"object",a,e.commandStr);var r=n.cmp||"keep",i=n.ref||0,o="mask"in n?n.mask:-1;return it.commandParameter(r,Ps,t+".cmp",e.commandStr),it.commandType(i,"number",t+".ref",e.commandStr),it.commandType(o,"number",t+".mask",e.commandStr),[Ps[r],i,o]}),(function(t,e,n){var r=t.constants.compareFuncs;it.optional((function(){function i(){t.assert(e,Array.prototype.join.call(arguments,""),"invalid stencil.func")}i(n+"&&typeof ",n,'==="object"'),i('!("cmp" in ',n,")||(",n,".cmp in ",r,")")}));var i=e.def('"cmp" in ',n,"?",r,"[",n,".cmp]",":",ws),o=e.def(n,".ref|0"),a=e.def('"mask" in ',n,"?",n,".mask|0:-1");return[i,o,a]}));case fa:case ha:return s((function(n){it.commandType(n,"object",a,e.commandStr);var r=n.fail||"keep",i=n.zfail||"keep",o=n.zpass||"keep";return it.commandParameter(r,Rs,t+".fail",e.commandStr),it.commandParameter(i,Rs,t+".zfail",e.commandStr),it.commandParameter(o,Rs,t+".zpass",e.commandStr),[t===ha?gs:vs,Rs[r],Rs[i],Rs[o]]}),(function(e,n,r){var i=e.constants.stencilOps;function o(o){return it.optional((function(){e.assert(n,'!("'+o+'" in '+r+")||("+r+"."+o+" in "+i+")","invalid "+t+"."+o+", must be one of "+Object.keys(Rs))})),n.def('"',o,'" in ',r,"?",i,"[",r,".",o,"]:",ws)}return it.optional((function(){e.assert(n,r+"&&typeof "+r+'==="object"',"invalid "+t)})),[t===ha?gs:vs,o("fail"),o("zfail"),o("zpass")]}));case ia:return s((function(t){it.commandType(t,"object",a,e.commandStr);var n=0|t.factor,r=0|t.units;return it.commandType(n,"number",a+".factor",e.commandStr),it.commandType(r,"number",a+".units",e.commandStr),[n,r]}),(function(e,n,r){it.optional((function(){e.assert(n,r+"&&typeof "+r+'==="object"',"invalid "+t)}));var i=n.def(r,".factor|0"),o=n.def(r,".units|0");return[i,o]}));case ta:return s((function(t){var n=0;return"front"===t?n=vs:"back"===t&&(n=gs),it.command(!!n,a,e.commandStr),n}),(function(t,e,n){return it.optional((function(){t.assert(e,n+'==="front"||'+n+'==="back"',"invalid cull.face")})),e.def(n,'==="front"?',vs,":",gs)}));case na:return s((function(t){return it.command("number"===typeof t&&t>=i.lineWidthDims[0]&&t<=i.lineWidthDims[1],"invalid line width, must be a positive number between "+i.lineWidthDims[0]+" and "+i.lineWidthDims[1],e.commandStr),t}),(function(t,e,n){return it.optional((function(){t.assert(e,"typeof "+n+'==="number"&&'+n+">="+i.lineWidthDims[0]+"&&"+n+"<="+i.lineWidthDims[1],"invalid line width")})),n}));case ea:return s((function(t){return it.commandParameter(t,Is,a,e.commandStr),Is[t]}),(function(t,e,n){return it.optional((function(){t.assert(e,n+'==="cw"||'+n+'==="ccw"',"invalid frontFace, must be one of cw,ccw")})),e.def(n+'==="cw"?'+ms+":"+ys)}));case $o:return s((function(t){return it.command(Mn(t)&&4===t.length,"color.mask must be length 4 array",e.commandStr),t.map((function(t){return!!t}))}),(function(t,e,n){return it.optional((function(){t.assert(e,t.shared.isArrayLike+"("+n+")&&"+n+".length===4","invalid color.mask")})),kt(4,(function(t){return"!!"+n+"["+t+"]"}))}));case sa:return s((function(t){it.command("object"===typeof t&&t,a,e.commandStr);var n="value"in t?t.value:1,r=!!t.invert;return it.command("number"===typeof n&&n>=0&&n<=1,"sample.coverage.value must be a number between 0 and 1",e.commandStr),[n,r]}),(function(t,e,n){it.optional((function(){t.assert(e,n+"&&typeof "+n+'==="object"',"invalid sample.coverage")}));var r=e.def('"value" in ',n,"?+",n,".value:1"),i=e.def("!!",n,".invert");return[r,i]}))}})),o}function z(t,e){var n=t["static"],r=t.dynamic,i={};return Object.keys(n).forEach((function(t){var r,o=n[t];if("number"===typeof o||"boolean"===typeof o)r=Bs((function(){return o}));else if("function"===typeof o){var a=o._reglType;"texture2d"===a||"textureCube"===a?r=Bs((function(t){return t.link(o)})):"framebuffer"===a||"framebufferCube"===a?(it.command(o.color.length>0,'missing color attachment for framebuffer sent to uniform "'+t+'"',e.commandStr),r=Bs((function(t){return t.link(o.color[0])}))):it.commandRaise('invalid data for uniform "'+t+'"',e.commandStr)}else Mn(o)?r=Bs((function(e){var n=e.global.def("[",kt(o.length,(function(n){return it.command("number"===typeof o[n]||"boolean"===typeof o[n],"invalid uniform "+t,e.commandStr),o[n]})),"]");return n})):it.commandRaise('invalid or missing data for uniform "'+t+'"',e.commandStr);r.value=o,i[t]=r})),Object.keys(r).forEach((function(t){var e=r[t];i[t]=zs(e,(function(t,n){return t.invoke(n,e)}))})),i}function U(t,n){var r=t["static"],i=t.dynamic,a={};return Object.keys(r).forEach((function(t){var i=r[t],s=e.id(t),u=new g;if(Ls(i))u.state=Io,u.buffer=o.getBuffer(o.create(i,Na,!1,!0)),u.type=0;else{var c=o.getBuffer(i);if(c)u.state=Io,u.buffer=c,u.type=0;else if(it.command("object"===typeof i&&i,"invalid data for attribute "+t,n.commandStr),"constant"in i){var l=i.constant;u.buffer="null",u.state=Lo,"number"===typeof l?u.x=l:(it.command(Mn(l)&&l.length>0&&l.length<=4,"invalid constant for attribute "+t,n.commandStr),Ro.forEach((function(t,e){e<l.length&&(u[t]=l[e])})))}else{c=Ls(i.buffer)?o.getBuffer(o.create(i.buffer,Na,!1,!0)):o.getBuffer(i.buffer),it.command(!!c,'missing buffer for attribute "'+t+'"',n.commandStr);var f=0|i.offset;it.command(f>=0,'invalid offset for attribute "'+t+'"',n.commandStr);var h=0|i.stride;it.command(h>=0&&h<256,'invalid stride for attribute "'+t+'", must be integer betweeen [0, 255]',n.commandStr);var p=0|i.size;it.command(!("size"in i)||p>0&&p<=4,'invalid size for attribute "'+t+'", must be 1,2,3,4',n.commandStr);var d=!!i.normalized,v=0;"type"in i&&(it.commandParameter(i.type,Ge,"invalid type for attribute "+t,n.commandStr),v=Ge[i.type]);var m=0|i.divisor;it.optional((function(){"divisor"in i&&(it.command(0===m||y,'cannot specify divisor for attribute "'+t+'", instancing not supported',n.commandStr),it.command(m>=0,'invalid divisor for attribute "'+t+'"',n.commandStr));var e=n.commandStr,r=["buffer","offset","divisor","normalized","type","size","stride"];Object.keys(i).forEach((function(n){it.command(r.indexOf(n)>=0,'unknown parameter "'+n+'" for attribute pointer "'+t+'" (valid parameters are '+r+")",e)}))})),u.buffer=c,u.state=Io,u.size=p,u.normalized=d,u.type=v||c.dtype,u.offset=f,u.stride=h,u.divisor=m}}a[t]=Bs((function(t,e){var n=t.attribCache;if(s in n)return n[s];var r={isStream:!1};return Object.keys(u).forEach((function(t){r[t]=u[t]})),u.buffer&&(r.buffer=t.link(u.buffer),r.type=r.type||r.buffer+".dtype"),n[s]=r,r}))})),Object.keys(i).forEach((function(t){var e=i[t];function n(n,r){var i=n.invoke(r,e),o=n.shared,a=n.constants,s=o.isBufferArgs,u=o.buffer;it.optional((function(){n.assert(r,i+"&&(typeof "+i+'==="object"||typeof '+i+'==="function")&&('+s+"("+i+")||"+u+".getBuffer("+i+")||"+u+".getBuffer("+i+".buffer)||"+s+"("+i+'.buffer)||("constant" in '+i+"&&(typeof "+i+'.constant==="number"||'+o.isArrayLike+"("+i+".constant))))",'invalid dynamic attribute "'+t+'"')}));var c={isStream:r.def(!1)},l=new g;l.state=Io,Object.keys(l).forEach((function(t){c[t]=r.def(""+l[t])}));var f=c.buffer,h=c.type;function p(t){r(c[t],"=",i,".",t,"|0;")}return r("if(",s,"(",i,")){",c.isStream,"=true;",f,"=",u,".createStream(",Na,",",i,");",h,"=",f,".dtype;","}else{",f,"=",u,".getBuffer(",i,");","if(",f,"){",h,"=",f,".dtype;",'}else if("constant" in ',i,"){",c.state,"=",Lo,";","if(typeof "+i+'.constant === "number"){',c[Ro[0]],"=",i,".constant;",Ro.slice(1).map((function(t){return c[t]})).join("="),"=0;","}else{",Ro.map((function(t,e){return c[t]+"="+i+".constant.length>"+e+"?"+i+".constant["+e+"]:0;"})).join(""),"}}else{","if(",s,"(",i,".buffer)){",f,"=",u,".createStream(",Na,",",i,".buffer);","}else{",f,"=",u,".getBuffer(",i,".buffer);","}",h,'="type" in ',i,"?",a.glTypes,"[",i,".type]:",f,".dtype;",c.normalized,"=!!",i,".normalized;"),p("size"),p("offset"),p("stride"),p("divisor"),r("}}"),r.exit("if(",c.isStream,"){",u,".destroyStream(",f,");","}"),c}a[t]=zs(e,n)})),a}function V(t){var e=t["static"],n=t.dynamic,r={};return Object.keys(e).forEach((function(t){var n=e[t];r[t]=Bs((function(t,e){return"number"===typeof n||"boolean"===typeof n?""+n:t.link(n)}))})),Object.keys(n).forEach((function(t){var e=n[t];r[t]=zs(e,(function(t,n){return t.invoke(n,e)}))})),r}function H(t,e,n,i,o){var a=t["static"],s=t.dynamic;it.optional((function(){var t=[ma,ya,_a,ba,xa,Ea,wa,Sa,ga,Oa].concat(E);function e(e){Object.keys(e).forEach((function(e){it.command(t.indexOf(e)>=0,'unknown parameter "'+e+'"',o.commandStr)}))}e(a),e(s)}));var u=N(t,e),c=I(t,o),f=L(t,c,o),h=F(t,o),p=B(t,o),d=D(t,o,u);function v(t){var e=f[t];e&&(p[t]=e)}v(va),v(C(da));var g=Object.keys(p).length>0,m={framebuffer:c,draw:h,shader:d,state:p,dirty:g,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}};if(m.profile=j(t,o),m.uniforms=z(n,o),m.drawVAO=m.scopeVAO=h.vao,!m.drawVAO&&d.program&&!u&&r.angle_instanced_arrays&&h["static"].elements){var y=!0,_=d.program.attributes.map((function(t){var n=e["static"][t];return y=y&&!!n,n}));if(y&&_.length>0){var b=l.getVAO(l.createVAO({attributes:_,elements:h["static"].elements}));m.drawVAO=new Ds(null,null,null,(function(t,e){return t.link(b)})),m.useVAO=!0}}return u?m.useVAO=!0:m.attributes=U(e,o),m.context=V(i,o),m}function G(t,e,n){var r=t.shared,i=r.context,o=t.scope();Object.keys(n).forEach((function(r){e.save(i,"."+r);var a=n[r],s=a.append(t,e);Array.isArray(s)?o(i,".",r,"=[",s.join(),"];"):o(i,".",r,"=",s,";")})),e(o)}function W(t,e,n,r){var i,o=t.shared,a=o.gl,s=o.framebuffer;_&&(i=e.def(o.extensions,".webgl_draw_buffers"));var u,c=t.constants,l=c.drawBuffer,f=c.backBuffer;u=n?n.append(t,e):e.def(s,".next"),r||e("if(",u,"!==",s,".cur){"),e("if(",u,"){",a,".bindFramebuffer(",Ts,",",u,".framebuffer);"),_&&e(i,".drawBuffersWEBGL(",l,"[",u,".colorAttachments.length]);"),e("}else{",a,".bindFramebuffer(",Ts,",null);"),_&&e(i,".drawBuffersWEBGL(",f,");"),e("}",s,".cur=",u,";"),r||e("}")}function Z(t,e,n){var r=t.shared,i=r.gl,o=t.current,a=t.next,s=r.current,u=r.next,c=t.cond(s,".dirty");E.forEach((function(e){var r,l,f=C(e);if(!(f in n.state))if(f in a){r=a[f],l=o[f];var h=kt(x[f].length,(function(t){return c.def(r,"[",t,"]")}));c(t.cond(h.map((function(t,e){return t+"!=="+l+"["+e+"]"})).join("||")).then(i,".",O[f],"(",h,");",h.map((function(t,e){return l+"["+e+"]="+t})).join(";"),";"))}else{r=c.def(u,".",f);var p=t.cond(r,"!==",s,".",f);c(p),f in S?p(t.cond(r).then(i,".enable(",S[f],");")["else"](i,".disable(",S[f],");"),s,".",f,"=",r,";"):p(i,".",O[f],"(",r,");",s,".",f,"=",r,";")}})),0===Object.keys(n.state).length&&c(s,".dirty=false;"),e(c)}function Y(t,e,n,r){var i=t.shared,o=t.current,a=i.current,s=i.gl;Ns(Object.keys(n)).forEach((function(i){var u=n[i];if(!r||r(u)){var c=u.append(t,e);if(S[i]){var l=S[i];Fs(u)?e(s,c?".enable(":".disable(",l,");"):e(t.cond(c).then(s,".enable(",l,");")["else"](s,".disable(",l,");")),e(a,".",i,"=",c,";")}else if(Mn(c)){var f=o[i];e(s,".",O[i],"(",c,");",c.map((function(t,e){return f+"["+e+"]="+t})).join(";"),";")}else e(s,".",O[i],"(",c,");",a,".",i,"=",c,";")}}))}function X(t,e){y&&(t.instancing=e.def(t.shared.extensions,".angle_instanced_arrays"))}function q(t,e,n,r,i){var o,a,s,u=t.shared,c=t.stats,l=u.current,f=u.timer,h=n.profile;function p(){var t="undefined"!==typeof my&&!!my&&"function"===typeof my.showToast&&!0!==my.isFRM;return t||"undefined"===typeof performance?"Date.now()":"performance.now()"}function v(t){o=e.def(),t(o,"=",p(),";"),"string"===typeof i?t(c,".count+=",i,";"):t(c,".count++;"),d&&(r?(a=e.def(),t(a,"=",f,".getNumPendingQueries();")):t(f,".beginQuery(",c,");"))}function g(t){t(c,".cpuTime+=",p(),"-",o,";"),d&&(r?t(f,".pushScopeStats(",a,",",f,".getNumPendingQueries(),",c,");"):t(f,".endQuery();"))}function m(t){var n=e.def(l,".profile");e(l,".profile=",t,";"),e.exit(l,".profile=",n,";")}if(h){if(Fs(h))return void(h.enable?(v(e),g(e.exit),m("true")):m("false"));s=h.append(t,e),m(s)}else s=e.def(l,".profile");var y=t.block();v(y),e("if(",s,"){",y,"}");var _=t.block();g(_),e.exit("if(",s,"){",_,"}")}function K(t,e,n,r,i){var o=t.shared;function a(t){switch(t){case $a:case ns:case as:return 2;case Ja:case rs:case ss:return 3;case ts:case is:case us:return 4;default:return 1}}function s(n,r,i){var a=o.gl,s=e.def(n,".location"),u=e.def(o.attributes,"[",s,"]"),c=i.state,l=i.buffer,f=[i.x,i.y,i.z,i.w],h=["buffer","normalized","offset","stride"];function p(){e("if(!",u,".buffer){",a,".enableVertexAttribArray(",s,");}");var n,o=i.type;if(n=i.size?e.def(i.size,"||",r):r,e("if(",u,".type!==",o,"||",u,".size!==",n,"||",h.map((function(t){return u+"."+t+"!=="+i[t]})).join("||"),"){",a,".bindBuffer(",Na,",",l,".buffer);",a,".vertexAttribPointer(",[s,n,o,i.normalized,i.stride,i.offset],");",u,".type=",o,";",u,".size=",n,";",h.map((function(t){return u+"."+t+"="+i[t]+";"})).join(""),"}"),y){var c=i.divisor;e("if(",u,".divisor!==",c,"){",t.instancing,".vertexAttribDivisorANGLE(",[s,c],");",u,".divisor=",c,";}")}}function d(){e("if(",u,".buffer){",a,".disableVertexAttribArray(",s,");",u,".buffer=null;","}if(",Ro.map((function(t,e){return u+"."+t+"!=="+f[e]})).join("||"),"){",a,".vertexAttrib4f(",s,",",f,");",Ro.map((function(t,e){return u+"."+t+"="+f[e]+";"})).join(""),"}")}c===Io?p():c===Lo?d():(e("if(",c,"===",Io,"){"),p(),e("}else{"),d(),e("}"))}r.forEach((function(r){var o,u=r.name,c=n.attributes[u];if(c){if(!i(c))return;o=c.append(t,e)}else{if(!i(Us))return;var l=t.scopeAttrib(u);it.optional((function(){t.assert(e,l+".state","missing attribute "+u)})),o={},Object.keys(new g).forEach((function(t){o[t]=e.def(l,".",t)}))}s(t.link(r),a(r.info.type),o)}))}function Q(t,n,r,i,o,a){for(var s,u=t.shared,c=u.gl,l=0;l<i.length;++l){var f,h=i[l],p=h.name,d=h.info.type,v=r.uniforms[p],g=t.link(h),m=g+".location";if(v){if(!o(v))continue;if(Fs(v)){var y=v.value;if(it.command(null!==y&&"undefined"!==typeof y,'missing uniform "'+p+'"',t.commandStr),d===hs||d===ps){it.command("function"===typeof y&&(d===hs&&("texture2d"===y._reglType||"framebuffer"===y._reglType)||d===ps&&("textureCube"===y._reglType||"framebufferCube"===y._reglType)),"invalid texture for uniform "+p,t.commandStr);var _=t.link(y._texture||y.color[0]._texture);n(c,".uniform1i(",m,",",_+".bind());"),n.exit(_,".unbind();")}else if(d===cs||d===ls||d===fs){it.optional((function(){it.command(Mn(y),"invalid matrix for uniform "+p,t.commandStr),it.command(d===cs&&4===y.length||d===ls&&9===y.length||d===fs&&16===y.length,"invalid length for matrix uniform "+p,t.commandStr)}));var b=t.global.def("new Float32Array(["+Array.prototype.slice.call(y)+"])"),x=2;d===ls?x=3:d===fs&&(x=4),n(c,".uniformMatrix",x,"fv(",m,",false,",b,");")}else{switch(d){case Qa:it.commandType(y,"number","uniform "+p,t.commandStr),s="1f";break;case $a:it.command(Mn(y)&&2===y.length,"uniform "+p,t.commandStr),s="2f";break;case Ja:it.command(Mn(y)&&3===y.length,"uniform "+p,t.commandStr),s="3f";break;case ts:it.command(Mn(y)&&4===y.length,"uniform "+p,t.commandStr),s="4f";break;case os:it.commandType(y,"boolean","uniform "+p,t.commandStr),s="1i";break;case es:it.commandType(y,"number","uniform "+p,t.commandStr),s="1i";break;case as:it.command(Mn(y)&&2===y.length,"uniform "+p,t.commandStr),s="2i";break;case ns:it.command(Mn(y)&&2===y.length,"uniform "+p,t.commandStr),s="2i";break;case ss:it.command(Mn(y)&&3===y.length,"uniform "+p,t.commandStr),s="3i";break;case rs:it.command(Mn(y)&&3===y.length,"uniform "+p,t.commandStr),s="3i";break;case us:it.command(Mn(y)&&4===y.length,"uniform "+p,t.commandStr),s="4i";break;case is:it.command(Mn(y)&&4===y.length,"uniform "+p,t.commandStr),s="4i";break}n(c,".uniform",s,"(",m,",",Mn(y)?Array.prototype.slice.call(y):y,");")}continue}f=v.append(t,n)}else{if(!o(Us))continue;f=n.def(u.uniforms,"[",e.id(p),"]")}d===hs?(it(!Array.isArray(f),"must specify a scalar prop for textures"),n("if(",f,"&&",f,'._reglType==="framebuffer"){',f,"=",f,".color[0];","}")):d===ps&&(it(!Array.isArray(f),"must specify a scalar prop for cube maps"),n("if(",f,"&&",f,'._reglType==="framebufferCube"){',f,"=",f,".color[0];","}")),it.optional((function(){function e(e,r){t.assert(n,e,'bad data or missing for uniform "'+p+'".  '+r)}function r(t){it(!Array.isArray(f),"must not specify an array type for uniform"),e("typeof "+f+'==="'+t+'"',"invalid type, expected "+t)}function i(n,r){Array.isArray(f)?it(f.length===n,"must have length "+n):e(u.isArrayLike+"("+f+")&&"+f+".length==="+n,"invalid vector, should have length "+n,t.commandStr)}function o(n){it(!Array.isArray(f),"must not specify a value type"),e("typeof "+f+'==="function"&&'+f+'._reglType==="texture'+(n===za?"2d":"Cube")+'"',"invalid texture type",t.commandStr)}switch(d){case es:r("number");break;case ns:i(2,"number");break;case rs:i(3,"number");break;case is:i(4,"number");break;case Qa:r("number");break;case $a:i(2,"number");break;case Ja:i(3,"number");break;case ts:i(4,"number");break;case os:r("boolean");break;case as:i(2,"boolean");break;case ss:i(3,"boolean");break;case us:i(4,"boolean");break;case cs:i(4,"number");break;case ls:i(9,"number");break;case fs:i(16,"number");break;case hs:o(za);break;case ps:o(Ua);break}}));var w=1;switch(d){case hs:case ps:var E=n.def(f,"._texture");n(c,".uniform1i(",m,",",E,".bind());"),n.exit(E,".unbind();");continue;case es:case os:s="1i";break;case ns:case as:s="2i",w=2;break;case rs:case ss:s="3i",w=3;break;case is:case us:s="4i",w=4;break;case Qa:s="1f";break;case $a:s="2f",w=2;break;case Ja:s="3f",w=3;break;case ts:s="4f",w=4;break;case cs:s="Matrix2fv";break;case ls:s="Matrix3fv";break;case fs:s="Matrix4fv";break}if("M"===s.charAt(0)){n(c,".uniform",s,"(",m,",");var S=Math.pow(d-cs+2,2),O=t.global.def("new Float32Array(",S,")");Array.isArray(f)?n("false,(",kt(S,(function(t){return O+"["+t+"]="+f[t]})),",",O,")"):n("false,(Array.isArray(",f,")||",f," instanceof Float32Array)?",f,":(",kt(S,(function(t){return O+"["+t+"]="+f+"["+t+"]"})),",",O,")"),n(");")}else if(w>1){for(var C=[],T=[],A=0;A<w;++A)Array.isArray(f)?T.push(f[A]):T.push(n.def(f+"["+A+"]")),a&&C.push(n.def());a&&n("if(!",t.batchId,"||",C.map((function(t,e){return t+"!=="+T[e]})).join("||"),"){",C.map((function(t,e){return t+"="+T[e]+";"})).join("")),n(c,".uniform",s,"(",m,",",T.join(","),");"),a&&n("}")}else{if(it(!Array.isArray(f),"uniform value must not be an array"),a){var k=n.def();n("if(!",t.batchId,"||",k,"!==",f,"){",k,"=",f,";")}n(c,".uniform",s,"(",m,",",f,");"),a&&n("}")}}}function $(t,e,n,r){var i=t.shared,o=i.gl,a=i.draw,s=r.draw;function u(){var u,c=s.elements,l=e;return c?((c.contextDep&&r.contextDynamic||c.propDep)&&(l=n),u=c.append(t,l),s.elementsActive&&l("if("+u+")"+o+".bindBuffer("+Da+","+u+".buffer.buffer);")):(u=l.def(),l(u,"=",a,".",ba,";","if(",u,"){",o,".bindBuffer(",Da,",",u,".buffer.buffer);}","else if(",i.vao,".currentVAO){",u,"=",t.shared.elements+".getElements("+i.vao,".currentVAO.elements);",b?"":"if("+u+")"+o+".bindBuffer("+Da+","+u+".buffer.buffer);","}")),u}function c(){var i,o=s.count,u=e;return o?((o.contextDep&&r.contextDynamic||o.propDep)&&(u=n),i=o.append(t,u),it.optional((function(){o.MISSING&&t.assert(e,"false","missing vertex count"),o.DYNAMIC&&t.assert(u,i+">=0","missing vertex count")}))):(i=u.def(a,".",wa),it.optional((function(){t.assert(u,i+">=0","missing vertex count")}))),i}var l=u();function f(i){var o=s[i];return o?o.contextDep&&r.contextDynamic||o.propDep?o.append(t,n):o.append(t,e):e.def(a,".",i)}var h,p,d=f(xa),v=f(Ea),g=c();if("number"===typeof g){if(0===g)return}else n("if(",g,"){"),n.exit("}");y&&(h=f(Sa),p=t.instancing);var m=l+".type",_=s.elements&&Fs(s.elements)&&!s.vaoActive;function x(){function t(){n(p,".drawElementsInstancedANGLE(",[d,g,m,v+"<<(("+m+"-"+jo+")>>1)",h],");")}function e(){n(p,".drawArraysInstancedANGLE(",[d,v,g,h],");")}l&&"null"!==l?_?t():(n("if(",l,"){"),t(),n("}else{"),e(),n("}")):e()}function w(){function t(){n(o+".drawElements("+[d,g,m,v+"<<(("+m+"-"+jo+")>>1)"]+");")}function e(){n(o+".drawArrays("+[d,v,g]+");")}l&&"null"!==l?_?t():(n("if(",l,"){"),t(),n("}else{"),e(),n("}")):e()}y&&("number"!==typeof h||h>=0)?"string"===typeof h?(n("if(",h,">0){"),x(),n("}else if(",h,"<0){"),w(),n("}")):x():w()}function J(t,e,n,r,i){var o=R(),a=o.proc("body",i);return it.optional((function(){o.commandStr=e.commandStr,o.command=o.link(e.commandStr)})),y&&(o.instancing=a.def(o.shared.extensions,".angle_instanced_arrays")),t(o,a,n,r),o.compile().body}function tt(t,e,n,r){X(t,e),n.useVAO?n.drawVAO?e(t.shared.vao,".setVAO(",n.drawVAO.append(t,e),");"):e(t.shared.vao,".setVAO(",t.shared.vao,".targetVAO);"):(e(t.shared.vao,".setVAO(null);"),K(t,e,n,r.attributes,(function(){return!0}))),Q(t,e,n,r.uniforms,(function(){return!0}),!1),$(t,e,e,n)}function et(t,e){var n=t.proc("draw",1);X(t,n),G(t,n,e.context),W(t,n,e.framebuffer),Z(t,n,e),Y(t,n,e.state),q(t,n,e,!1,!0);var r=e.shader.progVar.append(t,n);if(n(t.shared.gl,".useProgram(",r,".program);"),e.shader.program)tt(t,n,e,e.shader.program);else{n(t.shared.vao,".setVAO(null);");var i=t.global.def("{}"),o=n.def(r,".id"),a=n.def(i,"[",o,"]");n(t.cond(a).then(a,".call(this,a0);")["else"](a,"=",i,"[",o,"]=",t.link((function(n){return J(tt,t,e,n,1)})),"(",r,");",a,".call(this,a0);"))}Object.keys(e.state).length>0&&n(t.shared.current,".dirty=true;"),t.shared.vao&&n(t.shared.vao,".setVAO(null);")}function nt(t,e,n,r){function i(){return!0}t.batchId="a1",X(t,e),K(t,e,n,r.attributes,i),Q(t,e,n,r.uniforms,i,!1),$(t,e,e,n)}function rt(t,e,n,r){X(t,e);var i=n.contextDep,o=e.def(),a="a0",s="a1",u=e.def();t.shared.props=u,t.batchId=o;var c=t.scope(),l=t.scope();function f(t){return t.contextDep&&i||t.propDep}function h(t){return!f(t)}if(e(c.entry,"for(",o,"=0;",o,"<",s,";++",o,"){",u,"=",a,"[",o,"];",l,"}",c.exit),n.needsContext&&G(t,l,n.context),n.needsFramebuffer&&W(t,l,n.framebuffer),Y(t,l,n.state,f),n.profile&&f(n.profile)&&q(t,l,n,!1,!0),r)n.useVAO?n.drawVAO?f(n.drawVAO)?l(t.shared.vao,".setVAO(",n.drawVAO.append(t,l),");"):c(t.shared.vao,".setVAO(",n.drawVAO.append(t,c),");"):c(t.shared.vao,".setVAO(",t.shared.vao,".targetVAO);"):(c(t.shared.vao,".setVAO(null);"),K(t,c,n,r.attributes,h),K(t,l,n,r.attributes,f)),Q(t,c,n,r.uniforms,h,!1),Q(t,l,n,r.uniforms,f,!0),$(t,c,l,n);else{var p=t.global.def("{}"),d=n.shader.progVar.append(t,l),v=l.def(d,".id"),g=l.def(p,"[",v,"]");l(t.shared.gl,".useProgram(",d,".program);","if(!",g,"){",g,"=",p,"[",v,"]=",t.link((function(e){return J(nt,t,n,e,2)})),"(",d,");}",g,".call(this,a0[",o,"],",o,");")}}function ot(t,e){var n=t.proc("batch",2);t.batchId="0",X(t,n);var r=!1,i=!0;Object.keys(e.context).forEach((function(t){r=r||e.context[t].propDep})),r||(G(t,n,e.context),i=!1);var o=e.framebuffer,a=!1;function s(t){return t.contextDep&&r||t.propDep}o?(o.propDep?r=a=!0:o.contextDep&&r&&(a=!0),a||W(t,n,o)):W(t,n,null),e.state.viewport&&e.state.viewport.propDep&&(r=!0),Z(t,n,e),Y(t,n,e.state,(function(t){return!s(t)})),e.profile&&s(e.profile)||q(t,n,e,!1,"a1"),e.contextDep=r,e.needsContext=i,e.needsFramebuffer=a;var u=e.shader.progVar;if(u.contextDep&&r||u.propDep)rt(t,n,e,null);else{var c=u.append(t,n);if(n(t.shared.gl,".useProgram(",c,".program);"),e.shader.program)rt(t,n,e,e.shader.program);else{n(t.shared.vao,".setVAO(null);");var l=t.global.def("{}"),f=n.def(c,".id"),h=n.def(l,"[",f,"]");n(t.cond(h).then(h,".call(this,a0,a1);")["else"](h,"=",l,"[",f,"]=",t.link((function(n){return J(rt,t,e,n,2)})),"(",c,");",h,".call(this,a0,a1);"))}}Object.keys(e.state).length>0&&n(t.shared.current,".dirty=true;"),t.shared.vao&&n(t.shared.vao,".setVAO(null);")}function at(t,n){var r=t.proc("scope",3);t.batchId="a2";var i=t.shared,o=i.current;function a(e){var o=n.shader[e];o&&r.set(i.shader,"."+e,o.append(t,r))}G(t,r,n.context),n.framebuffer&&n.framebuffer.append(t,r),Ns(Object.keys(n.state)).forEach((function(e){var o=n.state[e],a=o.append(t,r);Mn(a)?a.forEach((function(n,i){r.set(t.next[e],"["+i+"]",n)})):r.set(i.next,"."+e,a)})),q(t,r,n,!0,!0),[ba,Ea,wa,Sa,xa].forEach((function(e){var o=n.draw[e];o&&r.set(i.draw,"."+e,""+o.append(t,r))})),Object.keys(n.uniforms).forEach((function(o){var a=n.uniforms[o].append(t,r);Array.isArray(a)&&(a="["+a.join()+"]"),r.set(i.uniforms,"["+e.id(o)+"]",a)})),Object.keys(n.attributes).forEach((function(e){var i=n.attributes[e].append(t,r),o=t.scopeAttrib(e);Object.keys(new g).forEach((function(t){r.set(o,"."+t,i[t])}))})),n.scopeVAO&&r.set(i.vao,".targetVAO",n.scopeVAO.append(t,r)),a(ya),a(_a),Object.keys(n.state).length>0&&(r(o,".dirty=true;"),r.exit(o,".dirty=true;")),r("a1(",t.shared.context,",a0,",t.batchId,");")}function st(t){if("object"===typeof t&&!Mn(t)){for(var e=Object.keys(t),n=0;n<e.length;++n)if(gt.isDynamic(t[e[n]]))return!0;return!1}}function ut(t,e,n){var r=e["static"][n];if(r&&st(r)){var i=t.global,o=Object.keys(r),a=!1,s=!1,u=!1,c=t.global.def("{}");o.forEach((function(e){var n=r[e];if(gt.isDynamic(n)){"function"===typeof n&&(n=r[e]=gt.unbox(n));var o=zs(n,null);a=a||o.thisDep,u=u||o.propDep,s=s||o.contextDep}else{switch(i(c,".",e,"="),typeof n){case"number":i(n);break;case"string":i('"',n,'"');break;case"object":Array.isArray(n)&&i("[",n.join(),"]");break;default:i(t.link(n));break}i(";")}})),e.dynamic[n]=new gt.DynamicVariable(zo,{thisDep:a,contextDep:s,propDep:u,ref:c,append:l}),delete e["static"][n]}function l(t,e){o.forEach((function(n){var i=r[n];if(gt.isDynamic(i)){var o=t.invoke(e,i);e(c,".",n,"=",o,";")}}))}}function ct(t,e,r,i,o){var a=R();a.stats=a.link(o),Object.keys(e["static"]).forEach((function(t){ut(a,e,t)})),La.forEach((function(e){ut(a,t,e)}));var s=H(t,e,r,i,a);return et(a,s),at(a,s),ot(a,s),n(a.compile(),{destroy:function(){s.shader.program.destroy()}})}return{next:w,current:x,procs:function(){var t=R(),e=t.proc("poll"),n=t.proc("refresh"),o=t.block();e(o),n(o);var a,s=t.shared,u=s.gl,c=s.next,l=s.current;o(l,".dirty=false;"),W(t,e),W(t,n,null,!0),y&&(a=t.link(y)),r.oes_vertex_array_object&&n(t.link(r.oes_vertex_array_object),".bindVertexArrayOES(null);");for(var f=0;f<i.maxAttributes;++f){var h=n.def(s.attributes,"[",f,"]"),p=t.cond(h,".buffer");p.then(u,".enableVertexAttribArray(",f,");",u,".bindBuffer(",Na,",",h,".buffer.buffer);",u,".vertexAttribPointer(",f,",",h,".size,",h,".type,",h,".normalized,",h,".stride,",h,".offset);")["else"](u,".disableVertexAttribArray(",f,");",u,".vertexAttrib4f(",f,",",h,".x,",h,".y,",h,".z,",h,".w);",h,".buffer=null;"),n(p),y&&n(a,".vertexAttribDivisorANGLE(",f,",",h,".divisor);")}return n(t.shared.vao,".currentVAO=null;",t.shared.vao,".setVAO(",t.shared.vao,".targetVAO);"),Object.keys(S).forEach((function(r){var i=S[r],a=o.def(c,".",r),s=t.block();s("if(",a,"){",u,".enable(",i,")}else{",u,".disable(",i,")}",l,".",r,"=",a,";"),n(s),e("if(",a,"!==",l,".",r,"){",s,"}")})),Object.keys(O).forEach((function(r){var i,a,s=O[r],f=x[r],h=t.block();if(h(u,".",s,"("),Mn(f)){var p=f.length;i=t.global.def(c,".",r),a=t.global.def(l,".",r),h(kt(p,(function(t){return i+"["+t+"]"})),");",kt(p,(function(t){return a+"["+t+"]="+i+"["+t+"];"})).join("")),e("if(",kt(p,(function(t){return i+"["+t+"]!=="+a+"["+t+"]"})).join("||"),"){",h,"}")}else i=o.def(c,".",r),a=o.def(l,".",r),h(i,");",l,".",r,"=",i,";"),e("if(",i,"!==",a,"){",h,"}");n(h)})),t.compile()}(),compile:ct}}function Hs(){return{vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0}}var Gs=34918,Ws=34919,Zs=35007,Ys=function(t,e){if(!e.ext_disjoint_timer_query)return null;var n=[];function r(){return n.pop()||e.ext_disjoint_timer_query.createQueryEXT()}function i(t){n.push(t)}var o=[];function a(t){var n=r();e.ext_disjoint_timer_query.beginQueryEXT(Zs,n),o.push(n),p(o.length-1,o.length,t)}function s(){e.ext_disjoint_timer_query.endQueryEXT(Zs)}function u(){this.startQueryIndex=-1,this.endQueryIndex=-1,this.sum=0,this.stats=null}var c=[];function l(){return c.pop()||new u}function f(t){c.push(t)}var h=[];function p(t,e,n){var r=l();r.startQueryIndex=t,r.endQueryIndex=e,r.sum=0,r.stats=n,h.push(r)}var d=[],v=[];function g(){var t,n,r=o.length;if(0!==r){v.length=Math.max(v.length,r+1),d.length=Math.max(d.length,r+1),d[0]=0,v[0]=0;var a=0;for(t=0,n=0;n<o.length;++n){var s=o[n];e.ext_disjoint_timer_query.getQueryObjectEXT(s,Ws)?(a+=e.ext_disjoint_timer_query.getQueryObjectEXT(s,Gs),i(s)):o[t++]=s,d[n+1]=a,v[n+1]=t}for(o.length=t,t=0,n=0;n<h.length;++n){var u=h[n],c=u.startQueryIndex,l=u.endQueryIndex;u.sum+=d[l]-d[c];var p=v[c],g=v[l];g===p?(u.stats.gpuTime+=u.sum/1e6,f(u)):(u.startQueryIndex=p,u.endQueryIndex=g,h[t++]=u)}h.length=t}}return{beginQuery:a,endQuery:s,pushScopeStats:p,update:g,getNumPendingQueries:function(){return o.length},clear:function(){n.push.apply(n,o);for(var t=0;t<n.length;t++)e.ext_disjoint_timer_query.deleteQueryEXT(n[t]);o.length=0,n.length=0},restore:function(){o.length=0,n.length=0}}},Xs=16384,qs=256,Ks=1024,Qs=34962,$s="webglcontextlost",Js="webglcontextrestored",tu=1,eu=2,nu=3;function ru(t,e){for(var n=0;n<t.length;++n)if(t[n]===e)return n;return-1}function iu(t){var e=Tt(t);if(!e)return null;var r=e.gl,i=r.getContextAttributes(),o=r.isContextLost(),a=At(r,e);if(!a)return null;var s=bt(),u=Hs(),c=a.extensions,l=Ys(r,c),f=_t(),h=r.drawingBufferWidth,p=r.drawingBufferHeight,d={tick:0,time:0,viewportWidth:h,viewportHeight:p,framebufferWidth:h,framebufferHeight:p,drawingBufferWidth:h,drawingBufferHeight:p,pixelRatio:e.pixelRatio},v={},g={elements:null,primitive:4,count:-1,offset:0,instances:-1},m=Oe(r,c),y=on(r,u,e,x),_=On(r,c,y,u),b=yo(r,c,m,u,y,_,g);function x(t){return b.destroyBuffer(t)}var w=Eo(r,s,u,e),E=gi(r,c,m,(function(){C.procs.poll()}),d,u,e),S=Mi(r,c,m,u,e),O=fo(r,c,m,E,S,u),C=Vs(r,s,c,m,y,_,E,O,v,b,w,g,d,l,e),T=Ao(r,O,C.procs.poll,d,i,c,m),A=C.next,k=r.canvas,M=[],P=[],R=[],j=[e.onDestroy],I=null;function L(){if(0===M.length)return l&&l.update(),void(I=null);I=mt.next(L),X();for(var t=M.length-1;t>=0;--t){var e=M[t];e&&e(d,null,0)}r.flush(),l&&l.update()}function N(){!I&&M.length>0&&(I=mt.next(L))}function D(){I&&(mt.cancel(L),I=null)}function F(t){t.preventDefault(),o=!0,D(),P.forEach((function(t){t()}))}function B(t){r.getError(),o=!1,a.restore(),w.restore(),y.restore(),E.restore(),S.restore(),O.restore(),b.restore(),l&&l.restore(),C.procs.refresh(),N(),R.forEach((function(t){t()}))}var z="undefined"!==typeof my&&!!my&&"function"===typeof my.showToast&&!0!==my.isFRM;function U(){M.length=0,D(),!z&&k&&(k.removeEventListener($s,F),k.removeEventListener(Js,B)),w.clear(),O.clear(),S.clear(),b.clear(),E.clear(),_.clear(),y.clear(),l&&l.clear(),j.forEach((function(t){t()}))}function V(t){function e(t){var e=n({},t);function r(t){if(t in e){var n=e[t];delete e[t],Object.keys(n).forEach((function(r){e[t+"."+r]=n[r]}))}}return delete e.uniforms,delete e.attributes,delete e.context,delete e.vao,"stencil"in e&&e.stencil.op&&(e.stencil.opBack=e.stencil.opFront=e.stencil.op,delete e.stencil.op),r("blend"),r("depth"),r("cull"),r("stencil"),r("polygonOffset"),r("scissor"),r("sample"),"vao"in t&&(e.vao=t.vao),e}function r(t,e){var n={},r={};return Object.keys(t).forEach((function(i){var o=t[i];if(gt.isDynamic(o))r[i]=gt.unbox(o,i);else{if(e&&Array.isArray(o))for(var a=0;a<o.length;++a)if(gt.isDynamic(o[a]))return void(r[i]=gt.unbox(o,i));n[i]=o}})),{dynamic:r,static:n}}it(!!t,"invalid args to regl({...})"),it.type(t,"object","invalid args to regl({...})");var i=r(t.context||{},!0),a=r(t.uniforms||{},!0),s=r(t.attributes||{},!1),u=r(e(t),!1),c={gpuTime:0,cpuTime:0,count:0},l=C.compile(u,s,a,i,c),f=l.draw,h=l.batch,p=l.scope,d=[];function v(t){while(d.length<t)d.push(null);return d}function g(t,e){var n;if(o&&it.raise("context lost"),"function"===typeof t)return p.call(this,null,t,0);if("function"===typeof e)if("number"===typeof t)for(n=0;n<t;++n)p.call(this,null,e,n);else{if(!Array.isArray(t))return p.call(this,t,e,0);for(n=0;n<t.length;++n)p.call(this,t[n],e,n)}else if("number"===typeof t){if(t>0)return h.call(this,v(0|t),0|t)}else{if(!Array.isArray(t))return f.call(this,t);if(t.length)return h.call(this,t,t.length)}}return n(g,{stats:c,destroy:function(){l.destroy()}})}!z&&k&&(k.addEventListener($s,F,!1),k.addEventListener(Js,B,!1));var H=O.setFBO=V({framebuffer:gt.define.call(null,tu,"framebuffer")});function G(t,e){var n=0;C.procs.poll();var i=e.color;i&&(r.clearColor(+i[0]||0,+i[1]||0,+i[2]||0,+i[3]||0),n|=Xs),"depth"in e&&(r.clearDepth(+e.depth),n|=qs),"stencil"in e&&(r.clearStencil(0|e.stencil),n|=Ks),it(!!n,"called regl.clear with no buffer specified"),r.clear(n)}function W(t){if(it("object"===typeof t&&t,"regl.clear() takes an object as input"),"framebuffer"in t)if(t.framebuffer&&"framebufferCube"===t.framebuffer_reglType)for(var e=0;e<6;++e)H(n({framebuffer:t.framebuffer.faces[e]},t),G);else H(t,G);else G(null,t)}function Z(t){function e(){var e=ru(M,t);function n(){var t=ru(M,n);M[t]=M[M.length-1],M.length-=1,M.length<=0&&D()}it(e>=0,"cannot cancel a frame twice"),M[e]=n}return it.type(t,"function","regl.frame() callback must be a function"),M.push(t),N(),{cancel:e}}function Y(){var t=A.viewport,e=A.scissor_box;t[0]=t[1]=e[0]=e[1]=0,d.viewportWidth=d.framebufferWidth=d.drawingBufferWidth=t[2]=e[2]=r.drawingBufferWidth,d.viewportHeight=d.framebufferHeight=d.drawingBufferHeight=t[3]=e[3]=r.drawingBufferHeight}function X(){d.tick+=1,d.time=K(),Y(),C.procs.poll()}function q(){E.refresh(),Y(),C.procs.refresh(),l&&l.update()}function K(){return(_t()-f)/1e3}function Q(t,e){var n;switch(it.type(e,"function","listener callback must be a function"),t){case"frame":return Z(e);case"lost":n=P;break;case"restore":n=R;break;case"destroy":n=j;break;default:it.raise("invalid event, must be one of frame,lost,restore,destroy")}return n.push(e),{cancel:function(){for(var t=0;t<n.length;++t)if(n[t]===e)return n[t]=n[n.length-1],void n.pop()}}}q();var $=n(V,{clear:W,prop:gt.define.bind(null,tu),context:gt.define.bind(null,eu),this:gt.define.bind(null,nu),draw:V({}),buffer:function(t){return y.create(t,Qs,!1,!1)},elements:function(t){return _.create(t,!1)},texture:E.create2D,cube:E.createCube,renderbuffer:S.create,framebuffer:O.create,framebufferCube:O.createCube,vao:b.createVAO,attributes:i,frame:Z,on:Q,limits:m,hasExtension:function(t){return m.extensions.indexOf(t.toLowerCase())>=0},read:T,destroy:U,_gl:r,_refresh:q,poll:function(){X(),l&&l.update()},now:K,stats:u});return e.onDone(null,$),$}return iu}))},SYor:function(t,e,n){"use strict";var r=n("I+eb"),i=n("WKiH").trim,o=n("yNLB");r({target:"String",proto:!0,forced:o("trim")},{trim:function(){return i(this)}})},SfRM:function(t,e,n){var r=n("YESw");function i(){this.__data__=r?r(null):{},this.size=0}t.exports=i},Si40:function(t,e,n){"use strict";var r=n("I+eb"),i=n("xDBR"),o=n("0GbY"),a=n("glrk"),s=n("HAuM"),u=n("SEBh"),c=n("ImZN");r({target:"Set",proto:!0,real:!0,forced:i},{symmetricDifference:function(t){var e=a(this),n=new(u(e,o("Set")))(e),r=s(n["delete"]),i=s(n.add);return c(t,(function(t){r.call(n,t)||i.call(n,t)})),n}})},Sk89:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.postConstruct=void 0;var r=n("MON2"),i=n("xfSm"),o=n("GXnB");function a(){return function(t,e,n){var a=new o.Metadata(i.POST_CONSTRUCT,e);if(Reflect.hasOwnMetadata(i.POST_CONSTRUCT,t.constructor))throw new Error(r.MULTIPLE_POST_CONSTRUCT_METHODS);Reflect.defineMetadata(i.POST_CONSTRUCT,a,t.constructor)}}e.postConstruct=a},SpvK:function(t,e,n){var r=n("dOgj");r("Float64",(function(t){return function(e,n,r){return t(this,e,n,r)}}))},Sssf:function(t,e,n){var r=n("xDBR"),i=n("mh/w");t.exports=r?i:function(t){return Map.prototype.entries.call(t)}},SuFq:function(t,e,n){var r=n("I+eb"),i=n("0GbY"),o=n("HAuM"),a=n("glrk"),s=n("hh1v"),u=n("fHMY"),c=n("BTho"),l=n("0Dky"),f=i("Reflect","construct"),h=l((function(){function t(){}return!(f((function(){}),[],t)instanceof t)})),p=!l((function(){f((function(){}))})),d=h||p;r({target:"Reflect",stat:!0,forced:d,sham:d},{construct:function(t,e){o(t),a(e);var n=arguments.length<3?t:o(arguments[2]);if(p&&!h)return f(t,e,n);if(t==n){switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3])}var r=[null];return r.push.apply(r,e),new(c.apply(t,r))}var i=n.prototype,l=u(s(i)?i:Object.prototype),d=Function.apply.call(t,l,e);return s(d)?d:l}})},T1AV:function(t,e,n){var r=n("t2Dn"),i=n("5Tg0"),o=n("yP5f"),a=n("Q1l4"),s=n("+iFO"),u=n("03A+"),c=n("Z0cm"),l=n("3L66"),f=n("DSRE"),h=n("lSCD"),p=n("GoyQ"),d=n("YO3V"),v=n("c6wG"),g=n("itsj"),m=n("jeLo");function y(t,e,n,y,_,b,x){var w=g(t,n),E=g(e,n),S=x.get(E);if(S)r(t,n,S);else{var O=b?b(w,E,n+"",t,e,x):void 0,C=void 0===O;if(C){var T=c(E),A=!T&&f(E),k=!T&&!A&&v(E);O=E,T||A||k?c(w)?O=w:l(w)?O=a(w):A?(C=!1,O=i(E,!0)):k?(C=!1,O=o(E,!0)):O=[]:d(E)||u(E)?(O=w,u(w)?O=m(w):p(w)&&!h(w)||(O=s(E))):C=!1}C&&(x.set(E,O),_(O,E,y,b,x),x["delete"](E)),r(t,n,O)}}t.exports=y},T63A:function(t,e,n){var r=n("I+eb"),i=n("b1O7").entries;r({target:"Object",stat:!0},{entries:function(t){return i(t)}})},TIQr:function(t,e,n){"use strict";t.exports=i,t.exports["default"]=i;var r=1e20;function i(t,e,n,r,i,o){this.fontSize=t||24,this.buffer=void 0===e?3:e,this.cutoff=r||.25,this.fontFamily=i||"sans-serif",this.fontWeight=o||"normal",this.radius=n||8;var a=this.size=this.fontSize+2*this.buffer,s=a+2*this.buffer,u="undefined"!==typeof my&&!!my&&"function"===typeof my.showToast&&!0!==my.isFRM;u?this.canvas=my.createOffscreenCanvas(a,a,"2d"):(this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=a),this.ctx=this.canvas.getContext("2d",{willReadFrequently:!0}),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textAlign="left",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(s*s),this.gridInner=new Float64Array(s*s),this.f=new Float64Array(s),this.z=new Float64Array(s+1),this.v=new Uint16Array(s),this.useMetrics=void 0!==this.ctx.measureText("A").actualBoundingBoxLeft,this.middle=u?Math.round(a/2*1):Math.round(a/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function o(t,e,n,i,o,a,s){a.fill(r,0,e*n),s.fill(0,0,e*n);for(var u=(e-i)/2,c=0;c<o;c++)for(var l=0;l<i;l++){var f=(c+u)*e+l+u,h=t.data[4*(c*i+l)+3]/255;if(1===h)a[f]=0,s[f]=r;else if(0===h)a[f]=r,s[f]=0;else{var p=Math.max(0,.5-h),d=Math.max(0,h-.5);a[f]=p*p,s[f]=d*d}}}function a(t,e,n,r,i,o,a){for(var s=0;s<e*n;s++){var u=Math.sqrt(r[s])-Math.sqrt(i[s]);t[s]=Math.round(255-255*(u/o+a))}}function s(t,e,n,r,i,o){for(var a=0;a<e;a++)u(t,a,e,n,r,i,o);for(var s=0;s<n;s++)u(t,s*e,1,e,r,i,o)}function u(t,e,n,i,o,a,s){var u,c,l,f;for(a[0]=0,s[0]=-r,s[1]=r,u=0;u<i;u++)o[u]=t[e+u*n];for(u=1,c=0,l=0;u<i;u++){do{f=a[c],l=(o[u]-o[f]+u*u-f*f)/(u-f)/2}while(l<=s[c]&&--c>-1);c++,a[c]=u,s[c]=l,s[c+1]=r}for(u=0,c=0;u<i;u++){while(s[c+1]<u)c++;f=a[c],t[e+u*n]=o[f]+(u-f)*(u-f)}}i.prototype._draw=function(t,e){var n,r,i,u,c,l,f,h,p,d=this.ctx.measureText(t),v=d.width,g=2*this.buffer;e&&this.useMetrics?(c=Math.floor(d.actualBoundingBoxAscent),h=this.buffer+Math.ceil(d.actualBoundingBoxAscent),l=this.buffer,f=this.buffer,r=Math.min(this.size,Math.ceil(d.actualBoundingBoxRight-d.actualBoundingBoxLeft)),u=Math.min(this.size-l,Math.ceil(d.actualBoundingBoxAscent+d.actualBoundingBoxDescent)),n=r+g,i=u+g,this.ctx.textBaseline="alphabetic"):(n=r=this.size,i=u=this.size,c=19*this.fontSize/24,l=f=0,h=this.middle,this.ctx.textBaseline="middle"),r&&u&&(this.ctx.clearRect(f,l,r,u),this.ctx.fillText(t,this.buffer,h),p=this.ctx.getImageData(f,l,r,u));var m=new Uint8ClampedArray(n*i);return o(p,n,i,r,u,this.gridOuter,this.gridInner),s(this.gridOuter,n,i,this.f,this.v,this.z),s(this.gridInner,n,i,this.f,this.v,this.z),a(m,n,i,this.gridOuter,this.gridInner,this.radius,this.cutoff),{data:m,metrics:{width:r,height:u,sdfWidth:n,sdfHeight:i,top:c,left:0,advance:v}}},i.prototype.draw=function(t){return this._draw(t,!1).data},i.prototype.drawWithMetrics=function(t){return this._draw(t,!0)}},TJ79:function(t,e,n){var r=n("I+eb"),i=n("P940");r({target:"WeakMap",stat:!0},{of:i})},TNol:function(t,e,n){"use strict";n.d(e,"b",(function(){return a}));var r=n("q1tI"),i=n("MNnm"),o=Object(i["a"])()?r["useLayoutEffect"]:r["useEffect"];e["a"]=o;var a=function(t,e){var n=r["useRef"](!0);o((function(){if(!n.current)return t()}),e),o((function(){return n.current=!1,function(){n.current=!0}}),[])}},TOwV:function(t,e,n){"use strict";t.exports=n("qT12")},TSYQ:function(t,e,n){var r,i;(function(){"use strict";var n={}.hasOwnProperty;function o(){for(var t=[],e=0;e<arguments.length;e++){var r=arguments[e];if(r){var i=typeof r;if("string"===i||"number"===i)t.push(r);else if(Array.isArray(r)){if(r.length){var a=o.apply(null,r);a&&t.push(a)}}else if("object"===i){if(r.toString!==Object.prototype.toString&&!r.toString.toString().includes("[native code]")){t.push(r.toString());continue}for(var s in r)n.call(r,s)&&r[s]&&t.push(s)}}}return t.join(" ")}t.exports?(o["default"]=o,t.exports=o):(r=[],i=function(){return o}.apply(e,r),void 0===i||(t.exports=i))})()},TWNs:function(t,e,n){var r=n("g6v/"),i=n("2oRo"),o=n("lMq5"),a=n("cVYH"),s=n("m/L8").f,u=n("JBy8").f,c=n("ROdP"),l=n("rW0t"),f=n("n3/R"),h=n("busE"),p=n("0Dky"),d=n("afO8").set,v=n("JiZb"),g=n("tiKp"),m=g("match"),y=i.RegExp,_=y.prototype,b=/a/g,x=/a/g,w=new y(b)!==b,E=f.UNSUPPORTED_Y,S=r&&o("RegExp",!w||E||p((function(){return x[m]=!1,y(b)!=b||y(x)==x||"/a/i"!=y(b,"i")})));if(S){var O=function(t,e){var n,r=this instanceof O,i=c(t),o=void 0===e;if(!r&&i&&t.constructor===O&&o)return t;w?i&&!o&&(t=t.source):t instanceof O&&(o&&(e=l.call(t)),t=t.source),E&&(n=!!e&&e.indexOf("y")>-1,n&&(e=e.replace(/y/g,"")));var s=a(w?new y(t,e):y(t,e),r?this:_,O);return E&&n&&d(s,{sticky:n}),s},C=function(t){t in O||s(O,t,{configurable:!0,get:function(){return y[t]},set:function(e){y[t]=e}})},T=u(y),A=0;while(T.length>A)C(T[A++]);_.constructor=O,O.prototype=_,h(i,"RegExp",O)}v("RegExp")},TWQb:function(t,e,n){var r=n("/GqU"),i=n("UMSQ"),o=n("I8vh"),a=function(t){return function(e,n,a){var s,u=r(e),c=i(u.length),l=o(a,c);if(t&&n!=n){while(c>l)if(s=u[l++],s!=s)return!0}else for(;c>l;l++)if((t||l in u)&&u[l]===n)return t||l||0;return!t&&-1}};t.exports={includes:a(!0),indexOf:a(!1)}},TZCg:function(t,e,n){"use strict";var r=n("I+eb"),i=n("DMt2").start,o=n("mgyK");r({target:"String",proto:!0,forced:o},{padStart:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}})},TeQF:function(t,e,n){"use strict";var r=n("I+eb"),i=n("tycR").filter,o=n("Hd5f"),a=n("rkAj"),s=o("filter"),u=a("filter");r({target:"Array",proto:!0,forced:!s||!u},{filter:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}})},TfTi:function(t,e,n){"use strict";var r=n("A2ZE"),i=n("ewvW"),o=n("m92n"),a=n("6VoE"),s=n("UMSQ"),u=n("hBjN"),c=n("NaFW");t.exports=function(t){var e,n,l,f,h,p,d=i(t),v="function"==typeof this?this:Array,g=arguments.length,m=g>1?arguments[1]:void 0,y=void 0!==m,_=c(d),b=0;if(y&&(m=r(m,g>2?arguments[2]:void 0,2)),void 0==_||v==Array&&a(_))for(e=s(d.length),n=new v(e);e>b;b++)p=y?m(d[b],b):d[b],u(n,b,p);else for(f=_.call(d),h=f.next,n=new v;!(l=h.call(f)).done;b++)p=y?o(f,m,[l.value,b],!0):l.value,u(n,b,p);return n.length=b,n}},Thag:function(t,e,n){"use strict";var r=n("I+eb"),i=n("xDBR"),o=n("glrk"),a=n("A2ZE"),s=n("Sssf"),u=n("ImZN");r({target:"Map",proto:!0,real:!0,forced:i},{some:function(t){var e=o(this),n=s(e),r=a(t,arguments.length>1?arguments[1]:void 0,3);return u(n,(function(t,n){if(r(n,t,e))return u.stop()}),void 0,!0,!0).stopped}})},ToJy:function(t,e,n){"use strict";var r=n("I+eb"),i=n("HAuM"),o=n("ewvW"),a=n("0Dky"),s=n("pkCn"),u=[],c=u.sort,l=a((function(){u.sort(void 0)})),f=a((function(){u.sort(null)})),h=s("sort"),p=l||!f||!h;r({target:"Array",proto:!0,forced:p},{sort:function(t){return void 0===t?c.call(o(this)):c.call(o(this),i(t))}})},Tskq:function(t,e,n){"use strict";var r=n("bWFh"),i=n("ZWaQ");t.exports=r("Map",(function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}}),i)},Ty5D:function(t,e,n){"use strict";n.d(e,"a",(function(){return b})),n.d(e,"b",(function(){return w})),n.d(e,"c",(function(){return A})),n.d(e,"d",(function(){return I})),n.d(e,"e",(function(){return _})),n.d(e,"f",(function(){return U})),n.d(e,"g",(function(){return V})),n.d(e,"h",(function(){return y})),n.d(e,"i",(function(){return j})),n.d(e,"j",(function(){return W})),n.d(e,"k",(function(){return Z})),n.d(e,"l",(function(){return Y})),n.d(e,"m",(function(){return X})),n.d(e,"n",(function(){return H}));var r=n("dI71"),i=n("q1tI"),o=n.n(i),a=n("YS25"),s=n("tEiQ"),u=n("9R94"),c=n("wx14"),l=n("vRGJ"),f=n.n(l),h=(n("TOwV"),n("zLVn")),p=n("2mql"),d=n.n(p),v=function(t){var e=Object(s["a"])();return e.displayName=t,e},g=v("Router-History"),m=function(t){var e=Object(s["a"])();return e.displayName=t,e},y=m("Router"),_=function(t){function e(e){var n;return n=t.call(this,e)||this,n.state={location:e.history.location},n._isMounted=!1,n._pendingLocation=null,e.staticContext||(n.unlisten=e.history.listen((function(t){n._isMounted?n.setState({location:t}):n._pendingLocation=t}))),n}Object(r["a"])(e,t),e.computeRootMatch=function(t){return{path:"/",url:"/",params:{},isExact:"/"===t}};var n=e.prototype;return n.componentDidMount=function(){this._isMounted=!0,this._pendingLocation&&this.setState({location:this._pendingLocation})},n.componentWillUnmount=function(){this.unlisten&&this.unlisten()},n.render=function(){return o.a.createElement(y.Provider,{value:{history:this.props.history,location:this.state.location,match:e.computeRootMatch(this.state.location.pathname),staticContext:this.props.staticContext}},o.a.createElement(g.Provider,{children:this.props.children||null,value:this.props.history}))},e}(o.a.Component);var b=function(t){function e(){for(var e,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return e=t.call.apply(t,[this].concat(r))||this,e.history=Object(a["d"])(e.props),e}Object(r["a"])(e,t);var n=e.prototype;return n.render=function(){return o.a.createElement(_,{history:this.history,children:this.props.children})},e}(o.a.Component);var x=function(t){function e(){return t.apply(this,arguments)||this}Object(r["a"])(e,t);var n=e.prototype;return n.componentDidMount=function(){this.props.onMount&&this.props.onMount.call(this,this)},n.componentDidUpdate=function(t){this.props.onUpdate&&this.props.onUpdate.call(this,this,t)},n.componentWillUnmount=function(){this.props.onUnmount&&this.props.onUnmount.call(this,this)},n.render=function(){return null},e}(o.a.Component);function w(t){var e=t.message,n=t.when,r=void 0===n||n;return o.a.createElement(y.Consumer,null,(function(t){if(t||Object(u["a"])(!1),!r||t.staticContext)return null;var n=t.history.block;return o.a.createElement(x,{onMount:function(t){t.release=n(e)},onUpdate:function(t,r){r.message!==e&&(t.release(),t.release=n(e))},onUnmount:function(t){t.release()},message:e})}))}var E={},S=1e4,O=0;function C(t){if(E[t])return E[t];var e=f.a.compile(t);return O<S&&(E[t]=e,O++),e}function T(t,e){return void 0===t&&(t="/"),void 0===e&&(e={}),"/"===t?t:C(t)(e,{pretty:!0})}function A(t){var e=t.computedMatch,n=t.to,r=t.push,i=void 0!==r&&r;return o.a.createElement(y.Consumer,null,(function(t){t||Object(u["a"])(!1);var r=t.history,s=t.staticContext,l=i?r.push:r.replace,f=Object(a["c"])(e?"string"===typeof n?T(n,e.params):Object(c["a"])({},n,{pathname:T(n.pathname,e.params)}):n);return s?(l(f),null):o.a.createElement(x,{onMount:function(){l(f)},onUpdate:function(t,e){var n=Object(a["c"])(e.to);Object(a["f"])(n,Object(c["a"])({},f,{key:n.key}))||l(f)},to:n})}))}var k={},M=1e4,P=0;function R(t,e){var n=""+e.end+e.strict+e.sensitive,r=k[n]||(k[n]={});if(r[t])return r[t];var i=[],o=f()(t,i,e),a={regexp:o,keys:i};return P<M&&(r[t]=a,P++),a}function j(t,e){void 0===e&&(e={}),("string"===typeof e||Array.isArray(e))&&(e={path:e});var n=e,r=n.path,i=n.exact,o=void 0!==i&&i,a=n.strict,s=void 0!==a&&a,u=n.sensitive,c=void 0!==u&&u,l=[].concat(r);return l.reduce((function(e,n){if(!n&&""!==n)return null;if(e)return e;var r=R(n,{end:o,strict:s,sensitive:c}),i=r.regexp,a=r.keys,u=i.exec(t);if(!u)return null;var l=u[0],f=u.slice(1),h=t===l;return o&&!h?null:{path:n,url:"/"===n&&""===l?"/":l,isExact:h,params:a.reduce((function(t,e,n){return t[e.name]=f[n],t}),{})}}),null)}var I=function(t){function e(){return t.apply(this,arguments)||this}Object(r["a"])(e,t);var n=e.prototype;return n.render=function(){var t=this;return o.a.createElement(y.Consumer,null,(function(e){e||Object(u["a"])(!1);var n=t.props.location||e.location,r=t.props.computedMatch?t.props.computedMatch:t.props.path?j(n.pathname,t.props):e.match,i=Object(c["a"])({},e,{location:n,match:r}),a=t.props,s=a.children,l=a.component,f=a.render;return Array.isArray(s)&&0===s.length&&(s=null),o.a.createElement(y.Provider,{value:i},i.match?s?"function"===typeof s?s(i):s:l?o.a.createElement(l,i):f?f(i):null:"function"===typeof s?s(i):null)}))},e}(o.a.Component);function L(t){return"/"===t.charAt(0)?t:"/"+t}function N(t,e){return t?Object(c["a"])({},e,{pathname:L(t)+e.pathname}):e}function D(t,e){if(!t)return e;var n=L(t);return 0!==e.pathname.indexOf(n)?e:Object(c["a"])({},e,{pathname:e.pathname.substr(n.length)})}function F(t){return"string"===typeof t?t:Object(a["e"])(t)}function B(t){return function(){Object(u["a"])(!1)}}function z(){}var U=function(t){function e(){for(var e,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return e=t.call.apply(t,[this].concat(r))||this,e.handlePush=function(t){return e.navigateTo(t,"PUSH")},e.handleReplace=function(t){return e.navigateTo(t,"REPLACE")},e.handleListen=function(){return z},e.handleBlock=function(){return z},e}Object(r["a"])(e,t);var n=e.prototype;return n.navigateTo=function(t,e){var n=this.props,r=n.basename,i=void 0===r?"":r,o=n.context,s=void 0===o?{}:o;s.action=e,s.location=N(i,Object(a["c"])(t)),s.url=F(s.location)},n.render=function(){var t=this.props,e=t.basename,n=void 0===e?"":e,r=t.context,i=void 0===r?{}:r,s=t.location,u=void 0===s?"/":s,l=Object(h["a"])(t,["basename","context","location"]),f={createHref:function(t){return L(n+F(t))},action:"POP",location:D(n,Object(a["c"])(u)),push:this.handlePush,replace:this.handleReplace,go:B("go"),goBack:B("goBack"),goForward:B("goForward"),listen:this.handleListen,block:this.handleBlock};return o.a.createElement(_,Object(c["a"])({},l,{history:f,staticContext:i}))},e}(o.a.Component);var V=function(t){function e(){return t.apply(this,arguments)||this}Object(r["a"])(e,t);var n=e.prototype;return n.render=function(){var t=this;return o.a.createElement(y.Consumer,null,(function(e){e||Object(u["a"])(!1);var n,r,i=t.props.location||e.location;return o.a.Children.forEach(t.props.children,(function(t){if(null==r&&o.a.isValidElement(t)){n=t;var a=t.props.path||t.props.from;r=a?j(i.pathname,Object(c["a"])({},t.props,{path:a})):e.match}})),r?o.a.cloneElement(n,{location:i,computedMatch:r}):null}))},e}(o.a.Component);function H(t){var e="withRouter("+(t.displayName||t.name)+")",n=function(e){var n=e.wrappedComponentRef,r=Object(h["a"])(e,["wrappedComponentRef"]);return o.a.createElement(y.Consumer,null,(function(e){return e||Object(u["a"])(!1),o.a.createElement(t,Object(c["a"])({},r,e,{ref:n}))}))};return n.displayName=e,n.WrappedComponent=t,d()(n,t)}var G=o.a.useContext;function W(){return G(g)}function Z(){return G(y).location}function Y(){var t=G(y).match;return t?t.params:{}}function X(t){var e=Z(),n=G(y).match;return t?j(e.pathname,t):n}},"U/TZ":function(t,e,n){"use strict";function r(){var t=n("q1tI");return r=function(){return t},t}function i(t,e){return c(t)||u(t,e)||a(t,e)||o()}function o(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function a(t,e){if(t){if("string"===typeof t)return s(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(t,e):void 0}}function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function u(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o,a,s=[],u=!0,c=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);u=!0);}catch(l){c=!0,i=l}finally{try{if(!u&&null!=n["return"]&&(a=n["return"](),Object(a)!==a))return}finally{if(c)throw i}}return s}}function c(t){if(Array.isArray(t))return t}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=void 0;var l=function(t,e){var n=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r={};return Object.keys(e[1]).forEach((function(t){var n=(t.match(/^(.+)\.([^_]+)$/)||[]).slice(1),o=i(n,2),a=o[0],s=o[1];s&&s!==e[0]||(r[a||t]=e[1][t])})),r},o=(0,r().useState)(n(t,e)),a=i(o,2),s=a[0],u=a[1];return(0,r().useEffect)((function(){u(n(t,e))}),[t,e]),s};e["default"]=l},U3f4:function(t,e,n){var r=n("g6v/"),i=n("m/L8"),o=n("rW0t"),a=n("n3/R").UNSUPPORTED_Y;r&&("g"!=/./g.flags||a)&&i.f(RegExp.prototype,"flags",{configurable:!0,get:o})},U8pU:function(t,e,n){"use strict";function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}n.d(e,"a",(function(){return r}))},UMSQ:function(t,e,n){var r=n("ppGB"),i=Math.min;t.exports=function(t){return t>0?i(r(t),9007199254740991):0}},"UNi/":function(t,e){function n(t,e){var n=-1,r=Array(t);while(++n<t)r[n]=e(n);return r}t.exports=n},UTVS:function(t,e){var n={}.hasOwnProperty;t.exports=function(t,e){return n.call(t,e)}},Ucsi:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=Symbol["for"]("INJECTION");function i(t,e,n,i){function o(){return i&&!Reflect.hasMetadata(r,this,e)&&Reflect.defineMetadata(r,n(),this,e),Reflect.hasMetadata(r,this,e)?Reflect.getMetadata(r,this,e):n()}function a(t){Reflect.defineMetadata(r,t,this,e)}Object.defineProperty(t,e,{configurable:!0,enumerable:!0,get:o,set:a})}function o(t,e){return function(n){return function(r,o){var a=function(){return t.get(n)};i(r,o,a,e)}}}function a(t,e){return function(n,r){return function(o,a){var s=function(){return t.getNamed(n,r)};i(o,a,s,e)}}}function s(t,e){return function(n,r,o){return function(a,s){var u=function(){return t.getTagged(n,r,o)};i(a,s,u,e)}}}function u(t,e){return function(n){return function(r,o){var a=function(){return t.getAll(n)};i(r,o,a,e)}}}e.makePropertyInjectDecorator=o,e.makePropertyInjectNamedDecorator=a,e.makePropertyInjectTaggedDecorator=s,e.makePropertyMultiInjectDecorator=u},UesL:function(t,e,n){"use strict";var r=n("glrk"),i=n("wE6v");t.exports=function(t){if("string"!==t&&"number"!==t&&"default"!==t)throw TypeError("Incorrect hint");return i(r(this),"number"!==t)}},UxlC:function(t,e,n){"use strict";var r=n("14Sl"),i=n("glrk"),o=n("ewvW"),a=n("UMSQ"),s=n("ppGB"),u=n("HYAF"),c=n("iqWW"),l=n("FMNM"),f=Math.max,h=Math.min,p=Math.floor,d=/\$([$&'`]|\d\d?|<[^>]*>)/g,v=/\$([$&'`]|\d\d?)/g,g=function(t){return void 0===t?t:String(t)};r("replace",2,(function(t,e,n,r){var m=r.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,y=r.REPLACE_KEEPS_$0,_=m?"$":"$0";return[function(n,r){var i=u(this),o=void 0==n?void 0:n[t];return void 0!==o?o.call(n,i,r):e.call(String(i),n,r)},function(t,r){if(!m&&y||"string"===typeof r&&-1===r.indexOf(_)){var o=n(e,t,this,r);if(o.done)return o.value}var u=i(t),p=String(this),d="function"===typeof r;d||(r=String(r));var v=u.global;if(v){var x=u.unicode;u.lastIndex=0}var w=[];while(1){var E=l(u,p);if(null===E)break;if(w.push(E),!v)break;var S=String(E[0]);""===S&&(u.lastIndex=c(p,a(u.lastIndex),x))}for(var O="",C=0,T=0;T<w.length;T++){E=w[T];for(var A=String(E[0]),k=f(h(s(E.index),p.length),0),M=[],P=1;P<E.length;P++)M.push(g(E[P]));var R=E.groups;if(d){var j=[A].concat(M,k,p);void 0!==R&&j.push(R);var I=String(r.apply(void 0,j))}else I=b(A,p,k,M,R,r);k>=C&&(O+=p.slice(C,k)+I,C=k+A.length)}return O+p.slice(C)}];function b(t,n,r,i,a,s){var u=r+t.length,c=i.length,l=v;return void 0!==a&&(a=o(a),l=d),e.call(s,l,(function(e,o){var s;switch(o.charAt(0)){case"$":return"$";case"&":return t;case"`":return n.slice(0,r);case"'":return n.slice(u);case"<":s=a[o.slice(1,-1)];break;default:var l=+o;if(0===l)return e;if(l>c){var f=p(l/10);return 0===f?e:f<=c?void 0===i[f-1]?o.charAt(1):i[f-1]+o.charAt(1):e}s=i[l-1]}return void 0===s?"":s}))}}))},Uydy:function(t,e,n){var r=n("I+eb"),i=n("HsHA"),o=Math.acosh,a=Math.log,s=Math.sqrt,u=Math.LN2,c=!o||710!=Math.floor(o(Number.MAX_VALUE))||o(1/0)!=1/0;r({target:"Math",stat:!0,forced:c},{acosh:function(t){return(t=+t)<1?NaN:t>94906265.62425156?a(t)+u:i(t-1+s(t-1)*s(t+1))}})},UzNg:function(t,e,n){"use strict";var r=n("I+eb"),i=n("ntOU"),o=n("HYAF"),a=n("afO8"),s=n("ZUd8"),u=s.codeAt,c=s.charAt,l="String Iterator",f=a.set,h=a.getterFor(l),p=i((function(t){f(this,{type:l,string:t,index:0})}),"String",(function(){var t,e=h(this),n=e.string,r=e.index;return r>=n.length?{value:void 0,done:!0}:(t=c(n,r),e.index+=t.length,{value:{codePoint:u(t,0),position:r},done:!1})}));r({target:"String",proto:!0},{codePoints:function(){return new p(String(o(this)))}})},"V/vL":function(t,e,n){"use strict";n.r(e),n.d(e,"matchRoutes",(function(){return s})),n.d(e,"renderRoutes",(function(){return u}));var r=n("Ty5D"),i=n("wx14"),o=n("q1tI"),a=n.n(o);function s(t,e,n){return void 0===n&&(n=[]),t.some((function(t){var i=t.path?Object(r["i"])(e,t):n.length?n[n.length-1].match:r["e"].computeRootMatch(e);return i&&(n.push({route:t,match:i}),t.routes&&s(t.routes,e,n)),i})),n}function u(t,e,n){return void 0===e&&(e={}),void 0===n&&(n={}),t?a.a.createElement(r["g"],n,t.map((function(t,n){return a.a.createElement(r["d"],{key:t.key||n,path:t.path,exact:t.exact,strict:t.strict,render:function(n){return t.render?t.render(Object(i["a"])({},n,{},e,{route:t})):a.a.createElement(t.component,Object(i["a"])({},n,e,{route:t}))}})}))):null}},V6Ve:function(t,e,n){var r=n("kekF"),i=r(Object.keys,Object);t.exports=i},V93i:function(t,e,n){"use strict";t.exports=function(t){return encodeURIComponent(t).replace(/[!'()*]/g,(function(t){return"%".concat(t.charCodeAt(0).toString(16).toUpperCase())}))}},VFMm:function(t,e,n){},VOz1:function(t,e,n){"use strict";var r=n("I+eb"),i=n("xDBR"),o=n("glrk"),a=n("HAuM"),s=n("Sssf"),u=n("ImZN");r({target:"Map",proto:!0,real:!0,forced:i},{reduce:function(t){var e=o(this),n=s(e),r=arguments.length<2,i=r?void 0:arguments[1];if(a(t),u(n,(function(n,o){r?(r=!1,i=o):i=t(i,o,n,e)}),void 0,!0,!0),r)throw TypeError("Reduce of empty map with no initial value");return i}})},VTBJ:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n("rePB");function i(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function o(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?i(Object(n),!0).forEach((function(e){Object(r["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}},VWci:function(t,e,n){var r=function(t){"use strict";var e,n=Object.prototype,r=n.hasOwnProperty,i="function"===typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(t,e,n,r){var i=e&&e.prototype instanceof v?e:v,o=Object.create(i.prototype),a=new A(r||[]);return o._invoke=S(t,n,a),o}function c(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(r){return{type:"throw",arg:r}}}t.wrap=u;var l="suspendedStart",f="suspendedYield",h="executing",p="completed",d={};function v(){}function g(){}function m(){}var y={};y[o]=function(){return this};var _=Object.getPrototypeOf,b=_&&_(_(k([])));b&&b!==n&&r.call(b,o)&&(y=b);var x=m.prototype=v.prototype=Object.create(y);function w(t){["next","throw","return"].forEach((function(e){t[e]=function(t){return this._invoke(e,t)}}))}function E(t,e){function n(i,o,a,s){var u=c(t[i],t,o);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"===typeof f&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,s)}))}s(u.arg)}var i;function o(t,r){function o(){return new e((function(e,i){n(t,r,e,i)}))}return i=i?i.then(o,o):o()}this._invoke=o}function S(t,e,n){var r=l;return function(i,o){if(r===h)throw new Error("Generator is already running");if(r===p){if("throw"===i)throw o;return M()}n.method=i,n.arg=o;while(1){var a=n.delegate;if(a){var s=O(a,n);if(s){if(s===d)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===l)throw r=p,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=h;var u=c(t,e,n);if("normal"===u.type){if(r=n.done?p:f,u.arg===d)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r=p,n.method="throw",n.arg=u.arg)}}}function O(t,n){var r=t.iterator[n.method];if(r===e){if(n.delegate=null,"throw"===n.method){if(t.iterator["return"]&&(n.method="return",n.arg=e,O(t,n),"throw"===n.method))return d;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return d}var i=c(r,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,d;var o=i.arg;return o?o.done?(n[t.resultName]=o.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,d):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,d)}function C(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function T(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function A(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function k(t){if(t){var n=t[o];if(n)return n.call(t);if("function"===typeof t.next)return t;if(!isNaN(t.length)){var i=-1,a=function n(){while(++i<t.length)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}return{next:M}}function M(){return{value:e,done:!0}}return g.prototype=x.constructor=m,m.constructor=g,m[s]=g.displayName="GeneratorFunction",t.isGeneratorFunction=function(t){var e="function"===typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,m):(t.__proto__=m,s in t||(t[s]="GeneratorFunction")),t.prototype=Object.create(x),t},t.awrap=function(t){return{__await:t}},w(E.prototype),E.prototype[a]=function(){return this},t.AsyncIterator=E,t.async=function(e,n,r,i,o){void 0===o&&(o=Promise);var a=new E(u(e,n,r,i),o);return t.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},w(x),x[s]="Generator",x[o]=function(){return this},x.toString=function(){return"[object Generator]"},t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){while(e.length){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=k,A.prototype={constructor:A,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(T),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0],e=t.completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return s.type="throw",s.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var u=r.call(a,"catchLoc"),c=r.call(a,"finallyLoc");if(u&&c){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,d):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),d},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),T(n),d}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;T(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:k(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),d}},t}(t.exports);try{regeneratorRuntime=r}catch(i){Function("r","regeneratorRuntime = r")(r)}},VaNO:function(t,e){function n(t){return this.__data__.has(t)}t.exports=n},Vfn7:function(t,e,n){var r;(function(){"use strict";function i(t,e){var n=t.x-e.x,r=t.y-e.y;return n*n+r*r}function o(t,e,n){var r=e.x,i=e.y,o=n.x-r,a=n.y-i;if(0!==o||0!==a){var s=((t.x-r)*o+(t.y-i)*a)/(o*o+a*a);s>1?(r=n.x,i=n.y):s>0&&(r+=o*s,i+=a*s)}return o=t.x-r,a=t.y-i,o*o+a*a}function a(t,e){for(var n,r=t[0],o=[r],a=1,s=t.length;a<s;a++)n=t[a],i(n,r)>e&&(o.push(n),r=n);return r!==n&&o.push(n),o}function s(t,e,n,r,i){for(var a,u=r,c=e+1;c<n;c++){var l=o(t[c],t[e],t[n]);l>u&&(a=c,u=l)}u>r&&(a-e>1&&s(t,e,a,r,i),i.push(t[a]),n-a>1&&s(t,a,n,r,i))}function u(t,e){var n=t.length-1,r=[t[0]];return s(t,0,n,e,r),r.push(t[n]),r}function c(t,e,n){if(t.length<=2)return t;var r=void 0!==e?e*e:1;return t=n?t:a(t,r),t=u(t,r),t}r=function(){return c}.call(e,n,e,t),void 0===r||(t.exports=r)})()},VmRL:function(t,e,n){"use strict";function r(t,e,n){n=n||2;var r,o,s,u,c,l,h,p=e&&e.length,d=p?e[0]*n:t.length,v=i(t,0,d,n,!0),g=[];if(!v||v.next===v.prev)return g;if(p&&(v=f(t,e,v,n)),t.length>80*n){r=s=t[0],o=u=t[1];for(var m=n;m<d;m+=n)c=t[m],l=t[m+1],c<r&&(r=c),l<o&&(o=l),c>s&&(s=c),l>u&&(u=l);h=Math.max(s-r,u-o),h=0!==h?32767/h:0}return a(v,g,n,r,o,h,0),g}function i(t,e,n,r,i){var o,a;if(i===I(t,e,n,r)>0)for(o=e;o<n;o+=r)a=P(o,t[o],t[o+1],a);else for(o=n-r;o>=e;o-=r)a=P(o,t[o],t[o+1],a);return a&&E(a,a.next)&&(R(a),a=a.next),a}function o(t,e){if(!t)return t;e||(e=t);var n,r=t;do{if(n=!1,r.steiner||!E(r,r.next)&&0!==w(r.prev,r,r.next))r=r.next;else{if(R(r),r=e=r.prev,r===r.next)break;n=!0}}while(n||r!==e);return e}function a(t,e,n,r,i,f,h){if(t){!h&&f&&g(t,r,i,f);var p,d,v=t;while(t.prev!==t.next)if(p=t.prev,d=t.next,f?u(t,r,i,f):s(t))e.push(p.i/n|0),e.push(t.i/n|0),e.push(d.i/n|0),R(t),t=d.next,v=d.next;else if(t=d,t===v){h?1===h?(t=c(o(t),e,n),a(t,e,n,r,i,f,2)):2===h&&l(t,e,n,r,i,f):a(o(t),e,n,r,i,f,1);break}}}function s(t){var e=t.prev,n=t,r=t.next;if(w(e,n,r)>=0)return!1;var i=e.x,o=n.x,a=r.x,s=e.y,u=n.y,c=r.y,l=i<o?i<a?i:a:o<a?o:a,f=s<u?s<c?s:c:u<c?u:c,h=i>o?i>a?i:a:o>a?o:a,p=s>u?s>c?s:c:u>c?u:c,d=r.next;while(d!==e){if(d.x>=l&&d.x<=h&&d.y>=f&&d.y<=p&&b(i,s,o,u,a,c,d.x,d.y)&&w(d.prev,d,d.next)>=0)return!1;d=d.next}return!0}function u(t,e,n,r){var i=t.prev,o=t,a=t.next;if(w(i,o,a)>=0)return!1;var s=i.x,u=o.x,c=a.x,l=i.y,f=o.y,h=a.y,p=s<u?s<c?s:c:u<c?u:c,d=l<f?l<h?l:h:f<h?f:h,v=s>u?s>c?s:c:u>c?u:c,g=l>f?l>h?l:h:f>h?f:h,m=y(p,d,e,n,r),_=y(v,g,e,n,r),x=t.prevZ,E=t.nextZ;while(x&&x.z>=m&&E&&E.z<=_){if(x.x>=p&&x.x<=v&&x.y>=d&&x.y<=g&&x!==i&&x!==a&&b(s,l,u,f,c,h,x.x,x.y)&&w(x.prev,x,x.next)>=0)return!1;if(x=x.prevZ,E.x>=p&&E.x<=v&&E.y>=d&&E.y<=g&&E!==i&&E!==a&&b(s,l,u,f,c,h,E.x,E.y)&&w(E.prev,E,E.next)>=0)return!1;E=E.nextZ}while(x&&x.z>=m){if(x.x>=p&&x.x<=v&&x.y>=d&&x.y<=g&&x!==i&&x!==a&&b(s,l,u,f,c,h,x.x,x.y)&&w(x.prev,x,x.next)>=0)return!1;x=x.prevZ}while(E&&E.z<=_){if(E.x>=p&&E.x<=v&&E.y>=d&&E.y<=g&&E!==i&&E!==a&&b(s,l,u,f,c,h,E.x,E.y)&&w(E.prev,E,E.next)>=0)return!1;E=E.nextZ}return!0}function c(t,e,n){var r=t;do{var i=r.prev,a=r.next.next;!E(i,a)&&S(i,r,r.next,a)&&A(i,a)&&A(a,i)&&(e.push(i.i/n|0),e.push(r.i/n|0),e.push(a.i/n|0),R(r),R(r.next),r=t=a),r=r.next}while(r!==t);return o(r)}function l(t,e,n,r,i,s){var u=t;do{var c=u.next.next;while(c!==u.prev){if(u.i!==c.i&&x(u,c)){var l=M(u,c);return u=o(u,u.next),l=o(l,l.next),a(u,e,n,r,i,s,0),void a(l,e,n,r,i,s,0)}c=c.next}u=u.next}while(u!==t)}function f(t,e,n,r){var o,a,s,u,c,l=[];for(o=0,a=e.length;o<a;o++)s=e[o]*r,u=o<a-1?e[o+1]*r:t.length,c=i(t,s,u,r,!1),c===c.next&&(c.steiner=!0),l.push(_(c));for(l.sort(h),o=0;o<l.length;o++)n=p(l[o],n);return n}function h(t,e){return t.x-e.x}function p(t,e){var n=d(t,e);if(!n)return e;var r=M(n,t);return o(r,r.next),o(n,n.next)}function d(t,e){var n,r=e,i=t.x,o=t.y,a=-1/0;do{if(o<=r.y&&o>=r.next.y&&r.next.y!==r.y){var s=r.x+(o-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(s<=i&&s>a&&(a=s,n=r.x<r.next.x?r:r.next,s===i))return n}r=r.next}while(r!==e);if(!n)return null;var u,c=n,l=n.x,f=n.y,h=1/0;r=n;do{i>=r.x&&r.x>=l&&i!==r.x&&b(o<f?i:a,o,l,f,o<f?a:i,o,r.x,r.y)&&(u=Math.abs(o-r.y)/(i-r.x),A(r,t)&&(u<h||u===h&&(r.x>n.x||r.x===n.x&&v(n,r)))&&(n=r,h=u)),r=r.next}while(r!==c);return n}function v(t,e){return w(t.prev,t,e.prev)<0&&w(e.next,t,t.next)<0}function g(t,e,n,r){var i=t;do{0===i.z&&(i.z=y(i.x,i.y,e,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==t);i.prevZ.nextZ=null,i.prevZ=null,m(i)}function m(t){var e,n,r,i,o,a,s,u,c=1;do{n=t,t=null,o=null,a=0;while(n){for(a++,r=n,s=0,e=0;e<c;e++)if(s++,r=r.nextZ,!r)break;u=c;while(s>0||u>0&&r)0!==s&&(0===u||!r||n.z<=r.z)?(i=n,n=n.nextZ,s--):(i=r,r=r.nextZ,u--),o?o.nextZ=i:t=i,i.prevZ=o,o=i;n=r}o.nextZ=null,c*=2}while(a>1);return t}function y(t,e,n,r,i){return t=(t-n)*i|0,e=(e-r)*i|0,t=16711935&(t|t<<8),t=252645135&(t|t<<4),t=858993459&(t|t<<2),t=1431655765&(t|t<<1),e=16711935&(e|e<<8),e=252645135&(e|e<<4),e=858993459&(e|e<<2),e=1431655765&(e|e<<1),t|e<<1}function _(t){var e=t,n=t;do{(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next}while(e!==t);return n}function b(t,e,n,r,i,o,a,s){return(i-a)*(e-s)>=(t-a)*(o-s)&&(t-a)*(r-s)>=(n-a)*(e-s)&&(n-a)*(o-s)>=(i-a)*(r-s)}function x(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!T(t,e)&&(A(t,e)&&A(e,t)&&k(t,e)&&(w(t.prev,t,e.prev)||w(t,e.prev,e))||E(t,e)&&w(t.prev,t,t.next)>0&&w(e.prev,e,e.next)>0)}function w(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function E(t,e){return t.x===e.x&&t.y===e.y}function S(t,e,n,r){var i=C(w(t,e,n)),o=C(w(t,e,r)),a=C(w(n,r,t)),s=C(w(n,r,e));return i!==o&&a!==s||(!(0!==i||!O(t,n,e))||(!(0!==o||!O(t,r,e))||(!(0!==a||!O(n,t,r))||!(0!==s||!O(n,e,r)))))}function O(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function C(t){return t>0?1:t<0?-1:0}function T(t,e){var n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&S(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}function A(t,e){return w(t.prev,t,t.next)<0?w(t,e,t.next)>=0&&w(t,t.prev,e)>=0:w(t,e,t.prev)<0||w(t,t.next,e)<0}function k(t,e){var n=t,r=!1,i=(t.x+e.x)/2,o=(t.y+e.y)/2;do{n.y>o!==n.next.y>o&&n.next.y!==n.y&&i<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==t);return r}function M(t,e){var n=new j(t.i,t.x,t.y),r=new j(e.i,e.x,e.y),i=t.next,o=e.prev;return t.next=e,e.prev=t,n.next=i,i.prev=n,r.next=n,n.prev=r,o.next=r,r.prev=o,r}function P(t,e,n,r){var i=new j(t,e,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function R(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function j(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function I(t,e,n,r){for(var i=0,o=e,a=n-r;o<n;o+=r)i+=(t[a]-t[o])*(t[o+1]+t[a+1]),a=o;return i}t.exports=r,t.exports["default"]=r,r.deviation=function(t,e,n,r){var i=e&&e.length,o=i?e[0]*n:t.length,a=Math.abs(I(t,0,o,n));if(i)for(var s=0,u=e.length;s<u;s++){var c=e[s]*n,l=s<u-1?e[s+1]*n:t.length;a-=Math.abs(I(t,c,l,n))}var f=0;for(s=0;s<r.length;s+=3){var h=r[s]*n,p=r[s+1]*n,d=r[s+2]*n;f+=Math.abs((t[h]-t[d])*(t[p+1]-t[h+1])-(t[h]-t[p])*(t[d+1]-t[h+1]))}return 0===a&&0===f?0:Math.abs((f-a)/a)},r.flatten=function(t){for(var e=t[0][0].length,n={vertices:[],holes:[],dimensions:e},r=0,i=0;i<t.length;i++){for(var o=0;o<t[i].length;o++)for(var a=0;a<e;a++)n.vertices.push(t[i][o][a]);i>0&&(r+=t[i-1].length,n.holes.push(r))}return n}},Vnov:function(t,e,n){"use strict";var r=n("I+eb"),i=n("xDBR"),o=n("glrk"),a=n("Sssf"),s=n("ImZN");r({target:"Map",proto:!0,real:!0,forced:i},{keyOf:function(t){return s(a(o(this)),(function(e,n){if(n===t)return s.stop(e)}),void 0,!0,!0).result}})},VpIT:function(t,e,n){var r=n("xDBR"),i=n("xs3f");(t.exports=function(t,e){return i[t]||(i[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.6.5",mode:r?"pure":"global",copyright:"\xa9 2020 Denis Pushkarev (zloirock.ru)"})},Vu81:function(t,e,n){var r=n("0GbY"),i=n("JBy8"),o=n("dBg+"),a=n("glrk");t.exports=r("Reflect","ownKeys")||function(t){var e=i.f(a(t)),n=o.f;return n?e.concat(n(t)):e}},"W/eh":function(t,e,n){"use strict";var r=n("I+eb"),i=n("g6v/"),o=n("6x0u"),a=n("ewvW"),s=n("wE6v"),u=n("4WOD"),c=n("Bs8V").f;i&&r({target:"Object",proto:!0,forced:o},{__lookupSetter__:function(t){var e,n=a(this),r=s(t,!0);do{if(e=c(n,r))return e.set}while(n=u(n))}})},WFqU:function(t,e,n){(function(e){var n="object"==typeof e&&e&&e.Object===Object&&e;t.exports=n}).call(this,n("IyRk"))},WGBp:function(t,e,n){var r=n("xDBR"),i=n("mh/w");t.exports=r?i:function(t){return Set.prototype.values.call(t)}},WJkJ:function(t,e){t.exports="\t\n\v\f\r \xa0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff"},WKiH:function(t,e,n){var r=n("HYAF"),i=n("WJkJ"),o="["+i+"]",a=RegExp("^"+o+o+"*"),s=RegExp(o+o+"*$"),u=function(t){return function(e){var n=String(r(e));return 1&t&&(n=n.replace(a,"")),2&t&&(n=n.replace(s,"")),n}};t.exports={start:u(1),end:u(2),trim:u(3)}},WPzJ:function(t,e,n){var r=n("I+eb"),i=n("voyM");r({target:"Math",stat:!0},{scale:i})},WWur:function(t,e,n){"use strict";var r=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.target,r=void 0===n?document.body:n,i=document.createElement("textarea"),o=document.activeElement;i.value=t,i.setAttribute("readonly",""),i.style.contain="strict",i.style.position="absolute",i.style.left="-9999px",i.style.fontSize="12pt";var a=document.getSelection(),s=!1;a.rangeCount>0&&(s=a.getRangeAt(0)),r.append(i),i.select(),i.selectionStart=0,i.selectionEnd=t.length;var u=!1;try{u=document.execCommand("copy")}catch(c){}return i.remove(),s&&(a.removeAllRanges(),a.addRange(s)),o&&o.focus(),u};t.exports=r,t.exports["default"]=r},WbBG:function(t,e,n){"use strict";var r="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";t.exports=r},WjRb:function(t,e,n){var r=n("ROdP");t.exports=function(t){if(r(t))throw TypeError("The method doesn't accept regular expressions");return t}},X7LM:function(t,e,n){"use strict";var r=2147483647,i=36,o=1,a=26,s=38,u=700,c=72,l=128,f="-",h=/[^\0-\u007E]/,p=/[.\u3002\uFF0E\uFF61]/g,d="Overflow: input needs wider integers to process",v=i-o,g=Math.floor,m=String.fromCharCode,y=function(t){var e=[],n=0,r=t.length;while(n<r){var i=t.charCodeAt(n++);if(i>=55296&&i<=56319&&n<r){var o=t.charCodeAt(n++);56320==(64512&o)?e.push(((1023&i)<<10)+(1023&o)+65536):(e.push(i),n--)}else e.push(i)}return e},_=function(t){return t+22+75*(t<26)},b=function(t,e,n){var r=0;for(t=n?g(t/u):t>>1,t+=g(t/e);t>v*a>>1;r+=i)t=g(t/v);return g(r+(v+1)*t/(t+s))},x=function(t){var e=[];t=y(t);var n,s,u=t.length,h=l,p=0,v=c;for(n=0;n<t.length;n++)s=t[n],s<128&&e.push(m(s));var x=e.length,w=x;x&&e.push(f);while(w<u){var E=r;for(n=0;n<t.length;n++)s=t[n],s>=h&&s<E&&(E=s);var S=w+1;if(E-h>g((r-p)/S))throw RangeError(d);for(p+=(E-h)*S,h=E,n=0;n<t.length;n++){if(s=t[n],s<h&&++p>r)throw RangeError(d);if(s==h){for(var O=p,C=i;;C+=i){var T=C<=v?o:C>=v+a?a:C-v;if(O<T)break;var A=O-T,k=i-T;e.push(m(_(T+A%k))),O=g(A/k)}e.push(m(_(O))),v=b(p,S,w==x),p=0,++w}}++p,++h}return e.join("")};t.exports=function(t){var e,n,r=[],i=t.toLowerCase().replace(p,".").split(".");for(e=0;e<i.length;e++)n=i[e],r.push(h.test(n)?"xn--"+x(n):n);return r.join(".")}},XGwC:function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},XMab:function(t,e,n){var r=n("dOgj");r("Uint8",(function(t){return function(e,n,r){return t(this,e,n,r)}}))},XWE6:function(t,e){function n(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}t.exports=n,t.exports.__esModule=!0,t.exports["default"]=t.exports},XbcX:function(t,e,n){"use strict";var r=n("I+eb"),i=n("or9q"),o=n("ewvW"),a=n("UMSQ"),s=n("HAuM"),u=n("ZfDv");r({target:"Array",proto:!0},{flatMap:function(t){var e,n=o(this),r=a(n.length);return s(t),e=u(n,0),e.length=i(e,n,n,r,0,1,t,arguments.length>1?arguments[1]:void 0),e}})},Xi7e:function(t,e,n){var r=n("KMkd"),i=n("adU4"),o=n("tMB7"),a=n("+6XX"),s=n("Z8oC");function u(t){var e=-1,n=null==t?0:t.length;this.clear();while(++e<n){var r=t[e];this.set(r[0],r[1])}}u.prototype.clear=r,u.prototype["delete"]=i,u.prototype.get=o,u.prototype.has=a,u.prototype.set=s,t.exports=u},"Y+p1":function(t,e,n){var r=n("wF/u");function i(t,e){return r(t,e)}t.exports=i},Y4C7:function(t,e,n){var r=n("I+eb"),i=n("eDxR"),o=n("glrk"),a=i.toKey,s=i.getMap,u=i.store;r({target:"Reflect",stat:!0},{deleteMetadata:function(t,e){var n=arguments.length<3?void 0:a(arguments[2]),r=s(o(e),n,!1);if(void 0===r||!r["delete"](t))return!1;if(r.size)return!0;var i=u.get(e);return i["delete"](n),!!i.size||u["delete"](e)}})},YESw:function(t,e,n){var r=n("Cwc5"),i=r(Object,"create");t.exports=i},YGK4:function(t,e,n){"use strict";var r=n("bWFh"),i=n("ZWaQ");t.exports=r("Set",(function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}}),i)},YJ9l:function(t,e,n){"use strict";var r=n("5wUe")["default"],i=n("bfL6")["default"],o=n("R5yR")["default"],a=n("V93i"),s=n("8jRI"),u=n("8yz6"),c=n("c0go"),l=function(t){return null===t||void 0===t};function f(t){switch(t.arrayFormat){case"index":return function(e){return function(n,r){var i=n.length;return void 0===r||t.skipNull&&null===r||t.skipEmptyString&&""===r?n:[].concat(o(n),null===r?[[d(e,t),"[",i,"]"].join("")]:[[d(e,t),"[",d(i,t),"]=",d(r,t)].join("")])}};case"bracket":return function(e){return function(n,r){return void 0===r||t.skipNull&&null===r||t.skipEmptyString&&""===r?n:[].concat(o(n),null===r?[[d(e,t),"[]"].join("")]:[[d(e,t),"[]=",d(r,t)].join("")])}};case"comma":case"separator":return function(e){return function(n,r){return null===r||void 0===r||0===r.length?n:0===n.length?[[d(e,t),"=",d(r,t)].join("")]:[[n,d(r,t)].join(t.arrayFormatSeparator)]}};default:return function(e){return function(n,r){return void 0===r||t.skipNull&&null===r||t.skipEmptyString&&""===r?n:[].concat(o(n),null===r?[d(e,t)]:[[d(e,t),"=",d(r,t)].join("")])}}}}function h(t){var e;switch(t.arrayFormat){case"index":return function(t,n,r){e=/\[(\d*)\]$/.exec(t),t=t.replace(/\[\d*\]$/,""),e?(void 0===r[t]&&(r[t]={}),r[t][e[1]]=n):r[t]=n};case"bracket":return function(t,n,r){e=/(\[\])$/.exec(t),t=t.replace(/\[\]$/,""),e?void 0!==r[t]?r[t]=[].concat(r[t],n):r[t]=[n]:r[t]=n};case"comma":case"separator":return function(e,n,r){var i="string"===typeof n&&n.includes(t.arrayFormatSeparator),o="string"===typeof n&&!i&&v(n,t).includes(t.arrayFormatSeparator);n=o?v(n,t):n;var a=i||o?n.split(t.arrayFormatSeparator).map((function(e){return v(e,t)})):null===n?n:v(n,t);r[e]=a};default:return function(t,e,n){void 0!==n[t]?n[t]=[].concat(n[t],e):n[t]=e}}}function p(t){if("string"!==typeof t||1!==t.length)throw new TypeError("arrayFormatSeparator must be single character string")}function d(t,e){return e.encode?e.strict?a(t):encodeURIComponent(t):t}function v(t,e){return e.decode?s(t):t}function g(t){return Array.isArray(t)?t.sort():"object"===typeof t?g(Object.keys(t)).sort((function(t,e){return Number(t)-Number(e)})).map((function(e){return t[e]})):t}function m(t){var e=t.indexOf("#");return-1!==e&&(t=t.slice(0,e)),t}function y(t){var e="",n=t.indexOf("#");return-1!==n&&(e=t.slice(n)),e}function _(t){t=m(t);var e=t.indexOf("?");return-1===e?"":t.slice(e+1)}function b(t,e){return e.parseNumbers&&!Number.isNaN(Number(t))&&"string"===typeof t&&""!==t.trim()?t=Number(t):!e.parseBooleans||null===t||"true"!==t.toLowerCase()&&"false"!==t.toLowerCase()||(t="true"===t.toLowerCase()),t}function x(t,e){e=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},e),p(e.arrayFormatSeparator);var n=h(e),o=Object.create(null);if("string"!==typeof t)return o;if(t=t.trim().replace(/^[?#&]/,""),!t)return o;var a,s=i(t.split("&"));try{for(s.s();!(a=s.n()).done;){var c=a.value;if(""!==c){var l=u(e.decode?c.replace(/\+/g," "):c,"="),f=r(l,2),d=f[0],m=f[1];m=void 0===m?null:["comma","separator"].includes(e.arrayFormat)?m:v(m,e),n(v(d,e),m,o)}}}catch(C){s.e(C)}finally{s.f()}for(var y=0,_=Object.keys(o);y<_.length;y++){var x=_[y],w=o[x];if("object"===typeof w&&null!==w)for(var E=0,S=Object.keys(w);E<S.length;E++){var O=S[E];w[O]=b(w[O],e)}else o[x]=b(w,e)}return!1===e.sort?o:(!0===e.sort?Object.keys(o).sort():Object.keys(o).sort(e.sort)).reduce((function(t,e){var n=o[e];return Boolean(n)&&"object"===typeof n&&!Array.isArray(n)?t[e]=g(n):t[e]=n,t}),Object.create(null))}e.extract=_,e.parse=x,e.stringify=function(t,e){if(!t)return"";e=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},e),p(e.arrayFormatSeparator);for(var n=function(n){return e.skipNull&&l(t[n])||e.skipEmptyString&&""===t[n]},r=f(e),i={},o=0,a=Object.keys(t);o<a.length;o++){var s=a[o];n(s)||(i[s]=t[s])}var u=Object.keys(i);return!1!==e.sort&&u.sort(e.sort),u.map((function(n){var i=t[n];return void 0===i?"":null===i?d(n,e):Array.isArray(i)?i.reduce(r(n),[]).join("&"):d(n,e)+"="+d(i,e)})).filter((function(t){return t.length>0})).join("&")},e.parseUrl=function(t,e){e=Object.assign({decode:!0},e);var n=u(t,"#"),i=r(n,2),o=i[0],a=i[1];return Object.assign({url:o.split("?")[0]||"",query:x(_(t),e)},e&&e.parseFragmentIdentifier&&a?{fragmentIdentifier:v(a,e)}:{})},e.stringifyUrl=function(t,n){n=Object.assign({encode:!0,strict:!0},n);var r=m(t.url).split("?")[0]||"",i=e.extract(t.url),o=e.parse(i,{sort:!1}),a=Object.assign(o,t.query),s=e.stringify(a,n);s&&(s="?".concat(s));var u=y(t.url);return t.fragmentIdentifier&&(u="#".concat(d(t.fragmentIdentifier,n))),"".concat(r).concat(s).concat(u)},e.pick=function(t,n,r){r=Object.assign({parseFragmentIdentifier:!0},r);var i=e.parseUrl(t,r),o=i.url,a=i.query,s=i.fragmentIdentifier;return e.stringifyUrl({url:o,query:c(a,n),fragmentIdentifier:s},r)},e.exclude=function(t,n,r){var i=Array.isArray(n)?function(t){return!n.includes(t)}:function(t,e){return!n(t,e)};return e.pick(t,i,r)}},YL0P:function(t,e,n){"use strict";var r=n("2oRo"),i=n("67WC"),o=n("4mDm"),a=n("tiKp"),s=a("iterator"),u=r.Uint8Array,c=o.values,l=o.keys,f=o.entries,h=i.aTypedArray,p=i.exportTypedArrayMethod,d=u&&u.prototype[s],v=!!d&&("values"==d.name||void 0==d.name),g=function(){return c.call(h(this))};p("entries",(function(){return f.call(h(this))})),p("keys",(function(){return l.call(h(this))})),p("values",g,!v),p(s,g,!v)},YNrV:function(t,e,n){"use strict";var r=n("g6v/"),i=n("0Dky"),o=n("33Wh"),a=n("dBg+"),s=n("0eef"),u=n("ewvW"),c=n("RK3t"),l=Object.assign,f=Object.defineProperty;t.exports=!l||i((function(){if(r&&1!==l({b:1},l(f({},"a",{enumerable:!0,get:function(){f(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var t={},e={},n=Symbol(),i="abcdefghijklmnopqrst";return t[n]=7,i.split("").forEach((function(t){e[t]=t})),7!=l({},t)[n]||o(l({},e)).join("")!=i}))?function(t,e){var n=u(t),i=arguments.length,l=1,f=a.f,h=s.f;while(i>l){var p,d=c(arguments[l++]),v=f?o(d).concat(f(d)):o(d),g=v.length,m=0;while(g>m)p=v[m++],r&&!h.call(d,p)||(n[p]=d[p])}return n}:l},YO3V:function(t,e,n){var r=n("NykK"),i=n("LcsW"),o=n("ExA7"),a="[object Object]",s=Function.prototype,u=Object.prototype,c=s.toString,l=u.hasOwnProperty,f=c.call(Object);function h(t){if(!o(t)||r(t)!=a)return!1;var e=i(t);if(null===e)return!0;var n=l.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&c.call(n)==f}t.exports=h},YS25:function(t,e,n){"use strict";n.d(e,"a",(function(){return j})),n.d(e,"b",(function(){return z})),n.d(e,"d",(function(){return V})),n.d(e,"c",(function(){return x})),n.d(e,"f",(function(){return w})),n.d(e,"e",(function(){return b}));var r=n("wx14");function i(t){return"/"===t.charAt(0)}function o(t,e){for(var n=e,r=n+1,i=t.length;r<i;n+=1,r+=1)t[n]=t[r];t.pop()}function a(t,e){void 0===e&&(e="");var n,r=t&&t.split("/")||[],a=e&&e.split("/")||[],s=t&&i(t),u=e&&i(e),c=s||u;if(t&&i(t)?a=r:r.length&&(a.pop(),a=a.concat(r)),!a.length)return"/";if(a.length){var l=a[a.length-1];n="."===l||".."===l||""===l}else n=!1;for(var f=0,h=a.length;h>=0;h--){var p=a[h];"."===p?o(a,h):".."===p?(o(a,h),f++):f&&(o(a,h),f--)}if(!c)for(;f--;f)a.unshift("..");!c||""===a[0]||a[0]&&i(a[0])||a.unshift("");var d=a.join("/");return n&&"/"!==d.substr(-1)&&(d+="/"),d}var s=a;function u(t){return t.valueOf?t.valueOf():Object.prototype.valueOf.call(t)}function c(t,e){if(t===e)return!0;if(null==t||null==e)return!1;if(Array.isArray(t))return Array.isArray(e)&&t.length===e.length&&t.every((function(t,n){return c(t,e[n])}));if("object"===typeof t||"object"===typeof e){var n=u(t),r=u(e);return n!==t||r!==e?c(n,r):Object.keys(Object.assign({},t,e)).every((function(n){return c(t[n],e[n])}))}return!1}var l=c,f=n("YJ9l"),h=n.n(f),p=n("9R94");function d(t){return"/"===t.charAt(0)?t:"/"+t}function v(t){return"/"===t.charAt(0)?t.substr(1):t}function g(t,e){return 0===t.toLowerCase().indexOf(e.toLowerCase())&&-1!=="/?#".indexOf(t.charAt(e.length))}function m(t,e){return g(t,e)?t.substr(e.length):t}function y(t){return"/"===t.charAt(t.length-1)?t.slice(0,-1):t}function _(t){var e=t||"/",n="",r="",i=e.indexOf("#");-1!==i&&(r=e.substr(i),e=e.substr(0,i));var o=e.indexOf("?");return-1!==o&&(n=e.substr(o),e=e.substr(0,o)),{pathname:e,search:"?"===n?"":n,hash:"#"===r?"":r}}function b(t){var e=t.pathname,n=t.search,r=t.hash,i=e||"/";return n&&"?"!==n&&(i+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(i+="#"===r.charAt(0)?r:"#"+r),i}function x(t,e,n,i){var o;"string"===typeof t?(o=_(t),o.query=o.search?h.a.parse(o.search):{},o.state=e):(o=Object(r["a"])({},t),void 0===o.pathname&&(o.pathname=""),o.search?("?"!==o.search.charAt(0)&&(o.search="?"+o.search),o.query=h.a.parse(o.search)):(o.search=o.query?h.a.stringify(o.query):"",o.query=o.query||{}),o.hash?"#"!==o.hash.charAt(0)&&(o.hash="#"+o.hash):o.hash="",void 0!==e&&void 0===o.state&&(o.state=e));try{o.pathname=decodeURI(o.pathname)}catch(a){throw a instanceof URIError?new URIError('Pathname "'+o.pathname+'" could not be decoded. This is likely caused by an invalid percent-encoding.'):a}return n&&(o.key=n),i?o.pathname?"/"!==o.pathname.charAt(0)&&(o.pathname=s(o.pathname,i.pathname)):o.pathname=i.pathname:o.pathname||(o.pathname="/"),o}function w(t,e){return t.pathname===e.pathname&&t.search===e.search&&t.hash===e.hash&&t.key===e.key&&l(t.state,e.state)}function E(){var t=null;function e(e){return t=e,function(){t===e&&(t=null)}}function n(e,n,r,i){if(null!=t){var o="function"===typeof t?t(e,n):t;"string"===typeof o?"function"===typeof r?r(o,i):i(!0):i(!1!==o)}else i(!0)}var r=[];function i(t){var e=!0;function n(){e&&t.apply(void 0,arguments)}return r.push(n),function(){e=!1,r=r.filter((function(t){return t!==n}))}}function o(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];r.forEach((function(t){return t.apply(void 0,e)}))}return{setPrompt:e,confirmTransitionTo:n,appendListener:i,notifyListeners:o}}var S=!("undefined"===typeof window||!window.document||!window.document.createElement);function O(t,e){e(window.confirm(t))}function C(){var t=window.navigator.userAgent;return(-1===t.indexOf("Android 2.")&&-1===t.indexOf("Android 4.0")||-1===t.indexOf("Mobile Safari")||-1!==t.indexOf("Chrome")||-1!==t.indexOf("Windows Phone"))&&(window.history&&"pushState"in window.history)}function T(){return-1===window.navigator.userAgent.indexOf("Trident")}function A(){return-1===window.navigator.userAgent.indexOf("Firefox")}function k(t){return void 0===t.state&&-1===navigator.userAgent.indexOf("CriOS")}var M="popstate",P="hashchange";function R(){try{return window.history.state||{}}catch(t){return{}}}function j(t){void 0===t&&(t={}),S||Object(p["a"])(!1);var e=window.history,n=C(),i=!T(),o=t,a=o.forceRefresh,s=void 0!==a&&a,u=o.getUserConfirmation,c=void 0===u?O:u,l=o.keyLength,f=void 0===l?6:l,h=t.basename?y(d(t.basename)):"";function v(t){var e=t||{},n=e.key,r=e.state,i=window.location,o=i.pathname,a=i.search,s=i.hash,u=o+a+s;return h&&(u=m(u,h)),x(u,r,n)}function g(){return Math.random().toString(36).substr(2,f)}var _=E();function w(t){Object(r["a"])(K,t),K.length=e.length,_.notifyListeners(K.location,K.action)}function A(t){k(t)||L(v(t.state))}function j(){L(v(R()))}var I=!1;function L(t){if(I)I=!1,w();else{var e="POP";_.confirmTransitionTo(t,e,c,(function(n){n?w({action:e,location:t}):N(t)}))}}function N(t){var e=K.location,n=F.indexOf(e.key);-1===n&&(n=0);var r=F.indexOf(t.key);-1===r&&(r=0);var i=n-r;i&&(I=!0,V(i))}var D=v(R()),F=[D.key];function B(t){return h+b(t)}function z(t,r){var i="PUSH",o=x(t,r,g(),K.location);_.confirmTransitionTo(o,i,c,(function(t){if(t){var r=B(o),a=o.key,u=o.state;if(n)if(e.pushState({key:a,state:u},null,r),s)window.location.href=r;else{var c=F.indexOf(K.location.key),l=F.slice(0,c+1);l.push(o.key),F=l,w({action:i,location:o})}else window.location.href=r}}))}function U(t,r){var i="REPLACE",o=x(t,r,g(),K.location);_.confirmTransitionTo(o,i,c,(function(t){if(t){var r=B(o),a=o.key,u=o.state;if(n)if(e.replaceState({key:a,state:u},null,r),s)window.location.replace(r);else{var c=F.indexOf(K.location.key);-1!==c&&(F[c]=o.key),w({action:i,location:o})}else window.location.replace(r)}}))}function V(t){e.go(t)}function H(){V(-1)}function G(){V(1)}var W=0;function Z(t){W+=t,1===W&&1===t?(window.addEventListener(M,A),i&&window.addEventListener(P,j)):0===W&&(window.removeEventListener(M,A),i&&window.removeEventListener(P,j))}var Y=!1;function X(t){void 0===t&&(t=!1);var e=_.setPrompt(t);return Y||(Z(1),Y=!0),function(){return Y&&(Y=!1,Z(-1)),e()}}function q(t){var e=_.appendListener(t);return Z(1),function(){Z(-1),e()}}var K={length:e.length,action:"POP",location:D,createHref:B,push:z,replace:U,go:V,goBack:H,goForward:G,block:X,listen:q};return K}var I="hashchange",L={hashbang:{encodePath:function(t){return"!"===t.charAt(0)?t:"!/"+v(t)},decodePath:function(t){return"!"===t.charAt(0)?t.substr(1):t}},noslash:{encodePath:v,decodePath:d},slash:{encodePath:d,decodePath:d}};function N(t){var e=t.indexOf("#");return-1===e?t:t.slice(0,e)}function D(){var t=window.location.href,e=t.indexOf("#");return-1===e?"":t.substring(e+1)}function F(t){window.location.hash=t}function B(t){window.location.replace(N(window.location.href)+"#"+t)}function z(t){void 0===t&&(t={}),S||Object(p["a"])(!1);var e=window.history,n=(A(),t),i=n.getUserConfirmation,o=void 0===i?O:i,a=n.hashType,s=void 0===a?"slash":a,u=t.basename?y(d(t.basename)):"",c=L[s],l=c.encodePath,f=c.decodePath;function h(){var t=f(D());return u&&(t=m(t,u)),x(t)}var v=E();function g(t){Object(r["a"])($,t),$.length=e.length,v.notifyListeners($.location,$.action)}var _=!1,w=null;function C(t,e){return t.pathname===e.pathname&&t.search===e.search&&t.hash===e.hash}function T(){var t=D(),e=l(t);if(t!==e)B(e);else{var n=h(),r=$.location;if(!_&&C(r,n))return;if(w===b(n))return;w=null,k(n)}}function k(t){if(_)_=!1,g();else{var e="POP";v.confirmTransitionTo(t,e,o,(function(n){n?g({action:e,location:t}):M(t)}))}}function M(t){var e=$.location,n=z.lastIndexOf(b(e));-1===n&&(n=0);var r=z.lastIndexOf(b(t));-1===r&&(r=0);var i=n-r;i&&(_=!0,G(i))}var P=D(),R=l(P);P!==R&&B(R);var j=h(),z=[b(j)];function U(t){var e=document.querySelector("base"),n="";return e&&e.getAttribute("href")&&(n=N(window.location.href)),n+"#"+l(u+b(t))}function V(t,e){var n="PUSH",r=x(t,void 0,void 0,$.location);v.confirmTransitionTo(r,n,o,(function(t){if(t){var e=b(r),i=l(u+e),o=D()!==i;if(o){w=e,F(i);var a=z.lastIndexOf(b($.location)),s=z.slice(0,a+1);s.push(e),z=s,g({action:n,location:r})}else g()}}))}function H(t,e){var n="REPLACE",r=x(t,void 0,void 0,$.location);v.confirmTransitionTo(r,n,o,(function(t){if(t){var e=b(r),i=l(u+e),o=D()!==i;o&&(w=e,B(i));var a=z.indexOf(b($.location));-1!==a&&(z[a]=e),g({action:n,location:r})}}))}function G(t){e.go(t)}function W(){G(-1)}function Z(){G(1)}var Y=0;function X(t){Y+=t,1===Y&&1===t?window.addEventListener(I,T):0===Y&&window.removeEventListener(I,T)}var q=!1;function K(t){void 0===t&&(t=!1);var e=v.setPrompt(t);return q||(X(1),q=!0),function(){return q&&(q=!1,X(-1)),e()}}function Q(t){var e=v.appendListener(t);return X(1),function(){X(-1),e()}}var $={length:e.length,action:"POP",location:j,createHref:U,push:V,replace:H,go:G,goBack:W,goForward:Z,block:K,listen:Q};return $}function U(t,e,n){return Math.min(Math.max(t,e),n)}function V(t){void 0===t&&(t={});var e=t,n=e.getUserConfirmation,i=e.initialEntries,o=void 0===i?["/"]:i,a=e.initialIndex,s=void 0===a?0:a,u=e.keyLength,c=void 0===u?6:u,l=E();function f(t){Object(r["a"])(T,t),T.length=T.entries.length,l.notifyListeners(T.location,T.action)}function h(){return Math.random().toString(36).substr(2,c)}var p=U(s,0,o.length-1),d=o.map((function(t){return x(t,void 0,"string"===typeof t?h():t.key||h())})),v=b;function g(t,e){var r="PUSH",i=x(t,e,h(),T.location);l.confirmTransitionTo(i,r,n,(function(t){if(t){var e=T.index,n=e+1,o=T.entries.slice(0);o.length>n?o.splice(n,o.length-n,i):o.push(i),f({action:r,location:i,index:n,entries:o})}}))}function m(t,e){var r="REPLACE",i=x(t,e,h(),T.location);l.confirmTransitionTo(i,r,n,(function(t){t&&(T.entries[T.index]=i,f({action:r,location:i}))}))}function y(t){var e=U(T.index+t,0,T.entries.length-1),r="POP",i=T.entries[e];l.confirmTransitionTo(i,r,n,(function(t){t?f({action:r,location:i,index:e}):f()}))}function _(){y(-1)}function w(){y(1)}function S(t){var e=T.index+t;return e>=0&&e<T.entries.length}function O(t){return void 0===t&&(t=!1),l.setPrompt(t)}function C(t){return l.appendListener(t)}var T={length:d.length,action:"POP",location:d[p],index:p,entries:d,createHref:v,push:g,replace:m,go:y,goBack:_,goForward:w,canGo:S,block:O,listen:C};return T}},YcpW:function(t,e,n){(function(e,n){t.exports=n()})(0,(function(){"use strict";function t(t,n,i,o,a){e(t,n,i||0,o||t.length-1,a||r)}function e(t,r,i,o,a){while(o>i){if(o-i>600){var s=o-i+1,u=r-i+1,c=Math.log(s),l=.5*Math.exp(2*c/3),f=.5*Math.sqrt(c*l*(s-l)/s)*(u-s/2<0?-1:1),h=Math.max(i,Math.floor(r-u*l/s+f)),p=Math.min(o,Math.floor(r+(s-u)*l/s+f));e(t,r,h,p,a)}var d=t[r],v=i,g=o;n(t,i,r),a(t[o],d)>0&&n(t,i,o);while(v<g){n(t,v,g),v++,g--;while(a(t[v],d)<0)v++;while(a(t[g],d)>0)g--}0===a(t[i],d)?n(t,i,g):(g++,n(t,g,o)),g<=r&&(i=g+1),r<=g&&(o=g-1)}}function n(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function r(t,e){return t<e?-1:t>e?1:0}return t}))},Yhre:function(t,e,n){"use strict";var r=n("2oRo"),i=n("g6v/"),o=n("qYE9"),a=n("kRJp"),s=n("4syw"),u=n("0Dky"),c=n("GarU"),l=n("ppGB"),f=n("UMSQ"),h=n("CyXQ"),p=n("d6cI"),d=n("4WOD"),v=n("0rvr"),g=n("JBy8").f,m=n("m/L8").f,y=n("gdVl"),_=n("1E5z"),b=n("afO8"),x=b.get,w=b.set,E="ArrayBuffer",S="DataView",O="prototype",C="Wrong length",T="Wrong index",A=r[E],k=A,M=r[S],P=M&&M[O],R=Object.prototype,j=r.RangeError,I=p.pack,L=p.unpack,N=function(t){return[255&t]},D=function(t){return[255&t,t>>8&255]},F=function(t){return[255&t,t>>8&255,t>>16&255,t>>24&255]},B=function(t){return t[3]<<24|t[2]<<16|t[1]<<8|t[0]},z=function(t){return I(t,23,4)},U=function(t){return I(t,52,8)},V=function(t,e){m(t[O],e,{get:function(){return x(this)[e]}})},H=function(t,e,n,r){var i=h(n),o=x(t);if(i+e>o.byteLength)throw j(T);var a=x(o.buffer).bytes,s=i+o.byteOffset,u=a.slice(s,s+e);return r?u:u.reverse()},G=function(t,e,n,r,i,o){var a=h(n),s=x(t);if(a+e>s.byteLength)throw j(T);for(var u=x(s.buffer).bytes,c=a+s.byteOffset,l=r(+i),f=0;f<e;f++)u[c+f]=l[o?f:e-f-1]};if(o){if(!u((function(){A(1)}))||!u((function(){new A(-1)}))||u((function(){return new A,new A(1.5),new A(NaN),A.name!=E}))){k=function(t){return c(this,k),new A(h(t))};for(var W,Z=k[O]=A[O],Y=g(A),X=0;Y.length>X;)(W=Y[X++])in k||a(k,W,A[W]);Z.constructor=k}v&&d(P)!==R&&v(P,R);var q=new M(new k(2)),K=P.setInt8;q.setInt8(0,2147483648),q.setInt8(1,2147483649),!q.getInt8(0)&&q.getInt8(1)||s(P,{setInt8:function(t,e){K.call(this,t,e<<24>>24)},setUint8:function(t,e){K.call(this,t,e<<24>>24)}},{unsafe:!0})}else k=function(t){c(this,k,E);var e=h(t);w(this,{bytes:y.call(new Array(e),0),byteLength:e}),i||(this.byteLength=e)},M=function(t,e,n){c(this,M,S),c(t,k,S);var r=x(t).byteLength,o=l(e);if(o<0||o>r)throw j("Wrong offset");if(n=void 0===n?r-o:f(n),o+n>r)throw j(C);w(this,{buffer:t,byteLength:n,byteOffset:o}),i||(this.buffer=t,this.byteLength=n,this.byteOffset=o)},i&&(V(k,"byteLength"),V(M,"buffer"),V(M,"byteLength"),V(M,"byteOffset")),s(M[O],{getInt8:function(t){return H(this,1,t)[0]<<24>>24},getUint8:function(t){return H(this,1,t)[0]},getInt16:function(t){var e=H(this,2,t,arguments.length>1?arguments[1]:void 0);return(e[1]<<8|e[0])<<16>>16},getUint16:function(t){var e=H(this,2,t,arguments.length>1?arguments[1]:void 0);return e[1]<<8|e[0]},getInt32:function(t){return B(H(this,4,t,arguments.length>1?arguments[1]:void 0))},getUint32:function(t){return B(H(this,4,t,arguments.length>1?arguments[1]:void 0))>>>0},getFloat32:function(t){return L(H(this,4,t,arguments.length>1?arguments[1]:void 0),23)},getFloat64:function(t){return L(H(this,8,t,arguments.length>1?arguments[1]:void 0),52)},setInt8:function(t,e){G(this,1,t,N,e)},setUint8:function(t,e){G(this,1,t,N,e)},setInt16:function(t,e){G(this,2,t,D,e,arguments.length>2?arguments[2]:void 0)},setUint16:function(t,e){G(this,2,t,D,e,arguments.length>2?arguments[2]:void 0)},setInt32:function(t,e){G(this,4,t,F,e,arguments.length>2?arguments[2]:void 0)},setUint32:function(t,e){G(this,4,t,F,e,arguments.length>2?arguments[2]:void 0)},setFloat32:function(t,e){G(this,4,t,z,e,arguments.length>2?arguments[2]:void 0)},setFloat64:function(t,e){G(this,8,t,U,e,arguments.length>2?arguments[2]:void 0)}});_(k,E),_(M,S),t.exports={ArrayBuffer:k,DataView:M}},Yk9n:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.inject=e.LazyServiceIdentifer=void 0;var r=n("MON2"),i=n("xfSm"),o=n("GXnB"),a=n("Ztfv"),s=function(){function t(t){this._cb=t}return t.prototype.unwrap=function(){return this._cb()},t}();function u(t){return function(e,n,s){if(void 0===t)throw new Error(r.UNDEFINED_INJECT_ANNOTATION(e.name));var u=new o.Metadata(i.INJECT_TAG,t);"number"===typeof s?a.tagParameter(e,n,s,u):a.tagProperty(e,n,u)}}e.LazyServiceIdentifer=s,e.inject=u},YrtM:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n("q1tI");function i(t,e,n){var i=r["useRef"]({});return"value"in i.current&&!n(i.current.condition,e)||(i.current.value=t(),i.current.condition=e),i.current.value}},Z0cm:function(t,e){var n=Array.isArray;t.exports=n},Z4nd:function(t,e,n){"use strict";var r=n("I+eb"),i=n("xDBR"),o=n("fXLg");r({target:"WeakSet",proto:!0,real:!0,forced:i},{addAll:function(){return o.apply(this,arguments)}})},Z8oC:function(t,e,n){var r=n("y1pI");function i(t,e){var n=this.__data__,i=r(n,t);return i<0?(++this.size,n.push([t,e])):n[i][1]=e,this}t.exports=i},ZUd8:function(t,e,n){var r=n("ppGB"),i=n("HYAF"),o=function(t){return function(e,n){var o,a,s=String(i(e)),u=r(n),c=s.length;return u<0||u>=c?t?"":void 0:(o=s.charCodeAt(u),o<55296||o>56319||u+1===c||(a=s.charCodeAt(u+1))<56320||a>57343?t?s.charAt(u):o:t?s.slice(u,u+2):a-56320+(o-55296<<10)+65536)}};t.exports={codeAt:o(!1),charAt:o(!0)}},ZVtd:function(t,e,n){"use strict";n.r(e);var r={};n.r(r),n.d(r,"getContainer",(function(){return cn})),n.d(r,"trim",(function(){return ln})),n.d(r,"splitWords",(function(){return fn})),n.d(r,"create",(function(){return pn})),n.d(r,"remove",(function(){return dn})),n.d(r,"addClass",(function(){return vn})),n.d(r,"removeClass",(function(){return gn})),n.d(r,"hasClass",(function(){return mn})),n.d(r,"setClass",(function(){return yn})),n.d(r,"getClass",(function(){return _n})),n.d(r,"empty",(function(){return bn})),n.d(r,"setTransform",(function(){return wn})),n.d(r,"triggerResize",(function(){return En})),n.d(r,"printCanvas",(function(){return Sn})),n.d(r,"getViewPortScale",(function(){return On})),n.d(r,"DPR",(function(){return Cn})),n.d(r,"addStyle",(function(){return Tn})),n.d(r,"getStyleList",(function(){return An})),n.d(r,"removeStyle",(function(){return kn})),n.d(r,"css2Style",(function(){return Mn})),n.d(r,"getDiffRect",(function(){return Pn})),n.d(r,"setChecked",(function(){return Rn})),n.d(r,"clearChildren",(function(){return jn})),n.d(r,"setUnDraggable",(function(){return In})),n.d(r,"appendElementType",(function(){return Ln}));var i={};n.r(i),n.d(i,"sum",(function(){return Fn})),n.d(i,"max",(function(){return Nn})),n.d(i,"min",(function(){return Dn})),n.d(i,"mean",(function(){return Bn})),n.d(i,"mode",(function(){return zn})),n.d(i,"statMap",(function(){return Un})),n.d(i,"getColumn",(function(){return Vn})),n.d(i,"getSatByColumn",(function(){return Hn}));var o={};n.r(o),n.d(o,"create",(function(){return vo})),n.d(o,"clone",(function(){return go})),n.d(o,"copy",(function(){return mo})),n.d(o,"identity",(function(){return yo})),n.d(o,"fromValues",(function(){return _o})),n.d(o,"set",(function(){return bo})),n.d(o,"transpose",(function(){return xo})),n.d(o,"invert",(function(){return wo})),n.d(o,"adjoint",(function(){return Eo})),n.d(o,"determinant",(function(){return So})),n.d(o,"multiply",(function(){return Oo})),n.d(o,"rotate",(function(){return Co})),n.d(o,"scale",(function(){return To})),n.d(o,"fromRotation",(function(){return Ao})),n.d(o,"fromScaling",(function(){return ko})),n.d(o,"str",(function(){return Mo})),n.d(o,"frob",(function(){return Po})),n.d(o,"LDU",(function(){return Ro})),n.d(o,"add",(function(){return jo})),n.d(o,"subtract",(function(){return Io})),n.d(o,"exactEquals",(function(){return Lo})),n.d(o,"equals",(function(){return No})),n.d(o,"multiplyScalar",(function(){return Do})),n.d(o,"multiplyScalarAndAdd",(function(){return Fo})),n.d(o,"mul",(function(){return Bo})),n.d(o,"sub",(function(){return zo}));var a={};n.r(a),n.d(a,"create",(function(){return Uo})),n.d(a,"clone",(function(){return Vo})),n.d(a,"copy",(function(){return Ho})),n.d(a,"fromValues",(function(){return Go})),n.d(a,"set",(function(){return Wo})),n.d(a,"identity",(function(){return Zo})),n.d(a,"transpose",(function(){return Yo})),n.d(a,"invert",(function(){return Xo})),n.d(a,"adjoint",(function(){return qo})),n.d(a,"determinant",(function(){return Ko})),n.d(a,"multiply",(function(){return Qo})),n.d(a,"translate",(function(){return $o})),n.d(a,"scale",(function(){return Jo})),n.d(a,"rotate",(function(){return ta})),n.d(a,"rotateX",(function(){return ea})),n.d(a,"rotateY",(function(){return na})),n.d(a,"rotateZ",(function(){return ra})),n.d(a,"fromTranslation",(function(){return ia})),n.d(a,"fromScaling",(function(){return oa})),n.d(a,"fromRotation",(function(){return aa})),n.d(a,"fromXRotation",(function(){return sa})),n.d(a,"fromYRotation",(function(){return ua})),n.d(a,"fromZRotation",(function(){return ca})),n.d(a,"fromRotationTranslation",(function(){return la})),n.d(a,"fromQuat2",(function(){return fa})),n.d(a,"getTranslation",(function(){return ha})),n.d(a,"getScaling",(function(){return pa})),n.d(a,"getRotation",(function(){return da})),n.d(a,"fromRotationTranslationScale",(function(){return va})),n.d(a,"fromRotationTranslationScaleOrigin",(function(){return ga})),n.d(a,"fromQuat",(function(){return ma})),n.d(a,"frustum",(function(){return ya})),n.d(a,"perspectiveNO",(function(){return _a})),n.d(a,"perspective",(function(){return ba})),n.d(a,"perspectiveZO",(function(){return xa})),n.d(a,"perspectiveFromFieldOfView",(function(){return wa})),n.d(a,"orthoNO",(function(){return Ea})),n.d(a,"ortho",(function(){return Sa})),n.d(a,"orthoZO",(function(){return Oa})),n.d(a,"lookAt",(function(){return Ca})),n.d(a,"targetTo",(function(){return Ta})),n.d(a,"str",(function(){return Aa})),n.d(a,"frob",(function(){return ka})),n.d(a,"add",(function(){return Ma})),n.d(a,"subtract",(function(){return Pa})),n.d(a,"multiplyScalar",(function(){return Ra})),n.d(a,"multiplyScalarAndAdd",(function(){return ja})),n.d(a,"exactEquals",(function(){return Ia})),n.d(a,"equals",(function(){return La})),n.d(a,"mul",(function(){return Na})),n.d(a,"sub",(function(){return Da}));var s={};n.r(s),n.d(s,"create",(function(){return Fa})),n.d(s,"clone",(function(){return Ba})),n.d(s,"fromValues",(function(){return za})),n.d(s,"copy",(function(){return Ua})),n.d(s,"set",(function(){return Va})),n.d(s,"add",(function(){return Ha})),n.d(s,"subtract",(function(){return Ga})),n.d(s,"multiply",(function(){return Wa})),n.d(s,"divide",(function(){return Za})),n.d(s,"ceil",(function(){return Ya})),n.d(s,"floor",(function(){return Xa})),n.d(s,"min",(function(){return qa})),n.d(s,"max",(function(){return Ka})),n.d(s,"round",(function(){return Qa})),n.d(s,"scale",(function(){return $a})),n.d(s,"scaleAndAdd",(function(){return Ja})),n.d(s,"distance",(function(){return ts})),n.d(s,"squaredDistance",(function(){return es})),n.d(s,"length",(function(){return ns})),n.d(s,"squaredLength",(function(){return rs})),n.d(s,"negate",(function(){return is})),n.d(s,"inverse",(function(){return os})),n.d(s,"normalize",(function(){return as})),n.d(s,"dot",(function(){return ss})),n.d(s,"cross",(function(){return us})),n.d(s,"lerp",(function(){return cs})),n.d(s,"random",(function(){return ls})),n.d(s,"transformMat2",(function(){return fs})),n.d(s,"transformMat2d",(function(){return hs})),n.d(s,"transformMat3",(function(){return ps})),n.d(s,"transformMat4",(function(){return ds})),n.d(s,"rotate",(function(){return vs})),n.d(s,"angle",(function(){return gs})),n.d(s,"zero",(function(){return ms})),n.d(s,"str",(function(){return ys})),n.d(s,"exactEquals",(function(){return _s})),n.d(s,"equals",(function(){return bs})),n.d(s,"len",(function(){return xs})),n.d(s,"sub",(function(){return ws})),n.d(s,"mul",(function(){return Es})),n.d(s,"div",(function(){return Ss})),n.d(s,"dist",(function(){return Os})),n.d(s,"sqrDist",(function(){return Cs})),n.d(s,"sqrLen",(function(){return Ts})),n.d(s,"forEach",(function(){return As}));var u={};n.r(u),n.d(u,"create",(function(){return ks})),n.d(u,"clone",(function(){return Ms})),n.d(u,"length",(function(){return Ps})),n.d(u,"fromValues",(function(){return Rs})),n.d(u,"copy",(function(){return js})),n.d(u,"set",(function(){return Is})),n.d(u,"add",(function(){return Ls})),n.d(u,"subtract",(function(){return Ns})),n.d(u,"multiply",(function(){return Ds})),n.d(u,"divide",(function(){return Fs})),n.d(u,"ceil",(function(){return Bs})),n.d(u,"floor",(function(){return zs})),n.d(u,"min",(function(){return Us})),n.d(u,"max",(function(){return Vs})),n.d(u,"round",(function(){return Hs})),n.d(u,"scale",(function(){return Gs})),n.d(u,"scaleAndAdd",(function(){return Ws})),n.d(u,"distance",(function(){return Zs})),n.d(u,"squaredDistance",(function(){return Ys})),n.d(u,"squaredLength",(function(){return Xs})),n.d(u,"negate",(function(){return qs})),n.d(u,"inverse",(function(){return Ks})),n.d(u,"normalize",(function(){return Qs})),n.d(u,"dot",(function(){return $s})),n.d(u,"cross",(function(){return Js})),n.d(u,"lerp",(function(){return tu})),n.d(u,"hermite",(function(){return eu})),n.d(u,"bezier",(function(){return nu})),n.d(u,"random",(function(){return ru})),n.d(u,"transformMat4",(function(){return iu})),n.d(u,"transformMat3",(function(){return ou})),n.d(u,"transformQuat",(function(){return au})),n.d(u,"rotateX",(function(){return su})),n.d(u,"rotateY",(function(){return uu})),n.d(u,"rotateZ",(function(){return cu})),n.d(u,"angle",(function(){return lu})),n.d(u,"zero",(function(){return fu})),n.d(u,"str",(function(){return hu})),n.d(u,"exactEquals",(function(){return pu})),n.d(u,"equals",(function(){return du})),n.d(u,"sub",(function(){return vu})),n.d(u,"mul",(function(){return gu})),n.d(u,"div",(function(){return mu})),n.d(u,"dist",(function(){return yu})),n.d(u,"sqrDist",(function(){return _u})),n.d(u,"len",(function(){return bu})),n.d(u,"sqrLen",(function(){return xu})),n.d(u,"forEach",(function(){return wu}));var c={};n.r(c),n.d(c,"create",(function(){return Eu})),n.d(c,"clone",(function(){return Su})),n.d(c,"fromValues",(function(){return Ou})),n.d(c,"copy",(function(){return Cu})),n.d(c,"set",(function(){return Tu})),n.d(c,"add",(function(){return Au})),n.d(c,"subtract",(function(){return ku})),n.d(c,"multiply",(function(){return Mu})),n.d(c,"divide",(function(){return Pu})),n.d(c,"ceil",(function(){return Ru})),n.d(c,"floor",(function(){return ju})),n.d(c,"min",(function(){return Iu})),n.d(c,"max",(function(){return Lu})),n.d(c,"round",(function(){return Nu})),n.d(c,"scale",(function(){return Du})),n.d(c,"scaleAndAdd",(function(){return Fu})),n.d(c,"distance",(function(){return Bu})),n.d(c,"squaredDistance",(function(){return zu})),n.d(c,"length",(function(){return Uu})),n.d(c,"squaredLength",(function(){return Vu})),n.d(c,"negate",(function(){return Hu})),n.d(c,"inverse",(function(){return Gu})),n.d(c,"normalize",(function(){return Wu})),n.d(c,"dot",(function(){return Zu})),n.d(c,"cross",(function(){return Yu})),n.d(c,"lerp",(function(){return Xu})),n.d(c,"random",(function(){return qu})),n.d(c,"transformMat4",(function(){return Ku})),n.d(c,"transformQuat",(function(){return Qu})),n.d(c,"zero",(function(){return $u})),n.d(c,"str",(function(){return Ju})),n.d(c,"exactEquals",(function(){return tc})),n.d(c,"equals",(function(){return ec})),n.d(c,"sub",(function(){return nc})),n.d(c,"mul",(function(){return rc})),n.d(c,"div",(function(){return ic})),n.d(c,"dist",(function(){return oc})),n.d(c,"sqrDist",(function(){return ac})),n.d(c,"len",(function(){return sc})),n.d(c,"sqrLen",(function(){return uc})),n.d(c,"forEach",(function(){return cc}));var l={},f={},h=function(t){return f[t]},p=function(t,e){f[t]=e},d=function(t){return l[t]},v=function(t,e){l[t]=e},g={},m={},y=34,_=10,b=13;function x(t){return new Function("d","return {"+t.map((function(t,e){return JSON.stringify(t)+": d["+e+'] || ""'})).join(",")+"}")}function w(t,e){var n=x(t);return function(r,i){return e(n(r),i,t)}}function E(t){var e=Object.create(null),n=[];return t.forEach((function(t){for(var r in t)r in e||n.push(e[r]=r)})),n}function S(t,e){var n=t+"",r=n.length;return r<e?new Array(e-r+1).join(0)+n:n}function O(t){return t<0?"-"+S(-t,6):t>9999?"+"+S(t,6):S(t,4)}function C(t){var e=t.getUTCHours(),n=t.getUTCMinutes(),r=t.getUTCSeconds(),i=t.getUTCMilliseconds();return isNaN(t)?"Invalid Date":O(t.getUTCFullYear(),4)+"-"+S(t.getUTCMonth()+1,2)+"-"+S(t.getUTCDate(),2)+(i?"T"+S(e,2)+":"+S(n,2)+":"+S(r,2)+"."+S(i,3)+"Z":r?"T"+S(e,2)+":"+S(n,2)+":"+S(r,2)+"Z":n||e?"T"+S(e,2)+":"+S(n,2)+"Z":"")}var T=function(t){var e=new RegExp('["'+t+"\n\r]"),n=t.charCodeAt(0);function r(t,e){var n,r,o=i(t,(function(t,i){if(n)return n(t,i-1);r=t,n=e?w(t,e):x(t)}));return o.columns=r||[],o}function i(t,e){var r,i=[],o=t.length,a=0,s=0,u=o<=0,c=!1;function l(){if(u)return m;if(c)return c=!1,g;var e,r,i=a;if(t.charCodeAt(i)===y){while(a++<o&&t.charCodeAt(a)!==y||t.charCodeAt(++a)===y);return(e=a)>=o?u=!0:(r=t.charCodeAt(a++))===_?c=!0:r===b&&(c=!0,t.charCodeAt(a)===_&&++a),t.slice(i+1,e-1).replace(/""/g,'"')}while(a<o){if((r=t.charCodeAt(e=a++))===_)c=!0;else if(r===b)c=!0,t.charCodeAt(a)===_&&++a;else if(r!==n)continue;return t.slice(i,e)}return u=!0,t.slice(i,o)}t.charCodeAt(o-1)===_&&--o,t.charCodeAt(o-1)===b&&--o;while((r=l())!==m){var f=[];while(r!==g&&r!==m)f.push(r),r=l();e&&null==(f=e(f,s++))||i.push(f)}return i}function o(e,n){return e.map((function(e){return n.map((function(t){return l(e[t])})).join(t)}))}function a(e,n){return null==n&&(n=E(e)),[n.map(l).join(t)].concat(o(e,n)).join("\n")}function s(t,e){return null==e&&(e=E(t)),o(t,e).join("\n")}function u(t){return t.map(c).join("\n")}function c(e){return e.map(l).join(t)}function l(t){return null==t?"":t instanceof Date?C(t):e.test(t+="")?'"'+t.replace(/"/g,'""')+'"':t}return{parse:r,parseRows:i,format:a,formatBody:s,formatRows:u,formatRow:c,formatValue:l}},A=T(","),k=A.parse,M=(A.parseRows,A.format,A.formatBody,A.formatRows,A.formatRow,A.formatValue,n("KQm4")),P=n("VTBJ"),R=n("Aib3"),j=n.n(R);function I(t,e,n){void 0===n&&(n={});var r={type:"Feature"};return(0===n.id||n.id)&&(r.id=n.id),n.bbox&&(r.bbox=n.bbox),r.properties=e||{},r.geometry=t,r}function L(t,e,n){void 0===n&&(n={});for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var a=0;a<o[o.length-1].length;a++)if(o[o.length-1][a]!==o[0][a])throw new Error("First and last Position are not equivalent.")}var s={type:"Polygon",coordinates:t};return I(s,e,n)}function N(t,e,n){if(void 0===n&&(n={}),t.length<2)throw new Error("coordinates must be an array of two or more positions");var r={type:"LineString",coordinates:t};return I(r,e,n)}function D(t,e){void 0===e&&(e={});var n={type:"FeatureCollection"};return e.id&&(n.id=e.id),e.bbox&&(n.bbox=e.bbox),n.features=t,n}function F(t,e,n){void 0===n&&(n={});var r={type:"MultiPolygon",coordinates:t};return I(r,e,n)}function B(t){if(Array.isArray(t))return t;if("Feature"===t.type){if(null!==t.geometry)return t.geometry.coordinates}else if(t.coordinates)return t.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function z(t){return"Feature"===t.type?t.geometry:t}function U(t,e,n){if(null!==t)for(var r,i,o,a,s,u,c,l,f=0,h=0,p=t.type,d="FeatureCollection"===p,v="Feature"===p,g=d?t.features.length:1,m=0;m<g;m++){c=d?t.features[m].geometry:v?t.geometry:t,l=!!c&&"GeometryCollection"===c.type,s=l?c.geometries.length:1;for(var y=0;y<s;y++){var _=0,b=0;if(a=l?c.geometries[y]:c,null!==a){u=a.coordinates;var x=a.type;switch(f=!n||"Polygon"!==x&&"MultiPolygon"!==x?0:1,x){case null:break;case"Point":if(!1===e(u,h,m,_,b))return!1;h++,_++;break;case"LineString":case"MultiPoint":for(r=0;r<u.length;r++){if(!1===e(u[r],h,m,_,b))return!1;h++,"MultiPoint"===x&&_++}"LineString"===x&&_++;break;case"Polygon":case"MultiLineString":for(r=0;r<u.length;r++){for(i=0;i<u[r].length-f;i++){if(!1===e(u[r][i],h,m,_,b))return!1;h++}"MultiLineString"===x&&_++,"Polygon"===x&&b++}"Polygon"===x&&_++;break;case"MultiPolygon":for(r=0;r<u.length;r++){for(b=0,i=0;i<u[r].length;i++){for(o=0;o<u[r][i].length-f;o++){if(!1===e(u[r][i][o],h,m,_,b))return!1;h++}b++}_++}break;case"GeometryCollection":for(r=0;r<a.geometries.length;r++)if(!1===U(a.geometries[r],e,n))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function V(t,e){var n,r,i,o,a,s,u,c,l,f,h=0,p="FeatureCollection"===t.type,d="Feature"===t.type,v=p?t.features.length:1;for(n=0;n<v;n++){for(s=p?t.features[n].geometry:d?t.geometry:t,c=p?t.features[n].properties:d?t.properties:{},l=p?t.features[n].bbox:d?t.bbox:void 0,f=p?t.features[n].id:d?t.id:void 0,u=!!s&&"GeometryCollection"===s.type,a=u?s.geometries.length:1,i=0;i<a;i++)if(o=u?s.geometries[i]:s,null!==o)switch(o.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===e(o,h,c,l,f))return!1;break;case"GeometryCollection":for(r=0;r<o.geometries.length;r++)if(!1===e(o.geometries[r],h,c,l,f))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===e(null,h,c,l,f))return!1;h++}}function H(t,e){V(t,(function(t,n,r,i,o){var a,s=null===t?null:t.type;switch(s){case null:case"Point":case"LineString":case"Polygon":return!1!==e(I(t,r,{bbox:i,id:o}),n,0)&&void 0}switch(s){case"MultiPoint":a="Point";break;case"MultiLineString":a="LineString";break;case"MultiPolygon":a="Polygon";break}for(var u=0;u<t.coordinates.length;u++){var c=t.coordinates[u],l={type:a,coordinates:c};if(!1===e(I(l,r),n,u))return!1}}))}function G(t,e){var n=e.x,r=e.y,i=e.x1,o=e.y1,a=e.coordinates,s=e.geometry,u=[];if(!Array.isArray(t))return{dataArray:[]};if(s)return t.filter((function(t){return t[s]&&t[s].type&&t[s].coordinates&&t[s].coordinates.length>0})).forEach((function(t,e){var n=j()(Object(P["a"])({},t[s]),!0);H(n,(function(n){var r=B(n),i=Object(P["a"])(Object(P["a"])({},t),{},{_id:e,coordinates:r});u.push(i)}))})),{dataArray:u};for(var c=0;c<t.length;c++){var l=t[c],f=[];if(a){var h="Polygon";Array.isArray(a[0])||(h="Point"),Array.isArray(a[0])&&!Array.isArray(a[0][0])&&(h="LineString");var p=j()({type:h,coordinates:Object(M["a"])(l[a])},!0);f=p.coordinates}else if(n&&r&&i&&o){var d=[parseFloat(l[n]),parseFloat(l[r])],v=[parseFloat(l[i]),parseFloat(l[o])];f=[d,v]}else n&&r&&(f=[parseFloat(l[n]),parseFloat(l[r])]);var g=Object(P["a"])(Object(P["a"])({},l),{},{_id:c,coordinates:f});u.push(g)}return{dataArray:u}}function W(t,e){var n=k(t);return G(n,e)}function Z(t){var e=t.toString(),n=5381,r=e.length;while(r)n=33*n^e.charCodeAt(--r);return n>>>0}function Y(t,e){return void 0===e?null:t.properties[e]?t.properties[e]:t.properties&&t.properties[e]?Z(t.properties[e]+"")%1000019:null}function X(t,e){var n=[],r={};return t.features?(t.features=t.features.filter((function(t){var e=t.geometry;return null!=t&&e&&e.type&&e.coordinates&&e.coordinates.length>0})),j()(t,!0),0===t.features.length?{dataArray:[],featureKeys:r}:(H(t,(function(t,r){var i=Y(t,null===e||void 0===e?void 0:e.featureId);null===i&&(i=r);var o=i,a=B(t),s=Object(P["a"])(Object(P["a"])({},t.properties),{},{coordinates:a,_id:o});n.push(s)})),{dataArray:n,featureKeys:r})):(t.features=[],{dataArray:[]})}var q=n("ODXe"),K=n("LvDl"),Q="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function $(t){this.message=t}function J(t){var e=String(t).replace(/=+$/,"");if(e.length%4===1)throw new $("'atob' failed: The string to be decoded is not correctly encoded.");for(var n,r,i="",o=0,a=0;r=e.charAt(a++);~r&&(n=o%4?64*n+r:r,o++%4)?i+=String.fromCharCode(255&n>>(-2*o&6)):0)r=Q.indexOf(r);return i}function tt(t){t=String(t);for(var e,n,r,i,o="",a=0,s=t.length%3;a<t.length;){if((n=t.charCodeAt(a++))>255||(r=t.charCodeAt(a++))>255||(i=t.charCodeAt(a++))>255)throw new TypeError("Failed to execute 'btoa' on 'Window': The string to be encoded contains characters outside of the Latin1 range.");e=n<<16|r<<8|i,o+=Q.charAt(e>>18&63)+Q.charAt(e>>12&63)+Q.charAt(e>>6&63)+Q.charAt(63&e)}return s?o.slice(0,s-3)+"===".substring(s):o}$.prototype=new Error,$.prototype.name="InvalidCharacterError";var et=n("1OyB"),nt=n("vuIU"),rt=function(){function t(e,n){Object(et["a"])(this,t),this.buffers=e,this.type=n}return Object(nt["a"])(t,[{key:"arraybuffer",value:function(){return Promise.resolve(this.buffers[0])}},{key:"stream",value:function(){throw new Error("not implemented")}},{key:"text",value:function(){throw new Error("not implemented")}},{key:"slice",value:function(t,e,n){throw new Error("not implemented")}}]),t}(),it=n("Qo3T"),ot="undefined"!==typeof my&&!!my&&"function"===typeof my.showToast&&!0!==my.isFRM,at=ot?my.getSystemInfoSync().pixelRatio:it["a"].devicePixelRatio,st=n("Ji7U"),ut=n("md7G"),ct=n("foSv"),lt=Object(nt["a"])((function t(e,n){Object(et["a"])(this,t),this.cancelBubble=!1,this.cancelable=!1,this.target=null,this.currentTarget=null,this.preventDefault=function(){},this.stopPropagation=function(){},this.type=e,this.timeStamp=Date.now()})),ft=n("JX7q");function ht(t,e){var n="undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=pt(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n["return"]||n["return"]()}finally{if(s)throw o}}}}function pt(t,e){if(t){if("string"===typeof t)return dt(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?dt(t,e):void 0}}function dt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var vt=new WeakMap,gt=function(){function t(){Object(et["a"])(this,t),vt.set(this,{})}return Object(nt["a"])(t,[{key:"addEventListener",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=vt.get(this);r||(r={}),r[t]||(r[t]=[]),r[t].push(e),vt.set(this,r),n.capture,n.once,n.passive}},{key:"removeEventListener",value:function(t,e){var n=vt.get(this);if(n){var r=n[t];if(r&&r.length>0)for(var i=r.length;i--;i>0)if(r[i]===e){r.splice(i,1);break}}}},{key:"dispatchEvent",value:function(t){var e=vt.get(this)[t.type];if(e){var n,r=ht(e);try{for(r.s();!(n=r.n()).done;){var i=n.value;i(t)}}catch(o){r.e(o)}finally{r.f()}}}}]),t}();function mt(t){var e=yt();return function(){var n,r=Object(ct["a"])(t);if(e){var i=Object(ct["a"])(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(ut["a"])(this,n)}}function yt(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}var _t=function(t){Object(st["a"])(n,t);var e=mt(n);function n(){var t;return Object(et["a"])(this,n),t=e.call(this),t.childNodes=[],t}return Object(nt["a"])(n,[{key:"appendChild",value:function(t){this.childNodes.push(t)}},{key:"cloneNode",value:function(){var t=Object.create(this);return Object.assign(t,this),t}},{key:"removeChild",value:function(t){var e=this.childNodes.findIndex((function(e){return e===t}));return e>-1?this.childNodes.splice(e,1):null}}]),n}(gt);function bt(t){var e=xt();return function(){var n,r=Object(ct["a"])(t);if(e){var i=Object(ct["a"])(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(ut["a"])(this,n)}}function xt(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}var wt,Et,St,Ot,Ct=function(t){Object(st["a"])(n,t);var e=bt(n);function n(){var t;return Object(et["a"])(this,n),t=e.call(this),t.className="",t.children=[],t}return Object(nt["a"])(n,[{key:"setAttribute",value:function(t,e){this[t]=e}},{key:"getAttribute",value:function(t){return this[t]}},{key:"setAttributeNS",value:function(t,e){this[t]=e}},{key:"getAttributeNS",value:function(t){return this[t]}}]),n}(_t),Tt="undefined"!==typeof my&&!!my&&"function"===typeof my.showToast&&!0!==my.isFRM;if(Tt){var At=my.getSystemInfoSync();wt=At.screenWidth,Et=At.screenHeight,St=At.windowWidth,Ot=At.windowHeight}else{var kt=it["a"].innerWidth,Mt=it["a"].innerHeight;wt=kt,Et=Mt,St=kt,Ot=Mt}var Pt={width:wt,height:Et,availWidth:St,availHeight:Ot,availLeft:0,availTop:0},Rt=Pt.availWidth,jt=Pt.availHeight,It={style:[]};function Lt(t,e){var n,r;"parentNode"in t||(n=0===e?function(){return null}:1===e?function(){return It}:function(){return null},Object.defineProperty(t,"parentNode",{enumerable:!0,get:n}));"parentElement"in t||(r=0===e?function(){return null}:1===e?function(){return It}:function(){return null},Object.defineProperty(t,"parentElement",{enumerable:!0,get:r}))}function Nt(t){t.style=t.style||{},Object.assign(t.style,{top:"0px",left:"0px",width:Rt+"px",height:jt+"px",margin:"0px",padding:"0px"})}function Dt(t){"clientLeft"in t||(t.clientLeft=0,t.clientTop=0),"clientWidth"in t||(t.clientWidth=Rt,t.clientHeight=jt),"getBoundingClientRect"in t||(t.getBoundingClientRect=function(){var t={x:0,y:0,top:0,left:0,width:this.clientWidth,height:this.clientHeight,right:this.clientWidth,bottom:this.clientHeight};return t})}function Ft(t){"offsetLeft"in t||(t.offsetLeft=0,t.offsetTop=0),"offsetWidth"in t||(t.offsetWidth=Rt,t.offsetHeight=jt)}function Bt(t){"scrollLeft"in t||(t.scrollLeft=0,t.scrollTop=0),"scrollWidth"in t||(t.scrollWidth=Rt,t.scrollHeight=jt)}function zt(t){var e=function(){return!0};t.classList=[],t.classList.add=e,t.classList.remove=e,t.classList.contains=e,t.classList.toggle=e}function Ut(t){var e=Vt();return function(){var n,r=Object(ct["a"])(t);if(e){var i=Object(ct["a"])(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(ut["a"])(this,n)}}function Vt(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function Ht(){}var Gt=function(t){Object(st["a"])(n,t);var e=Ut(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",i=arguments.length>1?arguments[1]:void 0;return Object(et["a"])(this,n),t=e.call(this),t.className="",t.children=[],t.focus=Ht,t.blur=Ht,t.insertBefore=Ht,t.appendChild=Ht,t.removeChild=Ht,t.remove=Ht,t.innerHTML="",t.tagName=r.toUpperCase(),Lt(Object(ft["a"])(t),i),Nt(Object(ft["a"])(t)),zt(Object(ft["a"])(t)),Dt(Object(ft["a"])(t)),Ft(Object(ft["a"])(t)),Bt(Object(ft["a"])(t)),t}return Object(nt["a"])(n)}(Ct);function Wt(t){var e=Zt();return function(){var n,r=Object(ct["a"])(t);if(e){var i=Object(ct["a"])(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(ut["a"])(this,n)}}function Zt(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}var Yt=function(t){Object(st["a"])(n,t);var e=Wt(n);function n(t){return Object(et["a"])(this,n),e.call(this,t)}return Object(nt["a"])(n,[{key:"addTextTrack",value:function(){}},{key:"captureStream",value:function(){}},{key:"fastSeek",value:function(){}},{key:"load",value:function(){}},{key:"pause",value:function(){}},{key:"play",value:function(){}}]),n}(Gt);function Xt(t){var e=qt();return function(){var n,r=Object(ct["a"])(t);if(e){var i=Object(ct["a"])(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(ut["a"])(this,n)}}function qt(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}var Kt=function(t){Object(st["a"])(n,t);var e=Xt(n);function n(){return Object(et["a"])(this,n),e.call(this,"video")}return Object(nt["a"])(n)}(Yt),Qt={};function $t(){return Qt}var Jt=Object(nt["a"])((function t(){Object(et["a"])(this,t);var e=$t(),n=e.createImage&&e.createImage()||{};return"tagName"in n||(n.tagName="IMG",n.__proto__=t.prototype),Lt(n),zt(n),Object.assign(n,{addEventListener:function(t,e){n["on".concat(t)]=e.bind(n)},removeEventListener:function(t){n["on".concat(t)]=null}}),n})),te={href:"",protocol:"",host:""};function ee(t){var e=ne();return function(){var n,r=Object(ct["a"])(t);if(e){var i=Object(ct["a"])(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(ut["a"])(this,n)}}function ne(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}var re=function(t){Object(st["a"])(n,t);var e=ee(n);function n(){return Object(et["a"])(this,n),e.call(this,"body",0)}return Object(nt["a"])(n,[{key:"addEventListener",value:function(t,e){}},{key:"removeEventListener",value:function(t,e,n){}},{key:"dispatchEvent",value:function(t){}}]),n}(Gt),ie=function(t){Object(st["a"])(n,t);var e=ee(n);function n(){return Object(et["a"])(this,n),e.call(this,"html",0)}return Object(nt["a"])(n,[{key:"addEventListener",value:function(t,e){}},{key:"removeEventListener",value:function(t,e){}},{key:"dispatchEvent",value:function(t){}}]),n}(Gt),oe={},ae={readyState:"complete",visibilityState:"visible",hidden:!1,fullscreen:!0,scripts:[],style:{},location:te,ontouchstart:null,ontouchmove:null,ontouchend:null,onvisibilitychange:null,parentNode:null,parentElement:null,head:null,body:null,documentElement:{style:[]},createElement:function(t){return t=t.toLowerCase(),"canvas"===t?my.createOffscreenCanvas(1024,128,"2d"):"img"===t?new Jt:"video"===t?new Kt:new Gt(t)},createElementNS:function(t,e){return this.createElement(e)},createTextNode:function(t){return t},getElementById:function(t){return null},getElementsByTagName:function(t){return t=t.toLowerCase(),[]},getElementsByTagNameNS:function(t,e){return this.getElementsByTagName(e)},getElementsByName:function(t){return[]},querySelector:function(t){return null},querySelectorAll:function(t){return[]},addEventListener:function(t,e,n){oe[t]||(oe[t]=[]),oe[t].push(e)},removeEventListener:function(t,e){var n=oe[t];if(n&&n.length>0)for(var r=n.length;r--;r>0)if(n[r]===e){n.splice(r,1);break}},dispatchEvent:function(t){var e=t.type,n=oe[e];if(n)for(var r=0;r<n.length;r++)n[r](t);t.target&&"function"===typeof t.target["on"+e]&&t.target["on"+e](t)},createEvent:function(t){return new lt(t)}};ae.documentElement=new ie,ae.head=new Gt("head"),ae.body=new re;var se,ue,ce,le=Object,fe=n("U8pU"),he=function(){function t(){Object(et["a"])(this,t);var e=arguments.length;if(2===e){if("number"===typeof arguments[0]&&"number"===typeof arguments[1])return this._w=arguments[0],this._h=arguments[1],void(this._data=new Uint8ClampedArray(this._w*this._h*4))}else 3===e&&"object"===Object(fe["a"])(arguments[0])&&"number"===typeof arguments[1]&&"number"===typeof arguments[2]&&(this._data=arguments[0],this._w=arguments[1],this._h=arguments[2]);throw new Error("ImageData: params error")}return Object(nt["a"])(t,[{key:"width",get:function(){return this._w}},{key:"height",get:function(){return this._h}},{key:"data",get:function(){return this._data}}]),t}(),pe="undefined"!==typeof my&&!!my&&"function"===typeof my.showToast&&!0!==my.isFRM;if(pe){var de=my.getSystemInfoSync();se=de.system,ue=de.platform,ce=de.language}else{var ve={versions:function(){var t=it["a"].navigator.userAgent;return{trident:t.indexOf("Trident")>-1,presto:t.indexOf("Presto")>-1,webKit:t.indexOf("AppleWebKit")>-1,gecko:t.indexOf("Gecko")>-1&&-1===t.indexOf("KHTML"),mobile:!!t.match(/AppleWebKit.*Mobile.*/),ios:!!t.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),android:t.indexOf("Android")>-1||t.indexOf("Linux")>-1,iPhone:t.indexOf("iPhone")>-1,iPad:t.indexOf("iPad")>-1,webApp:-1===t.indexOf("Safari"),weixin:t.indexOf("MicroMessenger")>-1,qq:" qq"===t.match(/\sQQ/i)}}(),language:(it["a"].navigator.browserLanguage||it["a"].navigator.language).toLowerCase()};ve.versions.android?ue="android":ve.versions.trident?ue="IE":ve.versions.presto?ue="Opera":ve.versions.webKit?ue="webKit":ve.versions.gecko?ue="Firefox":ve.versions.mobile?ue="mobile":ve.versions.ios?ue="ios":ve.versions.iPhone?ue="iPhone":ve.versions.iPad?ue="ipad":ve.versions.webApp?ue="webApp":ve.versions.weixin?ue="weixin":ve.versions.qq&&(ue="qq"),se=it["a"].navigator.userAgent,ce=ve.language}var ge=-1!==se.toLowerCase().indexOf("android"),me=ge?"Android; CPU Android 6.0":"iPhone; CPU iPhone OS 10_3_1 like Mac OS X",ye="Mozilla/5.0 (".concat(me,") AppleWebKit/603.1.30 (KHTML, like Gecko) Mobile/14E8301 MicroMessenger/6.6.0 MiniGame NetType/WIFI Language/").concat(ce),_e={platform:ue,language:ce,appVersion:"5.0 (".concat(me,") AppleWebKit/601.1.46 (KHTML, like Gecko) Version/9.0 Mobile/13B143 Safari/601.1"),userAgent:ye},be={mark:function(t){return null},clearMeasures:function(t){return null},clearMarks:function(t){return null},measure:function(t,e,n){return{duration:0}},now:function(){}},xe=0,we=0;function Ee(t){var e=Date.now(),n=Math.max(xe+23,e);return we=setTimeout((function(){t(xe=n)}),n-e),we}function Se(t){var e=$t();return e.requestAnimationFrame?e.requestAnimationFrame(t):Ee(t)}function Oe(t){var e=$t();return e.cancelAnimationFrame?e.cancelAnimationFrame(t):clearTimeout(t)}var Ce=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";Object(et["a"])(this,t),0!=e.indexOf("http://")&&0!=e.indexOf("https://")?this.href=n+e:this.href=e}return Object(nt["a"])(t,null,[{key:"createObjectURL",value:function(t){var e=t.buffers[0],n=t.type,r=Te(e),i="data:".concat(n,";base64, ");return i+r}}]),t}();function Te(t){for(var e="",n=new Uint8Array(t),r=n.byteLength,i=0;i<r;i++)e+=String.fromCharCode(n[i]);return tt(e)}var Ae={GCCSO_SHADER_BINARY_FJ:37472,_3DC_XY_AMD:34810,_3DC_X_AMD:34809,ACTIVE_ATTRIBUTES:35721,ACTIVE_ATTRIBUTE_MAX_LENGTH:35722,ACTIVE_PROGRAM_EXT:33369,ACTIVE_TEXTURE:34016,ACTIVE_UNIFORMS:35718,ACTIVE_UNIFORM_MAX_LENGTH:35719,ALIASED_LINE_WIDTH_RANGE:33902,ALIASED_POINT_SIZE_RANGE:33901,ALL_COMPLETED_NV:34034,ALL_SHADER_BITS_EXT:4294967295,ALPHA:6406,ALPHA16F_EXT:34844,ALPHA32F_EXT:34838,ALPHA8_EXT:32828,ALPHA8_OES:32828,ALPHA_BITS:3413,ALPHA_TEST_FUNC_QCOM:3009,ALPHA_TEST_QCOM:3008,ALPHA_TEST_REF_QCOM:3010,ALREADY_SIGNALED_APPLE:37146,ALWAYS:519,AMD_compressed_3DC_texture:1,AMD_compressed_ATC_texture:1,AMD_performance_monitor:1,AMD_program_binary_Z400:1,ANGLE_depth_texture:1,ANGLE_framebuffer_blit:1,ANGLE_framebuffer_multisample:1,ANGLE_instanced_arrays:1,ANGLE_pack_reverse_row_order:1,ANGLE_program_binary:1,ANGLE_texture_compression_dxt3:1,ANGLE_texture_compression_dxt5:1,ANGLE_texture_usage:1,ANGLE_translated_shader_source:1,ANY_SAMPLES_PASSED_CONSERVATIVE_EXT:36202,ANY_SAMPLES_PASSED_EXT:35887,APPLE_copy_texture_levels:1,APPLE_framebuffer_multisample:1,APPLE_rgb_422:1,APPLE_sync:1,APPLE_texture_format_BGRA8888:1,APPLE_texture_max_level:1,ARM_mali_program_binary:1,ARM_mali_shader_binary:1,ARM_rgba8:1,ARRAY_BUFFER:34962,ARRAY_BUFFER_BINDING:34964,ATC_RGBA_EXPLICIT_ALPHA_AMD:35987,ATC_RGBA_INTERPOLATED_ALPHA_AMD:34798,ATC_RGB_AMD:35986,ATTACHED_SHADERS:35717,BACK:1029,BGRA8_EXT:37793,BGRA_EXT:32993,BGRA_IMG:32993,BINNING_CONTROL_HINT_QCOM:36784,BLEND:3042,BLEND_COLOR:32773,BLEND_DST_ALPHA:32970,BLEND_DST_RGB:32968,BLEND_EQUATION:32777,BLEND_EQUATION_ALPHA:34877,BLEND_EQUATION_RGB:32777,BLEND_SRC_ALPHA:32971,BLEND_SRC_RGB:32969,BLUE_BITS:3412,BOOL:35670,BOOL_VEC2:35671,BOOL_VEC3:35672,BOOL_VEC4:35673,BUFFER:33504,BUFFER_ACCESS_OES:35003,BUFFER_MAPPED_OES:35004,BUFFER_MAP_POINTER_OES:35005,BUFFER_OBJECT_EXT:37201,BUFFER_SIZE:34660,BUFFER_USAGE:34661,BYTE:5120,CCW:2305,CLAMP_TO_BORDER_NV:33069,CLAMP_TO_EDGE:33071,COLOR_ATTACHMENT0:36064,COLOR_ATTACHMENT0_NV:36064,COLOR_ATTACHMENT10_NV:36074,COLOR_ATTACHMENT11_NV:36075,COLOR_ATTACHMENT12_NV:36076,COLOR_ATTACHMENT13_NV:36077,COLOR_ATTACHMENT14_NV:36078,COLOR_ATTACHMENT15_NV:36079,COLOR_ATTACHMENT1_NV:36065,COLOR_ATTACHMENT2_NV:36066,COLOR_ATTACHMENT3_NV:36067,COLOR_ATTACHMENT4_NV:36068,COLOR_ATTACHMENT5_NV:36069,COLOR_ATTACHMENT6_NV:36070,COLOR_ATTACHMENT7_NV:36071,COLOR_ATTACHMENT8_NV:36072,COLOR_ATTACHMENT9_NV:36073,COLOR_ATTACHMENT_EXT:37104,COLOR_BUFFER_BIT:16384,COLOR_BUFFER_BIT0_QCOM:1,COLOR_BUFFER_BIT1_QCOM:2,COLOR_BUFFER_BIT2_QCOM:4,COLOR_BUFFER_BIT3_QCOM:8,COLOR_BUFFER_BIT4_QCOM:16,COLOR_BUFFER_BIT5_QCOM:32,COLOR_BUFFER_BIT6_QCOM:64,COLOR_BUFFER_BIT7_QCOM:128,COLOR_CLEAR_VALUE:3106,COLOR_EXT:6144,COLOR_WRITEMASK:3107,COMPARE_REF_TO_TEXTURE_EXT:34894,COMPILE_STATUS:35713,COMPRESSED_RGBA_ASTC_10x10_KHR:37819,COMPRESSED_RGBA_ASTC_10x5_KHR:37816,COMPRESSED_RGBA_ASTC_10x6_KHR:37817,COMPRESSED_RGBA_ASTC_10x8_KHR:37818,COMPRESSED_RGBA_ASTC_12x10_KHR:37820,COMPRESSED_RGBA_ASTC_12x12_KHR:37821,COMPRESSED_RGBA_ASTC_4x4_KHR:37808,COMPRESSED_RGBA_ASTC_5x4_KHR:37809,COMPRESSED_RGBA_ASTC_5x5_KHR:37810,COMPRESSED_RGBA_ASTC_6x5_KHR:37811,COMPRESSED_RGBA_ASTC_6x6_KHR:37812,COMPRESSED_RGBA_ASTC_8x5_KHR:37813,COMPRESSED_RGBA_ASTC_8x6_KHR:37814,COMPRESSED_RGBA_ASTC_8x8_KHR:37815,COMPRESSED_RGBA_PVRTC_2BPPV1_IMG:35843,COMPRESSED_RGBA_PVRTC_2BPPV2_IMG:37175,COMPRESSED_RGBA_PVRTC_4BPPV1_IMG:35842,COMPRESSED_RGBA_PVRTC_4BPPV2_IMG:37176,COMPRESSED_RGBA_S3TC_DXT1_EXT:33777,COMPRESSED_RGBA_S3TC_DXT3_ANGLE:33778,COMPRESSED_RGBA_S3TC_DXT5_ANGLE:33779,COMPRESSED_RGB_PVRTC_2BPPV1_IMG:35841,COMPRESSED_RGB_PVRTC_4BPPV1_IMG:35840,COMPRESSED_RGB_S3TC_DXT1_EXT:33776,COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:37851,COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:37848,COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:37849,COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:37850,COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:37852,COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:37853,COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:37840,COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:37841,COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:37842,COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:37843,COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:37844,COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:37845,COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:37846,COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:37847,COMPRESSED_SRGB_ALPHA_S3TC_DXT1_NV:35917,COMPRESSED_SRGB_ALPHA_S3TC_DXT3_NV:35918,COMPRESSED_SRGB_ALPHA_S3TC_DXT5_NV:35919,COMPRESSED_SRGB_S3TC_DXT1_NV:35916,COMPRESSED_TEXTURE_FORMATS:34467,CONDITION_SATISFIED_APPLE:37148,CONSTANT_ALPHA:32771,CONSTANT_COLOR:32769,CONTEXT_FLAG_DEBUG_BIT:2,CONTEXT_ROBUST_ACCESS_EXT:37107,COUNTER_RANGE_AMD:35777,COUNTER_TYPE_AMD:35776,COVERAGE_ALL_FRAGMENTS_NV:36565,COVERAGE_ATTACHMENT_NV:36562,COVERAGE_AUTOMATIC_NV:36567,COVERAGE_BUFFERS_NV:36563,COVERAGE_BUFFER_BIT_NV:32768,COVERAGE_COMPONENT4_NV:36561,COVERAGE_COMPONENT_NV:36560,COVERAGE_EDGE_FRAGMENTS_NV:36566,COVERAGE_SAMPLES_NV:36564,CPU_OPTIMIZED_QCOM:36785,CULL_FACE:2884,CULL_FACE_MODE:2885,CURRENT_PROGRAM:35725,CURRENT_QUERY_EXT:34917,CURRENT_VERTEX_ATTRIB:34342,CW:2304,DEBUG_CALLBACK_FUNCTION:33348,DEBUG_CALLBACK_USER_PARAM:33349,DEBUG_GROUP_STACK_DEPTH:33389,DEBUG_LOGGED_MESSAGES:37189,DEBUG_NEXT_LOGGED_MESSAGE_LENGTH:33347,DEBUG_OUTPUT:37600,DEBUG_OUTPUT_SYNCHRONOUS:33346,DEBUG_SEVERITY_HIGH:37190,DEBUG_SEVERITY_LOW:37192,DEBUG_SEVERITY_MEDIUM:37191,DEBUG_SEVERITY_NOTIFICATION:33387,DEBUG_SOURCE_API:33350,DEBUG_SOURCE_APPLICATION:33354,DEBUG_SOURCE_OTHER:33355,DEBUG_SOURCE_SHADER_COMPILER:33352,DEBUG_SOURCE_THIRD_PARTY:33353,DEBUG_SOURCE_WINDOW_SYSTEM:33351,DEBUG_TYPE_DEPRECATED_BEHAVIOR:33357,DEBUG_TYPE_ERROR:33356,DEBUG_TYPE_MARKER:33384,DEBUG_TYPE_OTHER:33361,DEBUG_TYPE_PERFORMANCE:33360,DEBUG_TYPE_POP_GROUP:33386,DEBUG_TYPE_PORTABILITY:33359,DEBUG_TYPE_PUSH_GROUP:33385,DEBUG_TYPE_UNDEFINED_BEHAVIOR:33358,DECR:7683,DECR_WRAP:34056,DELETE_STATUS:35712,DEPTH24_STENCIL8_OES:35056,DEPTH_ATTACHMENT:36096,DEPTH_STENCIL_ATTACHMENT:33306,DEPTH_BITS:3414,DEPTH_BUFFER_BIT:256,DEPTH_BUFFER_BIT0_QCOM:256,DEPTH_BUFFER_BIT1_QCOM:512,DEPTH_BUFFER_BIT2_QCOM:1024,DEPTH_BUFFER_BIT3_QCOM:2048,DEPTH_BUFFER_BIT4_QCOM:4096,DEPTH_BUFFER_BIT5_QCOM:8192,DEPTH_BUFFER_BIT6_QCOM:16384,DEPTH_BUFFER_BIT7_QCOM:32768,DEPTH_CLEAR_VALUE:2931,DEPTH_COMPONENT:6402,DEPTH_COMPONENT16:33189,DEPTH_COMPONENT16_NONLINEAR_NV:36396,DEPTH_COMPONENT16_OES:33189,DEPTH_COMPONENT24_OES:33190,DEPTH_COMPONENT32_OES:33191,DEPTH_EXT:6145,DEPTH_FUNC:2932,DEPTH_RANGE:2928,DEPTH_STENCIL:34041,DEPTH_STENCIL_OES:34041,DEPTH_TEST:2929,DEPTH_WRITEMASK:2930,DITHER:3024,DMP_shader_binary:1,DONT_CARE:4352,DRAW_BUFFER0_NV:34853,DRAW_BUFFER10_NV:34863,DRAW_BUFFER11_NV:34864,DRAW_BUFFER12_NV:34865,DRAW_BUFFER13_NV:34866,DRAW_BUFFER14_NV:34867,DRAW_BUFFER15_NV:34868,DRAW_BUFFER1_NV:34854,DRAW_BUFFER2_NV:34855,DRAW_BUFFER3_NV:34856,DRAW_BUFFER4_NV:34857,DRAW_BUFFER5_NV:34858,DRAW_BUFFER6_NV:34859,DRAW_BUFFER7_NV:34860,DRAW_BUFFER8_NV:34861,DRAW_BUFFER9_NV:34862,DRAW_BUFFER_EXT:3073,DRAW_FRAMEBUFFER_ANGLE:36009,DRAW_FRAMEBUFFER_APPLE:36009,DRAW_FRAMEBUFFER_BINDING_ANGLE:36006,DRAW_FRAMEBUFFER_BINDING_APPLE:36006,DRAW_FRAMEBUFFER_BINDING_NV:36006,DRAW_FRAMEBUFFER_NV:36009,DST_ALPHA:772,DST_COLOR:774,DYNAMIC_DRAW:35048,ELEMENT_ARRAY_BUFFER:34963,ELEMENT_ARRAY_BUFFER_BINDING:34965,EQUAL:514,ES_VERSION_2_0:1,ETC1_RGB8_OES:36196,ETC1_SRGB8_NV:35054,EXTENSIONS:7939,EXT_blend_minmax:1,EXT_color_buffer_half_float:1,EXT_debug_label:1,EXT_debug_marker:1,EXT_discard_framebuffer:1,EXT_map_buffer_range:1,EXT_multi_draw_arrays:1,EXT_multisampled_render_to_texture:1,EXT_multiview_draw_buffers:1,EXT_occlusion_query_boolean:1,EXT_read_format_bgra:1,EXT_robustness:1,EXT_sRGB:1,EXT_separate_shader_objects:1,EXT_shader_framebuffer_fetch:1,EXT_shader_texture_lod:1,EXT_shadow_samplers:1,EXT_texture_compression_dxt1:1,EXT_texture_filter_anisotropic:1,EXT_texture_format_BGRA8888:1,EXT_texture_rg:1,EXT_texture_storage:1,EXT_texture_type_2_10_10_10_REV:1,EXT_unpack_subimage:1,FALSE:0,FASTEST:4353,FENCE_CONDITION_NV:34036,FENCE_STATUS_NV:34035,FIXED:5132,FJ_shader_binary_GCCSO:1,FLOAT:5126,FLOAT_MAT2:35674,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,FRAGMENT_SHADER:35632,FRAGMENT_SHADER_BIT_EXT:2,FRAGMENT_SHADER_DERIVATIVE_HINT_OES:35723,FRAGMENT_SHADER_DISCARDS_SAMPLES_EXT:35410,FRAMEBUFFER:36160,FRAMEBUFFER_ATTACHMENT_ANGLE:37795,FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING_EXT:33296,FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE_EXT:33297,FRAMEBUFFER_ATTACHMENT_OBJECT_NAME:36049,FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE:36048,FRAMEBUFFER_ATTACHMENT_TEXTURE_3D_ZOFFSET_OES:36052,FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE:36051,FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL:36050,FRAMEBUFFER_ATTACHMENT_TEXTURE_SAMPLES_EXT:36204,FRAMEBUFFER_BINDING:36006,FRAMEBUFFER_COMPLETE:36053,FRAMEBUFFER_INCOMPLETE_ATTACHMENT:36054,FRAMEBUFFER_INCOMPLETE_DIMENSIONS:36057,FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:36055,FRAMEBUFFER_INCOMPLETE_MULTISAMPLE_ANGLE:36182,FRAMEBUFFER_INCOMPLETE_MULTISAMPLE_APPLE:36182,FRAMEBUFFER_INCOMPLETE_MULTISAMPLE_EXT:36182,FRAMEBUFFER_INCOMPLETE_MULTISAMPLE_IMG:37172,FRAMEBUFFER_INCOMPLETE_MULTISAMPLE_NV:36182,FRAMEBUFFER_UNDEFINED_OES:33305,FRAMEBUFFER_UNSUPPORTED:36061,FRONT:1028,FRONT_AND_BACK:1032,FRONT_FACE:2886,FUNC_ADD:32774,FUNC_REVERSE_SUBTRACT:32779,FUNC_SUBTRACT:32778,GENERATE_MIPMAP_HINT:33170,GEQUAL:518,GPU_OPTIMIZED_QCOM:36786,GREATER:516,GREEN_BITS:3411,GUILTY_CONTEXT_RESET_EXT:33363,HALF_FLOAT_OES:36193,HIGH_FLOAT:36338,HIGH_INT:36341,IMG_multisampled_render_to_texture:1,IMG_program_binary:1,IMG_read_format:1,IMG_shader_binary:1,IMG_texture_compression_pvrtc:1,IMG_texture_compression_pvrtc2:1,IMPLEMENTATION_COLOR_READ_FORMAT:35739,IMPLEMENTATION_COLOR_READ_TYPE:35738,INCR:7682,INCR_WRAP:34055,INFO_LOG_LENGTH:35716,INNOCENT_CONTEXT_RESET_EXT:33364,INT:5124,INT_10_10_10_2_OES:36343,INT_VEC2:35667,INT_VEC3:35668,INT_VEC4:35669,INVALID_ENUM:1280,INVALID_FRAMEBUFFER_OPERATION:1286,INVALID_OPERATION:1282,INVALID_VALUE:1281,INVERT:5386,KEEP:7680,KHR_debug:1,KHR_texture_compression_astc_ldr:1,LEFT:1030,LEQUAL:515,LESS:513,LINEAR:9729,LINEAR_MIPMAP_LINEAR:9987,LINEAR_MIPMAP_NEAREST:9985,LINES:1,LINE_LOOP:2,LINE_STRIP:3,LINE_WIDTH:2849,LINK_STATUS:35714,LOSE_CONTEXT_ON_RESET_EXT:33362,LOW_FLOAT:36336,LOW_INT:36339,LUMINANCE:6409,LUMINANCE16F_EXT:34846,LUMINANCE32F_EXT:34840,LUMINANCE4_ALPHA4_OES:32835,LUMINANCE8_ALPHA8_EXT:32837,LUMINANCE8_ALPHA8_OES:32837,LUMINANCE8_EXT:32832,LUMINANCE8_OES:32832,LUMINANCE_ALPHA:6410,LUMINANCE_ALPHA16F_EXT:34847,LUMINANCE_ALPHA32F_EXT:34841,MALI_PROGRAM_BINARY_ARM:36705,MALI_SHADER_BINARY_ARM:36704,MAP_FLUSH_EXPLICIT_BIT_EXT:16,MAP_INVALIDATE_BUFFER_BIT_EXT:8,MAP_INVALIDATE_RANGE_BIT_EXT:4,MAP_READ_BIT_EXT:1,MAP_UNSYNCHRONIZED_BIT_EXT:32,MAP_WRITE_BIT_EXT:2,MAX_3D_TEXTURE_SIZE_OES:32883,MAX_COLOR_ATTACHMENTS_NV:36063,MAX_COMBINED_TEXTURE_IMAGE_UNITS:35661,MAX_CUBE_MAP_TEXTURE_SIZE:34076,MAX_DEBUG_GROUP_STACK_DEPTH:33388,MAX_DEBUG_LOGGED_MESSAGES:37188,MAX_DEBUG_MESSAGE_LENGTH:37187,MAX_DRAW_BUFFERS_NV:34852,MAX_EXT:32776,MAX_FRAGMENT_UNIFORM_VECTORS:36349,MAX_LABEL_LENGTH:33512,MAX_MULTIVIEW_BUFFERS_EXT:37106,MAX_RENDERBUFFER_SIZE:34024,MAX_SAMPLES_ANGLE:36183,MAX_SAMPLES_APPLE:36183,MAX_SAMPLES_EXT:36183,MAX_SAMPLES_IMG:37173,MAX_SAMPLES_NV:36183,MAX_SERVER_WAIT_TIMEOUT_APPLE:37137,MAX_TEXTURE_IMAGE_UNITS:34930,MAX_TEXTURE_MAX_ANISOTROPY_EXT:34047,MAX_TEXTURE_SIZE:3379,MAX_VARYING_VECTORS:36348,MAX_VERTEX_ATTRIBS:34921,MAX_VERTEX_TEXTURE_IMAGE_UNITS:35660,MAX_VERTEX_UNIFORM_VECTORS:36347,MAX_VIEWPORT_DIMS:3386,MEDIUM_FLOAT:36337,MEDIUM_INT:36340,MIN_EXT:32775,MIRRORED_REPEAT:33648,MULTISAMPLE_BUFFER_BIT0_QCOM:16777216,MULTISAMPLE_BUFFER_BIT1_QCOM:33554432,MULTISAMPLE_BUFFER_BIT2_QCOM:67108864,MULTISAMPLE_BUFFER_BIT3_QCOM:134217728,MULTISAMPLE_BUFFER_BIT4_QCOM:268435456,MULTISAMPLE_BUFFER_BIT5_QCOM:536870912,MULTISAMPLE_BUFFER_BIT6_QCOM:1073741824,MULTISAMPLE_BUFFER_BIT7_QCOM:2147483648,MULTIVIEW_EXT:37105,NEAREST:9728,NEAREST_MIPMAP_LINEAR:9986,NEAREST_MIPMAP_NEAREST:9984,NEVER:512,NICEST:4354,NONE:0,NOTEQUAL:517,NO_ERROR:0,NO_RESET_NOTIFICATION_EXT:33377,NUM_COMPRESSED_TEXTURE_FORMATS:34466,NUM_PROGRAM_BINARY_FORMATS_OES:34814,NUM_SHADER_BINARY_FORMATS:36345,NV_coverage_sample:1,NV_depth_nonlinear:1,NV_draw_buffers:1,NV_draw_instanced:1,NV_fbo_color_attachments:1,NV_fence:1,NV_framebuffer_blit:1,NV_framebuffer_multisample:1,NV_generate_mipmap_sRGB:1,NV_instanced_arrays:1,NV_read_buffer:1,NV_read_buffer_front:1,NV_read_depth:1,NV_read_depth_stencil:1,NV_read_stencil:1,NV_sRGB_formats:1,NV_shadow_samplers_array:1,NV_shadow_samplers_cube:1,NV_texture_border_clamp:1,NV_texture_compression_s3tc_update:1,NV_texture_npot_2D_mipmap:1,OBJECT_TYPE_APPLE:37138,OES_EGL_image:1,OES_EGL_image_external:1,OES_compressed_ETC1_RGB8_texture:1,OES_compressed_paletted_texture:1,OES_depth24:1,OES_depth32:1,OES_depth_texture:1,OES_element_index_uint:1,OES_fbo_render_mipmap:1,OES_fragment_precision_high:1,OES_get_program_binary:1,OES_mapbuffer:1,OES_packed_depth_stencil:1,OES_required_internalformat:1,OES_rgb8_rgba8:1,OES_standard_derivatives:1,OES_stencil1:1,OES_stencil4:1,OES_surfaceless_context:1,OES_texture_3D:1,OES_texture_float:1,OES_texture_float_linear:1,OES_texture_half_float:1,OES_texture_half_float_linear:1,OES_texture_npot:1,OES_vertex_array_object:1,OES_vertex_half_float:1,OES_vertex_type_10_10_10_2:1,ONE:1,ONE_MINUS_CONSTANT_ALPHA:32772,ONE_MINUS_CONSTANT_COLOR:32770,ONE_MINUS_DST_ALPHA:773,ONE_MINUS_DST_COLOR:775,ONE_MINUS_SRC_ALPHA:771,ONE_MINUS_SRC_COLOR:769,OUT_OF_MEMORY:1285,PACK_ALIGNMENT:3333,PACK_REVERSE_ROW_ORDER_ANGLE:37796,PALETTE4_R5_G6_B5_OES:35730,PALETTE4_RGB5_A1_OES:35732,PALETTE4_RGB8_OES:35728,PALETTE4_RGBA4_OES:35731,PALETTE4_RGBA8_OES:35729,PALETTE8_R5_G6_B5_OES:35735,PALETTE8_RGB5_A1_OES:35737,PALETTE8_RGB8_OES:35733,PALETTE8_RGBA4_OES:35736,PALETTE8_RGBA8_OES:35734,PERCENTAGE_AMD:35779,PERFMON_GLOBAL_MODE_QCOM:36768,PERFMON_RESULT_AMD:35782,PERFMON_RESULT_AVAILABLE_AMD:35780,PERFMON_RESULT_SIZE_AMD:35781,POINTS:0,POLYGON_OFFSET_FACTOR:32824,POLYGON_OFFSET_FILL:32823,POLYGON_OFFSET_UNITS:10752,PROGRAM:33506,PROGRAM_BINARY_ANGLE:37798,PROGRAM_BINARY_FORMATS_OES:34815,PROGRAM_BINARY_LENGTH_OES:34625,PROGRAM_OBJECT_EXT:35648,PROGRAM_PIPELINE_BINDING_EXT:33370,PROGRAM_PIPELINE_OBJECT_EXT:35407,PROGRAM_SEPARABLE_EXT:33368,QCOM_alpha_test:1,QCOM_binning_control:1,QCOM_driver_control:1,QCOM_extended_get:1,QCOM_extended_get2:1,QCOM_perfmon_global_mode:1,QCOM_tiled_rendering:1,QCOM_writeonly_rendering:1,QUERY:33507,QUERY_OBJECT_EXT:37203,QUERY_RESULT_AVAILABLE_EXT:34919,QUERY_RESULT_EXT:34918,R16F_EXT:33325,R32F_EXT:33326,R8_EXT:33321,READ_BUFFER_EXT:3074,READ_BUFFER_NV:3074,READ_FRAMEBUFFER_ANGLE:36008,READ_FRAMEBUFFER_APPLE:36008,READ_FRAMEBUFFER_BINDING_ANGLE:36010,READ_FRAMEBUFFER_BINDING_APPLE:36010,READ_FRAMEBUFFER_BINDING_NV:36010,READ_FRAMEBUFFER_NV:36008,RED_BITS:3410,RED_EXT:6403,RENDERBUFFER:36161,RENDERBUFFER_ALPHA_SIZE:36179,RENDERBUFFER_BINDING:36007,RENDERBUFFER_BLUE_SIZE:36178,RENDERBUFFER_DEPTH_SIZE:36180,RENDERBUFFER_GREEN_SIZE:36177,RENDERBUFFER_HEIGHT:36163,RENDERBUFFER_INTERNAL_FORMAT:36164,RENDERBUFFER_RED_SIZE:36176,RENDERBUFFER_SAMPLES_ANGLE:36011,RENDERBUFFER_SAMPLES_APPLE:36011,RENDERBUFFER_SAMPLES_EXT:36011,RENDERBUFFER_SAMPLES_IMG:37171,RENDERBUFFER_SAMPLES_NV:36011,RENDERBUFFER_STENCIL_SIZE:36181,RENDERBUFFER_WIDTH:36162,RENDERER:7937,RENDER_DIRECT_TO_FRAMEBUFFER_QCOM:36787,REPEAT:10497,REPLACE:7681,REQUIRED_TEXTURE_IMAGE_UNITS_OES:36200,RESET_NOTIFICATION_STRATEGY_EXT:33366,RG16F_EXT:33327,RG32F_EXT:33328,RG8_EXT:33323,RGB:6407,RGB10_A2_EXT:32857,RGB10_EXT:32850,RGB16F_EXT:34843,RGB32F_EXT:34837,RGB565:36194,RGB565_OES:36194,RGB5_A1:32855,RGB5_A1_OES:32855,RGB8_OES:32849,RGBA:6408,RGBA16F_EXT:34842,RGBA32F_EXT:34836,RGBA4:32854,RGBA4_OES:32854,RGBA8_OES:32856,RGB_422_APPLE:35359,RG_EXT:33319,RIGHT:1031,SAMPLER:33510,SAMPLER_2D:35678,SAMPLER_2D_ARRAY_SHADOW_NV:36292,SAMPLER_2D_SHADOW_EXT:35682,SAMPLER_3D_OES:35679,SAMPLER_CUBE:35680,SAMPLER_CUBE_SHADOW_NV:36293,SAMPLER_EXTERNAL_OES:36198,SAMPLES:32937,SAMPLE_ALPHA_TO_COVERAGE:32926,SAMPLE_BUFFERS:32936,SAMPLE_COVERAGE:32928,SAMPLE_COVERAGE_INVERT:32939,SAMPLE_COVERAGE_VALUE:32938,SCISSOR_BOX:3088,SCISSOR_TEST:3089,SGX_BINARY_IMG:35850,SGX_PROGRAM_BINARY_IMG:37168,SHADER:33505,SHADER_BINARY_DMP:37456,SHADER_BINARY_FORMATS:36344,SHADER_BINARY_VIV:36804,SHADER_COMPILER:36346,SHADER_OBJECT_EXT:35656,SHADER_SOURCE_LENGTH:35720,SHADER_TYPE:35663,SHADING_LANGUAGE_VERSION:35724,SHORT:5122,SIGNALED_APPLE:37145,SLUMINANCE8_ALPHA8_NV:35909,SLUMINANCE8_NV:35911,SLUMINANCE_ALPHA_NV:35908,SLUMINANCE_NV:35910,SRC_ALPHA:770,SRC_ALPHA_SATURATE:776,SRC_COLOR:768,SRGB8_ALPHA8_EXT:35907,SRGB8_NV:35905,SRGB_ALPHA_EXT:35906,SRGB_EXT:35904,STACK_OVERFLOW:1283,STACK_UNDERFLOW:1284,STATE_RESTORE:35804,STATIC_DRAW:35044,STENCIL_ATTACHMENT:36128,STENCIL_BACK_FAIL:34817,STENCIL_BACK_FUNC:34816,STENCIL_BACK_PASS_DEPTH_FAIL:34818,STENCIL_BACK_PASS_DEPTH_PASS:34819,STENCIL_BACK_REF:36003,STENCIL_BACK_VALUE_MASK:36004,STENCIL_BACK_WRITEMASK:36005,STENCIL_BITS:3415,STENCIL_BUFFER_BIT:1024,STENCIL_BUFFER_BIT0_QCOM:65536,STENCIL_BUFFER_BIT1_QCOM:131072,STENCIL_BUFFER_BIT2_QCOM:262144,STENCIL_BUFFER_BIT3_QCOM:524288,STENCIL_BUFFER_BIT4_QCOM:1048576,STENCIL_BUFFER_BIT5_QCOM:2097152,STENCIL_BUFFER_BIT6_QCOM:4194304,STENCIL_BUFFER_BIT7_QCOM:8388608,STENCIL_CLEAR_VALUE:2961,STENCIL_EXT:6146,STENCIL_FAIL:2964,STENCIL_FUNC:2962,STENCIL_INDEX1_OES:36166,STENCIL_INDEX4_OES:36167,STENCIL_INDEX:6401,STENCIL_INDEX8:36168,STENCIL_PASS_DEPTH_FAIL:2965,STENCIL_PASS_DEPTH_PASS:2966,STENCIL_REF:2967,STENCIL_TEST:2960,STENCIL_VALUE_MASK:2963,STENCIL_WRITEMASK:2968,STREAM_DRAW:35040,SUBPIXEL_BITS:3408,SYNC_CONDITION_APPLE:37139,SYNC_FENCE_APPLE:37142,SYNC_FLAGS_APPLE:37141,SYNC_FLUSH_COMMANDS_BIT_APPLE:1,SYNC_GPU_COMMANDS_COMPLETE_APPLE:37143,SYNC_OBJECT_APPLE:35411,SYNC_STATUS_APPLE:37140,TEXTURE:5890,TEXTURE0:33984,TEXTURE1:33985,TEXTURE10:33994,TEXTURE11:33995,TEXTURE12:33996,TEXTURE13:33997,TEXTURE14:33998,TEXTURE15:33999,TEXTURE16:34e3,TEXTURE17:34001,TEXTURE18:34002,TEXTURE19:34003,TEXTURE2:33986,TEXTURE20:34004,TEXTURE21:34005,TEXTURE22:34006,TEXTURE23:34007,TEXTURE24:34008,TEXTURE25:34009,TEXTURE26:34010,TEXTURE27:34011,TEXTURE28:34012,TEXTURE29:34013,TEXTURE3:33987,TEXTURE30:34014,TEXTURE31:34015,TEXTURE4:33988,TEXTURE5:33989,TEXTURE6:33990,TEXTURE7:33991,TEXTURE8:33992,TEXTURE9:33993,TEXTURE_2D:3553,TEXTURE_3D_OES:32879,TEXTURE_BINDING_2D:32873,TEXTURE_BINDING_3D_OES:32874,TEXTURE_BINDING_CUBE_MAP:34068,TEXTURE_BINDING_EXTERNAL_OES:36199,TEXTURE_BORDER_COLOR_NV:4100,TEXTURE_COMPARE_FUNC_EXT:34893,TEXTURE_COMPARE_MODE_EXT:34892,TEXTURE_CUBE_MAP:34067,TEXTURE_CUBE_MAP_NEGATIVE_X:34070,TEXTURE_CUBE_MAP_NEGATIVE_Y:34072,TEXTURE_CUBE_MAP_NEGATIVE_Z:34074,TEXTURE_CUBE_MAP_POSITIVE_X:34069,TEXTURE_CUBE_MAP_POSITIVE_Y:34071,TEXTURE_CUBE_MAP_POSITIVE_Z:34073,TEXTURE_DEPTH_QCOM:35796,TEXTURE_EXTERNAL_OES:36197,TEXTURE_FORMAT_QCOM:35798,TEXTURE_HEIGHT_QCOM:35795,TEXTURE_IMAGE_VALID_QCOM:35800,TEXTURE_IMMUTABLE_FORMAT_EXT:37167,TEXTURE_INTERNAL_FORMAT_QCOM:35797,TEXTURE_MAG_FILTER:10240,TEXTURE_MAX_ANISOTROPY_EXT:34046,TEXTURE_MAX_LEVEL_APPLE:33085,TEXTURE_MIN_FILTER:10241,TEXTURE_NUM_LEVELS_QCOM:35801,TEXTURE_OBJECT_VALID_QCOM:35803,TEXTURE_SAMPLES_IMG:37174,TEXTURE_TARGET_QCOM:35802,TEXTURE_TYPE_QCOM:35799,TEXTURE_USAGE_ANGLE:37794,TEXTURE_WIDTH_QCOM:35794,TEXTURE_WRAP_R_OES:32882,TEXTURE_WRAP_S:10242,TEXTURE_WRAP_T:10243,TIMEOUT_EXPIRED_APPLE:37147,TIMEOUT_IGNORED_APPLE:0x10000000000000000,TRANSLATED_SHADER_SOURCE_LENGTH_ANGLE:37792,TRIANGLES:4,TRIANGLE_FAN:6,TRIANGLE_STRIP:5,TRUE:1,UNKNOWN_CONTEXT_RESET_EXT:33365,UNPACK_ALIGNMENT:3317,UNPACK_ROW_LENGTH:3314,UNPACK_SKIP_PIXELS:3316,UNPACK_SKIP_ROWS:3315,UNSIGNALED_APPLE:37144,UNSIGNED_BYTE:5121,UNSIGNED_INT:5125,UNSIGNED_INT64_AMD:35778,UNSIGNED_INT_10_10_10_2_OES:36342,UNSIGNED_INT_24_8_OES:34042,UNSIGNED_INT_2_10_10_10_REV_EXT:33640,UNSIGNED_NORMALIZED_EXT:35863,UNSIGNED_SHORT:5123,UNSIGNED_SHORT_1_5_5_5_REV_EXT:33638,UNSIGNED_SHORT_4_4_4_4:32819,UNSIGNED_SHORT_4_4_4_4_REV_EXT:33637,UNSIGNED_SHORT_4_4_4_4_REV_IMG:33637,UNSIGNED_SHORT_5_5_5_1:32820,UNSIGNED_SHORT_5_6_5:33635,UNSIGNED_SHORT_8_8_APPLE:34234,UNSIGNED_SHORT_8_8_REV_APPLE:34235,VALIDATE_STATUS:35715,VENDOR:7936,VERSION:7938,VERTEX_ARRAY_BINDING_OES:34229,VERTEX_ARRAY_OBJECT_EXT:37204,VERTEX_ATTRIB_ARRAY_BUFFER_BINDING:34975,VERTEX_ATTRIB_ARRAY_DIVISOR_ANGLE:35070,VERTEX_ATTRIB_ARRAY_DIVISOR_NV:35070,VERTEX_ATTRIB_ARRAY_ENABLED:34338,VERTEX_ATTRIB_ARRAY_NORMALIZED:34922,VERTEX_ATTRIB_ARRAY_POINTER:34373,VERTEX_ATTRIB_ARRAY_SIZE:34339,VERTEX_ATTRIB_ARRAY_STRIDE:34340,VERTEX_ATTRIB_ARRAY_TYPE:34341,VERTEX_SHADER:35633,VERTEX_SHADER_BIT_EXT:1,VIEWPORT:2978,VIV_shader_binary:1,WAIT_FAILED_APPLE:37149,WRITEONLY_RENDERING_QCOM:34851,WRITE_ONLY_OES:35001,Z400_BINARY_AMD:34624,ZERO:0,RASTERIZER_DISCARD:35977,UNPACK_FLIP_Y_WEBGL:37440,UNPACK_PREMULTIPLY_ALPHA_WEBGL:37441,CONTEXT_LOST_WEBGL:37442,UNPACK_COLORSPACE_CONVERSION_WEBGL:37443,BROWSER_DEFAULT_WEBGL:37444},ke={};function Me(t){var e=Pe();return function(){var n,r=Object(ct["a"])(t);if(e){var i=Object(ct["a"])(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(ut["a"])(this,n)}}function Pe(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}var Re=new Map,je=new Map,Ie=new Map;var Le=function(t){Object(st["a"])(n,t);var e=Me(n);function n(){var t;return Object(et["a"])(this,n),t=e.call(this),t.onabort=null,t.onerror=null,t.onload=null,t.onloadstart=null,t.onprogress=null,t.ontimeout=null,t.onloadend=null,t.onreadystatechange=null,t.readyState=0,t.response=null,t.responseText=null,t._responseType="text",t.responseXML=null,t.status=0,t.statusText="",t.upload={},t.withCredentials=!1,Re.set("requestHeader",{"content-type":"application/x-www-form-urlencoded"}),t}return Object(nt["a"])(n,[{key:"responseType",set:function(t){this._responseType=t}},{key:"abort",value:function(){var t=Ie.get("requestTask");t&&t.abort()}},{key:"getAllResponseHeaders",value:function(){var t=je.get("responseHeader");return Object.keys(t).map((function(e){return"".concat(e,": ").concat(t[e])})).join("\n")}},{key:"getResponseHeader",value:function(t){return je.get("responseHeader")[t]}},{key:"open",value:function(t,e,n){this._method=t,this._url=e}},{key:"overrideMimeType",value:function(){}},{key:"send",value:function(){}},{key:"setRequestHeader",value:function(t,e){var n=Re.get("requestHeader");n[t]=e,Re.set("requestHeader",n)}},{key:"addEventListener",value:function(t,e){var n=this;"function"===typeof e&&(this["on"+t]=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t.target=t.target||n,e.call(n,t)})}},{key:"removeEventListener",value:function(t,e){this["on"+t]===e&&(this["on"+t]=null)}}]),n}(gt);function Ne(t){var e=De();return function(){var n,r=Object(ct["a"])(t);if(e){var i=Object(ct["a"])(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(ut["a"])(this,n)}}function De(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}Le.UNSEND=0,Le.OPENED=1,Le.HEADERS_RECEIVED=2,Le.LOADING=3,Le.DONE=4;var Fe=function(t){Object(st["a"])(n,t);var e=Ne(n);function n(t){var r;return Object(et["a"])(this,n),r=e.call(this,t),r.touches=[],r.targetTouches=[],r.changedTouches=[],r.target=$t(),r.currentTarget=$t(),r}return Object(nt["a"])(n)}(lt);function Be(t){var e=t||{},n=e.x,r=void 0===n?0:n,i=e.y,o=void 0===i?0:i,a=e.clientX,s=void 0===a?0:a,u=e.clientY,c=void 0===u?0:u;-1!==Object.keys(t).indexOf("x")?(t.pageX=t.clientX=r,t.pageY=t.clientY=o):(t.x=s,t.y=c)}function ze(t){return function(e){var n=new Fe(t);n.changedTouches=e.changedTouches,n.touches=e.touches,n.targetTouches=Array.prototype.slice.call(e.touches),n.timeStamp=e.timeStamp,n.changedTouches.forEach((function(t){return Be(t)})),n.touches.forEach((function(t){return Be(t)})),n.targetTouches.forEach((function(t){return Be(t)})),ae.dispatchEvent(n)}}function Ue(t){return function(e){e.type=t,ae.dispatchEvent(e)}}ze("touchstart"),ze("touchmove"),ze("touchend"),Ue("mapCameaParams");function Ve(t){var e=He();return function(){var n,r=Object(ct["a"])(t);if(e){var i=Object(ct["a"])(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(ut["a"])(this,n)}}function He(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}var Ge=function(t){Object(st["a"])(n,t);var e=Ve(n);function n(t){var r;return Object(et["a"])(this,n),r=e.call(this,t),r.target=$t(),r.currentTarget=$t(),r}return Object(nt["a"])(n)}(lt),We=["bubbles","cancelable","view","detail","screenX","screenY","clientX","clientY","ctrlKey","altKey","shiftKey","metaKey","button","relatedTarget","pointerId","width","height","pressure","tiltX","tiltY","pointerType","hwTimestamp","isPrimary","pageX","pageY","timeStamp"],Ze=[!1,!1,null,null,0,0,0,0,!1,!1,!1,!1,0,null,0,0,0,0,0,0,0,"",0,!1,0,0,0],Ye="touch";function Xe(t,e,n){for(var r=new Ge(t),i=0;i<We.length;i++){var o=We[i];r[o]=e[o]||Ze[i]}return r.type=t,r.target=$t(),r.currentTarget=$t(),r.buttons=qe(t),r.which=r.buttons,r.pointerId=(e.identifier||0)+2,r.bubbles=!0,r.cancelable=!0,r.button=0,r.width=2*(e.radiusX||.5),r.height=2*(e.radiusY||.5),r.pressure=e.force||.5,r.isPrimary=Qe(e),r.pointerType=Ye,r.altKey=n.altKey,r.ctrlKey=n.ctrlKey,r.metaKey=n.metaKey,r.shiftKey=n.shiftKey,n.preventDefault&&(r.preventDefault=function(){n.preventDefault()}),r}function qe(t){var e=0;return"touchstart"!==t&&"touchmove"!==t&&"pointerdown"!==t&&"pointermove"!==t||(e=1),e}var Ke=null;function Qe(t){return Ke===t.identifier}function $e(t){null===Ke&&(Ke=t.identifier)}function Je(t){Ke===t.identifier&&(Ke=null)}function tn(t){return function(e){for(var n=e.changedTouches,r=0;r<n.length;r++){var i=n[r];0===r&&"pointerdown"===t?$e(i):"pointerup"!==t&&"pointercancel"!==t||Je(i);var o=Xe(t,i,e);ae.dispatchEvent(o)}}}tn("pointerdown"),tn("pointermove"),tn("pointerup");function en(t){return function(e){e.type=t,ae.dispatchEvent(e)}}en("mousedown"),en("mousemove"),en("mouseup");var nn="undefined"!==typeof my&&!!my&&"function"===typeof my.showToast&&!0!==my.isFRM,rn="undefined"!==typeof wx&&null!==wx&&("undefined"!==typeof wx.request||"undefined"!==typeof wx.miniProgram),on=nn||rn,an={atob:J,btoa:tt,devicePixelRatio:at,Blob:rt,document:ae,Element:Ct,Event:lt,EventTarget:gt,HTMLCanvasElement:le,HTMLElement:Gt,HTMLMediaElement:Yt,HTMLVideoElement:Kt,Image:Jt,ImageData:he,navigator:_e,Node:_t,requestAnimationFrame:Se,cancelAnimationFrame:Oe,screen:Pt,XMLHttpRequest:Le,performance:be,URL:Ce,WebGLRenderingContext:Ae,WebGL2RenderingContext:ke,addEventListener:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};ae.addEventListener(t,e,n)},removeEventListener:function(t,e,n){ae.removeEventListener(t,e)},dispatchEvent:function(t){ae.dispatchEvent(t)},innerWidth:Pt.availWidth,innerHeight:Pt.availHeight,setTimeout:setTimeout,clearTimeout:clearTimeout,setInterval:setInterval,clearInterval:clearInterval},sn=on?an:it["a"],un=on?Le:it["a"].XMLHttpRequest;on||it["a"].location;function cn(t){var e=t;return"string"===typeof t&&(e=sn.document.getElementById(t)),e}function ln(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function fn(t){return ln(t).split(/\s+/)}function hn(t){var e,n,r=null===sn||void 0===sn||null===(e=sn.document)||void 0===e||null===(n=e.documentElement)||void 0===n?void 0:n.style;if(!r)return t[0];for(var i in t)if(t[i]&&t[i]in r)return t[i];return t[0]}function pn(t,e,n){var r=sn.document.createElement(t);return e&&(r.className=e||""),n&&n.appendChild(r),r}function dn(t){var e=t.parentNode;e&&e.removeChild(t)}function vn(t,e){if(void 0!==t.classList)for(var n=fn(e),r=0,i=n.length;r<i;r++)t.classList.add(n[r]);else if(!mn(t,e)){var o=_n(t);yn(t,(o?o+" ":"")+e)}}function gn(t,e){void 0!==t.classList?t.classList.remove(e):yn(t,ln((" "+_n(t)+" ").replace(" "+e+" "," ")))}function mn(t,e){if(void 0!==t.classList)return t.classList.contains(e);var n=_n(t);return n.length>0&&new RegExp("(^|\\s)"+e+"(\\s|$)").test(n)}function yn(t,e){t instanceof HTMLElement?t.className=e:t.className.baseVal=e}function _n(t){return t instanceof SVGElement&&(t=t.correspondingElement),void 0===t.className.baseVal?t.className:t.className.baseVal}function bn(t){while(t&&t.firstChild)t.removeChild(t.firstChild)}var xn=hn(["transform","WebkitTransform"]);function wn(t,e){t.style[xn]=e}function En(){if("function"===typeof Event)sn.dispatchEvent(new Event("resize"));else{var t=sn.document.createEvent("UIEvents");t.initUIEvent("resize",!0,!1,sn,0),sn.dispatchEvent(t)}}function Sn(t){var e=["padding: "+(t.height/2-8)+"px "+t.width/2+"px;","line-height: "+t.height+"px;","background-image: url("+t.toDataURL()+");"];console.log("%c\n",e.join(""))}function On(){var t,e=sn.document.querySelector('meta[name="viewport"]');if(!e)return 1;var n=null===(t=e.content)||void 0===t?void 0:t.split(","),r=n.find((function(t){var e=t.split("="),n=Object(q["a"])(e,1),r=n[0];return"initial-scale"===r}));return r?1*r.split("=")[1]:1}var Cn=On()<1?1:sn.devicePixelRatio;function Tn(t,e){t.setAttribute("style","".concat(t.style.cssText).concat(e))}function An(t){return t.split(";").map((function(t){return t.trim()})).filter((function(t){return t}))}function kn(t,e){var n,r=An(null!==(n=t.getAttribute("style"))&&void 0!==n?n:""),i=An(e),o=K["pull"].apply(void 0,[r].concat(Object(M["a"])(i)));t.setAttribute("style",o.join(";"))}function Mn(t){return Object.entries(t).map((function(t){var e=Object(q["a"])(t,2),n=e[0],r=e[1];return"".concat(n,": ").concat(r)})).join(";")}function Pn(t,e){return{left:t.left-e.left,top:t.top-e.top,right:e.left+e.width-t.left-t.width,bottom:e.top+e.height-t.top-t.height}}function Rn(t,e){t.checked=e,e?t.setAttribute("checked","true"):t.removeAttribute("checked")}function jn(t){t.innerHTML=""}function In(t){t.setAttribute("draggable","false")}function Ln(t,e){if("string"===typeof e){var n=document.createElement("div");n.innerHTML=e;while(n.firstChild)t.append(n.firstChild)}else Array.isArray(e)?t.append.apply(t,Object(M["a"])(e)):t.append(e)}function Nn(t){if(0===t.length)throw new Error("max requires at least one data point");for(var e=t[0],n=1;n<t.length;n++)t[n]>e&&(e=t[n]);return 1*e}function Dn(t){if(0===t.length)throw new Error("min requires at least one data point");for(var e=t[0],n=1;n<t.length;n++)t[n]<e&&(e=t[n]);return 1*e}function Fn(t){if(0===t.length)return 0;for(var e=1*t[0],n=1;n<t.length;n++)e+=1*t[n];return e}function Bn(t){if(0===t.length)throw new Error("mean requires at least one data point");return Fn(t)/t.length}function zn(t){if(0===t.length)throw new Error("mean requires at least one data point");if(t.length<3)return t[0];t.sort();for(var e=t[0],n=NaN,r=0,i=1,o=1;o<t.length+1;o++)t[o]!==e?(i>r&&(r=i,n=e),i=1,e=t[o]):i++;return 1*n}var Un={min:Dn,max:Nn,mean:Bn,sum:Fn,mode:zn};function Vn(t,e){return t.map((function(t){return t[e]}))}function Hn(t,e){return Un[t](e)}var Gn=n("s4An");function Wn(t){return-1!==Function.toString.call(t).indexOf("[native code]")}var Zn=n("2WcH");function Yn(t,e,n){return Yn=Object(Zn["a"])()?Reflect.construct.bind():function(t,e,n){var r=[null];r.push.apply(r,e);var i=Function.bind.apply(t,r),o=new i;return n&&Object(Gn["a"])(o,n.prototype),o},Yn.apply(null,arguments)}function Xn(t){var e="function"===typeof Map?new Map:void 0;return Xn=function(t){if(null===t||!Wn(t))return t;if("function"!==typeof t)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof e){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return Yn(t,arguments,Object(ct["a"])(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),Object(Gn["a"])(n,t)},Xn(t)}function qn(t){var e=Kn();return function(){var n,r=Object(ct["a"])(t);if(e){var i=Object(ct["a"])(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(ut["a"])(this,n)}}function Kn(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}var Qn=function(t){Object(st["a"])(n,t);var e=qn(n);function n(t,r,i,o){var a;return Object(et["a"])(this,n),a=e.call(this,"AJAXError: ".concat(r," (").concat(t,"): ").concat(i)),a.status=t,a.statusText=r,a.url=i,a.body=o,a}return Object(nt["a"])(n)}(Xn(Error));function $n(t,e){var n=new un,r=Array.isArray(t.url)?t.url[0]:t.url;for(var i in n.open(t.method||"GET",r,!0),"arrayBuffer"===t.type&&(n.responseType="arraybuffer"),t.headers)t.headers.hasOwnProperty(i)&&n.setRequestHeader(i,t.headers[i]);return"json"===t.type&&(n.responseType="text",n.setRequestHeader("Accept","application/json")),n.withCredentials="include"===t.credentials,n.onerror=function(){e(new Error(n.statusText))},n.onload=function(){if((n.status>=200&&n.status<300||0===n.status)&&null!==n.response){var i=n.response;if("json"===t.type)try{i=JSON.parse(n.response)}catch(a){return e(a)}e(null,i,n.getResponseHeader("Cache-Control"),n.getResponseHeader("Expires"),n)}else{var o=new Blob([n.response],{type:n.getResponseHeader("Content-Type")});e(new Qn(n.status,n.statusText,r.toString(),o))}},n.send(t.body),n}function Jn(t){return new Promise((function(e,n){$n(t,(function(t,r,i,o,a){t?n({err:t,data:null,xhr:a}):e({err:null,data:r,cacheControl:i,expires:o,xhr:a})}))}))}function tr(t,e){return $n(t,e)}var er=function(t,e){return tr(Object(P["a"])(Object(P["a"])({},t),{},{type:"json"}),e)},nr=function(t,e){return tr(Object(P["a"])(Object(P["a"])({},t),{},{type:"arrayBuffer"}),e)};var rr="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function ir(t,e){var n=new sn.Image,r=sn.URL||sn.webkitURL;n.crossOrigin="anonymous",n.onload=function(){e(null,n),r.revokeObjectURL(n.src),n.onload=null,window.requestAnimationFrame((function(){n.src=rr}))},n.onerror=function(){return e(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))};var i=new Blob([new Uint8Array(t)],{type:"image/png"});n.src=t.byteLength?r.createObjectURL(i):rr}function or(t,e){var n=new Blob([new Uint8Array(t)],{type:"image/png"});createImageBitmap(n).then((function(t){e(null,t)}))["catch"]((function(t){e(new Error("Could not load image because of ".concat(t.message,". Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.")))}))}var ar=function(t,e,n){var r=function(t,r){if(t)e(t);else if(r){var i="function"===typeof createImageBitmap,o=n?n(r):r;i?or(o,e):ir(o,e)}};return"json"===t.type?er(t,r):nr(t,r)};function sr(t){return"number"===typeof t}function ur(t){var e=[1/0,1/0,-1/0,-1/0];return U(t,(function(t){e[0]>t[0]&&(e[0]=t[0]),e[1]>t[1]&&(e[1]=t[1]),e[2]<t[0]&&(e[2]=t[0]),e[3]<t[1]&&(e[3]=t[1])})),e}ur["default"]=ur;var cr=ur,lr=2*Math.PI*6378137/2;function fr(t,e){var n=Object(q["a"])(e,4),r=n[0],i=n[1],o=n[2],a=n[3];return t.lng>r&&t.lng<=o&&t.lat>i&&t.lat<=a}function hr(t){var e=[1/0,1/0,-1/0,-1/0];return t.forEach((function(t){var n=t.coordinates;pr(e,n)})),e}function pr(t,e){return Array.isArray(e[0])?e.forEach((function(e){pr(t,e)})):(t[0]>e[0]&&(t[0]=e[0]),t[1]>e[1]&&(t[1]=e[1]),t[2]<e[0]&&(t[2]=e[0]),t[3]<e[1]&&(t[3]=e[1])),t}function dr(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{enable:!0,decimal:1};t=mr(t,e);var r=t[0],i=t[1],o=r*lr/180,a=Math.log(Math.tan((90+i)*Math.PI/360))/(Math.PI/180);return a=a*lr/180,n.enable&&(o=Number(o.toFixed(n.decimal)),a=Number(a.toFixed(n.decimal))),3===t.length?[o,a,t[2]]:[o,a]}function vr(t){if(void 0===t||null===t)throw new Error("lng is required");return(t>180||t<-180)&&(t%=360,t>180&&(t=-360+t),t<-180&&(t=360+t),0===t&&(t=0)),t}function gr(t){if(void 0===t||null===t)throw new Error("lat is required");return(t>90||t<-90)&&(t%=180,t>90&&(t=-180+t),t<-90&&(t=180+t),0===t&&(t=0)),t}function mr(t,e){if(!1===e)return t;var n=vr(t[0]),r=gr(t[1]);return r>85&&(r=85),r<-85&&(r=-85),3===t.length?[n,r,t[2]]:[n,r]}function yr(t){var e=85.0511287798,n=Math.max(Math.min(e,t[1]),-e),r=256<<20,i=Math.PI/180,o=t[0]*i,a=n*i;a=Math.log(Math.tan(Math.PI/4+a/2));var s=.5/Math.PI,u=.5,c=-.5/Math.PI;return i=.5,o=r*(s*o+u),a=r*(c*a+i),[Math.floor(o),Math.floor(a)]}function _r(t,e){var n=Math.abs(t[1][1]-t[0][1])*e,r=Math.abs(t[1][0]-t[0][0])*e;return[[t[0][0]-r,t[0][1]-n],[t[1][0]+r,t[1][1]+n]]}function br(t,e){return t[0][0]<=e[0][0]&&t[0][1]<=e[0][1]&&t[1][0]>=e[1][0]&&t[1][1]>=e[1][1]}function xr(t){return[[t[0],t[1]],[t[2],t[3]]]}function wr(t){var e=Er(t,[0,0]);return[t[0]/e,t[1]/e]}function Er(t,e){return Math.sqrt(Math.pow(t[0]-e[0],2)+Math.pow(t[1]-e[1],2))}function Sr(t){if(sr(t[0]))return t;if(sr(t[0][0]))throw new Error("\u5f53\u524d\u6570\u636e\u4e0d\u652f\u6301\u6807\u6ce8");if(sr(t[0][0][0])){var e=t,n=0,r=0,i=0;return e.forEach((function(t){t.forEach((function(t){n+=t[0],r+=t[1],i++}))})),[n/i,r/i,0]}throw new Error("\u5f53\u524d\u6570\u636e\u4e0d\u652f\u6301\u6807\u6ce8")}function Or(t){for(var e=t[0],n=t[1],r=t[0],i=t[1],o=0,a=0,s=0,u=0;u<t.length;u+=2){var c=t[u],l=t[u+1];c&&l&&(e=Math.max(c,e),n=Math.max(l,n),r=Math.min(c,r),i=Math.min(l,i),o+=c,a+=l,s++)}return{center:[o/s,a/s],radius:Math.sqrt(Math.pow(e-r,2)+Math.pow(n-i,2))/2}}function Cr(t){return cr(D([N(t)]))}var Tr=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50,n=arguments.length>1?arguments[1]:void 0;Object(et["a"])(this,t),this.limit=e,this.destroy=n||this.defaultDestroy,this.order=[],this.clear()}return Object(nt["a"])(t,[{key:"clear",value:function(){var t=this;this.order.forEach((function(e){t["delete"](e)})),this.cache={},this.order=[]}},{key:"get",value:function(t){var e=this.cache[t];return e&&(this.deleteOrder(t),this.appendOrder(t)),e}},{key:"set",value:function(t,e){this.cache[t]?(this["delete"](t),this.cache[t]=e,this.appendOrder(t)):(Object.keys(this.cache).length===this.limit&&this["delete"](this.order[0]),this.cache[t]=e,this.appendOrder(t))}},{key:"delete",value:function(t){var e=this.cache[t];e&&(this.deleteCache(t),this.deleteOrder(t),this.destroy(e,t))}},{key:"deleteCache",value:function(t){delete this.cache[t]}},{key:"deleteOrder",value:function(t){var e=this.order.findIndex((function(e){return e===t}));e>=0&&this.order.splice(e,1)}},{key:"appendOrder",value:function(t){this.order.push(t)}},{key:"defaultDestroy",value:function(t,e){return null}}]),t}(),Ar=n("rePB");function kr(t,e){t.forEach((function(t){e[t]&&(e[t]=e[t].bind(e))}))}var Mr=function(t,e,n){t.prototype=e.prototype=n,n.constructor=t};function Pr(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function Rr(){}var jr,Ir=.7,Lr=1/Ir,Nr="\\s*([+-]?\\d+)\\s*",Dr="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",Fr="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Br=/^#([0-9a-f]{3,8})$/,zr=new RegExp("^rgb\\("+[Nr,Nr,Nr]+"\\)$"),Ur=new RegExp("^rgb\\("+[Fr,Fr,Fr]+"\\)$"),Vr=new RegExp("^rgba\\("+[Nr,Nr,Nr,Dr]+"\\)$"),Hr=new RegExp("^rgba\\("+[Fr,Fr,Fr,Dr]+"\\)$"),Gr=new RegExp("^hsl\\("+[Dr,Fr,Fr]+"\\)$"),Wr=new RegExp("^hsla\\("+[Dr,Fr,Fr,Dr]+"\\)$"),Zr={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Yr(){return this.rgb().formatHex()}function Xr(){return ai(this).formatHsl()}function qr(){return this.rgb().formatRgb()}function Kr(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=Br.exec(t))?(n=e[1].length,e=parseInt(e[1],16),6===n?Qr(e):3===n?new ei(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===n?$r(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===n?$r(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=zr.exec(t))?new ei(e[1],e[2],e[3],1):(e=Ur.exec(t))?new ei(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=Vr.exec(t))?$r(e[1],e[2],e[3],e[4]):(e=Hr.exec(t))?$r(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=Gr.exec(t))?oi(e[1],e[2]/100,e[3]/100,1):(e=Wr.exec(t))?oi(e[1],e[2]/100,e[3]/100,e[4]):Zr.hasOwnProperty(t)?Qr(Zr[t]):"transparent"===t?new ei(NaN,NaN,NaN,0):null}function Qr(t){return new ei(t>>16&255,t>>8&255,255&t,1)}function $r(t,e,n,r){return r<=0&&(t=e=n=NaN),new ei(t,e,n,r)}function Jr(t){return t instanceof Rr||(t=Kr(t)),t?(t=t.rgb(),new ei(t.r,t.g,t.b,t.opacity)):new ei}function ti(t,e,n,r){return 1===arguments.length?Jr(t):new ei(t,e,n,null==r?1:r)}function ei(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}function ni(){return"#"+ii(this.r)+ii(this.g)+ii(this.b)}function ri(){var t=this.opacity;return t=isNaN(t)?1:Math.max(0,Math.min(1,t)),(1===t?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?")":", "+t+")")}function ii(t){return t=Math.max(0,Math.min(255,Math.round(t)||0)),(t<16?"0":"")+t.toString(16)}function oi(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new ui(t,e,n,r)}function ai(t){if(t instanceof ui)return new ui(t.h,t.s,t.l,t.opacity);if(t instanceof Rr||(t=Kr(t)),!t)return new ui;if(t instanceof ui)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),o=Math.max(e,n,r),a=NaN,s=o-i,u=(o+i)/2;return s?(a=e===o?(n-r)/s+6*(n<r):n===o?(r-e)/s+2:(e-n)/s+4,s/=u<.5?o+i:2-o-i,a*=60):s=u>0&&u<1?0:a,new ui(a,s,u,t.opacity)}function si(t,e,n,r){return 1===arguments.length?ai(t):new ui(t,e,n,null==r?1:r)}function ui(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}function ci(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}function li(t){var e=Kr(t),n=[0,0,0,0];return null!=e&&(n[0]=e.r/255,n[1]=e.g/255,n[2]=e.b/255,n[3]=e.opacity),n}function fi(t){var e=t&&t[0],n=t&&t[1],r=t&&t[2],i=e+256*n+65536*r-1;return i}function hi(t){return[t+1&255,t+1>>8&255,t+1>>8>>8&255]}function pi(t){var e=sn.document.createElement("canvas"),n=e.getContext("2d");e.width=256,e.height=1;var r=null;if(t.weights){var i=0;t.weights.map((function(e,r){var o=t.colors[r]||"rgba(0, 0, 0, 0)",a=i+e;n.fillStyle=o,n.fillRect(256*i,0,256*a,1),i=a}))}else{for(var o=n.createLinearGradient(0,0,256,1),a=t.positions[0],s=t.positions[t.positions.length-1],u=0;u<t.colors.length;++u){var c=(t.positions[u]-a)/(s-a);o.addColorStop(c,t.colors[u])}n.fillStyle=o,n.fillRect(0,0,256,1)}if(on)return r=new Uint8ClampedArray(n.getImageData(0,0,256,1).data),e=null,n=null,{data:r,width:256,height:1};r=n.getImageData(0,0,256,1).data;for(var l=n.createImageData(256,1),f=0;f<l.data.length;f+=4)l.data[f+0]=r[f+0],l.data[f+1]=r[f+1],l.data[f+2]=r[f+2],l.data[f+3]=r[f+3];return e=null,n=null,l}Mr(Rr,Kr,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:Yr,formatHex:Yr,formatHsl:Xr,formatRgb:qr,toString:qr}),Mr(ei,ti,Pr(Rr,{brighter:function(t){return t=null==t?Lr:Math.pow(Lr,t),new ei(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?Ir:Math.pow(Ir,t),new ei(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:ni,formatHex:ni,formatRgb:ri,toString:ri})),Mr(ui,si,Pr(Rr,{brighter:function(t){return t=null==t?Lr:Math.pow(Lr,t),new ui(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?Ir:Math.pow(Ir,t),new ui(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new ei(ci(t>=240?t-240:t+120,i,r),ci(t,i,r),ci(t<120?t+240:t-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var t=this.opacity;return t=isNaN(t)?1:Math.max(0,Math.min(1,t)),(1===t?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===t?")":", "+t+")")}})),function(t){t["CENTER"]="center",t["TOP"]="top",t["TOP-LEFT"]="top-left",t["TOP-RIGHT"]="top-right",t["BOTTOM"]="bottom",t["BOTTOM-LEFT"]="bottom-left",t["BOTTOM-RIGHT"]="bottom-right",t["LEFT"]="left",t["RIGHT"]="right"}(jr||(jr={}));var di={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function vi(t,e,n){var r=t.classList;for(var i in di)di.hasOwnProperty(i)&&r.remove("l7-".concat(n,"-anchor-").concat(i));r.add("l7-".concat(n,"-anchor-").concat(e))}function gi(t,e){return{enable:t,mask:255,func:{cmp:514,ref:e?1:0,mask:255}}}var mi=n("HaE+"),yi=n("o0o1"),_i=n.n(yi);function bi(t,e){if(!t)throw new Error(e||"web worker helper assertion failed.")}var xi={self:"undefined"!==typeof self&&self,window:"undefined"!==typeof window&&window,document:"undefined"!==typeof document&&document},wi=(xi.self||xi.window,xi.window||xi.self,xi.self||xi.window,xi.document,"undefined"!==typeof window&&"undefined"!==typeof window.orientation),Ei=function(){function t(t,e){var n=this;this.name=t,this.workerThread=e,this.isRunning=!0,this.resolve=function(){},this.reject=function(){},this.result=new Promise((function(t,e){n.resolve=t,n.reject=e}))}return t.prototype.postMessage=function(t,e){this.workerThread.postMessage({source:"Main thread",type:t,payload:e})},t.prototype.done=function(t){bi(this.isRunning,"WorkerJob isRunning false."),this.isRunning=!1,this.resolve(t)},t.prototype.error=function(t){bi(this.isRunning,"WorkerJob isRunning false."),this.isRunning=!1,this.reject(t)},t}(),Si=Ei,Oi=new Map;function Ci(t){bi(t.source&&!t.url||!t.source&&t.url);var e=Oi.get(t.source||t.url);return e||(t.url&&(e=Ti(t.url),Oi.set(t.url,e)),t.source&&(e=Ai(t.source),Oi.set(t.source,e))),bi(e),e}function Ti(t){if(!t.startsWith("http"))return t;var e=ki(t);return Ai(e)}function Ai(t){var e=new Blob([t],{type:"application/javascript"});return URL.createObjectURL(e)}function ki(t){return"try {\n  importScripts('"+t+"');\n} catch (error) {\n  console.error(error);\n  throw error;\n}"}function Mi(t,e,n){void 0===e&&(e=!0);var r=n||new Set;if(t){if(Pi(t))r.add(t);else if(Pi(t.buffer))r.add(t.buffer);else if(ArrayBuffer.isView(t));else if(e&&"object"===typeof t)for(var i in t)Mi(t[i],e,r)}else;return void 0===n?Array.from(r):[]}function Pi(t){return!!t&&(t instanceof ArrayBuffer||("undefined"!==typeof MessagePort&&t instanceof MessagePort||("undefined"!==typeof ImageBitmap&&t instanceof ImageBitmap||"undefined"!==typeof OffscreenCanvas&&t instanceof OffscreenCanvas)))}var Ri=function(){},ji=function(){function t(t){this.terminated=!1,this.loadableURL="";var e=t.name,n=t.source,r=t.url;bi(n||r),this.name=e,this.source=n,this.url=r,this.onMessage=Ri,this.onError=function(t){return console.log(t)},this.worker=this.createBrowserWorker()}return t.isSupported=function(){return"undefined"!==typeof Worker},t.prototype.destroy=function(){this.onMessage=Ri,this.onError=Ri,this.worker.terminate(),this.terminated=!0},Object.defineProperty(t.prototype,"isRunning",{get:function(){return Boolean(this.onMessage)},enumerable:!1,configurable:!0}),t.prototype.postMessage=function(t,e){e=e||Mi(t),this.worker.postMessage(t,e)},t.prototype.getErrorFromErrorEvent=function(t){var e="Failed to load ";return e+="worker "+this.name+" from "+this.url+". ",t.message&&(e+=t.message+" in "),t.lineno&&(e+=":"+t.lineno+":"+t.colno),new Error(e)},t.prototype.createBrowserWorker=function(){var t=this;this.loadableURL=Ci({source:this.source,url:this.url});var e=new Worker(this.loadableURL,{name:this.name});return e.onmessage=function(e){e.data?t.onMessage(e.data):t.onError(new Error("No data received"))},e.onerror=function(e){t.onError(t.getErrorFromErrorEvent(e)),t.terminated=!0},e.onmessageerror=function(e){return console.error("worker "+t.name+", message error: "+e)},e},t}(),Ii=ji,Li=function(){return Li=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},Li.apply(this,arguments)},Ni=function(t,e,n,r){function i(t){return t instanceof n?t:new n((function(e){e(t)}))}return new(n||(n=Promise))((function(n,o){function a(t){try{u(r.next(t))}catch(e){o(e)}}function s(t){try{u(r["throw"](t))}catch(e){o(e)}}function u(t){t.done?n(t.value):i(t.value).then(a,s)}u((r=r.apply(t,e||[])).next())}))},Di=function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(t){return function(e){return u([t,e])}}function u(o){if(n)throw new TypeError("Generator is already executing.");while(a)try{if(n=1,r&&(i=2&o[0]?r["return"]:o[0]?r["throw"]||((i=r["return"])&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(i=a.trys,!(i=i.length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(s){o=[6,s],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}},Fi=function(){function t(t){this.name="unnamed",this.maxConcurrency=1,this.maxMobileConcurrency=1,this.onDebug=function(){},this.reuseWorkers=!0,this.props={},this.jobQueue=[],this.idleQueue=[],this.count=0,this.isDestroyed=!1,this.source=t.source,this.url=t.url,this.setProps(t)}return t.prototype.destroy=function(){this.idleQueue.forEach((function(t){return t.destroy()})),this.isDestroyed=!0},t.prototype.setProps=function(t){this.props=Li(Li({},this.props),t),void 0!==t.name&&(this.name=t.name),void 0!==t.maxConcurrency&&(this.maxConcurrency=t.maxConcurrency),void 0!==t.maxMobileConcurrency&&(this.maxMobileConcurrency=t.maxMobileConcurrency),void 0!==t.reuseWorkers&&(this.reuseWorkers=t.reuseWorkers),void 0!==t.onDebug&&(this.onDebug=t.onDebug)},t.prototype.startJob=function(t,e,n){return void 0===e&&(e=function(t,e,n){return t.done(n)}),void 0===n&&(n=function(t,e){return t.error(e)}),Ni(this,void 0,void 0,(function(){var r,i=this;return Di(this,(function(o){switch(o.label){case 0:return r=new Promise((function(r){return i.jobQueue.push({name:t,onMessage:e,onError:n,onStart:r}),i})),this.startQueuedJob(),[4,r];case 1:return[2,o.sent()]}}))}))},t.prototype.startQueuedJob=function(){return Ni(this,void 0,void 0,(function(){var t,e,n;return Di(this,(function(r){switch(r.label){case 0:if(!this.jobQueue.length)return[2];if(t=this.getAvailableWorker(),!t)return[2];if(e=this.jobQueue.shift(),!e)return[3,4];this.onDebug({message:"Starting job",name:e.name,backlog:this.jobQueue.length,workerThread:t}),n=new Si(e.name,t),t.onMessage=function(t){return e.onMessage(n,t.type,t.payload)},t.onError=function(t){return e.onError(n,t)},e.onStart(n),r.label=1;case 1:return r.trys.push([1,,3,4]),[4,n.result];case 2:return r.sent(),[3,4];case 3:return this.returnWorkerToQueue(t),[7];case 4:return[2]}}))}))},t.prototype.returnWorkerToQueue=function(t){var e=this.isDestroyed||!this.reuseWorkers||this.count>this.getMaxConcurrency();e?(t.destroy(),this.count--):this.idleQueue.push(t),this.isDestroyed||this.startQueuedJob()},t.prototype.getAvailableWorker=function(){if(this.idleQueue.length>0)return this.idleQueue.shift()||null;if(this.count<this.getMaxConcurrency()){this.count++;var t=this.name.toLowerCase()+" (#"+this.count+" of "+this.maxConcurrency+")";return new Ii({name:t,source:this.source,url:this.url})}return null},t.prototype.getMaxConcurrency=function(){return wi?this.maxMobileConcurrency:this.maxConcurrency},t}(),Bi=Fi,zi=function(){return zi=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},zi.apply(this,arguments)},Ui=function(t){var e="function"===typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Vi={maxConcurrency:3,maxMobileConcurrency:1,onDebug:function(){},reuseWorkers:!0},Hi=function(){function t(t){this.workerPools=new Map,this.props=zi({},Vi),this.setProps(t),this.workerPools=new Map}return t.isSupported=function(){return Ii.isSupported()},t.getWorkerFarm=function(e){return void 0===e&&(e={}),t.workerFarm=t.workerFarm||new t({}),t.workerFarm.setProps(e),t.workerFarm},t.prototype.destroy=function(){var t,e;try{for(var n=Ui(this.workerPools.values()),r=n.next();!r.done;r=n.next()){var i=r.value;i.destroy()}}catch(o){t={error:o}}finally{try{r&&!r.done&&(e=n["return"])&&e.call(n)}finally{if(t)throw t.error}}},t.prototype.setProps=function(t){var e,n;this.props=zi(zi({},this.props),t);try{for(var r=Ui(this.workerPools.values()),i=r.next();!i.done;i=r.next()){var o=i.value;o.setProps(this.getWorkerPoolProps())}}catch(a){e={error:a}}finally{try{i&&!i.done&&(n=r["return"])&&n.call(r)}finally{if(e)throw e.error}}},t.prototype.getWorkerPool=function(t){var e=t.name,n=t.source,r=t.url,i=this.workerPools.get(e);return i||(i=new Bi({name:e,source:n,url:r}),i.setProps(this.getWorkerPoolProps()),this.workerPools.set(e,i)),i},t.prototype.getWorkerPoolProps=function(){return{maxConcurrency:this.props.maxConcurrency,maxMobileConcurrency:this.props.maxMobileConcurrency,reuseWorkers:this.props.reuseWorkers,onDebug:this.props.onDebug}},t}(),Gi=Hi,Wi=new Map,Zi=function(){function t(){}return Object.defineProperty(t,"onmessage",{set:function(t){self.onmessage=function(e){if(Xi(e)){var n=e.data,r=n.type,i=n.payload;t(r,i)}}},enumerable:!1,configurable:!0}),t.addEventListener=function(t){var e=Wi.get(t);e||(e=function(e){if(Xi(e)){var n=e.data,r=n.type,i=n.payload;t(r,i)}}),self.addEventListener("message",e)},t.removeEventListener=function(t){var e=Wi.get(t);Wi["delete"](t),self.removeEventListener("message",e)},t.postMessage=function(t,e){if(self){var n={source:"Worker thread",type:t,payload:e},r=Mi(e);self.postMessage(n,r)}},t}(),Yi=Zi;function Xi(t){var e=t.type,n=t.data;return"message"===e&&n&&"string"===typeof n.source&&"Main thread"===n.source}var qi,Ki,Qi=function(){function t(){this._values=[],this._settlers=[],this._closed=!1}return t.prototype[Symbol.asyncIterator]=function(){return this},t.prototype.push=function(t){return this.enqueue(t)},t.prototype.enqueue=function(t){if(this._closed)throw new Error("Closed");if(this._settlers.length>0){if(this._values.length>0)throw new Error("Illegal internal state");var e=this._settlers.shift();t instanceof Error?e.reject(t):e.resolve({value:t})}else this._values.push(t)},t.prototype.close=function(){while(this._settlers.length>0){var t=this._settlers.shift();t.resolve({done:!0})}this._closed=!0},t.prototype.next=function(){var t=this;if(this._values.length>0){var e=this._values.shift();return e instanceof Error?Promise.reject(e):Promise.resolve({done:!1,value:e})}if(this._closed){if(this._settlers.length>0)throw new Error("Illegal internal state");return Promise.resolve({done:!0,value:void 0})}return new Promise((function(e,n){t._settlers.push({resolve:e,reject:n})}))},t}(),$i=Qi,Ji=function(t,e,n,r){function i(t){return t instanceof n?t:new n((function(e){e(t)}))}return new(n||(n=Promise))((function(n,o){function a(t){try{u(r.next(t))}catch(e){o(e)}}function s(t){try{u(r["throw"](t))}catch(e){o(e)}}function u(t){t.done?n(t.value):i(t.value).then(a,s)}u((r=r.apply(t,e||[])).next())}))},to=function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(t){return function(e){return u([t,e])}}function u(o){if(n)throw new TypeError("Generator is already executing.");while(a)try{if(n=1,r&&(i=2&o[0]?r["return"]:o[0]?r["throw"]||((i=r["return"])&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(i=a.trys,!(i=i.length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(s){o=[6,s],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}},eo=function(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,n=t[Symbol.asyncIterator];return n?n.call(t):(t="function"===typeof __values?__values(t):t[Symbol.iterator](),e={},r("next"),r("throw"),r("return"),e[Symbol.asyncIterator]=function(){return this},e);function r(n){e[n]=t[n]&&function(e){return new Promise((function(r,o){e=t[n](e),i(r,o,e.done,e.value)}))}}function i(t,e,n,r){Promise.resolve(r).then((function(e){t({value:e,done:n})}),e)}},no=0;function ro(t,e){var n=this;if("undefined"!==typeof self){var r={process:io};Yi.onmessage=function(i,o){return Ji(n,void 0,void 0,(function(){var n,a,s,u,c,l,f,h,p,d,v;return to(this,(function(g){switch(g.label){case 0:switch(g.trys.push([0,19,,20]),n=i,n){case"process":return[3,1];case"process-in-batches":return[3,3];case"input-batch":return[3,16];case"input-done":return[3,17]}return[3,18];case 1:if(!t)throw new Error("Worker does not support atomic processing");return[4,t(o.input,o.options||{},r)];case 2:return a=g.sent(),Yi.postMessage("done",{result:a}),[3,18];case 3:if(!e)throw new Error("Worker does not support batched processing");qi=new $i,Ki=o.options||{},s=e(qi,Ki,r),g.label=4;case 4:g.trys.push([4,9,10,15]),u=eo(s),g.label=5;case 5:return[4,u.next()];case 6:if(c=g.sent(),c.done)return[3,8];l=c.value,Yi.postMessage("output-batch",{result:l}),g.label=7;case 7:return[3,5];case 8:return[3,15];case 9:return f=g.sent(),d={error:f},[3,15];case 10:return g.trys.push([10,,13,14]),c&&!c.done&&(v=u["return"])?[4,v.call(u)]:[3,12];case 11:g.sent(),g.label=12;case 12:return[3,14];case 13:if(d)throw d.error;return[7];case 14:return[7];case 15:return Yi.postMessage("done",{}),[3,18];case 16:return qi.push(o.input),[3,18];case 17:return qi.close(),[3,18];case 18:return[3,20];case 19:return h=g.sent(),p=h instanceof Error?h.message:"",Yi.postMessage("error",{error:p}),[3,20];case 20:return[2]}}))}))}}}function io(t,e){return void 0===e&&(e={}),new Promise((function(n,r){var i=no++,o=function t(e,o){if(o.id===i)switch(e){case"done":Yi.removeEventListener(t),n(o.result);break;case"error":Yi.removeEventListener(t),r(o.error);break;default:}};Yi.addEventListener(o);var a={id:i,input:t,options:e};Yi.postMessage("process",a)}))}function oo(t){var e=t.color;return e&&e.length?e:[1,1,1,1]}function ao(t,e,n){return 2===n.length?[n[0],n[1],0]:[n[0],n[1],n[2]]}function so(t){var e=t.filter;return e?[1]:[0]}function uo(t,e){return[e]}var co=n("VmRL"),lo=n.n(co),fo=1e-6,ho="undefined"!==typeof Float32Array?Float32Array:Array,po=Math.random;Math.PI;function vo(){var t=new ho(4);return ho!=Float32Array&&(t[1]=0,t[2]=0),t[0]=1,t[3]=1,t}function go(t){var e=new ho(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function mo(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function yo(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t}function _o(t,e,n,r){var i=new ho(4);return i[0]=t,i[1]=e,i[2]=n,i[3]=r,i}function bo(t,e,n,r,i){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t}function xo(t,e){if(t===e){var n=e[1];t[1]=e[2],t[2]=n}else t[0]=e[0],t[1]=e[2],t[2]=e[1],t[3]=e[3];return t}function wo(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=n*o-i*r;return a?(a=1/a,t[0]=o*a,t[1]=-r*a,t[2]=-i*a,t[3]=n*a,t):null}function Eo(t,e){var n=e[0];return t[0]=e[3],t[1]=-e[1],t[2]=-e[2],t[3]=n,t}function So(t){return t[0]*t[3]-t[2]*t[1]}function Oo(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=n[0],u=n[1],c=n[2],l=n[3];return t[0]=r*s+o*u,t[1]=i*s+a*u,t[2]=r*c+o*l,t[3]=i*c+a*l,t}function Co(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=Math.sin(n),u=Math.cos(n);return t[0]=r*u+o*s,t[1]=i*u+a*s,t[2]=r*-s+o*u,t[3]=i*-s+a*u,t}function To(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=n[0],u=n[1];return t[0]=r*s,t[1]=i*s,t[2]=o*u,t[3]=a*u,t}function Ao(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=-n,t[3]=r,t}function ko(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t}function Mo(t){return"mat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}function Po(t){return Math.hypot(t[0],t[1],t[2],t[3])}function Ro(t,e,n,r){return t[2]=r[2]/r[0],n[0]=r[0],n[1]=r[1],n[3]=r[3]-t[2]*n[1],[t,e,n]}function jo(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t}function Io(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t}function Lo(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]}function No(t,e){var n=t[0],r=t[1],i=t[2],o=t[3],a=e[0],s=e[1],u=e[2],c=e[3];return Math.abs(n-a)<=fo*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(r-s)<=fo*Math.max(1,Math.abs(r),Math.abs(s))&&Math.abs(i-u)<=fo*Math.max(1,Math.abs(i),Math.abs(u))&&Math.abs(o-c)<=fo*Math.max(1,Math.abs(o),Math.abs(c))}function Do(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t}function Fo(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t}Math.hypot||(Math.hypot=function(){var t=0,e=arguments.length;while(e--)t+=arguments[e]*arguments[e];return Math.sqrt(t)});var Bo=Oo,zo=Io;function Uo(){var t=new ho(16);return ho!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}function Vo(t){var e=new ho(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function Ho(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function Go(t,e,n,r,i,o,a,s,u,c,l,f,h,p,d,v){var g=new ho(16);return g[0]=t,g[1]=e,g[2]=n,g[3]=r,g[4]=i,g[5]=o,g[6]=a,g[7]=s,g[8]=u,g[9]=c,g[10]=l,g[11]=f,g[12]=h,g[13]=p,g[14]=d,g[15]=v,g}function Wo(t,e,n,r,i,o,a,s,u,c,l,f,h,p,d,v,g){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t[4]=o,t[5]=a,t[6]=s,t[7]=u,t[8]=c,t[9]=l,t[10]=f,t[11]=h,t[12]=p,t[13]=d,t[14]=v,t[15]=g,t}function Zo(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Yo(t,e){if(t===e){var n=e[1],r=e[2],i=e[3],o=e[6],a=e[7],s=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=n,t[6]=e[9],t[7]=e[13],t[8]=r,t[9]=o,t[11]=e[14],t[12]=i,t[13]=a,t[14]=s}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t}function Xo(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],u=e[6],c=e[7],l=e[8],f=e[9],h=e[10],p=e[11],d=e[12],v=e[13],g=e[14],m=e[15],y=n*s-r*a,_=n*u-i*a,b=n*c-o*a,x=r*u-i*s,w=r*c-o*s,E=i*c-o*u,S=l*v-f*d,O=l*g-h*d,C=l*m-p*d,T=f*g-h*v,A=f*m-p*v,k=h*m-p*g,M=y*k-_*A+b*T+x*C-w*O+E*S;return M?(M=1/M,t[0]=(s*k-u*A+c*T)*M,t[1]=(i*A-r*k-o*T)*M,t[2]=(v*E-g*w+m*x)*M,t[3]=(h*w-f*E-p*x)*M,t[4]=(u*C-a*k-c*O)*M,t[5]=(n*k-i*C+o*O)*M,t[6]=(g*b-d*E-m*_)*M,t[7]=(l*E-h*b+p*_)*M,t[8]=(a*A-s*C+c*S)*M,t[9]=(r*C-n*A-o*S)*M,t[10]=(d*w-v*b+m*y)*M,t[11]=(f*b-l*w-p*y)*M,t[12]=(s*O-a*T-u*S)*M,t[13]=(n*T-r*O+i*S)*M,t[14]=(v*_-d*x-g*y)*M,t[15]=(l*x-f*_+h*y)*M,t):null}function qo(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],u=e[6],c=e[7],l=e[8],f=e[9],h=e[10],p=e[11],d=e[12],v=e[13],g=e[14],m=e[15];return t[0]=s*(h*m-p*g)-f*(u*m-c*g)+v*(u*p-c*h),t[1]=-(r*(h*m-p*g)-f*(i*m-o*g)+v*(i*p-o*h)),t[2]=r*(u*m-c*g)-s*(i*m-o*g)+v*(i*c-o*u),t[3]=-(r*(u*p-c*h)-s*(i*p-o*h)+f*(i*c-o*u)),t[4]=-(a*(h*m-p*g)-l*(u*m-c*g)+d*(u*p-c*h)),t[5]=n*(h*m-p*g)-l*(i*m-o*g)+d*(i*p-o*h),t[6]=-(n*(u*m-c*g)-a*(i*m-o*g)+d*(i*c-o*u)),t[7]=n*(u*p-c*h)-a*(i*p-o*h)+l*(i*c-o*u),t[8]=a*(f*m-p*v)-l*(s*m-c*v)+d*(s*p-c*f),t[9]=-(n*(f*m-p*v)-l*(r*m-o*v)+d*(r*p-o*f)),t[10]=n*(s*m-c*v)-a*(r*m-o*v)+d*(r*c-o*s),t[11]=-(n*(s*p-c*f)-a*(r*p-o*f)+l*(r*c-o*s)),t[12]=-(a*(f*g-h*v)-l*(s*g-u*v)+d*(s*h-u*f)),t[13]=n*(f*g-h*v)-l*(r*g-i*v)+d*(r*h-i*f),t[14]=-(n*(s*g-u*v)-a*(r*g-i*v)+d*(r*u-i*s)),t[15]=n*(s*h-u*f)-a*(r*h-i*f)+l*(r*u-i*s),t}function Ko(t){var e=t[0],n=t[1],r=t[2],i=t[3],o=t[4],a=t[5],s=t[6],u=t[7],c=t[8],l=t[9],f=t[10],h=t[11],p=t[12],d=t[13],v=t[14],g=t[15],m=e*a-n*o,y=e*s-r*o,_=e*u-i*o,b=n*s-r*a,x=n*u-i*a,w=r*u-i*s,E=c*d-l*p,S=c*v-f*p,O=c*g-h*p,C=l*v-f*d,T=l*g-h*d,A=f*g-h*v;return m*A-y*T+_*C+b*O-x*S+w*E}function Qo(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],c=e[6],l=e[7],f=e[8],h=e[9],p=e[10],d=e[11],v=e[12],g=e[13],m=e[14],y=e[15],_=n[0],b=n[1],x=n[2],w=n[3];return t[0]=_*r+b*s+x*f+w*v,t[1]=_*i+b*u+x*h+w*g,t[2]=_*o+b*c+x*p+w*m,t[3]=_*a+b*l+x*d+w*y,_=n[4],b=n[5],x=n[6],w=n[7],t[4]=_*r+b*s+x*f+w*v,t[5]=_*i+b*u+x*h+w*g,t[6]=_*o+b*c+x*p+w*m,t[7]=_*a+b*l+x*d+w*y,_=n[8],b=n[9],x=n[10],w=n[11],t[8]=_*r+b*s+x*f+w*v,t[9]=_*i+b*u+x*h+w*g,t[10]=_*o+b*c+x*p+w*m,t[11]=_*a+b*l+x*d+w*y,_=n[12],b=n[13],x=n[14],w=n[15],t[12]=_*r+b*s+x*f+w*v,t[13]=_*i+b*u+x*h+w*g,t[14]=_*o+b*c+x*p+w*m,t[15]=_*a+b*l+x*d+w*y,t}function $o(t,e,n){var r,i,o,a,s,u,c,l,f,h,p,d,v=n[0],g=n[1],m=n[2];return e===t?(t[12]=e[0]*v+e[4]*g+e[8]*m+e[12],t[13]=e[1]*v+e[5]*g+e[9]*m+e[13],t[14]=e[2]*v+e[6]*g+e[10]*m+e[14],t[15]=e[3]*v+e[7]*g+e[11]*m+e[15]):(r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],c=e[6],l=e[7],f=e[8],h=e[9],p=e[10],d=e[11],t[0]=r,t[1]=i,t[2]=o,t[3]=a,t[4]=s,t[5]=u,t[6]=c,t[7]=l,t[8]=f,t[9]=h,t[10]=p,t[11]=d,t[12]=r*v+s*g+f*m+e[12],t[13]=i*v+u*g+h*m+e[13],t[14]=o*v+c*g+p*m+e[14],t[15]=a*v+l*g+d*m+e[15]),t}function Jo(t,e,n){var r=n[0],i=n[1],o=n[2];return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*o,t[9]=e[9]*o,t[10]=e[10]*o,t[11]=e[11]*o,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function ta(t,e,n,r){var i,o,a,s,u,c,l,f,h,p,d,v,g,m,y,_,b,x,w,E,S,O,C,T,A=r[0],k=r[1],M=r[2],P=Math.hypot(A,k,M);return P<fo?null:(P=1/P,A*=P,k*=P,M*=P,i=Math.sin(n),o=Math.cos(n),a=1-o,s=e[0],u=e[1],c=e[2],l=e[3],f=e[4],h=e[5],p=e[6],d=e[7],v=e[8],g=e[9],m=e[10],y=e[11],_=A*A*a+o,b=k*A*a+M*i,x=M*A*a-k*i,w=A*k*a-M*i,E=k*k*a+o,S=M*k*a+A*i,O=A*M*a+k*i,C=k*M*a-A*i,T=M*M*a+o,t[0]=s*_+f*b+v*x,t[1]=u*_+h*b+g*x,t[2]=c*_+p*b+m*x,t[3]=l*_+d*b+y*x,t[4]=s*w+f*E+v*S,t[5]=u*w+h*E+g*S,t[6]=c*w+p*E+m*S,t[7]=l*w+d*E+y*S,t[8]=s*O+f*C+v*T,t[9]=u*O+h*C+g*T,t[10]=c*O+p*C+m*T,t[11]=l*O+d*C+y*T,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)}function ea(t,e,n){var r=Math.sin(n),i=Math.cos(n),o=e[4],a=e[5],s=e[6],u=e[7],c=e[8],l=e[9],f=e[10],h=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=o*i+c*r,t[5]=a*i+l*r,t[6]=s*i+f*r,t[7]=u*i+h*r,t[8]=c*i-o*r,t[9]=l*i-a*r,t[10]=f*i-s*r,t[11]=h*i-u*r,t}function na(t,e,n){var r=Math.sin(n),i=Math.cos(n),o=e[0],a=e[1],s=e[2],u=e[3],c=e[8],l=e[9],f=e[10],h=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*i-c*r,t[1]=a*i-l*r,t[2]=s*i-f*r,t[3]=u*i-h*r,t[8]=o*r+c*i,t[9]=a*r+l*i,t[10]=s*r+f*i,t[11]=u*r+h*i,t}function ra(t,e,n){var r=Math.sin(n),i=Math.cos(n),o=e[0],a=e[1],s=e[2],u=e[3],c=e[4],l=e[5],f=e[6],h=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*i+c*r,t[1]=a*i+l*r,t[2]=s*i+f*r,t[3]=u*i+h*r,t[4]=c*i-o*r,t[5]=l*i-a*r,t[6]=f*i-s*r,t[7]=h*i-u*r,t}function ia(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t}function oa(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function aa(t,e,n){var r,i,o,a=n[0],s=n[1],u=n[2],c=Math.hypot(a,s,u);return c<fo?null:(c=1/c,a*=c,s*=c,u*=c,r=Math.sin(e),i=Math.cos(e),o=1-i,t[0]=a*a*o+i,t[1]=s*a*o+u*r,t[2]=u*a*o-s*r,t[3]=0,t[4]=a*s*o-u*r,t[5]=s*s*o+i,t[6]=u*s*o+a*r,t[7]=0,t[8]=a*u*o+s*r,t[9]=s*u*o-a*r,t[10]=u*u*o+i,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)}function sa(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=n,t[7]=0,t[8]=0,t[9]=-n,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function ua(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=0,t[2]=-n,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=n,t[9]=0,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function ca(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=0,t[3]=0,t[4]=-n,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function la(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=r+r,u=i+i,c=o+o,l=r*s,f=r*u,h=r*c,p=i*u,d=i*c,v=o*c,g=a*s,m=a*u,y=a*c;return t[0]=1-(p+v),t[1]=f+y,t[2]=h-m,t[3]=0,t[4]=f-y,t[5]=1-(l+v),t[6]=d+g,t[7]=0,t[8]=h+m,t[9]=d-g,t[10]=1-(l+p),t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t}function fa(t,e){var n=new ho(3),r=-e[0],i=-e[1],o=-e[2],a=e[3],s=e[4],u=e[5],c=e[6],l=e[7],f=r*r+i*i+o*o+a*a;return f>0?(n[0]=2*(s*a+l*r+u*o-c*i)/f,n[1]=2*(u*a+l*i+c*r-s*o)/f,n[2]=2*(c*a+l*o+s*i-u*r)/f):(n[0]=2*(s*a+l*r+u*o-c*i),n[1]=2*(u*a+l*i+c*r-s*o),n[2]=2*(c*a+l*o+s*i-u*r)),la(t,e,n),t}function ha(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t}function pa(t,e){var n=e[0],r=e[1],i=e[2],o=e[4],a=e[5],s=e[6],u=e[8],c=e[9],l=e[10];return t[0]=Math.hypot(n,r,i),t[1]=Math.hypot(o,a,s),t[2]=Math.hypot(u,c,l),t}function da(t,e){var n=new ho(3);pa(n,e);var r=1/n[0],i=1/n[1],o=1/n[2],a=e[0]*r,s=e[1]*i,u=e[2]*o,c=e[4]*r,l=e[5]*i,f=e[6]*o,h=e[8]*r,p=e[9]*i,d=e[10]*o,v=a+l+d,g=0;return v>0?(g=2*Math.sqrt(v+1),t[3]=.25*g,t[0]=(f-p)/g,t[1]=(h-u)/g,t[2]=(s-c)/g):a>l&&a>d?(g=2*Math.sqrt(1+a-l-d),t[3]=(f-p)/g,t[0]=.25*g,t[1]=(s+c)/g,t[2]=(h+u)/g):l>d?(g=2*Math.sqrt(1+l-a-d),t[3]=(h-u)/g,t[0]=(s+c)/g,t[1]=.25*g,t[2]=(f+p)/g):(g=2*Math.sqrt(1+d-a-l),t[3]=(s-c)/g,t[0]=(h+u)/g,t[1]=(f+p)/g,t[2]=.25*g),t}function va(t,e,n,r){var i=e[0],o=e[1],a=e[2],s=e[3],u=i+i,c=o+o,l=a+a,f=i*u,h=i*c,p=i*l,d=o*c,v=o*l,g=a*l,m=s*u,y=s*c,_=s*l,b=r[0],x=r[1],w=r[2];return t[0]=(1-(d+g))*b,t[1]=(h+_)*b,t[2]=(p-y)*b,t[3]=0,t[4]=(h-_)*x,t[5]=(1-(f+g))*x,t[6]=(v+m)*x,t[7]=0,t[8]=(p+y)*w,t[9]=(v-m)*w,t[10]=(1-(f+d))*w,t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t}function ga(t,e,n,r,i){var o=e[0],a=e[1],s=e[2],u=e[3],c=o+o,l=a+a,f=s+s,h=o*c,p=o*l,d=o*f,v=a*l,g=a*f,m=s*f,y=u*c,_=u*l,b=u*f,x=r[0],w=r[1],E=r[2],S=i[0],O=i[1],C=i[2],T=(1-(v+m))*x,A=(p+b)*x,k=(d-_)*x,M=(p-b)*w,P=(1-(h+m))*w,R=(g+y)*w,j=(d+_)*E,I=(g-y)*E,L=(1-(h+v))*E;return t[0]=T,t[1]=A,t[2]=k,t[3]=0,t[4]=M,t[5]=P,t[6]=R,t[7]=0,t[8]=j,t[9]=I,t[10]=L,t[11]=0,t[12]=n[0]+S-(T*S+M*O+j*C),t[13]=n[1]+O-(A*S+P*O+I*C),t[14]=n[2]+C-(k*S+R*O+L*C),t[15]=1,t}function ma(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=n+n,s=r+r,u=i+i,c=n*a,l=r*a,f=r*s,h=i*a,p=i*s,d=i*u,v=o*a,g=o*s,m=o*u;return t[0]=1-f-d,t[1]=l+m,t[2]=h-g,t[3]=0,t[4]=l-m,t[5]=1-c-d,t[6]=p+v,t[7]=0,t[8]=h+g,t[9]=p-v,t[10]=1-c-f,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function ya(t,e,n,r,i,o,a){var s=1/(n-e),u=1/(i-r),c=1/(o-a);return t[0]=2*o*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*o*u,t[6]=0,t[7]=0,t[8]=(n+e)*s,t[9]=(i+r)*u,t[10]=(a+o)*c,t[11]=-1,t[12]=0,t[13]=0,t[14]=a*o*2*c,t[15]=0,t}function _a(t,e,n,r,i){var o,a=1/Math.tan(e/2);return t[0]=a/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=i&&i!==1/0?(o=1/(r-i),t[10]=(i+r)*o,t[14]=2*i*r*o):(t[10]=-1,t[14]=-2*r),t}var ba=_a;function xa(t,e,n,r,i){var o,a=1/Math.tan(e/2);return t[0]=a/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=i&&i!==1/0?(o=1/(r-i),t[10]=i*o,t[14]=i*r*o):(t[10]=-1,t[14]=-r),t}function wa(t,e,n,r){var i=Math.tan(e.upDegrees*Math.PI/180),o=Math.tan(e.downDegrees*Math.PI/180),a=Math.tan(e.leftDegrees*Math.PI/180),s=Math.tan(e.rightDegrees*Math.PI/180),u=2/(a+s),c=2/(i+o);return t[0]=u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=c,t[6]=0,t[7]=0,t[8]=-(a-s)*u*.5,t[9]=(i-o)*c*.5,t[10]=r/(n-r),t[11]=-1,t[12]=0,t[13]=0,t[14]=r*n/(n-r),t[15]=0,t}function Ea(t,e,n,r,i,o,a){var s=1/(e-n),u=1/(r-i),c=1/(o-a);return t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*u,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*c,t[11]=0,t[12]=(e+n)*s,t[13]=(i+r)*u,t[14]=(a+o)*c,t[15]=1,t}var Sa=Ea;function Oa(t,e,n,r,i,o,a){var s=1/(e-n),u=1/(r-i),c=1/(o-a);return t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*u,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=c,t[11]=0,t[12]=(e+n)*s,t[13]=(i+r)*u,t[14]=o*c,t[15]=1,t}function Ca(t,e,n,r){var i,o,a,s,u,c,l,f,h,p,d=e[0],v=e[1],g=e[2],m=r[0],y=r[1],_=r[2],b=n[0],x=n[1],w=n[2];return Math.abs(d-b)<fo&&Math.abs(v-x)<fo&&Math.abs(g-w)<fo?Zo(t):(l=d-b,f=v-x,h=g-w,p=1/Math.hypot(l,f,h),l*=p,f*=p,h*=p,i=y*h-_*f,o=_*l-m*h,a=m*f-y*l,p=Math.hypot(i,o,a),p?(p=1/p,i*=p,o*=p,a*=p):(i=0,o=0,a=0),s=f*a-h*o,u=h*i-l*a,c=l*o-f*i,p=Math.hypot(s,u,c),p?(p=1/p,s*=p,u*=p,c*=p):(s=0,u=0,c=0),t[0]=i,t[1]=s,t[2]=l,t[3]=0,t[4]=o,t[5]=u,t[6]=f,t[7]=0,t[8]=a,t[9]=c,t[10]=h,t[11]=0,t[12]=-(i*d+o*v+a*g),t[13]=-(s*d+u*v+c*g),t[14]=-(l*d+f*v+h*g),t[15]=1,t)}function Ta(t,e,n,r){var i=e[0],o=e[1],a=e[2],s=r[0],u=r[1],c=r[2],l=i-n[0],f=o-n[1],h=a-n[2],p=l*l+f*f+h*h;p>0&&(p=1/Math.sqrt(p),l*=p,f*=p,h*=p);var d=u*h-c*f,v=c*l-s*h,g=s*f-u*l;return p=d*d+v*v+g*g,p>0&&(p=1/Math.sqrt(p),d*=p,v*=p,g*=p),t[0]=d,t[1]=v,t[2]=g,t[3]=0,t[4]=f*g-h*v,t[5]=h*d-l*g,t[6]=l*v-f*d,t[7]=0,t[8]=l,t[9]=f,t[10]=h,t[11]=0,t[12]=i,t[13]=o,t[14]=a,t[15]=1,t}function Aa(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"}function ka(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])}function Ma(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t[8]=e[8]+n[8],t[9]=e[9]+n[9],t[10]=e[10]+n[10],t[11]=e[11]+n[11],t[12]=e[12]+n[12],t[13]=e[13]+n[13],t[14]=e[14]+n[14],t[15]=e[15]+n[15],t}function Pa(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t[6]=e[6]-n[6],t[7]=e[7]-n[7],t[8]=e[8]-n[8],t[9]=e[9]-n[9],t[10]=e[10]-n[10],t[11]=e[11]-n[11],t[12]=e[12]-n[12],t[13]=e[13]-n[13],t[14]=e[14]-n[14],t[15]=e[15]-n[15],t}function Ra(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*n,t[9]=e[9]*n,t[10]=e[10]*n,t[11]=e[11]*n,t[12]=e[12]*n,t[13]=e[13]*n,t[14]=e[14]*n,t[15]=e[15]*n,t}function ja(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t[4]=e[4]+n[4]*r,t[5]=e[5]+n[5]*r,t[6]=e[6]+n[6]*r,t[7]=e[7]+n[7]*r,t[8]=e[8]+n[8]*r,t[9]=e[9]+n[9]*r,t[10]=e[10]+n[10]*r,t[11]=e[11]+n[11]*r,t[12]=e[12]+n[12]*r,t[13]=e[13]+n[13]*r,t[14]=e[14]+n[14]*r,t[15]=e[15]+n[15]*r,t}function Ia(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[11]===e[11]&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[15]===e[15]}function La(t,e){var n=t[0],r=t[1],i=t[2],o=t[3],a=t[4],s=t[5],u=t[6],c=t[7],l=t[8],f=t[9],h=t[10],p=t[11],d=t[12],v=t[13],g=t[14],m=t[15],y=e[0],_=e[1],b=e[2],x=e[3],w=e[4],E=e[5],S=e[6],O=e[7],C=e[8],T=e[9],A=e[10],k=e[11],M=e[12],P=e[13],R=e[14],j=e[15];return Math.abs(n-y)<=fo*Math.max(1,Math.abs(n),Math.abs(y))&&Math.abs(r-_)<=fo*Math.max(1,Math.abs(r),Math.abs(_))&&Math.abs(i-b)<=fo*Math.max(1,Math.abs(i),Math.abs(b))&&Math.abs(o-x)<=fo*Math.max(1,Math.abs(o),Math.abs(x))&&Math.abs(a-w)<=fo*Math.max(1,Math.abs(a),Math.abs(w))&&Math.abs(s-E)<=fo*Math.max(1,Math.abs(s),Math.abs(E))&&Math.abs(u-S)<=fo*Math.max(1,Math.abs(u),Math.abs(S))&&Math.abs(c-O)<=fo*Math.max(1,Math.abs(c),Math.abs(O))&&Math.abs(l-C)<=fo*Math.max(1,Math.abs(l),Math.abs(C))&&Math.abs(f-T)<=fo*Math.max(1,Math.abs(f),Math.abs(T))&&Math.abs(h-A)<=fo*Math.max(1,Math.abs(h),Math.abs(A))&&Math.abs(p-k)<=fo*Math.max(1,Math.abs(p),Math.abs(k))&&Math.abs(d-M)<=fo*Math.max(1,Math.abs(d),Math.abs(M))&&Math.abs(v-P)<=fo*Math.max(1,Math.abs(v),Math.abs(P))&&Math.abs(g-R)<=fo*Math.max(1,Math.abs(g),Math.abs(R))&&Math.abs(m-j)<=fo*Math.max(1,Math.abs(m),Math.abs(j))}var Na=Qo,Da=Pa;function Fa(){var t=new ho(2);return ho!=Float32Array&&(t[0]=0,t[1]=0),t}function Ba(t){var e=new ho(2);return e[0]=t[0],e[1]=t[1],e}function za(t,e){var n=new ho(2);return n[0]=t,n[1]=e,n}function Ua(t,e){return t[0]=e[0],t[1]=e[1],t}function Va(t,e,n){return t[0]=e,t[1]=n,t}function Ha(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t}function Ga(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t}function Wa(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t}function Za(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t}function Ya(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t}function Xa(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t}function qa(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t}function Ka(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t}function Qa(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t}function $a(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t}function Ja(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t}function ts(t,e){var n=e[0]-t[0],r=e[1]-t[1];return Math.hypot(n,r)}function es(t,e){var n=e[0]-t[0],r=e[1]-t[1];return n*n+r*r}function ns(t){var e=t[0],n=t[1];return Math.hypot(e,n)}function rs(t){var e=t[0],n=t[1];return e*e+n*n}function is(t,e){return t[0]=-e[0],t[1]=-e[1],t}function os(t,e){return t[0]=1/e[0],t[1]=1/e[1],t}function as(t,e){var n=e[0],r=e[1],i=n*n+r*r;return i>0&&(i=1/Math.sqrt(i)),t[0]=e[0]*i,t[1]=e[1]*i,t}function ss(t,e){return t[0]*e[0]+t[1]*e[1]}function us(t,e,n){var r=e[0]*n[1]-e[1]*n[0];return t[0]=t[1]=0,t[2]=r,t}function cs(t,e,n,r){var i=e[0],o=e[1];return t[0]=i+r*(n[0]-i),t[1]=o+r*(n[1]-o),t}function ls(t,e){e=e||1;var n=2*po()*Math.PI;return t[0]=Math.cos(n)*e,t[1]=Math.sin(n)*e,t}function fs(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[2]*i,t[1]=n[1]*r+n[3]*i,t}function hs(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[2]*i+n[4],t[1]=n[1]*r+n[3]*i+n[5],t}function ps(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[3]*i+n[6],t[1]=n[1]*r+n[4]*i+n[7],t}function ds(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[4]*i+n[12],t[1]=n[1]*r+n[5]*i+n[13],t}function vs(t,e,n,r){var i=e[0]-n[0],o=e[1]-n[1],a=Math.sin(r),s=Math.cos(r);return t[0]=i*s-o*a+n[0],t[1]=i*a+o*s+n[1],t}function gs(t,e){var n=t[0],r=t[1],i=e[0],o=e[1],a=Math.sqrt(n*n+r*r)*Math.sqrt(i*i+o*o),s=a&&(n*i+r*o)/a;return Math.acos(Math.min(Math.max(s,-1),1))}function ms(t){return t[0]=0,t[1]=0,t}function ys(t){return"vec2("+t[0]+", "+t[1]+")"}function _s(t,e){return t[0]===e[0]&&t[1]===e[1]}function bs(t,e){var n=t[0],r=t[1],i=e[0],o=e[1];return Math.abs(n-i)<=fo*Math.max(1,Math.abs(n),Math.abs(i))&&Math.abs(r-o)<=fo*Math.max(1,Math.abs(r),Math.abs(o))}var xs=ns,ws=Ga,Es=Wa,Ss=Za,Os=ts,Cs=es,Ts=rs,As=function(){var t=Fa();return function(e,n,r,i,o,a){var s,u;for(n||(n=2),r||(r=0),u=i?Math.min(i*n+r,e.length):e.length,s=r;s<u;s+=n)t[0]=e[s],t[1]=e[s+1],o(t,t,a),e[s]=t[0],e[s+1]=t[1];return e}}();function ks(){var t=new ho(3);return ho!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function Ms(t){var e=new ho(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function Ps(t){var e=t[0],n=t[1],r=t[2];return Math.hypot(e,n,r)}function Rs(t,e,n){var r=new ho(3);return r[0]=t,r[1]=e,r[2]=n,r}function js(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function Is(t,e,n,r){return t[0]=e,t[1]=n,t[2]=r,t}function Ls(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t}function Ns(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t}function Ds(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t}function Fs(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],t}function Bs(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t}function zs(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t}function Us(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t[2]=Math.min(e[2],n[2]),t}function Vs(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t[2]=Math.max(e[2],n[2]),t}function Hs(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t}function Gs(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t}function Ws(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t}function Zs(t,e){var n=e[0]-t[0],r=e[1]-t[1],i=e[2]-t[2];return Math.hypot(n,r,i)}function Ys(t,e){var n=e[0]-t[0],r=e[1]-t[1],i=e[2]-t[2];return n*n+r*r+i*i}function Xs(t){var e=t[0],n=t[1],r=t[2];return e*e+n*n+r*r}function qs(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t}function Ks(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t}function Qs(t,e){var n=e[0],r=e[1],i=e[2],o=n*n+r*r+i*i;return o>0&&(o=1/Math.sqrt(o)),t[0]=e[0]*o,t[1]=e[1]*o,t[2]=e[2]*o,t}function $s(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function Js(t,e,n){var r=e[0],i=e[1],o=e[2],a=n[0],s=n[1],u=n[2];return t[0]=i*u-o*s,t[1]=o*a-r*u,t[2]=r*s-i*a,t}function tu(t,e,n,r){var i=e[0],o=e[1],a=e[2];return t[0]=i+r*(n[0]-i),t[1]=o+r*(n[1]-o),t[2]=a+r*(n[2]-a),t}function eu(t,e,n,r,i,o){var a=o*o,s=a*(2*o-3)+1,u=a*(o-2)+o,c=a*(o-1),l=a*(3-2*o);return t[0]=e[0]*s+n[0]*u+r[0]*c+i[0]*l,t[1]=e[1]*s+n[1]*u+r[1]*c+i[1]*l,t[2]=e[2]*s+n[2]*u+r[2]*c+i[2]*l,t}function nu(t,e,n,r,i,o){var a=1-o,s=a*a,u=o*o,c=s*a,l=3*o*s,f=3*u*a,h=u*o;return t[0]=e[0]*c+n[0]*l+r[0]*f+i[0]*h,t[1]=e[1]*c+n[1]*l+r[1]*f+i[1]*h,t[2]=e[2]*c+n[2]*l+r[2]*f+i[2]*h,t}function ru(t,e){e=e||1;var n=2*po()*Math.PI,r=2*po()-1,i=Math.sqrt(1-r*r)*e;return t[0]=Math.cos(n)*i,t[1]=Math.sin(n)*i,t[2]=r*e,t}function iu(t,e,n){var r=e[0],i=e[1],o=e[2],a=n[3]*r+n[7]*i+n[11]*o+n[15];return a=a||1,t[0]=(n[0]*r+n[4]*i+n[8]*o+n[12])/a,t[1]=(n[1]*r+n[5]*i+n[9]*o+n[13])/a,t[2]=(n[2]*r+n[6]*i+n[10]*o+n[14])/a,t}function ou(t,e,n){var r=e[0],i=e[1],o=e[2];return t[0]=r*n[0]+i*n[3]+o*n[6],t[1]=r*n[1]+i*n[4]+o*n[7],t[2]=r*n[2]+i*n[5]+o*n[8],t}function au(t,e,n){var r=n[0],i=n[1],o=n[2],a=n[3],s=e[0],u=e[1],c=e[2],l=i*c-o*u,f=o*s-r*c,h=r*u-i*s,p=i*h-o*f,d=o*l-r*h,v=r*f-i*l,g=2*a;return l*=g,f*=g,h*=g,p*=2,d*=2,v*=2,t[0]=s+l+p,t[1]=u+f+d,t[2]=c+h+v,t}function su(t,e,n,r){var i=[],o=[];return i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],o[0]=i[0],o[1]=i[1]*Math.cos(r)-i[2]*Math.sin(r),o[2]=i[1]*Math.sin(r)+i[2]*Math.cos(r),t[0]=o[0]+n[0],t[1]=o[1]+n[1],t[2]=o[2]+n[2],t}function uu(t,e,n,r){var i=[],o=[];return i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],o[0]=i[2]*Math.sin(r)+i[0]*Math.cos(r),o[1]=i[1],o[2]=i[2]*Math.cos(r)-i[0]*Math.sin(r),t[0]=o[0]+n[0],t[1]=o[1]+n[1],t[2]=o[2]+n[2],t}function cu(t,e,n,r){var i=[],o=[];return i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],o[0]=i[0]*Math.cos(r)-i[1]*Math.sin(r),o[1]=i[0]*Math.sin(r)+i[1]*Math.cos(r),o[2]=i[2],t[0]=o[0]+n[0],t[1]=o[1]+n[1],t[2]=o[2]+n[2],t}function lu(t,e){var n=t[0],r=t[1],i=t[2],o=e[0],a=e[1],s=e[2],u=Math.sqrt(n*n+r*r+i*i),c=Math.sqrt(o*o+a*a+s*s),l=u*c,f=l&&$s(t,e)/l;return Math.acos(Math.min(Math.max(f,-1),1))}function fu(t){return t[0]=0,t[1]=0,t[2]=0,t}function hu(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"}function pu(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]}function du(t,e){var n=t[0],r=t[1],i=t[2],o=e[0],a=e[1],s=e[2];return Math.abs(n-o)<=fo*Math.max(1,Math.abs(n),Math.abs(o))&&Math.abs(r-a)<=fo*Math.max(1,Math.abs(r),Math.abs(a))&&Math.abs(i-s)<=fo*Math.max(1,Math.abs(i),Math.abs(s))}var vu=Ns,gu=Ds,mu=Fs,yu=Zs,_u=Ys,bu=Ps,xu=Xs,wu=function(){var t=ks();return function(e,n,r,i,o,a){var s,u;for(n||(n=3),r||(r=0),u=i?Math.min(i*n+r,e.length):e.length,s=r;s<u;s+=n)t[0]=e[s],t[1]=e[s+1],t[2]=e[s+2],o(t,t,a),e[s]=t[0],e[s+1]=t[1],e[s+2]=t[2];return e}}();function Eu(){var t=new ho(4);return ho!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t}function Su(t){var e=new ho(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function Ou(t,e,n,r){var i=new ho(4);return i[0]=t,i[1]=e,i[2]=n,i[3]=r,i}function Cu(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function Tu(t,e,n,r,i){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t}function Au(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t}function ku(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t}function Mu(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t[3]=e[3]*n[3],t}function Pu(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],t[3]=e[3]/n[3],t}function Ru(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t[3]=Math.ceil(e[3]),t}function ju(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t[3]=Math.floor(e[3]),t}function Iu(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t[2]=Math.min(e[2],n[2]),t[3]=Math.min(e[3],n[3]),t}function Lu(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t[2]=Math.max(e[2],n[2]),t[3]=Math.max(e[3],n[3]),t}function Nu(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t[3]=Math.round(e[3]),t}function Du(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t}function Fu(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t}function Bu(t,e){var n=e[0]-t[0],r=e[1]-t[1],i=e[2]-t[2],o=e[3]-t[3];return Math.hypot(n,r,i,o)}function zu(t,e){var n=e[0]-t[0],r=e[1]-t[1],i=e[2]-t[2],o=e[3]-t[3];return n*n+r*r+i*i+o*o}function Uu(t){var e=t[0],n=t[1],r=t[2],i=t[3];return Math.hypot(e,n,r,i)}function Vu(t){var e=t[0],n=t[1],r=t[2],i=t[3];return e*e+n*n+r*r+i*i}function Hu(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t}function Gu(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t[3]=1/e[3],t}function Wu(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=n*n+r*r+i*i+o*o;return a>0&&(a=1/Math.sqrt(a)),t[0]=n*a,t[1]=r*a,t[2]=i*a,t[3]=o*a,t}function Zu(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}function Yu(t,e,n,r){var i=n[0]*r[1]-n[1]*r[0],o=n[0]*r[2]-n[2]*r[0],a=n[0]*r[3]-n[3]*r[0],s=n[1]*r[2]-n[2]*r[1],u=n[1]*r[3]-n[3]*r[1],c=n[2]*r[3]-n[3]*r[2],l=e[0],f=e[1],h=e[2],p=e[3];return t[0]=f*c-h*u+p*s,t[1]=-l*c+h*a-p*o,t[2]=l*u-f*a+p*i,t[3]=-l*s+f*o-h*i,t}function Xu(t,e,n,r){var i=e[0],o=e[1],a=e[2],s=e[3];return t[0]=i+r*(n[0]-i),t[1]=o+r*(n[1]-o),t[2]=a+r*(n[2]-a),t[3]=s+r*(n[3]-s),t}function qu(t,e){var n,r,i,o,a,s;e=e||1;do{n=2*po()-1,r=2*po()-1,a=n*n+r*r}while(a>=1);do{i=2*po()-1,o=2*po()-1,s=i*i+o*o}while(s>=1);var u=Math.sqrt((1-a)/s);return t[0]=e*n,t[1]=e*r,t[2]=e*i*u,t[3]=e*o*u,t}function Ku(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3];return t[0]=n[0]*r+n[4]*i+n[8]*o+n[12]*a,t[1]=n[1]*r+n[5]*i+n[9]*o+n[13]*a,t[2]=n[2]*r+n[6]*i+n[10]*o+n[14]*a,t[3]=n[3]*r+n[7]*i+n[11]*o+n[15]*a,t}function Qu(t,e,n){var r=e[0],i=e[1],o=e[2],a=n[0],s=n[1],u=n[2],c=n[3],l=c*r+s*o-u*i,f=c*i+u*r-a*o,h=c*o+a*i-s*r,p=-a*r-s*i-u*o;return t[0]=l*c+p*-a+f*-u-h*-s,t[1]=f*c+p*-s+h*-a-l*-u,t[2]=h*c+p*-u+l*-s-f*-a,t[3]=e[3],t}function $u(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t}function Ju(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}function tc(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]}function ec(t,e){var n=t[0],r=t[1],i=t[2],o=t[3],a=e[0],s=e[1],u=e[2],c=e[3];return Math.abs(n-a)<=fo*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(r-s)<=fo*Math.max(1,Math.abs(r),Math.abs(s))&&Math.abs(i-u)<=fo*Math.max(1,Math.abs(i),Math.abs(u))&&Math.abs(o-c)<=fo*Math.max(1,Math.abs(o),Math.abs(c))}var nc=ku,rc=Mu,ic=Pu,oc=Bu,ac=zu,sc=Uu,uc=Vu,cc=function(){var t=Eu();return function(e,n,r,i,o,a){var s,u;for(n||(n=4),r||(r=0),u=i?Math.min(i*n+r,e.length):e.length,s=r;s<u;s+=n)t[0]=e[s],t[1]=e[s+1],t[2]=e[s+2],t[3]=e[s+3],o(t,t,a),e[s]=t[0],e[s+1]=t[1],e[s+2]=t[2],e[s+3]=t[3];return e}}(),lc=s.create(),fc=(s.create(),s.create()),hc=s.create(),pc=s.create();function dc(t,e,n,r,i){s.add(t,n,r),s.normalize(t,t),e=s.fromValues(-t[1],t[0]);var o=s.fromValues(-n[1],n[0]);return[i/s.dot(e,o),e]}function vc(t,e){return s.set(t,-e[1],e[0])}function gc(t,e,n){return s.sub(t,e,n),s.normalize(t,t),t}function mc(t,e){return t[0]===e[0]&&t[1]===e[1]}var yc=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(et["a"])(this,t),Object(Ar["a"])(this,"lastFlip",-1),Object(Ar["a"])(this,"miter",s.fromValues(0,0)),Object(Ar["a"])(this,"started",!1),Object(Ar["a"])(this,"dash",!1),Object(Ar["a"])(this,"totalDistance",0),Object(Ar["a"])(this,"currentIndex",0),this.join=e.join||"miter",this.cap=e.cap||"butt",this.miterLimit=e.miterLimit||10,this.thickness=e.thickness||1,this.dash=e.dash||!1,this.complex={positions:[],indices:[],normals:[],startIndex:0,indexes:[]}}return Object(nt["a"])(t,[{key:"extrude_gaode2",value:function(t,e){var n=this.complex;if(t.length<=1)return n;this.lastFlip=-1,this.started=!1,this.normal=null,this.totalDistance=0;for(var r=t.length,i=n.startIndex,o=1;o<r;o++){var a,s,u,c=t[o-1];c.push(null!==(a=e[o-1][2])&&void 0!==a?a:0);var l=e[o-1],f=t[o];f.push(null!==(s=e[o][2])&&void 0!==s?s:0);var h=e[o],p=o<t.length-1?[].concat(Object(M["a"])(t[o+1]),[null!==(u=e[o+1][2])&&void 0!==u?u:0]):null,d=o<e.length-1?e[o+1]:null,v=this.segment_gaode2(n,i,c,f,p,l,h,d);i+=v}if(this.dash)for(var g=0;g<n.positions.length/6;g++)n.positions[6*g+5]=this.totalDistance;return n.startIndex=n.positions.length/6,n}},{key:"simpleExtrude_gaode2",value:function(t,e){var n=this.complex;if(t.length<=1)return n;this.lastFlip=-1,this.started=!1,this.normal=null,this.totalDistance=0;for(var r=t.length,i=n.startIndex,o=1;o<r;o++){var a,s,u,c=t[o-1];c.push(null!==(a=e[o-1][2])&&void 0!==a?a:0);var l=e[o-1],f=t[o];f.push(null!==(s=e[o][2])&&void 0!==s?s:0);var h=e[o],p=o<t.length-1?[].concat(Object(M["a"])(t[o+1]),[null!==(u=e[o+1][2])&&void 0!==u?u:0]):null,d=o<e.length-1?e[o+1]:null,v=this.simpleSegment(n,i,c,f,p,l,h,d);i+=v}if(this.dash)for(var g=0;g<n.positions.length/6;g++)n.positions[6*g+5]=this.totalDistance;return n.startIndex=n.positions.length/6,n}},{key:"extrude",value:function(t){var e=this.complex;if(t.length<=1)return e;this.lastFlip=-1,this.started=!1,this.normal=null,this.totalDistance=0;for(var n=t.length,r=e.startIndex,i=1;i<n;i++){var o=t[i-1],a=t[i],s=i<t.length-1?t[i+1]:null,u=this.segment(e,r,o,a,s);r+=u}if(this.dash)for(var c=0;c<e.positions.length/6;c++)e.positions[6*c+5]=this.totalDistance;return e.startIndex=e.positions.length/6,e}},{key:"simpleExtrude",value:function(t){var e=this.complex;if(t.length<=1)return e;this.lastFlip=-1,this.started=!1,this.normal=null,this.totalDistance=0;for(var n=t.length,r=e.startIndex,i=1;i<n;i++){var o=t[i-1],a=t[i],s=i<t.length-1?t[i+1]:null,u=this.simpleSegment(e,r,o,a,s);r+=u}if(this.dash)for(var c=0;c<e.positions.length/6;c++)e.positions[6*c+5]=this.totalDistance;return e.startIndex=e.positions.length/6,e}},{key:"segment_gaode2",value:function(t,e,n,r,i,o,a,u){var c=0,l=t.indices,f=t.positions,h=t.normals,p="square"===this.cap,d="bevel"===this.join,v=yr([a[0],a[1]]),g=yr([o[0],o[1]]);gc(fc,r,n);var m=0;if(this.dash&&(m=this.lineSegmentDistance(v,g),this.totalDistance+=m),this.normal||(this.normal=s.create(),vc(this.normal,fc)),!this.started)if(this.started=!0,p){var y=s.create(),_=s.create();s.add(y,this.normal,fc),s.add(_,this.normal,fc),h.push(_[0],_[1],0),h.push(y[0],y[1],0),f.push(n[0],n[1],0|n[2],this.totalDistance-m,-this.thickness,0|n[2]),this.complex.indexes.push(this.currentIndex),f.push(n[0],n[1],0|n[2],this.totalDistance-m,this.thickness,0|n[2]),this.complex.indexes.push(this.currentIndex),this.currentIndex++}else this.extrusions(f,h,n,this.normal,this.thickness,this.totalDistance-m);if(l.push(e+0,e+1,e+2),i){mc(r,i)&&s.add(i,r,s.normalize(i,s.subtract(i,r,n))),gc(hc,i,r);var b=dc(pc,s.create(),fc,hc,this.thickness),x=Object(q["a"])(b,2),w=x[0],E=x[1],S=s.dot(pc,this.normal)<0?-1:1,O=d;if(!O&&"miter"===this.join){var C=w;C>this.miterLimit&&(O=!0)}O?(h.push(this.normal[0],this.normal[1],0),h.push(E[0],E[1],0),f.push(r[0],r[1],0|r[2],this.totalDistance,-this.thickness*S,0|r[2]),this.complex.indexes.push(this.currentIndex),f.push(r[0],r[1],0|r[2],this.totalDistance,this.thickness*S,0|r[2]),this.complex.indexes.push(this.currentIndex),this.currentIndex++,l.push.apply(l,Object(M["a"])(this.lastFlip!==-S?[e,e+2,e+3]:[e+2,e+1,e+3])),l.push(e+2,e+3,e+4),vc(lc,hc),s.copy(this.normal,lc),h.push(this.normal[0],this.normal[1],0),f.push(r[0],r[1],0|r[2],this.totalDistance,-this.thickness*S,0|r[2]),this.complex.indexes.push(this.currentIndex),this.currentIndex++,c+=3):(this.extrusions(f,h,r,E,w,this.totalDistance),l.push.apply(l,Object(M["a"])(1===this.lastFlip?[e,e+2,e+3]:[e+2,e+1,e+3])),S=-1,s.copy(this.normal,E),c+=2),this.lastFlip=S}else{if(vc(this.normal,fc),p){var T=s.create(),A=s.create();s.sub(A,fc,this.normal),s.add(T,fc,this.normal),h.push(A[0],A[1],0),h.push(T[0],T[1],0),f.push(r[0],r[1],0|r[2],this.totalDistance,this.thickness,0|r[2]),this.complex.indexes.push(this.currentIndex),f.push(r[0],r[1],0|r[2],this.totalDistance,this.thickness,0|r[2]),this.complex.indexes.push(this.currentIndex),this.currentIndex++}else this.extrusions(f,h,r,this.normal,this.thickness,this.totalDistance);l.push.apply(l,Object(M["a"])(1===this.lastFlip?[e,e+2,e+3]:[e+2,e+1,e+3])),c+=2}return c}},{key:"simpleSegment",value:function(t,e,n,r,i){var o=0,a=t.indices,u=t.positions,c=t.normals,l=yr([r[0],r[1]]),f=yr([n[0],n[1]]);gc(fc,l,f);var h=0;if(this.dash&&(h=this.lineSegmentDistance(l,f),this.totalDistance+=h),this.normal||(this.normal=s.create(),vc(this.normal,fc)),this.started||(this.started=!0,this.extrusions(u,c,n,this.normal,this.thickness,this.totalDistance-h)),a.push(e+0,e+1,e+2),i){var p=yr([i[0],i[1]]);mc(l,p)&&s.add(p,l,s.normalize(p,s.subtract(p,l,f))),gc(hc,p,l);var d=dc(pc,s.create(),fc,hc,this.thickness),v=Object(q["a"])(d,2),g=v[0],m=v[1],y=s.dot(pc,this.normal)<0?-1:1;this.extrusions(u,c,r,m,g,this.totalDistance),a.push.apply(a,Object(M["a"])(1===this.lastFlip?[e,e+2,e+3]:[e+2,e+1,e+3])),y=-1,s.copy(this.normal,m),o+=2,this.lastFlip=y}else vc(this.normal,fc),this.extrusions(u,c,r,this.normal,this.thickness,this.totalDistance),a.push.apply(a,Object(M["a"])(1===this.lastFlip?[e,e+2,e+3]:[e+2,e+1,e+3])),o+=2;return o}},{key:"segment",value:function(t,e,n,r,i){var o=0,a=t.indices,u=t.positions,c=t.normals,l="square"===this.cap,f="bevel"===this.join,h=yr([r[0],r[1]]),p=yr([n[0],n[1]]);gc(fc,h,p);var d=0;if(this.dash&&(d=this.lineSegmentDistance(h,p),this.totalDistance+=d),this.normal||(this.normal=s.create(),vc(this.normal,fc)),!this.started)if(this.started=!0,l){var v=s.create(),g=s.create();s.add(v,this.normal,fc),s.add(g,this.normal,fc),c.push(g[0],g[1],0),c.push(v[0],v[1],0),u.push(n[0],n[1],0|n[2],this.totalDistance-d,-this.thickness,0|n[2]),this.complex.indexes.push(this.currentIndex),u.push(n[0],n[1],0|n[2],this.totalDistance-d,this.thickness,0|n[2]),this.complex.indexes.push(this.currentIndex),this.currentIndex++}else this.extrusions(u,c,n,this.normal,this.thickness,this.totalDistance-d);if(a.push(e+0,e+1,e+2),i){var m=yr([i[0],i[1]]);mc(h,m)&&s.add(m,h,s.normalize(m,s.subtract(m,h,p))),gc(hc,m,h);var y=dc(pc,s.create(),fc,hc,this.thickness),_=Object(q["a"])(y,2),b=_[0],x=_[1],w=s.dot(pc,this.normal)<0?-1:1,E=f;if(!E&&"miter"===this.join){var S=b;S>this.miterLimit&&(E=!0)}E?(c.push(this.normal[0],this.normal[1],0),c.push(x[0],x[1],0),u.push(r[0],r[1],0|r[2],this.totalDistance,-this.thickness*w,0|r[2]),this.complex.indexes.push(this.currentIndex),u.push(r[0],r[1],0|r[2],this.totalDistance,this.thickness*w,0|r[2]),this.complex.indexes.push(this.currentIndex),this.currentIndex++,a.push.apply(a,Object(M["a"])(this.lastFlip!==-w?[e,e+2,e+3]:[e+2,e+1,e+3])),a.push(e+2,e+3,e+4),vc(lc,hc),s.copy(this.normal,lc),c.push(this.normal[0],this.normal[1],0),u.push(r[0],r[1],0|r[2],this.totalDistance,-this.thickness*w,0|r[2]),this.complex.indexes.push(this.currentIndex),this.currentIndex++,o+=3):(this.extrusions(u,c,r,x,b,this.totalDistance),a.push.apply(a,Object(M["a"])(1===this.lastFlip?[e,e+2,e+3]:[e+2,e+1,e+3])),w=-1,s.copy(this.normal,x),o+=2),this.lastFlip=w}else{if(vc(this.normal,fc),l){var O=s.create(),C=s.create();s.sub(C,fc,this.normal),s.add(O,fc,this.normal),c.push(C[0],C[1],0),c.push(O[0],O[1],0),u.push(r[0],r[1],0|r[2],this.totalDistance,this.thickness,0|r[2]),this.complex.indexes.push(this.currentIndex),u.push(r[0],r[1],0|r[2],this.totalDistance,this.thickness,0|r[2]),this.complex.indexes.push(this.currentIndex),this.currentIndex++}else this.extrusions(u,c,r,this.normal,this.thickness,this.totalDistance);a.push.apply(a,Object(M["a"])(1===this.lastFlip?[e,e+2,e+3]:[e+2,e+1,e+3])),o+=2}return o}},{key:"extrusions",value:function(t,e,n,r,i,o){e.push(r[0],r[1],0),e.push(r[0],r[1],0),t.push(n[0],n[1],0|n[2],o,-i,0|n[2]),this.complex.indexes.push(this.currentIndex),t.push(n[0],n[1],0|n[2],o,i,0|n[2]),this.complex.indexes.push(this.currentIndex),this.currentIndex++}},{key:"lineSegmentDistance",value:function(t,e){var n=e[0]-t[0],r=e[1]-t[1];return Math.sqrt(n*n+r*r)}}]),t}();function _c(t){var e=t.coordinates,n=t.originCoordinates,r=t.version,i=new yc({dash:!0,join:"bevel"});if("GAODE2.x"===r){var o=e;Array.isArray(o[0][0])||(o=[e]);var a=n;Array.isArray(a[0][0])||(a=[n]);for(var s=0;s<o.length;s++){var u=o[s],c=a[s];i.extrude_gaode2(u,c)}}else{var l=e;l[0]&&!Array.isArray(l[0][0])&&(l=[e]),l.forEach((function(t){i.extrude(t)}))}var f=i.complex;return{vertices:f.positions,indices:f.indices,normals:f.normals,indexes:f.indexes,size:6}}function bc(t){var e=Sr(t.coordinates);return{vertices:[].concat(Object(M["a"])(e),Object(M["a"])(e),Object(M["a"])(e),Object(M["a"])(e)),indices:[0,1,2,2,3,0],size:e.length}}function xc(t){var e=t.coordinates,n=lo.a.flatten(e),r=n.vertices,i=n.dimensions,o=n.holes;return{indices:lo()(r,o,i),vertices:r,size:i}}var wc=function(){var t=Object(mi["a"])(_i.a.mark((function t(e){var n,r,i,o,a,s,u,c,l;return _i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.descriptors,r=e.features,i=e.enablePicking,o=e.iconMap,a={a_Color:oo,a_Position:ao,filter:so,a_vertexId:uo,a_PickingColor:function(t){var e=t.id;return i?hi(e):[0,0,0]},a_DistanceAndIndex:function(t,e,n,r,i,o){return void 0===o?[n[3],10]:[n[3],o]},a_Total_Distance:function(t,e,n){return[n[5]]},a_Size:function(t){var e=t.size,n=void 0===e?1:e;return Array.isArray(n)?[n[0],n[1]]:[n,0]},a_Normal:function(t,e,n,r,i){return i},a_Miter:function(t,e,n){return[n[4]]},a_iconMapUV:function(t){var e=t.texture,n=o[e]||{x:0,y:0},r=n.x,i=n.y;return[r,i]}},s={sizePerElement:0,elements:[]},u=0,c=[],l=3,r.forEach((function(t,e){var r=_c(t),i=r.indices,o=r.vertices,f=r.normals,h=r.size,p=r.indexes;i.forEach((function(t){c.push(t+u)})),l=h;var d=o.length/h;s.sizePerElement=l,s.elements.push({featureIdx:e,vertices:o,normals:f,offset:u}),u+=d;for(var v=function(r){var i=(null===f||void 0===f?void 0:f.slice(3*r,3*r+3))||[],s=o.slice(r*h,r*h+h),u=0;p&&void 0!==p[r]&&(u=p[r]),n.forEach((function(n){var o;n&&a[n.name]&&(o=n.buffer.data).push.apply(o,Object(M["a"])(a[n.name](t,e,s,r,i,u)))}))},g=0;g<d;g++)v(g)})),t.abrupt("return",{descriptors:n,featureLayout:s,indices:c});case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),Ec=function(){var t=Object(mi["a"])(_i.a.mark((function t(e){var n,r,i,o,a,s,u,c,l;return _i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.descriptors,r=e.features,i=e.enablePicking,o=e.shape2d,a={a_Color:oo,a_Position:ao,filter:so,a_vertexId:uo,a_PickingColor:function(t){var e=t.id;return i?hi(e):[0,0,0]},a_Shape:function(t){var e=t.shape,n=void 0===e?2:e,r=o.indexOf(n);return[r]},a_Extrude:function(t,e,n,r){var i=[1,1,0,-1,1,0,-1,-1,0,1,-1,0],o=r%4*3;return[i[o],i[o+1],i[o+2]]},a_Size:function(t){var e=t.size,n=void 0===e?5:e;return Array.isArray(n)?[n[0]]:[n]}},s={sizePerElement:0,elements:[]},u=0,c=[],l=3,r.forEach((function(t,e){var r=bc(t),i=r.indices,o=r.vertices,f=r.normals,h=r.size,p=r.indexes;i.forEach((function(t){c.push(t+u)})),l=h;var d=o.length/h;s.sizePerElement=l,s.elements.push({featureIdx:e,vertices:o,normals:f,offset:u}),u+=d;for(var v=function(r){var i=(null===f||void 0===f?void 0:f.slice(3*r,3*r+3))||[],s=o.slice(r*h,r*h+h),u=0;p&&void 0!==p[r]&&(u=p[r]),n.forEach((function(n){var o;n&&a[n.name]&&(o=n.buffer.data).push.apply(o,Object(M["a"])(a[n.name](t,e,s,r,i,u)))}))},g=0;g<d;g++)v(g)})),t.abrupt("return",{descriptors:n,featureLayout:s,indices:c});case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),Sc=function(){var t=Object(mi["a"])(_i.a.mark((function t(e){var n,r,i,o,a,s,u,c;return _i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.descriptors,r=e.features,i=e.enablePicking,o={a_Color:oo,a_Position:ao,filter:so,a_vertexId:uo,a_PickingColor:function(t){var e=t.id;return i?hi(e):[0,0,0]}},a={sizePerElement:0,elements:[]},s=0,u=[],c=3,r.forEach((function(t,e){var r=xc(t),i=r.indices,l=r.vertices,f=r.normals,h=r.size,p=r.indexes;i.forEach((function(t){u.push(t+s)})),c=h;var d=l.length/h;a.sizePerElement=c,a.elements.push({featureIdx:e,vertices:l,normals:f,offset:s}),s+=d;for(var v=function(r){var i=(null===f||void 0===f?void 0:f.slice(3*r,3*r+3))||[],a=l.slice(r*h,r*h+h),s=0;p&&void 0!==p[r]&&(s=p[r]),n.forEach((function(n){var u;n&&o[n.name]&&(u=n.buffer.data).push.apply(u,Object(M["a"])(o[n.name](t,e,a,r,i,s)))}))},g=0;g<d;g++)v(g)})),t.abrupt("return",{descriptors:n,featureLayout:a,indices:u});case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),Oc={pointFill:Ec,line:wc,polygonFill:Sc},Cc=Object(P["a"])({},Oc);function Tc(t){return Ac.apply(this,arguments)}function Ac(){return Ac=Object(mi["a"])(_i.a.mark((function t(e){var n,r;return _i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n=e.workerType,r=e.data,!Cc[n]){t.next=3;break}return t.abrupt("return",Cc[n](r));case 3:return t.abrupt("return",Promise.reject(new Error('Worker with type "'.concat(n,'" non-existent.'))));case 4:case"end":return t.stop()}}),t)}))),Ac.apply(this,arguments)}ro(Tc);var kc=new Map;function Mc(t,e){kc.set(t,e)}function Pc(t){var e=kc.get(t);return e}var Rc='var L7=function(t){"use strict";function e(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function r(){r=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function f(t,e,r,n){var i=e&&e.prototype instanceof p?e:p,a=Object.create(i.prototype),u=new T(n||[]);return o(a,"_invoke",{value:E(t,r,u)}),a}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=f;var h={};function p(){}function v(){}function d(){}var y={};c(y,a,(function(){return this}));var g=Object.getPrototypeOf,m=g&&g(g(k([])));m&&m!==e&&n.call(m,a)&&(y=m);var x=d.prototype=p.prototype=Object.create(y);function b(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function w(t,e){var r;o(this,"_invoke",{value:function(o,i){function a(){return new e((function(r,a){!function r(o,i,a,u){var s=l(t[o],t,i);if("throw"!==s.type){var c=s.arg,f=c.value;return f&&"object"==typeof f&&n.call(f,"__await")?e.resolve(f.__await).then((function(t){r("next",t,a,u)}),(function(t){r("throw",t,a,u)})):e.resolve(f).then((function(t){c.value=t,a(c)}),(function(t){return r("throw",t,a,u)}))}u(s.arg)}(o,i,r,a)}))}return r=r?r.then(a,a):a()}})}function E(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return I()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var u=A(a,r);if(u){if(u===h)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var s=l(t,e,r);if("normal"===s.type){if(n=r.done?"completed":"suspendedYield",s.arg===h)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(n="completed",r.method="throw",r.arg=s.arg)}}}function A(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,A(t,e),"throw"===e.method))return h;e.method="throw",e.arg=new TypeError("The iterator does not provide a \'throw\' method")}return h}var n=l(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,h;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,h):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,h)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function T(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function k(t){if(t){var e=t[a];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,o=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:I}}function I(){return{value:void 0,done:!0}}return v.prototype=d,o(x,"constructor",{value:d,configurable:!0}),o(d,"constructor",{value:v,configurable:!0}),v.displayName=c(d,s,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===v||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,c(t,s,"GeneratorFunction")),t.prototype=Object.create(x),t},t.awrap=function(t){return{__await:t}},b(w.prototype),c(w.prototype,u,(function(){return this})),t.AsyncIterator=w,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new w(f(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},b(x),c(x,s,"Generator"),c(x,a,(function(){return this})),c(x,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=k,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var u=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(u&&s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),S(r),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;S(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:k(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),h}},t}function n(t,e,r,n,o,i,a){try{var u=t[i](a),s=u.value}catch(t){return void r(t)}u.done?e(s):Promise.resolve(s).then(n,o)}function o(t){return function(){var e=this,r=arguments;return new Promise((function(o,i){var a=t.apply(e,r);function u(t){n(a,o,i,u,s,"next",t)}function s(t){n(a,o,i,u,s,"throw",t)}u(void 0)}))}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function u(t,e,r){return e&&a(t.prototype,e),r&&a(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function s(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function c(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&l(t,e)}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function l(t,e){return(l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function h(t){if(void 0===t)throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called");return t}function p(t,e){if(e&&("object"==typeof e||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return h(t)}function v(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=f(t);if(e){var o=f(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return p(this,r)}}function d(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,u=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){u=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(u)throw o}}return i}(t,e)||g(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(t){return function(t){if(Array.isArray(t))return m(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||g(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(t,e){if(t){if("string"==typeof t)return m(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?m(t,e):void 0}}function m(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var x="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function b(t,e){return t(e={exports:{}},e.exports),e.exports}var w,E,A=function(t){return t&&t.Math==Math&&t},O=A("object"==typeof globalThis&&globalThis)||A("object"==typeof window&&window)||A("object"==typeof self&&self)||A("object"==typeof x&&x)||function(){return this}()||Function("return this")(),S=Object.defineProperty,T=function(t,e){try{S(O,t,{value:e,configurable:!0,writable:!0})}catch(r){O[t]=e}return e},k=O["__core-js_shared__"]||T("__core-js_shared__",{}),I=b((function(t){(t.exports=function(t,e){return k[t]||(k[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.26.1",mode:"global",copyright:"\xa9 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.26.1/LICENSE",source:"https://github.com/zloirock/core-js"})})),j=function(t){try{return!!t()}catch(t){return!0}},P=!j((function(){var t=function(){}.bind();return"function"!=typeof t||t.hasOwnProperty("prototype")})),_=Function.prototype,M=_.call,L=P&&_.bind.bind(M,M),R=P?L:function(t){return function(){return M.apply(t,arguments)}},C=function(t){return null==t},N=TypeError,D=function(t){if(C(t))throw N("Can\'t call method on "+t);return t},F=Object,W=function(t){return F(D(t))},z=R({}.hasOwnProperty),B=Object.hasOwn||function(t,e){return z(W(t),e)},U=0,G=Math.random(),H=R(1..toString),V=function(t){return"Symbol("+(void 0===t?"":t)+")_"+H(++U+G,36)},q="object"==typeof document&&document.all,Z={all:q,IS_HTMLDDA:void 0===q&&void 0!==q},Y=Z.all,$=Z.IS_HTMLDDA?function(t){return"function"==typeof t||t===Y}:function(t){return"function"==typeof t},K=function(t){return $(t)?t:void 0},Q=function(t,e){return arguments.length<2?K(O[t]):O[t]&&O[t][e]},X=Q("navigator","userAgent")||"",J=O.process,tt=O.Deno,et=J&&J.versions||tt&&tt.version,rt=et&&et.v8;rt&&(E=(w=rt.split("."))[0]>0&&w[0]<4?1:+(w[0]+w[1])),!E&&X&&(!(w=X.match(/Edge\\/(\\d+)/))||w[1]>=74)&&(w=X.match(/Chrome\\/(\\d+)/))&&(E=+w[1]);var nt=E,ot=!!Object.getOwnPropertySymbols&&!j((function(){var t=Symbol();return!String(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&nt&&nt<41})),it=ot&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,at=I("wks"),ut=O.Symbol,st=ut&&ut.for,ct=it?ut:ut&&ut.withoutSetter||V,ft=function(t){if(!B(at,t)||!ot&&"string"!=typeof at[t]){var e="Symbol."+t;ot&&B(ut,t)?at[t]=ut[t]:at[t]=it&&st?st(e):ct(e)}return at[t]},lt={};lt[ft("toStringTag")]="z";var ht="[object z]"===String(lt),pt=!j((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})),vt=Z.all,dt=Z.IS_HTMLDDA?function(t){return"object"==typeof t?null!==t:$(t)||t===vt}:function(t){return"object"==typeof t?null!==t:$(t)},yt=O.document,gt=dt(yt)&&dt(yt.createElement),mt=function(t){return gt?yt.createElement(t):{}},xt=!pt&&!j((function(){return 7!=Object.defineProperty(mt("div"),"a",{get:function(){return 7}}).a})),bt=pt&&j((function(){return 42!=Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype})),wt=String,Et=TypeError,At=function(t){if(dt(t))return t;throw Et(wt(t)+" is not an object")},Ot=Function.prototype.call,St=P?Ot.bind(Ot):function(){return Ot.apply(Ot,arguments)},Tt=R({}.isPrototypeOf),kt=Object,It=it?function(t){return"symbol"==typeof t}:function(t){var e=Q("Symbol");return $(e)&&Tt(e.prototype,kt(t))},jt=String,Pt=function(t){try{return jt(t)}catch(t){return"Object"}},_t=TypeError,Mt=function(t){if($(t))return t;throw _t(Pt(t)+" is not a function")},Lt=function(t,e){var r=t[e];return C(r)?void 0:Mt(r)},Rt=TypeError,Ct=TypeError,Nt=ft("toPrimitive"),Dt=function(t,e){if(!dt(t)||It(t))return t;var r,n=Lt(t,Nt);if(n){if(void 0===e&&(e="default"),r=St(n,t,e),!dt(r)||It(r))return r;throw Ct("Can\'t convert object to primitive value")}return void 0===e&&(e="number"),function(t,e){var r,n;if("string"===e&&$(r=t.toString)&&!dt(n=St(r,t)))return n;if($(r=t.valueOf)&&!dt(n=St(r,t)))return n;if("string"!==e&&$(r=t.toString)&&!dt(n=St(r,t)))return n;throw Rt("Can\'t convert object to primitive value")}(t,e)},Ft=function(t){var e=Dt(t,"string");return It(e)?e:e+""},Wt=TypeError,zt=Object.defineProperty,Bt=Object.getOwnPropertyDescriptor,Ut={f:pt?bt?function(t,e,r){if(At(t),e=Ft(e),At(r),"function"==typeof t&&"prototype"===e&&"value"in r&&"writable"in r&&!r.writable){var n=Bt(t,e);n&&n.writable&&(t[e]=r.value,r={configurable:"configurable"in r?r.configurable:n.configurable,enumerable:"enumerable"in r?r.enumerable:n.enumerable,writable:!1})}return zt(t,e,r)}:zt:function(t,e,r){if(At(t),e=Ft(e),At(r),xt)try{return zt(t,e,r)}catch(t){}if("get"in r||"set"in r)throw Wt("Accessors not supported");return"value"in r&&(t[e]=r.value),t}},Gt=Function.prototype,Ht=pt&&Object.getOwnPropertyDescriptor,Vt=B(Gt,"name"),qt={EXISTS:Vt,PROPER:Vt&&"something"===function(){}.name,CONFIGURABLE:Vt&&(!pt||pt&&Ht(Gt,"name").configurable)},Zt=R(Function.toString);$(k.inspectSource)||(k.inspectSource=function(t){return Zt(t)});var Yt,$t,Kt,Qt=k.inspectSource,Xt=O.WeakMap,Jt=$(Xt)&&/native code/.test(String(Xt)),te=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},ee=pt?function(t,e,r){return Ut.f(t,e,te(1,r))}:function(t,e,r){return t[e]=r,t},re=I("keys"),ne=function(t){return re[t]||(re[t]=V(t))},oe={},ie=O.TypeError,ae=O.WeakMap;if(Jt||k.state){var ue=k.state||(k.state=new ae);ue.get=ue.get,ue.has=ue.has,ue.set=ue.set,Yt=function(t,e){if(ue.has(t))throw ie("Object already initialized");return e.facade=t,ue.set(t,e),e},$t=function(t){return ue.get(t)||{}},Kt=function(t){return ue.has(t)}}else{var se=ne("state");oe[se]=!0,Yt=function(t,e){if(B(t,se))throw ie("Object already initialized");return e.facade=t,ee(t,se,e),e},$t=function(t){return B(t,se)?t[se]:{}},Kt=function(t){return B(t,se)}}var ce={set:Yt,get:$t,has:Kt,enforce:function(t){return Kt(t)?$t(t):Yt(t,{})},getterFor:function(t){return function(e){var r;if(!dt(e)||(r=$t(e)).type!==t)throw ie("Incompatible receiver, "+t+" required");return r}}},fe=b((function(t){var e=qt.CONFIGURABLE,r=ce.enforce,n=ce.get,o=Object.defineProperty,i=pt&&!j((function(){return 8!==o((function(){}),"length",{value:8}).length})),a=String(String).split("String"),u=t.exports=function(t,n,u){"Symbol("===String(n).slice(0,7)&&(n="["+String(n).replace(/^Symbol\\(([^)]*)\\)/,"$1")+"]"),u&&u.getter&&(n="get "+n),u&&u.setter&&(n="set "+n),(!B(t,"name")||e&&t.name!==n)&&(pt?o(t,"name",{value:n,configurable:!0}):t.name=n),i&&u&&B(u,"arity")&&t.length!==u.arity&&o(t,"length",{value:u.arity});try{u&&B(u,"constructor")&&u.constructor?pt&&o(t,"prototype",{writable:!1}):t.prototype&&(t.prototype=void 0)}catch(t){}var s=r(t);return B(s,"source")||(s.source=a.join("string"==typeof n?n:"")),t};Function.prototype.toString=u((function(){return $(this)&&n(this).source||Qt(this)}),"toString")})),le=function(t,e,r,n){n||(n={});var o=n.enumerable,i=void 0!==n.name?n.name:e;if($(r)&&fe(r,i,n),n.global)o?t[e]=r:T(e,r);else{try{n.unsafe?t[e]&&(o=!0):delete t[e]}catch(t){}o?t[e]=r:Ut.f(t,e,{value:r,enumerable:!1,configurable:!n.nonConfigurable,writable:!n.nonWritable})}return t},he=R({}.toString),pe=R("".slice),ve=function(t){return pe(he(t),8,-1)},de=ft("toStringTag"),ye=Object,ge="Arguments"==ve(function(){return arguments}()),me=ht?ve:function(t){var e,r,n;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(r=function(t,e){try{return t[e]}catch(t){}}(e=ye(t),de))?r:ge?ve(e):"Object"==(n=ve(e))&&$(e.callee)?"Arguments":n},xe=ht?{}.toString:function(){return"[object "+me(this)+"]"};ht||le(Object.prototype,"toString",xe,{unsafe:!0});var be={}.propertyIsEnumerable,we=Object.getOwnPropertyDescriptor,Ee={f:we&&!be.call({1:2},1)?function(t){var e=we(this,t);return!!e&&e.enumerable}:be},Ae=Object,Oe=R("".split),Se=j((function(){return!Ae("z").propertyIsEnumerable(0)}))?function(t){return"String"==ve(t)?Oe(t,""):Ae(t)}:Ae,Te=function(t){return Se(D(t))},ke=Object.getOwnPropertyDescriptor,Ie={f:pt?ke:function(t,e){if(t=Te(t),e=Ft(e),xt)try{return ke(t,e)}catch(t){}if(B(t,e))return te(!St(Ee.f,t,e),t[e])}},je=Math.ceil,Pe=Math.floor,_e=Math.trunc||function(t){var e=+t;return(e>0?Pe:je)(e)},Me=function(t){var e=+t;return e!=e||0===e?0:_e(e)},Le=Math.max,Re=Math.min,Ce=function(t,e){var r=Me(t);return r<0?Le(r+e,0):Re(r,e)},Ne=Math.min,De=function(t){return t>0?Ne(Me(t),9007199254740991):0},Fe=function(t){return De(t.length)},We=function(t){return function(e,r,n){var o,i=Te(e),a=Fe(i),u=Ce(n,a);if(t&&r!=r){for(;a>u;)if((o=i[u++])!=o)return!0}else for(;a>u;u++)if((t||u in i)&&i[u]===r)return t||u||0;return!t&&-1}},ze={includes:We(!0),indexOf:We(!1)},Be=ze.indexOf,Ue=R([].push),Ge=function(t,e){var r,n=Te(t),o=0,i=[];for(r in n)!B(oe,r)&&B(n,r)&&Ue(i,r);for(;e.length>o;)B(n,r=e[o++])&&(~Be(i,r)||Ue(i,r));return i},He=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],Ve=He.concat("length","prototype"),qe={f:Object.getOwnPropertyNames||function(t){return Ge(t,Ve)}},Ze={f:Object.getOwnPropertySymbols},Ye=R([].concat),$e=Q("Reflect","ownKeys")||function(t){var e=qe.f(At(t)),r=Ze.f;return r?Ye(e,r(t)):e},Ke=function(t,e,r){for(var n=$e(e),o=Ut.f,i=Ie.f,a=0;a<n.length;a++){var u=n[a];B(t,u)||r&&B(r,u)||o(t,u,i(e,u))}},Qe=/#|\\.prototype\\./,Xe=function(t,e){var r=tr[Je(t)];return r==rr||r!=er&&($(e)?j(e):!!e)},Je=Xe.normalize=function(t){return String(t).replace(Qe,".").toLowerCase()},tr=Xe.data={},er=Xe.NATIVE="N",rr=Xe.POLYFILL="P",nr=Xe,or=Ie.f,ir=function(t,e){var r,n,o,i,a,u=t.target,s=t.global,c=t.stat;if(r=s?O:c?O[u]||T(u,{}):(O[u]||{}).prototype)for(n in e){if(i=e[n],o=t.dontCallGetSet?(a=or(r,n))&&a.value:r[n],!nr(s?n:u+(c?".":"#")+n,t.forced)&&void 0!==o){if(typeof i==typeof o)continue;Ke(i,o)}(t.sham||o&&o.sham)&&ee(i,"sham",!0),le(r,n,i,t)}},ar="process"==ve(O.process),ur=String,sr=TypeError,cr=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,r={};try{(t=R(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(r,[]),e=r instanceof Array}catch(t){}return function(r,n){return At(r),function(t){if("object"==typeof t||$(t))return t;throw sr("Can\'t set "+ur(t)+" as a prototype")}(n),e?t(r,n):r.__proto__=n,r}}():void 0),fr=Ut.f,lr=ft("toStringTag"),hr=function(t,e,r){t&&!r&&(t=t.prototype),t&&!B(t,lr)&&fr(t,lr,{configurable:!0,value:e})},pr=ft("species"),vr=function(t){var e=Q(t),r=Ut.f;pt&&e&&!e[pr]&&r(e,pr,{configurable:!0,get:function(){return this}})},dr=TypeError,yr=function(t,e){if(Tt(e,t))return t;throw dr("Incorrect invocation")},gr=function(){},mr=[],xr=Q("Reflect","construct"),br=/^\\s*(?:class|function)\\b/,wr=R(br.exec),Er=!br.exec(gr),Ar=function(t){if(!$(t))return!1;try{return xr(gr,mr,t),!0}catch(t){return!1}},Or=function(t){if(!$(t))return!1;switch(me(t)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return Er||!!wr(br,Qt(t))}catch(t){return!0}};Or.sham=!0;var Sr,Tr,kr,Ir,jr=!xr||j((function(){var t;return Ar(Ar.call)||!Ar(Object)||!Ar((function(){t=!0}))||t}))?Or:Ar,Pr=TypeError,_r=function(t){if(jr(t))return t;throw Pr(Pt(t)+" is not a constructor")},Mr=ft("species"),Lr=function(t,e){var r,n=At(t).constructor;return void 0===n||C(r=At(n)[Mr])?e:_r(r)},Rr=Function.prototype,Cr=Rr.apply,Nr=Rr.call,Dr="object"==typeof Reflect&&Reflect.apply||(P?Nr.bind(Cr):function(){return Nr.apply(Cr,arguments)}),Fr=function(t){if("Function"===ve(t))return R(t)},Wr=Fr(Fr.bind),zr=function(t,e){return Mt(t),void 0===e?t:P?Wr(t,e):function(){return t.apply(e,arguments)}},Br=Q("document","documentElement"),Ur=R([].slice),Gr=TypeError,Hr=function(t,e){if(t<e)throw Gr("Not enough arguments");return t},Vr=/(?:ipad|iphone|ipod).*applewebkit/i.test(X),qr=O.setImmediate,Zr=O.clearImmediate,Yr=O.process,$r=O.Dispatch,Kr=O.Function,Qr=O.MessageChannel,Xr=O.String,Jr=0,tn={};try{Sr=O.location}catch(t){}var en=function(t){if(B(tn,t)){var e=tn[t];delete tn[t],e()}},rn=function(t){return function(){en(t)}},nn=function(t){en(t.data)},on=function(t){O.postMessage(Xr(t),Sr.protocol+"//"+Sr.host)};qr&&Zr||(qr=function(t){Hr(arguments.length,1);var e=$(t)?t:Kr(t),r=Ur(arguments,1);return tn[++Jr]=function(){Dr(e,void 0,r)},Tr(Jr),Jr},Zr=function(t){delete tn[t]},ar?Tr=function(t){Yr.nextTick(rn(t))}:$r&&$r.now?Tr=function(t){$r.now(rn(t))}:Qr&&!Vr?(Ir=(kr=new Qr).port2,kr.port1.onmessage=nn,Tr=zr(Ir.postMessage,Ir)):O.addEventListener&&$(O.postMessage)&&!O.importScripts&&Sr&&"file:"!==Sr.protocol&&!j(on)?(Tr=on,O.addEventListener("message",nn,!1)):Tr="onreadystatechange"in mt("script")?function(t){Br.appendChild(mt("script")).onreadystatechange=function(){Br.removeChild(this),en(t)}}:function(t){setTimeout(rn(t),0)});var an,un,sn,cn,fn,ln,hn,pn,vn={set:qr,clear:Zr},dn=/ipad|iphone|ipod/i.test(X)&&void 0!==O.Pebble,yn=/web0s(?!.*chrome)/i.test(X),gn=Ie.f,mn=vn.set,xn=O.MutationObserver||O.WebKitMutationObserver,bn=O.document,wn=O.process,En=O.Promise,An=gn(O,"queueMicrotask"),On=An&&An.value;On||(an=function(){var t,e;for(ar&&(t=wn.domain)&&t.exit();un;){e=un.fn,un=un.next;try{e()}catch(t){throw un?cn():sn=void 0,t}}sn=void 0,t&&t.enter()},Vr||ar||yn||!xn||!bn?!dn&&En&&En.resolve?((hn=En.resolve(void 0)).constructor=En,pn=zr(hn.then,hn),cn=function(){pn(an)}):ar?cn=function(){wn.nextTick(an)}:(mn=zr(mn,O),cn=function(){mn(an)}):(fn=!0,ln=bn.createTextNode(""),new xn(an).observe(ln,{characterData:!0}),cn=function(){ln.data=fn=!fn}));var Sn=On||function(t){var e={fn:t,next:void 0};sn&&(sn.next=e),un||(un=e,cn()),sn=e},Tn=function(t){try{return{error:!1,value:t()}}catch(t){return{error:!0,value:t}}},kn=function(){this.head=null,this.tail=null};kn.prototype={add:function(t){var e={item:t,next:null};this.head?this.tail.next=e:this.head=e,this.tail=e},get:function(){var t=this.head;if(t)return this.head=t.next,this.tail===t&&(this.tail=null),t.item}};var In,jn,Pn,_n=kn,Mn=O.Promise,Ln="object"==typeof Deno&&Deno&&"object"==typeof Deno.version,Rn=!Ln&&!ar&&"object"==typeof window&&"object"==typeof document,Cn=(Mn&&Mn.prototype,ft("species")),Nn=!1,Dn=$(O.PromiseRejectionEvent),Fn={CONSTRUCTOR:nr("Promise",(function(){var t=Qt(Mn),e=t!==String(Mn);if(!e&&66===nt)return!0;if(!nt||nt<51||!/native code/.test(t)){var r=new Mn((function(t){t(1)})),n=function(t){t((function(){}),(function(){}))};if((r.constructor={})[Cn]=n,!(Nn=r.then((function(){}))instanceof n))return!0}return!e&&(Rn||Ln)&&!Dn})),REJECTION_EVENT:Dn,SUBCLASSING:Nn},Wn=TypeError,zn=function(t){var e,r;this.promise=new t((function(t,n){if(void 0!==e||void 0!==r)throw Wn("Bad Promise constructor");e=t,r=n})),this.resolve=Mt(e),this.reject=Mt(r)},Bn={f:function(t){return new zn(t)}},Un=vn.set,Gn=Fn.CONSTRUCTOR,Hn=Fn.REJECTION_EVENT,Vn=Fn.SUBCLASSING,qn=ce.getterFor("Promise"),Zn=ce.set,Yn=Mn&&Mn.prototype,$n=Mn,Kn=Yn,Qn=O.TypeError,Xn=O.document,Jn=O.process,to=Bn.f,eo=to,ro=!!(Xn&&Xn.createEvent&&O.dispatchEvent),no=function(t){var e;return!(!dt(t)||!$(e=t.then))&&e},oo=function(t,e){var r,n,o,i=e.value,a=1==e.state,u=a?t.ok:t.fail,s=t.resolve,c=t.reject,f=t.domain;try{u?(a||(2===e.rejection&&co(e),e.rejection=1),!0===u?r=i:(f&&f.enter(),r=u(i),f&&(f.exit(),o=!0)),r===t.promise?c(Qn("Promise-chain cycle")):(n=no(r))?St(n,r,s,c):s(r)):c(i)}catch(t){f&&!o&&f.exit(),c(t)}},io=function(t,e){t.notified||(t.notified=!0,Sn((function(){for(var r,n=t.reactions;r=n.get();)oo(r,t);t.notified=!1,e&&!t.rejection&&uo(t)})))},ao=function(t,e,r){var n,o;ro?((n=Xn.createEvent("Event")).promise=e,n.reason=r,n.initEvent(t,!1,!0),O.dispatchEvent(n)):n={promise:e,reason:r},!Hn&&(o=O["on"+t])?o(n):"unhandledrejection"===t&&function(t,e){var r=O.console;r&&r.error&&(1==arguments.length?r.error(t):r.error(t,e))}("Unhandled promise rejection",r)},uo=function(t){St(Un,O,(function(){var e,r=t.facade,n=t.value;if(so(t)&&(e=Tn((function(){ar?Jn.emit("unhandledRejection",n,r):ao("unhandledrejection",r,n)})),t.rejection=ar||so(t)?2:1,e.error))throw e.value}))},so=function(t){return 1!==t.rejection&&!t.parent},co=function(t){St(Un,O,(function(){var e=t.facade;ar?Jn.emit("rejectionHandled",e):ao("rejectionhandled",e,t.value)}))},fo=function(t,e,r){return function(n){t(e,n,r)}},lo=function(t,e,r){t.done||(t.done=!0,r&&(t=r),t.value=e,t.state=2,io(t,!0))},ho=function(t,e,r){if(!t.done){t.done=!0,r&&(t=r);try{if(t.facade===e)throw Qn("Promise can\'t be resolved itself");var n=no(e);n?Sn((function(){var r={done:!1};try{St(n,e,fo(ho,r,t),fo(lo,r,t))}catch(e){lo(r,e,t)}})):(t.value=e,t.state=1,io(t,!1))}catch(e){lo({done:!1},e,t)}}};if(Gn&&(Kn=($n=function(t){yr(this,Kn),Mt(t),St(In,this);var e=qn(this);try{t(fo(ho,e),fo(lo,e))}catch(t){lo(e,t)}}).prototype,(In=function(t){Zn(this,{type:"Promise",done:!1,notified:!1,parent:!1,reactions:new _n,rejection:!1,state:0,value:void 0})}).prototype=le(Kn,"then",(function(t,e){var r=qn(this),n=to(Lr(this,$n));return r.parent=!0,n.ok=!$(t)||t,n.fail=$(e)&&e,n.domain=ar?Jn.domain:void 0,0==r.state?r.reactions.add(n):Sn((function(){oo(n,r)})),n.promise})),jn=function(){var t=new In,e=qn(t);this.promise=t,this.resolve=fo(ho,e),this.reject=fo(lo,e)},Bn.f=to=function(t){return t===$n||void 0===t?new jn(t):eo(t)},$(Mn)&&Yn!==Object.prototype)){Pn=Yn.then,Vn||le(Yn,"then",(function(t,e){var r=this;return new $n((function(t,e){St(Pn,r,t,e)})).then(t,e)}),{unsafe:!0});try{delete Yn.constructor}catch(t){}cr&&cr(Yn,Kn)}ir({global:!0,constructor:!0,wrap:!0,forced:Gn},{Promise:$n}),hr($n,"Promise",!1),vr("Promise");var po={},vo=ft("iterator"),yo=Array.prototype,go=function(t){return void 0!==t&&(po.Array===t||yo[vo]===t)},mo=ft("iterator"),xo=function(t){if(!C(t))return Lt(t,mo)||Lt(t,"@@iterator")||po[me(t)]},bo=TypeError,wo=function(t,e){var r=arguments.length<2?xo(t):e;if(Mt(r))return At(St(r,t));throw bo(Pt(t)+" is not iterable")},Eo=function(t,e,r){var n,o;At(t);try{if(!(n=Lt(t,"return"))){if("throw"===e)throw r;return r}n=St(n,t)}catch(t){o=!0,n=t}if("throw"===e)throw r;if(o)throw n;return At(n),r},Ao=TypeError,Oo=function(t,e){this.stopped=t,this.result=e},So=Oo.prototype,To=function(t,e,r){var n,o,i,a,u,s,c,f=r&&r.that,l=!(!r||!r.AS_ENTRIES),h=!(!r||!r.IS_RECORD),p=!(!r||!r.IS_ITERATOR),v=!(!r||!r.INTERRUPTED),d=zr(e,f),y=function(t){return n&&Eo(n,"normal",t),new Oo(!0,t)},g=function(t){return l?(At(t),v?d(t[0],t[1],y):d(t[0],t[1])):v?d(t,y):d(t)};if(h)n=t.iterator;else if(p)n=t;else{if(!(o=xo(t)))throw Ao(Pt(t)+" is not iterable");if(go(o)){for(i=0,a=Fe(t);a>i;i++)if((u=g(t[i]))&&Tt(So,u))return u;return new Oo(!1)}n=wo(t,o)}for(s=h?t.next:n.next;!(c=St(s,n)).done;){try{u=g(c.value)}catch(t){Eo(n,"throw",t)}if("object"==typeof u&&u&&Tt(So,u))return u}return new Oo(!1)},ko=ft("iterator"),Io=!1;try{var jo=0,Po={next:function(){return{done:!!jo++}},return:function(){Io=!0}};Po[ko]=function(){return this},Array.from(Po,(function(){throw 2}))}catch(t){}var _o=function(t,e){if(!e&&!Io)return!1;var r=!1;try{var n={};n[ko]=function(){return{next:function(){return{done:r=!0}}}},t(n)}catch(t){}return r},Mo=Fn.CONSTRUCTOR||!_o((function(t){Mn.all(t).then(void 0,(function(){}))}));ir({target:"Promise",stat:!0,forced:Mo},{all:function(t){var e=this,r=Bn.f(e),n=r.resolve,o=r.reject,i=Tn((function(){var r=Mt(e.resolve),i=[],a=0,u=1;To(t,(function(t){var s=a++,c=!1;u++,St(r,e,t).then((function(t){c||(c=!0,i[s]=t,--u||n(i))}),o)})),--u||n(i)}));return i.error&&o(i.value),r.promise}});var Lo=Fn.CONSTRUCTOR,Ro=Mn&&Mn.prototype;if(ir({target:"Promise",proto:!0,forced:Lo,real:!0},{catch:function(t){return this.then(void 0,t)}}),$(Mn)){var Co=Q("Promise").prototype.catch;Ro.catch!==Co&&le(Ro,"catch",Co,{unsafe:!0})}ir({target:"Promise",stat:!0,forced:Mo},{race:function(t){var e=this,r=Bn.f(e),n=r.reject,o=Tn((function(){var o=Mt(e.resolve);To(t,(function(t){St(o,e,t).then(r.resolve,n)}))}));return o.error&&n(o.value),r.promise}}),ir({target:"Promise",stat:!0,forced:Fn.CONSTRUCTOR},{reject:function(t){var e=Bn.f(this);return St(e.reject,void 0,t),e.promise}});var No=Fn.CONSTRUCTOR;Q("Promise");function Do(t,e){if(!t)throw new Error(e||"web worker helper assertion failed.")}ir({target:"Promise",stat:!0,forced:No},{resolve:function(t){return function(t,e){if(At(t),dt(e)&&e.constructor===t)return e;var r=Bn.f(t);return(0,r.resolve)(e),r.promise}(this,t)}});var Fo="undefined"!=typeof window&&void 0!==window.orientation,Wo=function(){function t(t,e){var r=this;this.name=t,this.workerThread=e,this.isRunning=!0,this.resolve=function(){},this.reject=function(){},this.result=new Promise((function(t,e){r.resolve=t,r.reject=e}))}return t.prototype.postMessage=function(t,e){this.workerThread.postMessage({source:"Main thread",type:t,payload:e})},t.prototype.done=function(t){Do(this.isRunning,"WorkerJob isRunning false."),this.isRunning=!1,this.resolve(t)},t.prototype.error=function(t){Do(this.isRunning,"WorkerJob isRunning false."),this.isRunning=!1,this.reject(t)},t}(),zo=new Map;function Bo(t){Do(t.source&&!t.url||!t.source&&t.url);var e=zo.get(t.source||t.url);return e||(t.url&&(e=function(t){if(!t.startsWith("http"))return t;return Uo((e=t,"try {\\n  importScripts(\'"+e+"\');\\n} catch (error) {\\n  console.error(error);\\n  throw error;\\n}"));var e}(t.url),zo.set(t.url,e)),t.source&&(e=Uo(t.source),zo.set(t.source,e))),Do(e),e}function Uo(t){var e=new Blob([t],{type:"application/javascript"});return URL.createObjectURL(e)}function Go(t,e,r){void 0===e&&(e=!0);var n=r||new Set;if(t){if(Ho(t))n.add(t);else if(Ho(t.buffer))n.add(t.buffer);else if(ArrayBuffer.isView(t));else if(e&&"object"==typeof t)for(var o in t)Go(t[o],e,n)}else;return void 0===r?Array.from(n):[]}function Ho(t){return!!t&&(t instanceof ArrayBuffer||("undefined"!=typeof MessagePort&&t instanceof MessagePort||("undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap||"undefined"!=typeof OffscreenCanvas&&t instanceof OffscreenCanvas)))}var Vo=function(){},qo=function(){function t(t){this.terminated=!1,this.loadableURL="";var e=t.name,r=t.source,n=t.url;Do(r||n),this.name=e,this.source=r,this.url=n,this.onMessage=Vo,this.onError=function(t){return console.log(t)},this.worker=this.createBrowserWorker()}return t.isSupported=function(){return"undefined"!=typeof Worker},t.prototype.destroy=function(){this.onMessage=Vo,this.onError=Vo,this.worker.terminate(),this.terminated=!0},Object.defineProperty(t.prototype,"isRunning",{get:function(){return Boolean(this.onMessage)},enumerable:!1,configurable:!0}),t.prototype.postMessage=function(t,e){e=e||Go(t),this.worker.postMessage(t,e)},t.prototype.getErrorFromErrorEvent=function(t){var e="Failed to load ";return e+="worker "+this.name+" from "+this.url+". ",t.message&&(e+=t.message+" in "),t.lineno&&(e+=":"+t.lineno+":"+t.colno),new Error(e)},t.prototype.createBrowserWorker=function(){var t=this;this.loadableURL=Bo({source:this.source,url:this.url});var e=new Worker(this.loadableURL,{name:this.name});return e.onmessage=function(e){e.data?t.onMessage(e.data):t.onError(new Error("No data received"))},e.onerror=function(e){t.onError(t.getErrorFromErrorEvent(e)),t.terminated=!0},e.onmessageerror=function(e){return console.error("worker "+t.name+", message error: "+e)},e},t}(),Zo=self&&self.__assign||function(){return(Zo=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},Yo=self&&self.__awaiter||function(t,e,r,n){return new(r||(r=Promise))((function(o,i){function a(t){try{s(n.next(t))}catch(t){i(t)}}function u(t){try{s(n.throw(t))}catch(t){i(t)}}function s(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,u)}s((n=n.apply(t,e||[])).next())}))},$o=self&&self.__generator||function(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(i){return function(u){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}},Ko=function(){function t(t){this.name="unnamed",this.maxConcurrency=1,this.maxMobileConcurrency=1,this.onDebug=function(){},this.reuseWorkers=!0,this.props={},this.jobQueue=[],this.idleQueue=[],this.count=0,this.isDestroyed=!1,this.source=t.source,this.url=t.url,this.setProps(t)}return t.prototype.destroy=function(){this.idleQueue.forEach((function(t){return t.destroy()})),this.isDestroyed=!0},t.prototype.setProps=function(t){this.props=Zo(Zo({},this.props),t),void 0!==t.name&&(this.name=t.name),void 0!==t.maxConcurrency&&(this.maxConcurrency=t.maxConcurrency),void 0!==t.maxMobileConcurrency&&(this.maxMobileConcurrency=t.maxMobileConcurrency),void 0!==t.reuseWorkers&&(this.reuseWorkers=t.reuseWorkers),void 0!==t.onDebug&&(this.onDebug=t.onDebug)},t.prototype.startJob=function(t,e,r){return void 0===e&&(e=function(t,e,r){return t.done(r)}),void 0===r&&(r=function(t,e){return t.error(e)}),Yo(this,void 0,void 0,(function(){var n,o=this;return $o(this,(function(i){switch(i.label){case 0:return n=new Promise((function(n){return o.jobQueue.push({name:t,onMessage:e,onError:r,onStart:n}),o})),this.startQueuedJob(),[4,n];case 1:return[2,i.sent()]}}))}))},t.prototype.startQueuedJob=function(){return Yo(this,void 0,void 0,(function(){var t,e,r;return $o(this,(function(n){switch(n.label){case 0:if(!this.jobQueue.length)return[2];if(!(t=this.getAvailableWorker()))return[2];if(!(e=this.jobQueue.shift()))return[3,4];this.onDebug({message:"Starting job",name:e.name,backlog:this.jobQueue.length,workerThread:t}),r=new Wo(e.name,t),t.onMessage=function(t){return e.onMessage(r,t.type,t.payload)},t.onError=function(t){return e.onError(r,t)},e.onStart(r),n.label=1;case 1:return n.trys.push([1,,3,4]),[4,r.result];case 2:return n.sent(),[3,4];case 3:return this.returnWorkerToQueue(t),[7];case 4:return[2]}}))}))},t.prototype.returnWorkerToQueue=function(t){this.isDestroyed||!this.reuseWorkers||this.count>this.getMaxConcurrency()?(t.destroy(),this.count--):this.idleQueue.push(t),this.isDestroyed||this.startQueuedJob()},t.prototype.getAvailableWorker=function(){if(this.idleQueue.length>0)return this.idleQueue.shift()||null;if(this.count<this.getMaxConcurrency()){this.count++;var t=this.name.toLowerCase()+" (#"+this.count+" of "+this.maxConcurrency+")";return new qo({name:t,source:this.source,url:this.url})}return null},t.prototype.getMaxConcurrency=function(){return Fo?this.maxMobileConcurrency:this.maxConcurrency},t}(),Qo=self&&self.__assign||function(){return(Qo=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},Xo=self&&self.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Jo={maxConcurrency:3,maxMobileConcurrency:1,onDebug:function(){},reuseWorkers:!0},ti=(function(){function t(t){this.workerPools=new Map,this.props=Qo({},Jo),this.setProps(t),this.workerPools=new Map}t.isSupported=function(){return qo.isSupported()},t.getWorkerFarm=function(e){return void 0===e&&(e={}),t.workerFarm=t.workerFarm||new t({}),t.workerFarm.setProps(e),t.workerFarm},t.prototype.destroy=function(){var t,e;try{for(var r=Xo(this.workerPools.values()),n=r.next();!n.done;n=r.next()){n.value.destroy()}}catch(e){t={error:e}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(t)throw t.error}}},t.prototype.setProps=function(t){var e,r;this.props=Qo(Qo({},this.props),t);try{for(var n=Xo(this.workerPools.values()),o=n.next();!o.done;o=n.next()){o.value.setProps(this.getWorkerPoolProps())}}catch(t){e={error:t}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(e)throw e.error}}},t.prototype.getWorkerPool=function(t){var e=t.name,r=t.source,n=t.url,o=this.workerPools.get(e);return o||((o=new Ko({name:e,source:r,url:n})).setProps(this.getWorkerPoolProps()),this.workerPools.set(e,o)),o},t.prototype.getWorkerPoolProps=function(){return{maxConcurrency:this.props.maxConcurrency,maxMobileConcurrency:this.props.maxMobileConcurrency,reuseWorkers:this.props.reuseWorkers,onDebug:this.props.onDebug}}}(),new Map),ei=function(){function t(){}return Object.defineProperty(t,"onmessage",{set:function(t){self.onmessage=function(e){if(ri(e)){var r=e.data,n=r.type,o=r.payload;t(n,o)}}},enumerable:!1,configurable:!0}),t.addEventListener=function(t){var e=ti.get(t);e||(e=function(e){if(ri(e)){var r=e.data,n=r.type,o=r.payload;t(n,o)}}),self.addEventListener("message",e)},t.removeEventListener=function(t){var e=ti.get(t);ti.delete(t),self.removeEventListener("message",e)},t.postMessage=function(t,e){if(self){var r={source:"Worker thread",type:t,payload:e},n=Go(e);self.postMessage(r,n)}},t}();function ri(t){var e=t.type,r=t.data;return"message"===e&&r&&"string"==typeof r.source&&"Main thread"===r.source}self&&self.__awaiter,self&&self.__generator;var ni,oi,ii=function(){function t(){this._values=[],this._settlers=[],this._closed=!1}return t.prototype[Symbol.asyncIterator]=function(){return this},t.prototype.push=function(t){return this.enqueue(t)},t.prototype.enqueue=function(t){if(this._closed)throw new Error("Closed");if(this._settlers.length>0){if(this._values.length>0)throw new Error("Illegal internal state");var e=this._settlers.shift();t instanceof Error?e.reject(t):e.resolve({value:t})}else this._values.push(t)},t.prototype.close=function(){for(;this._settlers.length>0;){this._settlers.shift().resolve({done:!0})}this._closed=!0},t.prototype.next=function(){var t=this;if(this._values.length>0){var e=this._values.shift();return e instanceof Error?Promise.reject(e):Promise.resolve({done:!1,value:e})}if(this._closed){if(this._settlers.length>0)throw new Error("Illegal internal state");return Promise.resolve({done:!0,value:void 0})}return new Promise((function(e,r){t._settlers.push({resolve:e,reject:r})}))},t}(),ai=self&&self.__awaiter||function(t,e,r,n){return new(r||(r=Promise))((function(o,i){function a(t){try{s(n.next(t))}catch(t){i(t)}}function u(t){try{s(n.throw(t))}catch(t){i(t)}}function s(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,u)}s((n=n.apply(t,e||[])).next())}))},ui=self&&self.__generator||function(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(i){return function(u){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}},si=self&&self.__asyncValues||function(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,r=t[Symbol.asyncIterator];return r?r.call(t):(t="function"==typeof __values?__values(t):t[Symbol.iterator](),e={},n("next"),n("throw"),n("return"),e[Symbol.asyncIterator]=function(){return this},e);function n(r){e[r]=t[r]&&function(e){return new Promise((function(n,o){(function(t,e,r,n){Promise.resolve(n).then((function(e){t({value:e,done:r})}),e)})(n,o,(e=t[r](e)).done,e.value)}))}}},ci=0;function fi(t,e){var r=this;if("undefined"!=typeof self){var n={process:li};ei.onmessage=function(o,i){return ai(r,void 0,void 0,(function(){var r,a,u,s,c,f,l,h,p,v;return ui(this,(function(d){switch(d.label){case 0:switch(d.trys.push([0,19,,20]),o){case"process":return[3,1];case"process-in-batches":return[3,3];case"input-batch":return[3,16];case"input-done":return[3,17]}return[3,18];case 1:if(!t)throw new Error("Worker does not support atomic processing");return[4,t(i.input,i.options||{},n)];case 2:return r=d.sent(),ei.postMessage("done",{result:r}),[3,18];case 3:if(!e)throw new Error("Worker does not support batched processing");ni=new ii,oi=i.options||{},a=e(ni,oi,n),d.label=4;case 4:d.trys.push([4,9,10,15]),u=si(a),d.label=5;case 5:return[4,u.next()];case 6:if((s=d.sent()).done)return[3,8];c=s.value,ei.postMessage("output-batch",{result:c}),d.label=7;case 7:return[3,5];case 8:return[3,15];case 9:return f=d.sent(),p={error:f},[3,15];case 10:return d.trys.push([10,,13,14]),s&&!s.done&&(v=u.return)?[4,v.call(u)]:[3,12];case 11:d.sent(),d.label=12;case 12:return[3,14];case 13:if(p)throw p.error;return[7];case 14:return[7];case 15:return ei.postMessage("done",{}),[3,18];case 16:return ni.push(i.input),[3,18];case 17:return ni.close(),[3,18];case 18:return[3,20];case 19:return l=d.sent(),h=l instanceof Error?l.message:"",ei.postMessage("error",{error:h}),[3,20];case 20:return[2]}}))}))}}}function li(t,e){return void 0===e&&(e={}),new Promise((function(r,n){var o=ci++,i=function(t,e){if(e.id===o)switch(t){case"done":ei.removeEventListener(i),r(e.result);break;case"error":ei.removeEventListener(i),n(e.error)}};ei.addEventListener(i);var a={id:o,input:t,options:e};ei.postMessage("process",a)}))}self&&self.__awaiter,self&&self.__generator;var hi={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},pi=mt("span").classList,vi=pi&&pi.constructor&&pi.constructor.prototype,di=vi===Object.prototype?void 0:vi,yi=Array.isArray||function(t){return"Array"==ve(t)},gi=ft("species"),mi=Array,xi=function(t,e){return new(function(t){var e;return yi(t)&&(e=t.constructor,(jr(e)&&(e===mi||yi(e.prototype))||dt(e)&&null===(e=e[gi]))&&(e=void 0)),void 0===e?mi:e}(t))(0===e?0:e)},bi=R([].push),wi=function(t){var e=1==t,r=2==t,n=3==t,o=4==t,i=6==t,a=7==t,u=5==t||i;return function(s,c,f,l){for(var h,p,v=W(s),d=Se(v),y=zr(c,f),g=Fe(d),m=0,x=l||xi,b=e?x(s,g):r||a?x(s,0):void 0;g>m;m++)if((u||m in d)&&(p=y(h=d[m],m,v),t))if(e)b[m]=p;else if(p)switch(t){case 3:return!0;case 5:return h;case 6:return m;case 2:bi(b,h)}else switch(t){case 4:return!1;case 7:bi(b,h)}return i?-1:n||o?o:b}},Ei={forEach:wi(0),map:wi(1),filter:wi(2),some:wi(3),every:wi(4),find:wi(5),findIndex:wi(6),filterReject:wi(7)},Ai=function(t,e){var r=[][t];return!!r&&j((function(){r.call(null,e||function(){return 1},1)}))},Oi=Ei.forEach,Si=Ai("forEach")?[].forEach:function(t){return Oi(this,t,arguments.length>1?arguments[1]:void 0)},Ti=function(t){if(t&&t.forEach!==Si)try{ee(t,"forEach",Si)}catch(e){t.forEach=Si}};for(var ki in hi)hi[ki]&&Ti(O[ki]&&O[ki].prototype);Ti(di);var Ii=function(t,e,r){var n=Ft(e);n in t?Ut.f(t,n,te(0,r)):t[n]=r},ji=ft("species"),Pi=function(t){return nt>=51||!j((function(){var e=[];return(e.constructor={})[ji]=function(){return{foo:1}},1!==e[t](Boolean).foo}))},_i=Pi("slice"),Mi=ft("species"),Li=Array,Ri=Math.max;ir({target:"Array",proto:!0,forced:!_i},{slice:function(t,e){var r,n,o,i=Te(this),a=Fe(i),u=Ce(t,a),s=Ce(void 0===e?a:e,a);if(yi(i)&&(r=i.constructor,(jr(r)&&(r===Li||yi(r.prototype))||dt(r)&&null===(r=r[Mi]))&&(r=void 0),r===Li||void 0===r))return Ur(i,u,s);for(n=new(void 0===r?Li:r)(Ri(s-u,0)),o=0;u<s;u++,o++)u in i&&Ii(n,o,i[u]);return n.length=o,n}});var Ci=qt.EXISTS,Ni=Ut.f,Di=Function.prototype,Fi=R(Di.toString),Wi=/function\\b(?:\\s|\\/\\*[\\S\\s]*?\\*\\/|\\/\\/[^\\n\\r]*[\\n\\r]+)*([^\\s(/]*)/,zi=R(Wi.exec);pt&&!Ci&&Ni(Di,"name",{configurable:!0,get:function(){try{return zi(Wi,Fi(this))[1]}catch(t){return""}}});var Bi=Ei.map,Ui=Pi("map");ir({target:"Array",proto:!0,forced:!Ui},{map:function(t){return Bi(this,t,arguments.length>1?arguments[1]:void 0)}});var Gi,Hi=Object.keys||function(t){return Ge(t,He)},Vi={f:pt&&!bt?Object.defineProperties:function(t,e){At(t);for(var r,n=Te(e),o=Hi(e),i=o.length,a=0;i>a;)Ut.f(t,r=o[a++],n[r]);return t}},qi=ne("IE_PROTO"),Zi=function(){},Yi=function(t){return"<script>"+t+"<\\/script>"},$i=function(t){t.write(Yi("")),t.close();var e=t.parentWindow.Object;return t=null,e},Ki=function(){try{Gi=new ActiveXObject("htmlfile")}catch(t){}var t,e;Ki="undefined"!=typeof document?document.domain&&Gi?$i(Gi):((e=mt("iframe")).style.display="none",Br.appendChild(e),e.src=String("javascript:"),(t=e.contentWindow.document).open(),t.write(Yi("document.F=Object")),t.close(),t.F):$i(Gi);for(var r=He.length;r--;)delete Ki.prototype[He[r]];return Ki()};oe[qi]=!0;var Qi=Object.create||function(t,e){var r;return null!==t?(Zi.prototype=At(t),r=new Zi,Zi.prototype=null,r[qi]=t):r=Ki(),void 0===e?r:Vi.f(r,e)},Xi=Ut.f,Ji=ft("unscopables"),ta=Array.prototype;null==ta[Ji]&&Xi(ta,Ji,{configurable:!0,value:Qi(null)});var ea,ra,na,oa=function(t){ta[Ji][t]=!0},ia=!j((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype})),aa=ne("IE_PROTO"),ua=Object,sa=ua.prototype,ca=ia?ua.getPrototypeOf:function(t){var e=W(t);if(B(e,aa))return e[aa];var r=e.constructor;return $(r)&&e instanceof r?r.prototype:e instanceof ua?sa:null},fa=ft("iterator"),la=!1;[].keys&&("next"in(na=[].keys())?(ra=ca(ca(na)))!==Object.prototype&&(ea=ra):la=!0),(!dt(ea)||j((function(){var t={};return ea[fa].call(t)!==t})))&&(ea={}),$(ea[fa])||le(ea,fa,(function(){return this}));var ha={IteratorPrototype:ea,BUGGY_SAFARI_ITERATORS:la},pa=ha.IteratorPrototype,va=function(){return this},da=qt.PROPER,ya=qt.CONFIGURABLE,ga=ha.IteratorPrototype,ma=ha.BUGGY_SAFARI_ITERATORS,xa=ft("iterator"),ba=function(){return this},wa=function(t,e,r,n,o,i,a){!function(t,e,r,n){var o=e+" Iterator";t.prototype=Qi(pa,{next:te(+!n,r)}),hr(t,o,!1),po[o]=va}(r,e,n);var u,s,c,f=function(t){if(t===o&&d)return d;if(!ma&&t in p)return p[t];switch(t){case"keys":case"values":case"entries":return function(){return new r(this,t)}}return function(){return new r(this)}},l=e+" Iterator",h=!1,p=t.prototype,v=p[xa]||p["@@iterator"]||o&&p[o],d=!ma&&v||f(o),y="Array"==e&&p.entries||v;if(y&&(u=ca(y.call(new t)))!==Object.prototype&&u.next&&(ca(u)!==ga&&(cr?cr(u,ga):$(u[xa])||le(u,xa,ba)),hr(u,l,!0)),da&&"values"==o&&v&&"values"!==v.name&&(ya?ee(p,"name","values"):(h=!0,d=function(){return St(v,this)})),o)if(s={values:f("values"),keys:i?d:f("keys"),entries:f("entries")},a)for(c in s)(ma||h||!(c in p))&&le(p,c,s[c]);else ir({target:e,proto:!0,forced:ma||h},s);return p[xa]!==d&&le(p,xa,d,{name:o}),po[e]=d,s},Ea=function(t,e){return{value:t,done:e}},Aa=Ut.f,Oa=ce.set,Sa=ce.getterFor("Array Iterator"),Ta=wa(Array,"Array",(function(t,e){Oa(this,{type:"Array Iterator",target:Te(t),index:0,kind:e})}),(function(){var t=Sa(this),e=t.target,r=t.kind,n=t.index++;return!e||n>=e.length?(t.target=void 0,Ea(void 0,!0)):Ea("keys"==r?n:"values"==r?e[n]:[n,e[n]],!1)}),"values"),ka=po.Arguments=po.Array;if(oa("keys"),oa("values"),oa("entries"),pt&&"values"!==ka.name)try{Aa(ka,"name",{value:"values"})}catch(t){}var Ia,ja,Pa,_a="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView,Ma=Ut.f,La=ce.enforce,Ra=ce.get,Ca=O.Int8Array,Na=Ca&&Ca.prototype,Da=O.Uint8ClampedArray,Fa=Da&&Da.prototype,Wa=Ca&&ca(Ca),za=Na&&ca(Na),Ba=Object.prototype,Ua=O.TypeError,Ga=ft("toStringTag"),Ha=V("TYPED_ARRAY_TAG"),Va=_a&&!!cr&&"Opera"!==me(O.opera),qa=!1,Za={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},Ya={BigInt64Array:8,BigUint64Array:8},$a=function(t){var e=ca(t);if(dt(e)){var r=Ra(e);return r&&B(r,"TypedArrayConstructor")?r.TypedArrayConstructor:$a(e)}},Ka=function(t){if(!dt(t))return!1;var e=me(t);return B(Za,e)||B(Ya,e)};for(Ia in Za)(Pa=(ja=O[Ia])&&ja.prototype)?La(Pa).TypedArrayConstructor=ja:Va=!1;for(Ia in Ya)(Pa=(ja=O[Ia])&&ja.prototype)&&(La(Pa).TypedArrayConstructor=ja);if((!Va||!$(Wa)||Wa===Function.prototype)&&(Wa=function(){throw Ua("Incorrect invocation")},Va))for(Ia in Za)O[Ia]&&cr(O[Ia],Wa);if((!Va||!za||za===Ba)&&(za=Wa.prototype,Va))for(Ia in Za)O[Ia]&&cr(O[Ia].prototype,za);if(Va&&ca(Fa)!==za&&cr(Fa,za),pt&&!B(za,Ga))for(Ia in qa=!0,Ma(za,Ga,{get:function(){return dt(this)?this[Ha]:void 0}}),Za)O[Ia]&&ee(O[Ia],Ha,Ia);var Qa={NATIVE_ARRAY_BUFFER_VIEWS:Va,TYPED_ARRAY_TAG:qa&&Ha,aTypedArray:function(t){if(Ka(t))return t;throw Ua("Target is not a typed array")},aTypedArrayConstructor:function(t){if($(t)&&(!cr||Tt(Wa,t)))return t;throw Ua(Pt(t)+" is not a typed array constructor")},exportTypedArrayMethod:function(t,e,r,n){if(pt){if(r)for(var o in Za){var i=O[o];if(i&&B(i.prototype,t))try{delete i.prototype[t]}catch(r){try{i.prototype[t]=e}catch(t){}}}za[t]&&!r||le(za,t,r?e:Va&&Na[t]||e,n)}},exportTypedArrayStaticMethod:function(t,e,r){var n,o;if(pt){if(cr){if(r)for(n in Za)if((o=O[n])&&B(o,t))try{delete o[t]}catch(t){}if(Wa[t]&&!r)return;try{return le(Wa,t,r?e:Va&&Wa[t]||e)}catch(t){}}for(n in Za)!(o=O[n])||o[t]&&!r||le(o,t,e)}},getTypedArrayConstructor:$a,isView:function(t){if(!dt(t))return!1;var e=me(t);return"DataView"===e||B(Za,e)||B(Ya,e)},isTypedArray:Ka,TypedArray:Wa,TypedArrayPrototype:za},Xa=Qa.NATIVE_ARRAY_BUFFER_VIEWS,Ja=O.ArrayBuffer,tu=O.Int8Array,eu=!Xa||!j((function(){tu(1)}))||!j((function(){new tu(-1)}))||!_o((function(t){new tu,new tu(null),new tu(1.5),new tu(t)}),!0)||j((function(){return 1!==new tu(new Ja(2),1,void 0).length})),ru=function(t,e,r){for(var n in e)le(t,n,e[n],r);return t},nu=RangeError,ou=function(t){if(void 0===t)return 0;var e=Me(t),r=De(e);if(e!==r)throw nu("Wrong length or index");return r},iu=Array,au=Math.abs,uu=Math.pow,su=Math.floor,cu=Math.log,fu=Math.LN2,lu=function(t,e,r){var n,o,i,a=iu(r),u=8*r-e-1,s=(1<<u)-1,c=s>>1,f=23===e?uu(2,-24)-uu(2,-77):0,l=t<0||0===t&&1/t<0?1:0,h=0;for((t=au(t))!=t||t===1/0?(o=t!=t?1:0,n=s):(n=su(cu(t)/fu),t*(i=uu(2,-n))<1&&(n--,i*=2),(t+=n+c>=1?f/i:f*uu(2,1-c))*i>=2&&(n++,i/=2),n+c>=s?(o=0,n=s):n+c>=1?(o=(t*i-1)*uu(2,e),n+=c):(o=t*uu(2,c-1)*uu(2,e),n=0));e>=8;)a[h++]=255&o,o/=256,e-=8;for(n=n<<e|o,u+=e;u>0;)a[h++]=255&n,n/=256,u-=8;return a[--h]|=128*l,a},hu=function(t,e){var r,n=t.length,o=8*n-e-1,i=(1<<o)-1,a=i>>1,u=o-7,s=n-1,c=t[s--],f=127&c;for(c>>=7;u>0;)f=256*f+t[s--],u-=8;for(r=f&(1<<-u)-1,f>>=-u,u+=e;u>0;)r=256*r+t[s--],u-=8;if(0===f)f=1-a;else{if(f===i)return r?NaN:c?-1/0:1/0;r+=uu(2,e),f-=a}return(c?-1:1)*r*uu(2,f-e)},pu=function(t){for(var e=W(this),r=Fe(e),n=arguments.length,o=Ce(n>1?arguments[1]:void 0,r),i=n>2?arguments[2]:void 0,a=void 0===i?r:Ce(i,r);a>o;)e[o++]=t;return e},vu=Array,du=Math.max,yu=function(t,e,r){for(var n=Fe(t),o=Ce(e,n),i=Ce(void 0===r?n:r,n),a=vu(du(i-o,0)),u=0;o<i;o++,u++)Ii(a,u,t[o]);return a.length=u,a},gu=qe.f,mu=Ut.f,xu=qt.PROPER,bu=qt.CONFIGURABLE,wu=ce.get,Eu=ce.set,Au=O.ArrayBuffer,Ou=Au,Su=Ou&&Ou.prototype,Tu=O.DataView,ku=Tu&&Tu.prototype,Iu=Object.prototype,ju=O.Array,Pu=O.RangeError,_u=R(pu),Mu=R([].reverse),Lu=lu,Ru=hu,Cu=function(t){return[255&t]},Nu=function(t){return[255&t,t>>8&255]},Du=function(t){return[255&t,t>>8&255,t>>16&255,t>>24&255]},Fu=function(t){return t[3]<<24|t[2]<<16|t[1]<<8|t[0]},Wu=function(t){return Lu(t,23,4)},zu=function(t){return Lu(t,52,8)},Bu=function(t,e){mu(t.prototype,e,{get:function(){return wu(this)[e]}})},Uu=function(t,e,r,n){var o=ou(r),i=wu(t);if(o+e>i.byteLength)throw Pu("Wrong index");var a=wu(i.buffer).bytes,u=o+i.byteOffset,s=yu(a,u,u+e);return n?s:Mu(s)},Gu=function(t,e,r,n,o,i){var a=ou(r),u=wu(t);if(a+e>u.byteLength)throw Pu("Wrong index");for(var s=wu(u.buffer).bytes,c=a+u.byteOffset,f=n(+o),l=0;l<e;l++)s[c+l]=f[i?l:e-l-1]};if(_a){var Hu=xu&&"ArrayBuffer"!==Au.name;if(j((function(){Au(1)}))&&j((function(){new Au(-1)}))&&!j((function(){return new Au,new Au(1.5),new Au(NaN),1!=Au.length||Hu&&!bu})))Hu&&bu&&ee(Au,"name","ArrayBuffer");else{(Ou=function(t){return yr(this,Su),new Au(ou(t))}).prototype=Su;for(var Vu,qu=gu(Au),Zu=0;qu.length>Zu;)(Vu=qu[Zu++])in Ou||ee(Ou,Vu,Au[Vu]);Su.constructor=Ou}cr&&ca(ku)!==Iu&&cr(ku,Iu);var Yu=new Tu(new Ou(2)),$u=R(ku.setInt8);Yu.setInt8(0,2147483648),Yu.setInt8(1,2147483649),!Yu.getInt8(0)&&Yu.getInt8(1)||ru(ku,{setInt8:function(t,e){$u(this,t,e<<24>>24)},setUint8:function(t,e){$u(this,t,e<<24>>24)}},{unsafe:!0})}else Su=(Ou=function(t){yr(this,Su);var e=ou(t);Eu(this,{bytes:_u(ju(e),0),byteLength:e}),pt||(this.byteLength=e)}).prototype,ku=(Tu=function(t,e,r){yr(this,ku),yr(t,Su);var n=wu(t).byteLength,o=Me(e);if(o<0||o>n)throw Pu("Wrong offset");if(o+(r=void 0===r?n-o:De(r))>n)throw Pu("Wrong length");Eu(this,{buffer:t,byteLength:r,byteOffset:o}),pt||(this.buffer=t,this.byteLength=r,this.byteOffset=o)}).prototype,pt&&(Bu(Ou,"byteLength"),Bu(Tu,"buffer"),Bu(Tu,"byteLength"),Bu(Tu,"byteOffset")),ru(ku,{getInt8:function(t){return Uu(this,1,t)[0]<<24>>24},getUint8:function(t){return Uu(this,1,t)[0]},getInt16:function(t){var e=Uu(this,2,t,arguments.length>1?arguments[1]:void 0);return(e[1]<<8|e[0])<<16>>16},getUint16:function(t){var e=Uu(this,2,t,arguments.length>1?arguments[1]:void 0);return e[1]<<8|e[0]},getInt32:function(t){return Fu(Uu(this,4,t,arguments.length>1?arguments[1]:void 0))},getUint32:function(t){return Fu(Uu(this,4,t,arguments.length>1?arguments[1]:void 0))>>>0},getFloat32:function(t){return Ru(Uu(this,4,t,arguments.length>1?arguments[1]:void 0),23)},getFloat64:function(t){return Ru(Uu(this,8,t,arguments.length>1?arguments[1]:void 0),52)},setInt8:function(t,e){Gu(this,1,t,Cu,e)},setUint8:function(t,e){Gu(this,1,t,Cu,e)},setInt16:function(t,e){Gu(this,2,t,Nu,e,arguments.length>2?arguments[2]:void 0)},setUint16:function(t,e){Gu(this,2,t,Nu,e,arguments.length>2?arguments[2]:void 0)},setInt32:function(t,e){Gu(this,4,t,Du,e,arguments.length>2?arguments[2]:void 0)},setUint32:function(t,e){Gu(this,4,t,Du,e,arguments.length>2?arguments[2]:void 0)},setFloat32:function(t,e){Gu(this,4,t,Wu,e,arguments.length>2?arguments[2]:void 0)},setFloat64:function(t,e){Gu(this,8,t,zu,e,arguments.length>2?arguments[2]:void 0)}});hr(Ou,"ArrayBuffer"),hr(Tu,"DataView");var Ku={ArrayBuffer:Ou,DataView:Tu},Qu=Math.floor,Xu=Number.isInteger||function(t){return!dt(t)&&isFinite(t)&&Qu(t)===t},Ju=RangeError,ts=RangeError,es=function(t,e){var r=function(t){var e=Me(t);if(e<0)throw Ju("The argument can\'t be less than 0");return e}(t);if(r%e)throw ts("Wrong offset");return r},rs=R("".slice),ns=function(t){return"Big"===rs(me(t),0,3)},os=TypeError,is=function(t){var e=Dt(t,"number");if("number"==typeof e)throw os("Can\'t convert number to bigint");return BigInt(e)},as=Qa.aTypedArrayConstructor,us=function(t){var e,r,n,o,i,a,u,s,c=_r(this),f=W(t),l=arguments.length,h=l>1?arguments[1]:void 0,p=void 0!==h,v=xo(f);if(v&&!go(v))for(s=(u=wo(f,v)).next,f=[];!(a=St(s,u)).done;)f.push(a.value);for(p&&l>2&&(h=zr(h,arguments[2])),r=Fe(f),n=new(as(c))(r),o=ns(n),e=0;r>e;e++)i=p?h(f[e],e):f[e],n[e]=o?is(i):+i;return n},ss=function(t,e,r){var n,o;return cr&&$(n=e.constructor)&&n!==r&&dt(o=n.prototype)&&o!==r.prototype&&cr(t,o),t},cs=b((function(t){var e=qe.f,r=Ei.forEach,n=ce.get,o=ce.set,i=ce.enforce,a=Ut.f,u=Ie.f,s=Math.round,c=O.RangeError,f=Ku.ArrayBuffer,l=f.prototype,h=Ku.DataView,p=Qa.NATIVE_ARRAY_BUFFER_VIEWS,v=Qa.TYPED_ARRAY_TAG,d=Qa.TypedArray,y=Qa.TypedArrayPrototype,g=Qa.aTypedArrayConstructor,m=Qa.isTypedArray,x=function(t,e){g(t);for(var r=0,n=e.length,o=new t(n);n>r;)o[r]=e[r++];return o},b=function(t,e){a(t,e,{get:function(){return n(this)[e]}})},w=function(t){var e;return Tt(l,t)||"ArrayBuffer"==(e=me(t))||"SharedArrayBuffer"==e},E=function(t,e){return m(t)&&!It(e)&&e in t&&Xu(+e)&&e>=0},A=function(t,e){return e=Ft(e),E(t,e)?te(2,t[e]):u(t,e)},S=function(t,e,r){return e=Ft(e),!(E(t,e)&&dt(r)&&B(r,"value"))||B(r,"get")||B(r,"set")||r.configurable||B(r,"writable")&&!r.writable||B(r,"enumerable")&&!r.enumerable?a(t,e,r):(t[e]=r.value,t)};pt?(p||(Ie.f=A,Ut.f=S,b(y,"buffer"),b(y,"byteOffset"),b(y,"byteLength"),b(y,"length")),ir({target:"Object",stat:!0,forced:!p},{getOwnPropertyDescriptor:A,defineProperty:S}),t.exports=function(t,u,l){var g=t.match(/\\d+$/)[0]/8,b=t+(l?"Clamped":"")+"Array",E="get"+t,A="set"+t,S=O[b],T=S,k=T&&T.prototype,I={},j=function(t,e){a(t,e,{get:function(){return function(t,e){var r=n(t);return r.view[E](e*g+r.byteOffset,!0)}(this,e)},set:function(t){return function(t,e,r){var o=n(t);l&&(r=(r=s(r))<0?0:r>255?255:255&r),o.view[A](e*g+o.byteOffset,r,!0)}(this,e,t)},enumerable:!0})};p?eu&&(T=u((function(t,e,r,n){return yr(t,k),ss(dt(e)?w(e)?void 0!==n?new S(e,es(r,g),n):void 0!==r?new S(e,es(r,g)):new S(e):m(e)?x(T,e):St(us,T,e):new S(ou(e)),t,T)})),cr&&cr(T,d),r(e(S),(function(t){t in T||ee(T,t,S[t])})),T.prototype=k):(T=u((function(t,e,r,n){yr(t,k);var i,a,u,s=0,l=0;if(dt(e)){if(!w(e))return m(e)?x(T,e):St(us,T,e);i=e,l=es(r,g);var p=e.byteLength;if(void 0===n){if(p%g)throw c("Wrong length");if((a=p-l)<0)throw c("Wrong length")}else if((a=De(n)*g)+l>p)throw c("Wrong length");u=a/g}else u=ou(e),i=new f(a=u*g);for(o(t,{buffer:i,byteOffset:l,byteLength:a,length:u,view:new h(i)});s<u;)j(t,s++)})),cr&&cr(T,d),k=T.prototype=Qi(y)),k.constructor!==T&&ee(k,"constructor",T),i(k).TypedArrayConstructor=T,v&&ee(k,v,b);var P=T!=S;I[b]=T,ir({global:!0,constructor:!0,forced:P,sham:!p},I),"BYTES_PER_ELEMENT"in T||ee(T,"BYTES_PER_ELEMENT",g),"BYTES_PER_ELEMENT"in k||ee(k,"BYTES_PER_ELEMENT",g),vr(b)}):t.exports=function(){}}));cs("Uint8",(function(t){return function(e,r,n){return t(this,e,r,n)}}),!0);var fs=TypeError,ls=function(t,e){if(!delete t[e])throw fs("Cannot delete property "+Pt(e)+" of "+Pt(t))},hs=Math.min,ps=R([].copyWithin||function(t,e){var r=W(this),n=Fe(r),o=Ce(t,n),i=Ce(e,n),a=arguments.length>2?arguments[2]:void 0,u=hs((void 0===a?n:Ce(a,n))-i,n-o),s=1;for(i<o&&o<i+u&&(s=-1,i+=u-1,o+=u-1);u-- >0;)i in r?r[o]=r[i]:ls(r,o),o+=s,i+=s;return r}),vs=Qa.aTypedArray;(0,Qa.exportTypedArrayMethod)("copyWithin",(function(t,e){return ps(vs(this),t,e,arguments.length>2?arguments[2]:void 0)}));var ds=Ei.every,ys=Qa.aTypedArray;(0,Qa.exportTypedArrayMethod)("every",(function(t){return ds(ys(this),t,arguments.length>1?arguments[1]:void 0)}));var gs=Qa.aTypedArray,ms=Qa.exportTypedArrayMethod,xs=R("".slice);ms("fill",(function(t){var e=arguments.length;gs(this);var r="Big"===xs(me(this),0,3)?is(t):+t;return St(pu,this,r,e>1?arguments[1]:void 0,e>2?arguments[2]:void 0)}),j((function(){var t=0;return new Int8Array(2).fill({valueOf:function(){return t++}}),1!==t})));var bs=Qa.aTypedArrayConstructor,ws=Qa.getTypedArrayConstructor,Es=function(t){return bs(Lr(t,ws(t)))},As=function(t,e){return function(t,e){for(var r=0,n=Fe(e),o=new t(n);n>r;)o[r]=e[r++];return o}(Es(t),e)},Os=Ei.filter,Ss=Qa.aTypedArray;(0,Qa.exportTypedArrayMethod)("filter",(function(t){var e=Os(Ss(this),t,arguments.length>1?arguments[1]:void 0);return As(this,e)}));var Ts=Ei.find,ks=Qa.aTypedArray;(0,Qa.exportTypedArrayMethod)("find",(function(t){return Ts(ks(this),t,arguments.length>1?arguments[1]:void 0)}));var Is=Ei.findIndex,js=Qa.aTypedArray;(0,Qa.exportTypedArrayMethod)("findIndex",(function(t){return Is(js(this),t,arguments.length>1?arguments[1]:void 0)}));var Ps=Ei.forEach,_s=Qa.aTypedArray;(0,Qa.exportTypedArrayMethod)("forEach",(function(t){Ps(_s(this),t,arguments.length>1?arguments[1]:void 0)}));var Ms=ze.includes,Ls=Qa.aTypedArray;(0,Qa.exportTypedArrayMethod)("includes",(function(t){return Ms(Ls(this),t,arguments.length>1?arguments[1]:void 0)}));var Rs=ze.indexOf,Cs=Qa.aTypedArray;(0,Qa.exportTypedArrayMethod)("indexOf",(function(t){return Rs(Cs(this),t,arguments.length>1?arguments[1]:void 0)}));var Ns=ft("iterator"),Ds=O.Uint8Array,Fs=R(Ta.values),Ws=R(Ta.keys),zs=R(Ta.entries),Bs=Qa.aTypedArray,Us=Qa.exportTypedArrayMethod,Gs=Ds&&Ds.prototype,Hs=!j((function(){Gs[Ns].call([1])})),Vs=!!Gs&&Gs.values&&Gs[Ns]===Gs.values&&"values"===Gs.values.name,qs=function(){return Fs(Bs(this))};Us("entries",(function(){return zs(Bs(this))}),Hs),Us("keys",(function(){return Ws(Bs(this))}),Hs),Us("values",qs,Hs||!Vs,{name:"values"}),Us(Ns,qs,Hs||!Vs,{name:"values"});var Zs=Qa.aTypedArray,Ys=Qa.exportTypedArrayMethod,$s=R([].join);Ys("join",(function(t){return $s(Zs(this),t)}));var Ks=Math.min,Qs=[].lastIndexOf,Xs=!!Qs&&1/[1].lastIndexOf(1,-0)<0,Js=Ai("lastIndexOf"),tc=Xs||!Js?function(t){if(Xs)return Dr(Qs,this,arguments)||0;var e=Te(this),r=Fe(e),n=r-1;for(arguments.length>1&&(n=Ks(n,Me(arguments[1]))),n<0&&(n=r+n);n>=0;n--)if(n in e&&e[n]===t)return n||0;return-1}:Qs,ec=Qa.aTypedArray;(0,Qa.exportTypedArrayMethod)("lastIndexOf",(function(t){var e=arguments.length;return Dr(tc,ec(this),e>1?[t,arguments[1]]:[t])}));var rc=Ei.map,nc=Qa.aTypedArray;(0,Qa.exportTypedArrayMethod)("map",(function(t){return rc(nc(this),t,arguments.length>1?arguments[1]:void 0,(function(t,e){return new(Es(t))(e)}))}));var oc=TypeError,ic=function(t){return function(e,r,n,o){Mt(r);var i=W(e),a=Se(i),u=Fe(i),s=t?u-1:0,c=t?-1:1;if(n<2)for(;;){if(s in a){o=a[s],s+=c;break}if(s+=c,t?s<0:u<=s)throw oc("Reduce of empty array with no initial value")}for(;t?s>=0:u>s;s+=c)s in a&&(o=r(o,a[s],s,i));return o}},ac={left:ic(!1),right:ic(!0)},uc=ac.left,sc=Qa.aTypedArray;(0,Qa.exportTypedArrayMethod)("reduce",(function(t){var e=arguments.length;return uc(sc(this),t,e,e>1?arguments[1]:void 0)}));var cc=ac.right,fc=Qa.aTypedArray;(0,Qa.exportTypedArrayMethod)("reduceRight",(function(t){var e=arguments.length;return cc(fc(this),t,e,e>1?arguments[1]:void 0)}));var lc=Qa.aTypedArray,hc=Qa.exportTypedArrayMethod,pc=Math.floor;hc("reverse",(function(){for(var t,e=lc(this).length,r=pc(e/2),n=0;n<r;)t=this[n],this[n++]=this[--e],this[e]=t;return this}));var vc=O.RangeError,dc=O.Int8Array,yc=dc&&dc.prototype,gc=yc&&yc.set,mc=Qa.aTypedArray,xc=Qa.exportTypedArrayMethod,bc=!j((function(){var t=new Uint8ClampedArray(2);return St(gc,t,{length:1,0:3},1),3!==t[1]})),wc=bc&&Qa.NATIVE_ARRAY_BUFFER_VIEWS&&j((function(){var t=new dc(2);return t.set(1),t.set("2",1),0!==t[0]||2!==t[1]}));xc("set",(function(t){mc(this);var e=es(arguments.length>1?arguments[1]:void 0,1),r=W(t);if(bc)return St(gc,this,r,e);var n=this.length,o=Fe(r),i=0;if(o+e>n)throw vc("Wrong length");for(;i<o;)this[e+i]=r[i++]}),!bc||wc);var Ec=Qa.aTypedArray;(0,Qa.exportTypedArrayMethod)("slice",(function(t,e){for(var r=Ur(Ec(this),t,e),n=Es(this),o=0,i=r.length,a=new n(i);i>o;)a[o]=r[o++];return a}),j((function(){new Int8Array(1).slice()})));var Ac=Ei.some,Oc=Qa.aTypedArray;(0,Qa.exportTypedArrayMethod)("some",(function(t){return Ac(Oc(this),t,arguments.length>1?arguments[1]:void 0)}));var Sc=Math.floor,Tc=function(t,e){var r=t.length,n=Sc(r/2);return r<8?kc(t,e):Ic(t,Tc(yu(t,0,n),e),Tc(yu(t,n),e),e)},kc=function(t,e){for(var r,n,o=t.length,i=1;i<o;){for(n=i,r=t[i];n&&e(t[n-1],r)>0;)t[n]=t[--n];n!==i++&&(t[n]=r)}return t},Ic=function(t,e,r,n){for(var o=e.length,i=r.length,a=0,u=0;a<o||u<i;)t[a+u]=a<o&&u<i?n(e[a],r[u])<=0?e[a++]:r[u++]:a<o?e[a++]:r[u++];return t},jc=Tc,Pc=X.match(/firefox\\/(\\d+)/i),_c=!!Pc&&+Pc[1],Mc=/MSIE|Trident/.test(X),Lc=X.match(/AppleWebKit\\/(\\d+)\\./),Rc=!!Lc&&+Lc[1],Cc=Qa.aTypedArray,Nc=Qa.exportTypedArrayMethod,Dc=O.Uint16Array,Fc=Dc&&Fr(Dc.prototype.sort),Wc=!(!Fc||j((function(){Fc(new Dc(2),null)}))&&j((function(){Fc(new Dc(2),{})}))),zc=!!Fc&&!j((function(){if(nt)return nt<74;if(_c)return _c<67;if(Mc)return!0;if(Rc)return Rc<602;var t,e,r=new Dc(516),n=Array(516);for(t=0;t<516;t++)e=t%4,r[t]=515-t,n[t]=t-2*e+3;for(Fc(r,(function(t,e){return(t/4|0)-(e/4|0)})),t=0;t<516;t++)if(r[t]!==n[t])return!0}));Nc("sort",(function(t){return void 0!==t&&Mt(t),zc?Fc(this,t):jc(Cc(this),function(t){return function(e,r){return void 0!==t?+t(e,r)||0:r!=r?-1:e!=e?1:0===e&&0===r?1/e>0&&1/r<0?1:-1:e>r}}(t))}),!zc||Wc);var Bc=Qa.aTypedArray;(0,Qa.exportTypedArrayMethod)("subarray",(function(t,e){var r=Bc(this),n=r.length,o=Ce(t,n);return new(Es(r))(r.buffer,r.byteOffset+o*r.BYTES_PER_ELEMENT,De((void 0===e?n:Ce(e,n))-o))}));var Uc=O.Int8Array,Gc=Qa.aTypedArray,Hc=Qa.exportTypedArrayMethod,Vc=[].toLocaleString,qc=!!Uc&&j((function(){Vc.call(new Uc(1))}));Hc("toLocaleString",(function(){return Dr(Vc,qc?Ur(Gc(this)):Gc(this),Ur(arguments))}),j((function(){return[1,2].toLocaleString()!=new Uc([1,2]).toLocaleString()}))||!j((function(){Uc.prototype.toLocaleString.call([1,2])})));var Zc=Qa.exportTypedArrayMethod,Yc=O.Uint8Array,$c=Yc&&Yc.prototype||{},Kc=[].toString,Qc=R([].join);j((function(){Kc.call({})}))&&(Kc=function(){return Qc(this)});var Xc=$c.toString!=Kc;Zc("toString",Kc,Xc);var Jc,tf,ef=String,rf=function(t){if("Symbol"===me(t))throw TypeError("Cannot convert a Symbol value to a string");return ef(t)},nf=function(){var t=At(this),e="";return t.hasIndices&&(e+="d"),t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.unicodeSets&&(e+="v"),t.sticky&&(e+="y"),e},of=O.RegExp,af=j((function(){var t=of("a","y");return t.lastIndex=2,null!=t.exec("abcd")})),uf=af||j((function(){return!of("a","y").sticky})),sf={BROKEN_CARET:af||j((function(){var t=of("^r","gy");return t.lastIndex=2,null!=t.exec("str")})),MISSED_STICKY:uf,UNSUPPORTED_Y:af},cf=O.RegExp,ff=j((function(){var t=cf(".","s");return!(t.dotAll&&t.exec("\\n")&&"s"===t.flags)})),lf=O.RegExp,hf=j((function(){var t=lf("(?<a>b)","g");return"b"!==t.exec("b").groups.a||"bc"!=="b".replace(t,"$<a>c")})),pf=ce.get,vf=I("native-string-replace",String.prototype.replace),df=RegExp.prototype.exec,yf=df,gf=R("".charAt),mf=R("".indexOf),xf=R("".replace),bf=R("".slice),wf=(tf=/b*/g,St(df,Jc=/a/,"a"),St(df,tf,"a"),0!==Jc.lastIndex||0!==tf.lastIndex),Ef=sf.BROKEN_CARET,Af=void 0!==/()??/.exec("")[1];(wf||Af||Ef||ff||hf)&&(yf=function(t){var e,r,n,o,i,a,u,s=this,c=pf(s),f=rf(t),l=c.raw;if(l)return l.lastIndex=s.lastIndex,e=St(yf,l,f),s.lastIndex=l.lastIndex,e;var h=c.groups,p=Ef&&s.sticky,v=St(nf,s),d=s.source,y=0,g=f;if(p&&(v=xf(v,"y",""),-1===mf(v,"g")&&(v+="g"),g=bf(f,s.lastIndex),s.lastIndex>0&&(!s.multiline||s.multiline&&"\\n"!==gf(f,s.lastIndex-1))&&(d="(?: "+d+")",g=" "+g,y++),r=new RegExp("^(?:"+d+")",v)),Af&&(r=new RegExp("^"+d+"$(?!\\\\s)",v)),wf&&(n=s.lastIndex),o=St(df,p?r:s,g),p?o?(o.input=bf(o.input,y),o[0]=bf(o[0],y),o.index=s.lastIndex,s.lastIndex+=o[0].length):s.lastIndex=0:wf&&o&&(s.lastIndex=s.global?o.index+o[0].length:n),Af&&o&&o.length>1&&St(vf,o[0],r,(function(){for(i=1;i<arguments.length-2;i++)void 0===arguments[i]&&(o[i]=void 0)})),o&&h)for(o.groups=a=Qi(null),i=0;i<h.length;i++)a[(u=h[i])[0]]=o[u[1]];return o});var Of=yf;ir({target:"RegExp",proto:!0,forced:/./.exec!==Of},{exec:Of});var Sf,Tf=ft("species"),kf=RegExp.prototype,If=function(t,e,r,n){var o=ft(t),i=!j((function(){var e={};return e[o]=function(){return 7},7!=""[t](e)})),a=i&&!j((function(){var e=!1,r=/a/;return"split"===t&&((r={}).constructor={},r.constructor[Tf]=function(){return r},r.flags="",r[o]=/./[o]),r.exec=function(){return e=!0,null},r[o](""),!e}));if(!i||!a||r){var u=Fr(/./[o]),s=e(o,""[t],(function(t,e,r,n,o){var a=Fr(t),s=e.exec;return s===Of||s===kf.exec?i&&!o?{done:!0,value:u(e,r,n)}:{done:!0,value:a(r,e,n)}:{done:!1}}));le(String.prototype,t,s[0]),le(kf,o,s[1])}n&&ee(kf[o],"sham",!0)},jf=R("".charAt),Pf=R("".charCodeAt),_f=R("".slice),Mf=function(t){return function(e,r){var n,o,i=rf(D(e)),a=Me(r),u=i.length;return a<0||a>=u?t?"":void 0:(n=Pf(i,a))<55296||n>56319||a+1===u||(o=Pf(i,a+1))<56320||o>57343?t?jf(i,a):n:t?_f(i,a,a+2):o-56320+(n-55296<<10)+65536}},Lf={codeAt:Mf(!1),charAt:Mf(!0)},Rf=Lf.charAt,Cf=function(t,e,r){return e+(r?Rf(t,e).length:1)},Nf=Math.floor,Df=R("".charAt),Ff=R("".replace),Wf=R("".slice),zf=/\\$([$&\'`]|\\d{1,2}|<[^>]*>)/g,Bf=/\\$([$&\'`]|\\d{1,2})/g,Uf=function(t,e,r,n,o,i){var a=r+t.length,u=n.length,s=Bf;return void 0!==o&&(o=W(o),s=zf),Ff(i,s,(function(i,s){var c;switch(Df(s,0)){case"$":return"$";case"&":return t;case"`":return Wf(e,0,r);case"\'":return Wf(e,a);case"<":c=o[Wf(s,1,-1)];break;default:var f=+s;if(0===f)return i;if(f>u){var l=Nf(f/10);return 0===l?i:l<=u?void 0===n[l-1]?Df(s,1):n[l-1]+Df(s,1):i}c=n[f-1]}return void 0===c?"":c}))},Gf=TypeError,Hf=function(t,e){var r=t.exec;if($(r)){var n=St(r,t,e);return null!==n&&At(n),n}if("RegExp"===ve(t))return St(Of,t,e);throw Gf("RegExp#exec called on incompatible receiver")},Vf=ft("replace"),qf=Math.max,Zf=Math.min,Yf=R([].concat),$f=R([].push),Kf=R("".indexOf),Qf=R("".slice),Xf="$0"==="a".replace(/./,"$0"),Jf=!!/./[Vf]&&""===/./[Vf]("a","$0");function tl(t){this.message=t}If("replace",(function(t,e,r){var n=Jf?"$":"$0";return[function(t,r){var n=D(this),o=C(t)?void 0:Lt(t,Vf);return o?St(o,t,n,r):St(e,rf(n),t,r)},function(t,o){var i=At(this),a=rf(t);if("string"==typeof o&&-1===Kf(o,n)&&-1===Kf(o,"$<")){var u=r(e,i,a,o);if(u.done)return u.value}var s=$(o);s||(o=rf(o));var c=i.global;if(c){var f=i.unicode;i.lastIndex=0}for(var l=[];;){var h=Hf(i,a);if(null===h)break;if($f(l,h),!c)break;""===rf(h[0])&&(i.lastIndex=Cf(a,De(i.lastIndex),f))}for(var p,v="",d=0,y=0;y<l.length;y++){for(var g=rf((h=l[y])[0]),m=qf(Zf(Me(h.index),a.length),0),x=[],b=1;b<h.length;b++)$f(x,void 0===(p=h[b])?p:String(p));var w=h.groups;if(s){var E=Yf([g],x,m,a);void 0!==w&&$f(E,w);var A=rf(Dr(o,void 0,E))}else A=Uf(g,a,m,x,w,o);m>=d&&(v+=Qf(a,d,m)+A,d=m+g.length)}return v+Qf(a,d)}]}),!!j((function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")}))||!Xf||Jf),tl.prototype=new Error,tl.prototype.name="InvalidCharacterError",ir({global:!0,forced:O.globalThis!==O},{globalThis:O}),Sf="undefined"==typeof window?{devicePixelRatio:1,navigator:{userAgent:"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/95.0.4638.69 Safari/537.36",browserLanguage:"zh-CN",language:"zh-CN",platform:""},location:"",document:{documentElement:{style:{}},createEvent:function(){return!0},getElementById:function(t){return!0},createElement:function(){return{className:"",classList:{add:function(){return""}}}},createElementNS:function(){return!0},addEventListener:function(){return!0},removeEventListener:function(){return!0},querySelector:function(){return!1}},performance:{mark:function(t){return null},clearMeasures:function(t){return null},clearMarks:function(t){return null},measure:function(t,e,r){return{duration:0}},now:function(){return(new Date).getTime()}},Blob:"",dispatchEvent:function(t){return!0},Event:function(t,e){return!0},createElement:function(){return!0},createElementNS:function(){return!0},XMLHttpRequest:function(){return!0},addEventListener:function(){return!0},removeEventListener:function(){return!0},requestAnimationFrame:function(){return!0},cancelAnimationFrame:function(){return!0},clearTimeout:function(){return!0}}:window,"undefined"!=typeof my&&!!my&&"function"==typeof my.showToast&&!0!==my.isFRM?my.getSystemInfoSync().pixelRatio:Sf.devicePixelRatio;var el=TypeError,rl=Object.getOwnPropertyDescriptor,nl=pt&&!function(){if(void 0!==this)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(t){return t instanceof TypeError}}()?function(t,e){if(yi(t)&&!rl(t,"length").writable)throw el("Cannot set read only .length");return t.length=e}:function(t,e){return t.length=e},ol=TypeError,il=function(t){if(t>9007199254740991)throw ol("Maximum allowed index exceeded");return t},al=Pi("splice"),ul=Math.max,sl=Math.min;ir({target:"Array",proto:!0,forced:!al},{splice:function(t,e){var r,n,o,i,a,u,s=W(this),c=Fe(s),f=Ce(t,c),l=arguments.length;for(0===l?r=n=0:1===l?(r=0,n=c-f):(r=l-2,n=sl(ul(Me(e),0),c-f)),il(c+r-n),o=xi(s,n),i=0;i<n;i++)(a=f+i)in s&&Ii(o,i,s[a]);if(o.length=n,r<n){for(i=f;i<c-n;i++)u=i+r,(a=i+n)in s?s[u]=s[a]:ls(s,u);for(i=c;i>c-n+r;i--)ls(s,i-1)}else if(r>n)for(i=c-n;i>f;i--)u=i+r-1,(a=i+n-1)in s?s[u]=s[a]:ls(s,u);for(i=0;i<r;i++)s[i+f]=arguments[i+2];return nl(s,c-n+r),o}});var cl=u((function t(e,r){i(this,t),s(this,"cancelBubble",void 0),s(this,"cancelable",void 0),s(this,"target",void 0),s(this,"currentTarget",void 0),s(this,"preventDefault",void 0),s(this,"stopPropagation",void 0),s(this,"type",void 0),s(this,"timeStamp",void 0),this.cancelBubble=!1,this.cancelable=!1,this.target=null,this.currentTarget=null,this.preventDefault=function(){},this.stopPropagation=function(){},this.type=e,this.timeStamp=Date.now()})),fl=Object.assign,ll=Object.defineProperty,hl=R([].concat),pl=!fl||j((function(){if(pt&&1!==fl({b:1},fl(ll({},"a",{enumerable:!0,get:function(){ll(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var t={},e={},r=Symbol();return t[r]=7,"abcdefghijklmnopqrst".split("").forEach((function(t){e[t]=t})),7!=fl({},t)[r]||"abcdefghijklmnopqrst"!=Hi(fl({},e)).join("")}))?function(t,e){for(var r=W(t),n=arguments.length,o=1,i=Ze.f,a=Ee.f;n>o;)for(var u,s=Se(arguments[o++]),c=i?hl(Hi(s),i(s)):Hi(s),f=c.length,l=0;f>l;)u=c[l++],pt&&!St(a,s,u)||(r[u]=s[u]);return r}:fl;ir({target:"Object",stat:!0,arity:2,forced:Object.assign!==pl},{assign:pl});var vl=Ei.findIndex,dl=!0;"findIndex"in[]&&Array(1).findIndex((function(){dl=!1})),ir({target:"Array",proto:!0,forced:dl},{findIndex:function(t){return vl(this,t,arguments.length>1?arguments[1]:void 0)}}),oa("findIndex");var yl=Lf.charAt,gl=ce.set,ml=ce.getterFor("String Iterator");wa(String,"String",(function(t){gl(this,{type:"String Iterator",string:rf(t),index:0})}),(function(){var t,e=ml(this),r=e.string,n=e.index;return n>=r.length?Ea(void 0,!0):(t=yl(r,n),e.index+=t.length,Ea(t,!1))}));var xl=qe.f,bl="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],wl={f:function(t){return bl&&"Window"==ve(t)?function(t){try{return xl(t)}catch(t){return yu(bl)}}(t):xl(Te(t))}},El=j((function(){if("function"==typeof ArrayBuffer){var t=new ArrayBuffer(8);Object.isExtensible(t)&&Object.defineProperty(t,"a",{value:8})}})),Al=Object.isExtensible,Ol=j((function(){Al(1)}))||El?function(t){return!!dt(t)&&((!El||"ArrayBuffer"!=ve(t))&&(!Al||Al(t)))}:Al,Sl=!j((function(){return Object.isExtensible(Object.preventExtensions({}))})),Tl=b((function(t){var e=Ut.f,r=!1,n=V("meta"),o=0,i=function(t){e(t,n,{value:{objectID:"O"+o++,weakData:{}}})},a=t.exports={enable:function(){a.enable=function(){},r=!0;var t=qe.f,e=R([].splice),o={};o[n]=1,t(o).length&&(qe.f=function(r){for(var o=t(r),i=0,a=o.length;i<a;i++)if(o[i]===n){e(o,i,1);break}return o},ir({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:wl.f}))},fastKey:function(t,e){if(!dt(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!B(t,n)){if(!Ol(t))return"F";if(!e)return"E";i(t)}return t[n].objectID},getWeakData:function(t,e){if(!B(t,n)){if(!Ol(t))return!0;if(!e)return!1;i(t)}return t[n].weakData},onFreeze:function(t){return Sl&&r&&Ol(t)&&!B(t,n)&&i(t),t}};oe[n]=!0})),kl=(Tl.enable,Tl.fastKey,Tl.getWeakData,Tl.onFreeze,function(t,e,r){var n=-1!==t.indexOf("Map"),o=-1!==t.indexOf("Weak"),i=n?"set":"add",a=O[t],u=a&&a.prototype,s=a,c={},f=function(t){var e=R(u[t]);le(u,t,"add"==t?function(t){return e(this,0===t?0:t),this}:"delete"==t?function(t){return!(o&&!dt(t))&&e(this,0===t?0:t)}:"get"==t?function(t){return o&&!dt(t)?void 0:e(this,0===t?0:t)}:"has"==t?function(t){return!(o&&!dt(t))&&e(this,0===t?0:t)}:function(t,r){return e(this,0===t?0:t,r),this})};if(nr(t,!$(a)||!(o||u.forEach&&!j((function(){(new a).entries().next()})))))s=r.getConstructor(e,t,n,i),Tl.enable();else if(nr(t,!0)){var l=new s,h=l[i](o?{}:-0,1)!=l,p=j((function(){l.has(1)})),v=_o((function(t){new a(t)})),d=!o&&j((function(){for(var t=new a,e=5;e--;)t[i](e,e);return!t.has(-0)}));v||((s=e((function(t,e){yr(t,u);var r=ss(new a,t,s);return C(e)||To(e,r[i],{that:r,AS_ENTRIES:n}),r}))).prototype=u,u.constructor=s),(p||d)&&(f("delete"),f("has"),n&&f("get")),(d||h)&&f(i),o&&u.clear&&delete u.clear}return c[t]=s,ir({global:!0,constructor:!0,forced:s!=a},c),hr(s,t),o||r.setStrong(s,t,n),s}),Il=Tl.getWeakData,jl=ce.set,Pl=ce.getterFor,_l=Ei.find,Ml=Ei.findIndex,Ll=R([].splice),Rl=0,Cl=function(t){return t.frozen||(t.frozen=new Nl)},Nl=function(){this.entries=[]},Dl=function(t,e){return _l(t.entries,(function(t){return t[0]===e}))};Nl.prototype={get:function(t){var e=Dl(this,t);if(e)return e[1]},has:function(t){return!!Dl(this,t)},set:function(t,e){var r=Dl(this,t);r?r[1]=e:this.entries.push([t,e])},delete:function(t){var e=Ml(this.entries,(function(e){return e[0]===t}));return~e&&Ll(this.entries,e,1),!!~e}};var Fl,Wl={getConstructor:function(t,e,r,n){var o=t((function(t,o){yr(t,i),jl(t,{type:e,id:Rl++,frozen:void 0}),C(o)||To(o,t[n],{that:t,AS_ENTRIES:r})})),i=o.prototype,a=Pl(e),u=function(t,e,r){var n=a(t),o=Il(At(e),!0);return!0===o?Cl(n).set(e,r):o[n.id]=r,t};return ru(i,{delete:function(t){var e=a(this);if(!dt(t))return!1;var r=Il(t);return!0===r?Cl(e).delete(t):r&&B(r,e.id)&&delete r[e.id]},has:function(t){var e=a(this);if(!dt(t))return!1;var r=Il(t);return!0===r?Cl(e).has(t):r&&B(r,e.id)}}),ru(i,r?{get:function(t){var e=a(this);if(dt(t)){var r=Il(t);return!0===r?Cl(e).get(t):r?r[e.id]:void 0}},set:function(t,e){return u(this,t,e)}}:{add:function(t){return u(this,t,!0)}}),o}},zl=ce.enforce,Bl=!O.ActiveXObject&&"ActiveXObject"in O,Ul=function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}},Gl=kl("WeakMap",Ul,Wl);if(Jt&&Bl){Fl=Wl.getConstructor(Ul,"WeakMap",!0),Tl.enable();var Hl=Gl.prototype,Vl=R(Hl.delete),ql=R(Hl.has),Zl=R(Hl.get),Yl=R(Hl.set);ru(Hl,{delete:function(t){if(dt(t)&&!Ol(t)){var e=zl(this);return e.frozen||(e.frozen=new Fl),Vl(this,t)||e.frozen.delete(t)}return Vl(this,t)},has:function(t){if(dt(t)&&!Ol(t)){var e=zl(this);return e.frozen||(e.frozen=new Fl),ql(this,t)||e.frozen.has(t)}return ql(this,t)},get:function(t){if(dt(t)&&!Ol(t)){var e=zl(this);return e.frozen||(e.frozen=new Fl),ql(this,t)?Zl(this,t):e.frozen.get(t)}return Zl(this,t)},set:function(t,e){if(dt(t)&&!Ol(t)){var r=zl(this);r.frozen||(r.frozen=new Fl),ql(this,t)?Yl(this,t,e):r.frozen.set(t,e)}else Yl(this,t,e);return this}})}var $l=ft("iterator"),Kl=ft("toStringTag"),Ql=Ta.values,Xl=function(t,e){if(t){if(t[$l]!==Ql)try{ee(t,$l,Ql)}catch(e){t[$l]=Ql}if(t[Kl]||ee(t,Kl,e),hi[e])for(var r in Ta)if(t[r]!==Ta[r])try{ee(t,r,Ta[r])}catch(e){t[r]=Ta[r]}}};for(var Jl in hi)Xl(O[Jl]&&O[Jl].prototype,Jl);Xl(di,"DOMTokenList");var th,eh,rh,nh,oh=new WeakMap,ih=function(){function t(){i(this,t),oh.set(this,{})}return u(t,[{key:"addEventListener",value:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=oh.get(this);n||(n={}),n[t]||(n[t]=[]),n[t].push(e),oh.set(this,n),r.capture,r.once,r.passive}},{key:"removeEventListener",value:function(t,e){var r=oh.get(this);if(r){var n=r[t];if(n&&n.length>0)for(var o=n.length;o--;o>0)if(n[o]===e){n.splice(o,1);break}}}},{key:"dispatchEvent",value:function(t){var e=oh.get(this)[t.type];if(e){var r,n=function(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=g(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){u=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(u)throw i}}}}(e);try{for(n.s();!(r=n.n()).done;){(0,r.value)(t)}}catch(t){n.e(t)}finally{n.f()}}}}]),t}(),ah=function(t){c(r,t);var e=v(r);function r(){var t;return i(this,r),s(h(t=e.call(this)),"className",void 0),s(h(t),"children",void 0),t.className="",t.children=[],t}return u(r,[{key:"setAttribute",value:function(t,e){this[t]=e}},{key:"getAttribute",value:function(t){return this[t]}},{key:"setAttributeNS",value:function(t,e){this[t]=e}},{key:"getAttributeNS",value:function(t){return this[t]}}]),r}(function(t){c(r,t);var e=v(r);function r(){var t;return i(this,r),s(h(t=e.call(this)),"childNodes",void 0),t.childNodes=[],t}return u(r,[{key:"appendChild",value:function(t){this.childNodes.push(t)}},{key:"cloneNode",value:function(){var t=Object.create(this);return Object.assign(t,this),t}},{key:"removeChild",value:function(t){var e=this.childNodes.findIndex((function(e){return e===t}));return e>-1?this.childNodes.splice(e,1):null}}]),r}(ih));if("undefined"!=typeof my&&!!my&&"function"==typeof my.showToast&&!0!==my.isFRM){var uh=my.getSystemInfoSync();th=uh.screenWidth,eh=uh.screenHeight,rh=uh.windowWidth,nh=uh.windowHeight}else{var sh=Sf.innerWidth,ch=Sf.innerHeight;th=sh,eh=ch,rh=sh,nh=ch}var fh={width:th,height:eh,availWidth:rh,availHeight:nh,availLeft:0,availTop:0},lh=fh.availWidth,hh=fh.availHeight,ph={style:[]};function vh(t,e){var r,n;"parentNode"in t||(r=0===e?function(){return null}:1===e?function(){return ph}:function(){return null},Object.defineProperty(t,"parentNode",{enumerable:!0,get:r}));"parentElement"in t||(n=0===e?function(){return null}:1===e?function(){return ph}:function(){return null},Object.defineProperty(t,"parentElement",{enumerable:!0,get:n}))}function dh(t){t.style=t.style||{},Object.assign(t.style,{top:"0px",left:"0px",width:lh+"px",height:hh+"px",margin:"0px",padding:"0px"})}function yh(t){"clientLeft"in t||(t.clientLeft=0,t.clientTop=0),"clientWidth"in t||(t.clientWidth=lh,t.clientHeight=hh),"getBoundingClientRect"in t||(t.getBoundingClientRect=function(){return{x:0,y:0,top:0,left:0,width:this.clientWidth,height:this.clientHeight,right:this.clientWidth,bottom:this.clientHeight}})}function gh(t){"offsetLeft"in t||(t.offsetLeft=0,t.offsetTop=0),"offsetWidth"in t||(t.offsetWidth=lh,t.offsetHeight=hh)}function mh(t){"scrollLeft"in t||(t.scrollLeft=0,t.scrollTop=0),"scrollWidth"in t||(t.scrollWidth=lh,t.scrollHeight=hh)}function xh(t){var e=function(){return!0};t.classList=[],t.classList.add=e,t.classList.remove=e,t.classList.contains=e,t.classList.toggle=e}function bh(){}var wh=function(t){c(r,t);var e=v(r);function r(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",o=arguments.length>1?arguments[1]:void 0;return i(this,r),s(h(t=e.call(this)),"className",void 0),s(h(t),"children",void 0),s(h(t),"focus",void 0),s(h(t),"blur",void 0),s(h(t),"insertBefore",void 0),s(h(t),"appendChild",void 0),s(h(t),"removeChild",void 0),s(h(t),"remove",void 0),s(h(t),"innerHTML",void 0),s(h(t),"tagName",void 0),t.className="",t.children=[],t.focus=bh,t.blur=bh,t.insertBefore=bh,t.appendChild=bh,t.removeChild=bh,t.remove=bh,t.innerHTML="",t.tagName=n.toUpperCase(),vh(h(t),o),dh(h(t)),xh(h(t)),yh(h(t)),gh(h(t)),mh(h(t)),t}return u(r)}(ah),Eh=function(t){c(r,t);var e=v(r);function r(){return i(this,r),e.call(this,"video")}return u(r)}(function(t){c(r,t);var e=v(r);function r(t){return i(this,r),e.call(this,t)}return u(r,[{key:"addTextTrack",value:function(){}},{key:"captureStream",value:function(){}},{key:"fastSeek",value:function(){}},{key:"load",value:function(){}},{key:"pause",value:function(){}},{key:"play",value:function(){}}]),r}(wh)),Ah={};function Oh(){return Ah}var Sh=u((function t(){i(this,t);var e=Oh(),r=e.createImage&&e.createImage()||{};return"tagName"in r||(r.tagName="IMG",r.__proto__=t.prototype),vh(r),xh(r),Object.assign(r,{addEventListener:function(t,e){r["on".concat(t)]=e.bind(r)},removeEventListener:function(t){r["on".concat(t)]=null}}),r})),Th={href:"",protocol:"",host:""},kh=function(t){c(r,t);var e=v(r);function r(){return i(this,r),e.call(this,"body",0)}return u(r,[{key:"addEventListener",value:function(t,e){}},{key:"removeEventListener",value:function(t,e,r){}},{key:"dispatchEvent",value:function(t){}}]),r}(wh),Ih=function(t){c(r,t);var e=v(r);function r(){return i(this,r),e.call(this,"html",0)}return u(r,[{key:"addEventListener",value:function(t,e){}},{key:"removeEventListener",value:function(t,e){}},{key:"dispatchEvent",value:function(t){}}]),r}(wh),jh={},Ph={readyState:"complete",visibilityState:"visible",hidden:!1,fullscreen:!0,scripts:[],style:{},location:Th,ontouchstart:null,ontouchmove:null,ontouchend:null,onvisibilitychange:null,parentNode:null,parentElement:null,head:null,body:null,documentElement:{style:[]},createElement:function(t){return"canvas"===(t=t.toLowerCase())?my.createOffscreenCanvas(1024,128,"2d"):"img"===t?new Sh:"video"===t?new Eh:new wh(t)},createElementNS:function(t,e){return this.createElement(e)},createTextNode:function(t){return t},getElementById:function(t){return null},getElementsByTagName:function(t){return t=t.toLowerCase(),[]},getElementsByTagNameNS:function(t,e){return this.getElementsByTagName(e)},getElementsByName:function(t){return[]},querySelector:function(t){return null},querySelectorAll:function(t){return[]},addEventListener:function(t,e,r){jh[t]||(jh[t]=[]),jh[t].push(e)},removeEventListener:function(t,e){var r=jh[t];if(r&&r.length>0)for(var n=r.length;n--;n>0)if(r[n]===e){r.splice(n,1);break}},dispatchEvent:function(t){var e=t.type,r=jh[e];if(r)for(var n=0;n<r.length;n++)r[n](t);t.target&&"function"==typeof t.target["on"+e]&&t.target["on"+e](t)},createEvent:function(t){return new cl(t)}};Ph.documentElement=new Ih,Ph.head=new wh("head"),Ph.body=new kh,If("match",(function(t,e,r){return[function(e){var r=D(this),n=C(e)?void 0:Lt(e,t);return n?St(n,e,r):new RegExp(e)[t](rf(r))},function(t){var n=At(this),o=rf(t),i=r(e,n,o);if(i.done)return i.value;if(!n.global)return Hf(n,o);var a=n.unicode;n.lastIndex=0;for(var u,s=[],c=0;null!==(u=Hf(n,o));){var f=rf(u[0]);s[c]=f,""===f&&(n.lastIndex=Cf(o,De(n.lastIndex),a)),c++}return 0===c?null:s}]}));var _h,Mh,Lh=ft("isConcatSpreadable"),Rh=nt>=51||!j((function(){var t=[];return t[Lh]=!1,t.concat()[0]!==t})),Ch=Pi("concat"),Nh=function(t){if(!dt(t))return!1;var e=t[Lh];return void 0!==e?!!e:yi(t)};if(ir({target:"Array",proto:!0,arity:1,forced:!Rh||!Ch},{concat:function(t){var e,r,n,o,i,a=W(this),u=xi(a,0),s=0;for(e=-1,n=arguments.length;e<n;e++)if(Nh(i=-1===e?a:arguments[e]))for(o=Fe(i),il(s+o),r=0;r<o;r++,s++)r in i&&Ii(u,s,i[r]);else il(s+1),Ii(u,s++,i);return u.length=s,u}}),"undefined"!=typeof my&&!!my&&"function"==typeof my.showToast&&!0!==my.isFRM){var Dh=my.getSystemInfoSync();_h=Dh.system,Dh.platform,Dh.language}else{var Fh={versions:(Mh=Sf.navigator.userAgent,{trident:Mh.indexOf("Trident")>-1,presto:Mh.indexOf("Presto")>-1,webKit:Mh.indexOf("AppleWebKit")>-1,gecko:Mh.indexOf("Gecko")>-1&&-1===Mh.indexOf("KHTML"),mobile:!!Mh.match(/AppleWebKit.*Mobile.*/),ios:!!Mh.match(/\\(i[^;]+;( U;)? CPU.+Mac OS X/),android:Mh.indexOf("Android")>-1||Mh.indexOf("Linux")>-1,iPhone:Mh.indexOf("iPhone")>-1,iPad:Mh.indexOf("iPad")>-1,webApp:-1===Mh.indexOf("Safari"),weixin:Mh.indexOf("MicroMessenger")>-1,qq:" qq"===Mh.match(/\\sQQ/i)}),language:(Sf.navigator.browserLanguage||Sf.navigator.language).toLowerCase()};Fh.versions.android?"android":Fh.versions.trident?"IE":Fh.versions.presto?"Opera":Fh.versions.webKit?"webKit":Fh.versions.gecko?"Firefox":Fh.versions.mobile?"mobile":Fh.versions.ios?"ios":Fh.versions.iPhone?"iPhone":Fh.versions.iPad?"ipad":Fh.versions.webApp?"webApp":Fh.versions.weixin?"weixin":Fh.versions.qq&&"qq",_h=Sf.navigator.userAgent,Fh.language}_h.toLowerCase().indexOf("android");cs("Uint8",(function(t){return function(e,r,n){return t(this,e,r,n)}}));var Wh=Ut.f,zh=Tl.fastKey,Bh=ce.set,Uh=ce.getterFor;kl("Map",(function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}}),{getConstructor:function(t,e,r,n){var o=t((function(t,o){yr(t,i),Bh(t,{type:e,index:Qi(null),first:void 0,last:void 0,size:0}),pt||(t.size=0),C(o)||To(o,t[n],{that:t,AS_ENTRIES:r})})),i=o.prototype,a=Uh(e),u=function(t,e,r){var n,o,i=a(t),u=s(t,e);return u?u.value=r:(i.last=u={index:o=zh(e,!0),key:e,value:r,previous:n=i.last,next:void 0,removed:!1},i.first||(i.first=u),n&&(n.next=u),pt?i.size++:t.size++,"F"!==o&&(i.index[o]=u)),t},s=function(t,e){var r,n=a(t),o=zh(e);if("F"!==o)return n.index[o];for(r=n.first;r;r=r.next)if(r.key==e)return r};return ru(i,{clear:function(){for(var t=a(this),e=t.index,r=t.first;r;)r.removed=!0,r.previous&&(r.previous=r.previous.next=void 0),delete e[r.index],r=r.next;t.first=t.last=void 0,pt?t.size=0:this.size=0},delete:function(t){var e=a(this),r=s(this,t);if(r){var n=r.next,o=r.previous;delete e.index[r.index],r.removed=!0,o&&(o.next=n),n&&(n.previous=o),e.first==r&&(e.first=n),e.last==r&&(e.last=o),pt?e.size--:this.size--}return!!r},forEach:function(t){for(var e,r=a(this),n=zr(t,arguments.length>1?arguments[1]:void 0);e=e?e.next:r.first;)for(n(e.value,e.key,this);e&&e.removed;)e=e.previous},has:function(t){return!!s(this,t)}}),ru(i,r?{get:function(t){var e=s(this,t);return e&&e.value},set:function(t,e){return u(this,0===t?0:t,e)}}:{add:function(t){return u(this,t=0===t?0:t,t)}}),pt&&Wh(i,"size",{get:function(){return a(this).size}}),o},setStrong:function(t,e,r){var n=e+" Iterator",o=Uh(e),i=Uh(n);wa(t,e,(function(t,e){Bh(this,{type:n,target:t,state:o(t),kind:e,last:void 0})}),(function(){for(var t=i(this),e=t.kind,r=t.last;r&&r.removed;)r=r.previous;return t.target&&(t.last=r=r?r.next:t.state.first)?Ea("keys"==e?r.key:"values"==e?r.value:[r.key,r.value],!1):(t.target=void 0,Ea(void 0,!0))}),r?"entries":"values",!r,!0),vr(e)}});var Gh=R([].join),Hh=Se!=Object,Vh=Ai("join",",");ir({target:"Array",proto:!0,forced:Hh||!Vh},{join:function(t){return Gh(Te(this),void 0===t?",":t)}});var qh=j((function(){Hi(1)}));ir({target:"Object",stat:!0,forced:qh},{keys:function(t){return Hi(W(t))}});var Zh=new Map,Yh=new Map,$h=new Map,Kh=function(t){c(r,t);var e=v(r);function r(){var t;return i(this,r),s(h(t=e.call(this)),"onabort",void 0),s(h(t),"onerror",void 0),s(h(t),"onload",void 0),s(h(t),"onloadstart",void 0),s(h(t),"onprogress",void 0),s(h(t),"ontimeout",void 0),s(h(t),"onloadend",void 0),s(h(t),"onreadystatechange",void 0),s(h(t),"readyState",void 0),s(h(t),"response",void 0),s(h(t),"responseText",void 0),s(h(t),"_responseType",void 0),s(h(t),"responseXML",void 0),s(h(t),"status",void 0),s(h(t),"statusText",void 0),s(h(t),"upload",void 0),s(h(t),"withCredentials",void 0),s(h(t),"timeout",void 0),s(h(t),"_url",void 0),s(h(t),"_method",void 0),t.onabort=null,t.onerror=null,t.onload=null,t.onloadstart=null,t.onprogress=null,t.ontimeout=null,t.onloadend=null,t.onreadystatechange=null,t.readyState=0,t.response=null,t.responseText=null,t._responseType="text",t.responseXML=null,t.status=0,t.statusText="",t.upload={},t.withCredentials=!1,Zh.set("requestHeader",{"content-type":"application/x-www-form-urlencoded"}),t}return u(r,[{key:"responseType",set:function(t){this._responseType=t}},{key:"abort",value:function(){var t=$h.get("requestTask");t&&t.abort()}},{key:"getAllResponseHeaders",value:function(){var t=Yh.get("responseHeader");return Object.keys(t).map((function(e){return"".concat(e,": ").concat(t[e])})).join("\\n")}},{key:"getResponseHeader",value:function(t){return Yh.get("responseHeader")[t]}},{key:"open",value:function(t,e,r){this._method=t,this._url=e}},{key:"overrideMimeType",value:function(){}},{key:"send",value:function(){}},{key:"setRequestHeader",value:function(t,e){var r=Zh.get("requestHeader");r[t]=e,Zh.set("requestHeader",r)}},{key:"addEventListener",value:function(t,e){var r=this;"function"==typeof e&&(this["on"+t]=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t.target=t.target||r,e.call(r,t)})}},{key:"removeEventListener",value:function(t,e){this["on"+t]===e&&(this["on"+t]=null)}}]),r}(ih);s(Kh,"UNSEND",void 0),s(Kh,"OPENED",void 0),s(Kh,"HEADERS_RECEIVED",void 0),s(Kh,"LOADING",void 0),s(Kh,"DONE",void 0),Kh.UNSEND=0,Kh.OPENED=1,Kh.HEADERS_RECEIVED=2,Kh.LOADING=3,Kh.DONE=4;var Qh="undefined"!=typeof my&&!!my&&"function"==typeof my.showToast&&!0!==my.isFRM,Xh="undefined"!=typeof wx&&null!==wx&&(void 0!==wx.request||void 0!==wx.miniProgram),Jh=Qh||Xh;Jh||Sf.XMLHttpRequest,Jh||Sf.location;function tp(t){return[t+1&255,t+1>>8&255,t+1>>8>>8&255]}var ep=Ei.filter,rp=Pi("filter");function np(t){var e=t.color;return e&&e.length?e:[1,1,1,1]}function op(t,e,r){return 2===r.length?[r[0],r[1],0]:[r[0],r[1],r[2]]}function ip(t){return t.filter?[1]:[0]}function ap(t,e){return[e]}ir({target:"Array",proto:!0,forced:!rp},{filter:function(t){return ep(this,t,arguments.length>1?arguments[1]:void 0)}});var up=cp,sp=cp;function cp(t,e,r){r=r||2;var n,o,i,a,u,s,c,f=e&&e.length,l=f?e[0]*r:t.length,h=fp(t,0,l,r,!0),p=[];if(!h||h.next===h.prev)return p;if(f&&(h=function(t,e,r,n){var o,i,a,u,s,c=[];for(o=0,i=e.length;o<i;o++)a=e[o]*n,u=o<i-1?e[o+1]*n:t.length,(s=fp(t,a,u,n,!1))===s.next&&(s.steiner=!0),c.push(wp(s));for(c.sort(gp),o=0;o<c.length;o++)r=mp(c[o],r);return r}(t,e,h,r)),t.length>80*r){n=i=t[0],o=a=t[1];for(var v=r;v<l;v+=r)(u=t[v])<n&&(n=u),(s=t[v+1])<o&&(o=s),u>i&&(i=u),s>a&&(a=s);c=0!==(c=Math.max(i-n,a-o))?32767/c:0}return hp(h,p,r,n,o,c,0),p}function fp(t,e,r,n,o){var i,a;if(o===Rp(t,e,r,n)>0)for(i=e;i<r;i+=n)a=_p(i,t[i],t[i+1],a);else for(i=r-n;i>=e;i-=n)a=_p(i,t[i],t[i+1],a);return a&&Sp(a,a.next)&&(Mp(a),a=a.next),a}function lp(t,e){if(!t)return t;e||(e=t);var r,n=t;do{if(r=!1,n.steiner||!Sp(n,n.next)&&0!==Op(n.prev,n,n.next))n=n.next;else{if(Mp(n),(n=e=n.prev)===n.next)break;r=!0}}while(r||n!==e);return e}function hp(t,e,r,n,o,i,a){if(t){!a&&i&&function(t,e,r,n){var o=t;do{0===o.z&&(o.z=bp(o.x,o.y,e,r,n)),o.prevZ=o.prev,o.nextZ=o.next,o=o.next}while(o!==t);o.prevZ.nextZ=null,o.prevZ=null,function(t){var e,r,n,o,i,a,u,s,c=1;do{for(r=t,t=null,i=null,a=0;r;){for(a++,n=r,u=0,e=0;e<c&&(u++,n=n.nextZ);e++);for(s=c;u>0||s>0&&n;)0!==u&&(0===s||!n||r.z<=n.z)?(o=r,r=r.nextZ,u--):(o=n,n=n.nextZ,s--),i?i.nextZ=o:t=o,o.prevZ=i,i=o;r=n}i.nextZ=null,c*=2}while(a>1)}(o)}(t,n,o,i);for(var u,s,c=t;t.prev!==t.next;)if(u=t.prev,s=t.next,i?vp(t,n,o,i):pp(t))e.push(u.i/r|0),e.push(t.i/r|0),e.push(s.i/r|0),Mp(t),t=s.next,c=s.next;else if((t=s)===c){a?1===a?hp(t=dp(lp(t),e,r),e,r,n,o,i,2):2===a&&yp(t,e,r,n,o,i):hp(lp(t),e,r,n,o,i,1);break}}}function pp(t){var e=t.prev,r=t,n=t.next;if(Op(e,r,n)>=0)return!1;for(var o=e.x,i=r.x,a=n.x,u=e.y,s=r.y,c=n.y,f=o<i?o<a?o:a:i<a?i:a,l=u<s?u<c?u:c:s<c?s:c,h=o>i?o>a?o:a:i>a?i:a,p=u>s?u>c?u:c:s>c?s:c,v=n.next;v!==e;){if(v.x>=f&&v.x<=h&&v.y>=l&&v.y<=p&&Ep(o,u,i,s,a,c,v.x,v.y)&&Op(v.prev,v,v.next)>=0)return!1;v=v.next}return!0}function vp(t,e,r,n){var o=t.prev,i=t,a=t.next;if(Op(o,i,a)>=0)return!1;for(var u=o.x,s=i.x,c=a.x,f=o.y,l=i.y,h=a.y,p=u<s?u<c?u:c:s<c?s:c,v=f<l?f<h?f:h:l<h?l:h,d=u>s?u>c?u:c:s>c?s:c,y=f>l?f>h?f:h:l>h?l:h,g=bp(p,v,e,r,n),m=bp(d,y,e,r,n),x=t.prevZ,b=t.nextZ;x&&x.z>=g&&b&&b.z<=m;){if(x.x>=p&&x.x<=d&&x.y>=v&&x.y<=y&&x!==o&&x!==a&&Ep(u,f,s,l,c,h,x.x,x.y)&&Op(x.prev,x,x.next)>=0)return!1;if(x=x.prevZ,b.x>=p&&b.x<=d&&b.y>=v&&b.y<=y&&b!==o&&b!==a&&Ep(u,f,s,l,c,h,b.x,b.y)&&Op(b.prev,b,b.next)>=0)return!1;b=b.nextZ}for(;x&&x.z>=g;){if(x.x>=p&&x.x<=d&&x.y>=v&&x.y<=y&&x!==o&&x!==a&&Ep(u,f,s,l,c,h,x.x,x.y)&&Op(x.prev,x,x.next)>=0)return!1;x=x.prevZ}for(;b&&b.z<=m;){if(b.x>=p&&b.x<=d&&b.y>=v&&b.y<=y&&b!==o&&b!==a&&Ep(u,f,s,l,c,h,b.x,b.y)&&Op(b.prev,b,b.next)>=0)return!1;b=b.nextZ}return!0}function dp(t,e,r){var n=t;do{var o=n.prev,i=n.next.next;!Sp(o,i)&&Tp(o,n,n.next,i)&&jp(o,i)&&jp(i,o)&&(e.push(o.i/r|0),e.push(n.i/r|0),e.push(i.i/r|0),Mp(n),Mp(n.next),n=t=i),n=n.next}while(n!==t);return lp(n)}function yp(t,e,r,n,o,i){var a=t;do{for(var u=a.next.next;u!==a.prev;){if(a.i!==u.i&&Ap(a,u)){var s=Pp(a,u);return a=lp(a,a.next),s=lp(s,s.next),hp(a,e,r,n,o,i,0),void hp(s,e,r,n,o,i,0)}u=u.next}a=a.next}while(a!==t)}function gp(t,e){return t.x-e.x}function mp(t,e){var r=function(t,e){var r,n=e,o=t.x,i=t.y,a=-1/0;do{if(i<=n.y&&i>=n.next.y&&n.next.y!==n.y){var u=n.x+(i-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(u<=o&&u>a&&(a=u,r=n.x<n.next.x?n:n.next,u===o))return r}n=n.next}while(n!==e);if(!r)return null;var s,c=r,f=r.x,l=r.y,h=1/0;n=r;do{o>=n.x&&n.x>=f&&o!==n.x&&Ep(i<l?o:a,i,f,l,i<l?a:o,i,n.x,n.y)&&(s=Math.abs(i-n.y)/(o-n.x),jp(n,t)&&(s<h||s===h&&(n.x>r.x||n.x===r.x&&xp(r,n)))&&(r=n,h=s)),n=n.next}while(n!==c);return r}(t,e);if(!r)return e;var n=Pp(r,t);return lp(n,n.next),lp(r,r.next)}function xp(t,e){return Op(t.prev,t,e.prev)<0&&Op(e.next,t,t.next)<0}function bp(t,e,r,n,o){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-r)*o|0)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-n)*o|0)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function wp(t){var e=t,r=t;do{(e.x<r.x||e.x===r.x&&e.y<r.y)&&(r=e),e=e.next}while(e!==t);return r}function Ep(t,e,r,n,o,i,a,u){return(o-a)*(e-u)>=(t-a)*(i-u)&&(t-a)*(n-u)>=(r-a)*(e-u)&&(r-a)*(i-u)>=(o-a)*(n-u)}function Ap(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var r=t;do{if(r.i!==t.i&&r.next.i!==t.i&&r.i!==e.i&&r.next.i!==e.i&&Tp(r,r.next,t,e))return!0;r=r.next}while(r!==t);return!1}(t,e)&&(jp(t,e)&&jp(e,t)&&function(t,e){var r=t,n=!1,o=(t.x+e.x)/2,i=(t.y+e.y)/2;do{r.y>i!=r.next.y>i&&r.next.y!==r.y&&o<(r.next.x-r.x)*(i-r.y)/(r.next.y-r.y)+r.x&&(n=!n),r=r.next}while(r!==t);return n}(t,e)&&(Op(t.prev,t,e.prev)||Op(t,e.prev,e))||Sp(t,e)&&Op(t.prev,t,t.next)>0&&Op(e.prev,e,e.next)>0)}function Op(t,e,r){return(e.y-t.y)*(r.x-e.x)-(e.x-t.x)*(r.y-e.y)}function Sp(t,e){return t.x===e.x&&t.y===e.y}function Tp(t,e,r,n){var o=Ip(Op(t,e,r)),i=Ip(Op(t,e,n)),a=Ip(Op(r,n,t)),u=Ip(Op(r,n,e));return o!==i&&a!==u||(!(0!==o||!kp(t,r,e))||(!(0!==i||!kp(t,n,e))||(!(0!==a||!kp(r,t,n))||!(0!==u||!kp(r,e,n)))))}function kp(t,e,r){return e.x<=Math.max(t.x,r.x)&&e.x>=Math.min(t.x,r.x)&&e.y<=Math.max(t.y,r.y)&&e.y>=Math.min(t.y,r.y)}function Ip(t){return t>0?1:t<0?-1:0}function jp(t,e){return Op(t.prev,t,t.next)<0?Op(t,e,t.next)>=0&&Op(t,t.prev,e)>=0:Op(t,e,t.prev)<0||Op(t,t.next,e)<0}function Pp(t,e){var r=new Lp(t.i,t.x,t.y),n=new Lp(e.i,e.x,e.y),o=t.next,i=e.prev;return t.next=e,e.prev=t,r.next=o,o.prev=r,n.next=r,r.prev=n,i.next=n,n.prev=i,n}function _p(t,e,r,n){var o=new Lp(t,e,r);return n?(o.next=n.next,o.prev=n,n.next.prev=o,n.next=o):(o.prev=o,o.next=o),o}function Mp(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function Lp(t,e,r){this.i=t,this.x=e,this.y=r,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Rp(t,e,r,n){for(var o=0,i=e,a=r-n;i<r;i+=n)o+=(t[a]-t[i])*(t[i+1]+t[a+1]),a=i;return o}cp.deviation=function(t,e,r,n){var o=e&&e.length,i=o?e[0]*r:t.length,a=Math.abs(Rp(t,0,i,r));if(o)for(var u=0,s=e.length;u<s;u++){var c=e[u]*r,f=u<s-1?e[u+1]*r:t.length;a-=Math.abs(Rp(t,c,f,r))}var l=0;for(u=0;u<n.length;u+=3){var h=n[u]*r,p=n[u+1]*r,v=n[u+2]*r;l+=Math.abs((t[h]-t[v])*(t[p+1]-t[h+1])-(t[h]-t[p])*(t[v+1]-t[h+1]))}return 0===a&&0===l?0:Math.abs((l-a)/a)},cp.flatten=function(t){for(var e=t[0][0].length,r={vertices:[],holes:[],dimensions:e},n=0,o=0;o<t.length;o++){for(var i=0;i<t[o].length;i++)for(var a=0;a<e;a++)r.vertices.push(t[o][i][a]);o>0&&(n+=t[o-1].length,r.holes.push(n))}return r},up.default=sp;var Cp=R(1..valueOf),Np=R("".replace),Dp="[\\t\\n\\v\\f\\r \xa0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\\u2028\\u2029\\ufeff]",Fp=RegExp("^"+Dp+Dp+"*"),Wp=RegExp(Dp+Dp+"*$"),zp=function(t){return function(e){var r=rf(D(e));return 1&t&&(r=Np(r,Fp,"")),2&t&&(r=Np(r,Wp,"")),r}},Bp={start:zp(1),end:zp(2),trim:zp(3)},Up=qe.f,Gp=Ie.f,Hp=Ut.f,Vp=Bp.trim,qp=O.Number,Zp=qp.prototype,Yp=O.TypeError,$p=R("".slice),Kp=R("".charCodeAt),Qp=function(t){var e=Dt(t,"number");return"bigint"==typeof e?e:Xp(e)},Xp=function(t){var e,r,n,o,i,a,u,s,c=Dt(t,"number");if(It(c))throw Yp("Cannot convert a Symbol value to a number");if("string"==typeof c&&c.length>2)if(c=Vp(c),43===(e=Kp(c,0))||45===e){if(88===(r=Kp(c,2))||120===r)return NaN}else if(48===e){switch(Kp(c,1)){case 66:case 98:n=2,o=49;break;case 79:case 111:n=8,o=55;break;default:return+c}for(a=(i=$p(c,2)).length,u=0;u<a;u++)if((s=Kp(i,u))<48||s>o)return NaN;return parseInt(i,n)}return+c};if(nr("Number",!qp(" 0o1")||!qp("0b1")||qp("+0x1"))){for(var Jp,tv=function(t){var e=arguments.length<1?0:qp(Qp(t)),r=this;return Tt(Zp,r)&&j((function(){Cp(r)}))?ss(Object(e),r,tv):e},ev=pt?Up(qp):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range".split(","),rv=0;ev.length>rv;rv++)B(qp,Jp=ev[rv])&&!B(tv,Jp)&&Hp(tv,Jp,Gp(qp,Jp));tv.prototype=Zp,Zp.constructor=tv,le(O,"Number",tv,{constructor:!0})}var nv=RangeError,ov=RangeError,iv=String,av=Math.floor,uv=R((function(t){var e=rf(D(this)),r="",n=Me(t);if(n<0||n==1/0)throw nv("Wrong number of repetitions");for(;n>0;(n>>>=1)&&(e+=e))1&n&&(r+=e);return r})),sv=R("".slice),cv=R(1..toFixed),fv=function(t,e,r){return 0===e?r:e%2==1?fv(t,e-1,r*t):fv(t*t,e/2,r)},lv=function(t,e,r){for(var n=-1,o=r;++n<6;)o+=e*t[n],t[n]=o%1e7,o=av(o/1e7)},hv=function(t,e){for(var r=6,n=0;--r>=0;)n+=t[r],t[r]=av(n/e),n=n%e*1e7},pv=function(t){for(var e=6,r="";--e>=0;)if(""!==r||0===e||0!==t[e]){var n=iv(t[e]);r=""===r?n:r+uv("0",7-n.length)+n}return r},vv=j((function(){return"0.000"!==cv(8e-5,3)||"1"!==cv(.9,0)||"1.25"!==cv(1.255,2)||"1000000000000000128"!==cv(0xde0b6b3a7640080,0)}))||!j((function(){cv({})}));function dv(t){return"number"==typeof t}function yv(t){var e=Math.max(Math.min(85.0511287798,t[1]),-85.0511287798),r=Math.PI/180,n=t[0]*r,o=e*r;o=Math.log(Math.tan(Math.PI/4+o/2));return n=(256<<20)*(.5/Math.PI*n+.5),o=(256<<20)*(-.5/Math.PI*o+(r=.5)),[Math.floor(n),Math.floor(o)]}ir({target:"Number",proto:!0,forced:vv},{toFixed:function(t){var e,r,n,o,i=Cp(this),a=Me(t),u=[0,0,0,0,0,0],s="",c="0";if(a<0||a>20)throw ov("Incorrect fraction digits");if(i!=i)return"NaN";if(i<=-1e21||i>=1e21)return iv(i);if(i<0&&(s="-",i=-i),i>1e-21)if(r=(e=function(t){for(var e=0,r=t;r>=4096;)e+=12,r/=4096;for(;r>=2;)e+=1,r/=2;return e}(i*fv(2,69,1))-69)<0?i*fv(2,-e,1):i/fv(2,e,1),r*=4503599627370496,(e=52-e)>0){for(lv(u,0,r),n=a;n>=7;)lv(u,1e7,0),n-=7;for(lv(u,fv(10,n,1),0),n=e-1;n>=23;)hv(u,1<<23),n-=23;hv(u,1<<n),lv(u,1,1),hv(u,2),c=pv(u)}else lv(u,0,r),lv(u,1<<-e,0),c=pv(u)+uv("0",a);return c=a>0?s+((o=c.length)<=a?"0."+uv("0",a-o)+c:sv(c,0,o-a)+"."+sv(c,o-a)):s+c}});var gv,mv=/"/g,xv=R("".replace);ir({target:"String",proto:!0,forced:(gv="sub",j((function(){var t=""[gv](\'"\');return t!==t.toLowerCase()||t.split(\'"\').length>3})))},{sub:function(){return t="sub",e="",r="",n=rf(D(this)),o="<"+t,""!==e&&(o+=" "+e+\'="\'+xv(rf(r),mv,"&quot;")+\'"\'),o+">"+n+"</"+t+">";var t,e,r,n,o}});var bv=RegExp.prototype,wv=qt.PROPER,Ev=RegExp.prototype.toString,Av=j((function(){return"/a/b"!=Ev.call({source:"a",flags:"b"})})),Ov=wv&&"toString"!=Ev.name;(Av||Ov)&&le(RegExp.prototype,"toString",(function(){var t=At(this);return"/"+rf(t.source)+"/"+rf(function(t){var e=t.flags;return void 0!==e||"flags"in bv||B(t,"flags")||!Tt(bv,t)?e:St(nf,t)}(t))}),{unsafe:!0});var Sv="undefined"!=typeof Float32Array?Float32Array:Array;function Tv(){var t=new Sv(2);return Sv!=Float32Array&&(t[0]=0,t[1]=0),t}function kv(t,e){var r=new Sv(2);return r[0]=t,r[1]=e,r}function Iv(t,e){return t[0]=e[0],t[1]=e[1],t}function jv(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t}function Pv(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t}function _v(t,e){var r=e[0],n=e[1],o=r*r+n*n;return o>0&&(o=1/Math.sqrt(o)),t[0]=e[0]*o,t[1]=e[1]*o,t}function Mv(t,e){return t[0]*e[0]+t[1]*e[1]}Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});var Lv,Rv=Pv,Cv=(Lv=Tv(),Tv()),Nv=(Tv(),Tv()),Dv=Tv(),Fv=Tv();function Wv(t,e,r,n,o){return jv(t,r,n),_v(t,t),[o/Mv(e=kv(-t[1],t[0]),kv(-r[1],r[0])),e]}function zv(t,e){return function(t,e,r){return t[0]=e,t[1]=r,t}(t,-e[1],e[0])}function Bv(t,e,r){return Rv(t,e,r),_v(t,t),t}function Uv(t,e){return t[0]===e[0]&&t[1]===e[1]}var Gv=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,t),s(this,"complex",void 0),s(this,"join",void 0),s(this,"cap",void 0),s(this,"miterLimit",void 0),s(this,"thickness",void 0),s(this,"normal",void 0),s(this,"lastFlip",-1),s(this,"miter",kv(0,0)),s(this,"started",!1),s(this,"dash",!1),s(this,"totalDistance",0),s(this,"currentIndex",0),this.join=e.join||"miter",this.cap=e.cap||"butt",this.miterLimit=e.miterLimit||10,this.thickness=e.thickness||1,this.dash=e.dash||!1,this.complex={positions:[],indices:[],normals:[],startIndex:0,indexes:[]}}return u(t,[{key:"extrude_gaode2",value:function(t,e){var r=this.complex;if(t.length<=1)return r;this.lastFlip=-1,this.started=!1,this.normal=null,this.totalDistance=0;for(var n=t.length,o=r.startIndex,i=1;i<n;i++){var a,u,s,c=t[i-1];c.push(null!==(a=e[i-1][2])&&void 0!==a?a:0);var f=e[i-1],l=t[i];l.push(null!==(u=e[i][2])&&void 0!==u?u:0);var h=e[i],p=i<t.length-1?[].concat(y(t[i+1]),[null!==(s=e[i+1][2])&&void 0!==s?s:0]):null,v=i<e.length-1?e[i+1]:null;o+=this.segment_gaode2(r,o,c,l,p,f,h,v)}if(this.dash)for(var d=0;d<r.positions.length/6;d++)r.positions[6*d+5]=this.totalDistance;return r.startIndex=r.positions.length/6,r}},{key:"simpleExtrude_gaode2",value:function(t,e){var r=this.complex;if(t.length<=1)return r;this.lastFlip=-1,this.started=!1,this.normal=null,this.totalDistance=0;for(var n=t.length,o=r.startIndex,i=1;i<n;i++){var a,u,s,c=t[i-1];c.push(null!==(a=e[i-1][2])&&void 0!==a?a:0);var f=e[i-1],l=t[i];l.push(null!==(u=e[i][2])&&void 0!==u?u:0);var h=e[i],p=i<t.length-1?[].concat(y(t[i+1]),[null!==(s=e[i+1][2])&&void 0!==s?s:0]):null,v=i<e.length-1?e[i+1]:null;o+=this.simpleSegment(r,o,c,l,p,f,h,v)}if(this.dash)for(var d=0;d<r.positions.length/6;d++)r.positions[6*d+5]=this.totalDistance;return r.startIndex=r.positions.length/6,r}},{key:"extrude",value:function(t){var e=this.complex;if(t.length<=1)return e;this.lastFlip=-1,this.started=!1,this.normal=null,this.totalDistance=0;for(var r=t.length,n=e.startIndex,o=1;o<r;o++){var i=t[o-1],a=t[o],u=o<t.length-1?t[o+1]:null;n+=this.segment(e,n,i,a,u)}if(this.dash)for(var s=0;s<e.positions.length/6;s++)e.positions[6*s+5]=this.totalDistance;return e.startIndex=e.positions.length/6,e}},{key:"simpleExtrude",value:function(t){var e=this.complex;if(t.length<=1)return e;this.lastFlip=-1,this.started=!1,this.normal=null,this.totalDistance=0;for(var r=t.length,n=e.startIndex,o=1;o<r;o++){var i=t[o-1],a=t[o],u=o<t.length-1?t[o+1]:null;n+=this.simpleSegment(e,n,i,a,u)}if(this.dash)for(var s=0;s<e.positions.length/6;s++)e.positions[6*s+5]=this.totalDistance;return e.startIndex=e.positions.length/6,e}},{key:"segment_gaode2",value:function(t,e,r,n,o,i,a,u){var s=0,c=t.indices,f=t.positions,l=t.normals,h="square"===this.cap,p="bevel"===this.join,v=yv([a[0],a[1]]),g=yv([i[0],i[1]]);Bv(Nv,n,r);var m=0;if(this.dash&&(m=this.lineSegmentDistance(v,g),this.totalDistance+=m),this.normal||(this.normal=Tv(),zv(this.normal,Nv)),!this.started)if(this.started=!0,h){var x=Tv(),b=Tv();jv(x,this.normal,Nv),jv(b,this.normal,Nv),l.push(b[0],b[1],0),l.push(x[0],x[1],0),f.push(r[0],r[1],0|r[2],this.totalDistance-m,-this.thickness,0|r[2]),this.complex.indexes.push(this.currentIndex),f.push(r[0],r[1],0|r[2],this.totalDistance-m,this.thickness,0|r[2]),this.complex.indexes.push(this.currentIndex),this.currentIndex++}else this.extrusions(f,l,r,this.normal,this.thickness,this.totalDistance-m);if(c.push(e+0,e+1,e+2),o){Uv(n,o)&&jv(o,n,_v(o,Pv(o,n,r))),Bv(Dv,o,n);var w=d(Wv(Fv,Tv(),Nv,Dv,this.thickness),2),E=w[0],A=w[1],O=Mv(Fv,this.normal)<0?-1:1,S=p;if(!S&&"miter"===this.join)E>this.miterLimit&&(S=!0);S?(l.push(this.normal[0],this.normal[1],0),l.push(A[0],A[1],0),f.push(n[0],n[1],0|n[2],this.totalDistance,-this.thickness*O,0|n[2]),this.complex.indexes.push(this.currentIndex),f.push(n[0],n[1],0|n[2],this.totalDistance,this.thickness*O,0|n[2]),this.complex.indexes.push(this.currentIndex),this.currentIndex++,c.push.apply(c,y(this.lastFlip!==-O?[e,e+2,e+3]:[e+2,e+1,e+3])),c.push(e+2,e+3,e+4),zv(Cv,Dv),Iv(this.normal,Cv),l.push(this.normal[0],this.normal[1],0),f.push(n[0],n[1],0|n[2],this.totalDistance,-this.thickness*O,0|n[2]),this.complex.indexes.push(this.currentIndex),this.currentIndex++,s+=3):(this.extrusions(f,l,n,A,E,this.totalDistance),c.push.apply(c,y(1===this.lastFlip?[e,e+2,e+3]:[e+2,e+1,e+3])),O=-1,Iv(this.normal,A),s+=2),this.lastFlip=O}else{if(zv(this.normal,Nv),h){var T=Tv(),k=Tv();Rv(k,Nv,this.normal),jv(T,Nv,this.normal),l.push(k[0],k[1],0),l.push(T[0],T[1],0),f.push(n[0],n[1],0|n[2],this.totalDistance,this.thickness,0|n[2]),this.complex.indexes.push(this.currentIndex),f.push(n[0],n[1],0|n[2],this.totalDistance,this.thickness,0|n[2]),this.complex.indexes.push(this.currentIndex),this.currentIndex++}else this.extrusions(f,l,n,this.normal,this.thickness,this.totalDistance);c.push.apply(c,y(1===this.lastFlip?[e,e+2,e+3]:[e+2,e+1,e+3])),s+=2}return s}},{key:"simpleSegment",value:function(t,e,r,n,o){var i=0,a=t.indices,u=t.positions,s=t.normals,c=yv([n[0],n[1]]),f=yv([r[0],r[1]]);Bv(Nv,c,f);var l=0;if(this.dash&&(l=this.lineSegmentDistance(c,f),this.totalDistance+=l),this.normal||(this.normal=Tv(),zv(this.normal,Nv)),this.started||(this.started=!0,this.extrusions(u,s,r,this.normal,this.thickness,this.totalDistance-l)),a.push(e+0,e+1,e+2),o){var h=yv([o[0],o[1]]);Uv(c,h)&&jv(h,c,_v(h,Pv(h,c,f))),Bv(Dv,h,c);var p=d(Wv(Fv,Tv(),Nv,Dv,this.thickness),2),v=p[0],g=p[1];Mv(Fv,this.normal);this.extrusions(u,s,n,g,v,this.totalDistance),a.push.apply(a,y(1===this.lastFlip?[e,e+2,e+3]:[e+2,e+1,e+3])),-1,Iv(this.normal,g),i+=2,this.lastFlip=-1}else zv(this.normal,Nv),this.extrusions(u,s,n,this.normal,this.thickness,this.totalDistance),a.push.apply(a,y(1===this.lastFlip?[e,e+2,e+3]:[e+2,e+1,e+3])),i+=2;return i}},{key:"segment",value:function(t,e,r,n,o){var i=0,a=t.indices,u=t.positions,s=t.normals,c="square"===this.cap,f="bevel"===this.join,l=yv([n[0],n[1]]),h=yv([r[0],r[1]]);Bv(Nv,l,h);var p=0;if(this.dash&&(p=this.lineSegmentDistance(l,h),this.totalDistance+=p),this.normal||(this.normal=Tv(),zv(this.normal,Nv)),!this.started)if(this.started=!0,c){var v=Tv(),g=Tv();jv(v,this.normal,Nv),jv(g,this.normal,Nv),s.push(g[0],g[1],0),s.push(v[0],v[1],0),u.push(r[0],r[1],0|r[2],this.totalDistance-p,-this.thickness,0|r[2]),this.complex.indexes.push(this.currentIndex),u.push(r[0],r[1],0|r[2],this.totalDistance-p,this.thickness,0|r[2]),this.complex.indexes.push(this.currentIndex),this.currentIndex++}else this.extrusions(u,s,r,this.normal,this.thickness,this.totalDistance-p);if(a.push(e+0,e+1,e+2),o){var m=yv([o[0],o[1]]);Uv(l,m)&&jv(m,l,_v(m,Pv(m,l,h))),Bv(Dv,m,l);var x=d(Wv(Fv,Tv(),Nv,Dv,this.thickness),2),b=x[0],w=x[1],E=Mv(Fv,this.normal)<0?-1:1,A=f;if(!A&&"miter"===this.join)b>this.miterLimit&&(A=!0);A?(s.push(this.normal[0],this.normal[1],0),s.push(w[0],w[1],0),u.push(n[0],n[1],0|n[2],this.totalDistance,-this.thickness*E,0|n[2]),this.complex.indexes.push(this.currentIndex),u.push(n[0],n[1],0|n[2],this.totalDistance,this.thickness*E,0|n[2]),this.complex.indexes.push(this.currentIndex),this.currentIndex++,a.push.apply(a,y(this.lastFlip!==-E?[e,e+2,e+3]:[e+2,e+1,e+3])),a.push(e+2,e+3,e+4),zv(Cv,Dv),Iv(this.normal,Cv),s.push(this.normal[0],this.normal[1],0),u.push(n[0],n[1],0|n[2],this.totalDistance,-this.thickness*E,0|n[2]),this.complex.indexes.push(this.currentIndex),this.currentIndex++,i+=3):(this.extrusions(u,s,n,w,b,this.totalDistance),a.push.apply(a,y(1===this.lastFlip?[e,e+2,e+3]:[e+2,e+1,e+3])),E=-1,Iv(this.normal,w),i+=2),this.lastFlip=E}else{if(zv(this.normal,Nv),c){var O=Tv(),S=Tv();Rv(S,Nv,this.normal),jv(O,Nv,this.normal),s.push(S[0],S[1],0),s.push(O[0],O[1],0),u.push(n[0],n[1],0|n[2],this.totalDistance,this.thickness,0|n[2]),this.complex.indexes.push(this.currentIndex),u.push(n[0],n[1],0|n[2],this.totalDistance,this.thickness,0|n[2]),this.complex.indexes.push(this.currentIndex),this.currentIndex++}else this.extrusions(u,s,n,this.normal,this.thickness,this.totalDistance);a.push.apply(a,y(1===this.lastFlip?[e,e+2,e+3]:[e+2,e+1,e+3])),i+=2}return i}},{key:"extrusions",value:function(t,e,r,n,o,i){e.push(n[0],n[1],0),e.push(n[0],n[1],0),t.push(r[0],r[1],0|r[2],i,-o,0|r[2]),this.complex.indexes.push(this.currentIndex),t.push(r[0],r[1],0|r[2],i,o,0|r[2]),this.complex.indexes.push(this.currentIndex),this.currentIndex++}},{key:"lineSegmentDistance",value:function(t,e){var r=e[0]-t[0],n=e[1]-t[1];return Math.sqrt(r*r+n*n)}}]),t}();function Hv(t){var e=t.coordinates,r=t.originCoordinates,n=t.version,o=new Gv({dash:!0,join:"bevel"});if("GAODE2.x"===n){var i=e;Array.isArray(i[0][0])||(i=[e]);var a=r;Array.isArray(a[0][0])||(a=[r]);for(var u=0;u<i.length;u++){var s=i[u],c=a[u];o.extrude_gaode2(s,c)}}else{var f=e;f[0]&&!Array.isArray(f[0][0])&&(f=[e]),f.forEach((function(t){o.extrude(t)}))}var l=o.complex;return{vertices:l.positions,indices:l.indices,normals:l.normals,indexes:l.indexes,size:6}}function Vv(t){var e=function(t){if(dv(t[0]))return t;if(dv(t[0][0]))throw new Error("\u5f53\u524d\u6570\u636e\u4e0d\u652f\u6301\u6807\u6ce8");if(dv(t[0][0][0])){var e=0,r=0,n=0;return t.forEach((function(t){t.forEach((function(t){e+=t[0],r+=t[1],n++}))})),[e/n,r/n,0]}throw new Error("\u5f53\u524d\u6570\u636e\u4e0d\u652f\u6301\u6807\u6ce8")}(t.coordinates);return{vertices:[].concat(y(e),y(e),y(e),y(e)),indices:[0,1,2,2,3,0],size:e.length}}function qv(t){var e=t.coordinates,r=up.flatten(e),n=r.vertices,o=r.dimensions,i=r.holes;return{indices:up(n,i,o),vertices:n,size:o}}var Zv=function(){var t=o(r().mark((function t(e){var n,o,i,a,u,s,c,f,l;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.descriptors,o=e.features,i=e.enablePicking,a=e.iconMap,u={a_Color:np,a_Position:op,filter:ip,a_vertexId:ap,a_PickingColor:function(t){var e=t.id;return i?tp(e):[0,0,0]},a_DistanceAndIndex:function(t,e,r,n,o,i){return void 0===i?[r[3],10]:[r[3],i]},a_Total_Distance:function(t,e,r){return[r[5]]},a_Size:function(t){var e=t.size,r=void 0===e?1:e;return Array.isArray(r)?[r[0],r[1]]:[r,0]},a_Normal:function(t,e,r,n,o){return o},a_Miter:function(t,e,r){return[r[4]]},a_iconMapUV:function(t){var e=t.texture,r=a[e]||{x:0,y:0};return[r.x,r.y]}},s={sizePerElement:0,elements:[]},c=0,f=[],l=3,o.forEach((function(t,e){var r=Hv(t),o=r.indices,i=r.vertices,a=r.normals,h=r.size,p=r.indexes;o.forEach((function(t){f.push(t+c)})),l=h;var v=i.length/h;s.sizePerElement=l,s.elements.push({featureIdx:e,vertices:i,normals:a,offset:c}),c+=v;for(var d=function(r){var o=(null==a?void 0:a.slice(3*r,3*r+3))||[],s=i.slice(r*h,r*h+h),c=0;p&&void 0!==p[r]&&(c=p[r]),n.forEach((function(n){var i;n&&u[n.name]&&(i=n.buffer.data).push.apply(i,y(u[n.name](t,e,s,r,o,c)))}))},g=0;g<v;g++)d(g)})),t.abrupt("return",{descriptors:n,featureLayout:s,indices:f});case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),Yv={pointFill:function(){var t=o(r().mark((function t(e){var n,o,i,a,u,s,c,f,l;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.descriptors,o=e.features,i=e.enablePicking,a=e.shape2d,u={a_Color:np,a_Position:op,filter:ip,a_vertexId:ap,a_PickingColor:function(t){var e=t.id;return i?tp(e):[0,0,0]},a_Shape:function(t){var e=t.shape,r=void 0===e?2:e;return[a.indexOf(r)]},a_Extrude:function(t,e,r,n){var o=[1,1,0,-1,1,0,-1,-1,0,1,-1,0],i=n%4*3;return[o[i],o[i+1],o[i+2]]},a_Size:function(t){var e=t.size,r=void 0===e?5:e;return Array.isArray(r)?[r[0]]:[r]}},s={sizePerElement:0,elements:[]},c=0,f=[],l=3,o.forEach((function(t,e){var r=Vv(t),o=r.indices,i=r.vertices,a=r.normals,h=r.size;o.forEach((function(t){f.push(t+c)})),l=h;var p=i.length/h;s.sizePerElement=l,s.elements.push({featureIdx:e,vertices:i,normals:a,offset:c}),c+=p;for(var v=function(r){var o=[],a=i.slice(r*h,r*h+h);n.forEach((function(n){var i;n&&u[n.name]&&(i=n.buffer.data).push.apply(i,y(u[n.name](t,e,a,r,o,0)))}))},d=0;d<p;d++)v(d)})),t.abrupt("return",{descriptors:n,featureLayout:s,indices:f});case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),line:Zv,polygonFill:function(){var t=o(r().mark((function t(e){var n,o,i,a,u,s,c,f;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.descriptors,o=e.features,i=e.enablePicking,a={a_Color:np,a_Position:op,filter:ip,a_vertexId:ap,a_PickingColor:function(t){var e=t.id;return i?tp(e):[0,0,0]}},u={sizePerElement:0,elements:[]},s=0,c=[],f=3,o.forEach((function(t,e){var r=qv(t),o=r.indices,i=r.vertices,l=r.normals,h=r.size;o.forEach((function(t){c.push(t+s)})),f=h;var p=i.length/h;u.sizePerElement=f,u.elements.push({featureIdx:e,vertices:i,normals:l,offset:s}),s+=p;for(var v=function(r){var o=[],u=i.slice(r*h,r*h+h);n.forEach((function(n){var i;n&&a[n.name]&&(i=n.buffer.data).push.apply(i,y(a[n.name](t,e,u,r,o,0)))}))},d=0;d<p;d++)v(d)})),t.abrupt("return",{descriptors:n,featureLayout:u,indices:c});case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},$v=function(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?e(Object(n),!0).forEach((function(e){s(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):e(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},Yv);function Kv(t){return Qv.apply(this,arguments)}function Qv(){return(Qv=o(r().mark((function t(e){var n,o;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.workerType,o=e.data,!$v[n]){t.next=3;break}return t.abrupt("return",$v[n](o));case 3:return t.abrupt("return",Promise.reject(new Error(\'Worker with type "\'.concat(n,\'" non-existent.\'))));case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return fi(Kv),t.WorkerSourceMap=Yv,t.createWorker=fi,t.worker=Kv,t}({});\n',jc="l7-worker",Ic=3,Lc=!0;function Nc(t){Mc(jc,t)}function Dc(){var t=Pc(jc);if(!t)throw new Error("get worker failed by workerName: ".concat(jc,"."));return t}function Fc(t,e){return Bc.apply(this,arguments)}function Bc(){return Bc=Object(mi["a"])(_i.a.mark((function t(e,n){var r,i,o,a,s;return _i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=Dc(),i=Gi.getWorkerFarm({maxConcurrency:Ic,reuseWorkers:Lc}),o=i.getWorkerPool({name:jc,source:r}),t.next=5,o.startJob(jc,(function(t,e,n){return t.done(n)}));case 5:return a=t.sent,a.postMessage("process",{input:{workerType:e,data:n}}),t.next=9,a.result;case 9:return s=t.sent,t.abrupt("return",s.result);case 11:case"end":return t.stop()}}),t)}))),Bc.apply(this,arguments)}Nc(Rc);var zc={BACK:1029,FRONT:1028};function Uc(t){switch(t){case"GAODE1.x":return zc.BACK;case"GAODE2.x":return zc.BACK;case"MAPBOX":return zc.FRONT;case"SIMPLE":return zc.FRONT;case"GLOBEL":return zc.BACK;case"DEBAULT":return zc.FRONT;default:return zc.FRONT}}function Vc(t){return"undefined"!==typeof ImageBitmap&&t instanceof ImageBitmap}function Hc(){return"function"===typeof importScripts}var Gc,Wc;Hc();(function(t){t["Realtime"]="realtime",t["Overlap"]="overlap",t["Replace"]="replace"})(Gc||(Gc={})),function(t){t["Loading"]="Loading",t["Loaded"]="Loaded",t["Failure"]="Failure",t["Cancelled"]="Cancelled"}(Wc||(Wc={}));var Zc,Yc=0,Xc=1,qc=2;function Kc(t){t.forEach((function(t){t.isCurrent&&(t.isVisible=t.isLoaded)}))}function Qc(t){t.forEach((function(t){t.properties.state=Yc})),t.forEach((function(t){t.isCurrent&&!Jc(t)&&tl(t)})),t.forEach((function(t){t.isVisible=Boolean(t.properties.state&qc)}))}function $c(t){t.forEach((function(t){t.properties.state=Yc})),t.forEach((function(t){t.isCurrent&&Jc(t)}));var e=t.slice().sort((function(t,e){return t.z-e.z}));e.forEach((function(t){t.isVisible=Boolean(t.properties.state&qc),t.children.length&&(t.isVisible||t.properties.state&Xc)?t.children.forEach((function(t){t.properties.state=Xc})):t.isCurrent&&tl(t)}))}function Jc(t){while(t){if(t.isLoaded)return t.properties.state|=qc,!0;t=t.parent}return!1}function tl(t){t.children.forEach((function(t){t.isLoaded?t.properties.state|=qc:tl(t)}))}var el=[-1/0,-1/0,1/0,1/0],nl=.2,rl=5,il=(Zc={},Object(Ar["a"])(Zc,Gc.Realtime,Kc),Object(Ar["a"])(Zc,Gc.Overlap,Qc),Object(Ar["a"])(Zc,Gc.Replace,$c),Zc),ol=function(){};function al(t,e,n){var r=Math.floor((t+180)/360*Math.pow(2,n)),i=Math.floor((1-Math.log(Math.tan(e*Math.PI/180)+1/Math.cos(e*Math.PI/180))/Math.PI)/2*Math.pow(2,n));return[r,i]}function sl(t,e,n){var r=t/Math.pow(2,n)*360-180,i=Math.PI-2*Math.PI*e/Math.pow(2,n),o=180/Math.PI*Math.atan(.5*(Math.exp(i)-Math.exp(-i)));return[r,o]}var ul=function(t,e,n){var r=sl(t,e,n),i=Object(q["a"])(r,2),o=i[0],a=i[1],s=sl(t+1,e+1,n),u=Object(q["a"])(s,2),c=u[0],l=u[1];return[o,l,c,a]};function cl(t){var e=t.zoom,n=t.latLonBounds,r=t.maxZoom,i=void 0===r?1/0:r,o=t.minZoom,a=void 0===o?0:o,s=t.zoomOffset,u=void 0===s?0:s,c=t.extent,l=void 0===c?el:c,f=Math.ceil(e)+u;if(Number.isFinite(a)&&f<a)return[];Number.isFinite(i)&&f>i&&(f=i);for(var h=Object(q["a"])(n,4),p=h[0],d=h[1],v=h[2],g=h[3],m=[Math.max(p,l[0]),Math.max(d,l[1]),Math.min(v,l[2]),Math.min(g,l[3])],y=[],_=al(m[0],m[1],f),b=Object(q["a"])(_,2),x=b[0],w=b[1],E=al(m[2],m[3],f),S=Object(q["a"])(E,2),O=S[0],C=S[1],T=x;T<=O;T++)for(var A=C;A<=w;A++)y.push({x:T,y:A,z:f});var k=(O+x)/2,M=(w+C)/2,P=function(t,e){return Math.abs(t-k)+Math.abs(e-M)};return y.sort((function(t,e){return P(t.x,t.y)-P(e.x,e.y)})),y}var ll=function(t,e,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=Math.pow(2,n),o=i-1,a=i,s=t,u=e;return r&&(s<0?s+=a:s>o&&(s%=a)),{warpX:s,warpY:u}};function fl(t){var e=[],n=/\{([a-z])-([a-z])\}/.exec(t);if(n){var r,i=n[1].charCodeAt(0),o=n[2].charCodeAt(0);for(r=i;r<=o;++r)e.push(t.replace(n[0],String.fromCharCode(r)));return e}if(n=/\{(\d+)-(\d+)\}/.exec(t),n){for(var a=parseInt(n[2],10),s=parseInt(n[1],10);s<=a;s++)e.push(t.replace(n[0],s.toString()));return e}return e.push(t),e}function hl(t,e){if(!t||!t.length)throw new Error("url is not allowed to be empty");var n=e.x,r=e.y,i=e.z,o=fl(t),a=Math.abs(n+r)%o.length,s=o[a];return s.replace(/\{x\}/g,n.toString()).replace(/\{y\}/g,r.toString()).replace(/\{z\}/g,i.toString()).replace(/\{bbox\}/g,ul(n,r,i).join(",")).replace(/\{-y\}/g,(Math.pow(2,i)-r-1).toString())}function pl(t,e){var n=e.x,r=e.y,i=e.z,o=e.layer,a=e.version,s=void 0===a?"1.0.0":a,u=e.style,c=void 0===u?"default":u,l=e.format,f=e.service,h=void 0===f?"WMTS":f,p=e.tileMatrixset,d="".concat(t,"&SERVICE=").concat(h,"&REQUEST=GetTile&VERSION=").concat(s,"&LAYER=").concat(o,"&STYLE=").concat(c,"&TILEMATRIXSET=").concat(p,"&FORMAT=").concat(l,"&TILECOL=").concat(n,"&TILEROW=").concat(r,"&TILEMATRIX=").concat(i);return d}function dl(t,e){void 0===e&&(e={});var n=Number(t[0]),r=Number(t[1]),i=Number(t[2]),o=Number(t[3]);if(6===t.length)throw new Error("@turf/bbox-polygon does not support BBox with 6 positions");var a=[n,r],s=[n,o],u=[i,o],c=[i,r];return L([[a,c,u,s,a]],e.properties,{bbox:t,id:e.id})}var vl=n("uhBA"),gl=n.n(vl);function ml(t){var e=yl();return function(){var n,r=Object(ct["a"])(t);if(e){var i=Object(ct["a"])(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(ut["a"])(this,n)}}function yl(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}var _l=function(t){Object(st["a"])(n,t);var e=ml(n);function n(t){var r;Object(et["a"])(this,n),r=e.call(this),Object(Ar["a"])(Object(ft["a"])(r),"tileSize",256),Object(Ar["a"])(Object(ft["a"])(r),"isVisible",!1),Object(Ar["a"])(Object(ft["a"])(r),"isCurrent",!1),Object(Ar["a"])(Object(ft["a"])(r),"isVisibleChange",!1),Object(Ar["a"])(Object(ft["a"])(r),"loadedLayers",0),Object(Ar["a"])(Object(ft["a"])(r),"isLayerLoaded",!1),Object(Ar["a"])(Object(ft["a"])(r),"isLoad",!1),Object(Ar["a"])(Object(ft["a"])(r),"isChildLoad",!1),Object(Ar["a"])(Object(ft["a"])(r),"parent",null),Object(Ar["a"])(Object(ft["a"])(r),"children",[]),Object(Ar["a"])(Object(ft["a"])(r),"data",null),Object(Ar["a"])(Object(ft["a"])(r),"properties",{}),Object(Ar["a"])(Object(ft["a"])(r),"loadDataId",0);var i=t.x,o=t.y,a=t.z,s=t.tileSize,u=t.warp,c=void 0===u||u;return r.x=i,r.y=o,r.z=a,r.warp=c||!0,r.tileSize=s,r}return Object(nt["a"])(n,[{key:"isLoading",get:function(){return this.loadStatus===Wc.Loading}},{key:"isLoaded",get:function(){return this.loadStatus===Wc.Loaded}},{key:"isFailure",get:function(){return this.loadStatus===Wc.Failure}},{key:"setTileLayerLoaded",value:function(){this.isLayerLoaded=!0}},{key:"isCancelled",get:function(){return this.loadStatus===Wc.Cancelled}},{key:"isDone",get:function(){return[Wc.Loaded,Wc.Cancelled,Wc.Failure].includes(this.loadStatus)}},{key:"bounds",get:function(){return ul(this.x,this.y,this.z)}},{key:"bboxPolygon",get:function(){var t=Object(q["a"])(this.bounds,4),e=t[0],n=t[1],r=t[2],i=t[3],o=[(r-e)/2,(i-n)/2],a=dl(this.bounds,{properties:{key:this.key,id:this.key,bbox:this.bounds,center:o,meta:"\n      ".concat(this.key,"\n      ")}});return a}},{key:"key",get:function(){var t="".concat(this.x,"_").concat(this.y,"_").concat(this.z);return t}},{key:"layerLoad",value:function(){this.loadedLayers++,this.emit("layerLoaded")}},{key:"loadData",value:function(){var t=Object(mi["a"])(_i.a.mark((function t(e){var n,r,i,o,a,s,u,c,l,f,h,p,d,v,g,m,y;return _i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.getData,r=e.onLoad,i=e.onError,this.loadDataId++,o=this.loadDataId,this.isLoading&&this.abortLoad(),this.abortController=new AbortController,this.loadStatus=Wc.Loading,a=null,t.prev=7,u=this.x,c=this.y,l=this.z,f=this.bounds,h=this.tileSize,p=this.warp,d=ll(u,c,l,p),v=d.warpX,g=d.warpY,m=this.abortController.signal,y={x:v,y:g,z:l,bounds:f,tileSize:h,signal:m,warp:p},t.next=14,n(y,this);case 14:a=t.sent,t.next=20;break;case 17:t.prev=17,t.t0=t["catch"](7),s=t.t0;case 20:if(o===this.loadDataId){t.next=22;break}return t.abrupt("return");case 22:if(!this.isCancelled||a){t.next=24;break}return t.abrupt("return");case 24:if(!s&&a){t.next=28;break}return this.loadStatus=Wc.Failure,i(s,this),t.abrupt("return");case 28:this.loadStatus=Wc.Loaded,this.data=a,r(this);case 31:case"end":return t.stop()}}),t,this,[[7,17]])})));function e(e){return t.apply(this,arguments)}return e}()},{key:"reloadData",value:function(t){this.isLoading&&this.abortLoad(),this.loadData(t)}},{key:"abortLoad",value:function(){this.isLoaded||this.isCancelled||(this.loadStatus=Wc.Cancelled,this.abortController.abort(),this.xhrCancel&&this.xhrCancel())}}]),n}(vl["EventEmitter"]),bl=function(t,e){var n=xr(t),r=_r(n,e),i=900,o=85.0511287798065,a=[Math.max(r[0][0],-i),Math.max(r[0][1],-o),Math.min(r[1][0],i),Math.min(r[1][1],o)];return a},xl=function(t,e){var n=xr(t),r=xr(e),i=br(n,r);return i};function wl(t,e){var n="undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=El(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n["return"]||n["return"]()}finally{if(s)throw o}}}}function El(t,e){if(t){if("string"===typeof t)return Sl(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Sl(t,e):void 0}}function Sl(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Ol(t){var e=Cl();return function(){var n,r=Object(ct["a"])(t);if(e){var i=Object(ct["a"])(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(ut["a"])(this,n)}}function Cl(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}var Tl,Al=function(t){Object(st["a"])(n,t);var e=Ol(n);function n(t){var r;return Object(et["a"])(this,n),r=e.call(this),Object(Ar["a"])(Object(ft["a"])(r),"currentTiles",[]),Object(Ar["a"])(Object(ft["a"])(r),"cacheTiles",new Map),Object(Ar["a"])(Object(ft["a"])(r),"throttleUpdate",Object(K["throttle"])((function(t,e){r.update(t,e)}),16)),Object(Ar["a"])(Object(ft["a"])(r),"onTileLoad",(function(t){r.emit("tile-loaded",t),r.updateTileVisible()})),Object(Ar["a"])(Object(ft["a"])(r),"onTileError",(function(t,e){r.emit("tile-error",{error:t,tile:e}),r.updateTileVisible()})),Object(Ar["a"])(Object(ft["a"])(r),"onTileUnload",(function(t){r.emit("tile-unload",t)})),r.options={tileSize:256,minZoom:0,maxZoom:1/0,zoomOffset:0,extent:el,getTileData:ol,warp:!0,updateStrategy:Gc.Overlap},r.updateOptions(t),r}return Object(nt["a"])(n,[{key:"isLoaded",get:function(){return this.currentTiles.every((function(t){return t.isDone}))}},{key:"tiles",get:function(){var t=Array.from(this.cacheTiles.values()).sort((function(t,e){return t.z-e.z}));return t}},{key:"updateOptions",value:function(t){var e=void 0===t.minZoom?this.options.minZoom:Math.ceil(t.minZoom),n=void 0===t.maxZoom?this.options.maxZoom:Math.floor(t.maxZoom);this.options=Object(P["a"])(Object(P["a"])(Object(P["a"])({},this.options),t),{},{minZoom:e,maxZoom:n})}},{key:"update",value:function(t,e){var n=this,r=Math.max(0,Math.ceil(t));if(!this.lastViewStates||this.lastViewStates.zoom!==r||!xl(this.lastViewStates.latLonBoundsBuffer,e)){var i=bl(e,nl);this.lastViewStates={zoom:r,latLonBounds:e,latLonBoundsBuffer:i};var o=!1,a=this.getTileIndices(r,i).filter((function(t){return n.options.warp||t.x>=0&&t.x<Math.pow(2,r)}));this.currentTiles=a.map((function(t){var e=t.x,r=t.y,i=t.z,a=n.getTile(e,r,i);if(a){var s,u,c=(null===(s=a)||void 0===s?void 0:s.isFailure)||(null===(u=a)||void 0===u?void 0:u.isCancelled);return c&&a.loadData({getData:n.options.getTileData,onLoad:n.onTileLoad,onError:n.onTileError}),a}return a=n.createTile(e,r,i),o=!0,a})),o&&this.resizeCacheTiles(),this.updateTileVisible(),this.pruneRequests()}}},{key:"reloadAll",value:function(){var t,e=wl(this.cacheTiles);try{for(e.s();!(t=e.n()).done;){var n=Object(q["a"])(t.value,2),r=n[0],i=n[1];this.currentTiles.includes(i)||(this.cacheTiles["delete"](r),this.onTileUnload(i)),this.onTileUnload(i),i.loadData({getData:this.options.getTileData,onLoad:this.onTileLoad,onError:this.onTileError})}}catch(o){e.e(o)}finally{e.f()}}},{key:"pruneRequests",value:function(){var t,e=[],n=wl(this.cacheTiles.values());try{for(n.s();!(t=n.n()).done;){var r=t.value;r.isLoading&&(r.isCurrent||r.isVisible||e.push(r))}}catch(o){n.e(o)}finally{n.f()}while(e.length>0){var i=e.shift();i.abortLoad()}}},{key:"getTileByLngLat",value:function(t,e,n){var r=this.options.zoomOffset,i=Math.ceil(n)+r,o=al(t,e,i),a=this.tiles.filter((function(t){return t.key==="".concat(o[0],"_").concat(o[1],"_").concat(i)}));return a[0]}},{key:"destroy",value:function(){var t,e=wl(this.cacheTiles.values());try{for(e.s();!(t=e.n()).done;){var n=t.value;n.isLoading&&n.abortLoad()}}catch(r){e.e(r)}finally{e.f()}this.cacheTiles.clear(),this.currentTiles=[],this.removeAllListeners()}},{key:"updateTileVisible",value:function(){var t,e=this.options.updateStrategy,n=new Map,r=wl(this.cacheTiles.values());try{for(r.s();!(t=r.n()).done;){var i=t.value;n.set(i.key,i.isVisible),i.isCurrent=!1,i.isVisible=!1}}catch(l){r.e(l)}finally{r.f()}var o,a=wl(this.currentTiles);try{for(a.s();!(o=a.n()).done;){var s=o.value;s.isCurrent=!0,s.isVisible=!0}}catch(l){a.e(l)}finally{a.f()}var u=Array.from(this.cacheTiles.values());"function"===typeof e?e(u):il[e](u);var c=!1;Array.from(this.cacheTiles.values()).forEach((function(t){t.isVisible!==n.get(t.key)?(t.isVisibleChange=!0,c=!0):t.isVisibleChange=!1})),c&&this.emit("tile-update")}},{key:"getTileIndices",value:function(t,e){var n=this.options,r=n.tileSize,i=n.extent,o=n.zoomOffset,a=Math.floor(this.options.maxZoom),s=Math.ceil(this.options.minZoom),u=cl({maxZoom:a,minZoom:s,zoomOffset:o,tileSize:r,zoom:t,latLonBounds:e,extent:i});return u}},{key:"getTileId",value:function(t,e,n){var r="".concat(t,",").concat(e,",").concat(n);return r}},{key:"getTile",value:function(t,e,n){var r=this.getTileId(t,e,n),i=this.cacheTiles.get(r);return i}},{key:"createTile",value:function(t,e,n){var r=this.getTileId(t,e,n),i=new _l({x:t,y:e,z:n,tileSize:this.options.tileSize,warp:this.options.warp});return this.cacheTiles.set(r,i),i.loadData({getData:this.options.getTileData,onLoad:this.onTileLoad,onError:this.onTileError}),i}},{key:"resizeCacheTiles",value:function(){var t=rl*this.currentTiles.length,e=this.cacheTiles.size>t;if(e){var n,r=wl(this.cacheTiles);try{for(r.s();!(n=r.n()).done;){var i=Object(q["a"])(n.value,2),o=i[0],a=i[1];if(a.isVisible||this.currentTiles.includes(a)||(this.cacheTiles["delete"](o),this.onTileUnload(a)),this.cacheTiles.size<=t)break}}catch(s){r.e(s)}finally{r.f()}}this.rebuildTileTree()}},{key:"rebuildTileTree",value:function(){var t,e=wl(this.cacheTiles.values());try{for(e.s();!(t=e.n()).done;){var n=t.value;n.parent=null,n.children.length=0}}catch(s){e.e(s)}finally{e.f()}var r,i=wl(this.cacheTiles.values());try{for(i.s();!(r=i.n()).done;){var o=r.value,a=this.getNearestAncestor(o.x,o.y,o.z);o.parent=a,null!==a&&void 0!==a&&a.children&&a.children.push(o)}}catch(s){i.e(s)}finally{i.f()}}},{key:"getNearestAncestor",value:function(t,e,n){while(n>this.options.minZoom){t=Math.floor(t/2),e=Math.floor(e/2),n-=1;var r=this.getTile(t,e,n);if(r)return r}return null}}]),n}(gl.a);function kl(t,e){var n=e.extent,r=void 0===n?[121.168,30.2828,121.384,30.4219]:n,i=new Promise((function(e){t instanceof HTMLImageElement||Vc(t)?e([t]):Ml(t,(function(t){e(t)}))})),o={originData:t,images:i,_id:1,dataArray:[{_id:0,coordinates:[[r[0],r[1]],[r[2],r[3]]]}]};return o}function Ml(t,e){var n=t,r=[];if("string"===typeof n)ar({url:n},(function(t,n){n&&(r.push(n),e(r))}));else{var i=n.length,o=0;n.forEach((function(t){ar({url:t},(function(t,n){o++,n&&r.push(n),o===i&&e(r)}))}))}return kl}(function(t){t["GAODE1.x"]="GAODE1.x",t["GAODE2.x"]="GAODE2.x",t["MAPBOX"]="MAPBOX",t["DEFAULT"]="DEFAUlTMAP",t["SIMPLE"]="SIMPLE",t["GLOBEL"]="GLOBEL"})(Tl||(Tl={}));var Pl=n("dA7e"),Rl=n("eRUA"),jl=n.n(Rl),Il=function(){function t(e,n,r,i){Object(et["a"])(this,t),Object(Ar["a"])(this,"vectorLayerCache",{}),this.x=n,this.y=r,this.z=i,this.vectorTile=new Pl["VectorTile"](new jl.a(e))}return Object(nt["a"])(t,[{key:"getTileData",value:function(t){if(!t||!this.vectorTile.layers[t])return[];if(this.vectorLayerCache[t])return this.vectorLayerCache[t];var e=this.vectorTile.layers[t];if(Array.isArray(e.features))return this.vectorLayerCache[t]=e.features,e.features;for(var n=[],r=0;r<e.length;r++){var i=e.feature(r),o=i.toGeoJSON(this.x,this.y,this.z);n.push(Object(P["a"])(Object(P["a"])({},o),{},{properties:Object(P["a"])({id:o.id},o.properties)}))}return this.vectorLayerCache[t]=n,n}},{key:"getFeatureById",value:function(){throw new Error("Method not implemented.")}}]),t}(),Ll={tileSize:256,minZoom:0,maxZoom:1/0,zoomOffset:0,warp:!0},Nl=function(){var t=Object(mi["a"])(_i.a.mark((function t(e,n,r,i){var o;return _i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return o=hl(e,n),t.abrupt("return",new Promise((function(t){var e=nr(Object(P["a"])(Object(P["a"])({},i),{},{url:o}),(function(e,n){if(e||!n)t(void 0);else{var i=new Il(n,r.x,r.y,r.z);t(i)}}));r.xhrCancel=function(){return e.abort()}})));case 2:case"end":return t.stop()}}),t)})));return function(e,n,r,i){return t.apply(this,arguments)}}();function Dl(t,e){var n=Array.isArray(t)?t[0]:t,r=function(t,r){return Nl(n,t,r,null===e||void 0===e?void 0:e.requestParameters)},i=Object(P["a"])(Object(P["a"])(Object(P["a"])({},Ll),e),{},{getTileData:r});return{data:n,dataArray:[],tilesetOptions:i,isTile:!0}}function Fl(t,e,n,r){for(var i,o=r,a=n-e>>1,s=n-e,u=t[e],c=t[e+1],l=t[n],f=t[n+1],h=e+3;h<n;h+=3){var p=Bl(t[h],t[h+1],u,c,l,f);if(p>o)i=h,o=p;else if(p===o){var d=Math.abs(h-a);d<s&&(i=h,s=d)}}o>r&&(i-e>3&&Fl(t,e,i,r),t[i+2]=o,n-i>3&&Fl(t,i,n,r))}function Bl(t,e,n,r,i,o){var a=i-n,s=o-r;if(0!==a||0!==s){var u=((t-n)*a+(e-r)*s)/(a*a+s*s);u>1?(n=i,r=o):u>0&&(n+=a*u,r+=s*u)}return a=t-n,s=e-r,a*a+s*s}function zl(t,e,n,r){var i={id:"undefined"===typeof t?null:t,type:e,geometry:n,tags:r,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return Ul(i),i}function Ul(t){var e=t.geometry,n=t.type;if("Point"===n||"MultiPoint"===n||"LineString"===n)Vl(t,e);else if("Polygon"===n||"MultiLineString"===n)for(var r=0;r<e.length;r++)Vl(t,e[r]);else if("MultiPolygon"===n)for(r=0;r<e.length;r++)for(var i=0;i<e[r].length;i++)Vl(t,e[r][i])}function Vl(t,e){for(var n=0;n<e.length;n+=3)t.minX=Math.min(t.minX,e[n]),t.minY=Math.min(t.minY,e[n+1]),t.maxX=Math.max(t.maxX,e[n]),t.maxY=Math.max(t.maxY,e[n+1])}function Hl(t,e){var n=[];if("FeatureCollection"===t.type)for(var r=0;r<t.features.length;r++)Gl(n,t.features[r],e,r);else"Feature"===t.type?Gl(n,t,e):Gl(n,{geometry:t},e);return n}function Gl(t,e,n,r){if(e.geometry){var i=e.geometry.coordinates,o=e.geometry.type,a=Math.pow(n.tolerance/((1<<n.maxZoom)*n.extent),2),s=[],u=e.id;if(n.promoteId?u=e.properties[n.promoteId]:n.generateId&&(u=r||0),"Point"===o)Wl(i,s);else if("MultiPoint"===o)for(var c=0;c<i.length;c++)Wl(i[c],s);else if("LineString"===o)Zl(i,s,a,!1);else if("MultiLineString"===o){if(n.lineMetrics){for(c=0;c<i.length;c++)s=[],Zl(i[c],s,a,!1),t.push(zl(u,"LineString",s,e.properties));return}Yl(i,s,a,!1)}else if("Polygon"===o)Yl(i,s,a,!0);else{if("MultiPolygon"!==o){if("GeometryCollection"===o){for(c=0;c<e.geometry.geometries.length;c++)Gl(t,{id:u,geometry:e.geometry.geometries[c],properties:e.properties},n,r);return}throw new Error("Input data is not a valid GeoJSON object.")}for(c=0;c<i.length;c++){var l=[];Yl(i[c],l,a,!0),s.push(l)}}t.push(zl(u,o,s,e.properties))}}function Wl(t,e){e.push(Xl(t[0])),e.push(ql(t[1])),e.push(0)}function Zl(t,e,n,r){for(var i,o,a=0,s=0;s<t.length;s++){var u=Xl(t[s][0]),c=ql(t[s][1]);e.push(u),e.push(c),e.push(0),s>0&&(a+=r?(i*c-u*o)/2:Math.sqrt(Math.pow(u-i,2)+Math.pow(c-o,2))),i=u,o=c}var l=e.length-3;e[2]=1,Fl(e,0,l,n),e[l+2]=1,e.size=Math.abs(a),e.start=0,e.end=e.size}function Yl(t,e,n,r){for(var i=0;i<t.length;i++){var o=[];Zl(t[i],o,n,r),e.push(o)}}function Xl(t){return t/360+.5}function ql(t){var e=Math.sin(t*Math.PI/180),n=.5-.25*Math.log((1+e)/(1-e))/Math.PI;return n<0?0:n>1?1:n}function Kl(t,e,n,r,i,o,a,s){if(n/=e,r/=e,o>=n&&a<r)return t;if(a<n||o>=r)return null;for(var u=[],c=0;c<t.length;c++){var l=t[c],f=l.geometry,h=l.type,p=0===i?l.minX:l.minY,d=0===i?l.maxX:l.maxY;if(p>=n&&d<r)u.push(l);else if(!(d<n||p>=r)){var v=[];if("Point"===h||"MultiPoint"===h)Ql(f,v,n,r,i);else if("LineString"===h)$l(f,v,n,r,i,!1,s.lineMetrics);else if("MultiLineString"===h)tf(f,v,n,r,i,!1);else if("Polygon"===h)tf(f,v,n,r,i,!0);else if("MultiPolygon"===h)for(var g=0;g<f.length;g++){var m=[];tf(f[g],m,n,r,i,!0),m.length&&v.push(m)}if(v.length){if(s.lineMetrics&&"LineString"===h){for(g=0;g<v.length;g++)u.push(zl(l.id,h,v[g],l.tags));continue}"LineString"!==h&&"MultiLineString"!==h||(1===v.length?(h="LineString",v=v[0]):h="MultiLineString"),"Point"!==h&&"MultiPoint"!==h||(h=3===v.length?"Point":"MultiPoint"),u.push(zl(l.id,h,v,l.tags))}}}return u.length?u:null}function Ql(t,e,n,r,i){for(var o=0;o<t.length;o+=3){var a=t[o+i];a>=n&&a<=r&&(e.push(t[o]),e.push(t[o+1]),e.push(t[o+2]))}}function $l(t,e,n,r,i,o,a){for(var s,u,c=Jl(t),l=0===i?nf:rf,f=t.start,h=0;h<t.length-3;h+=3){var p=t[h],d=t[h+1],v=t[h+2],g=t[h+3],m=t[h+4],y=0===i?p:d,_=0===i?g:m,b=!1;a&&(s=Math.sqrt(Math.pow(p-g,2)+Math.pow(d-m,2))),y<n?_>n&&(u=l(c,p,d,g,m,n),a&&(c.start=f+s*u)):y>r?_<r&&(u=l(c,p,d,g,m,r),a&&(c.start=f+s*u)):ef(c,p,d,v),_<n&&y>=n&&(u=l(c,p,d,g,m,n),b=!0),_>r&&y<=r&&(u=l(c,p,d,g,m,r),b=!0),!o&&b&&(a&&(c.end=f+s*u),e.push(c),c=Jl(t)),a&&(f+=s)}var x=t.length-3;p=t[x],d=t[x+1],v=t[x+2],y=0===i?p:d,y>=n&&y<=r&&ef(c,p,d,v),x=c.length-3,o&&x>=3&&(c[x]!==c[0]||c[x+1]!==c[1])&&ef(c,c[0],c[1],c[2]),c.length&&e.push(c)}function Jl(t){var e=[];return e.size=t.size,e.start=t.start,e.end=t.end,e}function tf(t,e,n,r,i,o){for(var a=0;a<t.length;a++)$l(t[a],e,n,r,i,o,!1)}function ef(t,e,n,r){t.push(e),t.push(n),t.push(r)}function nf(t,e,n,r,i,o){var a=(o-e)/(r-e);return t.push(o),t.push(n+(i-n)*a),t.push(1),a}function rf(t,e,n,r,i,o){var a=(o-n)/(i-n);return t.push(e+(r-e)*a),t.push(o),t.push(1),a}function of(t,e){var n=e.buffer/e.extent,r=t,i=Kl(t,1,-1-n,n,0,-1,2,e),o=Kl(t,1,1-n,2+n,0,-1,2,e);return(i||o)&&(r=Kl(t,1,-n,1+n,0,-1,2,e)||[],i&&(r=af(i,1).concat(r)),o&&(r=r.concat(af(o,-1)))),r}function af(t,e){for(var n=[],r=0;r<t.length;r++){var i,o=t[r],a=o.type;if("Point"===a||"MultiPoint"===a||"LineString"===a)i=sf(o.geometry,e);else if("MultiLineString"===a||"Polygon"===a){i=[];for(var s=0;s<o.geometry.length;s++)i.push(sf(o.geometry[s],e))}else if("MultiPolygon"===a)for(i=[],s=0;s<o.geometry.length;s++){for(var u=[],c=0;c<o.geometry[s].length;c++)u.push(sf(o.geometry[s][c],e));i.push(u)}n.push(zl(o.id,a,i,o.tags))}return n}function sf(t,e){var n=[];n.size=t.size,void 0!==t.start&&(n.start=t.start,n.end=t.end);for(var r=0;r<t.length;r+=3)n.push(t[r]+e,t[r+1],t[r+2]);return n}function uf(t,e){if(t.transformed)return t;var n,r,i,o=1<<t.z,a=t.x,s=t.y;for(n=0;n<t.features.length;n++){var u=t.features[n],c=u.geometry,l=u.type;if(u.geometry=[],1===l)for(r=0;r<c.length;r+=2)u.geometry.push(cf(c[r],c[r+1],e,o,a,s));else for(r=0;r<c.length;r++){var f=[];for(i=0;i<c[r].length;i+=2)f.push(cf(c[r][i],c[r][i+1],e,o,a,s));u.geometry.push(f)}}return t.transformed=!0,t}function cf(t,e,n,r,i,o){return[Math.round(n*(t*r-i)),Math.round(n*(e*r-o))]}function lf(t,e,n,r,i){for(var o=e===i.maxZoom?0:i.tolerance/((1<<e)*i.extent),a={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:n,y:r,z:e,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},s=0;s<t.length;s++){a.numFeatures++,ff(a,t[s],o,i);var u=t[s].minX,c=t[s].minY,l=t[s].maxX,f=t[s].maxY;u<a.minX&&(a.minX=u),c<a.minY&&(a.minY=c),l>a.maxX&&(a.maxX=l),f>a.maxY&&(a.maxY=f)}return a}function ff(t,e,n,r){var i=e.geometry,o=e.type,a=[];if("Point"===o||"MultiPoint"===o)for(var s=0;s<i.length;s+=3)a.push(i[s]),a.push(i[s+1]),t.numPoints++,t.numSimplified++;else if("LineString"===o)hf(a,i,t,n,!1,!1);else if("MultiLineString"===o||"Polygon"===o)for(s=0;s<i.length;s++)hf(a,i[s],t,n,"Polygon"===o,0===s);else if("MultiPolygon"===o)for(var u=0;u<i.length;u++){var c=i[u];for(s=0;s<c.length;s++)hf(a,c[s],t,n,!0,0===s)}if(a.length){var l=e.tags||null;if("LineString"===o&&r.lineMetrics){for(var f in l={},e.tags)l[f]=e.tags[f];l["mapbox_clip_start"]=i.start/i.size,l["mapbox_clip_end"]=i.end/i.size}var h={geometry:a,type:"Polygon"===o||"MultiPolygon"===o?3:"LineString"===o||"MultiLineString"===o?2:1,tags:l};null!==e.id&&(h.id=e.id),t.features.push(h)}}function hf(t,e,n,r,i,o){var a=r*r;if(r>0&&e.size<(i?a:r))n.numPoints+=e.length/3;else{for(var s=[],u=0;u<e.length;u+=3)(0===r||e[u+2]>a)&&(n.numSimplified++,s.push(e[u]),s.push(e[u+1])),n.numPoints++;i&&pf(s,o),t.push(s)}}function pf(t,e){for(var n=0,r=0,i=t.length,o=i-2;r<i;o=r,r+=2)n+=(t[r]-t[o])*(t[r+1]+t[o+1]);if(n>0===e)for(r=0,i=t.length;r<i/2;r+=2){var a=t[r],s=t[r+1];t[r]=t[i-2-r],t[r+1]=t[i-1-r],t[i-2-r]=a,t[i-1-r]=s}}function df(t,e){return new vf(t,e)}function vf(t,e){e=this.options=mf(Object.create(this.options),e);var n=e.debug;if(n&&console.time("preprocess data"),e.maxZoom<0||e.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(e.promoteId&&e.generateId)throw new Error("promoteId and generateId cannot be used together.");var r=Hl(t,e);this.tiles={},this.tileCoords=[],n&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",e.indexMaxZoom,e.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),r=of(r,e),r.length&&this.splitTile(r,0,0,0),n&&(r.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function gf(t,e,n){return 32*((1<<t)*n+e)+t}function mf(t,e){for(var n in e)t[n]=e[n];return t}vf.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},vf.prototype.splitTile=function(t,e,n,r,i,o,a){var s=[t,e,n,r],u=this.options,c=u.debug;while(s.length){r=s.pop(),n=s.pop(),e=s.pop(),t=s.pop();var l=1<<e,f=gf(e,n,r),h=this.tiles[f];if(!h&&(c>1&&console.time("creation"),h=this.tiles[f]=lf(t,e,n,r,u),this.tileCoords.push({z:e,x:n,y:r}),c)){c>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",e,n,r,h.numFeatures,h.numPoints,h.numSimplified),console.timeEnd("creation"));var p="z"+e;this.stats[p]=(this.stats[p]||0)+1,this.total++}if(h.source=t,i){if(e===u.maxZoom||e===i)continue;var d=1<<i-e;if(n!==Math.floor(o/d)||r!==Math.floor(a/d))continue}else if(e===u.indexMaxZoom||h.numPoints<=u.indexMaxPoints)continue;if(h.source=null,0!==t.length){c>1&&console.time("clipping");var v,g,m,y,_,b,x=.5*u.buffer/u.extent,w=.5-x,E=.5+x,S=1+x;v=g=m=y=null,_=Kl(t,l,n-x,n+E,0,h.minX,h.maxX,u),b=Kl(t,l,n+w,n+S,0,h.minX,h.maxX,u),t=null,_&&(v=Kl(_,l,r-x,r+E,1,h.minY,h.maxY,u),g=Kl(_,l,r+w,r+S,1,h.minY,h.maxY,u),_=null),b&&(m=Kl(b,l,r-x,r+E,1,h.minY,h.maxY,u),y=Kl(b,l,r+w,r+S,1,h.minY,h.maxY,u),b=null),c>1&&console.timeEnd("clipping"),s.push(v||[],e+1,2*n,2*r),s.push(g||[],e+1,2*n,2*r+1),s.push(m||[],e+1,2*n+1,2*r),s.push(y||[],e+1,2*n+1,2*r+1)}}},vf.prototype.getTile=function(t,e,n){var r=this.options,i=r.extent,o=r.debug;if(t<0||t>24)return null;var a=1<<t;e=(e%a+a)%a;var s=gf(t,e,n);if(this.tiles[s])return uf(this.tiles[s],i);o>1&&console.log("drilling down to z%d-%d-%d",t,e,n);var u,c=t,l=e,f=n;while(!u&&c>0)c--,l=Math.floor(l/2),f=Math.floor(f/2),u=this.tiles[gf(c,l,f)];return u&&u.source?(o>1&&console.log("found parent tile z%d-%d-%d",c,l,f),o>1&&console.time("drilling down"),this.splitTile(u.source,c,l,f,t,e,n),o>1&&console.timeEnd("drilling down"),this.tiles[s]?uf(this.tiles[s],i):null):null};var yf=function(){function t(e,n,r,i){Object(et["a"])(this,t),Object(Ar["a"])(this,"vectorLayerCache",{}),this.x=n,this.y=r,this.z=i,this.vectorTile=e}return Object(nt["a"])(t,[{key:"getTileData",value:function(t){if(!t||!this.vectorTile.layers[t])return[];if(this.vectorLayerCache[t])return this.vectorLayerCache[t];var e=this.vectorTile.layers[t];return e.features}},{key:"getFeatureById",value:function(){throw new Error("Method not implemented.")}}]),t}(),_f={tileSize:256,minZoom:0,maxZoom:1/0,zoomOffset:0};function bf(t){for(var e,n,r=0,i=0,o=t.length,a=o-1;i<o;a=i++)e=t[i],n=t[a],r+=(n.x-e.x)*(e.y+n.y);return r}function xf(t){var e=t.length;if(e<=1)return[t];for(var n,r,i=[],o=0;o<e;o++){var a=bf(t[o]);0!==a&&(void 0===r&&(r=a<0),r===a<0?(n&&i.push(n),n=[t[o]]):n.push(t[o]))}return n&&i.push(n),i}var wf=["Unknown","Point","LineString","Polygon"];function Ef(t,e,n,r,i){var o,a,s=i.geometry,u=i.type,c=i.tags,l=i.id,f=t*Math.pow(2,r),h=t*e,p=t*n,d=wf[u];function v(t){for(var e=0;e<t.length;e++){var n=t[e];if(n[3])break;var r=180-360*(n[1]+p)/f,i=360*(n[0]+h)/f-180,o=360/Math.PI*Math.atan(Math.exp(r*Math.PI/180))-90;t[e]=[i,o,0,1]}}switch(u){case 1:var g=[];for(o=0;o<s.length;o++)g[o]=s[o][0];s=g,v(s);break;case 2:for(o=0;o<s.length;o++)v(s[o]);break;case 3:for(s=xf(s),o=0;o<s.length;o++)for(a=0;a<s[o].length;a++)v(s[o][a]);break}1===s.length?s=s[0]:d="Multi"+d;var m={type:"Feature",geometry:{type:d,coordinates:s},properties:c,id:l,tileOrigin:[0,0],coord:""};return m}var Sf=function(){var t=Object(mi["a"])(_i.a.mark((function t(e,n,r,i){return _i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t){var o=n.getTile(e.z,e.x,e.y),a=o?o.features.map((function(t){return Ef(i,r.x,r.y,r.z,t)})):[],s={layers:{defaultLayer:{features:a}}},u=new yf(s,e.x,e.y,e.z);t(u)})));case 1:case"end":return t.stop()}}),t)})));return function(e,n,r,i){return t.apply(this,arguments)}}();function Of(t){var e={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!0,debug:0};return void 0===t||"undefined"===typeof t.geojsonvtOptions?e:Object(P["a"])(Object(P["a"])({},e),t.geojsonvtOptions)}function Cf(t,e){var n=Of(e),r=n.extent||4096,i=df(t,n),o=function(t,e){return Sf(e,i,t,r)},a=Object(P["a"])(Object(P["a"])(Object(P["a"])({},_f),e),{},{getTileData:o});return{data:t,dataArray:[],tilesetOptions:a,isTile:!0}}function Tf(t,e,n){switch(t){case"+":return e+n;case"-":return e-n;case"*":return e*n;case"/":return e/n;case"%":return e%n;case"^":return Math.pow(e,n);case"abs":return Math.abs(e);case"floor":return Math.floor(e);case"round":return Math.round(e);case"ceil":return Math.ceil(e);case"sin":return Math.sin(e);case"cos":return Math.cos(e);case"atan":return-1===n?Math.atan(e):Math.atan2(e,n);default:return console.warn("Calculate symbol err! Return default 0"),0}}function Af(t,e){for(var n=e[0],r=n.width,i=n.height,o=e.map((function(t){return t.rasterData})),a=r*i,s=[],u=JSON.stringify(t),c=0;c<a;c++){var l=JSON.parse(u),f=kf(l,o,c);if("number"===typeof f)s.push(f);else{var h=Pf(l);s.push(h)}}return s}function kf(t,e,n){if(2===t.length&&"band"===t[0]&&"number"===typeof t[1])try{return e[t[1]][n]}catch(r){return console.warn("Raster Data err!"),0}t.map((function(i,o){if(Array.isArray(i)&&i.length>0)switch(i[0]){case"band":try{t[o]=e[i[1]][n]}catch(r){console.warn("Raster Data err!"),t[o]=0}break;default:kf(i,e,n)}}))}function Mf(t){var e=Object(q["a"])(t,3),n=e[0],r=e[1],i=void 0===r?-1:r,o=e[2],a=void 0===o?-1:o;if(void 0===n)return console.warn("Express err!"),["+",0,0];var s=n.replace(/\s+/g,"");return[s,i,a]}function Pf(t){var e=Mf(t),n=e[0],r=e[1],i=e[2];return Array.isArray(r)&&(r=Pf(t[1])),Array.isArray(i)&&(i=Pf(t[2])),Tf(n,r,i)}var Rf={nd:{type:"operation",expression:["/",["-",["band",1],["band",0]],["+",["band",1],["band",0]]]},rgb:{type:"function",method:jf}};function jf(t,e){for(var n=t[0].rasterData,r=t[1].rasterData,i=t[2].rasterData,o=[],a=(null===e||void 0===e?void 0:e.countCut)||[2,98],s=Object(q["a"])(a,2),u=s[0],c=s[1],l=(null===e||void 0===e?void 0:e.RMinMax)||If(n,u,c),f=(null===e||void 0===e?void 0:e.GMinMax)||If(r,u,c),h=(null===e||void 0===e?void 0:e.BMinMax)||If(i,u,c),p=0;p<n.length;p++)o.push(Math.max(0,n[p]-l[0])),o.push(Math.max(0,r[p]-f[0])),o.push(Math.max(0,i[p]-h[0]));return{rasterData:o,rMinMax:l,gMinMax:f,bMinMax:h}}function If(t,e,n){var r=t.slice().sort((function(t,e){return t-e})),i=r.length,o=r[Math.ceil(i*e/100)],a=r[Math.ceil(i*n/100)];return[o,a]}function Lf(t,e,n){return Nf.apply(this,arguments)}function Nf(){return Nf=Object(mi["a"])(_i.a.mark((function t(e,n,r){var i,o,a,s,u,c;return _i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(0!==e.length){t.next=2;break}return t.abrupt("return",{rasterData:[0],width:1,heigh:1});case 2:return t.next=4,Promise.all(e.map((function(t){var e=t.data,r=t.bands,i=void 0===r?[0]:r;return n(e,i)})));case 4:i=t.sent,o=[],i.forEach((function(t){Array.isArray(t)?o.push.apply(o,Object(M["a"])(t)):o.push(t)})),a=o[0],s=a.width,u=a.height,t.t0=Object(fe["a"])(r),t.next="function"===t.t0?11:"object"===t.t0?13:15;break;case 11:return c=r(o),t.abrupt("break",16);case 13:return c=Array.isArray(r)?{rasterData:Af(r,o)}:Df(r,o),t.abrupt("break",16);case 15:c={rasterData:o[0].rasterData};case 16:return t.abrupt("return",Object(P["a"])(Object(P["a"])({},c),{},{width:s,height:u}));case 17:case"end":return t.stop()}}),t)}))),Nf.apply(this,arguments)}function Df(t,e){var n=Rf[t.type];return"function"===n.type?n.method(e,null===t||void 0===t?void 0:t.options):"operation"===n.type?"rgb"===t.type?Ff(n.expression,e):{rasterData:Af(n.expression,e)}:void 0}function Ff(t,e){void 0===t.r&&console.warn("Channel R lost in Operation! Use band[0] to fill!"),void 0===t.g&&console.warn("Channel G lost in Operation! Use band[0] to fill!"),void 0===t.b&&console.warn("Channel B lost in Operation! Use band[0] to fill!");var n=Af(t.r||["band",0],e),r=Af(t.g||["band",0],e),i=Af(t.b||["band",0],e);return[n,r,i]}function Bf(t,e,n,r){return zf.apply(this,arguments)}function zf(){return zf=Object(mi["a"])(_i.a.mark((function t(e,n,r,i){var o;return _i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Lf(e,n,r);case 2:o=t.sent,i(null,{data:o});case 4:case"end":return t.stop()}}),t)}))),zf.apply(this,arguments)}function Uf(t,e){return t.map((function(t){return 1*t[e]}))}function Vf(t){return!!Array.isArray(t)&&(0===t.length||"number"===typeof t[0])}function Hf(t,e){var n,r,i,o=e.extent,a=e.width,s=e.height,u=e.min,c=e.max,l=e.format,f=e.operation;if(void 0===l||Vf(t))n=Array.from(t),r=a,i=s;else{var h=Array.isArray(t)?t:[t];n=Lf(h,l,f)}var p={_id:1,dataArray:[{_id:1,data:n,width:r,height:i,min:u,max:c,coordinates:[[o[0],o[1]],[o[2],o[3]]]}]};return p}var Gf=n("Ff2n"),Wf=["extent","min","max","width","height","format","operation"];function Zf(t,e){var n,r=e.extent,i=e.min,o=e.max,a=e.width,s=e.height,u=e.format,c=e.operation,l=Object(Gf["a"])(e,Wf);if(void 0===u||Vf(t))n=Array.from(t);else{var f=Array.isArray(t)?t:[t];n=Lf(f,u,c)}var h={_id:1,dataArray:[Object(P["a"])(Object(P["a"])({_id:1,data:n,width:a,height:s},l),{},{min:i,max:o,coordinates:[[r[0],r[1]],[r[2],r[3]]]})]};return h}n("mNvP");var Yf=n("4cb6"),Xf=n("APxj"),qf=n.n(Xf),Kf={IEventEmitter:Symbol["for"]("IEventEmitter"),ISceneService:Symbol["for"]("ISceneService"),IGlobalConfigService:Symbol["for"]("IGlobalConfigService"),ICameraService:Symbol["for"]("ICameraService"),ICoordinateSystemService:Symbol["for"]("ICoordinateSystemService"),ILayerService:Symbol["for"]("ILayerService"),ILayerMappingService:Symbol["for"]("ILayerMappingService"),ILayerStyleService:Symbol["for"]("ILayerStyleService"),IMapService:Symbol["for"]("IMapService"),IMarkerService:Symbol["for"]("IMarkerService"),IPopupService:Symbol["for"]("PopupService"),IFactoryMapService:Symbol["for"]("Factory<IMapService>"),IRendererService:Symbol["for"]("IRendererService"),IShaderModuleService:Symbol["for"]("IShaderModuleService"),IIconService:Symbol["for"]("IIconService"),IFontService:Symbol["for"]("IFontService"),IInteractionService:Symbol["for"]("IInteractionService"),IPickingService:Symbol["for"]("IPickingService"),IControlService:Symbol["for"]("IControlService"),IStyleAttributeService:Symbol["for"]("IStyleAttributeService"),ILayer:Symbol["for"]("ILayer"),ILayerPlugin:Symbol["for"]("ILayerPlugin"),INormalPass:Symbol["for"]("INormalPass"),IPostProcessor:Symbol["for"]("IPostProcessor"),IPostProcessingPass:Symbol["for"]("IPostProcessingPass"),IFactoryPostProcessingPass:Symbol["for"]("Factory<IPostProcessingPass>"),IFactoryNormalPass:Symbol["for"]("Factory<IFactoryNormalPass>"),IMultiPassRenderer:Symbol["for"]("IMultiPassRenderer"),SceneID:Symbol["for"]("SceneID"),MapConfig:Symbol["for"]("MapConfig")},Qf=n("TIQr"),$f=n.n(Qf);function Jf(t,e){var n="undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=th(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n["return"]||n["return"]()}finally{if(s)throw o}}}}function th(t,e){if(t){if("string"===typeof t)return eh(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?eh(t,e):void 0}}function eh(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var nh,rh,ih=30;function oh(t){var e=t.characterSet,n=t.getFontWidth,r=t.fontHeight,i=t.buffer,o=t.maxCanvasWidth,a=t.mapping,s=void 0===a?{}:a,u=t.xOffset,c=void 0===u?0:u,l=t.yOffset,f=void 0===l?0:l,h=0,p=c;Array.from(e).forEach((function(t,e){if(!s[t]){var r=n(t,e);p+ih>o&&(p=0,h++),s[t]={x:p,y:f+h*ih,width:ih,height:ih,advance:r},p+=ih}}));var d=r+2*i;return{mapping:s,xOffset:p,yOffset:f+h*d,canvasHeight:uh(f+(h+1)*d)}}function ah(t,e,n){var r,i=0,o=0,a=0,s=[],u={},c=Jf(t);try{for(c.s();!(r=c.n()).done;){var l=r.value;if(!u[l.id]){var f=l.size;i+f+e>n&&(sh(u,s,o),i=0,o=a+o+e,a=0,s=[]),s.push({icon:l,xOffset:i}),i=i+f+e,a=Math.max(a,f)}}}catch(p){c.e(p)}finally{c.f()}s.length>0&&sh(u,s,o);var h=uh(a+o+e);return{mapping:u,canvasHeight:h}}function sh(t,e,n){var r,i=Jf(e);try{for(i.s();!(r=i.n()).done;){var o=r.value,a=o.icon,s=o.xOffset;t[a.id]=Object(P["a"])(Object(P["a"])({},a),{},{x:s,y:n,image:a.image,width:a.width,height:a.height})}}catch(u){i.e(u)}finally{i.f()}}function uh(t){return Math.pow(2,Math.ceil(Math.log2(t)))}function ch(t,e){var n="undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=lh(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n["return"]||n["return"]()}finally{if(s)throw o}}}}function lh(t,e){if(t){if("string"===typeof t)return fh(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?fh(t,e):void 0}}function fh(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function hh(t){var e=ph();return function(){var n,r=Object(ct["a"])(t);if(e){var i=Object(ct["a"])(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(ut["a"])(this,n)}}function ph(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}var dh=Oh(),vh="sans-serif",gh="normal",mh=24,yh=3,_h=.25,bh=8,xh=1024,wh=1,Eh=1,Sh=3;function Oh(){for(var t=[],e=32;e<128;e++)t.push(String.fromCharCode(e));return t}function Ch(t,e,n,r){t.font="".concat(r," ").concat(n,"px ").concat(e),t.fillStyle="black",t.textBaseline="middle"}function Th(t,e){for(var n=0;n<t.length;n++)e.data[4*n+3]=t[n]}var Ah,kh,Mh=(nh=Object(Yf["injectable"])(),nh(rh=function(t){Object(st["a"])(n,t);var e=hh(n);function n(){var t;Object(et["a"])(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return t=e.call.apply(e,[this].concat(i)),Object(Ar["a"])(Object(ft["a"])(t),"fontAtlas",void 0),Object(Ar["a"])(Object(ft["a"])(t),"iconFontMap",void 0),Object(Ar["a"])(Object(ft["a"])(t),"iconFontGlyphs",{}),Object(Ar["a"])(Object(ft["a"])(t),"fontOptions",void 0),Object(Ar["a"])(Object(ft["a"])(t),"key",void 0),Object(Ar["a"])(Object(ft["a"])(t),"cache",new Tr(Sh)),t}return Object(nt["a"])(n,[{key:"scale",get:function(){return Eh}},{key:"canvas",get:function(){var t=this.cache.get(this.key);return t&&t.data}},{key:"mapping",get:function(){var t=this.cache.get(this.key);return t&&t.mapping||{}}},{key:"init",value:function(){this.cache.clear(),this.fontOptions={fontFamily:vh,fontWeight:gh,characterSet:dh,fontSize:mh,buffer:yh,sdf:!0,cutoff:_h,radius:bh,iconfont:!1},this.key="",this.iconFontMap=new Map}},{key:"addIconGlyphs",value:function(t){var e=this;t.forEach((function(t){e.iconFontGlyphs[t.name]=t.unicode}))}},{key:"addIconFont",value:function(t,e){this.iconFontMap.set(t,e)}},{key:"getIconFontKey",value:function(t){return this.iconFontMap.get(t)||t}},{key:"getGlyph",value:function(t){return this.iconFontGlyphs[t]?String.fromCharCode(parseInt(this.iconFontGlyphs[t],16)):""}},{key:"setFontOptions",value:function(t){this.fontOptions=Object(P["a"])(Object(P["a"])({},this.fontOptions),t),this.key=this.getKey();var e=this.getNewChars(this.key,this.fontOptions.characterSet),n=this.cache.get(this.key);if(!n||0!==e.length){var r=this.generateFontAtlas(this.key,e,n);this.fontAtlas=r,this.cache.set(this.key,r)}}},{key:"addFontFace",value:function(t,e){var n=this,r=document.createElement("style");r.type="text/css",r.innerText="\n        @font-face{\n            font-family: '".concat(t,"';\n            src: url('").concat(e,"') format('woff2'),\n            url('").concat(e,"') format('woff'),\n            url('").concat(e,"') format('truetype');\n        }"),r.onload=function(){if(document.fonts)try{document.fonts.load("24px ".concat(t),"L7text"),document.fonts.ready.then((function(){n.emit("fontloaded",{fontFamily:t})}))}catch(e){console.warn("\u5f53\u524d\u73af\u5883\u4e0d\u652f\u6301 document.fonts !"),console.warn("\u5f53\u524d\u73af\u5883\u4e0d\u652f\u6301 iconfont !"),console.warn(e)}},document.getElementsByTagName("head")[0].appendChild(r)}},{key:"destroy",value:function(){this.cache.clear(),this.iconFontMap.clear()}},{key:"generateFontAtlas",value:function(t,e,n){var r=this.fontOptions,i=r.fontFamily,o=r.fontWeight,a=r.fontSize,s=r.buffer,u=r.sdf,c=r.radius,l=r.cutoff,f=r.iconfont,h=n&&n.data;h||(h=sn.document.createElement("canvas"),h.width=xh);var p=h.getContext("2d",{willReadFrequently:!0});Ch(p,i,a,o);var d=oh(Object(P["a"])({getFontWidth:function(t){return p.measureText(t).width},fontHeight:a*Eh,buffer:s,characterSet:e,maxCanvasWidth:xh},n&&{mapping:n.mapping,xOffset:n.xOffset,yOffset:n.yOffset})),v=d.mapping,g=d.canvasHeight,m=d.xOffset,y=d.yOffset,_=p.getImageData(0,0,h.width,h.height);if(h.height=g,p.putImageData(_,0,0),Ch(p,i,a,o),u){var b,x=new $f.a(a,s,c,l,i,o),w=p.getImageData(0,0,x.size,x.size),E=ch(e);try{for(E.s();!(b=E.n()).done;){var S=b.value;if(f){var O=String.fromCharCode(parseInt(S.replace("&#x","").replace(";",""),16)),C=x.draw(O);Th(C,w)}else Th(x.draw(S),w);p.putImageData(w,v[S].x,v[S].y)}}catch(M){E.e(M)}finally{E.f()}}else{var T,A=ch(e);try{for(A.s();!(T=A.n()).done;){var k=T.value;p.fillText(k,v[k].x,v[k].y+a*wh)}}catch(M){A.e(M)}finally{A.f()}}return{xOffset:m,yOffset:y,mapping:v,data:h,width:h.width,height:h.height}}},{key:"getKey",value:function(){return"key"}},{key:"getNewChars",value:function(t,e){var n=this.cache.get(t);if(!n)return e;var r=[],i=n.mapping,o=new Set(Object.keys(i)),a=new Set(e);return a.forEach((function(t){o.has(t)||r.push(t)})),r}}]),n}(vl["EventEmitter"]))||rh);function Ph(t){var e=Rh();return function(){var n,r=Object(ct["a"])(t);if(e){var i=Object(ct["a"])(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(ut["a"])(this,n)}}function Rh(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}var jh,Ih,Lh,Nh,Dh,Fh=3,Bh=1024,zh=64,Uh=(Ah=Object(Yf["injectable"])(),Ah(kh=function(t){Object(st["a"])(n,t);var e=Ph(n);function n(){var t;Object(et["a"])(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return t=e.call.apply(e,[this].concat(i)),Object(Ar["a"])(Object(ft["a"])(t),"canvasHeight",128),Object(Ar["a"])(Object(ft["a"])(t),"texture",void 0),Object(Ar["a"])(Object(ft["a"])(t),"canvas",void 0),Object(Ar["a"])(Object(ft["a"])(t),"iconData",void 0),Object(Ar["a"])(Object(ft["a"])(t),"iconMap",void 0),Object(Ar["a"])(Object(ft["a"])(t),"ctx",void 0),Object(Ar["a"])(Object(ft["a"])(t),"loadingImageCount",0),t}return Object(nt["a"])(n,[{key:"isLoading",value:function(){return 0===this.loadingImageCount}},{key:"init",value:function(){this.iconData=[],this.iconMap={},this.canvas=sn.document.createElement("canvas"),this.canvas.width=128,this.canvas.height=128,this.ctx=this.canvas.getContext("2d")}},{key:"addImage",value:function(){var t=Object(mi["a"])(_i.a.mark((function t(e,n){var r,i;return _i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=new Image,this.loadingImageCount++,this.hasImage(e)?console.warn("Image Id already exists"):this.iconData.push({id:e,size:zh}),this.updateIconMap(),t.next=6,this.loadImage(n);case 6:r=t.sent,i=this.iconData.find((function(t){return t.id===e})),i&&(i.image=r,i.width=r.width,i.height=r.height),this.update();case 10:case"end":return t.stop()}}),t,this)})));function e(e,n){return t.apply(this,arguments)}return e}()},{key:"addImageMini",value:function(t,e,n){var r=this,i=n.getSceneConfig().canvas,o=i.createImage();if(this.loadingImageCount++,this.hasImage(t))throw new Error("Image Id already exists");this.iconData.push({id:t,size:zh}),this.updateIconMap(),this.loadImageMini(e,i).then((function(e){o=e;var n=r.iconData.find((function(e){return e.id===t}));n&&(n.image=o,n.width=o.width,n.height=o.height),r.update()}))}},{key:"getTexture",value:function(){return this.texture}},{key:"getIconMap",value:function(){return this.iconMap}},{key:"getCanvas",value:function(){return this.canvas}},{key:"hasImage",value:function(t){return this.iconMap.hasOwnProperty(t)}},{key:"removeImage",value:function(t){this.hasImage(t)&&(this.iconData=this.iconData.filter((function(e){return e.id!==t})),delete this.iconMap[t],this.update())}},{key:"destroy",value:function(){this.removeAllListeners("imageUpdate"),this.iconData=[],this.iconMap={}}},{key:"loadImage",value:function(t){return new Promise((function(e,n){if(t instanceof HTMLImageElement)e(t);else{var r=new Image;r.crossOrigin="anonymous",r.onload=function(){e(r)},r.onerror=function(){n(new Error("Could not load image at "+t))},r.src=t instanceof File?URL.createObjectURL(t):t}}))}},{key:"update",value:function(){this.updateIconMap(),this.updateIconAtlas(),this.loadingImageCount--,0===this.loadingImageCount&&this.emit("imageUpdate")}},{key:"updateIconAtlas",value:function(){var t=this;this.canvas.width=Bh,this.canvas.height=this.canvasHeight,Object.keys(this.iconMap).forEach((function(e){var n=t.iconMap[e],r=n.x,i=n.y,o=n.image,a=n.width,s=void 0===a?64:a,u=n.height,c=void 0===u?64:u,l=Math.max(s,c),f=l/zh,h=c/f,p=s/f;o&&t.ctx.drawImage(o,r+(zh-p)/2,i+(zh-h)/2,p,h)}))}},{key:"updateIconMap",value:function(){var t=ah(this.iconData,Fh,Bh),e=t.mapping,n=t.canvasHeight;this.iconMap=e,this.canvasHeight=n}},{key:"loadImageMini",value:function(t,e){return new Promise((function(n,r){var i=e.createImage();i.crossOrigin="anonymous",i.onload=function(){n(i)},i.onerror=function(){r(new Error("Could not load image at "+t))},i.src=t}))}}]),n}(vl["EventEmitter"]))||kh),Vh=(jh=Object(Yf["injectable"])(),jh(Ih=function(){function t(){Object(et["a"])(this,t),Object(Ar["a"])(this,"viewport",void 0),Object(Ar["a"])(this,"overridedViewProjectionMatrix",void 0),Object(Ar["a"])(this,"jitteredViewProjectionMatrix",void 0),Object(Ar["a"])(this,"jitteredProjectionMatrix",void 0),Object(Ar["a"])(this,"viewMatrixInverse",void 0),Object(Ar["a"])(this,"cameraPosition",void 0)}return Object(nt["a"])(t,[{key:"init",value:function(){}},{key:"update",value:function(t){this.viewport=t,this.viewMatrixInverse=a.create(),a.invert(this.viewMatrixInverse,t.getViewMatrix()),this.cameraPosition=[this.viewMatrixInverse[12],this.viewMatrixInverse[13],this.viewMatrixInverse[14]]}},{key:"getProjectionMatrix",value:function(){return this.jitteredProjectionMatrix||this.viewport.getProjectionMatrix()}},{key:"getModelMatrix",value:function(){return this.viewport.getModelMatrix()}},{key:"getViewMatrix",value:function(){return this.viewport.getViewMatrix()}},{key:"getViewMatrixUncentered",value:function(){return this.viewport.getViewMatrixUncentered()}},{key:"getViewProjectionMatrixUncentered",value:function(){return this.viewport.getViewProjectionMatrixUncentered()}},{key:"getViewProjectionMatrix",value:function(){return this.overridedViewProjectionMatrix||this.jitteredViewProjectionMatrix||this.viewport.getViewProjectionMatrix()}},{key:"getZoom",value:function(){return this.viewport.getZoom()}},{key:"getZoomScale",value:function(){return this.viewport.getZoomScale()}},{key:"getCenter",value:function(){var t=this.viewport.getCenter(),e=Object(q["a"])(t,2),n=e[0],r=e[1];return[n,r]}},{key:"getFocalDistance",value:function(){return this.viewport.getFocalDistance()}},{key:"getCameraPosition",value:function(){return this.cameraPosition}},{key:"projectFlat",value:function(t,e){return this.viewport.projectFlat(t,e)}},{key:"setViewProjectionMatrix",value:function(t){this.overridedViewProjectionMatrix=t}},{key:"jitterProjectionMatrix",value:function(t,e){var n=a.fromTranslation(a.create(),[t,e,0]);this.jitteredProjectionMatrix=a.multiply(a.create(),n,this.viewport.getProjectionMatrix()),this.jitteredViewProjectionMatrix=a.multiply(a.create(),this.jitteredProjectionMatrix,this.viewport.getViewMatrix())}},{key:"clearJitterProjectionMatrix",value:function(){this.jitteredProjectionMatrix=void 0,this.jitteredViewProjectionMatrix=void 0}}]),t}())||Ih);function Hh(t,e){var n="undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=Gh(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n["return"]||n["return"]()}finally{if(s)throw o}}}}function Gh(t,e){if(t){if("string"===typeof t)return Wh(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Wh(t,e):void 0}}function Wh(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}(function(t){t["TOPRIGHT"]="topright",t["TOPLEFT"]="topleft",t["BOTTOMRIGHT"]="bottomright",t["BOTTOMLEFT"]="bottomleft",t["TOPCENTER"]="topcenter",t["BOTTOMCENTER"]="bottomcenter",t["LEFTCENTER"]="leftcenter",t["RIGHTCENTER"]="rightcenter",t["LEFTTOP"]="lefttop",t["RIGHTTOP"]="righttop",t["LEFTBOTTOM"]="leftbottom",t["RIGHTBOTTOM"]="rightbottom"})(Lh||(Lh={}));var Zh,Yh,Xh,qh,Kh,Qh,$h={topleft:"column",topright:"column",bottomright:"column",bottomleft:"column",leftcenter:"column",rightcenter:"column",topcenter:"row",bottomcenter:"row",lefttop:"row",righttop:"row",leftbottom:"row",rightbottom:"row"},Jh=(Nh=Object(Yf["injectable"])(),Nh(Dh=function(){function t(){Object(et["a"])(this,t),Object(Ar["a"])(this,"container",void 0),Object(Ar["a"])(this,"controlCorners",void 0),Object(Ar["a"])(this,"controlContainer",void 0),Object(Ar["a"])(this,"scene",void 0),Object(Ar["a"])(this,"mapsService",void 0),Object(Ar["a"])(this,"controls",[]),Object(Ar["a"])(this,"unAddControls",[])}return Object(nt["a"])(t,[{key:"init",value:function(t,e){this.container=t.container,this.scene=e,this.mapsService=e.get(Kf.IMapService),this.initControlPos()}},{key:"addControl",value:function(t,e){var n=e.get(Kf.IMapService);n.map?(t.addTo(this.scene),this.controls.push(t)):this.unAddControls.push(t)}},{key:"getControlByName",value:function(t){return this.controls.find((function(e){return e.controlOption.name===t}))}},{key:"removeControl",value:function(t){var e=this.controls.indexOf(t);return e>-1&&this.controls.splice(e,1),t.remove(),this}},{key:"addControls",value:function(){var t=this;this.unAddControls.forEach((function(e){e.addTo(t.scene),t.controls.push(e)})),this.unAddControls=[]}},{key:"destroy",value:function(){var t,e=Hh(this.controls);try{for(e.s();!(t=e.n()).done;){var n=t.value;n.remove()}}catch(r){e.e(r)}finally{e.f()}this.controls=[],this.clearControlPos()}},{key:"initControlPos",value:function(){var t=this.controlCorners={},e="l7-",n=this.controlContainer=r.create("div",e+"control-container",this.container);function i(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],o=i.map((function(t){return e+t})).join(" ");t[i.filter((function(t){return!["row","column"].includes(t)})).join("")]=r.create("div",o,n)}function o(t){var e=t.replace(/^(top|bottom|left|right|center)/,"$1-").split("-");return[].concat(Object(M["a"])(e),[$h[t]])}Object.values(Lh).forEach((function(t){i(o(t))}))}},{key:"clearControlPos",value:function(){for(var t in this.controlCorners)this.controlCorners[t]&&r.remove(this.controlCorners[t]);this.controlContainer&&r.remove(this.controlContainer)}}]),t}())||Dh),tp=(Zh=Object(Yf["injectable"])(),Zh(Yh=function(){function t(){Object(et["a"])(this,t),Object(Ar["a"])(this,"container",void 0),Object(Ar["a"])(this,"scene",void 0),Object(Ar["a"])(this,"mapsService",void 0),Object(Ar["a"])(this,"markers",[]),Object(Ar["a"])(this,"markerLayers",[]),Object(Ar["a"])(this,"unAddMarkers",[]),Object(Ar["a"])(this,"unAddMarkerLayers",[])}return Object(nt["a"])(t,[{key:"addMarkerLayer",value:function(t){this.mapsService.map&&this.mapsService.getMarkerContainer()?(this.markerLayers.push(t),t.addTo(this.scene)):this.unAddMarkerLayers.push(t)}},{key:"removeMarkerLayer",value:function(t){t.destroy(),this.markerLayers.indexOf(t);var e=this.markerLayers.indexOf(t);e>-1&&this.markerLayers.splice(e,1)}},{key:"addMarker",value:function(t){this.mapsService.map&&this.mapsService.getMarkerContainer()?(this.markers.push(t),t.addTo(this.scene)):this.unAddMarkers.push(t)}},{key:"addMarkers",value:function(){var t=this;this.unAddMarkers.forEach((function(e){e.addTo(t.scene),t.markers.push(e)})),this.unAddMarkers=[]}},{key:"addMarkerLayers",value:function(){var t=this;this.unAddMarkerLayers.forEach((function(e){t.markerLayers.push(e),e.addTo(t.scene)})),this.unAddMarkers=[]}},{key:"removeMarker",value:function(t){t.remove(),this.markers.indexOf(t);var e=this.markers.indexOf(t);e>-1&&this.markers.splice(e,1)}},{key:"removeAllMarkers",value:function(){this.destroy()}},{key:"init",value:function(t){this.scene=t,this.mapsService=t.get(Kf.IMapService)}},{key:"destroy",value:function(){this.markers.forEach((function(t){t.remove()})),this.markers=[],this.markerLayers.forEach((function(t){t.destroy()})),this.markerLayers=[]}},{key:"removeMakerLayerMarker",value:function(t){t.destroy()}}]),t}())||Yh),ep=(Xh=Object(Yf["injectable"])(),Xh(qh=function(){function t(){Object(et["a"])(this,t),Object(Ar["a"])(this,"scene",void 0),Object(Ar["a"])(this,"mapsService",void 0),Object(Ar["a"])(this,"popups",[]),Object(Ar["a"])(this,"unAddPopups",[])}return Object(nt["a"])(t,[{key:"isMarkerReady",get:function(){return this.mapsService.map&&this.mapsService.getMarkerContainer()}},{key:"removePopup",value:function(t){t.isOpen()&&t.remove();var e=this.popups.indexOf(t);e>-1&&this.popups.splice(e,1);var n=this.unAddPopups.indexOf(t);n>-1&&this.unAddPopups.splice(n,1)}},{key:"destroy",value:function(){this.popups.forEach((function(t){return t.remove()}))}},{key:"addPopup",value:function(t){var e=this;t&&t.getOptions().autoClose&&[].concat(Object(M["a"])(this.popups),Object(M["a"])(this.unAddPopups)).forEach((function(t){t.getOptions().autoClose&&e.removePopup(t)})),this.isMarkerReady?(t.addTo(this.scene),this.popups.push(t)):this.unAddPopups.push(t),t.on("close",(function(){e.removePopup(t)}))}},{key:"initPopup",value:function(){var t=this;this.unAddPopups.length&&this.unAddPopups.forEach((function(e){t.addPopup(e),t.unAddPopups=[]}))}},{key:"init",value:function(t){this.scene=t,this.mapsService=t.get(Kf.IMapService)}}]),t}())||qh),np={MapToken:"\u60a8\u6b63\u5728\u4f7f\u7528 Demo\u6d4b\u8bd5\u5730\u56fetoken\uff0c\u5982\u679c\u751f\u4ea7\u73af\u5883\u4e2d\u4f7f\u7528\u53bb\u5bf9\u5e94\u5730\u56fe\u8bf7\u6ce8\u518cToken",SDK:"\u8bf7\u786e\u8ba4\u5f15\u5165\u4e86mapbox-gl api\u4e14\u5728L7\u4e4b\u524d\u5f15\u5165"},rp=np,ip={id:"map",logoPosition:"bottomleft",logoVisible:!0,antialias:!0,stencil:!0,preserveDrawingBuffer:!1,pickBufferScale:1,fitBoundsOptions:{animate:!1}},op={colors:["rgb(103,0,31)","rgb(178,24,43)","rgb(214,96,77)","rgb(244,165,130)","rgb(253,219,199)","rgb(247,247,247)","rgb(209,229,240)","rgb(146,197,222)","rgb(67,147,195)","rgb(33,102,172)","rgb(5,48,97)"],size:10,shape:"circle",scales:{},shape2d:["circle","triangle","square","pentagon","hexagon","octogon","hexagram","rhombus","vesica"],shape3d:["cylinder","triangleColumn","hexagonColumn","squareColumn"],minZoom:-1,maxZoom:24,visible:!0,autoFit:!1,pickingBuffer:0,enablePropagation:!1,zIndex:0,blend:"normal",pickedFeatureID:-1,enableMultiPassRenderer:!1,enablePicking:!0,active:!1,activeColor:"#2f54eb",enableHighlight:!1,enableSelect:!1,highlightColor:"#2f54eb",activeMix:0,selectColor:"blue",selectMix:0,enableTAA:!1,jitterScale:1,enableLighting:!1,animateOption:{enable:!1,interval:.2,duration:4,trailLength:.15},forward:!0},ap=(Kh=Object(Yf["injectable"])(),Kh(Qh=function(){function t(){Object(et["a"])(this,t),Object(Ar["a"])(this,"sceneConfigCache",{}),Object(Ar["a"])(this,"layerConfigCache",{}),Object(Ar["a"])(this,"layerAttributeConfigCache",{})}return Object(nt["a"])(t,[{key:"getSceneConfig",value:function(t){return this.sceneConfigCache[t]}},{key:"getSceneWarninfo",value:function(t){return rp[t]}},{key:"setSceneConfig",value:function(t,e){this.sceneConfigCache[t]=Object(P["a"])(Object(P["a"])({},ip),e)}},{key:"getLayerConfig",value:function(t){return this.layerConfigCache[t]}},{key:"setLayerConfig",value:function(t,e,n){this.layerConfigCache[e]=Object(P["a"])({},Object(K["merge"])({},this.sceneConfigCache[t],op,n))}},{key:"getAttributeConfig",value:function(t){return this.layerAttributeConfigCache[t]}},{key:"setAttributeConfig",value:function(t,e){this.layerAttributeConfigCache[t]=Object(P["a"])(Object(P["a"])({},this.layerAttributeConfigCache[t]),e)}},{key:"clean",value:function(){this.sceneConfigCache={},this.layerConfigCache={}}}]),t}())||Qh);function sp(t,e,n,r){n&&Object.defineProperty(t,e,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}function up(t,e,n,r,i){var o={};return Object.keys(r).forEach((function(t){o[t]=r[t]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce((function(n,r){return r(t,e,n)||n}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(t,e,o),o=null),o}var cp,lp=Math.PI/180,fp=512,hp=4003e4;function pp(t){var e=t.latitude,n=void 0===e?0:e,r=t.zoom,i=void 0===r?0:r,o=t.scale,a=t.highPrecision,s=void 0!==a&&a,u=t.flipY,c=void 0!==u&&u;o=void 0!==o?o:Math.pow(2,i);var l={},f=fp*o,h=Math.cos(n*lp),p=f/360,d=p/h,v=f/hp/h;if(l.pixelsPerMeter=[v,-v,v],l.metersPerPixel=[1/v,-1/v,1/v],l.pixelsPerDegree=[p,-d,v],l.degreesPerPixel=[1/p,-1/d,1/v],s){var g=lp*Math.tan(n*lp)/h,m=p*g/2,y=f/hp*g,_=y/d*v;l.pixelsPerDegree2=[0,-m,y],l.pixelsPerMeter2=[_,0,_],c&&(l.pixelsPerDegree2[1]=-l.pixelsPerDegree2[1],l.pixelsPerMeter2[1]=-l.pixelsPerMeter2[1])}return c&&(l.pixelsPerMeter[1]=-l.pixelsPerMeter[1],l.metersPerPixel[1]=-l.metersPerPixel[1],l.pixelsPerDegree[1]=-l.pixelsPerDegree[1],l.degreesPerPixel[1]=-l.degreesPerPixel[1]),l}(function(t){t[t["LNGLAT"]=1]="LNGLAT",t[t["LNGLAT_OFFSET"]=2]="LNGLAT_OFFSET",t[t["VECTOR_TILE"]=3]="VECTOR_TILE",t[t["IDENTITY"]=4]="IDENTITY",t[t["P20"]=5]="P20",t[t["P20_OFFSET"]=6]="P20_OFFSET",t[t["METER_OFFSET"]=7]="METER_OFFSET",t[t["P20_2"]=8]="P20_2"})(cp||(cp={}));var dp,vp,gp,mp,yp,_p,bp,xp,wp,Ep,Sp,Op={CoordinateSystem:"u_CoordinateSystem",ViewportCenter:"u_ViewportCenter",ViewportCenterProjection:"u_ViewportCenterProjection",PixelsPerDegree:"u_PixelsPerDegree",PixelsPerDegree2:"u_PixelsPerDegree2",PixelsPerMeter:"u_PixelsPerMeter",Mvp:"u_Mvp"},Cp=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0],Tp=(dp=Object(Yf["injectable"])(),vp=Object(Yf["inject"])(Kf.ICameraService),dp((mp=function(){function t(){Object(et["a"])(this,t),Object(Ar["a"])(this,"needRefresh",!0),sp(this,"cameraService",yp,this),Object(Ar["a"])(this,"coordinateSystem",void 0),Object(Ar["a"])(this,"viewportCenter",void 0),Object(Ar["a"])(this,"viewportCenterProjection",void 0),Object(Ar["a"])(this,"pixelsPerDegree",void 0),Object(Ar["a"])(this,"pixelsPerDegree2",void 0),Object(Ar["a"])(this,"pixelsPerMeter",void 0)}return Object(nt["a"])(t,[{key:"refresh",value:function(t){var e=this.cameraService.getZoom(),n=this.cameraService.getZoomScale(),r=t||this.cameraService.getCenter(),i=pp({latitude:r[1],zoom:e}),o=i.pixelsPerMeter,a=i.pixelsPerDegree;this.viewportCenter=r,this.viewportCenterProjection=[0,0,0,0],this.pixelsPerMeter=o,this.pixelsPerDegree=a,this.pixelsPerDegree2=[0,0,0],this.coordinateSystem===cp.LNGLAT||this.coordinateSystem===cp.P20?this.cameraService.setViewProjectionMatrix(void 0):this.coordinateSystem===cp.LNGLAT_OFFSET?this.calculateLnglatOffset(r,e):this.coordinateSystem===cp.P20_OFFSET&&this.calculateLnglatOffset(r,e,n,!0),this.needRefresh=!1}},{key:"getCoordinateSystem",value:function(){return this.coordinateSystem}},{key:"setCoordinateSystem",value:function(t){this.coordinateSystem=t}},{key:"getViewportCenter",value:function(){return this.viewportCenter}},{key:"getViewportCenterProjection",value:function(){return this.viewportCenterProjection}},{key:"getPixelsPerDegree",value:function(){return this.pixelsPerDegree}},{key:"getPixelsPerDegree2",value:function(){return this.pixelsPerDegree2}},{key:"getPixelsPerMeter",value:function(){return this.pixelsPerMeter}},{key:"calculateLnglatOffset",value:function(t,e,n,r){var i=pp({latitude:t[1],zoom:e,scale:n,flipY:r,highPrecision:!0}),o=i.pixelsPerMeter,s=i.pixelsPerDegree,u=i.pixelsPerDegree2,l=this.cameraService.getViewMatrix(),f=this.cameraService.getProjectionMatrix(),h=a.multiply([],f,l),p=this.cameraService.projectFlat([Math.fround(t[0]),Math.fround(t[1])],Math.pow(2,e));this.viewportCenterProjection=c.transformMat4([],[p[0],p[1],0,1],h),l=this.cameraService.getViewMatrixUncentered()||l,h=a.multiply([],f,l),h=a.multiply([],h,Cp),this.cameraService.setViewProjectionMatrix(h),this.pixelsPerMeter=o,this.pixelsPerDegree=s,this.pixelsPerDegree2=u}}]),t}(),yp=up(mp.prototype,"cameraService",[vp],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),gp=mp))||gp),Ap=n("AfwI"),kp=n.n(Ap);function Mp(t){var e=Pp();return function(){var n,r=Object(ct["a"])(t);if(e){var i=Object(ct["a"])(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(ut["a"])(this,n)}}function Pp(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(function(t){t["Hover"]="hover",t["Click"]="click",t["Select"]="select",t["Active"]="active",t["Drag"]="drag"})(_p||(_p={}));var Rp,jp,Ip,Lp,Np,Dp,Fp,Bp,zp,Up,Vp,Hp,Gp,Wp,Zp={panstart:"dragstart",panmove:"dragging",panend:"dragend",pancancel:"dragcancel"},Yp=(bp=Object(Yf["injectable"])(),xp=Object(Yf["inject"])(Kf.IMapService),bp((Ep=function(t){Object(st["a"])(n,t);var e=Mp(n);function n(){var t;Object(et["a"])(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return t=e.call.apply(e,[this].concat(i)),Object(Ar["a"])(Object(ft["a"])(t),"indragging",!1),sp(Object(ft["a"])(t),"mapService",Sp,Object(ft["a"])(t)),Object(Ar["a"])(Object(ft["a"])(t),"hammertime",void 0),Object(Ar["a"])(Object(ft["a"])(t),"lastClickTime",0),Object(Ar["a"])(Object(ft["a"])(t),"lastClickXY",[-1,-1]),Object(Ar["a"])(Object(ft["a"])(t),"clickTimer",void 0),Object(Ar["a"])(Object(ft["a"])(t),"$containter",void 0),Object(Ar["a"])(Object(ft["a"])(t),"onDrag",(function(e){var n=t.interactionEvent(e);n.type=Zp[n.type],"dragging"===n.type?t.indragging=!0:t.indragging=!1,t.emit(_p.Drag,n)})),Object(Ar["a"])(Object(ft["a"])(t),"onHammer",(function(e){e.srcEvent.stopPropagation();var n=t.interactionEvent(e);t.emit(_p.Hover,n)})),Object(Ar["a"])(Object(ft["a"])(t),"onTouch",(function(e){var n=e.touches[0];t.onHover({x:n.pageX,y:n.pageY,type:"touch"})})),Object(Ar["a"])(Object(ft["a"])(t),"onHover",(function(e){var n=e.clientX,r=e.clientY,i=n,o=r,a=e.type,s=t.mapService.getMapContainer();if(s)if(on)i=i-s.left-0,o=o-s.top-0;else{var u=s.getBoundingClientRect(),c=u.top,l=u.left;i=i-l-s.clientLeft,o=o-c-s.clientTop}var f=t.mapService.containerToLngLat([i,o]);if("click"!==a)"touch"!==a?"click"!==a&&"dblclick"!==a&&t.emit(_p.Hover,{x:i,y:o,lngLat:f,type:a,target:e}):t.isDoubleTap(i,o,f);else{if(!on&&"ontouchstart"in document.documentElement===!0)return;t.isDoubleTap(i,o,f)}})),t}return Object(nt["a"])(n,[{key:"init",value:function(){this.addEventListenerOnMap(),this.$containter=this.mapService.getMapContainer()}},{key:"destroy",value:function(){this.hammertime&&this.hammertime.destroy(),this.removeEventListenerOnMap(),this.off(_p.Hover)}},{key:"triggerHover",value:function(t){var e=t.x,n=t.y;this.emit(_p.Hover,{x:e,y:n})}},{key:"triggerSelect",value:function(t){this.emit(_p.Select,{featureId:t})}},{key:"triggerActive",value:function(t){this.emit(_p.Active,{featureId:t})}},{key:"handleMiniEvent",value:function(t){this.onHover({clientX:t.touches[0].pageX,clientY:t.touches[0].pageY,type:"touch"})}},{key:"addEventListenerOnMap",value:function(){var t=this.mapService.getMapContainer();if(t)if(on)sn.document.addEventListener("touchstart",this.handleMiniEvent.bind(this));else{var e=new kp.a.Manager(t);e.add(new kp.a.Tap({event:"dblclick",taps:2})),e.add(new kp.a.Tap({event:"click"})),e.add(new kp.a.Pan({threshold:0,pointers:0})),e.add(new kp.a.Press({})),e.on("dblclick click",this.onHammer),e.on("panstart panmove panend pancancel",this.onDrag),t.addEventListener("mousemove",this.onHover),t.addEventListener("mousedown",this.onHover,!0),t.addEventListener("mouseup",this.onHover),t.addEventListener("contextmenu",this.onHover),this.hammertime=e}}},{key:"removeEventListenerOnMap",value:function(){if(on)sn.document.removeEventListener("touchstart",this.handleMiniEvent.bind(this));else{var t=this.mapService.getMapContainer();t&&(t.removeEventListener("mousemove",this.onHover),this.hammertime.off("dblclick click",this.onHammer),this.hammertime.off("panstart panmove panend pancancel",this.onDrag),t.removeEventListener("mousedown",this.onHover),t.removeEventListener("mouseup",this.onHover),t.removeEventListener("contextmenu",this.onHover))}}},{key:"interactionEvent",value:function(t){var e,n,r=t.type,i=t.pointerType;"touch"===i?(n=Math.floor(t.pointers[0].clientY),e=Math.floor(t.pointers[0].clientX)):(n=Math.floor(t.srcEvent.y),e=Math.floor(t.srcEvent.x));var o=this.mapService.getMapContainer();if(o){var a=o.getBoundingClientRect(),s=a.top,u=a.left;e-=u,n-=s}var c=this.mapService.containerToLngLat([e,n]);return{x:e,y:n,lngLat:c,type:r,target:t.srcEvent}}},{key:"isDoubleTap",value:function(t,e,n){var r=this,i=(new Date).getTime(),o="click";i-this.lastClickTime<400&&Math.abs(this.lastClickXY[0]-t)<10&&Math.abs(this.lastClickXY[1]-e)<10?(this.lastClickTime=0,this.lastClickXY=[-1,-1],this.clickTimer&&clearTimeout(this.clickTimer),o="dblclick",this.emit(_p.Hover,{x:t,y:e,lngLat:n,type:o})):(this.lastClickTime=i,this.lastClickXY=[t,e],this.clickTimer=setTimeout((function(){o="click",r.emit(_p.Hover,{x:t,y:e,lngLat:n,type:o})}),400))}}]),n}(gl.a),Sp=up(Ep.prototype,"mapService",[xp],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),wp=Ep))||wp),Xp=0;function qp(t){if(on)return null;var e=t;if("string"===typeof t&&(e=document.getElementById(t)),e){var n=document.createElement("div");return n.style.cssText+="\n      position: absolute;\n      z-index:2;\n      height: 100%;\n      width: 100%;\n      pointer-events: none;\n    ",n.id="l7-scene-".concat(Xp++),n.classList.add("l7-scene"),e.appendChild(n),n}return null}function Kp(t){var e,n,r=!0;return null===t||void 0===t||null===(e=t.target)||void 0===e||null===(n=e.path)||void 0===n||n.map((function(t){var e;null!==t&&void 0!==t&&t.classList&&(null===t||void 0===t||null===(e=t.classList)||void 0===e||e.forEach((function(t){"l7-marker"!==t&&"l7-popup"!==t||(r=!1)})))})),r}(function(t){t[t["DEPTH_BUFFER_BIT"]=256]="DEPTH_BUFFER_BIT",t[t["STENCIL_BUFFER_BIT"]=1024]="STENCIL_BUFFER_BIT",t[t["COLOR_BUFFER_BIT"]=16384]="COLOR_BUFFER_BIT",t[t["POINTS"]=0]="POINTS",t[t["LINES"]=1]="LINES",t[t["LINE_LOOP"]=2]="LINE_LOOP",t[t["LINE_STRIP"]=3]="LINE_STRIP",t[t["TRIANGLES"]=4]="TRIANGLES",t[t["TRIANGLE_STRIP"]=5]="TRIANGLE_STRIP",t[t["TRIANGLE_FAN"]=6]="TRIANGLE_FAN",t[t["ZERO"]=0]="ZERO",t[t["ONE"]=1]="ONE",t[t["SRC_COLOR"]=768]="SRC_COLOR",t[t["ONE_MINUS_SRC_COLOR"]=769]="ONE_MINUS_SRC_COLOR",t[t["SRC_ALPHA"]=770]="SRC_ALPHA",t[t["ONE_MINUS_SRC_ALPHA"]=771]="ONE_MINUS_SRC_ALPHA",t[t["DST_ALPHA"]=772]="DST_ALPHA",t[t["ONE_MINUS_DST_ALPHA"]=773]="ONE_MINUS_DST_ALPHA",t[t["DST_COLOR"]=774]="DST_COLOR",t[t["ONE_MINUS_DST_COLOR"]=775]="ONE_MINUS_DST_COLOR",t[t["SRC_ALPHA_SATURATE"]=776]="SRC_ALPHA_SATURATE",t[t["FUNC_ADD"]=32774]="FUNC_ADD",t[t["BLEND_EQUATION"]=32777]="BLEND_EQUATION",t[t["BLEND_EQUATION_RGB"]=32777]="BLEND_EQUATION_RGB",t[t["BLEND_EQUATION_ALPHA"]=34877]="BLEND_EQUATION_ALPHA",t[t["FUNC_SUBTRACT"]=32778]="FUNC_SUBTRACT",t[t["FUNC_REVERSE_SUBTRACT"]=32779]="FUNC_REVERSE_SUBTRACT",t[t["MAX_EXT"]=32776]="MAX_EXT",t[t["MIN_EXT"]=32775]="MIN_EXT",t[t["BLEND_DST_RGB"]=32968]="BLEND_DST_RGB",t[t["BLEND_SRC_RGB"]=32969]="BLEND_SRC_RGB",t[t["BLEND_DST_ALPHA"]=32970]="BLEND_DST_ALPHA",t[t["BLEND_SRC_ALPHA"]=32971]="BLEND_SRC_ALPHA",t[t["CONSTANT_COLOR"]=32769]="CONSTANT_COLOR",t[t["ONE_MINUS_CONSTANT_COLOR"]=32770]="ONE_MINUS_CONSTANT_COLOR",t[t["CONSTANT_ALPHA"]=32771]="CONSTANT_ALPHA",t[t["ONE_MINUS_CONSTANT_ALPHA"]=32772]="ONE_MINUS_CONSTANT_ALPHA",t[t["BLEND_COLOR"]=32773]="BLEND_COLOR",t[t["ARRAY_BUFFER"]=34962]="ARRAY_BUFFER",t[t["ELEMENT_ARRAY_BUFFER"]=34963]="ELEMENT_ARRAY_BUFFER",t[t["ARRAY_BUFFER_BINDING"]=34964]="ARRAY_BUFFER_BINDING",t[t["ELEMENT_ARRAY_BUFFER_BINDING"]=34965]="ELEMENT_ARRAY_BUFFER_BINDING",t[t["STREAM_DRAW"]=35040]="STREAM_DRAW",t[t["STATIC_DRAW"]=35044]="STATIC_DRAW",t[t["DYNAMIC_DRAW"]=35048]="DYNAMIC_DRAW",t[t["BUFFER_SIZE"]=34660]="BUFFER_SIZE",t[t["BUFFER_USAGE"]=34661]="BUFFER_USAGE",t[t["CURRENT_VERTEX_ATTRIB"]=34342]="CURRENT_VERTEX_ATTRIB",t[t["FRONT"]=1028]="FRONT",t[t["BACK"]=1029]="BACK",t[t["FRONT_AND_BACK"]=1032]="FRONT_AND_BACK",t[t["CULL_FACE"]=2884]="CULL_FACE",t[t["BLEND"]=3042]="BLEND",t[t["DITHER"]=3024]="DITHER",t[t["STENCIL_TEST"]=2960]="STENCIL_TEST",t[t["DEPTH_TEST"]=2929]="DEPTH_TEST",t[t["SCISSOR_TEST"]=3089]="SCISSOR_TEST",t[t["POLYGON_OFFSET_FILL"]=32823]="POLYGON_OFFSET_FILL",t[t["SAMPLE_ALPHA_TO_COVERAGE"]=32926]="SAMPLE_ALPHA_TO_COVERAGE",t[t["SAMPLE_COVERAGE"]=32928]="SAMPLE_COVERAGE",t[t["NO_ERROR"]=0]="NO_ERROR",t[t["INVALID_ENUM"]=1280]="INVALID_ENUM",t[t["INVALID_VALUE"]=1281]="INVALID_VALUE",t[t["INVALID_OPERATION"]=1282]="INVALID_OPERATION",t[t["OUT_OF_MEMORY"]=1285]="OUT_OF_MEMORY",t[t["CW"]=2304]="CW",t[t["CCW"]=2305]="CCW",t[t["LINE_WIDTH"]=2849]="LINE_WIDTH",t[t["ALIASED_POINT_SIZE_RANGE"]=33901]="ALIASED_POINT_SIZE_RANGE",t[t["ALIASED_LINE_WIDTH_RANGE"]=33902]="ALIASED_LINE_WIDTH_RANGE",t[t["CULL_FACE_MODE"]=2885]="CULL_FACE_MODE",t[t["FRONT_FACE"]=2886]="FRONT_FACE",t[t["DEPTH_RANGE"]=2928]="DEPTH_RANGE",t[t["DEPTH_WRITEMASK"]=2930]="DEPTH_WRITEMASK",t[t["DEPTH_CLEAR_VALUE"]=2931]="DEPTH_CLEAR_VALUE",t[t["DEPTH_FUNC"]=2932]="DEPTH_FUNC",t[t["STENCIL_CLEAR_VALUE"]=2961]="STENCIL_CLEAR_VALUE",t[t["STENCIL_FUNC"]=2962]="STENCIL_FUNC",t[t["STENCIL_FAIL"]=2964]="STENCIL_FAIL",t[t["STENCIL_PASS_DEPTH_FAIL"]=2965]="STENCIL_PASS_DEPTH_FAIL",t[t["STENCIL_PASS_DEPTH_PASS"]=2966]="STENCIL_PASS_DEPTH_PASS",t[t["STENCIL_REF"]=2967]="STENCIL_REF",t[t["STENCIL_VALUE_MASK"]=2963]="STENCIL_VALUE_MASK",t[t["STENCIL_WRITEMASK"]=2968]="STENCIL_WRITEMASK",t[t["STENCIL_BACK_FUNC"]=34816]="STENCIL_BACK_FUNC",t[t["STENCIL_BACK_FAIL"]=34817]="STENCIL_BACK_FAIL",t[t["STENCIL_BACK_PASS_DEPTH_FAIL"]=34818]="STENCIL_BACK_PASS_DEPTH_FAIL",t[t["STENCIL_BACK_PASS_DEPTH_PASS"]=34819]="STENCIL_BACK_PASS_DEPTH_PASS",t[t["STENCIL_BACK_REF"]=36003]="STENCIL_BACK_REF",t[t["STENCIL_BACK_VALUE_MASK"]=36004]="STENCIL_BACK_VALUE_MASK",t[t["STENCIL_BACK_WRITEMASK"]=36005]="STENCIL_BACK_WRITEMASK",t[t["VIEWPORT"]=2978]="VIEWPORT",t[t["SCISSOR_BOX"]=3088]="SCISSOR_BOX",t[t["COLOR_CLEAR_VALUE"]=3106]="COLOR_CLEAR_VALUE",t[t["COLOR_WRITEMASK"]=3107]="COLOR_WRITEMASK",t[t["UNPACK_ALIGNMENT"]=3317]="UNPACK_ALIGNMENT",t[t["PACK_ALIGNMENT"]=3333]="PACK_ALIGNMENT",t[t["MAX_TEXTURE_SIZE"]=3379]="MAX_TEXTURE_SIZE",t[t["MAX_VIEWPORT_DIMS"]=3386]="MAX_VIEWPORT_DIMS",t[t["SUBPIXEL_BITS"]=3408]="SUBPIXEL_BITS",t[t["RED_BITS"]=3410]="RED_BITS",t[t["GREEN_BITS"]=3411]="GREEN_BITS",t[t["BLUE_BITS"]=3412]="BLUE_BITS",t[t["ALPHA_BITS"]=3413]="ALPHA_BITS",t[t["DEPTH_BITS"]=3414]="DEPTH_BITS",t[t["STENCIL_BITS"]=3415]="STENCIL_BITS",t[t["POLYGON_OFFSET_UNITS"]=10752]="POLYGON_OFFSET_UNITS",t[t["POLYGON_OFFSET_FACTOR"]=32824]="POLYGON_OFFSET_FACTOR",t[t["TEXTURE_BINDING_2D"]=32873]="TEXTURE_BINDING_2D",t[t["SAMPLE_BUFFERS"]=32936]="SAMPLE_BUFFERS",t[t["SAMPLES"]=32937]="SAMPLES",t[t["SAMPLE_COVERAGE_VALUE"]=32938]="SAMPLE_COVERAGE_VALUE",t[t["SAMPLE_COVERAGE_INVERT"]=32939]="SAMPLE_COVERAGE_INVERT",t[t["COMPRESSED_TEXTURE_FORMATS"]=34467]="COMPRESSED_TEXTURE_FORMATS",t[t["DONT_CARE"]=4352]="DONT_CARE",t[t["FASTEST"]=4353]="FASTEST",t[t["NICEST"]=4354]="NICEST",t[t["GENERATE_MIPMAP_HINT"]=33170]="GENERATE_MIPMAP_HINT",t[t["BYTE"]=5120]="BYTE",t[t["UNSIGNED_BYTE"]=5121]="UNSIGNED_BYTE",t[t["SHORT"]=5122]="SHORT",t[t["UNSIGNED_SHORT"]=5123]="UNSIGNED_SHORT",t[t["INT"]=5124]="INT",t[t["UNSIGNED_INT"]=5125]="UNSIGNED_INT",t[t["FLOAT"]=5126]="FLOAT",t[t["DEPTH_COMPONENT"]=6402]="DEPTH_COMPONENT",t[t["ALPHA"]=6406]="ALPHA",t[t["RGB"]=6407]="RGB",t[t["RGBA"]=6408]="RGBA",t[t["LUMINANCE"]=6409]="LUMINANCE",t[t["LUMINANCE_ALPHA"]=6410]="LUMINANCE_ALPHA",t[t["UNSIGNED_SHORT_4_4_4_4"]=32819]="UNSIGNED_SHORT_4_4_4_4",t[t["UNSIGNED_SHORT_5_5_5_1"]=32820]="UNSIGNED_SHORT_5_5_5_1",t[t["UNSIGNED_SHORT_5_6_5"]=33635]="UNSIGNED_SHORT_5_6_5",t[t["FRAGMENT_SHADER"]=35632]="FRAGMENT_SHADER",t[t["VERTEX_SHADER"]=35633]="VERTEX_SHADER",t[t["MAX_VERTEX_ATTRIBS"]=34921]="MAX_VERTEX_ATTRIBS",t[t["MAX_VERTEX_UNIFORM_VECTORS"]=36347]="MAX_VERTEX_UNIFORM_VECTORS",t[t["MAX_VARYING_VECTORS"]=36348]="MAX_VARYING_VECTORS",t[t["MAX_COMBINED_TEXTURE_IMAGE_UNITS"]=35661]="MAX_COMBINED_TEXTURE_IMAGE_UNITS",t[t["MAX_VERTEX_TEXTURE_IMAGE_UNITS"]=35660]="MAX_VERTEX_TEXTURE_IMAGE_UNITS",t[t["MAX_TEXTURE_IMAGE_UNITS"]=34930]="MAX_TEXTURE_IMAGE_UNITS",t[t["MAX_FRAGMENT_UNIFORM_VECTORS"]=36349]="MAX_FRAGMENT_UNIFORM_VECTORS",t[t["SHADER_TYPE"]=35663]="SHADER_TYPE",t[t["DELETE_STATUS"]=35712]="DELETE_STATUS",t[t["LINK_STATUS"]=35714]="LINK_STATUS",t[t["VALIDATE_STATUS"]=35715]="VALIDATE_STATUS",t[t["ATTACHED_SHADERS"]=35717]="ATTACHED_SHADERS",t[t["ACTIVE_UNIFORMS"]=35718]="ACTIVE_UNIFORMS",t[t["ACTIVE_ATTRIBUTES"]=35721]="ACTIVE_ATTRIBUTES",t[t["SHADING_LANGUAGE_VERSION"]=35724]="SHADING_LANGUAGE_VERSION",t[t["CURRENT_PROGRAM"]=35725]="CURRENT_PROGRAM",t[t["NEVER"]=512]="NEVER",t[t["LESS"]=513]="LESS",t[t["EQUAL"]=514]="EQUAL",t[t["LEQUAL"]=515]="LEQUAL",t[t["GREATER"]=516]="GREATER",t[t["NOTEQUAL"]=517]="NOTEQUAL",t[t["GEQUAL"]=518]="GEQUAL",t[t["ALWAYS"]=519]="ALWAYS",t[t["KEEP"]=7680]="KEEP",t[t["REPLACE"]=7681]="REPLACE",t[t["INCR"]=7682]="INCR",t[t["DECR"]=7683]="DECR",t[t["INVERT"]=5386]="INVERT",t[t["INCR_WRAP"]=34055]="INCR_WRAP",t[t["DECR_WRAP"]=34056]="DECR_WRAP",t[t["VENDOR"]=7936]="VENDOR",t[t["RENDERER"]=7937]="RENDERER",t[t["VERSION"]=7938]="VERSION",t[t["NEAREST"]=9728]="NEAREST",t[t["LINEAR"]=9729]="LINEAR",t[t["NEAREST_MIPMAP_NEAREST"]=9984]="NEAREST_MIPMAP_NEAREST",t[t["LINEAR_MIPMAP_NEAREST"]=9985]="LINEAR_MIPMAP_NEAREST",t[t["NEAREST_MIPMAP_LINEAR"]=9986]="NEAREST_MIPMAP_LINEAR",t[t["LINEAR_MIPMAP_LINEAR"]=9987]="LINEAR_MIPMAP_LINEAR",t[t["TEXTURE_MAG_FILTER"]=10240]="TEXTURE_MAG_FILTER",t[t["TEXTURE_MIN_FILTER"]=10241]="TEXTURE_MIN_FILTER",t[t["TEXTURE_WRAP_S"]=10242]="TEXTURE_WRAP_S",t[t["TEXTURE_WRAP_T"]=10243]="TEXTURE_WRAP_T",t[t["TEXTURE_2D"]=3553]="TEXTURE_2D",t[t["TEXTURE"]=5890]="TEXTURE",t[t["TEXTURE_CUBE_MAP"]=34067]="TEXTURE_CUBE_MAP",t[t["TEXTURE_BINDING_CUBE_MAP"]=34068]="TEXTURE_BINDING_CUBE_MAP",t[t["TEXTURE_CUBE_MAP_POSITIVE_X"]=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",t[t["TEXTURE_CUBE_MAP_NEGATIVE_X"]=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",t[t["TEXTURE_CUBE_MAP_POSITIVE_Y"]=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",t[t["TEXTURE_CUBE_MAP_NEGATIVE_Y"]=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",t[t["TEXTURE_CUBE_MAP_POSITIVE_Z"]=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",t[t["TEXTURE_CUBE_MAP_NEGATIVE_Z"]=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",t[t["MAX_CUBE_MAP_TEXTURE_SIZE"]=34076]="MAX_CUBE_MAP_TEXTURE_SIZE",t[t["TEXTURE0"]=33984]="TEXTURE0",t[t["TEXTURE1"]=33985]="TEXTURE1",t[t["TEXTURE2"]=33986]="TEXTURE2",t[t["TEXTURE3"]=33987]="TEXTURE3",t[t["TEXTURE4"]=33988]="TEXTURE4",t[t["TEXTURE5"]=33989]="TEXTURE5",t[t["TEXTURE6"]=33990]="TEXTURE6",t[t["TEXTURE7"]=33991]="TEXTURE7",t[t["TEXTURE8"]=33992]="TEXTURE8",t[t["TEXTURE9"]=33993]="TEXTURE9",t[t["TEXTURE10"]=33994]="TEXTURE10",t[t["TEXTURE11"]=33995]="TEXTURE11",t[t["TEXTURE12"]=33996]="TEXTURE12",t[t["TEXTURE13"]=33997]="TEXTURE13",t[t["TEXTURE14"]=33998]="TEXTURE14",t[t["TEXTURE15"]=33999]="TEXTURE15",t[t["TEXTURE16"]=34e3]="TEXTURE16",t[t["TEXTURE17"]=34001]="TEXTURE17",t[t["TEXTURE18"]=34002]="TEXTURE18",t[t["TEXTURE19"]=34003]="TEXTURE19",t[t["TEXTURE20"]=34004]="TEXTURE20",t[t["TEXTURE21"]=34005]="TEXTURE21",t[t["TEXTURE22"]=34006]="TEXTURE22",t[t["TEXTURE23"]=34007]="TEXTURE23",t[t["TEXTURE24"]=34008]="TEXTURE24",t[t["TEXTURE25"]=34009]="TEXTURE25",t[t["TEXTURE26"]=34010]="TEXTURE26",t[t["TEXTURE27"]=34011]="TEXTURE27",t[t["TEXTURE28"]=34012]="TEXTURE28",t[t["TEXTURE29"]=34013]="TEXTURE29",t[t["TEXTURE30"]=34014]="TEXTURE30",t[t["TEXTURE31"]=34015]="TEXTURE31",t[t["ACTIVE_TEXTURE"]=34016]="ACTIVE_TEXTURE",t[t["REPEAT"]=10497]="REPEAT",t[t["CLAMP_TO_EDGE"]=33071]="CLAMP_TO_EDGE",t[t["MIRRORED_REPEAT"]=33648]="MIRRORED_REPEAT",t[t["FLOAT_VEC2"]=35664]="FLOAT_VEC2",t[t["FLOAT_VEC3"]=35665]="FLOAT_VEC3",t[t["FLOAT_VEC4"]=35666]="FLOAT_VEC4",t[t["INT_VEC2"]=35667]="INT_VEC2",t[t["INT_VEC3"]=35668]="INT_VEC3",t[t["INT_VEC4"]=35669]="INT_VEC4",t[t["BOOL"]=35670]="BOOL",t[t["BOOL_VEC2"]=35671]="BOOL_VEC2",t[t["BOOL_VEC3"]=35672]="BOOL_VEC3",t[t["BOOL_VEC4"]=35673]="BOOL_VEC4",t[t["FLOAT_MAT2"]=35674]="FLOAT_MAT2",t[t["FLOAT_MAT3"]=35675]="FLOAT_MAT3",t[t["FLOAT_MAT4"]=35676]="FLOAT_MAT4",t[t["SAMPLER_2D"]=35678]="SAMPLER_2D",t[t["SAMPLER_CUBE"]=35680]="SAMPLER_CUBE",t[t["VERTEX_ATTRIB_ARRAY_ENABLED"]=34338]="VERTEX_ATTRIB_ARRAY_ENABLED",t[t["VERTEX_ATTRIB_ARRAY_SIZE"]=34339]="VERTEX_ATTRIB_ARRAY_SIZE",t[t["VERTEX_ATTRIB_ARRAY_STRIDE"]=34340]="VERTEX_ATTRIB_ARRAY_STRIDE",t[t["VERTEX_ATTRIB_ARRAY_TYPE"]=34341]="VERTEX_ATTRIB_ARRAY_TYPE",t[t["VERTEX_ATTRIB_ARRAY_NORMALIZED"]=34922]="VERTEX_ATTRIB_ARRAY_NORMALIZED",t[t["VERTEX_ATTRIB_ARRAY_POINTER"]=34373]="VERTEX_ATTRIB_ARRAY_POINTER",t[t["VERTEX_ATTRIB_ARRAY_BUFFER_BINDING"]=34975]="VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",t[t["COMPILE_STATUS"]=35713]="COMPILE_STATUS",t[t["LOW_FLOAT"]=36336]="LOW_FLOAT",t[t["MEDIUM_FLOAT"]=36337]="MEDIUM_FLOAT",t[t["HIGH_FLOAT"]=36338]="HIGH_FLOAT",t[t["LOW_INT"]=36339]="LOW_INT",t[t["MEDIUM_INT"]=36340]="MEDIUM_INT",t[t["HIGH_INT"]=36341]="HIGH_INT",t[t["FRAMEBUFFER"]=36160]="FRAMEBUFFER",t[t["RENDERBUFFER"]=36161]="RENDERBUFFER",t[t["RGBA4"]=32854]="RGBA4",t[t["RGB5_A1"]=32855]="RGB5_A1",t[t["RGB565"]=36194]="RGB565",t[t["DEPTH_COMPONENT16"]=33189]="DEPTH_COMPONENT16",t[t["STENCIL_INDEX"]=6401]="STENCIL_INDEX",t[t["STENCIL_INDEX8"]=36168]="STENCIL_INDEX8",t[t["DEPTH_STENCIL"]=34041]="DEPTH_STENCIL",t[t["RENDERBUFFER_WIDTH"]=36162]="RENDERBUFFER_WIDTH",t[t["RENDERBUFFER_HEIGHT"]=36163]="RENDERBUFFER_HEIGHT",t[t["RENDERBUFFER_INTERNAL_FORMAT"]=36164]="RENDERBUFFER_INTERNAL_FORMAT",t[t["RENDERBUFFER_RED_SIZE"]=36176]="RENDERBUFFER_RED_SIZE",t[t["RENDERBUFFER_GREEN_SIZE"]=36177]="RENDERBUFFER_GREEN_SIZE",t[t["RENDERBUFFER_BLUE_SIZE"]=36178]="RENDERBUFFER_BLUE_SIZE",t[t["RENDERBUFFER_ALPHA_SIZE"]=36179]="RENDERBUFFER_ALPHA_SIZE",t[t["RENDERBUFFER_DEPTH_SIZE"]=36180]="RENDERBUFFER_DEPTH_SIZE",t[t["RENDERBUFFER_STENCIL_SIZE"]=36181]="RENDERBUFFER_STENCIL_SIZE",t[t["FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE"]=36048]="FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",t[t["FRAMEBUFFER_ATTACHMENT_OBJECT_NAME"]=36049]="FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",t[t["FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL"]=36050]="FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",t[t["FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE"]=36051]="FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",t[t["COLOR_ATTACHMENT0"]=36064]="COLOR_ATTACHMENT0",t[t["DEPTH_ATTACHMENT"]=36096]="DEPTH_ATTACHMENT",t[t["STENCIL_ATTACHMENT"]=36128]="STENCIL_ATTACHMENT",t[t["DEPTH_STENCIL_ATTACHMENT"]=33306]="DEPTH_STENCIL_ATTACHMENT",t[t["NONE"]=0]="NONE",t[t["FRAMEBUFFER_COMPLETE"]=36053]="FRAMEBUFFER_COMPLETE",t[t["FRAMEBUFFER_INCOMPLETE_ATTACHMENT"]=36054]="FRAMEBUFFER_INCOMPLETE_ATTACHMENT",t[t["FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT"]=36055]="FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",t[t["FRAMEBUFFER_INCOMPLETE_DIMENSIONS"]=36057]="FRAMEBUFFER_INCOMPLETE_DIMENSIONS",t[t["FRAMEBUFFER_UNSUPPORTED"]=36061]="FRAMEBUFFER_UNSUPPORTED",t[t["FRAMEBUFFER_BINDING"]=36006]="FRAMEBUFFER_BINDING",t[t["RENDERBUFFER_BINDING"]=36007]="RENDERBUFFER_BINDING",t[t["MAX_RENDERBUFFER_SIZE"]=34024]="MAX_RENDERBUFFER_SIZE",t[t["INVALID_FRAMEBUFFER_OPERATION"]=1286]="INVALID_FRAMEBUFFER_OPERATION",t[t["UNPACK_FLIP_Y_WEBGL"]=37440]="UNPACK_FLIP_Y_WEBGL",t[t["UNPACK_PREMULTIPLY_ALPHA_WEBGL"]=37441]="UNPACK_PREMULTIPLY_ALPHA_WEBGL",t[t["CONTEXT_LOST_WEBGL"]=37442]="CONTEXT_LOST_WEBGL",t[t["UNPACK_COLORSPACE_CONVERSION_WEBGL"]=37443]="UNPACK_COLORSPACE_CONVERSION_WEBGL",t[t["BROWSER_DEFAULT_WEBGL"]=37444]="BROWSER_DEFAULT_WEBGL"})(Rp||(Rp={}));var Qp,$p,Jp,td,ed,nd,rd,id=(jp=Object(Yf["injectable"])(),Ip=Object(Yf["inject"])(Kf.IMapService),Lp=Object(Yf["inject"])(Kf.IRendererService),Np=Object(Yf["inject"])(Kf.IGlobalConfigService),Dp=Object(Yf["inject"])(Kf.IInteractionService),Fp=Object(Yf["inject"])(Kf.ILayerService),jp((zp=function(){function t(){var e=this;Object(et["a"])(this,t),Object(Ar["a"])(this,"pickedColors",void 0),Object(Ar["a"])(this,"pickedTileLayers",[]),sp(this,"mapService",Up,this),sp(this,"rendererService",Vp,this),sp(this,"configService",Hp,this),sp(this,"interactionService",Gp,this),sp(this,"layerService",Wp,this),Object(Ar["a"])(this,"pickingFBO",void 0),Object(Ar["a"])(this,"width",0),Object(Ar["a"])(this,"height",0),Object(Ar["a"])(this,"alreadyInPicking",!1),Object(Ar["a"])(this,"pickBufferScale",1),Object(Ar["a"])(this,"pickFromPickingFBO",(function(t,n){var i=n.x,o=n.y,a=n.lngLat,s=n.type,u=n.target,c=!1,l=e.rendererService,f=l.readPixels,h=l.getContainer,p=e.getContainerSize(h()),d=p.width,v=p.height;d*=r.DPR,v*=r.DPR;var g=t.getLayerConfig(),m=g.enableHighlight,y=g.enableSelect,_=i*r.DPR,b=o*r.DPR;if(_>d-1*r.DPR||_<0||b>v-1*r.DPR||b<0)return!1;var x=f({x:Math.floor(_/e.pickBufferScale),y:Math.floor((v-(o+1)*r.DPR)/e.pickBufferScale),width:1,height:1,data:new Uint8Array(4),framebuffer:e.pickingFBO});if(e.pickedColors=x,0!==x[0]||0!==x[1]||0!==x[2]){var w=fi(x),E=t.layerPickService.getFeatureById(w);w!==t.getCurrentPickId()&&"mousemove"===s&&(s="mouseenter");var S={x:i,y:o,type:s,lngLat:a,featureId:w,feature:E,target:u};E&&(c=!0,t.setCurrentPickId(w),e.triggerHoverOnLayer(t,S))}else{var O={x:i,y:o,lngLat:a,type:null!==t.getCurrentPickId()&&"mousemove"===s?"mouseout":"un"+s,featureId:null,target:u,feature:null};e.triggerHoverOnLayer(t,Object(P["a"])(Object(P["a"])({},O),{},{type:"unpick"})),e.triggerHoverOnLayer(t,O),t.setCurrentPickId(null)}if(m&&t.layerPickService.highlightPickedFeature(x),y&&"click"===s&&(null===x||void 0===x?void 0:x.toString())!==[0,0,0,0].toString()){var C=fi(x);null===t.getCurrentSelectedId()||C!==t.getCurrentSelectedId()?(t.layerPickService.selectFeature(x),t.setCurrentSelectedId(C)):(t.layerPickService.selectFeature(new Uint8Array([0,0,0,0])),t.setCurrentSelectedId(null))}return c}))}return Object(nt["a"])(t,[{key:"init",value:function(t){var e=this.rendererService,n=e.createTexture2D,i=e.createFramebuffer,o=e.getContainer,a=this.getContainerSize(o()),s=a.width,u=a.height;s*=r.DPR,u*=r.DPR,this.pickBufferScale=this.configService.getSceneConfig(t).pickBufferScale||1,this.pickingFBO=i({color:n({width:Math.round(s/this.pickBufferScale),height:Math.round(u/this.pickBufferScale),wrapS:Rp.CLAMP_TO_EDGE,wrapT:Rp.CLAMP_TO_EDGE})}),this.interactionService.on(_p.Hover,this.pickingAllLayer.bind(this))}},{key:"boxPickLayer",value:function(){var t=Object(mi["a"])(_i.a.mark((function t(e,n,r){var i,o,a,s=this;return _i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:i=this.rendererService,o=i.useFramebuffer,a=i.clear,this.resizePickingFBO(),o(this.pickingFBO,(function(){a({framebuffer:s.pickingFBO,color:[0,0,0,0],stencil:0,depth:1}),e.hooks.beforePickingEncode.call(),e.renderModels(),e.hooks.afterPickingEncode.call();var t=s.pickBox(e,n);r(t)}));case 3:case"end":return t.stop()}}),t,this)})));function e(e,n,r){return t.apply(this,arguments)}return e}()},{key:"pickBox",value:function(t,e){var n=this,i=e.map((function(t){var e=t<0?0:t;return Math.floor(e*r.DPR/n.pickBufferScale)})),o=Object(q["a"])(i,4),a=o[0],s=o[1],u=o[2],c=o[3],l=this.rendererService,f=l.readPixels,h=l.getContainer,p=this.getContainerSize(h()),d=p.width,v=p.height;if(d*=r.DPR,v*=r.DPR,a>(d-1)*r.DPR/this.pickBufferScale||u<0||s>(v-1)*r.DPR/this.pickBufferScale||c<0)return[];for(var g=Math.min(d/this.pickBufferScale,u)-a,m=Math.min(v/this.pickBufferScale,c)-s,y=f({x:a,y:Math.floor(v/this.pickBufferScale-(c+1)),width:g,height:m,data:new Uint8Array(g*m*4),framebuffer:this.pickingFBO}),_=[],b={},x=0;x<y.length/4;x+=1){var w=y.slice(4*x,4*x+4),E=fi(w);if(-1!==E&&!b[E]){var S=t.layerPickService.getFeatureById(E);_.push(Object(P["a"])(Object(P["a"])({},S),{},{pickedFeatureIdx:E})),b[E]=!0}}return _}},{key:"handleCursor",value:function(t,e){var n=t.getLayerConfig(),r=n.cursor,i=void 0===r?"":r,o=n.cursorEnabled;if(o){var a=this.mapService.version,s="GAODE2.x"===a?this.mapService.getMapContainer():this.mapService.getMarkerContainer(),u=null===s||void 0===s?void 0:s.style.getPropertyValue("cursor");"unmousemove"===e&&""!==u?null===s||void 0===s||s.style.setProperty("cursor",""):"mousemove"===e&&(null===s||void 0===s||s.style.setProperty("cursor",i))}}},{key:"destroy",value:function(){this.pickingFBO.destroy(),this.pickingFBO=null}},{key:"getContainerSize",value:function(t){return t.getContext?{width:t.width/r.DPR,height:t.height/r.DPR}:t.getBoundingClientRect()}},{key:"pickingAllLayer",value:function(){var t=Object(mi["a"])(_i.a.mark((function t(e){return _i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this.layerService.needPick(e.type)&&this.isPickingAllLayer()){t.next=2;break}return t.abrupt("return");case 2:return this.alreadyInPicking=!0,t.next=5,this.pickingLayers(e);case 5:this.layerService.renderLayers(),this.alreadyInPicking=!1;case 7:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"isPickingAllLayer",value:function(){return!this.alreadyInPicking&&(!this.layerService.alreadyInRendering&&(!this.interactionService.indragging&&!!this.layerService.getShaderPickStat()))}},{key:"resizePickingFBO",value:function(){var t=this.rendererService.getContainer,e=this.getContainerSize(t()),n=e.width,i=e.height;n*=r.DPR,i*=r.DPR,this.width===n&&this.height===i||(this.pickingFBO.resize({width:Math.round(n/this.pickBufferScale),height:Math.round(i/this.pickBufferScale)}),this.width=n,this.height=i)}},{key:"pickingLayers",value:function(){var t=Object(mi["a"])(_i.a.mark((function t(e){var n,r,i,o=this;return _i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:n=this.rendererService,r=n.useFramebuffer,i=n.clear,this.resizePickingFBO(),r(this.pickingFBO,(function(){var t=o.layerService.getRenderList();t.filter((function(t){return t.needPick(e.type)})).reverse().some((function(t){i({framebuffer:o.pickingFBO,color:[0,0,0,0],stencil:0,depth:1}),t.layerPickService.pickRender(e);var n=o.pickFromPickingFBO(t,e);return o.layerService.pickedLayerId=n?+t.id:-1,n&&!t.getLayerConfig().enablePropagation}))}));case 3:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"triggerHoverOnLayer",value:function(t,e){Kp(e)&&(this.handleCursor(t,e.type),t.emit(e.type,e))}}]),t}(),Up=up(zp.prototype,"mapService",[Ip],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Vp=up(zp.prototype,"rendererService",[Lp],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Hp=up(zp.prototype,"configService",[Np],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Gp=up(zp.prototype,"interactionService",[Dp],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Wp=up(zp.prototype,"layerService",[Fp],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Bp=zp))||Bp),od=function(){function t(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];Object(et["a"])(this,t),Object(Ar["a"])(this,"autoStart",void 0),Object(Ar["a"])(this,"startTime",0),Object(Ar["a"])(this,"oldTime",0),Object(Ar["a"])(this,"running",!1),Object(Ar["a"])(this,"elapsedTime",0),this.autoStart=e}return Object(nt["a"])(t,[{key:"start",value:function(){this.startTime=("undefined"===typeof performance?Date:performance).now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}},{key:"stop",value:function(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}},{key:"getElapsedTime",value:function(){return this.getDelta(),this.elapsedTime}},{key:"getDelta",value:function(){var t=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){var e=("undefined"===typeof performance?Date:performance).now();t=(e-this.oldTime)/1e3,this.oldTime=e,this.elapsedTime+=t}return t}}]),t}();function ad(t,e){var n="undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=sd(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n["return"]||n["return"]()}finally{if(s)throw o}}}}function sd(t,e){if(t){if("string"===typeof t)return ud(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ud(t,e):void 0}}function ud(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function cd(t){var e=ld();return function(){var n,r=Object(ct["a"])(t);if(e){var i=Object(ct["a"])(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(ut["a"])(this,n)}}function ld(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}var fd,hd,pd,dd,vd,gd,md,yd,_d,bd,xd,wd,Ed,Sd,Od,Cd,Td,Ad,kd,Md,Pd,Rd,jd,Id,Ld,Nd,Dd,Fd,Bd,zd,Ud,Vd,Hd,Gd,Wd,Zd,Yd,Xd,qd,Kd=(Qp=Object(Yf["injectable"])(),$p=Object(Yf["inject"])(Kf.IRendererService),Jp=Object(Yf["inject"])(Kf.IMapService),Qp((ed=function(t){Object(st["a"])(n,t);var e=cd(n);function n(){var t;Object(et["a"])(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return t=e.call.apply(e,[this].concat(i)),Object(Ar["a"])(Object(ft["a"])(t),"pickedLayerId",-1),Object(Ar["a"])(Object(ft["a"])(t),"clock",new od),Object(Ar["a"])(Object(ft["a"])(t),"alreadyInRendering",!1),Object(Ar["a"])(Object(ft["a"])(t),"layers",[]),Object(Ar["a"])(Object(ft["a"])(t),"layerList",[]),Object(Ar["a"])(Object(ft["a"])(t),"layerRenderID",void 0),Object(Ar["a"])(Object(ft["a"])(t),"sceneInited",!1),Object(Ar["a"])(Object(ft["a"])(t),"animateInstanceCount",0),Object(Ar["a"])(Object(ft["a"])(t),"shaderPicking",!0),Object(Ar["a"])(Object(ft["a"])(t),"enableRender",!0),sp(Object(ft["a"])(t),"renderService",nd,Object(ft["a"])(t)),sp(Object(ft["a"])(t),"mapService",rd,Object(ft["a"])(t)),Object(Ar["a"])(Object(ft["a"])(t),"reRender",Object(K["throttle"])((function(){t.updateLayerRenderList(),t.renderLayers()}),32)),Object(Ar["a"])(Object(ft["a"])(t),"throttleRenderLayers",Object(K["throttle"])((function(){t.renderLayers()}),16)),t}return Object(nt["a"])(n,[{key:"needPick",value:function(t){return this.layerList.some((function(e){return e.needPick(t)}))}},{key:"add",value:function(t){var e=this;this.layers.push(t),this.sceneInited&&t.init().then((function(){e.updateLayerRenderList(),e.renderLayers()}))}},{key:"addMask",value:function(t){var e=this;this.sceneInited&&t.init().then((function(){e.renderLayers()}))}},{key:"initLayers",value:function(){var t=Object(mi["a"])(_i.a.mark((function t(){var e=this;return _i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.sceneInited=!0,this.layers.forEach(function(){var t=Object(mi["a"])(_i.a.mark((function t(n){return _i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n.startInit){t.next=4;break}return t.next=3,n.init();case 3:e.updateLayerRenderList();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 2:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"getSceneInited",value:function(){return this.sceneInited}},{key:"getRenderList",value:function(){return this.layerList}},{key:"getLayers",value:function(){return this.layers}},{key:"getLayer",value:function(t){return this.layers.find((function(e){return e.id===t}))}},{key:"getLayerByName",value:function(t){return this.layers.find((function(e){return e.name===t}))}},{key:"remove",value:function(t,e){if(e){var n=e.layerChildren.indexOf(t);n>-1&&e.layerChildren.splice(n,1)}else{var r=this.layers.indexOf(t);r>-1&&this.layers.splice(r,1)}this.updateLayerRenderList(),t.destroy(),this.renderLayers(),this.emit("layerChange",this.layers)}},{key:"removeAllLayers",value:function(){this.destroy(),this.renderLayers()}},{key:"setEnableRender",value:function(t){this.enableRender=t}},{key:"renderLayers",value:function(){var t=Object(mi["a"])(_i.a.mark((function t(){var e,n,r;return _i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!this.alreadyInRendering&&this.enableRender){t.next=2;break}return t.abrupt("return");case 2:this.alreadyInRendering=!0,this.clear(),e=ad(this.layerList),t.prev=5,e.s();case 7:if((n=e.n()).done){t.next=19;break}if(r=n.value,r.masks.filter((function(t){return t.inited})).length>0&&(this.renderService.clear({stencil:0,depth:1,framebuffer:null}),r.masks.map(function(){var t=Object(mi["a"])(_i.a.mark((function t(e){return _i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.render();case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),!r.getLayerConfig().enableMultiPassRenderer){t.next=15;break}return t.next=13,r.renderMultiPass();case 13:t.next=17;break;case 15:return t.next=17,r.render();case 17:t.next=7;break;case 19:t.next=24;break;case 21:t.prev=21,t.t0=t["catch"](5),e.e(t.t0);case 24:return t.prev=24,e.f(),t.finish(24);case 27:this.alreadyInRendering=!1;case 28:case"end":return t.stop()}}),t,this,[[5,21,24,27]])})));function e(){return t.apply(this,arguments)}return e}()},{key:"renderMask",value:function(t){t.filter((function(t){return t.inited})).map((function(t){t.render()}))}},{key:"beforeRenderData",value:function(){var t=Object(mi["a"])(_i.a.mark((function t(e){var n;return _i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.hooks.beforeRenderData.promise();case 2:n=t.sent,n&&this.renderLayers();case 4:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"renderLayer",value:function(){var t=Object(mi["a"])(_i.a.mark((function t(e){var n=this;return _i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.masks.filter((function(t){return t.inited})).length>0&&e.masks.map((function(t){n.renderService.clear({stencil:0,depth:1,framebuffer:null}),t.render()})),!e.getLayerConfig().enableMultiPassRenderer){t.next=6;break}return t.next=4,e.renderMultiPass();case 4:t.next=8;break;case 6:return t.next=8,e.render();case 8:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"updateLayerRenderList",value:function(){var t=this;this.layerList=[],this.layers.filter((function(t){return t.inited})).filter((function(t){return t.isVisible()})).sort((function(t,e){return t.zIndex-e.zIndex})).forEach((function(e){t.layerList.push(e)}))}},{key:"destroy",value:function(){this.layers.forEach((function(t){t.destroy()})),this.layers=[],this.layerList=[],this.emit("layerChange",this.layers)}},{key:"startAnimate",value:function(){0===this.animateInstanceCount++&&(this.clock.start(),this.runRender())}},{key:"stopAnimate",value:function(){0===--this.animateInstanceCount&&(this.stopRender(),this.clock.stop())}},{key:"getOESTextureFloat",value:function(){return this.renderService.extensionObject.OES_texture_float}},{key:"enableShaderPick",value:function(){this.shaderPicking=!0}},{key:"disableShaderPick",value:function(){this.shaderPicking=!1}},{key:"getShaderPickStat",value:function(){return this.shaderPicking}},{key:"clear",value:function(){var t=li(this.mapService.bgColor);this.renderService.clear({color:t,depth:1,stencil:0,framebuffer:null})}},{key:"runRender",value:function(){this.renderLayers(),this.layerRenderID=sn.requestAnimationFrame(this.runRender.bind(this))}},{key:"stopRender",value:function(){sn.cancelAnimationFrame(this.layerRenderID)}}]),n}(vl["EventEmitter"]),nd=up(ed.prototype,"renderService",[$p],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),rd=up(ed.prototype,"mapService",[Jp],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),td=ed))||td),Qd=function(){function t(e){var n=this;Object(et["a"])(this,t),Object(Ar["a"])(this,"name",void 0),Object(Ar["a"])(this,"type",void 0),Object(Ar["a"])(this,"scale",void 0),Object(Ar["a"])(this,"descriptor",void 0),Object(Ar["a"])(this,"featureBufferLayout",[]),Object(Ar["a"])(this,"needRescale",!1),Object(Ar["a"])(this,"needRemapping",!1),Object(Ar["a"])(this,"needRegenerateVertices",!1),Object(Ar["a"])(this,"featureRange",{startIndex:0,endIndex:1/0}),Object(Ar["a"])(this,"vertexAttribute",void 0),Object(Ar["a"])(this,"defaultCallback",(function(t){var e;return 0===t.length?(null===(e=n.scale)||void 0===e?void 0:e.defaultValues)||[]:t.map((function(t,e){var r,i=null===(r=n.scale)||void 0===r?void 0:r.scalers[e].func,o=i(t);return o}))})),this.setProps(e)}return Object(nt["a"])(t,[{key:"setProps",value:function(t){Object.assign(this,t)}},{key:"mapping",value:function(t){var e;if(null!==(e=this.scale)&&void 0!==e&&e.callback){var n,r=null===(n=this.scale)||void 0===n?void 0:n.callback.apply(n,Object(M["a"])(t));if(!Object(K["isNil"])(r))return[r]}return this.defaultCallback(t)}},{key:"resetDescriptor",value:function(){this.descriptor&&(this.descriptor.buffer.data=[])}}]),t}(),$d=["modelType"],Jd=["buffer","update","name"],tv=["buffer","update","name"],ev=["buffer","update","name"],nv=(fd={},Object(Ar["a"])(fd,Rp.FLOAT,4),Object(Ar["a"])(fd,Rp.UNSIGNED_BYTE,1),Object(Ar["a"])(fd,Rp.UNSIGNED_SHORT,2),fd),rv=(hd=Object(Yf["injectable"])(),pd=Object(Yf["inject"])(Kf.IRendererService),hd((vd=function(){function t(){Object(et["a"])(this,t),Object(Ar["a"])(this,"attributesAndIndices",void 0),sp(this,"rendererService",gd,this),Object(Ar["a"])(this,"attributes",[]),Object(Ar["a"])(this,"triangulation",void 0),Object(Ar["a"])(this,"featureLayout",{sizePerElement:0,elements:[]})}return Object(nt["a"])(t,[{key:"registerStyleAttribute",value:function(t){var e=this.getLayerStyleAttribute(t.name||"");return e?e.setProps(t):(e=new Qd(t),this.attributes.push(e)),e}},{key:"updateStyleAttribute",value:function(t,e,n){var r=this.getLayerStyleAttribute(t);r||(r=this.registerStyleAttribute(Object(P["a"])(Object(P["a"])({},e),{},{name:t})));var i=e.scale;i&&r&&(r.scale=i,r.needRescale=!0,r.needRemapping=!0,r.needRegenerateVertices=!0,n&&n.featureRange&&(r.featureRange=n.featureRange))}},{key:"getLayerStyleAttributes",value:function(){return this.attributes}},{key:"getLayerStyleAttribute",value:function(t){return this.attributes.find((function(e){return e.name===t}))}},{key:"getLayerAttributeScale",value:function(t){var e,n=this.getLayerStyleAttribute(t),r=null===n||void 0===n||null===(e=n.scale)||void 0===e?void 0:e.scalers;return r&&r[0]?r[0].func:null}},{key:"updateAttributeByFeatureRange",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0,o=this.attributes.find((function(e){return e.name===t}));if(o&&o.descriptor){var a=o.descriptor,s=a.update,u=a.buffer,c=a.size,l=void 0===c?0:c,f=nv[u.type||Rp.FLOAT];if(s){var h=this.featureLayout,p=h.elements,d=h.sizePerElement,v=p.slice(n,r);if(!v.length)return;var g=v[0].offset,m=g*l*f,y=v.map((function(t,n){for(var r=t.featureIdx,i=t.vertices,o=t.normals,a=i.length/d,u=[],c=0;c<a;c++){var l=o?o.slice(3*c,3*c+3):[];u.push.apply(u,Object(M["a"])(s(e[r],r,i.slice(c*d,c*d+d),n,l)))}return u})).reduce((function(t,e){return t.push.apply(t,Object(M["a"])(e)),t}),[]);o.vertexAttribute.updateBuffer({data:y,offset:m}),null===i||void 0===i||i.emit("legend:".concat(t),{type:t,attr:o})}}}},{key:"createAttributesAndIndicesAscy",value:function(t,e,n){var r=this;this.featureLayout={sizePerElement:0,elements:[]};var i=this.attributes.map((function(t){return t.resetDescriptor(),t.descriptor})).filter((function(t){return t})),o=n.modelType,a=Object(Gf["a"])(n,$d),s=this.rendererService,u=s.createAttribute,c=s.createBuffer,l=s.createElements,f={};return new Promise((function(n,s){Fc(o,Object(P["a"])({descriptors:r.getDescriptorsWithOutFunc(i),features:t,segmentNumber:e},a)).then((function(t){t.descriptors.forEach((function(t,e){if(t){var n=t.buffer,i=(t.update,t.name,Object(Gf["a"])(t,Jd)),o=u(Object(P["a"])({buffer:c(n)},i));f[t.name||""]=o,r.attributes[e].vertexAttribute=o}})),r.featureLayout=t.featureLayout;var e=l({data:t.indices,type:Rp.UNSIGNED_INT,count:t.indices.length});r.attributesAndIndices={attributes:f,elements:e,count:null},n(r.attributesAndIndices)}))["catch"]((function(t){console.warn(t),s(t)}))}))}},{key:"createAttributesAndIndices",value:function(t,e,n){var r=this;this.featureLayout={sizePerElement:0,elements:[]},e&&(this.triangulation=e);var i=this.attributes.map((function(t){return t.resetDescriptor(),t.descriptor})),o=0,a=0,s=[],u=3;t.forEach((function(t,e){var c=r.triangulation(t,n),l=c.indices,f=c.vertices,h=c.normals,p=c.size,d=c.indexes,v=c.count;"number"===typeof v&&(a+=v),l.forEach((function(t){s.push(t+o)})),u=p;var g=f.length/p;r.featureLayout.sizePerElement=u,r.featureLayout.elements.push({featureIdx:e,vertices:f,normals:h,offset:o}),o+=g;for(var m=function(n){var r=(null===h||void 0===h?void 0:h.slice(3*n,3*n+3))||[],o=f.slice(n*p,n*p+p),a=0;d&&void 0!==d[n]&&(a=d[n]),i.forEach((function(i,s){var u;i&&i.update&&(u=i.buffer.data).push.apply(u,Object(M["a"])(i.update(t,e,o,n,r,a)))}))},y=0;y<g;y++)m(y)}));var c=this.rendererService,l=c.createAttribute,f=c.createBuffer,h=c.createElements,p={};i.forEach((function(t,e){if(t){var n=t.buffer,i=(t.update,t.name,Object(Gf["a"])(t,tv)),o=l(Object(P["a"])({buffer:f(n)},i));p[t.name||""]=o,r.attributes[e].vertexAttribute=o}}));var d=h({data:s,type:Rp.UNSIGNED_INT,count:s.length});return this.attributesAndIndices={attributes:p,elements:d,count:a},this.attributesAndIndices}},{key:"createAttributes",value:function(t,e){var n=this;this.featureLayout={sizePerElement:0,elements:[]},e&&(this.triangulation=e);var r=this.attributes.map((function(t){return t.resetDescriptor(),t.descriptor})),i=0,o=[],a=3;t.forEach((function(t,e){var s=n.triangulation(t),u=s.indices,c=s.vertices,l=s.normals,f=s.size,h=s.indexes;u.forEach((function(t){o.push(t+i)})),a=f;var p=c.length/f;n.featureLayout.sizePerElement=a,n.featureLayout.elements.push({featureIdx:e,vertices:c,normals:l,offset:i}),i+=p;for(var d=function(n){var i=(null===l||void 0===l?void 0:l.slice(3*n,3*n+3))||[],o=c.slice(n*f,n*f+f),a=0;h&&void 0!==h[n]&&(a=h[n]),r.forEach((function(r,s){var u;r&&r.update&&(u=r.buffer.data).push.apply(u,Object(M["a"])(r.update(t,e,o,n,i,a)))}))},v=0;v<p;v++)d(v)}));var s=this.rendererService,u=s.createAttribute,c=s.createBuffer,l={};return r.forEach((function(t,e){if(t){var r=t.buffer,i=(t.update,t.name,Object(Gf["a"])(t,ev)),o=u(Object(P["a"])({buffer:c(r)},i));l[t.name||""]=o,n.attributes[e].vertexAttribute=o}})),{attributes:l}}},{key:"clearAllAttributes",value:function(){var t;this.attributes.forEach((function(t){t.vertexAttribute&&t.vertexAttribute.destroy()})),null===(t=this.attributesAndIndices)||void 0===t||t.elements.destroy(),this.attributes=[]}},{key:"getDescriptorsWithOutFunc",value:function(t){return t.map((function(t){return{buffer:t.buffer,name:t.name,size:t.size}}))}}]),t}(),gd=up(vd.prototype,"rendererService",[pd],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),dd=vd))||dd),iv=n("xp6e"),ov=n("iegG"),av=n.n(ov);function sv(t){var e=uv();return function(){var n,r=Object(ct["a"])(t);if(e){var i=Object(ct["a"])(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(ut["a"])(this,n)}}function uv(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}var cv=(md=Object(Yf["injectable"])(),yd=Object(Yf["inject"])(Kf.SceneID),_d=Object(Yf["inject"])(Kf.IIconService),bd=Object(Yf["inject"])(Kf.IFontService),xd=Object(Yf["inject"])(Kf.IControlService),wd=Object(Yf["inject"])(Kf.IGlobalConfigService),Ed=Object(Yf["inject"])(Kf.IMapService),Sd=Object(Yf["inject"])(Kf.ICoordinateSystemService),Od=Object(Yf["inject"])(Kf.IRendererService),Cd=Object(Yf["inject"])(Kf.ILayerService),Td=Object(Yf["inject"])(Kf.ICameraService),Ad=Object(Yf["inject"])(Kf.IInteractionService),kd=Object(Yf["inject"])(Kf.IPickingService),Md=Object(Yf["inject"])(Kf.IShaderModuleService),Pd=Object(Yf["inject"])(Kf.IMarkerService),Rd=Object(Yf["inject"])(Kf.IPopupService),md((Id=function(t){Object(st["a"])(n,t);var e=sv(n);function n(){var t;return Object(et["a"])(this,n),t=e.call(this),Object(Ar["a"])(Object(ft["a"])(t),"destroyed",!1),Object(Ar["a"])(Object(ft["a"])(t),"loaded",!1),sp(Object(ft["a"])(t),"id",Ld,Object(ft["a"])(t)),sp(Object(ft["a"])(t),"iconService",Nd,Object(ft["a"])(t)),sp(Object(ft["a"])(t),"fontService",Dd,Object(ft["a"])(t)),sp(Object(ft["a"])(t),"controlService",Fd,Object(ft["a"])(t)),sp(Object(ft["a"])(t),"configService",Bd,Object(ft["a"])(t)),sp(Object(ft["a"])(t),"map",zd,Object(ft["a"])(t)),sp(Object(ft["a"])(t),"coordinateSystemService",Ud,Object(ft["a"])(t)),sp(Object(ft["a"])(t),"rendererService",Vd,Object(ft["a"])(t)),sp(Object(ft["a"])(t),"layerService",Hd,Object(ft["a"])(t)),sp(Object(ft["a"])(t),"cameraService",Gd,Object(ft["a"])(t)),sp(Object(ft["a"])(t),"interactionService",Wd,Object(ft["a"])(t)),sp(Object(ft["a"])(t),"pickingService",Zd,Object(ft["a"])(t)),sp(Object(ft["a"])(t),"shaderModuleService",Yd,Object(ft["a"])(t)),sp(Object(ft["a"])(t),"markerService",Xd,Object(ft["a"])(t)),sp(Object(ft["a"])(t),"popupService",qd,Object(ft["a"])(t)),Object(Ar["a"])(Object(ft["a"])(t),"inited",!1),Object(Ar["a"])(Object(ft["a"])(t),"initPromise",void 0),Object(Ar["a"])(Object(ft["a"])(t),"rendering",!1),Object(Ar["a"])(Object(ft["a"])(t),"$container",void 0),Object(Ar["a"])(Object(ft["a"])(t),"canvas",void 0),Object(Ar["a"])(Object(ft["a"])(t),"markerContainer",void 0),Object(Ar["a"])(Object(ft["a"])(t),"hooks",void 0),Object(Ar["a"])(Object(ft["a"])(t),"handleWindowResized",(function(){t.emit("resize"),t.$container&&(t.initContainer(),r.triggerResize(),t.coordinateSystemService.needRefresh=!0,t.render())})),Object(Ar["a"])(Object(ft["a"])(t),"handleMapCameraChanged",(function(e){t.cameraService.update(e),t.render()})),t.hooks={init:new iv["b"]},t}return Object(nt["a"])(n,[{key:"init",value:function(t){var e=this;this.configService.setSceneConfig(this.id,t),this.shaderModuleService.registerBuiltinModules(),this.iconService.init(),this.iconService.on("imageUpdate",(function(){return e.render()})),this.fontService.init(),this.hooks.init.tapPromise("initMap",Object(mi["a"])(_i.a.mark((function t(){return _i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,new Promise((function(t){e.map.onCameraChanged((function(n){e.cameraService.init(),e.cameraService.update(n),t()})),e.map.init()}));case 2:e.map.onCameraChanged(e.handleMapCameraChanged),e.map.addMarkerContainer(),e.markerService.addMarkers(),e.markerService.addMarkerLayers(),e.popupService.initPopup(),e.interactionService.init(),e.interactionService.on(_p.Drag,e.addSceneEvent.bind(e));case 9:case"end":return t.stop()}}),t)})))),this.hooks.init.tapPromise("initRenderer",Object(mi["a"])(_i.a.mark((function n(){var i,o;return _i.a.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(i=e.map.getOverlayContainer(),e.$container=i||qp(e.configService.getSceneConfig(e.id).id||""),!e.$container){n.next=12;break}return e.canvas=r.create("canvas","",e.$container),e.setCanvas(),n.next=7,e.rendererService.init(e.canvas,e.configService.getSceneConfig(e.id),t.gl);case 7:e.initContainer(),av()(e.$container,e.handleWindowResized),sn.matchMedia&&(null===(o=sn.matchMedia("screen and (-webkit-min-device-pixel-ratio: 1.5)"))||void 0===o||o.addListener(e.handleWindowResized)),n.next=13;break;case 12:console.error("\u5bb9\u5668 id \u4e0d\u5b58\u5728");case 13:e.pickingService.init(e.id);case 14:case"end":return n.stop()}}),n)})))),this.render()}},{key:"initMiniScene",value:function(t){var e=this;this.configService.setSceneConfig(this.id,t),this.shaderModuleService.registerBuiltinModules(),this.iconService.init(),this.iconService.on("imageUpdate",(function(){return e.render()})),this.fontService.init(),this.hooks.init.tapPromise("initMap",Object(mi["a"])(_i.a.mark((function t(){return _i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,new Promise((function(t){e.map.onCameraChanged((function(n){e.cameraService.init(),e.cameraService.update(n),"GAODE2.x"!==e.map.version&&t()})),e.map.initMiniMap()}));case 2:e.map.onCameraChanged(e.handleMapCameraChanged),e.interactionService.init(),e.interactionService.on(_p.Drag,e.addSceneEvent.bind(e));case 5:case"end":return t.stop()}}),t)})))),this.hooks.init.tapPromise("initRenderer",Object(mi["a"])(_i.a.mark((function n(){var r;return _i.a.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(r=t.canvas,e.$container=r||null,!e.$container){n.next=7;break}return n.next=5,e.rendererService.init(t.canvas,e.configService.getSceneConfig(e.id),void 0);case 5:n.next=8;break;case 7:console.error("\u5bb9\u5668 id \u4e0d\u5b58\u5728");case 8:e.pickingService.init(e.id);case 9:case"end":return n.stop()}}),n)})))),this.initPromise=this.hooks.init.promise(),this.render()}},{key:"addLayer",value:function(t){this.layerService.sceneService=this,this.layerService.add(t)}},{key:"addMask",value:function(t){this.layerService.sceneService=this,this.layerService.addMask(t)}},{key:"render",value:function(){var t=Object(mi["a"])(_i.a.mark((function t(){return _i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!this.rendering&&!this.destroyed){t.next=2;break}return t.abrupt("return");case 2:if(this.rendering=!0,this.inited){t.next=16;break}return t.next=6,this.hooks.init.promise();case 6:return this.destroyed&&this.destroy(),t.next=9,this.layerService.initLayers();case 9:this.layerService.renderLayers(),this.controlService.addControls(),this.loaded=!0,this.emit("loaded"),this.inited=!0,t.next=20;break;case 16:return t.next=18,this.layerService.initLayers();case 18:return t.next=20,this.layerService.renderLayers();case 20:this.rendering=!1;case 21:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"addFontFace",value:function(t,e){this.fontService.addFontFace(t,e)}},{key:"getSceneContainer",value:function(){return this.$container}},{key:"exportPng",value:function(t){var e,n=null===(e=this.$container)||void 0===e?void 0:e.getElementsByTagName("canvas")[0];this.render();var r="jpg"===t?null===n||void 0===n?void 0:n.toDataURL("image/jpeg"):null===n||void 0===n?void 0:n.toDataURL("image/png");return r}},{key:"getSceneConfig",value:function(){return this.configService.getSceneConfig(this.id)}},{key:"getPointSizeRange",value:function(){return this.rendererService.getPointSizeRange()}},{key:"addMarkerContainer",value:function(){var t=this.$container.parentElement;null!==t&&(this.markerContainer=r.create("div","l7-marker-container",t))}},{key:"getMarkerContainer",value:function(){return this.markerContainer}},{key:"destroy",value:function(){var t,e,n=this;if(this.inited){var r;if(Object(ov["unbind"])(this.$container,this.handleWindowResized),sn.matchMedia)null===(r=sn.matchMedia("screen and (min-resolution: 2dppx)"))||void 0===r||r.removeListener(this.handleWindowResized);this.pickingService.destroy(),this.layerService.destroy(),this.interactionService.destroy(),this.controlService.destroy(),this.markerService.destroy(),this.fontService.destroy(),this.iconService.destroy(),this.removeAllListeners(),this.inited=!1,this.map.destroy(),setTimeout((function(){var t;null===(t=n.$container)||void 0===t||t.removeChild(n.canvas),n.canvas=null,n.rendererService.destroy()})),null===(t=this.$container)||void 0===t||null===(e=t.parentNode)||void 0===e||e.removeChild(this.$container),this.emit("destroy")}else this.destroyed=!0}},{key:"initContainer",value:function(){var t,e,n=r.DPR,i=(null===(t=this.$container)||void 0===t?void 0:t.clientWidth)||400,o=(null===(e=this.$container)||void 0===e?void 0:e.clientHeight)||300,a=this.canvas;a&&(a.width=i*n,a.height=o*n),this.rendererService.viewport({x:0,y:0,width:n*i,height:n*o})}},{key:"setCanvas",value:function(){var t,e,n=r.DPR,i=(null===(t=this.$container)||void 0===t?void 0:t.clientWidth)||400,o=(null===(e=this.$container)||void 0===e?void 0:e.clientHeight)||300,a=this.canvas;a.width=i*n,a.height=o*n,a.style.width="100%",a.style.height="100%"}},{key:"addSceneEvent",value:function(t){this.emit(t.type,t)}}]),n}(vl["EventEmitter"]),Ld=up(Id.prototype,"id",[yd],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Nd=up(Id.prototype,"iconService",[_d],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Dd=up(Id.prototype,"fontService",[bd],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Fd=up(Id.prototype,"controlService",[xd],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Bd=up(Id.prototype,"configService",[wd],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),zd=up(Id.prototype,"map",[Ed],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ud=up(Id.prototype,"coordinateSystemService",[Sd],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Vd=up(Id.prototype,"rendererService",[Od],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Hd=up(Id.prototype,"layerService",[Cd],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Gd=up(Id.prototype,"cameraService",[Td],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Wd=up(Id.prototype,"interactionService",[Ad],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Zd=up(Id.prototype,"pickingService",[kd],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Yd=up(Id.prototype,"shaderModuleService",[Md],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Xd=up(Id.prototype,"markerService",[Pd],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),qd=up(Id.prototype,"popupService",[Rd],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),jd=Id))||jd);function lv(t){var e=0;switch(t){case"vec2":case"ivec2":e=2;break;case"vec3":case"ivec3":e=3;break;case"vec4":case"ivec4":case"mat2":e=4;break;case"mat3":e=9;break;case"mat4":e=16;break;default:}return e}var fv,hv,pv=/uniform\s+(bool|float|int|vec2|vec3|vec4|ivec2|ivec3|ivec4|mat2|mat3|mat4|sampler2D|samplerCube)\s+([\s\S]*?);/g;function dv(t){var e={};return t=t.replace(pv,(function(t,n,r){var i=r.split(":"),o=i[0].trim(),a="";switch(i.length>1&&(a=i[1].trim()),n){case"bool":a="true"===a;break;case"float":case"int":a=Number(a);break;case"vec2":case"vec3":case"vec4":case"ivec2":case"ivec3":case"ivec4":case"mat2":case"mat3":case"mat4":a=a?a.replace("[","").replace("]","").split(",").reduce((function(t,e){return t.push(Number(e.trim())),t}),[]):new Array(lv(n)).fill(0);break;default:}return e[o]=a,"uniform ".concat(n," ").concat(o,";\n")})),{content:t,uniforms:e}}var vv,gv,mv,yv="#define PI 3.14159265359",_v="#define SHIFT_RIGHT17 1.0 / 131072.0\n#define SHIFT_RIGHT18 1.0 / 262144.0\n#define SHIFT_RIGHT19 1.0 / 524288.0\n#define SHIFT_RIGHT20 1.0 / 1048576.0\n#define SHIFT_RIGHT21 1.0 / 2097152.0\n#define SHIFT_RIGHT22 1.0 / 4194304.0\n#define SHIFT_RIGHT23 1.0 / 8388608.0\n#define SHIFT_RIGHT24 1.0 / 16777216.0\n\n#define SHIFT_LEFT17 131072.0\n#define SHIFT_LEFT18 262144.0\n#define SHIFT_LEFT19 524288.0\n#define SHIFT_LEFT20 1048576.0\n#define SHIFT_LEFT21 2097152.0\n#define SHIFT_LEFT22 4194304.0\n#define SHIFT_LEFT23 8388608.0\n#define SHIFT_LEFT24 16777216.0\n\nvec2 unpack_float(float packedValue) {\n  int packedIntValue = int(packedValue);\n  int v0 = packedIntValue / 256;\n  return vec2(v0, packedIntValue - v0 * 256);\n}\n\nvec4 decode_color(vec2 encodedColor) {\n  return vec4(\n    unpack_float(encodedColor[0]) / 255.0,\n    unpack_float(encodedColor[1]) / 255.0\n  );\n}\n",bv="#define ambientRatio 0.5\n#define diffuseRatio 0.3\n#define specularRatio 0.2\n\n\nfloat calc_lighting(vec4 pos) {\n\n    vec3 worldPos = vec3(pos * u_ModelMatrix);\n\n    vec3 worldNormal = a_Normal;\n      // //cal light weight\n    vec3 viewDir = normalize(u_CameraPosition - worldPos);\n\n    vec3 lightDir = normalize(vec3(1, -10.5, 12));\n\n    vec3 halfDir = normalize(viewDir+lightDir);\n      // //lambert\n    float lambert = dot(worldNormal, lightDir);\n        //specular\n    float specular = pow(max(0.0, dot(worldNormal, halfDir)), 32.0);\n        //sum to light weight\n    float lightWeight = ambientRatio + diffuseRatio * lambert + specularRatio * specular;\n\n    return lightWeight;\n}\n",xv="// Blinn-Phong model\n// apply lighting in vertex shader instead of fragment shader\n// @see https://learnopengl.com/Advanced-Lighting/Advanced-Lighting\nuniform float u_Ambient : 1.0;\nuniform float u_Diffuse : 1.0;\nuniform float u_Specular : 1.0;\nuniform int u_NumOfDirectionalLights : 1;\nuniform int u_NumOfSpotLights : 0;\n\n#define SHININESS 32.0\n#define MAX_NUM_OF_DIRECTIONAL_LIGHTS 3\n#define MAX_NUM_OF_SPOT_LIGHTS 3\n\nstruct DirectionalLight {\n  vec3 direction;\n  vec3 ambient;\n  vec3 diffuse;\n  vec3 specular;\n};\n\nstruct SpotLight {\n  vec3 position;\n  vec3 direction;\n  vec3 ambient;\n  vec3 diffuse;\n  vec3 specular;\n  float constant;\n  float linear;\n  float quadratic;\n  float angle;\n  float blur;\n  float exponent;\n};\n\nuniform DirectionalLight u_DirectionalLights[MAX_NUM_OF_DIRECTIONAL_LIGHTS];\nuniform SpotLight u_SpotLights[MAX_NUM_OF_SPOT_LIGHTS];\n\nvec3 calc_directional_light(DirectionalLight light, vec3 normal, vec3 viewDir) {\n  vec3 lightDir = normalize(light.direction);\n  // diffuse shading\n  float diff = max(dot(normal, lightDir), 0.0);\n  // Blinn-Phong specular shading\n  vec3 halfwayDir = normalize(lightDir + viewDir);\n  float spec = pow(max(dot(normal, halfwayDir), 0.0), SHININESS);\n\n  vec3 ambient = light.ambient * u_Ambient;\n  vec3 diffuse = light.diffuse * diff * u_Diffuse;\n  vec3 specular = light.specular * spec * u_Specular;\n\n  return ambient + diffuse + specular;\n}\n\n// vec3 calc_spot_light(SpotLight light, vec3 normal, vec3 fragPos, vec3 viewDir) {\n//   vec3 lightDir = normalize(light.position - fragPos);\n//   // diffuse shading\n//   float diff = max(dot(normal, lightDir), 0.0);\n//   // specular shading\n//   vec3 reflectDir = reflect(-lightDir, normal);\n//   float spec = pow(max(dot(viewDir, reflectDir), 0.0), SHININESS);\n//   // attenuation\n//   float distance = length(light.position - fragPos);\n//   float attenuation = 1.0 / (light.constant + light.linear * distance +\n//           light.quadratic * (distance * distance));\n\n//   vec3 ambient = light.ambient * u_Ambient;\n//   vec3 diffuse = light.diffuse * diff * u_Diffuse;\n//   vec3 specular = light.specular * spec * u_Specular;\n\n//   float spotEffect = dot(normalize(light.direction), -lightDir);\n//   float spotCosCutoff = cos(light.angle / 180.0 * PI);\n//   float spotCosOuterCutoff = cos((light.angle + light.blur) / 180.0 * PI);\n//   float spotCosInnerCutoff = cos((light.angle - light.blur) / 180.0 * PI);\n//   if (spotEffect > spotCosCutoff) {\n//     spotEffect = pow(smoothstep(spotCosOuterCutoff, spotCosInnerCutoff, spotEffect), light.exponent);\n//   } else {\n//     spotEffect = 0.0;\n//   }\n\n//   return ambient + attenuation * (spotEffect * diffuse + specular);\n// }\n\nvec3 calc_lighting(vec3 position, vec3 normal, vec3 viewDir) {\n  vec3 weight = vec3(0.0);\n  for (int i = 0; i < MAX_NUM_OF_DIRECTIONAL_LIGHTS; i++) {\n    if (i >= u_NumOfDirectionalLights) {\n      break;\n    }\n    weight += calc_directional_light(u_DirectionalLights[i], normal, viewDir);\n  }\n  // for (int i = 0; i < MAX_NUM_OF_SPOT_LIGHTS; i++) {\n  //   if (i >= u_NumOfSpotLights) {\n  //     break;\n  //   }\n  //   weight += calc_spot_light(u_SpotLights[i], normal, position, viewDir);\n  // }\n  return weight;\n}\n",wv="varying vec4 v_PickingResult;\nuniform vec4 u_HighlightColor : [0, 0, 0, 0];\nuniform vec4 u_SelectColor : [0, 0, 0, 0];\nuniform float u_PickingStage : 0.0;\nuniform float u_shaderPick;\n\nuniform float u_activeMix: 0;\n\n#define PICKING_NONE 0.0\n#define PICKING_ENCODE 1.0\n#define PICKING_HIGHLIGHT 2.0\n#define COLOR_SCALE 1. / 255.\n\n#define HIGHLIGHT 1.0\n#define SELECT 2.0\n\n/*\n * Returns highlight color if this item is selected.\n */\nvec4 filterHighlightColor(vec4 color, float weight) {\n  // float selected = v_PickingResult.a;\n  bool selected = bool(v_PickingResult.a);\n\n  // if (selected == SELECT) {\n  if (selected) {\n  //   // \u70b9\u51fb\u9009\u4e2d\u72b6\u6001\n  //   vec4 selectColor = u_SelectColor * COLOR_SCALE;\n  //   return selectColor;\n  // } else if (selected == HIGHLIGHT) {\n  //   // hover \u9ad8\u4eae\u72b6\u6001\n    vec4 highLightColor = u_HighlightColor * COLOR_SCALE;\n\n    float highLightAlpha = highLightColor.a;\n    float highLightRatio = highLightAlpha / (highLightAlpha + color.a * (1.0 - highLightAlpha));\n\n    vec3 resultRGB = mix(color.rgb, highLightColor.rgb, highLightRatio);\n    return vec4(mix(resultRGB * weight, color.rgb, u_activeMix), color.a);\n  } else {\n    return color;\n  }\n}\n\n/*\n * Returns picking color if picking enabled else unmodified argument.\n */\nvec4 filterPickingColor(vec4 color) {\n  vec3 pickingColor = v_PickingResult.rgb;\n  if (u_PickingStage == PICKING_ENCODE && length(pickingColor) < 0.001) {\n    discard;\n  }\n  return u_PickingStage == PICKING_ENCODE ? vec4(pickingColor, step(0.001,color.a)): color;\n}\n\n/*\n * Returns picking color if picking is enabled if not\n * highlight color if this item is selected, otherwise unmodified argument.\n */\nvec4 filterColor(vec4 color) {\n  // \u8fc7\u6ee4\u591a\u4f59\u7684 shader \u8ba1\u7b97\n  // return color;\n  if(u_shaderPick < 0.5) {\n    return color; // \u6682\u65f6\u53bb\u9664 \u76f4\u63a5\u53d6\u6d88\u8ba1\u7b97\u5728\u9009\u4e2d\u65f6\u62d6\u62fd\u5730\u56fe\u4f1a\u6709\u95ee\u9898\n  } else {\n    return filterPickingColor(filterHighlightColor(color, 1.0));\n  }\n  \n}\n\nvec4 filterColorAlpha(vec4 color, float alpha) {\n  // \u8fc7\u6ee4\u591a\u4f59\u7684 shader \u8ba1\u7b97\n  // return color;\n  if(u_shaderPick < 0.5) {\n    return color; // \u6682\u65f6\u53bb\u9664 \u76f4\u63a5\u53d6\u6d88\u8ba1\u7b97\u5728\u9009\u4e2d\u65f6\u62d6\u62fd\u5730\u56fe\u4f1a\u6709\u95ee\u9898\n  } else {\n    return filterPickingColor(filterHighlightColor(color, alpha));\n  }\n}\n\n",Ev="attribute vec3 a_PickingColor;\nvarying vec4 v_PickingResult;\n\nuniform vec3 u_PickingColor : [0, 0, 0];\nuniform vec3 u_CurrentSelectedId : [0, 0, 0];\nuniform vec4 u_HighlightColor : [0, 0, 0, 0];\nuniform vec4 u_SelectColor : [0, 0, 0, 0];\nuniform float u_PickingStage : 0.0;\nuniform float u_PickingThreshold : 1.0;\nuniform float u_PickingBuffer: 0.0;\nuniform float u_shaderPick;\nuniform float u_EnableSelect: 0.0;\n\n#define PICKING_NONE 0.0\n#define PICKING_ENCODE 1.0\n#define PICKING_HIGHLIGHT 2.0\n#define COLOR_SCALE 1. / 255.\n\n#define NORMAL 0.0\n#define HIGHLIGHT 1.0\n#define SELECT 2.0\n\nbool isVertexPicked(vec3 vertexColor) {\n  return\n    abs(vertexColor.r - u_PickingColor.r) < u_PickingThreshold &&\n    abs(vertexColor.g - u_PickingColor.g) < u_PickingThreshold &&\n    abs(vertexColor.b - u_PickingColor.b) < u_PickingThreshold;\n}\n\n// \u5224\u65ad\u5f53\u524d\u70b9\u662f\u5426\u5df2\u7ecf\u88ab select \u9009\u4e2d\nbool isVertexSelected(vec3 vertexColor) {\n  return\n    abs(vertexColor.r - u_CurrentSelectedId.r) < u_PickingThreshold &&\n    abs(vertexColor.g - u_CurrentSelectedId.g) < u_PickingThreshold &&\n    abs(vertexColor.b - u_CurrentSelectedId.b) < u_PickingThreshold;\n}\n\nvoid setPickingColor(vec3 pickingColor) {\n  if(u_shaderPick < 0.5) {\n    return;\n  }\n  // compares only in highlight stage\n\n  v_PickingResult.a = float((u_PickingStage == PICKING_HIGHLIGHT) && isVertexPicked(pickingColor));\n\n  // if (u_EnableSelect == 1.0 && u_PickingStage == PICKING_HIGHLIGHT && isVertexSelected(pickingColor)) {\n  //   // \u9009\u4e2d\u6001\n  //   v_PickingResult.a = SELECT;\n  // } else if (u_PickingStage == PICKING_HIGHLIGHT && isVertexPicked(pickingColor)) {\n  //   // \u9ad8\u4eae\u6001\n  //   v_PickingResult.a = HIGHLIGHT;\n  // } else {\n  //   v_PickingResult.a = NORMAL;\n  // }\n\n  // Stores the picking color so that the fragment shader can render it during picking\n  v_PickingResult.rgb = pickingColor * COLOR_SCALE;\n}\n\nfloat setPickingSize(float x) {\n   return u_PickingStage == PICKING_ENCODE ? x + u_PickingBuffer : x;\n}\n\nfloat setPickingOrder(float z) {\n   bool selected = bool(v_PickingResult.a);\n   return selected ? z + 1. : 0.;\n}\n",Sv="\n#define E 2.718281828459045\nvec2 ProjectFlat(vec2 lnglat){\n  float maxs=85.0511287798;\n  float lat=max(min(maxs,lnglat.y),-maxs);\n  float scale= 268435456.;\n  float d=PI/180.;\n  float x=lnglat.x*d;\n  float y=lat*d;\n  y=log(tan((PI/4.)+(y/2.)));\n\n  float a=.5/PI,\n  b=.5,\n  c=-.5/PI;\n  d=.5;\n  x=scale*(a*x+b);\n  y=scale*(c*y+d);\n  return vec2(x,y);\n}\n\nvec2 unProjectFlat(vec2 px){\n  float a=.5/PI;\n  float b=.5;\n  float c=-.5/PI;\n  float d=.5;\n  float scale = 268435456.;\n  float x=(px.x/scale-b)/a;\n  float y=(px.y/scale-d)/c;\n  y=(atan(pow(E,y))-(PI/4.))*2.;\n  d=PI/180.;\n  float lat=y/d;\n  float lng=x/d;\n  return vec2(lng,lat);\n}\n\nfloat pixelDistance(vec2 from, vec2 to) {\n vec2 a1 = ProjectFlat(from);\n vec2 b1 = ProjectFlat(to);\n return distance(a1, b1);\n}\n\n// gaode2.0\nvec2 customProject(vec2 lnglat) { // \u7ecf\u7eac\u5ea6 => \u5e73\u9762\u5750\u6807\n  float t = lnglat.x;\n  float e = lnglat.y;\n  float Sm = 180.0 / PI;\n  float Tm = 6378137.0;\n  float Rm = PI / 180.0;\n  float r = 85.0511287798;\n  e = max(min(r, e), -r);\n  t *= Rm;\n  e *= Rm;\n  e = log(tan(PI / 4.0 + e / 2.0));\n  return vec2(t * Tm, e * Tm);\n}\n\nvec2 unProjCustomCoord(vec2 point) { // \u5e73\u9762\u5750\u6807 => \u7ecf\u7eac\u5ea6\n  float Sm = 57.29577951308232; //180 / Math.PI\n  float Tm = 6378137.0;\n  float t = point.x;\n  float e = point.y;\n  return vec2(t / Tm * Sm, (2.0 * atan(exp(e / Tm)) - PI / 2.0) * Sm);\n}\n\n\nfloat customPixelDistance(vec2 from, vec2 to) {\n vec2 a1 = ProjectFlat(from);\n vec2 b1 = ProjectFlat(to);\n return distance(a1, b1);\n}",Ov="#define TILE_SIZE 512.0\n#define PI 3.1415926536\n#define WORLD_SCALE TILE_SIZE / (PI * 2.0)\n\n#define COORDINATE_SYSTEM_LNGLAT 1.0        // mapbox\n#define COORDINATE_SYSTEM_LNGLAT_OFFSET 2.0 // mapbox offset\n#define COORDINATE_SYSTEM_VECTOR_TILE 3.0\n#define COORDINATE_SYSTEM_IDENTITY 4.0\n#define COORDINATE_SYSTEM_P20 5.0           // amap\n#define COORDINATE_SYSTEM_P20_OFFSET 6.0    // amap offset\n#define COORDINATE_SYSTEM_METER_OFFSET 7.0\n\n#define COORDINATE_SYSTEM_P20_2 8.0         // amap2.0\n\nuniform mat4 u_ViewMatrix;\nuniform mat4 u_ProjectionMatrix;\nuniform mat4 u_ViewProjectionMatrix;\nuniform float u_Zoom : 1;\nuniform float u_ZoomScale : 1;\n\nuniform float u_CoordinateSystem;\nuniform vec2 u_ViewportCenter;\nuniform vec4 u_ViewportCenterProjection;\nuniform vec3 u_PixelsPerDegree;\nuniform vec3 u_PixelsPerDegree2;\nuniform vec3 u_PixelsPerMeter;\n\nuniform vec2 u_ViewportSize;\nuniform float u_DevicePixelRatio;\nuniform float u_FocalDistance;\nuniform vec3 u_CameraPosition;\n\n// uniform mat4 u_Mvp;\n\n// web mercator coords -> world coords\nvec2 project_mercator(vec2 lnglat) {\n  float x = lnglat.x;\n  return vec2(\n    radians(x) + PI,\n    PI - log(tan(PI * 0.25 + radians(lnglat.y) * 0.5))\n  );\n}\n\nfloat project_scale(float meters) {\n  return meters * u_PixelsPerMeter.z;\n}\n\n\n// offset coords -> world coords\nvec4 project_offset(vec4 offset) {\n  float dy = offset.y;\n  dy = clamp(dy, -1., 1.);\n  vec3 pixels_per_unit = u_PixelsPerDegree + u_PixelsPerDegree2 * dy;\n  return vec4(offset.xyz * pixels_per_unit, offset.w);\n}\n\nvec3 project_normal(vec3 normal) {\n  vec4 normal_modelspace = u_ModelMatrix * vec4(normal, 0.0);\n  return normalize(normal_modelspace.xyz * u_PixelsPerMeter);\n}\n\nvec3 project_offset_normal(vec3 vector) {\n  if (u_CoordinateSystem < COORDINATE_SYSTEM_LNGLAT + 0.01 && u_CoordinateSystem >COORDINATE_SYSTEM_LNGLAT - 0.01\n    || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {\n    // normals generated by the polygon tesselator are in lnglat offsets instead of meters\n    return normalize(vector * u_PixelsPerDegree);\n  }\n  return project_normal(vector);\n}\n// || u_CoordinateSystem < COORDINATE_SYSTEM_P20_OFFSET + 0.01 && u_CoordinateSystem >COORDINATE_SYSTEM_P20_OFFSET - 0.01\n// reverse Y\nvec3 reverse_offset_normal(vec3 vector) {\n  if (u_CoordinateSystem == COORDINATE_SYSTEM_P20 ||u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET ) {\n    return vector * vec3(1.0, -1.0, 1.0);\n  }\n\n  if (u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.0\n    return vector;\n  }\n  return vector;\n}\n\nvec4 project_mvt_offset_position(vec4 position) {\n  float a = COORDINATE_SYSTEM_LNGLAT_OFFSET;\n  float b = COORDINATE_SYSTEM_P20_OFFSET;\n  float c = COORDINATE_SYSTEM_LNGLAT;\n  if (u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET || u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET) {\n    return project_offset(vec4(0.0, 0.0, position.z, position.w));\n  }\n  if (u_CoordinateSystem < COORDINATE_SYSTEM_LNGLAT + 0.01 && u_CoordinateSystem >COORDINATE_SYSTEM_LNGLAT - 0.01) {\n    return vec4(\n      project_mercator(position.xy) * WORLD_SCALE * u_ZoomScale,\n      project_scale(position.z),\n      position.w\n    );\n  }\n  return position;\n}\n\nvec4 project_position(vec4 position) {\n  float a = COORDINATE_SYSTEM_LNGLAT_OFFSET;\n  float b = COORDINATE_SYSTEM_P20_OFFSET;\n  float c = COORDINATE_SYSTEM_LNGLAT;\n  if (u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET\n    || u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET) {\n    float X = position.x - u_ViewportCenter.x;\n    float Y = position.y - u_ViewportCenter.y;\n    return project_offset(vec4(X, Y, position.z, position.w));\n  }\n  if (u_CoordinateSystem < COORDINATE_SYSTEM_LNGLAT + 0.01 && u_CoordinateSystem >COORDINATE_SYSTEM_LNGLAT - 0.01) {\n    return vec4(\n      project_mercator(position.xy) * WORLD_SCALE * u_ZoomScale,\n      project_scale(position.z),\n      position.w\n    );\n  }\n\n  if (u_CoordinateSystem == COORDINATE_SYSTEM_P20) {\n    return vec4(\n      (project_mercator(position.xy) * WORLD_SCALE * u_ZoomScale - vec2(215440491., 106744817.)) * vec2(1., -1.),\n      project_scale(position.z),\n      position.w\n    );\n  }\n\n  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) {\n    // return vec4(\n    //   (position.xy * WORLD_SCALE * u_ZoomScale) * vec2(1., -1.), \n    //   project_scale(position.z), \n    //   position.w);\n\n     return vec4(\n      position.xy, \n      project_scale(position.z), \n      position.w);\n  }\n  return position;\n\n  // TODO: \u74e6\u7247\u5750\u6807\u7cfb & \u5e38\u89c4\u4e16\u754c\u5750\u6807\u7cfb\n}\nvec2 project_pixel_size_to_clipspace(vec2 pixels) {\n  vec2 offset = pixels / u_ViewportSize * u_DevicePixelRatio * 2.0;\n  return offset * u_FocalDistance;\n}\n\nfloat project_pixel_allmap(float pixel) {\n  if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {\n    return pixel * pow(2.0, u_Zoom);\n  }\n  return pixel;\n}\n\n// \u9002\u914d\u7eb9\u7406\u8d34\u56fe\u7684\u7b49\u50cf\u7d20\u5927\u5c0f\nfloat project_pixel_texture(float pixel) {\n  // mapbox zoom > 12\n  if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {\n    return pixel * pow(0.5, u_Zoom);\n  }\n\n  // amap2 zoom > 12\n  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) {\n    return pixel * pow(2.0, (19.0 - 3.0 - u_Zoom));\n  }\n\n  // amap zoom > 12\n  if (u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET) {\n    return pixel * pow(0.5, u_Zoom);\n  }\n  \n  // amap zoom < 12\n  if (u_CoordinateSystem == COORDINATE_SYSTEM_P20) {\n    return pixel * pow(2.0, (20.0 - u_Zoom));\n  }\n  return pixel * 2.0;\n}\n\n// \u5728\u4e0d\u8bba\u4ec0\u4e48\u5e95\u56fe\u4e0b\u9700\u8981\u7edf\u4e00\u5904\u7406\u7684\u65f6\u5019\u4f7f\u7528\nfloat project_float_pixel(float pixel) {\n  if (u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {\n    // mapbox P20 \u5750\u6807\u7cfb\u4e0b\uff0c\u4e3a\u4e86\u548c Web \u58a8\u5361\u6258\u5750\u6807\u7cfb\u7edf\u4e00\uff0czoom \u9ed8\u8ba4\u51cf1\n    return pixel * pow(2.0, (19.0 - u_Zoom));\n  }\n  if (u_CoordinateSystem == COORDINATE_SYSTEM_P20 || u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET) {\n    // amap P20 \u5750\u6807\u7cfb\u4e0b\uff0c\u4e3a\u4e86\u548c Web \u58a8\u5361\u6258\u5750\u6807\u7cfb\u7edf\u4e00\uff0czoom \u9ed8\u8ba4\u51cf1\n    return pixel * pow(2.0, (19.0 - u_Zoom));\n  }\n  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) {\n    // amap2 P20_2 \u5750\u6807\u7cfb\u4e0b\uff0c\u4e3a\u4e86\u548c Web \u58a8\u5361\u6258\u5750\u6807\u7cfb\u7edf\u4e00\uff0czoom \u9ed8\u8ba4\u51cf3\n    return pixel * pow(2.0, (19.0 - 3.0 - u_Zoom));\n  }\n  return pixel;\n}\n\nfloat project_pixel(float pixel) {\n  if (u_CoordinateSystem == COORDINATE_SYSTEM_P20 || u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET) {\n    // amap P20 \u5750\u6807\u7cfb\u4e0b\uff0c\u4e3a\u4e86\u548c Web \u58a8\u5361\u6258\u5750\u6807\u7cfb\u7edf\u4e00\uff0czoom \u9ed8\u8ba4\u51cf1\n    return pixel * pow(2.0, (19.0 - u_Zoom));\n  }\n  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) {\n    // amap2 P20_2 \u5750\u6807\u7cfb\u4e0b\uff0c\u4e3a\u4e86\u548c Web \u58a8\u5361\u6258\u5750\u6807\u7cfb\u7edf\u4e00\uff0czoom \u9ed8\u8ba4\u51cf3\n    return pixel * pow(2.0, (19.0 - 3.0 - u_Zoom));\n  }\n  return pixel;\n}\nvec2 project_pixel(vec2 pixel) {\n  if (u_CoordinateSystem == COORDINATE_SYSTEM_P20 || u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET) {\n    // P20 \u5750\u6807\u7cfb\u4e0b\uff0c\u4e3a\u4e86\u548c Web \u58a8\u5361\u6258\u5750\u6807\u7cfb\u7edf\u4e00\uff0czoom \u9ed8\u8ba4\u51cf1\n    return pixel * pow(2.0, (19.0 - u_Zoom));\n  }\n  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) {\n    // P20_2 \u5750\u6807\u7cfb\u4e0b\uff0c\u4e3a\u4e86\u548c Web \u58a8\u5361\u6258\u5750\u6807\u7cfb\u7edf\u4e00\uff0czoom \u9ed8\u8ba4\u51cf3\n    return pixel * pow(2.0, (19.0 - 3.0 - u_Zoom));\n  }\n  return pixel * -1.;\n}\nvec3 project_pixel(vec3 pixel) {\n  if (u_CoordinateSystem == COORDINATE_SYSTEM_P20 || u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET) {\n    // P20 \u5750\u6807\u7cfb\u4e0b\uff0c\u4e3a\u4e86\u548c Web \u58a8\u5361\u6258\u5750\u6807\u7cfb\u7edf\u4e00\uff0czoom \u9ed8\u8ba4\u51cf1\n    return pixel * pow(2.0, (19.0 - u_Zoom));\n  }\n  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) {\n    // P20_2 \u5750\u6807\u7cfb\u4e0b\uff0c\u4e3a\u4e86\u548c Web \u58a8\u5361\u6258\u5750\u6807\u7cfb\u7edf\u4e00\uff0czoom \u9ed8\u8ba4\u51cf3\n    return pixel * pow(2.0, (19.0 - 3.0 - u_Zoom));\n  }\n  return pixel * -1.;\n}\n\nvec4 project_common_position_to_clipspace(vec4 position, mat4 viewProjectionMatrix, vec4 center) {\n  if (u_CoordinateSystem == COORDINATE_SYSTEM_METER_OFFSET ||\n    u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {\n    // Needs to be divided with project_uCommonUnitsPerMeter\n    position.w *= u_PixelsPerMeter.z;\n  }\n\n  return viewProjectionMatrix * position + center;\n}\n\n// Projects from common space coordinates to clip space\nvec4 project_common_position_to_clipspace(vec4 position) {\n  return project_common_position_to_clipspace(\n    position,\n    u_ViewProjectionMatrix,\n    u_ViewportCenterProjection\n  );\n}\n\nvec4 unproject_clipspace_to_position(vec4 clipspacePos, mat4 u_InverseViewProjectionMatrix) {\n  vec4 pos = u_InverseViewProjectionMatrix * (clipspacePos - u_ViewportCenterProjection);\n\n  if (u_CoordinateSystem == COORDINATE_SYSTEM_METER_OFFSET ||\n    u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {\n    // Needs to be divided with project_uCommonUnitsPerMeter\n     pos.w = pos.w / u_PixelsPerMeter.z;\n  }\n  return pos;\n}\n\n\nbool isEqual( float a,  float b) {\n    return  a< b + 0.001 && a > b - 0.001;\n}",Cv="/**\n * 2D signed distance field functions\n * @see http://www.iquilezles.org/www/articles/distfunctions2d/distfunctions2d.htm\n */\n\nfloat ndot(vec2 a, vec2 b ) { return a.x*b.x - a.y*b.y; }\n\nfloat sdCircle(vec2 p, float r) {\n  return length(p) - r;\n}\n\nfloat sdEquilateralTriangle(vec2 p) {\n  float k = sqrt(3.0);\n  p.x = abs(p.x) - 1.0;\n  p.y = p.y + 1.0/k;\n  if( p.x + k*p.y > 0.0 ) p = vec2(p.x-k*p.y,-k*p.x-p.y)/2.0;\n  p.x -= clamp( p.x, -2.0, 0.0 );\n  return -length(p)*sign(p.y);\n}\n\nfloat sdBox(vec2 p, vec2 b) {\n  vec2 d = abs(p)-b;\n  return length(max(d,vec2(0))) + min(max(d.x,d.y),0.0);\n}\n\nfloat sdPentagon(vec2 p, float r) {\n  vec3 k = vec3(0.809016994,0.587785252,0.726542528);\n  p.x = abs(p.x);\n  p -= 2.0*min(dot(vec2(-k.x,k.y),p),0.0)*vec2(-k.x,k.y);\n  p -= 2.0*min(dot(vec2( k.x,k.y),p),0.0)*vec2( k.x,k.y);\n  p -= vec2(clamp(p.x,-r*k.z,r*k.z),r);\n  return length(p)*sign(p.y);\n}\n\nfloat sdHexagon(vec2 p, float r) {\n  vec3 k = vec3(-0.866025404,0.5,0.577350269);\n  p = abs(p);\n  p -= 2.0*min(dot(k.xy,p),0.0)*k.xy;\n  p -= vec2(clamp(p.x, -k.z*r, k.z*r), r);\n  return length(p)*sign(p.y);\n}\n\nfloat sdOctogon(vec2 p, float r) {\n  vec3 k = vec3(-0.9238795325, 0.3826834323, 0.4142135623 );\n  p = abs(p);\n  p -= 2.0*min(dot(vec2( k.x,k.y),p),0.0)*vec2( k.x,k.y);\n  p -= 2.0*min(dot(vec2(-k.x,k.y),p),0.0)*vec2(-k.x,k.y);\n  p -= vec2(clamp(p.x, -k.z*r, k.z*r), r);\n  return length(p)*sign(p.y);\n}\n\nfloat sdHexagram(vec2 p, float r) {\n  vec4 k=vec4(-0.5,0.8660254038,0.5773502692,1.7320508076);\n  p = abs(p);\n  p -= 2.0*min(dot(k.xy,p),0.0)*k.xy;\n  p -= 2.0*min(dot(k.yx,p),0.0)*k.yx;\n  p -= vec2(clamp(p.x,r*k.z,r*k.w),r);\n  return length(p)*sign(p.y);\n}\n\nfloat sdRhombus(vec2 p, vec2 b) {\n  vec2 q = abs(p);\n  float h = clamp((-2.0*ndot(q,b)+ndot(b,b))/dot(b,b),-1.0,1.0);\n  float d = length( q - 0.5*b*vec2(1.0-h,1.0+h) );\n  return d * sign( q.x*b.y + q.y*b.x - b.x*b.y );\n}\n\nfloat sdVesica(vec2 p, float r, float d) {\n  p = abs(p);\n  float b = sqrt(r*r-d*d); // can delay this sqrt\n  return ((p.y-b)*d>p.x*b)\n          ? length(p-vec2(0.0,b))\n          : length(p-vec2(-d,0.0))-r;\n}\n",Tv="attribute float a_vertexId;\n\nuniform mat4 u_cellTypeLayout;      // \u63cf\u8ff0\u6570\u636e\u7eb9\u7406 cell \u7ed3\u6784\u7684\u77e9\u9635\nuniform sampler2D u_dataTexture;    // \u6570\u636e\u7eb9\u7406\n\nbool hasOpacity() { // \u5224\u65ad cell \u4e2d\u662f\u5426\u5b58\u5728 opacity \u7684\u6570\u636e\n  return u_cellTypeLayout[1][0] > 0.0 && u_cellTypeLayout[3][3] > 0.0;\n}\n\nbool hasStrokeOpacity() { // \u5224\u65ad cell \u4e2d\u662f\u5426\u5b58\u5728 strokeOpacity \u7684\u6570\u636e\n  return u_cellTypeLayout[1][1] > 0.0 && u_cellTypeLayout[3][3] > 0.0;\n}\n\nbool hasStrokeWidth() { // \u5224\u65ad cell \u4e2d\u662f\u5426\u5b58\u5728 strokeWidth \u7684\u6570\u636e\n  return u_cellTypeLayout[1][2] > 0.0 && u_cellTypeLayout[3][3] > 0.0;\n}\n\nbool hasStroke() { // \u5224\u65ad cell \u4e2d\u662f\u5426\u5b58\u5728 stroke \u7684\u6570\u636e\n  return u_cellTypeLayout[1][3] > 0.0 && u_cellTypeLayout[3][3] > 0.0;\n}\n\nbool hasOffsets() { // \u5224\u65ad cell \u4e2d\u662f\u5426\u5b58\u5728 offsets \u7684\u6570\u636e\n  return u_cellTypeLayout[2][0] > 0.0 && u_cellTypeLayout[3][3] > 0.0;\n}\n\nbool hasThetaOffset() { // \u5224\u65ad cell \u4e2d\u662f\u5426\u5b58\u5728 thetaOffset \u7684\u6570\u636e\n  return u_cellTypeLayout[2][1] > 0.0 && u_cellTypeLayout[3][3] > 0.0;\n}\n\n// \u6839\u636e\u5750\u6807\u4f4d\u7f6e\u5148\u662f\u8ba1\u7b97 uv \uff0c\u7136\u540e\u6839\u636e uv \u4ece\u6570\u636e\u7eb9\u7406\u4e2d\u53d6\u503c\nfloat pos2value(vec2 pos, float columnWidth, float rowHeight) {\n  float u = (pos.r - 1.0) * columnWidth + columnWidth/2.0;\n  float v = 1.0 - ((pos.g - 1.0) * rowHeight + rowHeight/2.0);\n  return texture2D(u_dataTexture, vec2(u, v)).r;\n}\n\n/*\n  currentRow \u5f53\u524d\u884c\n  currentColumn \u5f53\u524d\u5217\n  columnCount \u6709\u591a\u5c11\u5217\n  nextStep \u9700\u8981\u8ba1\u7b97\u5f53\u524d cell \u540e\u7684\u7b2c\u51e0\u4e2a cell \uff08\u5f53\u524d cell \u5219 nextStep = 0\uff09\n*/\nvec2 nextPos(float currentRow, float currentColumn, float columnCount, float nextStep) {\n  float nextColumn = currentColumn;\n  float nextRow = currentRow;\n  if(currentColumn + nextStep <= columnCount){\n    nextColumn = currentColumn + nextStep;\n  } else {\n    nextColumn = mod(currentColumn + nextStep, columnCount); // \u4e0d\u4f1a\u51fa\u73b0\u8de8\u4e24\u884c\n    nextRow = currentRow + 1.0;\n  }\n  return vec2(nextColumn, nextRow);\n}\n\n// \u8ba1\u7b97\u5f53\u524d\u5355\u4e2a cell \u7684\u5927\u5c0f\nfloat calCellCount() { \n  //   u_cellTypeLayout\n  //   cal_height, WIDTH, 0.0, 0.0, // rowCount columnCount - \u51e0\u884c\u51e0\u5217\n  //   1.0, 1.0, 1.0, 0.0, // opacity strokeOpacity strokeWidth stroke - 1.0 \u8868\u793a\u6709\u6570\u636e\u6620\u5c04\u30010.0 \u8868\u793a\u6ca1\u6709\n  //   1.0, 1.0, 0.0, 0.0, // offsets thetaOffset\n  //   0.0, 0.0, 0.0, 0.0\n  \n  return  u_cellTypeLayout[1][0] +        // opacity\n          u_cellTypeLayout[1][1] +        // strokeOpacity\n          u_cellTypeLayout[1][2] +        // strokeWidth\n          u_cellTypeLayout[1][3] * 4.0 +  // stroke\n          u_cellTypeLayout[2][0] * 2.0 +  // offsets\n          u_cellTypeLayout[2][1];         // thetaOffset\n}",Av="\n// \u8ba1\u7b97 opacity \u548c\u6807\u793a\u5728 cell \u4e2d\u53d6\u503c\u4f4d\u7f6e\u7684\u504f\u79fb\u91cf textureOffset\nvec2 calOpacityAndOffset(float cellCurrentRow, float cellCurrentColumn, float columnCount, float textureOffset, float columnWidth, float rowHeight) {\n  if(!hasOpacity()) { // \u6570\u636e\u7eb9\u7406\u4e2d\u4e0d\u5b58\u5728 opacity \u7684\u65f6\u5019\u53d6\u9ed8\u8ba4\u503c\uff08\u7528\u6237\u5728 style \u4e2d\u4f20\u5165\u7684\u662f\u5e38\u91cf\uff09\n    return vec2(u_opacity, textureOffset);\n  } else {\n    vec2 valuePos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);\n    float textureOpacity = pos2value(valuePos, columnWidth, rowHeight);\n    return vec2(textureOpacity, textureOffset + 1.0);\n  }\n}\n",kv="\n// \u8ba1\u7b97 strokeOpaicty \u548c\u6807\u793a\u5728 cell \u4e2d\u53d6\u503c\u4f4d\u7f6e\u7684\u504f\u79fb\u91cf textureOffset\nvec2 calStrokeOpacityAndOffset(float cellCurrentRow, float cellCurrentColumn, float columnCount, float textureOffset, float columnWidth, float rowHeight) {\n  if(!hasStrokeOpacity()) {\n    return vec2(u_stroke_opacity, textureOffset);\n  } else {\n    vec2 valuePos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);\n    float textureStrokeOpacity = pos2value(valuePos, columnWidth, rowHeight);\n    return vec2(textureStrokeOpacity, textureOffset + 1.0);\n  }\n}\n",Mv="\n// \u8ba1\u7b97 strokeWidth \u548c\u6807\u793a\u5728 cell \u4e2d\u53d6\u503c\u4f4d\u7f6e\u7684\u504f\u79fb\u91cf textureOffset\nvec2 calStrokeWidthAndOffset(float cellCurrentRow, float cellCurrentColumn, float columnCount, float textureOffset, float columnWidth, float rowHeight) {\n  if(!hasStrokeWidth()) {\n    return vec2(u_stroke_width, textureOffset);\n  } else {\n    vec2 valuePos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);\n    float textureStrokeWidth = pos2value(valuePos, columnWidth, rowHeight);\n    return vec2(textureStrokeWidth, textureOffset + 1.0);\n  }\n}\n",Pv="\n// \u8ba1\u7b97 thetaOffset \u548c\u6807\u793a\u5728 cell \u4e2d\u53d6\u503c\u4f4d\u7f6e\u7684\u504f\u79fb\u91cf textureOffset\nvec2 calThetaOffsetAndOffset(float cellCurrentRow, float cellCurrentColumn, float columnCount, float textureOffset, float columnWidth, float rowHeight) {\n  if(!hasThetaOffset()) { // \u6570\u636e\u7eb9\u7406\u4e2d\u4e0d\u5b58\u5728 thetaOffset \u7684\u65f6\u5019\u53d6\u9ed8\u8ba4\u503c\uff08\u7528\u6237\u5728 style \u4e2d\u4f20\u5165\u7684\u662f\u5e38\u91cf\uff09\n    return vec2(u_thetaOffset, textureOffset);\n  } else {\n    vec2 valuePos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);\n    float textureThetaOffset = pos2value(valuePos, columnWidth, rowHeight);\n    return vec2(textureThetaOffset, textureOffset + 1.0);\n  }\n}\n",Rv=/precision\s+(high|low|medium)p\s+float/,jv="#ifdef GL_FRAGMENT_PRECISION_HIGH\n precision highp float;\n #else\n precision mediump float;\n#endif\n",Iv=/#pragma include (["^+"]?["[a-zA-Z_0-9](.*)"]*?)/g,Lv=(fv=Object(Yf["injectable"])(),fv(hv=function(){function t(){Object(et["a"])(this,t),Object(Ar["a"])(this,"moduleCache",{}),Object(Ar["a"])(this,"rawContentCache",{})}return Object(nt["a"])(t,[{key:"registerBuiltinModules",value:function(){this.destroy(),this.registerModule("common",{vs:yv,fs:yv}),this.registerModule("decode",{vs:_v,fs:""}),this.registerModule("projection",{vs:Ov,fs:""}),this.registerModule("project",{vs:Sv,fs:""}),this.registerModule("sdf_2d",{vs:"",fs:Cv}),this.registerModule("lighting",{vs:xv,fs:""}),this.registerModule("light",{vs:bv,fs:""}),this.registerModule("picking",{vs:Ev,fs:wv}),this.registerModule("styleMapping",{vs:Tv,fs:""}),this.registerModule("styleMappingCalThetaOffset",{vs:Pv,fs:""}),this.registerModule("styleMappingCalOpacity",{vs:Av,fs:""}),this.registerModule("styleMappingCalStrokeOpacity",{vs:kv,fs:""}),this.registerModule("styleMappingCalStrokeWidth",{vs:Mv,fs:""})}},{key:"registerModule",value:function(t,e){if(!this.rawContentCache[t]){var n=e.vs,r=e.fs,i=e.uniforms,o=dv(n),a=o.content,s=o.uniforms,u=dv(r),c=u.content,l=u.uniforms;this.rawContentCache[t]={fs:c,uniforms:Object(P["a"])(Object(P["a"])(Object(P["a"])({},s),l),i),vs:a}}}},{key:"destroy",value:function(){this.moduleCache={},this.rawContentCache={}}},{key:"getModule",value:function(t){var e=this;if(this.moduleCache[t])return this.moduleCache[t];var n=this.rawContentCache[t].vs,r=this.rawContentCache[t].fs,i=this.processModule(n,[],"vs"),o=i.content,a=i.includeList,s=this.processModule(r,[],"fs"),u=s.content,c=s.includeList,l=u,f=Object(K["uniq"])(a.concat(c).concat(t)).reduce((function(t,n){return Object(P["a"])(Object(P["a"])({},t),e.rawContentCache[n].uniforms)}),{});return Rv.test(u)||(l=jv+u),this.moduleCache[t]={fs:l.trim(),uniforms:f,vs:o.trim()},this.moduleCache[t]}},{key:"processModule",value:function(t,e,n){var r=this,i=t.replace(Iv,(function(t,i){var o=i.split(" "),a=o[0].replace(/"/g,"");if(e.indexOf(a)>-1)return"";var s=r.rawContentCache[a][n];e.push(a);var u=r.processModule(s,e,n),c=u.content;return c}));return{content:i,includeList:e}}}]),t}())||hv);function Nv(t,e){while(!Object.prototype.hasOwnProperty.call(t,e))if(t=Object(ct["a"])(t),null===t)break;return t}function Dv(){return Dv="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=Nv(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(arguments.length<3?t:n):i.value}},Dv.apply(this,arguments)}(function(t){t["Normal"]="normal",t["PostProcessing"]="post-processing"})(vv||(vv={}));var Fv,Bv,zv=(gv=Object(Yf["injectable"])(),gv(mv=function(){function t(){Object(et["a"])(this,t),Object(Ar["a"])(this,"shaderModuleService",void 0),Object(Ar["a"])(this,"rendererService",void 0),Object(Ar["a"])(this,"cameraService",void 0),Object(Ar["a"])(this,"mapService",void 0),Object(Ar["a"])(this,"interactionService",void 0),Object(Ar["a"])(this,"layerService",void 0),Object(Ar["a"])(this,"config",void 0)}return Object(nt["a"])(t,[{key:"getName",value:function(){return""}},{key:"getType",value:function(){return vv.Normal}},{key:"init",value:function(t,e){this.config=e,this.rendererService=t.getContainer().get(Kf.IRendererService),this.cameraService=t.getContainer().get(Kf.ICameraService),this.mapService=t.getContainer().get(Kf.IMapService),this.interactionService=t.getContainer().get(Kf.IInteractionService),this.layerService=t.getContainer().get(Kf.ILayerService),this.shaderModuleService=t.getContainer().get(Kf.IShaderModuleService)}},{key:"render",value:function(t){}}]),t}())||mv);function Uv(t){var e=Vv();return function(){var n,r=Object(ct["a"])(t);if(e){var i=Object(ct["a"])(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(ut["a"])(this,n)}}function Vv(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}var Hv,Gv,Wv,Zv,Yv,Xv=(Fv=Object(Yf["injectable"])(),Fv(Bv=function(t){Object(st["a"])(n,t);var e=Uv(n);function n(){return Object(et["a"])(this,n),e.apply(this,arguments)}return Object(nt["a"])(n,[{key:"getName",value:function(){return"clear"}},{key:"init",value:function(t,e){Dv(Object(ct["a"])(n.prototype),"init",this).call(this,t,e)}},{key:"render",value:function(){this.rendererService.clear({color:[0,0,0,0],depth:1,framebuffer:null})}}]),n}(zv))||Bv);function qv(t,e){var n="undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=Kv(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n["return"]||n["return"]()}finally{if(s)throw o}}}}function Kv(t,e){if(t){if("string"===typeof t)return Qv(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Qv(t,e):void 0}}function Qv(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var $v,Jv,tg=(Hv=Object(Yf["injectable"])(),Gv=Object(Yf["inject"])(Kf.IPostProcessor),Hv((Zv=function(){function t(){Object(et["a"])(this,t),Object(Ar["a"])(this,"passes",[]),sp(this,"postProcessor",Yv,this),Object(Ar["a"])(this,"layer",void 0),Object(Ar["a"])(this,"renderFlag",void 0),Object(Ar["a"])(this,"width",0),Object(Ar["a"])(this,"height",0)}return Object(nt["a"])(t,[{key:"setLayer",value:function(t){this.layer=t}},{key:"setRenderFlag",value:function(t){this.renderFlag=t}},{key:"getRenderFlag",value:function(){return this.renderFlag}},{key:"getPostProcessor",value:function(){return this.postProcessor}},{key:"render",value:function(){var t=Object(mi["a"])(_i.a.mark((function t(){var e,n,r;return _i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e=qv(this.passes),t.prev=1,e.s();case 3:if((n=e.n()).done){t.next=9;break}return r=n.value,t.next=7,r.render(this.layer);case 7:t.next=3;break;case 9:t.next=14;break;case 11:t.prev=11,t.t0=t["catch"](1),e.e(t.t0);case 14:return t.prev=14,e.f(),t.finish(14);case 17:return t.next=19,this.postProcessor.render(this.layer);case 19:case"end":return t.stop()}}),t,this,[[1,11,14,17]])})));function e(){return t.apply(this,arguments)}return e}()},{key:"resize",value:function(t,e){this.width===t&&this.height===e||(this.postProcessor.resize(t,e),this.width=t,this.height=e)}},{key:"add",value:function(t,e){t.getType()===vv.PostProcessing?this.postProcessor.add(t,this.layer,e):(t.init(this.layer,e),this.passes.push(t))}},{key:"insert",value:function(t,e,n){t.init(this.layer,e),this.passes.splice(n,0,t)}},{key:"destroy",value:function(){this.passes.length=0}}]),t}(),Yv=up(Zv.prototype,"postProcessor",[Gv],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Wv=Zv))||Wv);function eg(t){var e=ng();return function(){var n,r=Object(ct["a"])(t);if(e){var i=Object(ct["a"])(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(ut["a"])(this,n)}}function ng(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}var rg,ig,og,ag,sg,ug,cg,lg=($v=Object(Yf["injectable"])(),$v(Jv=function(t){Object(st["a"])(n,t);var e=eg(n);function n(){var t;Object(et["a"])(this,n);for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return t=e.call.apply(e,[this].concat(o)),Object(Ar["a"])(Object(ft["a"])(t),"pickingFBO",void 0),Object(Ar["a"])(Object(ft["a"])(t),"layer",void 0),Object(Ar["a"])(Object(ft["a"])(t),"width",0),Object(Ar["a"])(Object(ft["a"])(t),"height",0),Object(Ar["a"])(Object(ft["a"])(t),"alreadyInRendering",!1),Object(Ar["a"])(Object(ft["a"])(t),"pickFromPickingFBO",(function(e){var n=e.x,i=e.y,o=e.lngLat,a=e.type;if(t.layer.isVisible()&&t.layer.needPick(a)){var s,u=t.rendererService,c=u.getViewportSize,l=u.readPixels,f=u.useFramebuffer,h=c(),p=h.width,d=h.height,v=t.layer.getLayerConfig(),g=v.enableHighlight,m=v.enableSelect,y=n*r.DPR,_=i*r.DPR;if(!(y>p||y<0||_>d||_<0))f(t.pickingFBO,(function(){var e;if(s=l({x:Math.round(y),y:Math.round(d-(i+1)*r.DPR),width:1,height:1,data:new Uint8Array(4),framebuffer:t.pickingFBO}),0!==s[0]||0!==s[1]||0!==s[2]){var u=fi(s),c=t.layer.getSource().getFeatureById(u),f={x:n,y:i,type:a,lngLat:o,featureId:u,feature:c};c&&(t.layer.setCurrentPickId(u),t.triggerHoverOnLayer(f))}else{var h={x:n,y:i,lngLat:o,type:null===t.layer.getCurrentPickId()?"un"+a:"mouseout",featureId:null,feature:null};t.triggerHoverOnLayer(Object(P["a"])(Object(P["a"])({},h),{},{type:"unpick"})),t.triggerHoverOnLayer(h),t.layer.setCurrentPickId(null)}g&&t.highlightPickedFeature(s),m&&"click"===a&&(null===(e=s)||void 0===e?void 0:e.toString())!==[0,0,0,0].toString()&&t.selectFeature(s)}))}})),t}return Object(nt["a"])(n,[{key:"getType",value:function(){return vv.Normal}},{key:"getName",value:function(){return"pixelPicking"}},{key:"init",value:function(t,e){Dv(Object(ct["a"])(n.prototype),"init",this).call(this,t,e),this.layer=t;var r=this.rendererService,i=r.createTexture2D,o=r.createFramebuffer,a=r.getViewportSize,s=a(),u=s.width,c=s.height;this.pickingFBO=o({color:i({width:u,height:c,wrapS:Rp.CLAMP_TO_EDGE,wrapT:Rp.CLAMP_TO_EDGE})}),this.interactionService.on(_p.Hover,this.pickFromPickingFBO),this.interactionService.on(_p.Select,this.selectFeatureHandle.bind(this)),this.interactionService.on(_p.Active,this.highlightFeatureHandle.bind(this))}},{key:"render",value:function(t){var e=this;if(!this.alreadyInRendering){var n=this.rendererService,r=n.getViewportSize,i=n.useFramebuffer,o=n.clear,a=r(),s=a.width,u=a.height;this.alreadyInRendering=!0,this.width===s&&this.height===u||(this.pickingFBO.resize({width:s,height:u}),this.width=s,this.height=u),i(this.pickingFBO,(function(){o({framebuffer:e.pickingFBO,color:[0,0,0,0],stencil:0,depth:1});var n=e.layer.multiPassRenderer.getRenderFlag();e.layer.multiPassRenderer.setRenderFlag(!1),t.hooks.beforePickingEncode.call(),t.render(),t.hooks.afterPickingEncode.call(),e.layer.multiPassRenderer.setRenderFlag(n),e.alreadyInRendering=!1}))}}},{key:"triggerHoverOnLayer",value:function(t){this.layer.emit(t.type,t)}},{key:"highlightPickedFeature",value:function(t){var e=Object(q["a"])(t,3),n=e[0],r=e[1],i=e[2];this.layer.hooks.beforeHighlight.call([n,r,i]),this.layerService.renderLayers()}},{key:"selectFeature",value:function(t){var e=Object(q["a"])(t,3),n=e[0],r=e[1],i=e[2];this.layer.hooks.beforeSelect.call([n,r,i]),this.layerService.renderLayers()}},{key:"selectFeatureHandle",value:function(t){var e=t.featureId,n=hi(e);this.selectFeature(new Uint8Array(n))}},{key:"highlightFeatureHandle",value:function(t){var e=t.featureId,n=hi(e);this.highlightPickedFeature(new Uint8Array(n))}}]),n}(zv))||Jv),fg="attribute vec2 a_Position;\n\nvarying vec2 v_UV;\n\nvoid main() {\n  v_UV = 0.5 * (a_Position + 1.0);\n  gl_Position = vec4(a_Position, 0., 1.);\n}",hg=(rg=Object(Yf["injectable"])(),ig=Object(Yf["inject"])(Kf.IShaderModuleService),rg((ag=function(){function t(){Object(et["a"])(this,t),sp(this,"shaderModuleService",sg,this),Object(Ar["a"])(this,"rendererService",void 0),Object(Ar["a"])(this,"config",void 0),Object(Ar["a"])(this,"quad",fg),Object(Ar["a"])(this,"enabled",!0),Object(Ar["a"])(this,"renderToScreen",!1),Object(Ar["a"])(this,"model",void 0),Object(Ar["a"])(this,"name",void 0),Object(Ar["a"])(this,"optionsToUpdate",{})}return Object(nt["a"])(t,[{key:"getName",value:function(){return this.name}},{key:"setName",value:function(t){this.name=t}},{key:"getType",value:function(){return vv.PostProcessing}},{key:"init",value:function(t,e){this.config=e,this.rendererService=t.getContainer().get(Kf.IRendererService),this.shaderModuleService=t.getContainer().get(Kf.IShaderModuleService);var n=this.rendererService,r=n.createAttribute,i=n.createBuffer,o=n.createModel,a=this.setupShaders(),s=a.vs,u=a.fs,c=a.uniforms;this.model=o({vs:s,fs:u,attributes:{a_Position:r({buffer:i({data:[-4,-4,4,-4,0,4],type:Rp.FLOAT}),size:2})},uniforms:Object(P["a"])(Object(P["a"])({u_Texture:null},c),this.config&&this.convertOptionsToUniforms(this.config)),depth:{enable:!1},count:3,blend:{enable:"copy"===this.getName()}})}},{key:"render",value:function(t,e){var n=this,r=t.multiPassRenderer.getPostProcessor(),i=this.rendererService,o=i.useFramebuffer,a=i.getViewportSize,s=i.clear,u=a(),c=u.width,l=u.height;o(this.renderToScreen?null:r.getWriteFBO(),(function(){s({framebuffer:r.getWriteFBO(),color:[0,0,0,0],depth:1,stencil:0});var t=Object(P["a"])({u_BloomFinal:0,u_Texture:r.getReadFBO(),u_ViewportSize:[c,l]},n.convertOptionsToUniforms(n.optionsToUpdate));e&&(t.u_BloomFinal=1,t.u_Texture2=e),n.model.draw({uniforms:t})}))}},{key:"isEnabled",value:function(){return this.enabled}},{key:"setEnabled",value:function(t){this.enabled=t}},{key:"setRenderToScreen",value:function(t){this.renderToScreen=t}},{key:"updateOptions",value:function(t){this.optionsToUpdate=Object(P["a"])(Object(P["a"])({},this.optionsToUpdate),t)}},{key:"setupShaders",value:function(){throw new Error("Method not implemented.")}},{key:"convertOptionsToUniforms",value:function(t){var e={};return Object.keys(t).forEach((function(n){Object(K["isNil"])(t[n])||(e["u_".concat(Object(K["upperFirst"])(Object(K["camelCase"])(n)))]=t[n])})),e}}]),t}(),sg=up(ag.prototype,"shaderModuleService",[ig],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),og=ag))||og);function pg(t){var e=dg();return function(){var n,r=Object(ct["a"])(t);if(e){var i=Object(ct["a"])(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(ut["a"])(this,n)}}function dg(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}var vg,gg,mg="varying vec2 v_UV;\n\nuniform float u_BloomFinal: 0.0;\nuniform sampler2D u_Texture;\nuniform sampler2D u_Texture2;\n\nuniform vec2 u_ViewportSize: [1.0, 1.0];\nuniform float u_radius: 5.0;\nuniform float u_intensity: 0.3;\nuniform float u_baseRadio: 0.5;\n\n// https://github.com/Jam3/glsl-fast-gaussian-blur/blob/master/9.glsl\nvec4 blur9(sampler2D image, vec2 uv, vec2 resolution, vec2 direction) {\n  vec4 color = vec4(0.0);\n  vec2 off1 = vec2(1.3846153846) * direction;\n  vec2 off2 = vec2(3.2307692308) * direction;\n  color += texture2D(image, uv) * 0.2270270270;\n  color += texture2D(image, uv + (off1 / resolution)) * 0.3162162162;\n  color += texture2D(image, uv - (off1 / resolution)) * 0.3162162162;\n  color += texture2D(image, uv + (off2 / resolution)) * 0.0702702703;\n  color += texture2D(image, uv - (off2 / resolution)) * 0.0702702703;\n  return color;\n}\n\nfloat luminance(vec4 color) {\n  return  0.2125 * color.r + 0.7154 * color.g + 0.0721 * color.b;\n}\n\nvoid main() {\n  // vec4 baseColor = texture2D(u_Texture, v_UV);\n\n  float r = sqrt(u_radius);\n\n  vec4 c1 = blur9(u_Texture, v_UV, u_ViewportSize, vec2(u_radius, 0.0));\n  // c1 *= luminance(c1);\n  vec4 c2 = blur9(u_Texture, v_UV, u_ViewportSize, vec2(0.0, u_radius));\n  // c2 *= luminance(c2);\n  vec4 c3 = blur9(u_Texture, v_UV, u_ViewportSize, vec2(r, r));\n  // c3 *= luminance(c3);\n  vec4 c4 = blur9(u_Texture, v_UV, u_ViewportSize, vec2(r, -r));\n  // c4 *= luminance(c4);\n  vec4 inbloomColor = (c1 + c2 + c3 + c4) * 0.25;\n\n  // float lum = luminance(inbloomColor);\n  // inbloomColor.rgb *= lum;\n\n  if(u_BloomFinal > 0.0) {\n    vec4 baseColor = texture2D(u_Texture2, v_UV);\n    float baselum = luminance(baseColor);\n    gl_FragColor = mix(inbloomColor, baseColor, u_baseRadio);\n    if(baselum <= 0.2) {\n      gl_FragColor = inbloomColor * u_intensity;\n    }\n  } else {\n    gl_FragColor = inbloomColor;\n  }\n}",yg="attribute vec2 a_Position;\n\nvarying vec2 v_UV;\n\nvoid main() {\n  v_UV = 0.5 * (a_Position + 1.0);\n  gl_Position = vec4(a_Position, 0., 1.);\n}",_g=(ug=Object(Yf["injectable"])(),ug(cg=function(t){Object(st["a"])(n,t);var e=pg(n);function n(){return Object(et["a"])(this,n),e.apply(this,arguments)}return Object(nt["a"])(n,[{key:"setupShaders",value:function(){this.shaderModuleService.registerModule("blur-pass",{vs:yg,fs:mg});var t=this.shaderModuleService.getModule("blur-pass"),e=t.vs,n=t.fs,r=t.uniforms,i=this.rendererService.getViewportSize(),o=i.width,a=i.height;return{vs:e,fs:n,uniforms:Object(P["a"])(Object(P["a"])({},r),{},{u_ViewportSize:[o,a]})}}},{key:"convertOptionsToUniforms",value:function(t){var e={};return Object(K["isNil"])(t.bloomRadius)||(e.u_radius=t.bloomRadius),Object(K["isNil"])(t.bloomIntensity)||(e.u_intensity=t.bloomIntensity),Object(K["isNil"])(t.bloomBaseRadio)||(e.u_baseRadio=t.bloomBaseRadio),e}}]),n}(hg))||cg);function bg(t){var e=xg();return function(){var n,r=Object(ct["a"])(t);if(e){var i=Object(ct["a"])(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(ut["a"])(this,n)}}function xg(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}var wg,Eg,Sg="varying vec2 v_UV;\n\nuniform sampler2D u_Texture;\n\nuniform vec2 u_ViewportSize: [1.0, 1.0];\nuniform vec2 u_BlurDir: [1.0, 0.0];\n\n// https://github.com/Jam3/glsl-fast-gaussian-blur/blob/master/9.glsl\nvec4 blur9(sampler2D image, vec2 uv, vec2 resolution, vec2 direction) {\n  vec4 color = vec4(0.0);\n  vec2 off1 = vec2(1.3846153846) * direction;\n  vec2 off2 = vec2(3.2307692308) * direction;\n  color += texture2D(image, uv) * 0.2270270270;\n  color += texture2D(image, uv + (off1 / resolution)) * 0.3162162162;\n  color += texture2D(image, uv - (off1 / resolution)) * 0.3162162162;\n  color += texture2D(image, uv + (off2 / resolution)) * 0.0702702703;\n  color += texture2D(image, uv - (off2 / resolution)) * 0.0702702703;\n  return color;\n}\n\nvoid main() {\n  gl_FragColor = blur9(u_Texture, v_UV, u_ViewportSize, u_BlurDir);\n}",Og="attribute vec2 a_Position;\n\nvarying vec2 v_UV;\n\nvoid main() {\n  v_UV = 0.5 * (a_Position + 1.0);\n  gl_Position = vec4(a_Position, 0., 1.);\n}",Cg=(vg=Object(Yf["injectable"])(),vg(gg=function(t){Object(st["a"])(n,t);var e=bg(n);function n(){return Object(et["a"])(this,n),e.apply(this,arguments)}return Object(nt["a"])(n,[{key:"setupShaders",value:function(){this.shaderModuleService.registerModule("blur-pass",{vs:Og,fs:Sg});var t=this.shaderModuleService.getModule("blur-pass"),e=t.vs,n=t.fs,r=t.uniforms,i=this.rendererService.getViewportSize(),o=i.width,a=i.height;return{vs:e,fs:n,uniforms:Object(P["a"])(Object(P["a"])({},r),{},{u_ViewportSize:[o,a]})}}},{key:"convertOptionsToUniforms",value:function(t){var e={};return Object(K["isNil"])(t.blurRadius)||(e.u_BlurDir=[t.blurRadius,0]),e}}]),n}(hg))||gg);function Tg(t){var e=Ag();return function(){var n,r=Object(ct["a"])(t);if(e){var i=Object(ct["a"])(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(ut["a"])(this,n)}}function Ag(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}var kg,Mg,Pg="varying vec2 v_UV;\n\nuniform sampler2D u_Texture;\n\nuniform vec2 u_ViewportSize: [1.0, 1.0];\nuniform vec2 u_BlurDir: [1.0, 0.0];\n\n// https://github.com/Jam3/glsl-fast-gaussian-blur/blob/master/9.glsl\nvec4 blur9(sampler2D image, vec2 uv, vec2 resolution, vec2 direction) {\n  vec4 color = vec4(0.0);\n  vec2 off1 = vec2(1.3846153846) * direction;\n  vec2 off2 = vec2(3.2307692308) * direction;\n  color += texture2D(image, uv) * 0.2270270270;\n  color += texture2D(image, uv + (off1 / resolution)) * 0.3162162162;\n  color += texture2D(image, uv - (off1 / resolution)) * 0.3162162162;\n  color += texture2D(image, uv + (off2 / resolution)) * 0.0702702703;\n  color += texture2D(image, uv - (off2 / resolution)) * 0.0702702703;\n  return color;\n}\n\nvoid main() {\n  gl_FragColor = blur9(u_Texture, v_UV, u_ViewportSize, u_BlurDir);\n}",Rg="attribute vec2 a_Position;\n\nvarying vec2 v_UV;\n\nvoid main() {\n  v_UV = 0.5 * (a_Position + 1.0);\n  gl_Position = vec4(a_Position, 0., 1.);\n}",jg=(wg=Object(Yf["injectable"])(),wg(Eg=function(t){Object(st["a"])(n,t);var e=Tg(n);function n(){return Object(et["a"])(this,n),e.apply(this,arguments)}return Object(nt["a"])(n,[{key:"setupShaders",value:function(){this.shaderModuleService.registerModule("blur-pass",{vs:Rg,fs:Pg});var t=this.shaderModuleService.getModule("blur-pass"),e=t.vs,n=t.fs,r=t.uniforms,i=this.rendererService.getViewportSize(),o=i.width,a=i.height;return{vs:e,fs:n,uniforms:Object(P["a"])(Object(P["a"])({},r),{},{u_ViewportSize:[o,a]})}}},{key:"convertOptionsToUniforms",value:function(t){var e={};return Object(K["isNil"])(t.blurRadius)||(e.u_BlurDir=[0,t.blurRadius]),e}}]),n}(hg))||Eg);function Ig(t){var e=Lg();return function(){var n,r=Object(ct["a"])(t);if(e){var i=Object(ct["a"])(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(ut["a"])(this,n)}}function Lg(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}var Ng,Dg,Fg='varying vec2 v_UV;\n\nuniform sampler2D u_Texture;\nuniform vec2 u_ViewportSize: [1.0, 1.0];\nuniform vec2 u_Center : [0.5, 0.5];\nuniform float u_Angle : 0;\nuniform float u_Size : 8;\n\n#pragma include "common"\n\nfloat scale = PI / u_Size;\n\nfloat pattern(float u_Angle, vec2 texSize, vec2 texCoord) {\n  float s = sin(u_Angle), c = cos(u_Angle);\n  vec2 tex = texCoord * texSize - u_Center * texSize;\n  vec2 point = vec2(\n    c * tex.x - s * tex.y,\n    s * tex.x + c * tex.y\n  ) * scale;\n  return (sin(point.x) * sin(point.y)) * 4.0;\n}\n\n// https://github.com/evanw/glfx.js/blob/master/src/filters/fun/colorhalftone.js\nvec4 colorHalftone_filterColor(vec4 color, vec2 texSize, vec2 texCoord) {\n  vec3 cmy = 1.0 - color.rgb;\n  float k = min(cmy.x, min(cmy.y, cmy.z));\n  cmy = (cmy - k) / (1.0 - k);\n  cmy = clamp(\n    cmy * 10.0 - 3.0 + vec3(\n      pattern(u_Angle + 0.26179, texSize, texCoord),\n      pattern(u_Angle + 1.30899, texSize, texCoord),\n      pattern(u_Angle, texSize, texCoord)\n    ),\n    0.0,\n    1.0\n  );\n  k = clamp(k * 10.0 - 5.0 + pattern(u_Angle + 0.78539, texSize, texCoord), 0.0, 1.0);\n  return vec4(1.0 - cmy - k, color.a);\n}\n\nvoid main() {\n  gl_FragColor = vec4(texture2D(u_Texture, v_UV));\n  gl_FragColor = colorHalftone_filterColor(gl_FragColor, u_ViewportSize, v_UV);\n}',Bg="attribute vec2 a_Position;\n\nvarying vec2 v_UV;\n\nvoid main() {\n  v_UV = 0.5 * (a_Position + 1.0);\n  gl_Position = vec4(a_Position, 0., 1.);\n}",zg=(kg=Object(Yf["injectable"])(),kg(Mg=function(t){Object(st["a"])(n,t);var e=Ig(n);function n(){return Object(et["a"])(this,n),e.apply(this,arguments)}return Object(nt["a"])(n,[{key:"setupShaders",value:function(){this.shaderModuleService.registerModule("colorhalftone-pass",{vs:Bg,fs:Fg});var t=this.shaderModuleService.getModule("colorhalftone-pass"),e=t.vs,n=t.fs,r=t.uniforms,i=this.rendererService.getViewportSize(),o=i.width,a=i.height;return{vs:e,fs:n,uniforms:Object(P["a"])(Object(P["a"])({},r),{},{u_ViewportSize:[o,a]})}}}]),n}(hg))||Mg);function Ug(t){var e=Vg();return function(){var n,r=Object(ct["a"])(t);if(e){var i=Object(ct["a"])(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(ut["a"])(this,n)}}function Vg(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}var Hg,Gg,Wg="varying vec2 v_UV;\n\nuniform sampler2D u_Texture;\n\nvoid main() {\n  gl_FragColor = vec4(texture2D(u_Texture, v_UV));\n}",Zg="attribute vec2 a_Position;\n\nvarying vec2 v_UV;\n\nvoid main() {\n  v_UV = 0.5 * (a_Position + 1.0);\n  gl_Position = vec4(a_Position, 0., 1.);\n}",Yg=(Ng=Object(Yf["injectable"])(),Ng(Dg=function(t){Object(st["a"])(n,t);var e=Ug(n);function n(){return Object(et["a"])(this,n),e.apply(this,arguments)}return Object(nt["a"])(n,[{key:"setupShaders",value:function(){return this.shaderModuleService.registerModule("copy-pass",{vs:Zg,fs:Wg}),this.shaderModuleService.getModule("copy-pass")}}]),n}(hg))||Dg);function Xg(t){var e=qg();return function(){var n,r=Object(ct["a"])(t);if(e){var i=Object(ct["a"])(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(ut["a"])(this,n)}}function qg(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}var Kg,Qg,$g="varying vec2 v_UV;\n\nuniform sampler2D u_Texture;\nuniform vec2 u_ViewportSize: [1.0, 1.0];\nuniform vec2 u_Center : [0.5, 0.5];\nuniform float u_Scale : 10;\n\n// https://github.com/evanw/glfx.js/blob/master/src/filters/fun/hexagonalpixelate.js\nvec4 hexagonalPixelate_sampleColor(sampler2D texture, vec2 texSize, vec2 texCoord) {\n  vec2 tex = (texCoord * texSize - u_Center * texSize) / u_Scale;\n  tex.y /= 0.866025404;\n  tex.x -= tex.y * 0.5;\n  vec2 a;\n  if (tex.x + tex.y - floor(tex.x) - floor(tex.y) < 1.0) {\n    a = vec2(floor(tex.x), floor(tex.y));\n  }\n  else a = vec2(ceil(tex.x), ceil(tex.y));\n  vec2 b = vec2(ceil(tex.x), floor(tex.y));\n  vec2 c = vec2(floor(tex.x), ceil(tex.y));\n  vec3 TEX = vec3(tex.x, tex.y, 1.0 - tex.x - tex.y);\n  vec3 A = vec3(a.x, a.y, 1.0 - a.x - a.y);\n  vec3 B = vec3(b.x, b.y, 1.0 - b.x - b.y);\n  vec3 C = vec3(c.x, c.y, 1.0 - c.x - c.y);\n  float alen = length(TEX - A);\n  float blen = length(TEX - B);\n  float clen = length(TEX - C);\n  vec2 choice;\n  if (alen < blen) {\n    if (alen < clen) choice = a;\n    else choice = c;\n  } else {\n    if (blen < clen) choice = b;\n    else choice = c;\n  }\n  choice.x += choice.y * 0.5;\n  choice.y *= 0.866025404;\n  choice *= u_Scale / texSize;\n  return texture2D(texture, choice + u_Center);\n}\n\nvoid main() {\n  gl_FragColor = vec4(texture2D(u_Texture, v_UV));\n  gl_FragColor = hexagonalPixelate_sampleColor(u_Texture, u_ViewportSize, v_UV);\n}",Jg="attribute vec2 a_Position;\n\nvarying vec2 v_UV;\n\nvoid main() {\n  v_UV = 0.5 * (a_Position + 1.0);\n  gl_Position = vec4(a_Position, 0., 1.);\n}",tm=(Hg=Object(Yf["injectable"])(),Hg(Gg=function(t){Object(st["a"])(n,t);var e=Xg(n);function n(){return Object(et["a"])(this,n),e.apply(this,arguments)}return Object(nt["a"])(n,[{key:"setupShaders",value:function(){this.shaderModuleService.registerModule("hexagonalpixelate-pass",{vs:Jg,fs:$g});var t=this.shaderModuleService.getModule("hexagonalpixelate-pass"),e=t.vs,n=t.fs,r=t.uniforms,i=this.rendererService.getViewportSize(),o=i.width,a=i.height;return{vs:e,fs:n,uniforms:Object(P["a"])(Object(P["a"])({},r),{},{u_ViewportSize:[o,a]})}}}]),n}(hg))||Gg);function em(t){var e=nm();return function(){var n,r=Object(ct["a"])(t);if(e){var i=Object(ct["a"])(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(ut["a"])(this,n)}}function nm(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}var rm,im,om="varying vec2 v_UV;\n\nuniform sampler2D u_Texture;\nuniform vec2 u_ViewportSize: [1.0, 1.0];\nuniform float u_Strength : 0.6;\n\nvec4 ink_sampleColor(sampler2D texture, vec2 texSize, vec2 texCoord) {\n  vec2 dx = vec2(1.0 / texSize.x, 0.0);\n  vec2 dy = vec2(0.0, 1.0 / texSize.y);\n  vec4 color = texture2D(texture, texCoord);\n  float bigTotal = 0.0;\n  float smallTotal = 0.0;\n  vec3 bigAverage = vec3(0.0);\n  vec3 smallAverage = vec3(0.0);\n  for (float x = -2.0; x <= 2.0; x += 1.0) {\n    for (float y = -2.0; y <= 2.0; y += 1.0) {\n      vec3 sample = texture2D(texture, texCoord + dx * x + dy * y).rgb;\n      bigAverage += sample;\n      bigTotal += 1.0;\n      if (abs(x) + abs(y) < 2.0) {\n        smallAverage += sample;\n        smallTotal += 1.0;\n      }\n    }\n  }\n  vec3 edge = max(vec3(0.0), bigAverage / bigTotal - smallAverage / smallTotal);\n  float power = u_Strength * u_Strength * u_Strength * u_Strength * u_Strength;\n  return vec4(color.rgb - dot(edge, edge) * power * 100000.0, color.a);\n}\n\nvoid main() {\n  gl_FragColor = vec4(texture2D(u_Texture, v_UV));\n  gl_FragColor = ink_sampleColor(u_Texture, u_ViewportSize, v_UV);\n}",am="attribute vec2 a_Position;\n\nvarying vec2 v_UV;\n\nvoid main() {\n  v_UV = 0.5 * (a_Position + 1.0);\n  gl_Position = vec4(a_Position, 0., 1.);\n}",sm=(Kg=Object(Yf["injectable"])(),Kg(Qg=function(t){Object(st["a"])(n,t);var e=em(n);function n(){return Object(et["a"])(this,n),e.apply(this,arguments)}return Object(nt["a"])(n,[{key:"setupShaders",value:function(){this.shaderModuleService.registerModule("ink-pass",{vs:am,fs:om});var t=this.shaderModuleService.getModule("ink-pass"),e=t.vs,n=t.fs,r=t.uniforms,i=this.rendererService.getViewportSize(),o=i.width,a=i.height;return{vs:e,fs:n,uniforms:Object(P["a"])(Object(P["a"])({},r),{},{u_ViewportSize:[o,a]})}}}]),n}(hg))||Qg);function um(t){var e=cm();return function(){var n,r=Object(ct["a"])(t);if(e){var i=Object(ct["a"])(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(ut["a"])(this,n)}}function cm(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}var lm,fm,hm="varying vec2 v_UV;\n\nuniform sampler2D u_Texture;\nuniform float u_Amount : 0.5;\n\nfloat rand(vec2 co) {\n  return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);\n}\n\n// https://github.com/evanw/glfx.js/blob/master/src/filters/adjust/noise.js\nvec4 noise_filterColor(vec4 color, vec2 texCoord) {\n  float diff = (rand(texCoord) - 0.5) * u_Amount;\n  color.r += diff;\n  color.g += diff;\n  color.b += diff;\n  return color;\n}\n\nvoid main() {\n  gl_FragColor = vec4(texture2D(u_Texture, v_UV));\n  gl_FragColor = noise_filterColor(gl_FragColor, v_UV);\n}",pm="attribute vec2 a_Position;\n\nvarying vec2 v_UV;\n\nvoid main() {\n  v_UV = 0.5 * (a_Position + 1.0);\n  gl_Position = vec4(a_Position, 0., 1.);\n}",dm=(rm=Object(Yf["injectable"])(),rm(im=function(t){Object(st["a"])(n,t);var e=um(n);function n(){return Object(et["a"])(this,n),e.apply(this,arguments)}return Object(nt["a"])(n,[{key:"setupShaders",value:function(){return this.shaderModuleService.registerModule("noise-pass",{vs:pm,fs:hm}),this.shaderModuleService.getModule("noise-pass")}}]),n}(hg))||im);function vm(t){var e=gm();return function(){var n,r=Object(ct["a"])(t);if(e){var i=Object(ct["a"])(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(ut["a"])(this,n)}}function gm(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}var mm,ym,_m,bm,xm,wm,Em,Sm,Om="attribute vec2 a_Position;\n\nvarying vec2 v_UV;\n\nvoid main() {\n  v_UV = 0.5 * (a_Position + 1.0);\n  gl_Position = vec4(a_Position, 0., 1.);\n}",Cm="varying vec2 v_UV;\n\nuniform sampler2D u_Texture;\n\nuniform float u_Amount : 0.5;\n\n// https://github.com/evanw/glfx.js/blob/master/src/filters/adjust/sepia.js\nvec4 sepia_filterColor(vec4 color) {\n  float r = color.r;\n  float g = color.g;\n  float b = color.b;\n  color.r =\n    min(1.0, (r * (1.0 - (0.607 * u_Amount))) + (g * (0.769 * u_Amount)) + (b * (0.189 * u_Amount)));\n  color.g = min(1.0, (r * 0.349 * u_Amount) + (g * (1.0 - (0.314 * u_Amount))) + (b * 0.168 * u_Amount));\n  color.b = min(1.0, (r * 0.272 * u_Amount) + (g * 0.534 * u_Amount) + (b * (1.0 - (0.869 * u_Amount))));\n  return color;\n}\n\nvoid main() {\n  gl_FragColor = vec4(texture2D(u_Texture, v_UV));\n  gl_FragColor = sepia_filterColor(gl_FragColor);\n}",Tm=(lm=Object(Yf["injectable"])(),lm(fm=function(t){Object(st["a"])(n,t);var e=vm(n);function n(){return Object(et["a"])(this,n),e.apply(this,arguments)}return Object(nt["a"])(n,[{key:"setupShaders",value:function(){return this.shaderModuleService.registerModule("sepia-pass",{vs:Om,fs:Cm}),this.shaderModuleService.getModule("sepia-pass")}}]),n}(hg))||fm),Am=(mm=Object(Yf["injectable"])(),ym=Object(Yf["inject"])(Kf.IRendererService),_m=Object(Yf["postConstruct"])(),mm((xm=function(){function t(){Object(et["a"])(this,t),sp(this,"rendererService",wm,this),Object(Ar["a"])(this,"passes",[]),Object(Ar["a"])(this,"readFBO",void 0),Object(Ar["a"])(this,"writeFBO",void 0)}return Object(nt["a"])(t,[{key:"getReadFBO",value:function(){return this.readFBO}},{key:"getWriteFBO",value:function(){return this.writeFBO}},{key:"getCurrentFBOTex",value:function(){var t=this.rendererService,e=t.getViewportSize,n=t.createTexture2D,r=e(),i=r.width,o=r.height;return n({x:0,y:0,width:i,height:o,copy:!0})}},{key:"getReadFBOTex",value:function(){var t=this,e=this.rendererService.useFramebuffer;return new Promise((function(n){e(t.readFBO,Object(mi["a"])(_i.a.mark((function e(){return _i.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n(t.getCurrentFBOTex());case 1:case"end":return e.stop()}}),e)}))))}))}},{key:"renderBloomPass",value:function(){var t=Object(mi["a"])(_i.a.mark((function t(e,n){var r,i;return _i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.getReadFBOTex();case 2:r=t.sent,i=0;case 4:if(!(i<4)){t.next=11;break}return t.next=7,n.render(e,r);case 7:this.swap(),i++,t.next=4;break;case 11:case"end":return t.stop()}}),t,this)})));function e(e,n){return t.apply(this,arguments)}return e}()},{key:"render",value:function(){var t=Object(mi["a"])(_i.a.mark((function t(e){var n,r;return _i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:n=0;case 1:if(!(n<this.passes.length)){t.next=15;break}if(r=this.passes[n],r.setRenderToScreen(this.isLastEnabledPass(n)),"bloom"!==r.getName()){t.next=9;break}return t.next=7,this.renderBloomPass(e,r);case 7:t.next=12;break;case 9:return t.next=11,r.render(e);case 11:n!==this.passes.length-1&&this.swap();case 12:n++,t.next=1;break;case 15:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"resize",value:function(t,e){this.readFBO.resize({width:t,height:e}),this.writeFBO.resize({width:t,height:e})}},{key:"add",value:function(t,e,n){t.init(e,n),this.passes.push(t)}},{key:"insert",value:function(t,e,n,r){t.init(n,r),this.passes.splice(e,0,t)}},{key:"getPostProcessingPassByName",value:function(t){return this.passes.find((function(e){return e.getName()===t}))}},{key:"init",value:function(){var t=this.rendererService,e=t.createFramebuffer,n=t.createTexture2D;this.readFBO=e({color:n({width:1,height:1,wrapS:Rp.CLAMP_TO_EDGE,wrapT:Rp.CLAMP_TO_EDGE})}),this.writeFBO=e({color:n({width:1,height:1,wrapS:Rp.CLAMP_TO_EDGE,wrapT:Rp.CLAMP_TO_EDGE})})}},{key:"isLastEnabledPass",value:function(t){for(var e=t+1;e<this.passes.length;e++)if(this.passes[e].isEnabled())return!1;return!0}},{key:"swap",value:function(){var t=this.readFBO;this.readFBO=this.writeFBO,this.writeFBO=t}}]),t}(),wm=up(xm.prototype,"rendererService",[ym],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),up(xm.prototype,"init",[_m],Object.getOwnPropertyDescriptor(xm.prototype,"init"),xm.prototype),bm=xm))||bm);function km(t){var e=Mm();return function(){var n,r=Object(ct["a"])(t);if(e){var i=Object(ct["a"])(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(ut["a"])(this,n)}}function Mm(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}var Pm,Rm,jm,Im,Lm,Nm=(Em=Object(Yf["injectable"])(),Em(Sm=function(t){Object(st["a"])(n,t);var e=km(n);function n(){return Object(et["a"])(this,n),e.apply(this,arguments)}return Object(nt["a"])(n,[{key:"getType",value:function(){return vv.Normal}},{key:"getName",value:function(){return"render"}},{key:"init",value:function(t,e){Dv(Object(ct["a"])(n.prototype),"init",this).call(this,t,e)}},{key:"render",value:function(t){var e=this.rendererService,n=e.useFramebuffer,r=e.clear,i=t.multiPassRenderer.getPostProcessor().getReadFBO();n(i,(function(){r({color:[0,0,0,0],depth:1,stencil:0,framebuffer:i}),t.multiPassRenderer.setRenderFlag(!1),t.models.forEach((function(e){e.draw({uniforms:t.layerModel.getUninforms()})})),t.multiPassRenderer.setRenderFlag(!0)}))}}]),n}(zv))||Sm);function Dm(t){var e=Fm();return function(){var n,r=Object(ct["a"])(t);if(e){var i=Object(ct["a"])(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(ut["a"])(this,n)}}function Fm(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}var Bm="uniform float u_opacity : 1.0;\nuniform float u_MixRatio : 0.5;\n\nuniform sampler2D u_Diffuse1;\nuniform sampler2D u_Diffuse2;\n\nvarying vec2 v_UV;\n\nvoid main() {\n  vec4 texel1 = texture2D(u_Diffuse1, v_UV);\n  vec4 texel2 = texture2D(u_Diffuse2, v_UV);\n  gl_FragColor = u_opacity * mix(texel1, texel2, u_MixRatio);\n}\n",zm="varying vec2 v_UV;\n\nuniform sampler2D u_Texture;\n\nvoid main() {\n  gl_FragColor = vec4(texture2D(u_Texture, v_UV));\n}",Um="attribute vec2 a_Position;\n\nvarying vec2 v_UV;\n\nvoid main() {\n  v_UV = 0.5 * (a_Position + 1.0);\n  gl_Position = vec4(a_Position, 0., 1.);\n}";function Vm(t,e){var n=0,r=1/e,i=t;while(i>0)n+=r*(i%e),i=Math.floor(i/e),r/=e;return n}var Hm=1,Gm=(Pm=Object(Yf["injectable"])(),Rm=Object(Yf["inject"])(Kf.IShaderModuleService),Pm((Im=function(t){Object(st["a"])(n,t);var e=Dm(n);function n(){var t;Object(et["a"])(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return t=e.call.apply(e,[this].concat(i)),sp(Object(ft["a"])(t),"shaderModuleService",Lm,Object(ft["a"])(t)),Object(Ar["a"])(Object(ft["a"])(t),"haltonSequence",[]),Object(Ar["a"])(Object(ft["a"])(t),"accumulatingId",0),Object(Ar["a"])(Object(ft["a"])(t),"frame",0),Object(Ar["a"])(Object(ft["a"])(t),"timer",void 0),Object(Ar["a"])(Object(ft["a"])(t),"sampleRenderTarget",void 0),Object(Ar["a"])(Object(ft["a"])(t),"prevRenderTarget",void 0),Object(Ar["a"])(Object(ft["a"])(t),"outputRenderTarget",void 0),Object(Ar["a"])(Object(ft["a"])(t),"copyRenderTarget",void 0),Object(Ar["a"])(Object(ft["a"])(t),"blendModel",void 0),Object(Ar["a"])(Object(ft["a"])(t),"outputModel",void 0),Object(Ar["a"])(Object(ft["a"])(t),"copyModel",void 0),t}return Object(nt["a"])(n,[{key:"getType",value:function(){return vv.Normal}},{key:"getName",value:function(){return"taa"}},{key:"init",value:function(t,e){Dv(Object(ct["a"])(n.prototype),"init",this).call(this,t,e);var r=this.rendererService,i=r.createFramebuffer,o=r.createTexture2D;this.sampleRenderTarget=i({color:o({width:1,height:1,wrapS:Rp.CLAMP_TO_EDGE,wrapT:Rp.CLAMP_TO_EDGE})}),this.prevRenderTarget=i({color:o({width:1,height:1,wrapS:Rp.CLAMP_TO_EDGE,wrapT:Rp.CLAMP_TO_EDGE})}),this.outputRenderTarget=i({color:o({width:1,height:1,wrapS:Rp.CLAMP_TO_EDGE,wrapT:Rp.CLAMP_TO_EDGE})}),this.copyRenderTarget=i({color:o({width:1,height:1,wrapS:Rp.CLAMP_TO_EDGE,wrapT:Rp.CLAMP_TO_EDGE})});for(var a=0;a<30;a++)this.haltonSequence.push([Vm(a,2),Vm(a,3)]);this.blendModel=this.createTriangleModel("blend-pass",Bm),this.outputModel=this.createTriangleModel("copy-pass",zm,{blend:{enable:!0,func:{srcRGB:Rp.ONE,dstRGB:Rp.ONE_MINUS_SRC_ALPHA,srcAlpha:Rp.ONE,dstAlpha:Rp.ONE_MINUS_SRC_ALPHA},equation:{rgb:Rp.FUNC_ADD,alpha:Rp.FUNC_ADD}}}),this.copyModel=this.createTriangleModel("copy-pass",zm)}},{key:"render",value:function(t){var e=this,n=this.rendererService,r=n.clear,i=n.getViewportSize,o=n.useFramebuffer,a=i(),s=a.width,u=a.height;this.sampleRenderTarget.resize({width:s,height:u}),this.prevRenderTarget.resize({width:s,height:u}),this.outputRenderTarget.resize({width:s,height:u}),this.copyRenderTarget.resize({width:s,height:u}),this.resetFrame(),this.stopAccumulating();var c=t.multiPassRenderer.getPostProcessor().getReadFBO();o(c,(function(){r({color:[0,0,0,0],depth:1,stencil:0,framebuffer:c}),t.multiPassRenderer.setRenderFlag(!1),t.render(),t.multiPassRenderer.setRenderFlag(!0)}));var l=function n(r){e.accumulatingId&&r===e.accumulatingId&&(e.isFinished()||(e.doRender(t),sn.requestAnimationFrame((function(){n(r)}))))};this.accumulatingId=Hm++,this.timer=sn.setTimeout((function(){l(e.accumulatingId)}),50)}},{key:"doRender",value:function(t){var e=this,n=this.rendererService,r=n.clear,i=n.getViewportSize,o=n.useFramebuffer,a=i(),s=a.width,u=a.height,c=t.getLayerConfig(),l=c.jitterScale,f=void 0===l?1:l,h=this.haltonSequence[this.frame%this.haltonSequence.length];this.cameraService.jitterProjectionMatrix((2*h[0]-1)/s*f,(2*h[1]-1)/u*f),t.multiPassRenderer.setRenderFlag(!1),t.hooks.beforeRender.call(),o(this.sampleRenderTarget,(function(){r({color:[0,0,0,0],depth:1,stencil:0,framebuffer:e.sampleRenderTarget}),t.render()})),t.hooks.afterRender.call(),t.multiPassRenderer.setRenderFlag(!0);var p=t.getLayerConfig();o(this.outputRenderTarget,(function(){e.blendModel.draw({uniforms:{u_opacity:p.opacity||1,u_MixRatio:0===e.frame?1:.9,u_Diffuse1:e.sampleRenderTarget,u_Diffuse2:0===e.frame?t.multiPassRenderer.getPostProcessor().getReadFBO():e.prevRenderTarget}})})),0===this.frame&&r({color:[0,0,0,0],depth:1,stencil:0,framebuffer:this.copyRenderTarget}),this.frame>=1&&(o(this.copyRenderTarget,(function(){e.outputModel.draw({uniforms:{u_Texture:e.outputRenderTarget}})})),o(t.multiPassRenderer.getPostProcessor().getReadFBO(),(function(){e.copyModel.draw({uniforms:{u_Texture:e.copyRenderTarget}})})),t.multiPassRenderer.getPostProcessor().render(t));var d=this.prevRenderTarget;this.prevRenderTarget=this.outputRenderTarget,this.outputRenderTarget=d,this.frame++,this.cameraService.clearJitterProjectionMatrix()}},{key:"isFinished",value:function(){return this.frame>=this.haltonSequence.length}},{key:"resetFrame",value:function(){this.frame=0}},{key:"stopAccumulating",value:function(){this.accumulatingId=0,sn.clearTimeout(this.timer)}},{key:"createTriangleModel",value:function(t,e,n){this.shaderModuleService.registerModule(t,{vs:Um,fs:e});var r=this.shaderModuleService.getModule(t),i=r.vs,o=r.fs,a=r.uniforms,s=this.rendererService,u=s.createAttribute,c=s.createBuffer,l=s.createModel;return l(Object(P["a"])({vs:i,fs:o,attributes:{a_Position:u({buffer:c({data:[-4,-4,4,-4,0,4],type:Rp.FLOAT}),size:2})},uniforms:Object(P["a"])({},a),depth:{enable:!1},count:3},n))}}]),n}(zv),Lm=up(Im.prototype,"shaderModuleService",[Rm],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),jm=Im))||jm),Wm=new Yf["Container"];Wm.bind(Kf.IGlobalConfigService).to(ap).inSingletonScope(),Object(Yf["decorate"])(Object(Yf["injectable"])(),vl["EventEmitter"]),Wm.bind(Kf.IEventEmitter).to(vl["EventEmitter"]);var Zm=qf()(Wm,!1),Ym=function(t){var e=Zm.lazyInject(t);return function(t,n,r){e.call(this,t,n),r&&(r.initializer=function(){return t[n]})}},Xm=Wm,qm=0;function Km(){var t=new Yf["Container"];return t.parent=Wm,t.bind(Kf.SceneID).toConstantValue("".concat(qm++)),t.bind(Kf.IShaderModuleService).to(Lv).inSingletonScope(),t.bind(Kf.ILayerService).to(Kd).inSingletonScope(),t.bind(Kf.ISceneService).to(cv).inSingletonScope(),t.bind(Kf.ICameraService).to(Vh).inSingletonScope(),t.bind(Kf.ICoordinateSystemService).to(Tp).inSingletonScope(),t.bind(Kf.IInteractionService).to(Yp).inSingletonScope(),t.bind(Kf.IPickingService).to(id).inSingletonScope(),t.bind(Kf.IControlService).to(Jh).inSingletonScope(),t.bind(Kf.IMarkerService).to(tp).inSingletonScope(),t.bind(Kf.IIconService).to(Uh).inSingletonScope(),t.bind(Kf.IFontService).to(Mh).inSingletonScope(),t.bind(Kf.IPopupService).to(ep).inSingletonScope(),t.bind(Kf.INormalPass).to(Xv).whenTargetNamed("clear"),t.bind(Kf.INormalPass).to(lg).whenTargetNamed("pixelPicking"),t.bind(Kf.INormalPass).to(Nm).whenTargetNamed("render"),t.bind(Kf.INormalPass).to(Gm).whenTargetNamed("taa"),t.bind(Kf.IFactoryNormalPass).toFactory((function(t){return function(e){return t.container.getNamed(Kf.INormalPass,e)}})),t.bind(Kf.IPostProcessingPass).to(Yg).whenTargetNamed("copy"),t.bind(Kf.IPostProcessingPass).to(_g).whenTargetNamed("bloom"),t.bind(Kf.IPostProcessingPass).to(Cg).whenTargetNamed("blurH"),t.bind(Kf.IPostProcessingPass).to(jg).whenTargetNamed("blurV"),t.bind(Kf.IPostProcessingPass).to(dm).whenTargetNamed("noise"),t.bind(Kf.IPostProcessingPass).to(Tm).whenTargetNamed("sepia"),t.bind(Kf.IPostProcessingPass).to(zg).whenTargetNamed("colorHalftone"),t.bind(Kf.IPostProcessingPass).to(tm).whenTargetNamed("hexagonalPixelate"),t.bind(Kf.IPostProcessingPass).to(sm).whenTargetNamed("ink"),t.bind(Kf.IFactoryPostProcessingPass).toFactory((function(t){return function(e){var n=t.container.getNamed(Kf.IPostProcessingPass,e);return n.setName(e),n}})),t}function Qm(t){var e=new Yf["Container"];return e.parent=t,e.bind(Kf.IStyleAttributeService).to(rv).inSingletonScope(),e.bind(Kf.IMultiPassRenderer).to(tg).inSingletonScope(),e.bind(Kf.IPostProcessor).to(Am).inSingletonScope(),e}var $m,Jm,ty,ey,ny;(function(t){t["normal"]="normal",t["additive"]="additive",t["subtractive"]="subtractive",t["min"]="min",t["max"]="max",t["none"]="none"})($m||($m={})),function(t){t["LINEAR"]="linear",t["SEQUENTIAL"]="sequential",t["POWER"]="power",t["LOG"]="log",t["IDENTITY"]="identity",t["TIME"]="time",t["QUANTILE"]="quantile",t["QUANTIZE"]="quantize",t["THRESHOLD"]="threshold",t["CAT"]="cat",t["DIVERGING"]="diverging"}(Jm||(Jm={})),function(t){t["CONSTANT"]="constant",t["VARIABLE"]="variable"}(ty||(ty={})),function(t){t[t["Attribute"]=0]="Attribute",t[t["InstancedAttribute"]=1]="InstancedAttribute",t[t["Uniform"]=2]="Uniform"}(ey||(ey={})),function(t){t["IMAGE"]="image",t["ARRAYBUFFER"]="arraybuffer",t["RGB"]="rgb",t["CUSTOMRGB"]="customRGB",t["CUSTOMARRAYBUFFER"]="customArrayBuffer"}(ny||(ny={}));var ry=["mapload","mapchange","mapAfterFrameChange"],iy={ProjectionMatrix:"u_ProjectionMatrix",ViewMatrix:"u_ViewMatrix",ViewProjectionMatrix:"u_ViewProjectionMatrix",Zoom:"u_Zoom",ZoomScale:"u_ZoomScale",FocalDistance:"u_FocalDistance",CameraPosition:"u_CameraPosition"},oy=["loaded","fontloaded","maploaded","resize","destroy","dragstart","dragging","dragend","dragcancel"],ay=function(){var t=Object(mi["a"])(_i.a.mark((function t(e,n,r,i){return _i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,o){n({x:e.x,y:e.y,z:e.z},(function(e,n){e||0===n.length?o(e):n&&Bf([{data:n,bands:[0]}],r,i,(function(e,n){e?o(e):n&&t(n)}))}))})));case 1:case"end":return t.stop()}}),t)})));return function(e,n,r,i){return t.apply(this,arguments)}}();function sy(t,e){return Array.isArray(t)?"string"===typeof t[0]?t.map((function(t){return hl(t,e)})):t.map((function(t){return{url:hl(t.url,e),bands:t.bands||[0]}})):hl(t,e)}function uy(t){return"string"===typeof t?[{url:t,bands:[0]}]:"string"===typeof t[0]?t.map((function(t){return{url:t,bands:[0]}})):t}function cy(t,e){t.xhrCancel=function(){e.map((function(t){t.abort()}))}}var ly=function(){var t=Object(mi["a"])(_i.a.mark((function t(e,n,r,i,o){var a,s,u,c,l,f;return _i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a=uy(n.url),!(a.length>1)){t.next=15;break}return t.next=4,fy(a,n);case 4:if(s=t.sent,u=s.rasterFiles,c=s.xhrList,l=s.errList,cy(e,c),!(l.length>0)){t.next=12;break}return r(l,null),t.abrupt("return");case 12:Bf(u,i,o,r),t.next=17;break;case 15:f=nr(n,(function(t,e){if(t)r(t);else if(e){var n=[{data:e,bands:a[0].bands}];Bf(n,i,o,r)}})),cy(e,[f]);case 17:case"end":return t.stop()}}),t)})));return function(e,n,r,i,o){return t.apply(this,arguments)}}();function fy(t,e){return hy.apply(this,arguments)}function hy(){return hy=Object(mi["a"])(_i.a.mark((function t(e,n){var r,i,o,a,s,u,c,l,f,h,p;return _i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:r=[],i=[],o=[],a=0;case 4:if(!(a<e.length)){t.next=20;break}return s=e[a],u=Object(P["a"])(Object(P["a"])({},n),{},{url:s.url}),c=s.bands,t.next=10,Jn(Object(P["a"])(Object(P["a"])({},u),{},{type:"arrayBuffer"}));case 10:l=t.sent,f=l.err,h=l.data,p=l.xhr,f&&o.push(f),i.push(p),r.push({data:h,bands:c});case 17:a++,t.next=4;break;case 20:return t.abrupt("return",{rasterFiles:r,xhrList:i,errList:o});case 21:case"end":return t.stop()}}),t)}))),hy.apply(this,arguments)}var py=function(){var t=Object(mi["a"])(_i.a.mark((function t(e,n,r,i,o){var a;return _i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a={url:sy(e,n)},t.abrupt("return",new Promise((function(t,e){ly(r,a,(function(n,r){n?e(n):r&&t(r)}),i,o)})));case 2:case"end":return t.stop()}}),t)})));return function(e,n,r,i,o){return t.apply(this,arguments)}}(),dy=function(){var t=Object(mi["a"])(_i.a.mark((function t(e,n,r,i){var o,a,s,u;return _i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=Array.isArray(e)?e[0]:e,i.wmtsOptions?(s=(null===i||void 0===i?void 0:i.getURLFromTemplate)||pl,o=s(a,Object(P["a"])(Object(P["a"])({},n),i.wmtsOptions))):(u=(null===i||void 0===i?void 0:i.getURLFromTemplate)||hl,o=u(a,n)),t.abrupt("return",new Promise((function(t,e){var n,a=ar({url:o,type:(null===i||void 0===i||null===(n=i.requestParameters)||void 0===n?void 0:n.type)||"arrayBuffer"},(function(n,r){n?e(n):r&&t(r)}),i.transformResponse);r.xhrCancel=function(){return a.abort()}})));case 3:case"end":return t.stop()}}),t)})));return function(e,n,r,i){return t.apply(this,arguments)}}(),vy=function(){return{rasterData:new Uint8Array([0]),width:1,height:1}},gy={tileSize:256,minZoom:0,maxZoom:1/0,zoomOffset:0,warp:!0};ny.ARRAYBUFFER,ny.RGB;function yy(t){return!(!Array.isArray(t)||0!==t.length)||!Array.isArray(t)&&"string"!==typeof t}function _y(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(yy(t))throw new Error("tile server url is error");var n=(null===e||void 0===e?void 0:e.dataType)||ny.IMAGE;n===ny.RGB&&(n=ny.ARRAYBUFFER);var r=function(r,i){switch(n){case ny.IMAGE:return dy(t,r,i,e);case ny.ARRAYBUFFER:return py(t,r,i,(null===e||void 0===e?void 0:e.format)||vy,null===e||void 0===e?void 0:e.operation);case ny.CUSTOMARRAYBUFFER:case ny.CUSTOMRGB:return ay(i,null===e||void 0===e?void 0:e.getCustomData,(null===e||void 0===e?void 0:e.format)||vy,null===e||void 0===e?void 0:e.operation);default:return dy(t,r,i,e)}},i=Object(P["a"])(Object(P["a"])(Object(P["a"])({},gy),e),{},{getTileData:r});return{data:t,dataArray:[],tilesetOptions:i,isTile:!0}}var by={tileSize:256,minZoom:0,maxZoom:1/0,zoomOffset:0},xy=function(){var t=Object(mi["a"])(_i.a.mark((function t(e){return _i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t){var n=Object(q["a"])(e.bounds,4),r=n[0],i=n[1],o=n[2],a=n[3],s={layers:{testTile:{features:[{type:"Feature",properties:{key:e.x+"/"+e.y+"/"+e.z,textLng:(r+o)/2,textLat:(i+a)/2},geometry:{type:"LineString",coordinates:[[o,a],[o,i],[r,i],[r,i]]}}]}}};t(s)})));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();function wy(t,e){var n=function(t){return xy(t)},r=Object(P["a"])(Object(P["a"])(Object(P["a"])({},by),e),{},{getTileData:n});return{data:t,dataArray:[],tilesetOptions:r,isTile:!0}}var Ey=n("mpbz"),Sy=n.n(Ey);function Oy(t,e){var n=e.radius,r=void 0===n?40:n,i=e.maxZoom,o=void 0===i?18:i,a=e.minZoom,s=void 0===a?0:a,u=e.zoom,c=void 0===u?2:u;if(t.pointIndex){var l=t.pointIndex.getClusters(t.extent,Math.floor(c));return t.dataArray=Cy(l),t}var f=new Sy.a({radius:r,minZoom:s,maxZoom:o}),h={type:"FeatureCollection",features:[]};return h.features=t.dataArray.map((function(t){return{type:"Feature",geometry:{type:"Point",coordinates:t.coordinates},properties:Object(P["a"])({},t)}})),f.load(h.features),f}function Cy(t){return t.map((function(t,e){return Object(P["a"])({coordinates:t.geometry.coordinates,_id:e+1},t.properties)}))}function Ty(t){if(0===t.length)throw new Error("max requires at least one data point");for(var e=t[0],n=1;n<t.length;n++)t[n]>e&&(e=t[n]);return e}function Ay(t){if(0===t.length)throw new Error("min requires at least one data point");for(var e=t[0],n=1;n<t.length;n++)t[n]<e&&(e=t[n]);return e}function ky(t){if(0===t.length)return 0;for(var e,n=t[0],r=0,i=1;i<t.length;i++)e=n+1*t[i],Math.abs(n)>=Math.abs(t[i])?r+=n-e+t[i]:r+=t[i]-e+n,n=e;return n+1*r}function My(t){if(0===t.length)throw new Error("mean requires at least one data point");return ky(t)/t.length}var Py={min:Ay,max:Ty,mean:My,sum:ky};function Ry(t){var e=jy();return function(){var n,r=Object(ct["a"])(t);if(e){var i=Object(ct["a"])(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(ut["a"])(this,n)}}function jy(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function Iy(t,e){if(Array.isArray(e))return e}var Ly=function(t){Object(st["a"])(n,t);var e=Ry(n);function n(t,r){var i;return Object(et["a"])(this,n),i=e.call(this),Object(Ar["a"])(Object(ft["a"])(i),"type","source"),Object(Ar["a"])(Object(ft["a"])(i),"isTile",!1),Object(Ar["a"])(Object(ft["a"])(i),"inited",!1),Object(Ar["a"])(Object(ft["a"])(i),"hooks",{init:new iv["e"]}),Object(Ar["a"])(Object(ft["a"])(i),"parser",{type:"geojson"}),Object(Ar["a"])(Object(ft["a"])(i),"transforms",[]),Object(Ar["a"])(Object(ft["a"])(i),"cluster",!1),Object(Ar["a"])(Object(ft["a"])(i),"clusterOptions",{enable:!1,radius:40,maxZoom:20,zoom:-99,method:"count"}),Object(Ar["a"])(Object(ft["a"])(i),"invalidExtent",!1),Object(Ar["a"])(Object(ft["a"])(i),"dataArrayChanged",!1),Object(Ar["a"])(Object(ft["a"])(i),"cfg",{autoRender:!0}),i.originData=t,i.initCfg(r),i.init().then((function(){i.inited=!0,i.emit("update",{type:"inited"})})),i}return Object(nt["a"])(n,[{key:"getSourceCfg",value:function(){return this.cfg}},{key:"getClusters",value:function(t){return this.clusterIndex.getClusters(this.caculClusterExtent(2),t)}},{key:"getClustersLeaves",value:function(t){return this.clusterIndex.getLeaves(t,1/0)}},{key:"getParserType",value:function(){return this.parser.type}},{key:"updateClusterData",value:function(t){var e=this,n=this.clusterOptions,r=n.method,i=void 0===r?"sum":r,o=n.field,a=this.clusterIndex.getClusters(this.caculClusterExtent(2),Math.floor(t));this.clusterOptions.zoom=t,a.forEach((function(t){t.id||(t.properties.point_count=1)})),(o||Object(K["isFunction"])(i))&&(a=a.map((function(t){var n=t.id;if(n){var r,a=e.clusterIndex.getLeaves(n,1/0),s=a.map((function(t){return t.properties}));if(Object(K["isString"])(i)&&o){var u=Uf(s,o);r=Py[i](u)}Object(K["isFunction"])(i)&&(r=i(s)),t.properties.stat=r}else t.properties.point_count=1;return t}))),this.data=h("geojson")({type:"FeatureCollection",features:a}),this.executeTrans()}},{key:"getFeatureById",value:function(t){var e=this.parser,n=e.type,r=void 0===n?"geojson":n,i=e.geometry;if("geojson"!==r||this.cluster)return"json"===r&&i?this.data.dataArray.find((function(e){return e._id===t})):t<this.data.dataArray.length?this.data.dataArray[t]:"null";var o=t<this.originData.features.length?this.originData.features[t]:"null",a=Object(K["cloneDeep"])(o);if(null!==a&&void 0!==a&&a.properties&&(0!==this.transforms.length||this.dataArrayChanged)){var s=this.data.dataArray.find((function(e){return e._id===t}));a.properties=s}return a}},{key:"updateFeaturePropertiesById",value:function(t,e){this.data.dataArray=this.data.dataArray.map((function(n){return n._id===t?Object(P["a"])(Object(P["a"])({},n),e):n})),this.dataArrayChanged=!0,this.emit("update",{type:"update"})}},{key:"getFeatureId",value:function(t,e){var n=this.data.dataArray.find((function(n){return n[t]===e}));return null===n||void 0===n?void 0:n._id}},{key:"setData",value:function(t,e){var n=this;this.originData=t,this.dataArrayChanged=!1,this.initCfg(e),this.init().then((function(){n.emit("update",{type:"update"})}))}},{key:"destroy",value:function(){var t;this.removeAllListeners(),this.originData=null,this.clusterIndex=null,this.data=null,null===(t=this.tileset)||void 0===t||t.destroy()}},{key:"processData",value:function(){var t=Object(mi["a"])(_i.a.mark((function t(){var e=this;return _i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,new Promise((function(t,n){try{e.excuteParser(),e.initCluster(),e.executeTrans(),t({})}catch(r){n(r)}}));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));function e(){return t.apply(this,arguments)}return e}()},{key:"initCfg",value:function(t){this.cfg=Object(K["mergeWith"])(this.cfg,t,Iy);var e=this.cfg;e&&(e.parser&&(this.parser=e.parser),e.transforms&&(this.transforms=e.transforms),this.cluster=e.cluster||!1,e.clusterOptions&&(this.cluster=!0,this.clusterOptions=Object(P["a"])(Object(P["a"])({},this.clusterOptions),e.clusterOptions)))}},{key:"init",value:function(){var t=Object(mi["a"])(_i.a.mark((function t(){return _i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.inited=!1,t.next=3,this.processData();case 3:this.inited=!0;case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"excuteParser",value:function(){var t=this.parser,e=t.type||"geojson",n=h(e);this.data=n(this.originData,t),this.tileset=this.initTileset(),t.cancelExtent||(this.extent=hr(this.data.dataArray),this.setCenter(this.extent),this.invalidExtent=this.extent[0]===this.extent[2]||this.extent[1]===this.extent[3])}},{key:"setCenter",value:function(t){this.center=[(t[0]+t[2])/2,(t[1]+t[3])/2],(isNaN(this.center[0])||isNaN(this.center[1]))&&(this.center=[108.92361111111111,34.54083333333333])}},{key:"initTileset",value:function(){var t=this.data.tilesetOptions;if(t){if(this.isTile=!0,this.tileset)return this.tileset.updateOptions(t),this.tileset;var e=new Al(Object(P["a"])({},t));return e}}},{key:"executeTrans",value:function(){var t=this,e=this.transforms;e.forEach((function(e){var n=e.type,r=d(n)(t.data,e);Object.assign(t.data,r)}))}},{key:"initCluster",value:function(){if(this.cluster){var t=this.clusterOptions||{};this.clusterIndex=Oy(this.data,t)}}},{key:"caculClusterExtent",value:function(t){var e=[[-1/0,-1/0],[1/0,1/0]];return this.invalidExtent||(e=_r(xr(this.extent),t)),e[0].concat(e[1])}}]),n}(vl["EventEmitter"]);function Ny(t,e){var n=e.callback;return n&&(t.dataArray=t.dataArray.filter(n)),t}function Dy(t,e){var n="undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=Fy(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n["return"]||n["return"]()}finally{if(s)throw o}}}}function Fy(t,e){if(t){if("string"===typeof t)return By(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?By(t,e):void 0}}function By(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var zy=6378e3;function Uy(t,e){var n=t.dataArray,r=e.size,i=void 0===r?10:r,o=i/(2*Math.PI*zy)*(256<<20)/2,a=Vy(n,i),s=a.gridHash,u=a.gridOffset,c=Zy(s,u,e);return{yOffset:o,xOffset:o,radius:o,type:"grid",dataArray:c}}function Vy(t,e){var n,r,i=1/0,o=-1/0,a=Dy(t);try{for(a.s();!(r=a.n()).done;){var s=r.value;n=s.coordinates[1],Number.isFinite(n)&&(i=n<i?n:i,o=n>o?n:o)}}catch(_){a.e(_)}finally{a.f()}var u=(i+o)/2,c=Hy(e,u);if(c.xOffset<=0||c.yOffset<=0)return{gridHash:{},gridOffset:c};var l,f={},h=Dy(t);try{for(h.s();!(l=h.n()).done;){var p=l.value,d=p.coordinates[1],v=p.coordinates[0];if(Number.isFinite(d)&&Number.isFinite(v)){var g=Math.floor((d+90)/c.yOffset),m=Math.floor((v+180)/c.xOffset),y="".concat(g,"-").concat(m);f[y]=f[y]||{count:0,points:[]},f[y].count+=1,f[y].points.push(p)}}}catch(_){h.e(_)}finally{h.f()}return{gridHash:f,gridOffset:c}}function Hy(t,e){var n=Gy(t),r=Wy(e,t);return{yOffset:n,xOffset:r}}function Gy(t){return t/zy*(180/Math.PI)}function Wy(t,e){return e/zy*(180/Math.PI)/Math.cos(t*Math.PI/180)}function Zy(t,e,n){return Object.keys(t).reduce((function(r,o,a){var s=o.split("-"),u=parseInt(s[0],10),c=parseInt(s[1],10),l={};if(n.field&&n.method){var f=i.getColumn(t[o].points,n.field);l[n.method]=i.statMap[n.method](f)}return Object.assign(l,{_id:a,coordinates:yr([e.xOffset*(c+.5)-180,e.yOffset*(u+.5)-90]),rawData:t[o].points,count:t[o].count}),r.push(l),r}),[])}var Yy=Math.PI/3,Xy=[0,Yy,2*Yy,3*Yy,4*Yy,5*Yy];function qy(t){return t[0]}function Ky(t){return t[1]}var Qy=function(){var t,e,n,r=0,i=0,o=1,a=1,s=qy,u=Ky;function c(t){var r,i={},o=[],a=t.length;for(r=0;r<a;++r)if(!isNaN(l=+s.call(null,c=t[r],r,t))&&!isNaN(f=+u.call(null,c,r,t))){var c,l,f,h=Math.round(f/=n),p=Math.round(l=l/e-(1&h)/2),d=f-h;if(3*Math.abs(d)>1){var v=l-p,g=p+(l<p?-1:1)/2,m=h+(f<h?-1:1),y=l-g,_=f-m;v*v+d*d>y*y+_*_&&(p=g+(1&h?1:-1)/2,h=m)}var b=p+"-"+h,x=i[b];x?x.push(c):(o.push(x=i[b]=[c]),x.x=(p+(1&h)/2)*e,x.y=h*n)}return o}function l(t){var e=0,n=0;return Xy.map((function(r){var i=Math.sin(r)*t,o=-Math.cos(r)*t,a=i-e,s=o-n;return e=i,n=o,[a,s]}))}return c.hexagon=function(e){return"m"+l(null==e?t:+e).join("l")+"z"},c.centers=function(){for(var s=[],u=Math.round(i/n),c=Math.round(r/e),l=u*n;l<a+t;l+=n,++u)for(var f=c*e+(1&u)*e/2;f<o+e/2;f+=e)s.push([f,l]);return s},c.mesh=function(){var e=l(t).slice(0,4).join("l");return c.centers().map((function(t){return"M"+t+"m"+e})).join("")},c.x=function(t){return arguments.length?(s=t,c):s},c.y=function(t){return arguments.length?(u=t,c):u},c.radius=function(r){return arguments.length?(t=+r,e=2*t*Math.sin(Yy),n=1.5*t,c):t},c.size=function(t){return arguments.length?(r=i=0,o=+t[0],a=+t[1],c):[o-r,a-i]},c.extent=function(t){return arguments.length?(r=+t[0][0],i=+t[0][1],o=+t[1][0],a=+t[1][1],c):[[r,i],[o,a]]},c.radius(1)},$y=6378e3;function Jy(t,e){var n=t.dataArray,r=e.size,o=void 0===r?10:r,a=e.method,s=void 0===a?"sum":a,u=o/(2*Math.PI*$y)*(256<<20)/2,c=n.map((function(t){var e=yr(t.coordinates),n=Object(q["a"])(e,2),r=n[0],i=n[1];return Object(P["a"])(Object(P["a"])({},t),{},{coordinates:[r,i]})})),l=Qy().radius(u).x((function(t){return t.coordinates[0]})).y((function(t){return t.coordinates[1]})),f=l(c),h={dataArray:f.map((function(t,n){var r;if(e.field&&s){var o=i.getColumn(t,e.field);t[s]=i.statMap[s](o)}return r={},Object(Ar["a"])(r,e.method,t[s]),Object(Ar["a"])(r,"count",t.length),Object(Ar["a"])(r,"rawData",t),Object(Ar["a"])(r,"coordinates",[t.x,t.y]),Object(Ar["a"])(r,"_id",n),r})),radius:u,xOffset:u,yOffset:u,type:"hexagon"};return h}function t_(t,e){var n=e.sourceField,r=e.targetField,i=e.data,o={};return i.forEach((function(t){o[t[n]]=t})),t.dataArray=t.dataArray.map((function(t){var e=t[r];return Object(P["a"])(Object(P["a"])({},t),o[e])})),t}function e_(t,e){var n=e.callback;return n&&(t.dataArray=t.dataArray.map(n)),t}p("rasterTile",_y),p("mvt",Dl),p("geojsonvt",Cf),p("testTile",wy),p("geojson",X),p("image",kl),p("csv",W),p("json",G),p("raster",Hf),p("rasterRgb",Zf),v("cluster",Oy),v("filter",Ny),v("join",t_),v("map",e_),v("grid",Uy),v("hexagon",Jy);var n_=Ly;function r_(t){var e=i_();return function(){var n,r=Object(ct["a"])(t);if(e){var i=Object(ct["a"])(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(ut["a"])(this,n)}}function i_(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}var o_=function(t){Object(st["a"])(n,t);var e=r_(n);function n(t){var r;return Object(et["a"])(this,n),r=e.call(this),Object(Ar["a"])(Object(ft["a"])(r),"added",!1),Object(Ar["a"])(Object(ft["a"])(r),"eventHandle",(function(t){r.emit(t.type,{target:t,data:r.markerOption.extData,lngLat:r.lngLat})})),r.markerOption=Object(P["a"])(Object(P["a"])({},r.getDefault()),t),kr(["update","onMove","onMapClick"],Object(ft["a"])(r)),r.init(),r}return Object(nt["a"])(n,[{key:"getMarkerLayerContainerSize",value:function(){}},{key:"getDefault",value:function(){return{element:void 0,anchor:jr.BOTTOM,offsets:[0,0],color:"#5B8FF9",draggable:!1}}},{key:"addTo",value:function(t){this.scene=t,this.mapsService=t.get(Kf.IMapService),this.sceneSerive=t.get(Kf.ISceneService);var e=this.markerOption.element;return this.mapsService.getMarkerContainer().appendChild(e),this.registerMarkerEvent(e),this.mapsService.on("camerachange",this.update),this.mapsService.on("viewchange",this.update),this.update(),this.added=!0,this.emit("added"),this}},{key:"remove",value:function(){this.mapsService&&(this.mapsService.off("click",this.onMapClick),this.mapsService.off("move",this.update),this.mapsService.off("moveend",this.update)),this.unRegisterMarkerEvent(),this.removeAllListeners();var t=this.markerOption.element;return t&&r.remove(t),this.popup&&this.popup.remove(),this}},{key:"setLnglat",value:function(t){return this.lngLat=t,Array.isArray(t)&&(this.lngLat={lng:t[0],lat:t[1]}),this.popup&&this.popup.setLnglat(this.lngLat),this.update(),this}},{key:"getLnglat",value:function(){return this.lngLat}},{key:"getElement",value:function(){return this.markerOption.element}},{key:"setElement",value:function(t){var e=this;if(!this.added)return this.once("added",(function(){e.setElement(t)})),this;var n=this.markerOption.element;return n&&r.remove(n),this.markerOption.element=t,this.init(),this.mapsService.getMarkerContainer().appendChild(t),this.registerMarkerEvent(t),this.update(),this}},{key:"openPopup",value:function(){var t=this;if(!this.added)return this.once("added",(function(){t.openPopup()})),this;var e=this.popup;return e?(e.isOpen()||e.addTo(this.scene),this):this}},{key:"closePopup",value:function(){var t=this;this.added||this.once("added",(function(){t.closePopup()}));var e=this.popup;return e&&e.remove(),this}},{key:"setPopup",value:function(t){return this.popup=t,this.lngLat&&this.popup.setLnglat(this.lngLat),this}},{key:"togglePopup",value:function(){var t=this.popup;return t?(t.isOpen()?t.remove():t.addTo(this.scene),this):this}},{key:"getPopup",value:function(){return this.popup}},{key:"getOffset",value:function(){return this.markerOption.offsets}},{key:"setDraggable",value:function(t){throw new Error("Method not implemented.")}},{key:"isDraggable",value:function(){return this.markerOption.draggable}},{key:"getExtData",value:function(){return this.markerOption.extData}},{key:"setExtData",value:function(t){this.markerOption.extData=t}},{key:"update",value:function(){if(this.mapsService){var t=this.markerOption,e=t.element,n=t.anchor;this.updatePosition(),r.setTransform(e,"".concat(di[n]))}}},{key:"onMapClick",value:function(t){var e=this.markerOption.element;this.popup&&e&&this.togglePopup()}},{key:"getCurrentContainerSize",value:function(){var t=this.mapsService.getContainer();return{containerHeight:(null===t||void 0===t?void 0:t.scrollHeight)||0,containerWidth:(null===t||void 0===t?void 0:t.scrollWidth)||0,bounds:this.mapsService.getBounds()}}},{key:"updatePosition",value:function(){if(this.mapsService){var t=this.markerOption,e=t.element,n=t.offsets,r=this.lngLat,i=r.lng,o=r.lat,a=this.mapsService.lngLatToContainer([i,o]);if(e){e.style.display="block",e.style.whiteSpace="nowrap";var s=this.getMarkerLayerContainerSize()||this.getCurrentContainerSize(),u=s.containerHeight,c=s.containerWidth,l=s.bounds;if(!l)return;if(Math.abs(l[0][0])>180||Math.abs(l[1][0])>180){if(a.x>c){var f=this.mapsService.lngLatToContainer([i-360,o]);a.x=f.x}if(a.x<0){var h=this.mapsService.lngLatToContainer([i+360,o]);a.x=h.x}}(a.x>c||a.x<0||a.y>u||a.y<0)&&(e.style.display="none"),e.style.left=a.x+n[0]+"px",e.style.top=a.y-n[1]+"px"}}}},{key:"init",value:function(){var t=this,e=this.markerOption.element,n=this.markerOption,i=n.color,o=n.anchor;if(!e){this.defaultMarker=!0,e=r.create("div"),this.markerOption.element=e;var a=document.createElementNS("http://www.w3.org/2000/svg","svg");a.setAttributeNS(null,"display","block"),a.setAttributeNS(null,"height","48px"),a.setAttributeNS(null,"width","48px"),a.setAttributeNS(null,"viewBox","0 0 1024 1024");var s=document.createElementNS("http://www.w3.org/2000/svg","path");s.setAttributeNS(null,"d","M512 490.666667C453.12 490.666667 405.333333 442.88 405.333333 384 405.333333 325.12 453.12 277.333333 512 277.333333 570.88 277.333333 618.666667 325.12 618.666667 384 618.666667 442.88 570.88 490.666667 512 490.666667M512 85.333333C346.88 85.333333 213.333333 218.88 213.333333 384 213.333333 608 512 938.666667 512 938.666667 512 938.666667 810.666667 608 810.666667 384 810.666667 218.88 677.12 85.333333 512 85.333333Z"),s.setAttributeNS(null,"fill",i),a.appendChild(s),e.appendChild(a)}r.addClass(e,"l7-marker"),Object.keys(this.markerOption.style||{}).forEach((function(n){var r,i,o=(null===(r=t.markerOption)||void 0===r?void 0:r.style)&&(null===(i=t.markerOption)||void 0===i?void 0:i.style[n]);e&&(e.style[n]=o)})),e.addEventListener("click",(function(e){t.onMapClick(e)})),e.addEventListener("click",this.eventHandle),vi(e,o,"marker")}},{key:"registerMarkerEvent",value:function(t){t.addEventListener("mousemove",this.eventHandle),t.addEventListener("click",this.eventHandle),t.addEventListener("mousedown",this.eventHandle),t.addEventListener("mouseup",this.eventHandle),t.addEventListener("dblclick",this.eventHandle),t.addEventListener("contextmenu",this.eventHandle),t.addEventListener("mouseover",this.eventHandle),t.addEventListener("mouseout",this.eventHandle)}},{key:"unRegisterMarkerEvent",value:function(){var t=this.getElement();t.removeEventListener("mousemove",this.eventHandle),t.removeEventListener("click",this.eventHandle),t.removeEventListener("mousedown",this.eventHandle),t.removeEventListener("mouseup",this.eventHandle),t.removeEventListener("dblclick",this.eventHandle),t.removeEventListener("contextmenu",this.eventHandle),t.removeEventListener("mouseover",this.eventHandle),t.removeEventListener("mouseout",this.eventHandle)}},{key:"addDragHandler",value:function(t){return null}},{key:"onUp",value:function(t){throw new Error("Method not implemented.")}}]),n}(vl["EventEmitter"]);function a_(t){var e=s_();return function(){var n,r=Object(ct["a"])(t);if(e){var i=Object(ct["a"])(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(ut["a"])(this,n)}}function s_(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}vl["EventEmitter"],n("bpoo");function u_(t){var e=c_();return function(){var n,r=Object(ct["a"])(t);if(e){var i=Object(ct["a"])(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(ut["a"])(this,n)}}function c_(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}var l_=function(t){Object(st["a"])(n,t);var e=u_(n);function n(t){var r;return Object(et["a"])(this,n),r=e.call(this),n.controlCount++,r.controlOption=Object(P["a"])(Object(P["a"])({},r.getDefault(t)),t||{}),r}return Object(nt["a"])(n,[{key:"getOptions",value:function(){return this.controlOption}},{key:"setOptions",value:function(t){var e=this.getDefault(t);Object.entries(t).forEach((function(n){var r=Object(q["a"])(n,2),i=r[0],o=r[1];void 0===o&&(t[i]=e[i])})),"position"in t&&this.setPosition(t.position),"className"in t&&this.setClassName(t.className),"style"in t&&this.setStyle(t.style),this.controlOption=Object(P["a"])(Object(P["a"])({},this.controlOption),t)}},{key:"addTo",value:function(t){this.mapsService=t.get(Kf.IMapService),this.renderService=t.get(Kf.IRendererService),this.layerService=t.get(Kf.ILayerService),this.controlService=t.get(Kf.IControlService),this.configService=t.get(Kf.IGlobalConfigService),this.scene=t.get(Kf.ISceneService),this.sceneContainer=t,this.isShow=!0,this.container=this.onAdd(),r.addClass(this.container,"l7-control");var e=this.controlOption,n=e.className,i=e.style;return n&&this.setClassName(n),i&&this.setStyle(i),this.insertContainer(),this.emit("add",this),this}},{key:"remove",value:function(){if(!this.mapsService)return this;r.remove(this.container),this.onRemove(),this.emit("remove",this)}},{key:"onAdd",value:function(){return r.create("div")}},{key:"onRemove",value:function(){}},{key:"show",value:function(){var t=this.container;r.removeClass(t,"l7-control--hide"),this.isShow=!0,this.emit("show",this)}},{key:"hide",value:function(){var t=this.container;r.addClass(t,"l7-control--hide"),this.isShow=!1,this.emit("hide",this)}},{key:"getDefault",value:function(t){return{position:Lh.TOPRIGHT,name:"".concat(n.controlCount)}}},{key:"getContainer",value:function(){return this.container}},{key:"getIsShow",value:function(){return this.isShow}},{key:"_refocusOnMap",value:function(t){if(this.mapsService&&t&&t.screenX>0&&t.screenY>0){var e=this.mapsService.getContainer();null!==e&&e.focus()}}},{key:"setPosition",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Lh.TOPLEFT,e=this.controlService;return e&&e.removeControl(this),this.controlOption.position=t,e&&e.addControl(this,this.sceneContainer),this}},{key:"setClassName",value:function(t){var e=this.container,n=this.controlOption.className;n&&r.removeClass(e,n),t&&r.addClass(e,t)}},{key:"setStyle",value:function(t){var e=this.container;t?e.setAttribute("style",t):e.removeAttribute("style")}},{key:"insertContainer",value:function(){var t=this.controlOption.position,e=this.container;if(t instanceof Element)t.appendChild(e);else{var n=this.controlService.controlCorners[t];-1!==t.indexOf("bottom")?n.insertBefore(e,n.firstChild):n.appendChild(e)}}},{key:"checkUpdateOption",value:function(t,e){return e.some((function(e){return e in t}))}}]),n}(gl.a);Object(Ar["a"])(l_,"controlCount",0);function f_(t){var e=h_();return function(){var n,r=Object(ct["a"])(t);if(e){var i=Object(ct["a"])(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(ut["a"])(this,n)}}function h_(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}var p_=function(t){Object(st["a"])(n,t);var e=f_(n);function n(t,i){var o;return Object(et["a"])(this,n),o=e.call(this),Object(Ar["a"])(Object(ft["a"])(o),"isShow",!1),Object(Ar["a"])(Object(ft["a"])(o),"timeout",null),Object(Ar["a"])(Object(ft["a"])(o),"show",(function(){return o.isShow||!o.contentDOM.innerHTML||(o.resetPopperPosition(),r.removeClass(o.popperDOM,"l7-popper-hide"),o.isShow=!0,o.option.unique&&n.conflictPopperList.forEach((function(t){t!==Object(ft["a"])(o)&&t.isShow&&t.hide()})),o.emit("show")),Object(ft["a"])(o)})),Object(Ar["a"])(Object(ft["a"])(o),"hide",(function(){return o.isShow?(r.addClass(o.popperDOM,"l7-popper-hide"),o.isShow=!1,o.emit("hide"),Object(ft["a"])(o)):Object(ft["a"])(o)})),Object(Ar["a"])(Object(ft["a"])(o),"setHideTimeout",(function(){o.timeout||(o.timeout=window.setTimeout((function(){o.isShow&&(o.hide(),o.timeout=null)}),300))})),Object(Ar["a"])(Object(ft["a"])(o),"clearHideTimeout",(function(){o.timeout&&(window.clearTimeout(o.timeout),o.timeout=null)})),Object(Ar["a"])(Object(ft["a"])(o),"onBtnClick",(function(){o.isShow?o.hide():o.show()})),Object(Ar["a"])(Object(ft["a"])(o),"onBtnMouseLeave",(function(){o.setHideTimeout()})),Object(Ar["a"])(Object(ft["a"])(o),"onBtnMouseMove",(function(){o.clearHideTimeout(),o.isShow||o.show()})),o.button=t,o.option=i,o.init(),i.unique&&n.conflictPopperList.push(Object(ft["a"])(o)),o}return Object(nt["a"])(n,[{key:"buttonRect",get:function(){return this.button.getBoundingClientRect()}},{key:"getPopperDOM",value:function(){return this.popperDOM}},{key:"getIsShow",value:function(){return this.isShow}},{key:"getContent",value:function(){return this.content}},{key:"setContent",value:function(t){"string"===typeof t?this.contentDOM.innerHTML=t:t instanceof HTMLElement&&(r.clearChildren(this.contentDOM),this.contentDOM.appendChild(t)),this.content=t}},{key:"init",value:function(){var t=this.option.trigger;this.popperDOM=this.createPopper(),"click"===t?this.button.addEventListener("click",this.onBtnClick):(this.button.addEventListener("mousemove",this.onBtnMouseMove),this.button.addEventListener("mouseleave",this.onBtnMouseLeave),this.popperDOM.addEventListener("mousemove",this.onBtnMouseMove),this.popperDOM.addEventListener("mouseleave",this.onBtnMouseLeave))}},{key:"destroy",value:function(){this.button.removeEventListener("click",this.onBtnClick),this.button.removeEventListener("mousemove",this.onBtnMouseMove),this.button.removeEventListener("mousemove",this.onBtnMouseLeave),this.popperDOM.removeEventListener("mousemove",this.onBtnMouseMove),this.popperDOM.removeEventListener("mouseleave",this.onBtnMouseLeave),r.remove(this.popperDOM)}},{key:"resetPopperPosition",value:function(){var t={},e=this.option,n=e.container,i=e.offset,o=void 0===i?[0,0]:i,a=e.placement,s=Object(q["a"])(o,2),u=s[0],c=s[1],l=this.button.getBoundingClientRect(),f=n.getBoundingClientRect(),h=r.getDiffRect(l,f),p=h.left,d=h.right,v=h.top,g=h.bottom,m=!1,y=!1;/^(left|right)/.test(a)?(a.includes("left")?t.right="".concat(l.width+d,"px"):a.includes("right")&&(t.left="".concat(l.width+p,"px")),a.includes("start")?t.top="".concat(v,"px"):a.includes("end")?t.bottom="".concat(g,"px"):(t.top="".concat(v+l.height/2,"px"),y=!0,t.transform="translate(".concat(u,"px, calc(").concat(c,"px - 50%))"))):/^(top|bottom)/.test(a)&&(a.includes("top")?t.bottom="".concat(l.height+g,"px"):a.includes("bottom")&&(t.top="".concat(l.height+v,"px")),a.includes("start")?t.left="".concat(p,"px"):a.includes("end")?t.right="".concat(d,"px"):(t.left="".concat(p+l.width/2,"px"),m=!0,t.transform="translate(calc(".concat(u,"px - 50%), ").concat(c,"px)"))),t.transform="translate(calc(".concat(u,"px - ").concat(m?"50%":"0%","), calc(").concat(c,"px - ").concat(y?"50%":"0%",")");var _=a.split("-");_.length&&r.addClass(this.popperDOM,_.map((function(t){return"l7-popper-".concat(t)})).join(" ")),r.addStyle(this.popperDOM,r.css2Style(t))}},{key:"createPopper",value:function(){var t=this.option,e=t.container,n=t.className,i=void 0===n?"":n,o=t.content,a=r.create("div","l7-popper l7-popper-hide ".concat(i)),s=r.create("div","l7-popper-content"),u=r.create("div","l7-popper-arrow");return a.appendChild(s),a.appendChild(u),e.appendChild(a),this.popperDOM=a,this.contentDOM=s,o&&this.setContent(o),a}}]),n}(vl["EventEmitter"]);Object(Ar["a"])(p_,"conflictPopperList",[]);var d_;(function(t){t["ActiveOptionClassName"]="l7-select-control-item-active",t["OptionValueAttrKey"]="data-option-value",t["OptionIndexAttrKey"]="data-option-index"})(d_||(d_={}));function v_(t){var e=g_();return function(){var n,r=Object(ct["a"])(t);if(e){var i=Object(ct["a"])(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(ut["a"])(this,n)}}function g_(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}var m_=function(t){Object(st["a"])(n,t);var e=v_(n);function n(){return Object(et["a"])(this,n),e.apply(this,arguments)}return Object(nt["a"])(n,[{key:"getDefault",value:function(){return{position:Lh.BOTTOMLEFT,name:"logo",href:"https://l7.antv.antgroup.com/",img:"https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*GRb1TKp4HcMAAAAAAAAAAAAAARQnAQ"}}},{key:"onAdd",value:function(){var t=r.create("div","l7-control-logo");return this.setLogoContent(t),t}},{key:"onRemove",value:function(){return null}},{key:"setOptions",value:function(t){Dv(Object(ct["a"])(n.prototype),"setOptions",this).call(this,t),this.checkUpdateOption(t,["img","href"])&&(r.clearChildren(this.container),this.setLogoContent(this.container))}},{key:"setLogoContent",value:function(t){var e=this.controlOption,n=e.href,i=e.img,o=r.create("img");if(o.setAttribute("src",i),o.setAttribute("aria-label","AntV logo"),r.setUnDraggable(o),n){var a=r.create("a","l7-control-logo-link");a.target="_blank",a.href=n,a.rel="noopener nofollow",a.setAttribute("rel","noopener nofollow"),a.appendChild(o),t.appendChild(a)}else t.appendChild(o)}}]),n}(l_),y_=function(t){var e=document.createElementNS("http://www.w3.org/2000/svg","svg");e.classList.add("l7-iconfont"),e.setAttribute("aria-hidden","true");var n=document.createElementNS("http://www.w3.org/2000/svg","use");return n.setAttributeNS("http://www.w3.org/1999/xlink","href","#".concat(t)),e.appendChild(n),e};function __(t,e){var n="undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=b_(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n["return"]||n["return"]()}finally{if(s)throw o}}}}function b_(t,e){if(t){if("string"===typeof t)return x_(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?x_(t,e):void 0}}function x_(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var w_=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],E_=function(){if("undefined"===typeof document)return!1;var t,e=w_[0],n={},r=__(w_);try{for(r.s();!(t=r.n()).done;){var i=t.value,o=null===i||void 0===i?void 0:i[1];if(o in document){var a,s=__(i.entries());try{for(s.s();!(a=s.n()).done;){var u=Object(q["a"])(a.value,2),c=u[0],l=u[1];n[e[c]]=l}}catch(f){s.e(f)}finally{s.f()}return n}}}catch(f){r.e(f)}finally{r.f()}return!1}(),S_={change:E_.fullscreenchange,error:E_.fullscreenerror},O_={request:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document.documentElement,e=arguments.length>1?arguments[1]:void 0;return new Promise((function(n,r){var i=function t(){O_.off("change",t),n()};O_.on("change",i);var o=t[E_.requestFullscreen](e);o instanceof Promise&&o.then(i)["catch"](r)}))},exit:function(){return new Promise((function(t,e){if(O_.isFullscreen){var n=function e(){O_.off("change",e),t()};O_.on("change",n);var r=document[E_.exitFullscreen]();r instanceof Promise&&r.then(n)["catch"](e)}else t()}))},toggle:function(t,e){return O_.isFullscreen?O_.exit():O_.request(t,e)},onchange:function(t){O_.on("change",t)},onerror:function(t){O_.on("error",t)},on:function(t,e){var n=S_[t];n&&document.addEventListener(n,e,!1)},off:function(t,e){var n=S_[t];n&&document.removeEventListener(n,e,!1)},raw:E_};Object.defineProperties(O_,{isFullscreen:{get:function(){return Boolean(document[E_.fullscreenElement])}},element:{enumerable:!0,get:function(){var t;return null!==(t=document[E_.fullscreenElement])&&void 0!==t?t:void 0}},isEnabled:{enumerable:!0,get:function(){return Boolean(document[E_.fullscreenEnabled])}}}),E_||(O_={isEnabled:!1});function C_(t){var e=T_();return function(){var n,r=Object(ct["a"])(t);if(e){var i=Object(ct["a"])(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(ut["a"])(this,n)}}function T_(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}vl["EventEmitter"];var A_;function k_(t,e){var n="undefined"!==typeof my&&!!my&&"function"===typeof my.showToast&&!0!==my.isFRM,r="undefined"!==typeof wx&&null!==wx&&("undefined"!==typeof wx.request||"undefined"!==typeof wx.miniProgram);if(!n&&!r&&(e||(e=document),e)){var i=e.head||e.getElementsByTagName("head")[0];if(!i){i=e.createElement("head");var o=e.body||e.getElementsByTagName("body")[0];o?o.parentNode.insertBefore(i,o):e.documentElement.appendChild(i)}var a=e.createElement("style");return a.type="text/css",a.styleSheet?a.styleSheet.cssText=t:a.appendChild(e.createTextNode(t)),i.appendChild(a),a}}k_(".l7-marker-container {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  overflow: hidden;\n}\n.l7-marker {\n  position: absolute !important;\n  top: 0;\n  left: 0;\n  z-index: 5;\n  cursor: pointer;\n}\n.l7-marker-cluster {\n  width: 40px;\n  height: 40px;\n  background-color: rgba(181, 226, 140, 0.6);\n  background-clip: padding-box;\n  border-radius: 20px;\n}\n.l7-marker-cluster div {\n  width: 30px;\n  height: 30px;\n  margin-top: 5px;\n  margin-left: 5px;\n  font: 12px 'Helvetica Neue', Arial, Helvetica, sans-serif;\n  text-align: center;\n  background-color: rgba(110, 204, 57, 0.6);\n  border-radius: 15px;\n}\n.l7-marker-cluster span {\n  line-height: 30px;\n}\n.l7-touch .l7-control-attribution,\n.l7-touch .l7-control-layers,\n.l7-touch .l7-bar {\n  -webkit-box-shadow: none;\n          box-shadow: none;\n}\n.l7-touch .l7-control-layers,\n.l7-touch .l7-bar {\n  background-clip: padding-box;\n  border: 2px solid rgba(0, 0, 0, 0.2);\n}\n.mapboxgl-ctrl-logo,\n.amap-logo {\n  display: none !important;\n}\n.l7-select-box {\n  border: 3px dashed gray;\n  border-radius: 2px;\n  position: absolute;\n  z-index: 1000;\n  -webkit-box-sizing: border-box;\n          box-sizing: border-box;\n}\n.l7-control-container {\n  font: 12px/1.5 'Helvetica Neue', Arial, Helvetica, sans-serif;\n}\n.l7-control-container .l7-control {\n  position: relative;\n  z-index: 800;\n  float: left;\n  clear: both;\n  color: #595959;\n  font-size: 12px;\n  pointer-events: visiblePainted;\n  /* IE 9-10 doesn't have auto */\n  pointer-events: auto;\n}\n.l7-control-container .l7-control.l7-control--hide {\n  display: none;\n}\n.l7-control-container .l7-top {\n  top: 0;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  position: absolute;\n  z-index: 1000;\n  pointer-events: none;\n}\n.l7-control-container .l7-top .l7-control:not(.l7-control--hide) {\n  margin-top: 8px;\n}\n.l7-control-container .l7-right {\n  right: 0;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  position: absolute;\n  z-index: 1000;\n  pointer-events: none;\n}\n.l7-control-container .l7-right .l7-control:not(.l7-control--hide) {\n  margin-right: 8px;\n}\n.l7-control-container .l7-bottom {\n  bottom: 0;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  position: absolute;\n  z-index: 1000;\n  pointer-events: none;\n}\n.l7-control-container .l7-bottom .l7-control:not(.l7-control--hide) {\n  margin-bottom: 8px;\n}\n.l7-control-container .l7-left {\n  left: 0;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  position: absolute;\n  z-index: 1000;\n  pointer-events: none;\n}\n.l7-control-container .l7-left .l7-control:not(.l7-control--hide) {\n  margin-left: 8px;\n}\n.l7-control-container .l7-center {\n  position: absolute;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-pack: center;\n      -ms-flex-pack: center;\n          justify-content: center;\n}\n.l7-control-container .l7-center.l7-top,\n.l7-control-container .l7-center.l7-bottom {\n  width: 100%;\n}\n.l7-control-container .l7-center.l7-left,\n.l7-control-container .l7-center.l7-right {\n  height: 100%;\n}\n.l7-control-container .l7-center .l7-control {\n  margin-right: 8px;\n  margin-bottom: 8px;\n}\n.l7-control-container .l7-row {\n  -webkit-box-orient: horizontal;\n  -webkit-box-direction: normal;\n      -ms-flex-direction: row;\n          flex-direction: row;\n}\n.l7-control-container .l7-row.l7-top {\n  -webkit-box-align: start;\n      -ms-flex-align: start;\n          align-items: flex-start;\n}\n.l7-control-container .l7-row.l7-bottom {\n  -webkit-box-align: end;\n      -ms-flex-align: end;\n          align-items: flex-end;\n}\n.l7-control-container .l7-column {\n  -webkit-box-orient: vertical;\n  -webkit-box-direction: normal;\n      -ms-flex-direction: column;\n          flex-direction: column;\n}\n.l7-control-container .l7-column.l7-left {\n  -webkit-box-align: start;\n      -ms-flex-align: start;\n          align-items: flex-start;\n}\n.l7-control-container .l7-column.l7-right {\n  -webkit-box-align: end;\n      -ms-flex-align: end;\n          align-items: flex-end;\n}\n.l7-button-control {\n  min-width: 28px;\n  height: 28px;\n  background-color: #fff;\n  border-width: 0;\n  border-radius: 2px;\n  outline: 0;\n  cursor: pointer;\n  -webkit-transition: all 0.2s;\n  transition: all 0.2s;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-pack: center;\n      -ms-flex-pack: center;\n          justify-content: center;\n  -webkit-box-align: center;\n      -ms-flex-align: center;\n          align-items: center;\n  padding: 0 6px;\n  -webkit-box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.15);\n          box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.15);\n  line-height: 16px;\n}\n.l7-button-control .l7-iconfont {\n  fill: #595959;\n  color: #595959;\n  width: 16px;\n  height: 16px;\n}\n.l7-button-control.l7-button-control--row {\n  padding: 0 16px 0 13px;\n}\n.l7-button-control.l7-button-control--row * + .l7-button-control__text {\n  margin-left: 8px;\n}\n.l7-button-control.l7-button-control--column {\n  height: 44px;\n  -webkit-box-orient: vertical;\n  -webkit-box-direction: normal;\n      -ms-flex-direction: column;\n          flex-direction: column;\n}\n.l7-button-control.l7-button-control--column .l7-iconfont {\n  margin-top: 3px;\n}\n.l7-button-control.l7-button-control--column .l7-button-control__text {\n  margin-top: 3px;\n  font-size: 10px;\n  -webkit-transform: scale(0.83333);\n          transform: scale(0.83333);\n}\n.l7-button-control:not(:disabled):hover {\n  background-color: #f3f3f3;\n}\n.l7-button-control:not(:disabled):active {\n  background-color: #f3f3f3;\n}\n.l7-button-control:disabled {\n  background-color: #fafafa;\n  color: #bdbdbd;\n  cursor: not-allowed;\n}\n.l7-button-control:disabled .l7-iconfont {\n  fill: #bdbdbd;\n  color: #bdbdbd;\n}\n.l7-button-control:disabled:hover {\n  background-color: #fafafa;\n}\n.l7-button-control:disabled:active {\n  background-color: #fafafa;\n}\n.l7-popper {\n  position: absolute;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-pack: center;\n      -ms-flex-pack: center;\n          justify-content: center;\n  -webkit-box-align: center;\n      -ms-flex-align: center;\n          align-items: center;\n  z-index: 5;\n  color: #595959;\n}\n.l7-popper.l7-popper-hide {\n  display: none;\n}\n.l7-popper .l7-popper-content {\n  min-height: 28px;\n  background: #fff;\n  border-radius: 2px;\n  -webkit-box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.15);\n          box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.15);\n}\n.l7-popper .l7-popper-arrow {\n  width: 0;\n  height: 0;\n  border-width: 4px;\n  border-style: solid;\n  border-top-color: transparent;\n  border-bottom-color: transparent;\n  border-left-color: transparent;\n  border-right-color: transparent;\n  -webkit-box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.15);\n          box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.15);\n}\n.l7-popper.l7-popper-left {\n  -webkit-box-orient: horizontal;\n  -webkit-box-direction: normal;\n      -ms-flex-direction: row;\n          flex-direction: row;\n}\n.l7-popper.l7-popper-left .l7-popper-arrow {\n  border-left-color: #fff;\n  margin: 10px 0;\n}\n.l7-popper.l7-popper-right {\n  -webkit-box-orient: horizontal;\n  -webkit-box-direction: reverse;\n      -ms-flex-direction: row-reverse;\n          flex-direction: row-reverse;\n}\n.l7-popper.l7-popper-right .l7-popper-arrow {\n  border-right-color: #fff;\n  margin: 10px 0;\n}\n.l7-popper.l7-popper-top {\n  -webkit-box-orient: vertical;\n  -webkit-box-direction: normal;\n      -ms-flex-direction: column;\n          flex-direction: column;\n}\n.l7-popper.l7-popper-top .l7-popper-arrow {\n  border-top-color: #fff;\n  margin: 0 10px;\n}\n.l7-popper.l7-popper-bottom {\n  -webkit-box-orient: vertical;\n  -webkit-box-direction: reverse;\n      -ms-flex-direction: column-reverse;\n          flex-direction: column-reverse;\n}\n.l7-popper.l7-popper-bottom .l7-popper-arrow {\n  border-bottom-color: #fff;\n  margin: 0 10px;\n}\n.l7-popper.l7-popper-start {\n  -webkit-box-align: start;\n      -ms-flex-align: start;\n          align-items: flex-start;\n}\n.l7-popper.l7-popper-end {\n  -webkit-box-align: end;\n      -ms-flex-align: end;\n          align-items: flex-end;\n}\n.l7-select-control--normal {\n  padding: 4px 0;\n}\n.l7-select-control--normal .l7-select-control-item {\n  height: 24px;\n  line-height: 24px;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-align: center;\n      -ms-flex-align: center;\n          align-items: center;\n  padding: 0 16px;\n  font-size: 12px;\n}\n.l7-select-control--normal .l7-select-control-item > * + * {\n  margin-left: 6px;\n}\n.l7-select-control--normal .l7-select-control-item input[type='checkbox'] {\n  height: 14px;\n  width: 14px;\n}\n.l7-select-control--normal .l7-select-control-item:hover {\n  background-color: #f3f3f3;\n}\n.l7-select-control--image {\n  padding: 12px 12px 0 12px;\n  width: 474px;\n  height: 320px;\n  overflow: auto;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -ms-flex-wrap: wrap;\n      flex-wrap: wrap;\n  -webkit-box-sizing: border-box;\n          box-sizing: border-box;\n  -webkit-box-align: start;\n      -ms-flex-align: start;\n          align-items: flex-start;\n}\n.l7-select-control--image .l7-select-control-item {\n  margin-right: 12px;\n  border-radius: 2px;\n  overflow: hidden;\n  border: 1px solid #fff;\n  -webkit-box-sizing: content-box;\n          box-sizing: content-box;\n  width: calc((100% - 36px) / 3);\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-orient: vertical;\n  -webkit-box-direction: normal;\n      -ms-flex-direction: column;\n          flex-direction: column;\n  -webkit-box-pack: center;\n      -ms-flex-pack: center;\n          justify-content: center;\n  margin-bottom: 12px;\n  position: relative;\n  font-size: 12px;\n}\n.l7-select-control--image .l7-select-control-item img {\n  width: 142px;\n  height: 80px;\n}\n.l7-select-control--image .l7-select-control-item input[type='checkbox'] {\n  position: absolute;\n  right: 0;\n  top: 0;\n}\n.l7-select-control--image .l7-select-control-item .l7-select-control-item-row {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-pack: center;\n      -ms-flex-pack: center;\n          justify-content: center;\n  -webkit-box-align: center;\n      -ms-flex-align: center;\n          align-items: center;\n  line-height: 26px;\n}\n.l7-select-control--image .l7-select-control-item .l7-select-control-item-row > * + * {\n  margin-left: 8px;\n}\n.l7-select-control--image .l7-select-control-item.l7-select-control-item-active {\n  border-color: #0370fe;\n}\n.l7-select-control--image .l7-select-control-item:nth-child(3n) {\n  margin-right: 0;\n}\n.l7-select-control-item {\n  cursor: pointer;\n}\n.l7-select-control-item input[type='checkbox'] {\n  margin: 0;\n  cursor: pointer;\n}\n.l7-select-control--multiple .l7-select-control-item:hover {\n  background-color: transparent;\n}\n.l7-control-logo {\n  width: 89px;\n  height: 16px;\n  -webkit-user-select: none;\n     -moz-user-select: none;\n      -ms-user-select: none;\n          user-select: none;\n}\n.l7-control-logo img {\n  height: 100%;\n  width: 100%;\n}\n.l7-control-logo .l7-control-logo-link {\n  display: block;\n  cursor: pointer;\n}\n.l7-control-logo .l7-control-logo-link img {\n  cursor: pointer;\n}\n.l7-control-mouse-location {\n  background-color: #fff;\n  border-radius: 2px;\n  -webkit-box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.15);\n          box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.15);\n  padding: 2px 4px;\n  min-width: 130px;\n}\n.l7-control-zoom {\n  -webkit-box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.15);\n          box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.15);\n  border-radius: 2px;\n  overflow: hidden;\n}\n.l7-control-zoom .l7-button-control {\n  -webkit-box-shadow: 0 0 0;\n          box-shadow: 0 0 0;\n  border-radius: 0;\n  font-size: 16px;\n}\n.l7-control-zoom .l7-button-control .l7-iconfont {\n  width: 14px;\n  height: 14px;\n}\n.l7-control-zoom .l7-button-control:first-child {\n  border-bottom: 1px solid #f0f0f0;\n}\n.l7-control-scale {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-orient: vertical;\n  -webkit-box-direction: normal;\n      -ms-flex-direction: column;\n          flex-direction: column;\n}\n.l7-control-scale .l7-control-scale-line {\n  -webkit-box-sizing: border-box;\n          box-sizing: border-box;\n  padding: 2px 5px 1px;\n  overflow: hidden;\n  color: #595959;\n  font-size: 10px;\n  line-height: 1.1;\n  white-space: nowrap;\n  background: #fff;\n  border: 2px solid #000;\n  border-top: 0;\n  -webkit-transition: width 0.1s;\n  transition: width 0.1s;\n}\n.l7-control-scale .l7-control-scale-line + .l7-control-scale .l7-control-scale-line {\n  margin-top: -2px;\n  border-top: 2px solid #777;\n  border-bottom: none;\n}\n.l7-right .l7-control-scale {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-align: end;\n      -ms-flex-align: end;\n          align-items: flex-end;\n}\n.l7-right .l7-control-scale .l7-control-scale-line {\n  text-align: right;\n}\n.l7-popup {\n  position: absolute;\n  top: 0;\n  left: 0;\n  z-index: 5;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  will-change: transform;\n  pointer-events: none;\n}\n.l7-popup.l7-popup-hide {\n  display: none;\n}\n.l7-popup .l7-popup-content {\n  position: relative;\n  padding: 16px;\n  font-size: 14px;\n  background: #fff;\n  border-radius: 3px;\n  -webkit-box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);\n          box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);\n}\n.l7-popup .l7-popup-content .l7-popup-content__title {\n  margin-bottom: 8px;\n  font-weight: bold;\n}\n.l7-popup .l7-popup-content .l7-popup-close-button,\n.l7-popup .l7-popup-content .l7-popup-content__title,\n.l7-popup .l7-popup-content .l7-popup-content__panel {\n  white-space: normal;\n  -webkit-user-select: text;\n     -moz-user-select: text;\n      -ms-user-select: text;\n          user-select: text;\n  pointer-events: initial;\n}\n.l7-popup .l7-popup-content .l7-popup-close-button {\n  position: absolute;\n  top: 0;\n  right: 0;\n  width: 18px;\n  height: 18px;\n  padding: 0;\n  font-size: 14px;\n  line-height: 18px;\n  text-align: center;\n  background-color: transparent;\n  border: 0;\n  border-radius: 0 3px 0 0;\n  cursor: pointer;\n}\n.l7-popup .l7-popup-tip {\n  position: relative;\n  z-index: 1;\n  width: 0;\n  height: 0;\n  border: 10px solid transparent;\n}\n.l7-popup.l7-popup-anchor-bottom,\n.l7-popup.l7-popup-anchor-bottom-left,\n.l7-popup.l7-popup-anchor-bottom-right {\n  -webkit-box-orient: vertical;\n  -webkit-box-direction: reverse;\n      -ms-flex-direction: column-reverse;\n          flex-direction: column-reverse;\n}\n.l7-popup.l7-popup-anchor-bottom .l7-popup-tip,\n.l7-popup.l7-popup-anchor-bottom-left .l7-popup-tip,\n.l7-popup.l7-popup-anchor-bottom-right .l7-popup-tip {\n  bottom: 1px;\n}\n.l7-popup.l7-popup-anchor-top,\n.l7-popup.l7-popup-anchor-top-left,\n.l7-popup.l7-popup-anchor-top-right {\n  -webkit-box-orient: vertical;\n  -webkit-box-direction: normal;\n      -ms-flex-direction: column;\n          flex-direction: column;\n}\n.l7-popup.l7-popup-anchor-top .l7-popup-tip,\n.l7-popup.l7-popup-anchor-top-left .l7-popup-tip,\n.l7-popup.l7-popup-anchor-top-right .l7-popup-tip {\n  top: 1px;\n}\n.l7-popup.l7-popup-anchor-left {\n  -webkit-box-orient: horizontal;\n  -webkit-box-direction: normal;\n      -ms-flex-direction: row;\n          flex-direction: row;\n}\n.l7-popup.l7-popup-anchor-right {\n  -webkit-box-orient: horizontal;\n  -webkit-box-direction: reverse;\n      -ms-flex-direction: row-reverse;\n          flex-direction: row-reverse;\n}\n.l7-popup-anchor-top .l7-popup-tip {\n  position: relative;\n  -webkit-align-self: center;\n  -ms-flex-item-align: center;\n      align-self: center;\n  border-top: none;\n  border-bottom-color: #fff;\n}\n.l7-popup-anchor-top-left .l7-popup-tip {\n  -webkit-align-self: flex-start;\n  -ms-flex-item-align: start;\n      align-self: flex-start;\n  border-top: none;\n  border-bottom-color: #fff;\n  border-left: none;\n}\n.l7-popup-anchor-top-right .l7-popup-tip {\n  -webkit-align-self: flex-end;\n  -ms-flex-item-align: end;\n      align-self: flex-end;\n  border-top: none;\n  border-right: none;\n  border-bottom-color: #fff;\n}\n.l7-popup-anchor-bottom .l7-popup-tip {\n  -webkit-align-self: center;\n  -ms-flex-item-align: center;\n      align-self: center;\n  border-top-color: #fff;\n  border-bottom: none;\n}\n.l7-popup-anchor-bottom-left .l7-popup-tip {\n  -webkit-align-self: flex-start;\n  -ms-flex-item-align: start;\n      align-self: flex-start;\n  border-top-color: #fff;\n  border-bottom: none;\n  border-left: none;\n}\n.l7-popup-anchor-bottom-right .l7-popup-tip {\n  -webkit-align-self: flex-end;\n  -ms-flex-item-align: end;\n      align-self: flex-end;\n  border-top-color: #fff;\n  border-right: none;\n  border-bottom: none;\n}\n.l7-popup-anchor-left .l7-popup-tip {\n  -webkit-align-self: center;\n  -ms-flex-item-align: center;\n      align-self: center;\n  border-right-color: #fff;\n  border-left: none;\n}\n.l7-popup-anchor-right .l7-popup-tip {\n  right: 1px;\n  -webkit-align-self: center;\n  -ms-flex-item-align: center;\n      align-self: center;\n  border-right: none;\n  border-left-color: #fff;\n}\n.l7-popup-anchor-top-left .l7-popup-content {\n  border-top-left-radius: 0;\n}\n.l7-popup-anchor-top-right .l7-popup-content {\n  border-top-right-radius: 0;\n}\n.l7-popup-anchor-bottom-left .l7-popup-content {\n  border-bottom-left-radius: 0;\n}\n.l7-popup-anchor-bottom-right .l7-popup-content {\n  border-bottom-right-radius: 0;\n}\n.l7-popup-track-pointer {\n  display: none;\n}\n.l7-popup-track-pointer * {\n  -webkit-user-select: none;\n     -moz-user-select: none;\n      -ms-user-select: none;\n          user-select: none;\n  pointer-events: none;\n}\n.l7-map:hover .l7-popup-track-pointer {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n}\n.l7-map:active .l7-popup-track-pointer {\n  display: none;\n}\n.l7-layer-popup__row {\n  font-size: 12px;\n}\n.l7-layer-popup__row + .l7-layer-popup__row {\n  margin-top: 4px;\n}\n");var M_,P_=(A_={},Object(Ar["a"])(A_,$m.additive,{enable:!0,func:{srcRGB:Rp.ONE,dstRGB:Rp.ONE,srcAlpha:1,dstAlpha:1}}),Object(Ar["a"])(A_,$m.none,{enable:!1}),Object(Ar["a"])(A_,$m.normal,{enable:!0,func:{srcRGB:Rp.SRC_ALPHA,dstRGB:Rp.ONE_MINUS_SRC_ALPHA,srcAlpha:1,dstAlpha:1}}),Object(Ar["a"])(A_,$m.subtractive,{enable:!0,func:{srcRGB:Rp.ONE,dstRGB:Rp.ONE,srcAlpha:Rp.ZERO,dstAlpha:Rp.ONE_MINUS_SRC_COLOR},equation:{rgb:Rp.FUNC_SUBTRACT,alpha:Rp.FUNC_SUBTRACT}}),Object(Ar["a"])(A_,$m.max,{enable:!0,func:{srcRGB:Rp.ONE,dstRGB:Rp.ONE},equation:{rgb:Rp.MAX_EXT}}),Object(Ar["a"])(A_,$m.min,{enable:!0,func:{srcRGB:Rp.ONE,dstRGB:Rp.ONE},equation:{rgb:Rp.MIN_EXT}}),A_);function R_(t,e,n,r,i){e.updateStyleAttribute(t,n,r,i)}function j_(t,e){e.tileLayer||e.isTileLayer||(t.opacity&&I_("opacity",e,t.opacity),t.strokeWidth&&I_("strokeWidth",e,t.strokeWidth),t.strokeOpacity&&I_("strokeOpacity",e,t.strokeOpacity),t.stroke&&N_("stroke",e,t.stroke),t.offsets&&L_("offsets",e,t.offsets),t.textOffset&&L_("textOffset",e,t.textOffset),t.thetaOffset&&I_("thetaOffset",e,t.thetaOffset))}function I_(t,e,n){Object(K["isString"])(n)?R_(t,e,n,(function(t){return t})):Object(K["isNumber"])(n)||(Array.isArray(n)&&2===n.length&&(Object(K["isString"])(n[0])&&Object(K["isFunction"])(n[1])||Object(K["isString"])(n[0])&&Array.isArray(n[1])&&Object(K["isNumber"])(n[1][0])&&Object(K["isNumber"])(n[1][1]))?R_(t,e,n[0],n[1]):R_(t,e,[1],void 0))}function L_(t,e,n){Object(K["isString"])(n)?R_(t,e,n,(function(t){return t})):Array.isArray(n)&&2===n.length&&Object(K["isString"])(n[0])&&Object(K["isFunction"])(n[1])?R_(t,e,n[0],n[1]):Array.isArray(n)&&2===n.length&&Object(K["isNumber"])(n[0])&&Object(K["isNumber"])(n[1])?R_(t,e,n,void 0):R_(t,e,[0,0],void 0)}function N_(t,e,n){Object(K["isString"])(n)||(Array.isArray(n)&&2===n.length&&(Object(K["isString"])(n[0])&&Object(K["isFunction"])(n[1])||Object(K["isString"])(n[0])&&Array.isArray(n[1])&&n[1].length>0)?R_(t,e,n[0],n[1]):R_(t,e,"#fff",void 0))}function D_(t,e){var n=[e[0]-t[0],e[1]-t[1]],r=wr(n),i=[t[0]+1e-4*r[0],t[1]+1e-4*r[1]];return i}function F_(t,e,n){if(t.length>0&&e.version===M_["GAODE2.x"]){var r=n.coordCenter;"number"===typeof t[0].coordinates[0]?t.filter((function(t){return!t.originCoordinates})).map((function(t){t.version=M_["GAODE2.x"],t.originCoordinates=Object(K["cloneDeep"])(t.coordinates),t.coordinates=e.lngLatToCoordByLayer(t.coordinates,r)})):t.filter((function(t){return!t.originCoordinates})).map((function(t){t.version=M_["GAODE2.x"],t.originCoordinates=Object(K["cloneDeep"])(t.coordinates),t.coordinates=e.lngLatToCoordsByLayer(t.coordinates,r)}))}}function B_(t,e){t.length>0&&e.version===M_.SIMPLE&&t.map((function(t){t.simpleCoordinate||(t.coordinates=z_(t.coordinates,e),t.simpleCoordinate=!0)}))}function z_(t,e){if("number"===typeof t[0])return e.simpleMapCoord.unproject(t);if(t[0]&&t[0][0]instanceof Array){var n=[];return t.map((function(t){var r=[];t.map((function(t){r.push(e.simpleMapCoord.unproject(t))})),n.push(r)})),n}var r=[];return t.map((function(t){r.push(e.simpleMapCoord.unproject(t))})),r}function U_(t,e){var n;if(!t.scale)return[];var r=(null===t||void 0===t||null===(n=t.scale)||void 0===n?void 0:n.scalers)||[],i=[];r.forEach((function(n){var r,o=n.field;(e.hasOwnProperty(o)||"variable"===(null===(r=t.scale)||void 0===r?void 0:r.type))&&i.push(e[o])}));var o=t.mapping?t.mapping(i):[];return o}function V_(t,e,n,r,i){var o=null===i||void 0===i?void 0:i.getLayerConfig(),a=o.arrow,s=void 0===a?{enable:!1}:a,u=e.map((function(e){var r={id:e._id,coordinates:e.coordinates};if(t.filter((function(t){return void 0!==t.scale})).forEach((function(t){var i=U_(t,e);t.needRemapping=!1,"color"===t.name&&(i=i.map((function(t){return li(t)}))),r[t.name]=Array.isArray(i)&&1===i.length?i[0]:i,"shape"===t.name&&(r.shape=n.getIconFontKey(r[t.name]))})),"line"===r.shape&&s.enable){var i=r.coordinates,o=D_(i[0],i[1]);r.coordinates.splice(1,0,o,o)}return r}));return F_(u,r,i),B_(u,r),u}function H_(t,e,n,r,i,o){var a=new n_(i,o),s=r.getLayerStyleAttributes()||[],u=a.data.dataArray,c=u,l=V_(s,c,e,n,t);return a.destroy(),l}function G_(t){return t.map((function(t){return"string"===typeof t&&(t=[t,{}]),t}))}function W_(t,e,n,r){var i=t.multiPassRenderer,o=t.getLayerConfig(),a=o.enableTAA;return a?i.add(r("taa")):i.add(r("render")),G_(e).forEach((function(t){var e=Object(q["a"])(t,2),r=e[0],o=e[1];i.add(n(r),o)})),i.add(n("copy")),i}(function(t){t["GAODE1.x"]="GAODE1.x",t["GAODE2.x"]="GAODE2.x",t["MAPBOX"]="MAPBOX",t["DEFUALT"]="DEFUALTMAP",t["SIMPLE"]="SIMPLE",t["GLOBEL"]="GLOBEL"})(M_||(M_={}));var Z_=[["circle","cylinder"],["square","cylinder"],["triangle","cylinder"],["pentagon","cylinder"],["hexagon","cylinder"],["octogon","cylinder"],["hexagram","cylinder"],["rhombus","cylinder"],["vesica","cylinder"]];function Y_(t,e,n){if("string"===typeof e&&"string"===typeof n&&e!==n){if("PointLayer"===t.type)return void(t.dataState.dataSourceNeedUpdate=!0);Z_.map((function(r){r.includes(e)&&r.includes(n)&&(t.dataState.dataSourceNeedUpdate=!0)}))}}var X_,q_,K_,Q_=function(){function t(e){Object(et["a"])(this,t),this.layer=e}return Object(nt["a"])(t,[{key:"pickRender",value:function(t){var e=this.layer;if(e.tileLayer)return e.tileLayer.pickRender(t);e.hooks.beforePickingEncode.call(),e.masks.length>0&&e.masks.filter((function(t){return t.inited})).forEach(function(){var t=Object(mi["a"])(_i.a.mark((function t(e){return _i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.render();case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),e.renderModels(!0),e.hooks.afterPickingEncode.call()}},{key:"pick",value:function(t,e){var n=this.layer.getContainer(),r=n.get(Kf.IPickingService);return"RasterLayer"===t.type?this.pickRasterLayer(t,e):(this.pickRender(e),r.pickFromPickingFBO(t,e))}},{key:"pickRasterLayer",value:function(t,e,n){var r=this.layer.getContainer(),i=r.get(Kf.IPickingService),o=r.get(Kf.IMapService),a=this.layer.getSource().extent,s=fr(e.lngLat,a),u={x:e.x,y:e.y,type:e.type,lngLat:e.lngLat,target:e,rasterValue:null},c=n||t;if(s){var l=this.readRasterValue(t,a,o,e.x,e.y);return u.rasterValue=l,i.triggerHoverOnLayer(c,u),!0}return u.type="mousemove"===e.type?"mouseout":"un"+e.type,i.triggerHoverOnLayer(c,Object(P["a"])(Object(P["a"])({},u),{},{type:"unpick"})),i.triggerHoverOnLayer(c,u),!1}},{key:"readRasterValue",value:function(t,e,n,r,i){var o=t.getSource().data.dataArray[0],a=Object(q["a"])(e,4),s=a[0],u=void 0===s?0:s,c=a[1],l=void 0===c?0:c,f=a[2],h=void 0===f?10:f,p=a[3],d=void 0===p?-10:p,v=n.lngLatToContainer([u,l]),g=n.lngLatToContainer([h,d]),m=g.x-v.x,y=v.y-g.y,_=[(r-v.x)/m,(i-g.y)/y],b=o.width||1,x=o.height||1,w=Math.floor(_[0]*b),E=Math.floor(_[1]*x),S=Math.max(0,E-1)*b+w,O=o.data[S];return O}},{key:"selectFeature",value:function(t){var e=this.layer,n=Object(q["a"])(t,3),r=n[0],i=n[1],o=n[2];e.hooks.beforeSelect.call([r,i,o])}},{key:"highlightPickedFeature",value:function(t){var e=Object(q["a"])(t,3),n=e[0],r=e[1],i=e[2];this.layer.hooks.beforeHighlight.call([n,r,i])}},{key:"getFeatureById",value:function(t){return this.layer.getSource().getFeatureById(t)}}]),t}(),$_=function(){function t(e){Object(et["a"])(this,t),this.layer=e;var n=this.layer.getContainer();this.rendererService=n.get(Kf.IRendererService)}return Object(nt["a"])(t,[{key:"getColorTexture",value:function(t){var e=this.getTextureKey(t);return this.key===e||(this.createColorTexture(t),this.key=e),this.colorTexture}},{key:"createColorTexture",value:function(t){var e=this.rendererService.createTexture2D,n=pi(t),r=e({data:n.data,width:n.width,height:n.height,flipY:!1});return this.colorTexture=r,r}},{key:"setColorTexture",value:function(t,e){this.key=this.getTextureKey(e),this.colorTexture=t}},{key:"destroy",value:function(){var t;null===(t=this.colorTexture)||void 0===t||t.destroy()}},{key:"getTextureKey",value:function(t){return"".concat(t.colors.join("_"),"_").concat(t.positions.join("_"))}}]),t}(),J_=["passes"],tb=["moduleName","vertexShader","fragmentShader","triangulation","segmentNumber","workerEnabled","workerOptions"];function eb(t,e){var n="undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=nb(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n["return"]||n["return"]()}finally{if(s)throw o}}}}function nb(t,e){if(t){if("string"===typeof t)return rb(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?rb(t,e):void 0}}function rb(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function ib(t){var e=ob();return function(){var n,r=Object(ct["a"])(t);if(e){var i=Object(ct["a"])(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(ut["a"])(this,n)}}function ob(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}var ab,sb,ub,cb=0,lb=(X_=Ym(Kf.IGlobalConfigService),q_=function(t){Object(st["a"])(n,t);var e=ib(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(et["a"])(this,n),t=e.call(this),Object(Ar["a"])(Object(ft["a"])(t),"id","".concat(cb++)),Object(Ar["a"])(Object(ft["a"])(t),"name","".concat(cb)),Object(Ar["a"])(Object(ft["a"])(t),"visible",!0),Object(Ar["a"])(Object(ft["a"])(t),"zIndex",0),Object(Ar["a"])(Object(ft["a"])(t),"inited",!1),Object(Ar["a"])(Object(ft["a"])(t),"layerModelNeedUpdate",!1),Object(Ar["a"])(Object(ft["a"])(t),"pickedFeatureID",null),Object(Ar["a"])(Object(ft["a"])(t),"selectedFeatureID",null),Object(Ar["a"])(Object(ft["a"])(t),"styleNeedUpdate",!1),Object(Ar["a"])(Object(ft["a"])(t),"forceRender",!1),Object(Ar["a"])(Object(ft["a"])(t),"clusterZoom",0),Object(Ar["a"])(Object(ft["a"])(t),"defaultSourceConfig",{data:[],options:{parser:{type:"json"}}}),Object(Ar["a"])(Object(ft["a"])(t),"dataState",{dataSourceNeedUpdate:!1,dataMappingNeedUpdate:!1,filterNeedUpdate:!1,featureScaleNeedUpdate:!1,StyleAttrNeedUpdate:!1}),Object(Ar["a"])(Object(ft["a"])(t),"hooks",{init:new iv["a"],afterInit:new iv["d"],beforeRender:new iv["d"],beforeRenderData:new iv["c"],afterRender:new iv["e"],beforePickingEncode:new iv["e"],afterPickingEncode:new iv["e"],beforeHighlight:new iv["e"](["pickedColor"]),afterHighlight:new iv["e"],beforeSelect:new iv["e"](["pickedColor"]),afterSelect:new iv["e"],beforeDestroy:new iv["e"],afterDestroy:new iv["e"]}),Object(Ar["a"])(Object(ft["a"])(t),"models",[]),Object(Ar["a"])(Object(ft["a"])(t),"startInit",!1),Object(Ar["a"])(Object(ft["a"])(t),"layerChildren",[]),Object(Ar["a"])(Object(ft["a"])(t),"masks",[]),sp(Object(ft["a"])(t),"configService",K_,Object(ft["a"])(t)),Object(Ar["a"])(Object(ft["a"])(t),"animateOptions",{enable:!1}),Object(Ar["a"])(Object(ft["a"])(t),"currentPickId",null),Object(Ar["a"])(Object(ft["a"])(t),"pendingStyleAttributes",[]),Object(Ar["a"])(Object(ft["a"])(t),"scaleOptions",{}),Object(Ar["a"])(Object(ft["a"])(t),"animateStatus",!1),Object(Ar["a"])(Object(ft["a"])(t),"isDestroyed",!1),Object(Ar["a"])(Object(ft["a"])(t),"encodeDataLength",0),Object(Ar["a"])(Object(ft["a"])(t),"sourceEvent",(function(){t.dataState.dataSourceNeedUpdate=!0;var e=t.getLayerConfig();e&&e.autoFit&&t.fitBounds(e.fitBoundsOptions);var n=t.layerSource.getSourceCfg().autoRender;n&&t.reRender()})),t.name=r.name||t.id,t.zIndex=r.zIndex||0,t.rawConfig=r,t}return Object(nt["a"])(n,[{key:"addMaskLayer",value:function(t){this.masks.push(t)}},{key:"removeMaskLayer",value:function(t){var e=this.masks.indexOf(t);e>-1&&this.masks.splice(e,1),t.destroy()}},{key:"getAttribute",value:function(t){return this.styleAttributeService.getLayerStyleAttribute(t)}},{key:"getLayerConfig",value:function(){return this.configService.getLayerConfig(this.id)}},{key:"updateLayerConfig",value:function(t){var e=this;if(Object.keys(t).map((function(n){n in e.rawConfig&&(e.rawConfig[n]=t[n])})),this.startInit){var n=this.container.get(Kf.SceneID);j_(t,this),this.configService.setLayerConfig(n,this.id,Object(P["a"])(Object(P["a"])(Object(P["a"])({},this.configService.getLayerConfig(this.id)),this.needUpdateConfig),t)),this.needUpdateConfig={}}else this.needUpdateConfig=Object(P["a"])(Object(P["a"])({},this.needUpdateConfig),t)}},{key:"setContainer",value:function(t,e){this.container=t,this.sceneContainer=e}},{key:"getContainer",value:function(){return this.container}},{key:"addPlugin",value:function(t){return this.plugins.push(t),this}},{key:"init",value:function(){var t=Object(mi["a"])(_i.a.mark((function t(){var e,n,r,i,o,a,s,u=this;return _i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e=this.container.get(Kf.SceneID),this.startInit=!0,this.configService.setLayerConfig(e,this.id,this.rawConfig),this.layerType=this.rawConfig.layerType,this.iconService=this.container.get(Kf.IIconService),this.fontService=this.container.get(Kf.IFontService),this.rendererService=this.container.get(Kf.IRendererService),this.layerService=this.container.get(Kf.ILayerService),this.interactionService=this.container.get(Kf.IInteractionService),this.pickingService=this.container.get(Kf.IPickingService),this.mapService=this.container.get(Kf.IMapService),n=this.getLayerConfig(),r=n.enableMultiPassRenderer,i=n.passes,r&&null!==i&&void 0!==i&&i.length&&i.length>0&&this.mapService.on("mapAfterFrameChange",(function(){u.renderLayers()})),this.cameraService=this.container.get(Kf.ICameraService),this.coordinateService=this.container.get(Kf.ICoordinateSystemService),this.shaderModuleService=this.container.get(Kf.IShaderModuleService),this.postProcessingPassFactory=this.container.get(Kf.IFactoryPostProcessingPass),this.normalPassFactory=this.container.get(Kf.IFactoryNormalPass),this.styleAttributeService=this.container.get(Kf.IStyleAttributeService),r&&(this.multiPassRenderer=this.container.get(Kf.IMultiPassRenderer),this.multiPassRenderer.setLayer(this)),this.pendingStyleAttributes.forEach((function(t){var e=t.attributeName,n=t.attributeField,r=t.attributeValues,i=t.updateOptions;u.styleAttributeService.updateStyleAttribute(e,{scale:Object(P["a"])({field:n},u.splitValuesAndCallbackInAttribute(r,u.getLayerConfig()[e]))},i)})),this.pendingStyleAttributes=[],this.plugins=this.container.getAll(Kf.ILayerPlugin),o=eb(this.plugins);try{for(o.s();!(a=o.n()).done;)s=a.value,s.apply(this,{rendererService:this.rendererService,mapService:this.mapService,styleAttributeService:this.styleAttributeService,normalPassFactory:this.normalPassFactory,postProcessingPassFactory:this.postProcessingPassFactory})}catch(c){o.e(c)}finally{o.f()}return this.layerPickService=new Q_(this),this.textureService=new $_(this),t.next=29,this.hooks.init.promise();case 29:this.inited=!0,this.emit("inited",{target:this,type:"inited"}),this.emit("add",{target:this,type:"add"}),this.hooks.afterInit.call();case 33:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"updateModelData",value:function(t){t.attributes&&t.elements?this.models.map((function(e){e.updateAttributesAndElements(t.attributes,t.elements)})):console.warn("data error")}},{key:"createModelData",value:function(t,e){var n;if(null!==(n=this.layerModel)&&void 0!==n&&n.createModelData)return this.layerModel.createModelData(e);var r=this.calculateEncodeData(t,e),i=this.triangulation;return r&&i?this.styleAttributeService.createAttributesAndIndices(r,i):{attributes:void 0,elements:void 0}}},{key:"setLayerPickService",value:function(t){this.layerPickService=t}},{key:"calculateEncodeData",value:function(t,e){return this.inited?H_(this,this.fontService,this.mapService,this.styleAttributeService,t,e):(console.warn("layer not inited!"),null)}},{key:"prepareBuildModel",value:function(){this.updateLayerConfig(Object(P["a"])(Object(P["a"])(Object(P["a"])({},this.getDefaultConfig()),this.rawConfig),this.needUpdateConfig));var t=this.getLayerConfig(),e=t.animateOption;null!==e&&void 0!==e&&e.enable&&(this.layerService.startAnimate(),this.animateStatus=!0)}},{key:"color",value:function(t,e,n){return this.updateStyleAttribute("color",t,e,n),this}},{key:"texture",value:function(t,e,n){return this.updateStyleAttribute("texture",t,e,n),this}},{key:"rotate",value:function(t,e,n){return this.updateStyleAttribute("rotate",t,e,n),this}},{key:"size",value:function(t,e,n){return this.updateStyleAttribute("size",t,e,n),this}},{key:"filter",value:function(t,e,n){return this.updateStyleAttribute("filter",t,e,n),this}},{key:"shape",value:function(t,e,n){var r,i,o,a=null===(r=this.styleAttributeService)||void 0===r||null===(i=r.getLayerStyleAttribute("shape"))||void 0===i||null===(o=i.scale)||void 0===o?void 0:o.field,s=t;return this.shapeOption={field:t,values:e},this.updateStyleAttribute("shape",t,e,n),this.tileLayer||Y_(this,a,s),this}},{key:"label",value:function(t,e,n){return this.pendingStyleAttributes.push({attributeName:"label",attributeField:t,attributeValues:e,updateOptions:n}),this}},{key:"animate",value:function(t){var e={};return Object(K["isObject"])(t)?(e.enable=!0,e=Object(P["a"])(Object(P["a"])({},e),t)):e.enable=t,this.updateLayerConfig({animateOption:e}),this}},{key:"source",value:function(t,e){return"source"===(null===t||void 0===t?void 0:t.type)?(this.setSource(t),this):(this.sourceOption={data:t,options:e},this.clusterZoom=0,this)}},{key:"setData",value:function(t,e){var n=this;return this.inited?this.layerSource.setData(t,e):this.on("inited",(function(){var r=n.getSource();r?n.layerSource.setData(t,e):n.source(new n_(t,e))})),this}},{key:"style",value:function(t){var e=this,n=t.passes,r=Object(Gf["a"])(t,J_);return n&&G_(n).forEach((function(t){var n=e.multiPassRenderer.getPostProcessor().getPostProcessingPassByName(t[0]);n&&n.updateOptions(t[1])})),this.rawConfig=Object(P["a"])(Object(P["a"])({},this.rawConfig),r),this.container&&(this.updateLayerConfig(this.rawConfig),this.styleNeedUpdate=!0),this}},{key:"scale",value:function(t,e){return Object(K["isObject"])(t)?this.scaleOptions=Object(P["a"])(Object(P["a"])({},this.scaleOptions),t):this.scaleOptions[t]=e,this}},{key:"renderLayers",value:function(){this.rendering=!0,this.layerService.renderLayers(),this.rendering=!1}},{key:"render",value:function(){return this.tileLayer?(this.tileLayer.render(),this):(this.layerService.beforeRenderData(this),this.encodeDataLength<=0&&!this.forceRender||this.renderModels(),this)}},{key:"renderMultiPass",value:function(){var t=Object(mi["a"])(_i.a.mark((function t(){return _i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!(this.encodeDataLength<=0)||this.forceRender){t.next=2;break}return t.abrupt("return");case 2:if(!this.multiPassRenderer||!this.multiPassRenderer.getRenderFlag()){t.next=7;break}return t.next=5,this.multiPassRenderer.render();case 5:t.next=8;break;case 7:this.multiPassRenderer,this.renderModels();case 8:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"active",value:function(t){var e={};return e.enableHighlight=!!Object(K["isObject"])(t)||t,Object(K["isObject"])(t)?(e.enableHighlight=!0,t.color&&(e.highlightColor=t.color),t.mix&&(e.activeMix=t.mix)):e.enableHighlight=!!t,this.updateLayerConfig(e),this}},{key:"setActive",value:function(t,e){var n=this;if(Object(K["isObject"])(t)){var r=t.x,i=void 0===r?0:r,o=t.y,a=void 0===o?0:o;this.updateLayerConfig({highlightColor:Object(K["isObject"])(e)?e.color:this.getLayerConfig().highlightColor,activeMix:Object(K["isObject"])(e)?e.mix:this.getLayerConfig().activeMix}),this.pick({x:i,y:a})}else this.updateLayerConfig({pickedFeatureID:t,highlightColor:Object(K["isObject"])(e)?e.color:this.getLayerConfig().highlightColor,activeMix:Object(K["isObject"])(e)?e.mix:this.getLayerConfig().activeMix}),this.hooks.beforeSelect.call(hi(t)).then((function(){setTimeout((function(){n.reRender()}),1)}))}},{key:"select",value:function(t){var e={};return e.enableSelect=!!Object(K["isObject"])(t)||t,Object(K["isObject"])(t)?(e.enableSelect=!0,t.color&&(e.selectColor=t.color),t.mix&&(e.selectMix=t.mix)):e.enableSelect=!!t,this.updateLayerConfig(e),this}},{key:"setSelect",value:function(t,e){var n=this;if(Object(K["isObject"])(t)){var r=t.x,i=void 0===r?0:r,o=t.y,a=void 0===o?0:o;this.updateLayerConfig({selectColor:Object(K["isObject"])(e)?e.color:this.getLayerConfig().selectColor,selectMix:Object(K["isObject"])(e)?e.mix:this.getLayerConfig().selectMix}),this.pick({x:i,y:a})}else this.updateLayerConfig({pickedFeatureID:t,selectColor:Object(K["isObject"])(e)?e.color:this.getLayerConfig().selectColor,selectMix:Object(K["isObject"])(e)?e.mix:this.getLayerConfig().selectMix}),this.hooks.beforeSelect.call(hi(t)).then((function(){setTimeout((function(){n.reRender()}),1)}))}},{key:"setBlend",value:function(t){return this.updateLayerConfig({blend:t}),this.layerModelNeedUpdate=!0,this.reRender(),this}},{key:"show",value:function(){return this.updateLayerConfig({visible:!0}),this.reRender(),this.emit("show"),this}},{key:"hide",value:function(){return this.updateLayerConfig({visible:!1}),this.reRender(),this.emit("hide"),this}},{key:"setIndex",value:function(t){return this.zIndex=t,this.layerService.updateLayerRenderList(),this.layerService.renderLayers(),this}},{key:"setCurrentPickId",value:function(t){this.currentPickId=t}},{key:"getCurrentPickId",value:function(){return this.currentPickId}},{key:"setCurrentSelectedId",value:function(t){this.selectedFeatureID=t}},{key:"getCurrentSelectedId",value:function(){return this.selectedFeatureID}},{key:"isVisible",value:function(){var t=this.mapService.getZoom(),e=this.getLayerConfig(),n=e.visible,r=e.minZoom,i=void 0===r?-1/0:r,o=e.maxZoom,a=void 0===o?1/0:o;return!!n&&t>=i&&t<a}},{key:"setMultiPass",value:function(t,e){if(this.updateLayerConfig({enableMultiPassRenderer:t}),e&&this.updateLayerConfig({passes:e}),t){var n=this.getLayerConfig(),r=n.passes,i=void 0===r?[]:r;this.multiPassRenderer=W_(this,i,this.postProcessingPassFactory,this.normalPassFactory),this.multiPassRenderer.setRenderFlag(!0);var o=this.rendererService.getViewportSize(),a=o.width,s=o.height;this.multiPassRenderer.resize(a,s)}return this}},{key:"setMinZoom",value:function(t){return this.updateLayerConfig({minZoom:t}),this}},{key:"getMinZoom",value:function(){var t=this.getLayerConfig(),e=t.minZoom;return e}},{key:"getMaxZoom",value:function(){var t=this.getLayerConfig(),e=t.maxZoom;return e}},{key:"get",value:function(t){var e=this.getLayerConfig();return e[t]}},{key:"setMaxZoom",value:function(t){return this.updateLayerConfig({maxZoom:t}),this}},{key:"setAutoFit",value:function(t){return this.updateLayerConfig({autoFit:t}),this}},{key:"fitBounds",value:function(t){if(!this.inited)return this.updateLayerConfig({autoFit:!0}),this;var e=this.getSource(),n=e.extent,r=n.some((function(t){return Math.abs(t)===1/0}));return r||this.mapService.fitBounds([[n[0],n[1]],[n[2],n[3]]],t),this}},{key:"destroy",value:function(){var t,e,n,r=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.isDestroyed||(this.layerChildren.map((function(t){return t.destroy(!1)})),this.layerChildren=[],this.masks.map((function(t){return t.destroy(!1)})),this.masks=[],this.hooks.beforeDestroy.call(),this.layerSource.off("update",this.sourceEvent),null===(t=this.multiPassRenderer)||void 0===t||t.destroy(),this.textureService.destroy(),this.styleAttributeService.clearAllAttributes(),this.hooks.afterDestroy.call(),null===(e=this.layerModel)||void 0===e||e.clearModels(r),null===(n=this.tileLayer)||void 0===n||n.destroy(),this.models=[],this.emit("remove",{target:this,type:"remove"}),this.emit("destroy",{target:this,type:"destroy"}),this.removeAllListeners(),this.isDestroyed=!0)}},{key:"clear",value:function(){this.styleAttributeService.clearAllAttributes()}},{key:"clearModels",value:function(){var t;this.models.forEach((function(t){return t.destroy()})),null===(t=this.layerModel)||void 0===t||t.clearModels(),this.models=[]}},{key:"isDirty",value:function(){return!!(this.styleAttributeService.getLayerStyleAttributes()||[]).filter((function(t){return t.needRescale||t.needRemapping||t.needRegenerateVertices})).length}},{key:"setSource",value:function(t){var e=this;if(this.layerSource&&this.layerSource.off("update",this.sourceEvent),this.layerSource=t,this.clusterZoom=0,this.inited&&this.layerSource.cluster){var n=this.mapService.getZoom();this.layerSource.updateClusterData(n)}this.layerSource.inited&&this.sourceEvent(),this.layerSource.on("update",(function(t){var n=t.type;if(void 0===e.coordCenter){var r,i=e.layerSource.center;e.coordCenter=i,null!==(r=e.mapService)&&void 0!==r&&r.setCoordCenter&&e.mapService.setCoordCenter(i)}"update"===n&&e.sourceEvent()}))}},{key:"initSource",value:function(t){this.layerSource=t,this.clusterZoom=0,this.addSourceEvent()}},{key:"getSource",value:function(){return this.layerSource}},{key:"addSourceEvent",value:function(){var t=this;this.layerSource.on("update",(function(){if(void 0===t.coordCenter){var e,n=t.layerSource.center;t.coordCenter=n,null!==(e=t.mapService)&&void 0!==e&&e.setCoordCenter&&t.mapService.setCoordCenter(n)}t.sourceEvent()}))}},{key:"getScaleOptions",value:function(){return this.scaleOptions}},{key:"setEncodedData",value:function(t){this.encodedData=t,this.encodeDataLength=t.length}},{key:"getEncodedData",value:function(){return this.encodedData}},{key:"getScale",value:function(t){return this.styleAttributeService.getLayerAttributeScale(t)}},{key:"getLegend",value:function(t){var e,n,r,i=this.styleAttributeService.getLayerStyleAttribute(t),o=(null===i||void 0===i||null===(e=i.scale)||void 0===e?void 0:e.scalers)||[];return{type:null===(n=o[0].option)||void 0===n?void 0:n.type,field:null===i||void 0===i||null===(r=i.scale)||void 0===r?void 0:r.field,items:this.getLegendItems(t)}}},{key:"getLegendItems",value:function(t){var e=this.styleAttributeService.getLayerAttributeScale(t);if(!e)return[];if(e.invertExtent){var n=e.range().map((function(n){return Object(Ar["a"])({value:e.invertExtent(n)},t,n)}));return n}if(e.ticks){var r=e.ticks().map((function(n){return Object(Ar["a"])({value:n},t,e(n))}));return r}if(null!==e&&void 0!==e&&e.domain){var i=e.domain().filter((function(t){return!Object(K["isUndefined"])(t)})).map((function(n){return Object(Ar["a"])({value:n},t,e(n))}));return i}return[]}},{key:"pick",value:function(t){var e=t.x,n=t.y;this.interactionService.triggerHover({x:e,y:n})}},{key:"boxSelect",value:function(t,e){this.pickingService.boxPickLayer(this,t,e)}},{key:"buildLayerModel",value:function(){var t=Object(mi["a"])(_i.a.mark((function t(e){var n,r,i,o,a,s,u,c,l,f,h,p,d,v,g=this;return _i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.moduleName,r=e.vertexShader,i=e.fragmentShader,o=e.triangulation,a=e.segmentNumber,s=e.workerEnabled,u=void 0!==s&&s,c=e.workerOptions,l=Object(Gf["a"])(e,tb),this.shaderModuleService.registerModule(n,{vs:r,fs:i}),f=this.shaderModuleService.getModule(n),h=f.vs,p=f.fs,d=f.uniforms,v=this.rendererService.createModel,t.abrupt("return",new Promise((function(t,e){if(c&&c.modelType in Oc&&u)g.styleAttributeService.createAttributesAndIndicesAscy(g.encodedData,a,c).then((function(e){var n=e.attributes,r=e.elements,i=v(Object(P["a"])({attributes:n,uniforms:d,fs:p,vs:h,elements:r,blend:P_[$m.normal]},l));t(i)}))["catch"]((function(t){return e(t)}));else{var n=g.styleAttributeService.createAttributesAndIndices(g.encodedData,o,a),r=n.attributes,i=n.elements,s=n.count,f=Object(P["a"])({attributes:r,uniforms:d,fs:p,vs:h,elements:i,blend:P_[$m.normal]},l);s&&(f.count=s);var m=v(f);t(m)}})));case 5:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"createAttributes",value:function(t){var e=t.triangulation,n=this.styleAttributeService.createAttributes(this.encodedData,e),r=n.attributes;return r}},{key:"getTime",value:function(){return this.layerService.clock.getDelta()}},{key:"setAnimateStartTime",value:function(){this.animateStartTime=this.layerService.clock.getElapsedTime()}},{key:"stopAnimate",value:function(){this.animateStatus&&(this.layerService.stopAnimate(),this.animateStatus=!1,this.updateLayerConfig({animateOption:{enable:!1}}))}},{key:"getLayerAnimateTime",value:function(){return this.layerService.clock.getElapsedTime()-this.animateStartTime}},{key:"needPick",value:function(t){var e=this.getLayerConfig(),n=e.enableHighlight,r=void 0===n||n,i=e.enableSelect,o=void 0===i||i,a=-1!==this.eventNames().indexOf(t)||-1!==this.eventNames().indexOf("un"+t);return"click"!==t&&"dblclick"!==t||!o||(a=!0),"mousemove"!==t||!r&&-1===this.eventNames().indexOf("mouseenter")&&-1===this.eventNames().indexOf("unmousemove")&&-1===this.eventNames().indexOf("mouseout")||(a=!0),this.isVisible()&&a}},{key:"buildModels",value:function(){var t=Object(mi["a"])(_i.a.mark((function t(){return _i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:throw new Error("Method not implemented.");case 1:case"end":return t.stop()}}),t)})));function e(){return t.apply(this,arguments)}return e}()},{key:"rebuildModels",value:function(){var t=Object(mi["a"])(_i.a.mark((function t(){return _i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.buildModels();case 2:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"renderMulPass",value:function(){var t=Object(mi["a"])(_i.a.mark((function t(e){return _i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.render();case 2:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"renderModels",value:function(t){var e=this;return this.encodeDataLength<=0&&!this.forceRender||(this.hooks.beforeRender.call(),this.models.forEach((function(n){n.draw({uniforms:e.layerModel.getUninforms()},t)})),this.hooks.afterRender.call()),this}},{key:"updateStyleAttribute",value:function(t,e,n,r){-1!==["color","size","texture","rotate","filter","label","shape"].indexOf(t)&&this.configService.setAttributeConfig(this.id,Object(Ar["a"])({},t,{field:e,values:n})),this.startInit?this.styleAttributeService.updateStyleAttribute(t,{scale:Object(P["a"])({field:e},this.splitValuesAndCallbackInAttribute(n,this.getLayerConfig()[e]))},r):this.pendingStyleAttributes.push({attributeName:t,attributeField:e,attributeValues:n,updateOptions:r})}},{key:"getLayerAttributeConfig",value:function(){return this.configService.getAttributeConfig(this.id)}},{key:"getShaderPickStat",value:function(){return this.layerService.getShaderPickStat()}},{key:"setEarthTime",value:function(t){console.warn("empty fn")}},{key:"processData",value:function(t){return t}},{key:"getModelType",value:function(){throw new Error("Method not implemented.")}},{key:"getDefaultConfig",value:function(){return{}}},{key:"initLayerModels",value:function(){var t=Object(mi["a"])(_i.a.mark((function t(){return _i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.models.forEach((function(t){return t.destroy()})),this.models=[],t.next=4,this.layerModel.initModels();case 4:this.models=t.sent;case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"reRender",value:function(){this.inited&&this.layerService.reRender()}},{key:"splitValuesAndCallbackInAttribute",value:function(t,e){return{values:Object(K["isFunction"])(t)?void 0:t||e,callback:Object(K["isFunction"])(t)?t:void 0}}}]),n}(vl["EventEmitter"]),K_=up(q_.prototype,"configService",[X_],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),q_);function fb(t,e){var n="undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=hb(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n["return"]||n["return"]()}finally{if(s)throw o}}}}function hb(t,e){if(t){if("string"===typeof t)return pb(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?pb(t,e):void 0}}function pb(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var db=(ab=Ym(Kf.IGlobalConfigService),sb=function(){function t(e){Object(et["a"])(this,t),sp(this,"configService",ub,this),this.layer=e,this.rendererService=e.getContainer().get(Kf.IRendererService),this.pickingService=e.getContainer().get(Kf.IPickingService),this.shaderModuleService=e.getContainer().get(Kf.IShaderModuleService),this.styleAttributeService=e.getContainer().get(Kf.IStyleAttributeService),this.mapService=e.getContainer().get(Kf.IMapService),this.iconService=e.getContainer().get(Kf.IIconService),this.fontService=e.getContainer().get(Kf.IFontService),this.cameraService=e.getContainer().get(Kf.ICameraService),this.layerService=e.getContainer().get(Kf.ILayerService),this.registerBuiltinAttributes(),this.startModelAnimate();var n=this.rendererService.createTexture2D;this.createTexture2D=n,this.DATA_TEXTURE_WIDTH=1024,this.rowCount=1,this.cellLength=0,this.cellProperties=[],this.cacheStyleProperties={thetaOffset:void 0,opacity:void 0,strokeOpacity:void 0,strokeWidth:void 0,stroke:void 0,offsets:void 0},this.stylePropertiesExist={hasThetaOffset:0,hasOpacity:0,hasStrokeOpacity:0,hasStrokeWidth:0,hasStroke:0,hasOffsets:0},this.dataTextureTest=this.layerService.getOESTextureFloat(),this.dataTextureTest||(this.dataTexture=this.createTexture2D({data:new Uint8Array(4),mag:Rp.NEAREST,min:Rp.NEAREST,width:1,height:1}))}return Object(nt["a"])(t,[{key:"clearLastCalRes",value:function(){this.cellProperties=[],this.cellLength=0,this.stylePropertiesExist={hasThetaOffset:0,hasOpacity:0,hasStrokeOpacity:0,hasStrokeWidth:0,hasStroke:0,hasOffsets:0}}},{key:"getCellTypeLayout",value:function(){return this.dataTextureTest?[this.rowCount,this.DATA_TEXTURE_WIDTH,0,0,this.stylePropertiesExist.hasOpacity,this.stylePropertiesExist.hasStrokeOpacity,this.stylePropertiesExist.hasStrokeWidth,this.stylePropertiesExist.hasStroke,this.stylePropertiesExist.hasOffsets,this.stylePropertiesExist.hasThetaOffset,0,0,0,0,0,1]:[1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,-1]}},{key:"dataTextureNeedUpdate",value:function(t){var e=!1;return Object(K["isEqual"])(t.thetaOffset,this.cacheStyleProperties.thetaOffset)||(e=!0,this.cacheStyleProperties.thetaOffset=t.thetaOffset),Object(K["isEqual"])(t.opacity,this.cacheStyleProperties.opacity)||(e=!0,this.cacheStyleProperties.opacity=t.opacity),Object(K["isEqual"])(t.strokeOpacity,this.cacheStyleProperties.strokeOpacity)||(e=!0,this.cacheStyleProperties.strokeOpacity=t.strokeOpacity),Object(K["isEqual"])(t.strokeWidth,this.cacheStyleProperties.strokeWidth)||(e=!0,this.cacheStyleProperties.strokeWidth=t.strokeWidth),Object(K["isEqual"])(t.stroke,this.cacheStyleProperties.stroke)||(e=!0,this.cacheStyleProperties.stroke=t.stroke),Object(K["isEqual"])(t.offsets,this.cacheStyleProperties.offsets)||(e=!0,this.cacheStyleProperties.offsets=t.offsets),void 0===this.dataTexture&&(e=!0),e}},{key:"judgeStyleAttributes",value:function(t){this.clearLastCalRes(),void 0===t.opacity||Object(K["isNumber"])(t.opacity)||(this.cellProperties.push({attr:"opacity",count:1}),this.stylePropertiesExist.hasOpacity=1,this.cellLength+=1),void 0===t.strokeOpacity||Object(K["isNumber"])(t.strokeOpacity)||(this.cellProperties.push({attr:"strokeOpacity",count:1}),this.stylePropertiesExist.hasStrokeOpacity=1,this.cellLength+=1),void 0===t.strokeWidth||Object(K["isNumber"])(t.strokeWidth)||(this.cellProperties.push({attr:"strokeWidth",count:1}),this.stylePropertiesExist.hasStrokeWidth=1,this.cellLength+=1),void 0===t.stroke||this.isStaticColor(t.stroke)||(this.cellProperties.push({attr:"stroke",count:4}),this.stylePropertiesExist.hasStroke=1,this.cellLength+=4),void 0===t.offsets||this.isOffsetStatic(t.offsets)||(this.cellProperties.push({attr:"offsets",count:2}),this.stylePropertiesExist.hasOffsets=1,this.cellLength+=2),void 0===t.thetaOffset||Object(K["isNumber"])(t.thetaOffset)||(this.cellProperties.push({attr:"thetaOffset",count:1}),this.stylePropertiesExist.hasThetaOffset=1,this.cellLength+=1)}},{key:"isStaticColor",value:function(t){return!!Object(K["isString"])(t)&&!!Kr(t)}},{key:"getStrokeColor",value:function(t){if(this.isStaticColor(t)){var e=li(t);return e[0]=e[0]?e[0]:0,e[1]=e[1]?e[1]:0,e[2]=e[2]?e[2]:0,e[3]=e[3]?e[3]:0,e}return[0,0,0,0]}},{key:"isOffsetStatic",value:function(t){return!!(Array.isArray(t)&&2===t.length&&Object(K["isNumber"])(t[0])&&Object(K["isNumber"])(t[1]))}},{key:"patchMod",value:function(t,e){for(var n=0;n<e;n++)t.push(-1)}},{key:"patchData",value:function(t,e,n){var r,i=fb(n);try{for(i.s();!(r=i.n()).done;){var o=r.value,a=o.attr,s=o.count,u=e[a];void 0!==u?"stroke"===a?t.push.apply(t,Object(M["a"])(li(u))):"offsets"===a?this.isOffsetStatic(u)?t.push(-u[0],u[1]):t.push(0,0):t.push(Object(K["isNumber"])(u)?u:1):this.patchMod(t,s)}}catch(c){i.e(c)}finally{i.f()}}},{key:"calDataFrame",value:function(t,e,n){for(var r=e.length,i=Math.ceil(r*t/this.DATA_TEXTURE_WIDTH),o=i*this.DATA_TEXTURE_WIDTH,a=[],s=0;s<r;s++){var u=e[s];this.patchData(a,u,n)}for(var c=a.length;c<o;c++)a.push(-1);return{data:a,width:this.DATA_TEXTURE_WIDTH,height:i}}},{key:"getBlend",value:function(){var t=this.layer.getLayerConfig(),e=t.blend,n=void 0===e?"normal":e;return P_[$m[n]]}},{key:"getDefaultStyle",value:function(){return{}}},{key:"getUninforms",value:function(){throw new Error("Method not implemented.")}},{key:"getAnimateUniforms",value:function(){return{}}},{key:"needUpdate",value:function(){var t=Object(mi["a"])(_i.a.mark((function t(){return _i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",!1);case 1:case"end":return t.stop()}}),t)})));function e(){return t.apply(this,arguments)}return e}()},{key:"buildModels",value:function(){var t=Object(mi["a"])(_i.a.mark((function t(){return _i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:throw new Error("Method not implemented.");case 1:case"end":return t.stop()}}),t)})));function e(){return t.apply(this,arguments)}return e}()},{key:"initModels",value:function(){var t=Object(mi["a"])(_i.a.mark((function t(){return _i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:throw new Error("Method not implemented.");case 1:case"end":return t.stop()}}),t)})));function e(){return t.apply(this,arguments)}return e}()},{key:"clearModels",value:function(){}},{key:"getAttribute",value:function(){throw new Error("Method not implemented.")}},{key:"render",value:function(){throw new Error("Method not implemented.")}},{key:"registerBuiltinAttributes",value:function(){throw new Error("Method not implemented.")}},{key:"animateOption2Array",value:function(t){return[t.enable?0:1,t.duration||4,t.interval||.2,t.trailLength||.1]}},{key:"startModelAnimate",value:function(){var t=this.layer.getLayerConfig(),e=t.animateOption;e.enable&&this.layer.setAnimateStartTime()}}]),t}(),ub=up(sb.prototype,"configService",[ab],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),sb),vb=100;function gb(t){return t/180*Math.acos(-1)}function mb(t){var e=gb(t[0])+Math.PI/2,n=gb(t[1]),r=vb+.4*Math.random(),i=r*Math.cos(n)*Math.cos(e),o=r*Math.cos(n)*Math.sin(e),a=r*Math.sin(n);return[o,a,i]}var yb=s.create(),_b=(s.create(),s.create()),bb=s.create(),xb=s.create();function wb(t,e,n,r,i){s.add(t,n,r),s.normalize(t,t),e=s.fromValues(-t[1],t[0]);var o=s.fromValues(-n[1],n[0]);return[i/s.dot(e,o),e]}function Eb(t,e){return s.set(t,-e[1],e[0])}function Sb(t,e,n){return s.sub(t,e,n),s.normalize(t,t),t}function Ob(t,e){return t[0]===e[0]&&t[1]===e[1]}var Cb,Tb,Ab,kb=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(et["a"])(this,t),Object(Ar["a"])(this,"lastFlip",-1),Object(Ar["a"])(this,"miter",s.fromValues(0,0)),Object(Ar["a"])(this,"started",!1),Object(Ar["a"])(this,"dash",!1),Object(Ar["a"])(this,"totalDistance",0),Object(Ar["a"])(this,"currentIndex",0),this.join=e.join||"miter",this.cap=e.cap||"butt",this.miterLimit=e.miterLimit||10,this.thickness=e.thickness||1,this.dash=e.dash||!1,this.complex={positions:[],indices:[],normals:[],startIndex:0,indexes:[]}}return Object(nt["a"])(t,[{key:"simpleExtrude",value:function(t){var e=this.complex;if(t.length<=1)return e;this.lastFlip=-1,this.started=!1,this.normal=null,this.totalDistance=0;for(var n=t.length,r=e.startIndex,i=1;i<n;i++){var o=t[i-1],a=t[i],s=i<t.length-1?t[i+1]:null,u=this.simpleSegment(e,r,o,a,s);r+=u}if(this.dash)for(var c=0;c<e.positions.length/6;c++)e.positions[6*c+5]=this.totalDistance;return e.startIndex=e.positions.length/6,e}},{key:"simpleExtrude_gaode2",value:function(t,e){var n=this.complex;if(t.length<=1)return n;this.lastFlip=-1,this.started=!1,this.normal=null,this.totalDistance=0;for(var r=t.length,i=n.startIndex,o=1;o<r;o++){var a,s,u,c=t[o-1];c.push(null!==(a=e[o-1][2])&&void 0!==a?a:0);var l=e[o-1],f=t[o];f.push(null!==(s=e[o][2])&&void 0!==s?s:0);var h=e[o],p=o<t.length-1?[].concat(Object(M["a"])(t[o+1]),[null!==(u=e[o+1][2])&&void 0!==u?u:0]):null,d=o<e.length-1?e[o+1]:null,v=this.simpleSegment(n,i,c,f,p,l,h,d);i+=v}if(this.dash)for(var g=0;g<n.positions.length/6;g++)n.positions[6*g+5]=this.totalDistance;return n.startIndex=n.positions.length/6,n}},{key:"extrude_gaode2",value:function(t,e){var n=this.complex;if(t.length<=1)return n;this.lastFlip=-1,this.started=!1,this.normal=null,this.totalDistance=0;for(var r=t.length,i=n.startIndex,o=1;o<r;o++){var a,s,u,c=t[o-1];c.push(null!==(a=e[o-1][2])&&void 0!==a?a:0);var l=e[o-1],f=t[o];f.push(null!==(s=e[o][2])&&void 0!==s?s:0);var h=e[o],p=o<t.length-1?[].concat(Object(M["a"])(t[o+1]),[null!==(u=e[o+1][2])&&void 0!==u?u:0]):null,d=o<e.length-1?e[o+1]:null,v=this.segment_gaode2(n,i,c,f,p,l,h,d);i+=v}if(this.dash)for(var g=0;g<n.positions.length/6;g++)n.positions[6*g+5]=this.totalDistance;return n.startIndex=n.positions.length/6,n}},{key:"extrude",value:function(t){var e=this.complex;if(t.length<=1)return e;this.lastFlip=-1,this.started=!1,this.normal=null,this.totalDistance=0;for(var n=t.length,r=e.startIndex,i=1;i<n;i++){var o=t[i-1],a=t[i],s=i<t.length-1?t[i+1]:null,u=this.segment(e,r,o,a,s);r+=u}if(this.dash)for(var c=0;c<e.positions.length/6;c++)e.positions[6*c+5]=this.totalDistance;return e.startIndex=e.positions.length/6,e}},{key:"simpleSegment",value:function(t,e,n,r,i){var o=0,a=t.indices,u=t.positions,c=t.normals,l=yr([r[0],r[1]]),f=yr([n[0],n[1]]);Sb(_b,l,f);var h=0;if(this.dash&&(h=this.lineSegmentDistance(l,f),this.totalDistance+=h),this.normal||(this.normal=s.create(),Eb(this.normal,_b)),this.started||(this.started=!0,this.extrusions(u,c,n,this.normal,this.thickness,this.totalDistance-h)),a.push(e+0,e+1,e+2),i){var p=yr([i[0],i[1]]);Ob(l,p)&&s.add(p,l,s.normalize(p,s.subtract(p,l,f))),Sb(bb,p,l);var d=wb(xb,s.create(),_b,bb,this.thickness),v=Object(q["a"])(d,2),g=v[0],m=v[1],y=s.dot(xb,this.normal)<0?-1:1;this.extrusions(u,c,r,m,g,this.totalDistance),a.push.apply(a,Object(M["a"])(1===this.lastFlip?[e,e+2,e+3]:[e+2,e+1,e+3])),y=-1,s.copy(this.normal,m),o+=2,this.lastFlip=y}else Eb(this.normal,_b),this.extrusions(u,c,r,this.normal,this.thickness,this.totalDistance),a.push.apply(a,Object(M["a"])(1===this.lastFlip?[e,e+2,e+3]:[e+2,e+1,e+3])),o+=2;return o}},{key:"segment_gaode2",value:function(t,e,n,r,i,o,a,u){var c=0,l=t.indices,f=t.positions,h=t.normals,p="square"===this.cap,d="bevel"===this.join,v=yr([a[0],a[1]]),g=yr([o[0],o[1]]);Sb(_b,r,n);var m=0;if(this.dash&&(m=this.lineSegmentDistance(v,g),this.totalDistance+=m),this.normal||(this.normal=s.create(),Eb(this.normal,_b)),!this.started)if(this.started=!0,p){var y=s.create(),_=s.create();s.add(y,this.normal,_b),s.add(_,this.normal,_b),h.push(_[0],_[1],0),h.push(y[0],y[1],0),f.push(n[0],n[1],0|n[2],this.totalDistance-m,-this.thickness,0|n[2]),this.complex.indexes.push(this.currentIndex),f.push(n[0],n[1],0|n[2],this.totalDistance-m,this.thickness,0|n[2]),this.complex.indexes.push(this.currentIndex),this.currentIndex++}else this.extrusions(f,h,n,this.normal,this.thickness,this.totalDistance-m);if(l.push(e+0,e+1,e+2),i){Ob(r,i)&&s.add(i,r,s.normalize(i,s.subtract(i,r,n))),Sb(bb,i,r);var b=wb(xb,s.create(),_b,bb,this.thickness),x=Object(q["a"])(b,2),w=x[0],E=x[1],S=s.dot(xb,this.normal)<0?-1:1,O=d;if(!O&&"miter"===this.join){var C=w;C>this.miterLimit&&(O=!0)}O?(h.push(this.normal[0],this.normal[1],0),h.push(E[0],E[1],0),f.push(r[0],r[1],0|r[2],this.totalDistance,-this.thickness*S,0|r[2]),this.complex.indexes.push(this.currentIndex),f.push(r[0],r[1],0|r[2],this.totalDistance,this.thickness*S,0|r[2]),this.complex.indexes.push(this.currentIndex),this.currentIndex++,l.push.apply(l,Object(M["a"])(this.lastFlip!==-S?[e,e+2,e+3]:[e+2,e+1,e+3])),l.push(e+2,e+3,e+4),Eb(yb,bb),s.copy(this.normal,yb),h.push(this.normal[0],this.normal[1],0),f.push(r[0],r[1],0|r[2],this.totalDistance,-this.thickness*S,0|r[2]),this.complex.indexes.push(this.currentIndex),this.currentIndex++,c+=3):(this.extrusions(f,h,r,E,w,this.totalDistance),l.push.apply(l,Object(M["a"])(1===this.lastFlip?[e,e+2,e+3]:[e+2,e+1,e+3])),S=-1,s.copy(this.normal,E),c+=2),this.lastFlip=S}else{if(Eb(this.normal,_b),p){var T=s.create(),A=s.create();s.sub(A,_b,this.normal),s.add(T,_b,this.normal),h.push(A[0],A[1],0),h.push(T[0],T[1],0),f.push(r[0],r[1],0|r[2],this.totalDistance,this.thickness,0|r[2]),this.complex.indexes.push(this.currentIndex),f.push(r[0],r[1],0|r[2],this.totalDistance,this.thickness,0|r[2]),this.complex.indexes.push(this.currentIndex),this.currentIndex++}else this.extrusions(f,h,r,this.normal,this.thickness,this.totalDistance);l.push.apply(l,Object(M["a"])(1===this.lastFlip?[e,e+2,e+3]:[e+2,e+1,e+3])),c+=2}return c}},{key:"segment",value:function(t,e,n,r,i){var o=0,a=t.indices,u=t.positions,c=t.normals,l="square"===this.cap,f="bevel"===this.join,h=yr([r[0],r[1]]),p=yr([n[0],n[1]]);Sb(_b,h,p);var d=0;if(this.dash&&(d=this.lineSegmentDistance(h,p),this.totalDistance+=d),this.normal||(this.normal=s.create(),Eb(this.normal,_b)),!this.started)if(this.started=!0,l){var v=s.create(),g=s.create();s.add(v,this.normal,_b),s.add(g,this.normal,_b),c.push(g[0],g[1],0),c.push(v[0],v[1],0),u.push(n[0],n[1],0|n[2],this.totalDistance-d,-this.thickness,0|n[2]),this.complex.indexes.push(this.currentIndex),u.push(n[0],n[1],0|n[2],this.totalDistance-d,this.thickness,0|n[2]),this.complex.indexes.push(this.currentIndex),this.currentIndex++}else this.extrusions(u,c,n,this.normal,this.thickness,this.totalDistance-d);if(a.push(e+0,e+1,e+2),i){var m=yr([i[0],i[1]]);Ob(h,m)&&s.add(m,h,s.normalize(m,s.subtract(m,h,p))),Sb(bb,m,h);var y=wb(xb,s.create(),_b,bb,this.thickness),_=Object(q["a"])(y,2),b=_[0],x=_[1],w=s.dot(xb,this.normal)<0?-1:1,E=f;if(!E&&"miter"===this.join){var S=b;S>this.miterLimit&&(E=!0)}E?(c.push(this.normal[0],this.normal[1],0),c.push(x[0],x[1],0),u.push(r[0],r[1],0|r[2],this.totalDistance,-this.thickness*w,0|r[2]),this.complex.indexes.push(this.currentIndex),u.push(r[0],r[1],0|r[2],this.totalDistance,this.thickness*w,0|r[2]),this.complex.indexes.push(this.currentIndex),this.currentIndex++,a.push.apply(a,Object(M["a"])(this.lastFlip!==-w?[e,e+2,e+3]:[e+2,e+1,e+3])),a.push(e+2,e+3,e+4),Eb(yb,bb),s.copy(this.normal,yb),c.push(this.normal[0],this.normal[1],0),u.push(r[0],r[1],0|r[2],this.totalDistance,-this.thickness*w,0|r[2]),this.complex.indexes.push(this.currentIndex),this.currentIndex++,o+=3):(this.extrusions(u,c,r,x,b,this.totalDistance),a.push.apply(a,Object(M["a"])(1===this.lastFlip?[e,e+2,e+3]:[e+2,e+1,e+3])),w=-1,s.copy(this.normal,x),o+=2),this.lastFlip=w}else{if(Eb(this.normal,_b),l){var O=s.create(),C=s.create();s.sub(C,_b,this.normal),s.add(O,_b,this.normal),c.push(C[0],C[1],0),c.push(O[0],O[1],0),u.push(r[0],r[1],0|r[2],this.totalDistance,this.thickness,0|r[2]),this.complex.indexes.push(this.currentIndex),u.push(r[0],r[1],0|r[2],this.totalDistance,this.thickness,0|r[2]),this.complex.indexes.push(this.currentIndex),this.currentIndex++}else this.extrusions(u,c,r,this.normal,this.thickness,this.totalDistance);a.push.apply(a,Object(M["a"])(1===this.lastFlip?[e,e+2,e+3]:[e+2,e+1,e+3])),o+=2}return o}},{key:"extrusions",value:function(t,e,n,r,i,o){e.push(r[0],r[1],0),e.push(r[0],r[1],0),t.push(n[0],n[1],0|n[2],o,-i,0|n[2]),this.complex.indexes.push(this.currentIndex),t.push(n[0],n[1],0|n[2],o,i,0|n[2]),this.complex.indexes.push(this.currentIndex),this.currentIndex++}},{key:"lineSegmentDistance",value:function(t,e){var n=e[0]-t[0],r=e[1]-t[1];return Math.sqrt(n*n+r*r)}}]),t}();function Mb(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=t[0][0],r=t[0][t[0].length-1];n[0]===r[0]&&n[1]===r[1]&&(t[0]=t[0].slice(0,t[0].length-1));for(var i=t[0].length,o=lo.a.flatten(t),a=o.vertices,s=o.dimensions,u=[],c=[],l=[],f=0;f<a.length/s;f++)2===s?u.push(a[2*f],a[2*f+1],1,-1,-1):u.push(a[3*f],a[3*f+1],1,-1,-1),l.push(0,0,1);var h=lo()(o.vertices,o.holes,o.dimensions);c.push.apply(c,Object(M["a"])(h));for(var p=function(t){var n=o.vertices.slice(t*s,(t+1)*s),r=o.vertices.slice((t+1)*s,(t+2)*s);0===r.length&&(r=o.vertices.slice(0,s));var i=u.length/5;u.push(n[0],n[1],1,0,0,r[0],r[1],1,.1,0,n[0],n[1],0,0,.8,r[0],r[1],0,.1,.8);var a=Pb([r[0],r[1],1],[n[0],n[1],0],[n[0],n[1],1],e);l.push.apply(l,Object(M["a"])(a).concat(Object(M["a"])(a),Object(M["a"])(a),Object(M["a"])(a))),c.push.apply(c,Object(M["a"])([1,2,0,3,2,1].map((function(t){return t+i}))))},d=0;d<i;d++)p(d);return{positions:u,index:c,normals:l}}function Pb(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=u.create(),o=u.create(),a=u.create();r&&(t=dr(t),e=dr(e),n=dr(n));var s=u.fromValues.apply(u,Object(M["a"])(t)),c=u.fromValues.apply(u,Object(M["a"])(e)),l=u.fromValues.apply(u,Object(M["a"])(n));u.sub(i,l,c),u.sub(o,s,c),u.cross(a,i,o);var f=u.create();return u.normalize(f,a),f}function Rb(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=2*Math.PI/t,r=[],i=0;i<t;i++)r.push(n*i+e*Math.PI/12);var o=r.map((function(t){var e=Math.sin(t+Math.PI/4),n=Math.cos(t+Math.PI/4);return[e,n,0]}));return o}function jb(){return Rb(30)}function Ib(){return Rb(4)}function Lb(){return Rb(3)}function Nb(){return Rb(6,1)}function Db(){return Rb(5)}(function(t){t["CYLINDER"]="cylinder",t["SQUARECOLUMN"]="squareColumn",t["TRIANGLECOLUMN"]="triangleColumn",t["HEXAGONCOLUMN"]="hexagonColumn",t["PENTAGONCOLUMN"]="pentagonColumn"})(Tb||(Tb={})),function(t){t["CIRCLE"]="circle",t["SQUARE"]="square",t["TRIANGLE"]="triangle",t["HEXAGON"]="hexagon",t["PENTAGON"]="pentagon"}(Ab||(Ab={}));var Fb=(Cb={},Object(Ar["a"])(Cb,Ab.CIRCLE,jb),Object(Ar["a"])(Cb,Ab.HEXAGON,Nb),Object(Ar["a"])(Cb,Ab.TRIANGLE,Lb),Object(Ar["a"])(Cb,Ab.SQUARE,Ib),Object(Ar["a"])(Cb,Ab.PENTAGON,Db),Object(Ar["a"])(Cb,Tb.CYLINDER,jb),Object(Ar["a"])(Cb,Tb.HEXAGONCOLUMN,Nb),Object(Ar["a"])(Cb,Tb.TRIANGLECOLUMN,Lb),Object(Ar["a"])(Cb,Tb.SQUARECOLUMN,Ib),Object(Ar["a"])(Cb,Tb.PENTAGONCOLUMN,Db),Cb),Bb={};function zb(t){var e=Sr(t.coordinates);return{vertices:[].concat(Object(M["a"])(e),Object(M["a"])(e),Object(M["a"])(e),Object(M["a"])(e)),indices:[0,1,2,2,3,0],size:e.length}}function Ub(t){var e=Sr(t.coordinates),n=mb(e);return{vertices:[].concat(Object(M["a"])(n),Object(M["a"])(n),Object(M["a"])(n),Object(M["a"])(n)),indices:[0,1,2,2,3,0],size:n.length}}function Vb(t){var e=t.shape,n=ex(e,!1),r=n.positions,i=n.index,o=n.normals;return{vertices:r,indices:i,normals:o,size:5}}function Hb(t){var e=Sr(t.coordinates);return{vertices:Object(M["a"])(e),indices:[0],size:e.length}}function Gb(t){var e=t.coordinates,n=t.originCoordinates,r=t.version,i=new kb({dash:!0,join:"bevel"});if("GAODE2.x"===r){var o=e;Array.isArray(o[0][0])||(o=[e]);var a=n;Array.isArray(a[0][0])||(a=[n]);for(var s=0;s<o.length;s++){var u=o[s],c=a[s];i.extrude_gaode2(u,c)}}else{var l=e;l[0]&&!Array.isArray(l[0][0])&&(l=[e]),l.forEach((function(t){i.extrude(t)}))}var f=i.complex;return{vertices:f.positions,indices:f.indices,normals:f.normals,indexes:f.indexes,size:6}}function Wb(t){var e=t.coordinates,n=[];if(!Array.isArray(e[0]))return{vertices:[],indices:[],normals:[],size:6,count:0};var r=Xb(e),i=r.results,o=r.totalDistance;return i.map((function(t){n.push(t[0],t[1],t[2],t[3],0,o)})),{vertices:n,indices:[],normals:[],size:6,count:i.length}}function Zb(t,e){var n=e[0]-t[0],r=e[1]-t[1];return Math.sqrt(n*n+r*r)}function Yb(t,e){return t.length<3&&t.push(0),void 0!==e&&t.push(e),t}function Xb(t){var e=t;Array.isArray(e)&&Array.isArray(e[0])&&Array.isArray(e[0][0])&&(e=t.flat());var n=0;if(e.length<2)return{results:e,totalDistance:0};var r=[],i=Yb(e[0],n);r.push(i);for(var o=1;o<e.length-1;o++){var a=Zb(e[o-1],e[o]);n+=a;var s=Yb(e[o],n);r.push(s),r.push(s)}var u=Zb(e[e.length-2],e[e.length-1]);return n+=u,r.push(Yb(e[e.length-1],n)),{results:r,totalDistance:n}}function qb(t){var e=t.coordinates,n=lo.a.flatten(e),r=n.vertices,i=n.dimensions,o=n.holes;return{indices:lo()(r,o,i),vertices:r,size:i}}function Kb(t){var e=t.coordinates,n=lo.a.flatten(e),r=n.vertices,i=n.dimensions,o=n.holes;return{indices:lo()(r,o,i),vertices:Qb(r),size:i+4}}function Qb(t){for(var e=[],n=Or(t),r=n.center,i=n.radius,o=0;o<t.length;o+=2){var a=t[o],s=t[o+1];e.push.apply(e,[a,s,0].concat(Object(M["a"])(r),[i]))}return e}function $b(t){var e=t.coordinates,n=Mb(e,!0),r=n.positions,i=n.index,o=n.normals;return{vertices:r,indices:i,normals:o,size:5}}function Jb(t){var e=t.coordinates,n=[].concat(Object(M["a"])(e[0]),[0,0,1,e[1][0],e[0][1],0,1,1],Object(M["a"])(e[1]),[0,1,0],Object(M["a"])(e[0]),[0,0,1],Object(M["a"])(e[1]),[0,1,0,e[0][0],e[1][1],0,0,0]),r=[0,1,2,3,4,5];return{vertices:n,indices:r,size:5}}function tx(t,e){for(var n=e||30,r=t.coordinates,i=[],o=[],a=function(t){i.push(t,1,t,r[0][0],r[0][1],r[1][0],r[1][1],t,-1,t,r[0][0],r[0][1],r[1][0],r[1][1]),t!==n-1&&o.push.apply(o,Object(M["a"])([0,1,2,1,3,2].map((function(e){return 2*t+e}))))},s=0;s<n;s++)a(s);return{vertices:i,indices:o,size:7}}function ex(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(Bb&&Bb[t])return Bb[t];var n=Fb[t]?Fb[t]():Fb.cylinder(),r=Mb([n],e);return Bb[t]=r,r}function nx(t){var e=rx();return function(){var n,r=Object(ct["a"])(t);if(e){var i=Object(ct["a"])(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(ut["a"])(this,n)}}function rx(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}var ix='\nuniform float u_opacity;\n\nvarying vec4 v_dash_array;\nvarying vec4 v_color;\n\nuniform float segmentNumber;\n\nvarying mat4 styleMappingMat; // \u4f20\u9012\u4ece\u7247\u5143\u4e2d\u4f20\u9012\u7684\u6620\u5c04\u6570\u636e\n\n#pragma include "picking"\n\nvoid main() {\n  float opacity = styleMappingMat[0][0];\n  float d_distance_ratio = styleMappingMat[3].b; // \u5f53\u524d\u9876\u70b9\u5728\u5f27\u7ebf\u4e2d\u6240\u5904\u7684\u5206\u6bb5\u6bd4\u4f8b\n\n  gl_FragColor = v_color;\n  gl_FragColor.a *= opacity;\n\n  float flag = 0.;\n  float dashLength = mod(d_distance_ratio, v_dash_array.x + v_dash_array.y + v_dash_array.z + v_dash_array.w);\n  if(dashLength < v_dash_array.x || (dashLength > (v_dash_array.x + v_dash_array.y) && dashLength <  v_dash_array.x + v_dash_array.y + v_dash_array.z)) {\n    flag = 1.;\n  };\n  gl_FragColor.a *=flag;\n  \n  gl_FragColor = filterColor(gl_FragColor);\n}',ox='\nattribute vec4 a_Color;\nattribute vec3 a_Position;\nattribute vec4 a_Instance;\nattribute float a_Size;\nuniform mat4 u_ModelMatrix;\nuniform mat4 u_Mvp;\nuniform float segmentNumber;\nvarying vec4 v_color;\n\n\nuniform vec4 u_dash_array: [10.0, 5., 0, 0];\nuniform float u_lineDir: 1.0;\nvarying vec4 v_dash_array;\n\nuniform float u_thetaOffset: 0.314;\n\nuniform float u_opacity: 1.0;\nvarying mat4 styleMappingMat; // \u7528\u4e8e\u5c06\u5728\u9876\u70b9\u7740\u8272\u5668\u4e2d\u8ba1\u7b97\u597d\u7684\u6837\u5f0f\u503c\u4f20\u9012\u7ed9\u7247\u5143\n\n#pragma include "styleMapping"\n#pragma include "styleMappingCalOpacity"\n#pragma include "styleMappingCalThetaOffset"\n\n#pragma include "projection"\n#pragma include "project"\n#pragma include "picking"\n\nfloat bezier3(vec3 arr, float t) {\n  float ut = 1. - t;\n  return (arr.x * ut + arr.y * t) * ut + (arr.y * ut + arr.z * t) * t;\n}\nvec2 midPoint(vec2 source, vec2 target, float arcThetaOffset) {\n  vec2 center = target - source;\n  float r = length(center);\n  float theta = atan(center.y, center.x);\n  float thetaOffset = arcThetaOffset;\n  float r2 = r / 2.0 / cos(thetaOffset);\n  float theta2 = theta + thetaOffset;\n  vec2 mid = vec2(r2*cos(theta2) + source.x, r2*sin(theta2) + source.y);\n  if(u_lineDir == 1.0) { // \u6b63\u5411\n    return mid;\n  } else { // \u9006\u5411\n    // (mid + vmin)/2 = (s + t)/2\n    vec2 vmid = source + target - mid;\n    return vmid;\n  }\n  // return mid;\n}\nfloat getSegmentRatio(float index) {\n  // dash: index / (segmentNumber - 1.);\n  // normal: smoothstep(0.0, 1.0, index / (segmentNumber - 1.));\n  return index / (segmentNumber - 1.);\n}\nvec2 interpolate (vec2 source, vec2 target, float t, float arcThetaOffset) {\n  // if the angularDist is PI, linear interpolation is applied. otherwise, use spherical interpolation\n  vec2 mid = midPoint(source, target, arcThetaOffset);\n  vec3 x = vec3(source.x, mid.x, target.x);\n  vec3 y = vec3(source.y, mid.y, target.y);\n  return vec2(bezier3(x ,t), bezier3(y,t));\n}\nvec2 getExtrusionOffset(vec2 line_clipspace, float offset_direction) {\n  // normalized direction of the line\n  vec2 dir_screenspace = normalize(line_clipspace);\n  // rotate by 90 degrees\n   dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);\n  vec2 offset = dir_screenspace * offset_direction * setPickingSize(a_Size) / 2.0;\n  return offset;\n}\nvec2 getNormal(vec2 line_clipspace, float offset_direction) {\n  // normalized direction of the line\n  vec2 dir_screenspace = normalize(line_clipspace);\n  // rotate by 90 degrees\n   dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);\n   return reverse_offset_normal(vec3(dir_screenspace,1.0)).xy * sign(offset_direction);\n}\n\nvoid main() {\n  v_color = a_Color;\n\n  // cal style mapping - \u6570\u636e\u7eb9\u7406\u6620\u5c04\u90e8\u5206\u7684\u8ba1\u7b97\n  styleMappingMat = mat4(\n    0.0, 0.0, 0.0, 0.0, // opacity - strokeOpacity - strokeWidth - empty\n    0.0, 0.0, 0.0, 0.0, // strokeR - strokeG - strokeB - strokeA\n    0.0, 0.0, 0.0, 0.0, // offsets[0] - offsets[1]\n    0.0, 0.0, 0.0, 0.0  // dataset \u6570\u636e\u96c6\n  );\n\n  float rowCount = u_cellTypeLayout[0][0];    // \u5f53\u524d\u7684\u6570\u636e\u7eb9\u7406\u6709\u51e0\u884c\n  float columnCount = u_cellTypeLayout[0][1]; // \u5f53\u770b\u5230\u6570\u636e\u7eb9\u7406\u6709\u51e0\u5217\n  float columnWidth = 1.0/columnCount;  // \u5217\u5bbd\n  float rowHeight = 1.0/rowCount;       // \u884c\u9ad8\n  float cellCount = calCellCount(); // opacity - strokeOpacity - strokeWidth - stroke - offsets\n  float id = a_vertexId; // \u7b2cn\u4e2a\u9876\u70b9\n  float cellCurrentRow = floor(id * cellCount / columnCount) + 1.0; // \u8d77\u59cb\u70b9\u5728\u7b2c\u51e0\u884c\n  float cellCurrentColumn = mod(id * cellCount, columnCount) + 1.0; // \u8d77\u59cb\u70b9\u5728\u7b2c\u51e0\u5217\n  \n  // cell \u56fa\u5b9a\u987a\u5e8f opacity -> strokeOpacity -> strokeWidth -> stroke -> thetaOffset... \n  // \u6309\u987a\u5e8f\u4ece cell \u4e2d\u53d6\u503c\u3001\u82e5\u6ca1\u6709\u5219\u81ea\u52a8\u5f80\u4e0b\u53d6\u503c\n  float textureOffset = 0.0; // \u5728 cell \u4e2d\u53d6\u503c\u7684\u504f\u79fb\u91cf\n\n  vec2 opacityAndOffset = calOpacityAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);\n  styleMappingMat[0][0] = opacityAndOffset.r;\n  textureOffset = opacityAndOffset.g;\n\n  vec2 thetaOffsetAndOffset = calThetaOffsetAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);\n  styleMappingMat[0][1] = thetaOffsetAndOffset.r;\n  textureOffset = thetaOffsetAndOffset.g;\n  // cal style mapping - \u6570\u636e\u7eb9\u7406\u6620\u5c04\u90e8\u5206\u7684\u8ba1\u7b97\n\n  \n  vec2 source = a_Instance.rg;  // \u8d77\u59cb\u70b9\n  vec2 target =  a_Instance.ba; // \u7ec8\u70b9\n  float segmentIndex = a_Position.x;\n  float segmentRatio = getSegmentRatio(segmentIndex);\n\n  float indexDir = mix(-1.0, 1.0, step(segmentIndex, 0.0));\n  float nextSegmentRatio = getSegmentRatio(segmentIndex + indexDir);\n\n  vec2 s = source;\n  vec2 t = target;\n  \n  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x\n    s = unProjCustomCoord(source);\n    t = unProjCustomCoord(target);\n  }\n  float total_Distance = pixelDistance(s, t) / 2.0 * PI;\n  v_dash_array = pow(2.0, 20.0 - u_Zoom) * u_dash_array / total_Distance;\n\n  styleMappingMat[3].b = segmentIndex / segmentNumber;\n\n  // styleMappingMat[0][1] - arcThetaOffset\n  vec4 curr = project_position(vec4(interpolate(source, target, segmentRatio, styleMappingMat[0][1]), 0.0, 1.0));\n  vec4 next = project_position(vec4(interpolate(source, target, nextSegmentRatio, styleMappingMat[0][1]), 0.0, 1.0));\n  // v_normal = getNormal((next.xy - curr.xy) * indexDir, a_Position.y);\n  //unProjCustomCoord\n  \n  vec2 offset = project_pixel(getExtrusionOffset((next.xy - curr.xy) * indexDir, a_Position.y));\n  \n\n  // gl_Position = project_common_position_to_clipspace(vec4(curr.xy + offset, 0, 1.0));\n  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x\n    // gl_Position = u_Mvp * (vec4(curr.xy + offset, 0, 1.0));\n    gl_Position = u_Mvp * (vec4(curr.xy + offset, 0, 1.0));\n  } else {\n    gl_Position = project_common_position_to_clipspace(vec4(curr.xy + offset, 0, 1.0));\n  }\n  gl_PointSize = 5.0;\n  setPickingColor(a_PickingColor);\n}\n',ax='\n#define Animate 0.0\n#define LineTexture 1.0\n\nuniform float u_opacity;\nuniform float u_textureBlend;\nuniform float u_blur : 0.9;\nuniform float u_line_type: 0.0;\n// varying vec2 v_normal;\nvarying vec4 v_dash_array;\nvarying vec4 v_color;\n\nuniform float u_time;\nuniform vec4 u_animate: [ 1., 2., 1.0, 0.2 ];\n\nuniform float u_line_texture;\nuniform sampler2D u_texture;\nuniform vec2 u_textSize;\n\nuniform float segmentNumber;\nvarying vec2 v_iconMapUV;\n\nvarying mat4 styleMappingMat; // \u4f20\u9012\u4ece\u7247\u5143\u4e2d\u4f20\u9012\u7684\u6620\u5c04\u6570\u636e\n\n#pragma include "picking"\n\nvoid main() {\n  float opacity = styleMappingMat[0][0];\n  float animateSpeed = 0.0; // \u8fd0\u52a8\u901f\u5ea6\n  float d_segmentIndex = styleMappingMat[3].r;   // \u5f53\u524d\u9876\u70b9\u5728\u5f27\u7ebf\u4e2d\u6240\u5904\u7684\u5206\u6bb5\u4f4d\u7f6e\n  float d_distance_ratio = styleMappingMat[3].b; // \u5f53\u524d\u9876\u70b9\u5728\u5f27\u7ebf\u4e2d\u6240\u5904\u7684\u5206\u6bb5\u6bd4\u4f8b\n\n  gl_FragColor = v_color;\n  \n  gl_FragColor.a *= opacity;\n\n  if(u_animate.x == Animate && u_line_texture != LineTexture) {\n      animateSpeed = u_time / u_animate.y;\n      float alpha =1.0 - fract( mod(1.0- d_distance_ratio, u_animate.z)* (1.0/ u_animate.z) + u_time / u_animate.y);\n      alpha = (alpha + u_animate.w -1.0) / u_animate.w;\n      // alpha = smoothstep(0., 1., alpha);\n      alpha = clamp(alpha, 0.0, 1.0);\n      gl_FragColor.a *= alpha;\n  }\n\n  // \u5f53\u5b58\u5728\u8d34\u56fe\u65f6\u5728\u5e95\u8272\u4e0a\u8d34\u4e0a\u8d34\u56fe\n  if(u_line_texture == LineTexture) { // while load texture\n    float arcRadio = smoothstep( 0.0, 1.0, (d_segmentIndex / segmentNumber));\n    // float arcRadio = smoothstep( 0.0, 1.0, d_distance_ratio);\n\n    float count = styleMappingMat[3].g; // \u8d34\u56fe\u5728\u5f27\u7ebf\u4e0a\u91cd\u590d\u7684\u6570\u91cf\n\n    float time = 0.0;\n    if(u_animate.x == Animate) {\n      time = u_time / u_animate.y;\n    }\n    float redioCount = arcRadio * count;\n\n    float u = fract(redioCount - time);\n    float v = styleMappingMat[3].a; // \u6a2a\u5411 v\n    vec2 uv= v_iconMapUV / u_textSize + vec2(u, v) / u_textSize * 64.;\n\n    vec4 pattern = texture2D(u_texture, uv);\n\n    if(u_animate.x == Animate) {\n      float currentPlane = floor(redioCount - time);\n      float textureStep = floor(count * u_animate.z);\n      float a = mod(currentPlane, textureStep);\n      if(a < textureStep - 1.0) {\n        pattern = vec4(0.0);\n      }\n    }\n\n    if(u_textureBlend == 0.0) { // normal\n      pattern.a = 0.0;\n      gl_FragColor = filterColor(gl_FragColor + pattern);\n    } else { // replace\n        pattern.a *= opacity;\n        if(gl_FragColor.a <= 0.0) {\n          pattern.a = 0.0;\n        }\n        gl_FragColor = filterColor(pattern);\n    }\n    \n  } else {\n     gl_FragColor = filterColor(gl_FragColor);\n  }\n}',sx='#define Animate 0.0\n#define LineTexture 1.0\n\nattribute vec4 a_Color;\nattribute vec3 a_Position;\nattribute vec4 a_Instance;\nattribute float a_Size;\nuniform mat4 u_ModelMatrix;\nuniform mat4 u_Mvp;\nuniform float segmentNumber;\nuniform vec4 u_animate: [ 1., 2., 1.0, 0.2 ];\nvarying vec4 v_color;\n\nuniform float u_lineDir: 1.0;\n\nuniform float u_thetaOffset: 0.314;\nuniform float u_icon_step: 100;\nuniform float u_line_texture: 0.0;\nattribute vec2 a_iconMapUV;\nvarying vec2 v_iconMapUV;\n\nuniform float u_opacity: 1.0;\nvarying mat4 styleMappingMat; // \u7528\u4e8e\u5c06\u5728\u9876\u70b9\u7740\u8272\u5668\u4e2d\u8ba1\u7b97\u597d\u7684\u6837\u5f0f\u503c\u4f20\u9012\u7ed9\u7247\u5143\n\n#pragma include "styleMapping"\n#pragma include "styleMappingCalOpacity"\n#pragma include "styleMappingCalThetaOffset"\n\n#pragma include "projection"\n#pragma include "project"\n#pragma include "picking"\n\nfloat bezier3(vec3 arr, float t) {\n  float ut = 1. - t;\n  return (arr.x * ut + arr.y * t) * ut + (arr.y * ut + arr.z * t) * t;\n}\nvec2 midPoint(vec2 source, vec2 target, float arcThetaOffset) {\n  vec2 center = target - source;\n  float r = length(center);\n  float theta = atan(center.y, center.x);\n  float thetaOffset = arcThetaOffset;\n  float r2 = r / 2.0 / cos(thetaOffset);\n  float theta2 = theta + thetaOffset;\n  vec2 mid = vec2(r2*cos(theta2) + source.x, r2*sin(theta2) + source.y);\n  if(u_lineDir == 1.0) { // \u6b63\u5411\n    return mid;\n  } else { // \u9006\u5411\n    // (mid + vmin)/2 = (s + t)/2\n    vec2 vmid = source + target - mid;\n    return vmid;\n  }\n  // return mid;\n}\nfloat getSegmentRatio(float index) {\n    // dash: index / (segmentNumber - 1.);\n    // normal: smoothstep(0.0, 1.0, index / (segmentNumber - 1.));\n    return smoothstep(0.0, 1.0, index / (segmentNumber - 1.));\n    //  return index / (segmentNumber - 1.);\n}\nvec2 interpolate (vec2 source, vec2 target, float t, float arcThetaOffset) {\n  // if the angularDist is PI, linear interpolation is applied. otherwise, use spherical interpolation\n  vec2 mid = midPoint(source, target, arcThetaOffset);\n  vec3 x = vec3(source.x, mid.x, target.x);\n  vec3 y = vec3(source.y, mid.y, target.y);\n  return vec2(bezier3(x ,t), bezier3(y,t));\n}\nvec2 getExtrusionOffset(vec2 line_clipspace, float offset_direction) {\n  // normalized direction of the line\n  vec2 dir_screenspace = normalize(line_clipspace);\n  // rotate by 90 degrees\n   dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);\n  vec2 offset = dir_screenspace * offset_direction * setPickingSize(a_Size) / 2.0;\n  return offset;\n}\nvec2 getNormal(vec2 line_clipspace, float offset_direction) {\n  // normalized direction of the line\n  vec2 dir_screenspace = normalize(line_clipspace);\n  // rotate by 90 degrees\n   dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);\n   return reverse_offset_normal(vec3(dir_screenspace,1.0)).xy * sign(offset_direction);\n}\n\nvoid main() {\n  v_color = a_Color;\n\n  // cal style mapping - \u6570\u636e\u7eb9\u7406\u6620\u5c04\u90e8\u5206\u7684\u8ba1\u7b97\n  styleMappingMat = mat4(\n    0.0, 0.0, 0.0, 0.0, // opacity - strokeOpacity - strokeWidth - empty\n    0.0, 0.0, 0.0, 0.0, // strokeR - strokeG - strokeB - strokeA\n    0.0, 0.0, 0.0, 0.0, // offsets[0] - offsets[1]\n    0.0, 0.0, 0.0, 0.0  // dataset \u6570\u636e\u96c6\n  );\n\n  float rowCount = u_cellTypeLayout[0][0];    // \u5f53\u524d\u7684\u6570\u636e\u7eb9\u7406\u6709\u51e0\u884c\n  float columnCount = u_cellTypeLayout[0][1]; // \u5f53\u770b\u5230\u6570\u636e\u7eb9\u7406\u6709\u51e0\u5217\n  float columnWidth = 1.0/columnCount;  // \u5217\u5bbd\n  float rowHeight = 1.0/rowCount;       // \u884c\u9ad8\n  float cellCount = calCellCount(); // opacity - strokeOpacity - strokeWidth - stroke - offsets\n  float id = a_vertexId; // \u7b2cn\u4e2a\u9876\u70b9\n  float cellCurrentRow = floor(id * cellCount / columnCount) + 1.0; // \u8d77\u59cb\u70b9\u5728\u7b2c\u51e0\u884c\n  float cellCurrentColumn = mod(id * cellCount, columnCount) + 1.0; // \u8d77\u59cb\u70b9\u5728\u7b2c\u51e0\u5217\n  \n  // cell \u56fa\u5b9a\u987a\u5e8f opacity -> strokeOpacity -> strokeWidth -> stroke -> thetaOffset... \n  // \u6309\u987a\u5e8f\u4ece cell \u4e2d\u53d6\u503c\u3001\u82e5\u6ca1\u6709\u5219\u81ea\u52a8\u5f80\u4e0b\u53d6\u503c\n  float textureOffset = 0.0; // \u5728 cell \u4e2d\u53d6\u503c\u7684\u504f\u79fb\u91cf\n\n  vec2 opacityAndOffset = calOpacityAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);\n  styleMappingMat[0][0] = opacityAndOffset.r;\n  textureOffset = opacityAndOffset.g;\n\n  vec2 thetaOffsetAndOffset = calThetaOffsetAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);\n  styleMappingMat[0][1] = thetaOffsetAndOffset.r;\n  textureOffset = thetaOffsetAndOffset.g;\n  // cal style mapping - \u6570\u636e\u7eb9\u7406\u6620\u5c04\u90e8\u5206\u7684\u8ba1\u7b97\n\n  \n  vec2 source = a_Instance.rg;  // \u8d77\u59cb\u70b9\n  vec2 target =  a_Instance.ba; // \u7ec8\u70b9\n  float segmentIndex = a_Position.x;\n  float segmentRatio = getSegmentRatio(segmentIndex);\n\n  float indexDir = mix(-1.0, 1.0, step(segmentIndex, 0.0));\n  float nextSegmentRatio = getSegmentRatio(segmentIndex + indexDir);\n  float d_distance_ratio;\n  \n  if(u_animate.x == Animate) {\n      d_distance_ratio = segmentIndex / segmentNumber;\n      if(u_lineDir != 1.0) {\n        d_distance_ratio = 1.0 - d_distance_ratio;\n      }\n  }\n\n   styleMappingMat[3].b = d_distance_ratio;\n\n  // styleMappingMat[0][1] - arcThetaOffset\n  float arcThetaOffset = styleMappingMat[0][1];\n  vec4 curr = project_position(vec4(interpolate(source, target, segmentRatio, arcThetaOffset), 0.0, 1.0));\n  vec4 next = project_position(vec4(interpolate(source, target, nextSegmentRatio, arcThetaOffset), 0.0, 1.0));\n  // v_normal = getNormal((next.xy - curr.xy) * indexDir, a_Position.y);\n  //unProjCustomCoord\n  \n  vec2 offset = project_pixel(getExtrusionOffset((next.xy - curr.xy) * indexDir, a_Position.y));\n\n\n  float d_segmentIndex = a_Position.x + 1.0; // \u5f53\u524d\u9876\u70b9\u5728\u5f27\u7ebf\u4e2d\u6240\u5904\u7684\u5206\u6bb5\u4f4d\u7f6e\n  styleMappingMat[3].r = d_segmentIndex;\n\n  if(LineTexture == u_line_texture) { // \u5f00\u542f\u8d34\u56fe\u6a21\u5f0f\n\n    float arcDistrance = length(source - target); // \u8d77\u59cb\u70b9\u548c\u7ec8\u70b9\u7684\u8ddd\u79bb\n    if(u_CoordinateSystem == COORDINATE_SYSTEM_P20) { // amap\n      arcDistrance *= 1000000.0;\n    }\n    if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) { // mapbox\n      // arcDistrance *= 8.0;\n      arcDistrance = project_pixel_allmap(arcDistrance);\n    }\n    v_iconMapUV = a_iconMapUV;\n\n    float pixelLen = project_pixel_texture(u_icon_step); // \u8d34\u56fe\u6cbf\u5f27\u7ebf\u65b9\u5411\u7684\u957f\u5ea6 - \u968f\u5730\u56fe\u7f29\u653e\u6539\u53d8\n    float texCount = floor(arcDistrance/pixelLen); // \u8d34\u56fe\u5728\u5f27\u7ebf\u4e0a\u91cd\u590d\u7684\u6570\u91cf\n     styleMappingMat[3].g = texCount;\n\n    float lineOffsetWidth = length(offset + offset * sign(a_Position.y)); // \u7ebf\u6a2a\u5411\u504f\u79fb\u7684\u8ddd\u79bb\n    float linePixelSize = project_pixel(a_Size); // \u5b9a\u70b9\u4f4d\u7f6e\u504f\u79fb\n     styleMappingMat[3].a = lineOffsetWidth/linePixelSize; // \u7ebf\u56fe\u5c42\u8d34\u56fe\u90e8\u5206\u7684 v \u5750\u6807\u503c\n  }\n  \n\n  // gl_Position = project_common_position_to_clipspace(vec4(curr.xy + offset, 0, 1.0));\n  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x\n    // gl_Position = u_Mvp * (vec4(curr.xy + offset, 0, 1.0));\n    gl_Position = u_Mvp * (vec4(curr.xy + offset, 0, 1.0));\n  } else {\n    gl_Position = project_common_position_to_clipspace(vec4(curr.xy + offset, 0, 1.0));\n  }\n  setPickingColor(a_PickingColor);\n}\n',ux='#define Animate 0.0\n#define LineTexture 1.0\n\nuniform float u_opacity;\nuniform float u_textureBlend;\nuniform float u_blur : 0.9;\nuniform float u_line_type: 0.0;\n// varying vec2 v_normal;\nvarying vec4 v_dash_array;\nvarying vec4 v_color;\n\nuniform float u_time;\nuniform vec4 u_animate: [ 1., 2., 1.0, 0.2 ];\n\nuniform float u_line_texture;\nuniform sampler2D u_texture;\nuniform vec2 u_textSize;\n\nuniform float segmentNumber;\nvarying vec2 v_iconMapUV;\n\nvarying mat4 styleMappingMat; // \u4f20\u9012\u4ece\u7247\u5143\u4e2d\u4f20\u9012\u7684\u6620\u5c04\u6570\u636e\n\nuniform float u_linearColor: 0;\nuniform vec4 u_sourceColor;\nuniform vec4 u_targetColor;\n\n#pragma include "picking"\n\nvoid main() {\n  float opacity = styleMappingMat[0][0];\n  float d_segmentIndex = styleMappingMat[3].r;   // \u5f53\u524d\u9876\u70b9\u5728\u5f27\u7ebf\u4e2d\u6240\u5904\u7684\u5206\u6bb5\u4f4d\u7f6e\n\n  // \u8bbe\u7f6e\u5f27\u7ebf\u7684\u5e95\u8272\n  gl_FragColor = mix(u_sourceColor, u_targetColor, d_segmentIndex/segmentNumber);\n  gl_FragColor.a *= opacity;\n  gl_FragColor = filterColor(gl_FragColor);\n}',cx='\nattribute vec4 a_Color;\nattribute vec3 a_Position;\nattribute vec4 a_Instance;\nattribute float a_Size;\nuniform mat4 u_ModelMatrix;\nuniform mat4 u_Mvp;\nuniform float segmentNumber;\nvarying vec4 v_color;\n\nuniform float u_lineDir: 1.0;\n\nuniform float u_thetaOffset: 0.314;\n\nuniform float u_opacity: 1.0;\nvarying mat4 styleMappingMat; // \u7528\u4e8e\u5c06\u5728\u9876\u70b9\u7740\u8272\u5668\u4e2d\u8ba1\u7b97\u597d\u7684\u6837\u5f0f\u503c\u4f20\u9012\u7ed9\u7247\u5143\n\n#pragma include "styleMapping"\n#pragma include "styleMappingCalOpacity"\n#pragma include "styleMappingCalThetaOffset"\n\n#pragma include "projection"\n#pragma include "project"\n#pragma include "picking"\n\nfloat bezier3(vec3 arr, float t) {\n  float ut = 1. - t;\n  return (arr.x * ut + arr.y * t) * ut + (arr.y * ut + arr.z * t) * t;\n}\nvec2 midPoint(vec2 source, vec2 target, float arcThetaOffset) {\n  vec2 center = target - source;\n  float r = length(center);\n  float theta = atan(center.y, center.x);\n  float thetaOffset = arcThetaOffset;\n  float r2 = r / 2.0 / cos(thetaOffset);\n  float theta2 = theta + thetaOffset;\n  vec2 mid = vec2(r2*cos(theta2) + source.x, r2*sin(theta2) + source.y);\n  if(u_lineDir == 1.0) { // \u6b63\u5411\n    return mid;\n  } else { // \u9006\u5411\n    // (mid + vmin)/2 = (s + t)/2\n    vec2 vmid = source + target - mid;\n    return vmid;\n  }\n  // return mid;\n}\nfloat getSegmentRatio(float index) {\n    return smoothstep(0.0, 1.0, index / (segmentNumber - 1.));\n}\nvec2 interpolate (vec2 source, vec2 target, float t, float arcThetaOffset) {\n  // if the angularDist is PI, linear interpolation is applied. otherwise, use spherical interpolation\n  vec2 mid = midPoint(source, target, arcThetaOffset);\n  vec3 x = vec3(source.x, mid.x, target.x);\n  vec3 y = vec3(source.y, mid.y, target.y);\n  return vec2(bezier3(x ,t), bezier3(y,t));\n}\nvec2 getExtrusionOffset(vec2 line_clipspace, float offset_direction) {\n  // normalized direction of the line\n  vec2 dir_screenspace = normalize(line_clipspace);\n  // rotate by 90 degrees\n   dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);\n  vec2 offset = dir_screenspace * offset_direction * setPickingSize(a_Size) / 2.0;\n  return offset;\n}\nvec2 getNormal(vec2 line_clipspace, float offset_direction) {\n  // normalized direction of the line\n  vec2 dir_screenspace = normalize(line_clipspace);\n  // rotate by 90 degrees\n   dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);\n   return reverse_offset_normal(vec3(dir_screenspace,1.0)).xy * sign(offset_direction);\n}\n\nvoid main() {\n  v_color = a_Color;\n\n  // cal style mapping - \u6570\u636e\u7eb9\u7406\u6620\u5c04\u90e8\u5206\u7684\u8ba1\u7b97\n  styleMappingMat = mat4(\n    0.0, 0.0, 0.0, 0.0, // opacity - strokeOpacity - strokeWidth - empty\n    0.0, 0.0, 0.0, 0.0, // strokeR - strokeG - strokeB - strokeA\n    0.0, 0.0, 0.0, 0.0, // offsets[0] - offsets[1]\n    0.0, 0.0, 0.0, 0.0  // dataset \u6570\u636e\u96c6\n  );\n\n  float rowCount = u_cellTypeLayout[0][0];    // \u5f53\u524d\u7684\u6570\u636e\u7eb9\u7406\u6709\u51e0\u884c\n  float columnCount = u_cellTypeLayout[0][1]; // \u5f53\u770b\u5230\u6570\u636e\u7eb9\u7406\u6709\u51e0\u5217\n  float columnWidth = 1.0/columnCount;  // \u5217\u5bbd\n  float rowHeight = 1.0/rowCount;       // \u884c\u9ad8\n  float cellCount = calCellCount(); // opacity - strokeOpacity - strokeWidth - stroke - offsets\n  float id = a_vertexId; // \u7b2cn\u4e2a\u9876\u70b9\n  float cellCurrentRow = floor(id * cellCount / columnCount) + 1.0; // \u8d77\u59cb\u70b9\u5728\u7b2c\u51e0\u884c\n  float cellCurrentColumn = mod(id * cellCount, columnCount) + 1.0; // \u8d77\u59cb\u70b9\u5728\u7b2c\u51e0\u5217\n  \n  // cell \u56fa\u5b9a\u987a\u5e8f opacity -> strokeOpacity -> strokeWidth -> stroke -> thetaOffset... \n  // \u6309\u987a\u5e8f\u4ece cell \u4e2d\u53d6\u503c\u3001\u82e5\u6ca1\u6709\u5219\u81ea\u52a8\u5f80\u4e0b\u53d6\u503c\n  float textureOffset = 0.0; // \u5728 cell \u4e2d\u53d6\u503c\u7684\u504f\u79fb\u91cf\n\n  vec2 opacityAndOffset = calOpacityAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);\n  styleMappingMat[0][0] = opacityAndOffset.r;\n  textureOffset = opacityAndOffset.g;\n\n  vec2 thetaOffsetAndOffset = calThetaOffsetAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);\n  styleMappingMat[0][1] = thetaOffsetAndOffset.r;\n  textureOffset = thetaOffsetAndOffset.g;\n  // cal style mapping - \u6570\u636e\u7eb9\u7406\u6620\u5c04\u90e8\u5206\u7684\u8ba1\u7b97\n\n  \n  vec2 source = a_Instance.rg;  // \u8d77\u59cb\u70b9\n  vec2 target =  a_Instance.ba; // \u7ec8\u70b9\n  float segmentIndex = a_Position.x;\n  float segmentRatio = getSegmentRatio(segmentIndex);\n\n  float indexDir = mix(-1.0, 1.0, step(segmentIndex, 0.0));\n  float nextSegmentRatio = getSegmentRatio(segmentIndex + indexDir);\n  float d_distance_ratio;\n\n   styleMappingMat[3].b = d_distance_ratio;\n\n  // styleMappingMat[0][1] - arcThetaOffset\n  vec4 curr = project_position(vec4(interpolate(source, target, segmentRatio, styleMappingMat[0][1]), 0.0, 1.0));\n  vec4 next = project_position(vec4(interpolate(source, target, nextSegmentRatio, styleMappingMat[0][1]), 0.0, 1.0));\n  // v_normal = getNormal((next.xy - curr.xy) * indexDir, a_Position.y);\n  //unProjCustomCoord\n  \n  vec2 offset = project_pixel(getExtrusionOffset((next.xy - curr.xy) * indexDir, a_Position.y));\n\n\n  float d_segmentIndex = a_Position.x + 1.0; // \u5f53\u524d\u9876\u70b9\u5728\u5f27\u7ebf\u4e2d\u6240\u5904\u7684\u5206\u6bb5\u4f4d\u7f6e\n  styleMappingMat[3].r = d_segmentIndex;\n\n  // gl_Position = project_common_position_to_clipspace(vec4(curr.xy + offset, 0, 1.0));\n  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x\n    // gl_Position = u_Mvp * (vec4(curr.xy + offset, 0, 1.0));\n    gl_Position = u_Mvp * (vec4(curr.xy + offset, 0, 1.0));\n  } else {\n    gl_Position = project_common_position_to_clipspace(vec4(curr.xy + offset, 0, 1.0));\n  }\n  setPickingColor(a_PickingColor);\n}\n',lx={solid:0,dash:1},fx=function(t){Object(st["a"])(n,t);var e=nx(n);function n(){var t;Object(et["a"])(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return t=e.call.apply(e,[this].concat(i)),Object(Ar["a"])(Object(ft["a"])(t),"updateTexture",(function(){var e=t.rendererService.createTexture2D;if(t.texture)return t.texture.update({data:t.iconService.getCanvas()}),void t.layer.render();t.texture=e({data:t.iconService.getCanvas(),mag:Rp.NEAREST,min:Rp.NEAREST,premultiplyAlpha:!1,width:1024,height:t.iconService.canvasHeight||128})})),t}return Object(nt["a"])(n,[{key:"getUninforms",value:function(){var t=this.layer.getLayerConfig(),e=t.opacity,n=void 0===e?1:e,r=t.sourceColor,i=t.targetColor,o=t.textureBlend,a=void 0===o?"normal":o,s=t.lineType,u=void 0===s?"solid":s,c=t.dashArray,l=void 0===c?[10,5]:c,f=t.forward,h=void 0===f||f,p=t.lineTexture,d=void 0!==p&&p,v=t.iconStep,g=void 0===v?100:v,m=t.segmentNumber,y=void 0===m?30:m,_=t.thetaOffset,b=void 0===_?.314:_;if(this.dataTextureTest&&this.dataTextureNeedUpdate({opacity:n,thetaOffset:b})){this.judgeStyleAttributes({opacity:n,thetaOffset:b});var x=this.layer.getEncodedData(),w=this.calDataFrame(this.cellLength,x,this.cellProperties),E=w.data,S=w.width,O=w.height;this.rowCount=O,this.dataTexture=this.cellLength>0&&E.length>0?this.createTexture2D({flipY:!0,data:E,format:Rp.LUMINANCE,type:Rp.FLOAT,width:S,height:O}):this.createTexture2D({flipY:!0,data:[1],format:Rp.LUMINANCE,type:Rp.FLOAT,width:1,height:1})}2===l.length&&l.push(0,0);var C=0,T=[0,0,0,0],A=[0,0,0,0];return r&&i&&(T=li(r),A=li(i),C=1),this.rendererService.getDirty()&&this.texture.bind(),{u_dataTexture:this.dataTexture,u_cellTypeLayout:this.getCellTypeLayout(),u_thetaOffset:Object(K["isNumber"])(b)?b:0,u_opacity:Object(K["isNumber"])(n)?n:1,u_textureBlend:"normal"===a?0:1,segmentNumber:y,u_line_type:lx[u||"solid"],u_dash_array:l,u_blur:.9,u_lineDir:h?1:-1,u_texture:this.texture,u_line_texture:d?1:0,u_icon_step:g,u_textSize:[1024,this.iconService.canvasHeight||128],u_linearColor:C,u_sourceColor:T,u_targetColor:A}}},{key:"getAnimateUniforms",value:function(){var t=this.layer.getLayerConfig(),e=t.animateOption;return{u_animate:this.animateOption2Array(e),u_time:this.layer.getLayerAnimateTime()}}},{key:"initModels",value:function(){var t=Object(mi["a"])(_i.a.mark((function t(){return _i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.updateTexture(),this.iconService.on("imageUpdate",this.updateTexture),t.next=4,this.buildModels();case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"clearModels",value:function(){var t,e;null===(t=this.texture)||void 0===t||t.destroy(),null===(e=this.dataTexture)||void 0===e||e.destroy(),this.iconService.off("imageUpdate",this.updateTexture)}},{key:"getShaders",value:function(){var t=this.layer.getLayerConfig(),e=t.sourceColor,n=t.targetColor,r=t.lineType;return"dash"===r?{frag:ix,vert:ox,type:"Dash"}:e&&n?{frag:ux,vert:cx,type:"Linear"}:{frag:ax,vert:sx,type:""}}},{key:"buildModels",value:function(){var t=Object(mi["a"])(_i.a.mark((function t(){var e,n,r,i,o,a,s,u,c,l,f,h;return _i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=this.layer.getLayerConfig(),n=e.segmentNumber,r=void 0===n?30:n,i=e.mask,o=void 0!==i&&i,a=e.maskInside,s=void 0===a||a,u=this.getShaders(),c=u.frag,l=u.vert,f=u.type,t.next=4,this.layer.buildLayerModel({moduleName:"lineArc2d"+f,vertexShader:l,fragmentShader:c,triangulation:tx,depth:{enable:!1},blend:this.getBlend(),segmentNumber:r,stencil:gi(o,s)});case 4:return h=t.sent,t.abrupt("return",[h]);case 6:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"registerBuiltinAttributes",value:function(){var t=this;this.styleAttributeService.registerStyleAttribute({name:"size",type:ey.Attribute,descriptor:{name:"a_Size",buffer:{usage:Rp.DYNAMIC_DRAW,data:[],type:Rp.FLOAT},size:1,update:function(t){var e=t.size,n=void 0===e?1:e;return Array.isArray(n)?[n[0]]:[n]}}}),this.styleAttributeService.registerStyleAttribute({name:"instance",type:ey.Attribute,descriptor:{name:"a_Instance",buffer:{usage:Rp.STATIC_DRAW,data:[],type:Rp.FLOAT},size:4,update:function(t,e,n){return[n[3],n[4],n[5],n[6]]}}}),this.styleAttributeService.registerStyleAttribute({name:"uv",type:ey.Attribute,descriptor:{name:"a_iconMapUV",buffer:{usage:Rp.DYNAMIC_DRAW,data:[],type:Rp.FLOAT},size:2,update:function(e){var n=t.iconService.getIconMap(),r=e.texture,i=n[r]||{x:0,y:0},o=i.x,a=i.y;return[o,a]}}})}}]),n}(db);function hx(t){var e=px();return function(){var n,r=Object(ct["a"])(t);if(e){var i=Object(ct["a"])(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(ut["a"])(this,n)}}function px(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}var dx='#define LineTypeSolid 0.0\n#define LineTypeDash 1.0\n#define Animate 0.0\n#define LineTexture 1.0\n\nuniform float u_opacity;\nuniform float u_textureBlend;\nuniform float u_blur : 0.9;\nuniform float u_line_type: 0.0;\n// varying vec2 v_normal;\nvarying vec4 v_dash_array;\nvarying vec4 v_color;\n\nuniform float u_line_texture: 0.0;\nuniform sampler2D u_texture;\nuniform vec2 u_textSize;\nvarying float v_segmentIndex;\nuniform float segmentNumber;\n\nvarying vec2 v_iconMapUV;\n\nuniform float u_time;\nuniform vec4 u_animate: [ 1., 2., 1.0, 0.2 ];\n\nvarying mat4 styleMappingMat;\n\n#pragma include "picking"\n\nvoid main() {\n  float opacity = styleMappingMat[0][0];\n  float animateSpeed = 0.0; // \u8fd0\u52a8\u901f\u5ea6\n  float d_distance_ratio = styleMappingMat[3].g; // \u5f53\u524d\u70b9\u4f4d\u8ddd\u79bb\u5360\u7ebf\u603b\u957f\u7684\u6bd4\u4f8b\n  gl_FragColor = v_color;\n\n  gl_FragColor.a *= opacity;\n  if(u_line_type == LineTypeDash) {\n    float flag = 0.;\n    float dashLength = mod(d_distance_ratio, v_dash_array.x + v_dash_array.y + v_dash_array.z + v_dash_array.w);\n    if(dashLength < v_dash_array.x || (dashLength > (v_dash_array.x + v_dash_array.y) && dashLength <  v_dash_array.x + v_dash_array.y + v_dash_array.z)) {\n      flag = 1.;\n    }\n    gl_FragColor.a *=flag;\n  }\n\n  if(u_animate.x == Animate && u_line_texture != LineTexture) {\n      animateSpeed = u_time / u_animate.y;\n      float alpha =1.0 - fract( mod(1.0- d_distance_ratio, u_animate.z)* (1.0/ u_animate.z) + u_time / u_animate.y);\n\n      alpha = (alpha + u_animate.w -1.0) / u_animate.w;\n      // alpha = smoothstep(0., 1., alpha);\n      alpha = clamp(alpha, 0.0, 1.0);\n      gl_FragColor.a *= alpha;\n\n      // u_animate \n      // x enable\n      // y duration\n      // z interval\n      // w trailLength\n  }\n\n  if(u_line_texture == LineTexture && u_line_type != LineTypeDash) { // while load texture\n    // float arcRadio = smoothstep( 0.0, 1.0, (v_segmentIndex / segmentNumber));\n    float arcRadio = v_segmentIndex / (segmentNumber - 1.0);\n    float count = styleMappingMat[3].b; // // \u8d34\u56fe\u5728\u5f27\u7ebf\u4e0a\u91cd\u590d\u7684\u6570\u91cf\n\n    float time = 0.0;\n    if(u_animate.x == Animate) {\n      time = u_time / u_animate.y;\n    }\n    float redioCount = arcRadio * count;\n\n    float u = fract(redioCount - time);\n\n    float v = styleMappingMat[3].a;  // \u7ebf\u56fe\u5c42\u8d34\u56fe\u90e8\u5206\u7684 v \u5750\u6807\u503c\n    vec2 uv= v_iconMapUV / u_textSize + vec2(u, v) / u_textSize * 64.;\n    vec4 pattern = texture2D(u_texture, uv);\n\n    if(u_animate.x == Animate) {\n      float currentPlane = floor(redioCount - time);\n      float textureStep = floor(count * u_animate.z);\n      float a = mod(currentPlane, textureStep);\n      if(a < textureStep - 1.0) {\n        pattern = vec4(0.0);\n      }\n    }\n\n    if(u_textureBlend == 0.0) { // normal\n      pattern.a = 0.0;\n      gl_FragColor = filterColor(gl_FragColor + pattern);\n    } else { // replace\n        pattern.a *= opacity;\n        if(gl_FragColor.a <= 0.0) {\n          pattern.a = 0.0;\n          discard;\n        } else {\n          gl_FragColor = filterColor(pattern);\n        }\n    }\n\n  } else {\n    gl_FragColor = filterColor(gl_FragColor);\n  }\n}\n',vx='#define LineTypeSolid 0.0\n#define LineTypeDash 1.0\n#define Animate 0.0\n#define LineTexture 1.0\nattribute vec3 a_Position;\nattribute vec4 a_Instance;\nattribute vec4 a_Color;\nattribute float a_Size;\n\nuniform float u_globel;\nuniform float u_globel_radius;\nuniform float u_global_height: 10;\nuniform mat4 u_ModelMatrix;\nuniform mat4 u_Mvp;\nuniform float segmentNumber;\nuniform vec4 u_animate: [ 1., 2., 1.0, 0.2 ];\nvarying vec4 v_color;\n\nuniform float u_line_type: 0.0;\nuniform vec4 u_dash_array: [10.0, 5., 0, 0];\nvarying vec4 v_dash_array;\n\nuniform float u_icon_step: 100;\nuniform float u_line_texture: 0.0;\nvarying float v_segmentIndex;\n\nattribute vec2 a_iconMapUV;\nvarying vec2 v_iconMapUV;\n\nuniform float u_opacity: 1.0;\nvarying mat4 styleMappingMat; // \u7528\u4e8e\u5c06\u5728\u9876\u70b9\u7740\u8272\u5668\u4e2d\u8ba1\u7b97\u597d\u7684\u6837\u5f0f\u503c\u4f20\u9012\u7ed9\u7247\u5143\n\n#pragma include "styleMapping"\n#pragma include "styleMappingCalOpacity"\n\n#pragma include "projection"\n#pragma include "project"\n#pragma include "picking"\n\nfloat maps (float value, float start1, float stop1, float start2, float stop2) {\n  return start2 + (stop2 - start2) * ((value - start1) / (stop1 - start1));\n}\n\nfloat getSegmentRatio(float index) {\n  return smoothstep(0.0, 1.0, index / (segmentNumber - 1.0));\n}\n\nfloat paraboloid(vec2 source, vec2 target, float ratio) {\n  vec2 x = mix(source, target, ratio);\n  vec2 center = mix(source, target, 0.5);\n  float dSourceCenter = distance(source, center);\n  float dXCenter = distance(x, center);\n  return (dSourceCenter + dXCenter) * (dSourceCenter - dXCenter);\n}\n\nvec3 getPos(vec2 source, vec2 target, float segmentRatio) {\n  float vertex_height = paraboloid(source, target, segmentRatio);\n\n  return vec3(\n    mix(source, target, segmentRatio),\n    sqrt(max(0.0, vertex_height))\n  );\n}\nvec2 getExtrusionOffset(vec2 line_clipspace, float offset_direction) {\n  // normalized direction of the line\n  vec2 dir_screenspace = normalize(line_clipspace);\n  // rotate by 90 degrees\n  dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);\n\n  vec2 offset = dir_screenspace * offset_direction * setPickingSize(a_Size) / 2.0;\n\n  return offset;\n}\nvec2 getNormal(vec2 line_clipspace, float offset_direction) {\n  // normalized direction of the line\n  vec2 dir_screenspace = normalize(line_clipspace);\n  // rotate by 90 degrees\n  dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);\n  return reverse_offset_normal(vec3(dir_screenspace,1.0)).xy * sign(offset_direction);\n}\n\nfloat torad(float deg) {\n  return (deg / 180.0) * acos(-1.0);\n}\n\nvec3 lglt2xyz(vec2 lnglat) {\n  float pi = 3.1415926;\n  // + Math.PI/2 \u662f\u4e3a\u4e86\u5bf9\u9f50\u5750\u6807\n  float lng = torad(lnglat.x) + pi / 2.0;\n  float lat = torad(lnglat.y);\n\n  // \u624b\u52a8\u589e\u52a0\u4e00\u4e9b\u504f\u79fb\uff0c\u51cf\u8f7b\u9762\u7684\u51b2\u7a81\n  float radius = u_globel_radius;\n\n  float z = radius * cos(lat) * cos(lng);\n  float x = radius * cos(lat) * sin(lng);\n  float y = radius * sin(lat);\n  return vec3(x, y, z);\n}\n\nvoid main() {\n  // cal style mapping - \u6570\u636e\u7eb9\u7406\u6620\u5c04\u90e8\u5206\u7684\u8ba1\u7b97\n  styleMappingMat = mat4(\n    0.0, 0.0, 0.0, 0.0, // opacity - strokeOpacity - strokeWidth - empty\n    0.0, 0.0, 0.0, 0.0, // strokeR - strokeG - strokeB - strokeA\n    0.0, 0.0, 0.0, 0.0, // offsets[0] - offsets[1]\n    0.0, 0.0, 0.0, 0.0  // dataset \u6570\u636e\u96c6\n  );\n\n  float rowCount = u_cellTypeLayout[0][0];    // \u5f53\u524d\u7684\u6570\u636e\u7eb9\u7406\u6709\u51e0\u884c\n  float columnCount = u_cellTypeLayout[0][1]; // \u5f53\u770b\u5230\u6570\u636e\u7eb9\u7406\u6709\u51e0\u5217\n  float columnWidth = 1.0/columnCount;  // \u5217\u5bbd\n  float rowHeight = 1.0/rowCount;       // \u884c\u9ad8\n  float cellCount = calCellCount(); // opacity - strokeOpacity - strokeWidth - stroke - offsets\n  float id = a_vertexId; // \u7b2cn\u4e2a\u9876\u70b9\n  float cellCurrentRow = floor(id * cellCount / columnCount) + 1.0; // \u8d77\u59cb\u70b9\u5728\u7b2c\u51e0\u884c\n  float cellCurrentColumn = mod(id * cellCount, columnCount) + 1.0; // \u8d77\u59cb\u70b9\u5728\u7b2c\u51e0\u5217\n  \n  // cell \u56fa\u5b9a\u987a\u5e8f opacity -> strokeOpacity -> strokeWidth -> stroke ... \n  // \u6309\u987a\u5e8f\u4ece cell \u4e2d\u53d6\u503c\u3001\u82e5\u6ca1\u6709\u5219\u81ea\u52a8\u5f80\u4e0b\u53d6\u503c\n  float textureOffset = 0.0; // \u5728 cell \u4e2d\u53d6\u503c\u7684\u504f\u79fb\u91cf\n\n  vec2 opacityAndOffset = calOpacityAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);\n  styleMappingMat[0][0] = opacityAndOffset.r;\n  textureOffset = opacityAndOffset.g;\n  // cal style mapping - \u6570\u636e\u7eb9\u7406\u6620\u5c04\u90e8\u5206\u7684\u8ba1\u7b97\n\n  v_color = a_Color;\n  vec2 source = project_position(vec4(a_Instance.rg, 0, 0)).xy;\n  vec2 target = project_position(vec4(a_Instance.ba, 0, 0)).xy;\n  float segmentIndex = a_Position.x;\n  float segmentRatio = getSegmentRatio(segmentIndex);\n  float indexDir = mix(-1.0, 1.0, step(segmentIndex, 0.0));\n\n  float d_distance_ratio;\n   if(u_line_type == LineTypeDash) {\n    d_distance_ratio = segmentIndex / segmentNumber;\n    vec2 s = source;\n    vec2 t = target;\n    \n    if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x\n      s = unProjCustomCoord(source);\n      t = unProjCustomCoord(target);\n    }\n    float total_Distance = pixelDistance(s, t) / 2.0 * PI;\n    v_dash_array = pow(2.0, 20.0 - u_Zoom) * u_dash_array / (total_Distance / segmentNumber * segmentIndex);\n  }\n    if(u_animate.x == Animate) {\n      d_distance_ratio = segmentIndex / segmentNumber;\n  }\n  styleMappingMat[3].g = d_distance_ratio; // \u5f53\u524d\u70b9\u4f4d\u8ddd\u79bb\u5360\u7ebf\u603b\u957f\u7684\u6bd4\u4f8b\n\n  float nextSegmentRatio = getSegmentRatio(segmentIndex + indexDir);\n  vec3 curr = getPos(source, target, segmentRatio);\n  vec3 next = getPos(source, target, nextSegmentRatio);\n  vec2 offset = getExtrusionOffset((next.xy - curr.xy) * indexDir, a_Position.y);\n  // v_normal = getNormal((next.xy - curr.xy) * indexDir, a_Position.y);\n\n\n  v_segmentIndex = a_Position.x;\n  if(LineTexture == u_line_texture && u_line_type != LineTypeDash) { // \u5f00\u542f\u8d34\u56fe\u6a21\u5f0f  \n\n    float arcDistrance = length(source - target);\n    float pixelLen =  project_pixel_texture(u_icon_step);\n    styleMappingMat[3].b = floor(arcDistrance/pixelLen); // \u8d34\u56fe\u5728\u5f27\u7ebf\u4e0a\u91cd\u590d\u7684\u6570\u91cf\n\n    vec2 projectOffset = project_pixel(offset);\n    float lineOffsetWidth = length(projectOffset + projectOffset * sign(a_Position.y)); // \u7ebf\u6a2a\u5411\u504f\u79fb\u7684\u8ddd\u79bb\n    float linePixelSize = project_pixel(a_Size);  // \u5b9a\u70b9\u4f4d\u7f6e\u504f\u79fb\uff0c\u6309\u5730\u56fe\u7b49\u7ea7\u7f29\u653e\u540e\u7684\u8ddd\u79bb\n    styleMappingMat[3].a = lineOffsetWidth/linePixelSize;  // \u7ebf\u56fe\u5c42\u8d34\u56fe\u90e8\u5206\u7684 v \u5750\u6807\u503c\n\n    v_iconMapUV = a_iconMapUV;\n  }\n  \n\n  // gl_Position = project_common_position_to_clipspace(vec4(curr.xy + project_pixel(offset), curr.z, 1.0));\n  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x\n    gl_Position = u_Mvp * (vec4(curr.xy + project_pixel(offset), curr.z, 1.0));\n  } else {\n    gl_Position = project_common_position_to_clipspace(vec4(curr.xy + project_pixel(offset), curr.z, 1.0));\n  }\n\n  // \u5730\u7403\u6a21\u5f0f\n  if(u_globel > 0.0) {\n    vec3 startLngLat = lglt2xyz(a_Instance.rg);\n    vec3 endLngLat = lglt2xyz(a_Instance.ba);\n    float globalRadius = length(startLngLat);\n\n    vec3 lineDir = normalize(endLngLat - startLngLat);\n    vec3 midPointDir = normalize((startLngLat + endLngLat)/2.0);\n\n    // \u7ebf\u7684\u504f\u79fb\n    vec3 lnglatOffset = cross(lineDir, midPointDir) * a_Position.y;\n    // \u8ba1\u7b97\u8d77\u59cb\u70b9\u548c\u7ec8\u6b62\u70b9\u7684\u8ddd\u79bb\n    float lnglatLength = length(a_Instance.rg - a_Instance.ba)/50.0;\n    // \u8ba1\u7b97\u98de\u7ebf\u5404\u4e2a\u8282\u70b9\u76f8\u5e94\u7684\u9ad8\u5ea6\n    float lineHeight = u_global_height * (-4.0*segmentRatio*segmentRatio + 4.0 * segmentRatio) * lnglatLength;\n    // \u5730\u7403\u70b9\u4f4d\n    vec3 globalPoint = normalize(mix(startLngLat, endLngLat, segmentRatio)) * (globalRadius + lineHeight) + lnglatOffset * a_Size;\n    \n    gl_Position = u_ViewProjectionMatrix * vec4(globalPoint, 1.0);\n  }\n \n\n  setPickingColor(a_PickingColor);\n}\n',gx='\n#define Animate 0.0\n\nuniform float u_opacity;\nuniform float u_blur : 0.9;\nvarying float v_segmentIndex;\nuniform float segmentNumber;\n\nuniform float u_time;\nuniform vec4 u_animate: [ 1., 2., 1.0, 0.2 ];\n\nuniform float u_linearColor: 0;\nuniform vec4 u_sourceColor;\nuniform vec4 u_targetColor;\n\nvarying mat4 styleMappingMat;\n\n#pragma include "picking"\n\nvoid main() {\n  float opacity = styleMappingMat[0][0];\n  float animateSpeed = 0.0; // \u8fd0\u52a8\u901f\u5ea6\n  float d_distance_ratio = styleMappingMat[3].g; // \u5f53\u524d\u70b9\u4f4d\u8ddd\u79bb\u5360\u7ebf\u603b\u957f\u7684\u6bd4\u4f8b\n\n  gl_FragColor = mix(u_sourceColor, u_targetColor, v_segmentIndex/segmentNumber);\n\n  gl_FragColor.a *= opacity;\n\n  if(u_animate.x == Animate) {\n      animateSpeed = u_time / u_animate.y;\n      float alpha =1.0 - fract( mod(1.0- d_distance_ratio, u_animate.z)* (1.0/ u_animate.z) + u_time / u_animate.y);\n\n      alpha = (alpha + u_animate.w -1.0) / u_animate.w;\n      // alpha = smoothstep(0., 1., alpha);\n      alpha = clamp(alpha, 0.0, 1.0);\n      gl_FragColor.a *= alpha;\n\n      // u_animate \n      // x enable\n      // y duration\n      // z interval\n      // w trailLength\n  }\n\n  gl_FragColor = filterColor(gl_FragColor);\n}\n',mx='#define LineTypeSolid 0.0\n#define LineTypeDash 1.0\n#define Animate 0.0\n#define LineTexture 1.0\nattribute vec3 a_Position;\nattribute vec4 a_Instance;\nattribute vec4 a_Color;\nattribute float a_Size;\nattribute vec2 a_iconMapUV;\n\nuniform float u_globel;\nuniform float u_globel_radius;\nuniform float u_global_height: 10;\nuniform mat4 u_ModelMatrix;\nuniform mat4 u_Mvp;\nuniform float segmentNumber;\nuniform vec4 u_animate: [ 1., 2., 1.0, 0.2 ];\n\nuniform float u_line_type: 0.0;\nuniform vec4 u_dash_array: [10.0, 5., 0, 0];\nuniform float u_icon_step: 100;\nuniform float u_line_texture: 0.0;\nuniform float u_opacity: 1.0;\n\nvarying vec4 v_dash_array;\nvarying vec4 v_color;\nvarying float v_segmentIndex;\nvarying vec2 v_iconMapUV;\nvarying mat4 styleMappingMat; // \u7528\u4e8e\u5c06\u5728\u9876\u70b9\u7740\u8272\u5668\u4e2d\u8ba1\u7b97\u597d\u7684\u6837\u5f0f\u503c\u4f20\u9012\u7ed9\u7247\u5143\n\n\n#pragma include "styleMapping"\n#pragma include "styleMappingCalOpacity"\n\n#pragma include "projection"\n#pragma include "project"\n#pragma include "picking"\n\nfloat maps (float value, float start1, float stop1, float start2, float stop2) {\n  return start2 + (stop2 - start2) * ((value - start1) / (stop1 - start1));\n}\n\nfloat getSegmentRatio(float index) {\n  return smoothstep(0.0, 1.0, index / (segmentNumber - 1.0));\n}\n\nfloat paraboloid(vec2 source, vec2 target, float ratio) {\n  vec2 x = mix(source, target, ratio);\n  vec2 center = mix(source, target, 0.5);\n  float dSourceCenter = distance(source, center);\n  float dXCenter = distance(x, center);\n  return (dSourceCenter + dXCenter) * (dSourceCenter - dXCenter);\n}\n\nvec3 getPos(vec2 source, vec2 target, float segmentRatio) {\n  float vertex_height = paraboloid(source, target, segmentRatio);\n\n  return vec3(\n    mix(source, target, segmentRatio),\n    sqrt(max(0.0, vertex_height))\n  );\n}\nvec2 getExtrusionOffset(vec2 line_clipspace, float offset_direction) {\n  // normalized direction of the line\n  vec2 dir_screenspace = normalize(line_clipspace);\n  // rotate by 90 degrees\n  dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);\n\n  vec2 offset = dir_screenspace * offset_direction * setPickingSize(a_Size) / 2.0;\n\n  return offset;\n}\nvec2 getNormal(vec2 line_clipspace, float offset_direction) {\n  // normalized direction of the line\n  vec2 dir_screenspace = normalize(line_clipspace);\n  // rotate by 90 degrees\n  dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);\n  return reverse_offset_normal(vec3(dir_screenspace,1.0)).xy * sign(offset_direction);\n}\n\nfloat torad(float deg) {\n  return (deg / 180.0) * acos(-1.0);\n}\n\nvec3 lglt2xyz(vec2 lnglat) {\n  float pi = 3.1415926;\n  // + Math.PI/2 \u662f\u4e3a\u4e86\u5bf9\u9f50\u5750\u6807\n  float lng = torad(lnglat.x) + pi / 2.0;\n  float lat = torad(lnglat.y);\n\n  // \u624b\u52a8\u589e\u52a0\u4e00\u4e9b\u504f\u79fb\uff0c\u51cf\u8f7b\u9762\u7684\u51b2\u7a81\n  float radius = u_globel_radius;\n\n  float z = radius * cos(lat) * cos(lng);\n  float x = radius * cos(lat) * sin(lng);\n  float y = radius * sin(lat);\n  return vec3(x, y, z);\n}\n\nvoid main() {\n  // cal style mapping - \u6570\u636e\u7eb9\u7406\u6620\u5c04\u90e8\u5206\u7684\u8ba1\u7b97\n  styleMappingMat = mat4(\n    0.0, 0.0, 0.0, 0.0, // opacity - strokeOpacity - strokeWidth - empty\n    0.0, 0.0, 0.0, 0.0, // strokeR - strokeG - strokeB - strokeA\n    0.0, 0.0, 0.0, 0.0, // offsets[0] - offsets[1]\n    0.0, 0.0, 0.0, 0.0  // dataset \u6570\u636e\u96c6\n  );\n\n  float rowCount = u_cellTypeLayout[0][0];    // \u5f53\u524d\u7684\u6570\u636e\u7eb9\u7406\u6709\u51e0\u884c\n  float columnCount = u_cellTypeLayout[0][1]; // \u5f53\u770b\u5230\u6570\u636e\u7eb9\u7406\u6709\u51e0\u5217\n  float columnWidth = 1.0/columnCount;  // \u5217\u5bbd\n  float rowHeight = 1.0/rowCount;       // \u884c\u9ad8\n  float cellCount = calCellCount(); // opacity - strokeOpacity - strokeWidth - stroke - offsets\n  float id = a_vertexId; // \u7b2cn\u4e2a\u9876\u70b9\n  float cellCurrentRow = floor(id * cellCount / columnCount) + 1.0; // \u8d77\u59cb\u70b9\u5728\u7b2c\u51e0\u884c\n  float cellCurrentColumn = mod(id * cellCount, columnCount) + 1.0; // \u8d77\u59cb\u70b9\u5728\u7b2c\u51e0\u5217\n  \n  // cell \u56fa\u5b9a\u987a\u5e8f opacity -> strokeOpacity -> strokeWidth -> stroke ... \n  // \u6309\u987a\u5e8f\u4ece cell \u4e2d\u53d6\u503c\u3001\u82e5\u6ca1\u6709\u5219\u81ea\u52a8\u5f80\u4e0b\u53d6\u503c\n  float textureOffset = 0.0; // \u5728 cell \u4e2d\u53d6\u503c\u7684\u504f\u79fb\u91cf\n\n  vec2 opacityAndOffset = calOpacityAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);\n  styleMappingMat[0][0] = opacityAndOffset.r;\n  textureOffset = opacityAndOffset.g;\n  // cal style mapping - \u6570\u636e\u7eb9\u7406\u6620\u5c04\u90e8\u5206\u7684\u8ba1\u7b97\n\n  v_color = a_Color;\n  vec2 source = project_position(vec4(a_Instance.rg, 0, 0)).xy;\n  vec2 target = project_position(vec4(a_Instance.ba, 0, 0)).xy;\n  float segmentIndex = a_Position.x;\n  float segmentRatio = getSegmentRatio(segmentIndex);\n  float indexDir = mix(-1.0, 1.0, step(segmentIndex, 0.0));\n\n  float d_distance_ratio;\n   if(u_line_type == LineTypeDash) {\n    d_distance_ratio = segmentIndex / segmentNumber;\n    // float total_Distance = pixelDistance(a_Instance.rg, a_Instance.ba) / 2.0 * PI;\n    vec2 s = source;\n    vec2 t = target;\n    \n    if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x\n      s = unProjCustomCoord(source);\n      t = unProjCustomCoord(target);\n    }\n    float total_Distance = pixelDistance(s, t) / 2.0 * PI;\n    v_dash_array = pow(2.0, 20.0 - u_Zoom) * u_dash_array / (total_Distance / segmentNumber * segmentIndex);\n  }\n    if(u_animate.x == Animate) {\n      d_distance_ratio = segmentIndex / segmentNumber;\n  }\n  styleMappingMat[3].g = d_distance_ratio; // \u5f53\u524d\u70b9\u4f4d\u8ddd\u79bb\u5360\u7ebf\u603b\u957f\u7684\u6bd4\u4f8b\n\n  float nextSegmentRatio = getSegmentRatio(segmentIndex + indexDir);\n  vec3 curr = getPos(source, target, segmentRatio);\n  vec3 next = getPos(source, target, nextSegmentRatio);\n  vec2 offset = getExtrusionOffset((next.xy - curr.xy) * indexDir, a_Position.y);\n  // v_normal = getNormal((next.xy - curr.xy) * indexDir, a_Position.y);\n\n\n  v_segmentIndex = a_Position.x;\n  if(LineTexture == u_line_texture && u_line_type != LineTypeDash) { // \u5f00\u542f\u8d34\u56fe\u6a21\u5f0f  \n\n    float arcDistrance = length(source - target);\n    float pixelLen =  project_pixel_texture(u_icon_step);\n    styleMappingMat[3].b = floor(arcDistrance/pixelLen); // \u8d34\u56fe\u5728\u5f27\u7ebf\u4e0a\u91cd\u590d\u7684\u6570\u91cf\n\n    vec2 projectOffset = project_pixel(offset);\n    float lineOffsetWidth = length(projectOffset + projectOffset * sign(a_Position.y)); // \u7ebf\u6a2a\u5411\u504f\u79fb\u7684\u8ddd\u79bb\n    float linePixelSize = project_pixel(a_Size);  // \u5b9a\u70b9\u4f4d\u7f6e\u504f\u79fb\uff0c\u6309\u5730\u56fe\u7b49\u7ea7\u7f29\u653e\u540e\u7684\u8ddd\u79bb\n    styleMappingMat[3].a = lineOffsetWidth/linePixelSize;  // \u7ebf\u56fe\u5c42\u8d34\u56fe\u90e8\u5206\u7684 v \u5750\u6807\u503c\n\n    v_iconMapUV = a_iconMapUV;\n  }\n  \n\n  // gl_Position = project_common_position_to_clipspace(vec4(curr.xy + project_pixel(offset), curr.z, 1.0));\n  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x\n    gl_Position = u_Mvp * (vec4(curr.xy + project_pixel(offset), curr.z, 1.0));\n  } else {\n    gl_Position = project_common_position_to_clipspace(vec4(curr.xy + project_pixel(offset), curr.z, 1.0));\n  }\n\n  // \u5730\u7403\u6a21\u5f0f\n  if(u_globel > 0.0) {\n    vec3 startLngLat = lglt2xyz(a_Instance.rg);\n    vec3 endLngLat = lglt2xyz(a_Instance.ba);\n    float globalRadius = length(startLngLat);\n\n    vec3 lineDir = normalize(endLngLat - startLngLat);\n    vec3 midPointDir = normalize((startLngLat + endLngLat)/2.0);\n\n    // \u7ebf\u7684\u504f\u79fb\n    vec3 lnglatOffset = cross(lineDir, midPointDir) * a_Position.y;\n    // \u8ba1\u7b97\u8d77\u59cb\u70b9\u548c\u7ec8\u6b62\u70b9\u7684\u8ddd\u79bb\n    float lnglatLength = length(a_Instance.rg - a_Instance.ba)/50.0;\n    // \u8ba1\u7b97\u98de\u7ebf\u5404\u4e2a\u8282\u70b9\u76f8\u5e94\u7684\u9ad8\u5ea6\n    float lineHeight = u_global_height * (-4.0*segmentRatio*segmentRatio + 4.0 * segmentRatio) * lnglatLength;\n    // \u5730\u7403\u70b9\u4f4d\n    vec3 globalPoint = normalize(mix(startLngLat, endLngLat, segmentRatio)) * (globalRadius + lineHeight) + lnglatOffset * a_Size;\n    \n    gl_Position = u_ViewProjectionMatrix * vec4(globalPoint, 1.0);\n  }\n \n\n  setPickingColor(a_PickingColor);\n}\n',yx={solid:0,dash:1},_x=function(t){Object(st["a"])(n,t);var e=hx(n);function n(){var t;Object(et["a"])(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return t=e.call.apply(e,[this].concat(i)),Object(Ar["a"])(Object(ft["a"])(t),"updateTexture",(function(){var e=t.rendererService.createTexture2D;if(t.texture)return t.texture.update({data:t.iconService.getCanvas()}),void t.layer.render();t.texture=e({data:t.iconService.getCanvas(),mag:Rp.NEAREST,min:Rp.NEAREST,premultiplyAlpha:!1,width:1024,height:t.iconService.canvasHeight||128})})),t}return Object(nt["a"])(n,[{key:"getUninforms",value:function(){var t=this.layer.getLayerConfig(),e=t.opacity,n=void 0===e?1:e,r=t.sourceColor,i=t.targetColor,o=t.textureBlend,a=void 0===o?"normal":o,s=t.lineType,u=void 0===s?"solid":s,c=t.dashArray,l=void 0===c?[10,5]:c,f=t.lineTexture,h=void 0!==f&&f,p=t.iconStep,d=void 0===p?100:p,v=t.segmentNumber,g=void 0===v?30:v,m=t.globalArcHeight,y=void 0===m?10:m;2===l.length&&l.push(0,0);var _=0,b=[0,0,0,0],x=[0,0,0,0];if(r&&i&&(b=li(r),x=li(i),_=1),this.rendererService.getDirty()&&this.texture.bind(),this.dataTextureTest&&this.dataTextureNeedUpdate({opacity:n})){this.judgeStyleAttributes({opacity:n});var w=this.layer.getEncodedData(),E=this.calDataFrame(this.cellLength,w,this.cellProperties),S=E.data,O=E.width,C=E.height;this.rowCount=C,this.dataTexture=this.cellLength>0&&S.length>0?this.createTexture2D({flipY:!0,data:S,format:Rp.LUMINANCE,type:Rp.FLOAT,width:O,height:C}):this.createTexture2D({flipY:!0,data:[1],format:Rp.LUMINANCE,type:Rp.FLOAT,width:1,height:1})}return{u_globel:"GLOBEL"===this.mapService.version?1:0,u_globel_radius:vb,u_global_height:y,u_dataTexture:this.dataTexture,u_cellTypeLayout:this.getCellTypeLayout(),u_opacity:Object(K["isNumber"])(n)?n:1,u_textureBlend:"normal"===a?0:1,segmentNumber:g,u_line_type:yx[u]||0,u_dash_array:l,u_texture:this.texture,u_line_texture:h?1:0,u_icon_step:d,u_textSize:[1024,this.iconService.canvasHeight||128],u_linearColor:_,u_sourceColor:b,u_targetColor:x}}},{key:"getAnimateUniforms",value:function(){var t=this.layer.getLayerConfig(),e=t.animateOption;return{u_animate:this.animateOption2Array(e),u_time:this.layer.getLayerAnimateTime()}}},{key:"initModels",value:function(){var t=Object(mi["a"])(_i.a.mark((function t(){return _i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.updateTexture(),this.iconService.on("imageUpdate",this.updateTexture),t.next=4,this.buildModels();case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"clearModels",value:function(){var t,e;null===(t=this.texture)||void 0===t||t.destroy(),null===(e=this.dataTexture)||void 0===e||e.destroy(),this.iconService.off("imageUpdate",this.updateTexture)}},{key:"getShaders",value:function(){var t=this.layer.getLayerConfig(),e=t.sourceColor,n=t.targetColor;return e&&n?{frag:gx,vert:mx,type:"Linear"}:{frag:dx,vert:vx,type:""}}},{key:"buildModels",value:function(){var t=Object(mi["a"])(_i.a.mark((function t(){var e,n,r,i,o,a,s,u,c,l,f,h;return _i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=this.layer.getLayerConfig(),n=e.segmentNumber,r=void 0===n?30:n,i=e.mask,o=void 0!==i&&i,a=e.maskInside,s=void 0===a||a,u=this.getShaders(),c=u.frag,l=u.vert,f=u.type,t.next=4,this.layer.buildLayerModel({moduleName:"lineArc3d"+f,vertexShader:l,fragmentShader:c,triangulation:tx,blend:this.getBlend(),segmentNumber:r,stencil:gi(o,s)});case 4:return h=t.sent,t.abrupt("return",[h]);case 6:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"registerBuiltinAttributes",value:function(){var t=this;this.styleAttributeService.registerStyleAttribute({name:"size",type:ey.Attribute,descriptor:{name:"a_Size",buffer:{usage:Rp.DYNAMIC_DRAW,data:[],type:Rp.FLOAT},size:1,update:function(t){var e=t.size,n=void 0===e?1:e;return Array.isArray(n)?[n[0]]:[n]}}}),this.styleAttributeService.registerStyleAttribute({name:"instance",type:ey.Attribute,descriptor:{name:"a_Instance",buffer:{usage:Rp.STATIC_DRAW,data:[],type:Rp.FLOAT},size:4,update:function(t,e,n){return[n[3],n[4],n[5],n[6]]}}}),this.styleAttributeService.registerStyleAttribute({name:"uv",type:ey.Attribute,descriptor:{name:"a_iconMapUV",buffer:{usage:Rp.DYNAMIC_DRAW,data:[],type:Rp.FLOAT},size:2,update:function(e){var n=t.iconService.getIconMap(),r=e.texture,i=n[r]||{x:0,y:0},o=i.x,a=i.y;return[o,a]}}})}}]),n}(db);function bx(t){var e=xx();return function(){var n,r=Object(ct["a"])(t);if(e){var i=Object(ct["a"])(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(ut["a"])(this,n)}}function xx(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}var Ex='#define LineTypeSolid 0.0\n#define LineTypeDash 1.0\n#define Animate 0.0\n#define LineTexture 1.0\n\nuniform float u_opacity;\nuniform float u_textureBlend;\nuniform float u_blur : 0.9;\nuniform float u_line_type: 0.0;\n// varying vec2 v_normal;\nvarying vec4 v_dash_array;\nvarying vec4 v_color;\n\nuniform float u_line_texture: 0.0;\nuniform sampler2D u_texture;\nuniform vec2 u_textSize;\nvarying float v_segmentIndex;\nuniform float segmentNumber;\n\nvarying vec2 v_iconMapUV;\n\nuniform float u_time;\nuniform vec4 u_animate: [ 1., 2., 1.0, 0.2 ];\n\nvarying mat4 styleMappingMat;\n\n#pragma include "picking"\n\nvoid main() {\n  float opacity = styleMappingMat[0][0];\n  float animateSpeed = 0.0; // \u8fd0\u52a8\u901f\u5ea6\n  float d_distance_ratio = styleMappingMat[3].g; // \u5f53\u524d\u70b9\u4f4d\u8ddd\u79bb\u5360\u7ebf\u603b\u957f\u7684\u6bd4\u4f8b\n  gl_FragColor = v_color;\n\n  gl_FragColor.a *= opacity;\n  if(u_line_type == LineTypeDash) {\n    float flag = 0.;\n    float dashLength = mod(d_distance_ratio, v_dash_array.x + v_dash_array.y + v_dash_array.z + v_dash_array.w);\n    if(dashLength < v_dash_array.x || (dashLength > (v_dash_array.x + v_dash_array.y) && dashLength <  v_dash_array.x + v_dash_array.y + v_dash_array.z)) {\n      flag = 1.;\n    }\n    gl_FragColor.a *=flag;\n  }\n\n  if(u_animate.x == Animate && u_line_texture != LineTexture) {\n      animateSpeed = u_time / u_animate.y;\n      float alpha =1.0 - fract( mod(1.0- d_distance_ratio, u_animate.z)* (1.0/ u_animate.z) + u_time / u_animate.y);\n\n      alpha = (alpha + u_animate.w -1.0) / u_animate.w;\n      // alpha = smoothstep(0., 1., alpha);\n      alpha = clamp(alpha, 0.0, 1.0);\n      gl_FragColor.a *= alpha;\n\n      // u_animate \n      // x enable\n      // y duration\n      // z interval\n      // w trailLength\n  }\n\n  if(u_line_texture == LineTexture && u_line_type != LineTypeDash) { // while load texture\n    // float arcRadio = smoothstep( 0.0, 1.0, (v_segmentIndex / segmentNumber));\n    float arcRadio = v_segmentIndex / (segmentNumber - 1.0);\n    float count = styleMappingMat[3].b; // // \u8d34\u56fe\u5728\u5f27\u7ebf\u4e0a\u91cd\u590d\u7684\u6570\u91cf\n\n    float time = 0.0;\n    if(u_animate.x == Animate) {\n      time = u_time / u_animate.y;\n    }\n    float redioCount = arcRadio * count;\n\n    float u = fract(redioCount - time);\n\n    float v = styleMappingMat[3].a;  // \u7ebf\u56fe\u5c42\u8d34\u56fe\u90e8\u5206\u7684 v \u5750\u6807\u503c\n    vec2 uv= v_iconMapUV / u_textSize + vec2(u, v) / u_textSize * 64.;\n    vec4 pattern = texture2D(u_texture, uv);\n\n    if(u_animate.x == Animate) {\n      float currentPlane = floor(redioCount - time);\n      float textureStep = floor(count * u_animate.z);\n      float a = mod(currentPlane, textureStep);\n      if(a < textureStep - 1.0) {\n        pattern = vec4(0.0);\n      }\n    }\n\n    if(u_textureBlend == 0.0) { // normal\n      pattern.a = 0.0;\n      gl_FragColor = filterColor(gl_FragColor + pattern);\n    } else { // replace\n        pattern.a *= opacity;\n        if(gl_FragColor.a <= 0.0) {\n          pattern.a = 0.0;\n          discard;\n        } else {\n          gl_FragColor = filterColor(pattern);\n        }\n    }\n\n  } else {\n    gl_FragColor = filterColor(gl_FragColor);\n  }\n}\n',Sx='#define LineTypeSolid 0.0\n#define LineTypeDash 1.0\n#define Animate 0.0\n#define LineTexture 1.0\nattribute vec3 a_Position;\nattribute vec4 a_Instance;\nattribute vec4 a_Color;\nattribute float a_Size;\n\nuniform float u_globel;\nuniform float u_globel_radius;\nuniform float u_global_height: 10;\nuniform mat4 u_ModelMatrix;\nuniform mat4 u_Mvp;\nuniform float segmentNumber;\nuniform vec4 u_animate: [ 1., 2., 1.0, 0.2 ];\nvarying vec4 v_color;\n\nuniform float u_line_type: 0.0;\nuniform vec4 u_dash_array: [10.0, 5., 0, 0];\nvarying vec4 v_dash_array;\n\nuniform float u_icon_step: 100;\nuniform float u_line_texture: 0.0;\nvarying float v_segmentIndex;\n\nattribute vec2 a_iconMapUV;\nvarying vec2 v_iconMapUV;\n\nuniform float u_opacity: 1.0;\nvarying mat4 styleMappingMat; // \u7528\u4e8e\u5c06\u5728\u9876\u70b9\u7740\u8272\u5668\u4e2d\u8ba1\u7b97\u597d\u7684\u6837\u5f0f\u503c\u4f20\u9012\u7ed9\u7247\u5143\n\n#pragma include "styleMapping"\n#pragma include "styleMappingCalOpacity"\n\n#pragma include "projection"\n#pragma include "project"\n#pragma include "picking"\n\nfloat maps (float value, float start1, float stop1, float start2, float stop2) {\n  return start2 + (stop2 - start2) * ((value - start1) / (stop1 - start1));\n}\n\nfloat getSegmentRatio(float index) {\n  return smoothstep(0.0, 1.0, index / (segmentNumber - 1.0));\n}\n\nfloat paraboloid(vec2 source, vec2 target, float ratio) {\n  vec2 x = mix(source, target, ratio);\n  vec2 center = mix(source, target, 0.5);\n  float dSourceCenter = distance(source, center);\n  float dXCenter = distance(x, center);\n  return (dSourceCenter + dXCenter) * (dSourceCenter - dXCenter);\n}\n\nvec3 getPos(vec2 source, vec2 target, float segmentRatio) {\n  float vertex_height = paraboloid(source, target, segmentRatio);\n\n  return vec3(\n    mix(source, target, segmentRatio),\n    sqrt(max(0.0, vertex_height))\n  );\n}\nvec2 getExtrusionOffset(vec2 line_clipspace, float offset_direction) {\n  // normalized direction of the line\n  vec2 dir_screenspace = normalize(line_clipspace);\n  // rotate by 90 degrees\n  dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);\n\n  vec2 offset = dir_screenspace * offset_direction * setPickingSize(a_Size) / 2.0;\n\n  return offset;\n}\nvec2 getNormal(vec2 line_clipspace, float offset_direction) {\n  // normalized direction of the line\n  vec2 dir_screenspace = normalize(line_clipspace);\n  // rotate by 90 degrees\n  dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);\n  return reverse_offset_normal(vec3(dir_screenspace,1.0)).xy * sign(offset_direction);\n}\n\nfloat torad(float deg) {\n  return (deg / 180.0) * acos(-1.0);\n}\n\nvec3 lglt2xyz(vec2 lnglat) {\n  float pi = 3.1415926;\n  // + Math.PI/2 \u662f\u4e3a\u4e86\u5bf9\u9f50\u5750\u6807\n  float lng = torad(lnglat.x) + pi / 2.0;\n  float lat = torad(lnglat.y);\n\n  // \u624b\u52a8\u589e\u52a0\u4e00\u4e9b\u504f\u79fb\uff0c\u51cf\u8f7b\u9762\u7684\u51b2\u7a81\n  float radius = u_globel_radius;\n\n  float z = radius * cos(lat) * cos(lng);\n  float x = radius * cos(lat) * sin(lng);\n  float y = radius * sin(lat);\n  return vec3(x, y, z);\n}\n\nvoid main() {\n  // cal style mapping - \u6570\u636e\u7eb9\u7406\u6620\u5c04\u90e8\u5206\u7684\u8ba1\u7b97\n  styleMappingMat = mat4(\n    0.0, 0.0, 0.0, 0.0, // opacity - strokeOpacity - strokeWidth - empty\n    0.0, 0.0, 0.0, 0.0, // strokeR - strokeG - strokeB - strokeA\n    0.0, 0.0, 0.0, 0.0, // offsets[0] - offsets[1]\n    0.0, 0.0, 0.0, 0.0  // dataset \u6570\u636e\u96c6\n  );\n\n  float rowCount = u_cellTypeLayout[0][0];    // \u5f53\u524d\u7684\u6570\u636e\u7eb9\u7406\u6709\u51e0\u884c\n  float columnCount = u_cellTypeLayout[0][1]; // \u5f53\u770b\u5230\u6570\u636e\u7eb9\u7406\u6709\u51e0\u5217\n  float columnWidth = 1.0/columnCount;  // \u5217\u5bbd\n  float rowHeight = 1.0/rowCount;       // \u884c\u9ad8\n  float cellCount = calCellCount(); // opacity - strokeOpacity - strokeWidth - stroke - offsets\n  float id = a_vertexId; // \u7b2cn\u4e2a\u9876\u70b9\n  float cellCurrentRow = floor(id * cellCount / columnCount) + 1.0; // \u8d77\u59cb\u70b9\u5728\u7b2c\u51e0\u884c\n  float cellCurrentColumn = mod(id * cellCount, columnCount) + 1.0; // \u8d77\u59cb\u70b9\u5728\u7b2c\u51e0\u5217\n  \n  // cell \u56fa\u5b9a\u987a\u5e8f opacity -> strokeOpacity -> strokeWidth -> stroke ... \n  // \u6309\u987a\u5e8f\u4ece cell \u4e2d\u53d6\u503c\u3001\u82e5\u6ca1\u6709\u5219\u81ea\u52a8\u5f80\u4e0b\u53d6\u503c\n  float textureOffset = 0.0; // \u5728 cell \u4e2d\u53d6\u503c\u7684\u504f\u79fb\u91cf\n\n  vec2 opacityAndOffset = calOpacityAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);\n  styleMappingMat[0][0] = opacityAndOffset.r;\n  textureOffset = opacityAndOffset.g;\n  // cal style mapping - \u6570\u636e\u7eb9\u7406\u6620\u5c04\u90e8\u5206\u7684\u8ba1\u7b97\n\n  v_color = a_Color;\n  vec2 source = project_position(vec4(a_Instance.rg, 0, 0)).xy;\n  vec2 target = project_position(vec4(a_Instance.ba, 0, 0)).xy;\n  float segmentIndex = a_Position.x;\n  float segmentRatio = getSegmentRatio(segmentIndex);\n  float indexDir = mix(-1.0, 1.0, step(segmentIndex, 0.0));\n\n  float d_distance_ratio;\n   if(u_line_type == LineTypeDash) {\n    d_distance_ratio = segmentIndex / segmentNumber;\n    vec2 s = source;\n    vec2 t = target;\n    \n    if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x\n      s = unProjCustomCoord(source);\n      t = unProjCustomCoord(target);\n    }\n    float total_Distance = pixelDistance(s, t) / 2.0 * PI;\n    v_dash_array = pow(2.0, 20.0 - u_Zoom) * u_dash_array / (total_Distance / segmentNumber * segmentIndex);\n  }\n    if(u_animate.x == Animate) {\n      d_distance_ratio = segmentIndex / segmentNumber;\n  }\n  styleMappingMat[3].g = d_distance_ratio; // \u5f53\u524d\u70b9\u4f4d\u8ddd\u79bb\u5360\u7ebf\u603b\u957f\u7684\u6bd4\u4f8b\n\n  float nextSegmentRatio = getSegmentRatio(segmentIndex + indexDir);\n  vec3 curr = getPos(source, target, segmentRatio);\n  vec3 next = getPos(source, target, nextSegmentRatio);\n  vec2 offset = getExtrusionOffset((next.xy - curr.xy) * indexDir, a_Position.y);\n  // v_normal = getNormal((next.xy - curr.xy) * indexDir, a_Position.y);\n\n\n  v_segmentIndex = a_Position.x;\n  if(LineTexture == u_line_texture && u_line_type != LineTypeDash) { // \u5f00\u542f\u8d34\u56fe\u6a21\u5f0f  \n\n    float arcDistrance = length(source - target);\n    float pixelLen =  project_pixel_texture(u_icon_step);\n    styleMappingMat[3].b = floor(arcDistrance/pixelLen); // \u8d34\u56fe\u5728\u5f27\u7ebf\u4e0a\u91cd\u590d\u7684\u6570\u91cf\n\n    vec2 projectOffset = project_pixel(offset);\n    float lineOffsetWidth = length(projectOffset + projectOffset * sign(a_Position.y)); // \u7ebf\u6a2a\u5411\u504f\u79fb\u7684\u8ddd\u79bb\n    float linePixelSize = project_pixel(a_Size);  // \u5b9a\u70b9\u4f4d\u7f6e\u504f\u79fb\uff0c\u6309\u5730\u56fe\u7b49\u7ea7\u7f29\u653e\u540e\u7684\u8ddd\u79bb\n    styleMappingMat[3].a = lineOffsetWidth/linePixelSize;  // \u7ebf\u56fe\u5c42\u8d34\u56fe\u90e8\u5206\u7684 v \u5750\u6807\u503c\n\n    v_iconMapUV = a_iconMapUV;\n  }\n  \n\n  // gl_Position = project_common_position_to_clipspace(vec4(curr.xy + project_pixel(offset), curr.z, 1.0));\n  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x\n    gl_Position = u_Mvp * (vec4(curr.xy + project_pixel(offset), curr.z, 1.0));\n  } else {\n    gl_Position = project_common_position_to_clipspace(vec4(curr.xy + project_pixel(offset), curr.z, 1.0));\n  }\n\n  // \u5730\u7403\u6a21\u5f0f\n  if(u_globel > 0.0) {\n    vec3 startLngLat = lglt2xyz(a_Instance.rg);\n    vec3 endLngLat = lglt2xyz(a_Instance.ba);\n    float globalRadius = length(startLngLat);\n\n    vec3 lineDir = normalize(endLngLat - startLngLat);\n    vec3 midPointDir = normalize((startLngLat + endLngLat)/2.0);\n\n    // \u7ebf\u7684\u504f\u79fb\n    vec3 lnglatOffset = cross(lineDir, midPointDir) * a_Position.y;\n    // \u8ba1\u7b97\u8d77\u59cb\u70b9\u548c\u7ec8\u6b62\u70b9\u7684\u8ddd\u79bb\n    float lnglatLength = length(a_Instance.rg - a_Instance.ba)/50.0;\n    // \u8ba1\u7b97\u98de\u7ebf\u5404\u4e2a\u8282\u70b9\u76f8\u5e94\u7684\u9ad8\u5ea6\n    float lineHeight = u_global_height * (-4.0*segmentRatio*segmentRatio + 4.0 * segmentRatio) * lnglatLength;\n    // \u5730\u7403\u70b9\u4f4d\n    vec3 globalPoint = normalize(mix(startLngLat, endLngLat, segmentRatio)) * (globalRadius + lineHeight) + lnglatOffset * a_Size;\n    \n    gl_Position = u_ViewProjectionMatrix * vec4(globalPoint, 1.0);\n  }\n \n\n  setPickingColor(a_PickingColor);\n}\n',Ox='\n#define Animate 0.0\n\nuniform float u_opacity;\nuniform float u_blur : 0.9;\nvarying float v_segmentIndex;\nuniform float segmentNumber;\n\nuniform float u_time;\nuniform vec4 u_animate: [ 1., 2., 1.0, 0.2 ];\n\nuniform float u_linearColor: 0;\nuniform vec4 u_sourceColor;\nuniform vec4 u_targetColor;\n\nvarying mat4 styleMappingMat;\n\n#pragma include "picking"\n\nvoid main() {\n  float opacity = styleMappingMat[0][0];\n  float animateSpeed = 0.0; // \u8fd0\u52a8\u901f\u5ea6\n  float d_distance_ratio = styleMappingMat[3].g; // \u5f53\u524d\u70b9\u4f4d\u8ddd\u79bb\u5360\u7ebf\u603b\u957f\u7684\u6bd4\u4f8b\n\n  gl_FragColor = mix(u_sourceColor, u_targetColor, v_segmentIndex/segmentNumber);\n\n  gl_FragColor.a *= opacity;\n\n  if(u_animate.x == Animate) {\n      animateSpeed = u_time / u_animate.y;\n      float alpha =1.0 - fract( mod(1.0- d_distance_ratio, u_animate.z)* (1.0/ u_animate.z) + u_time / u_animate.y);\n\n      alpha = (alpha + u_animate.w -1.0) / u_animate.w;\n      // alpha = smoothstep(0., 1., alpha);\n      alpha = clamp(alpha, 0.0, 1.0);\n      gl_FragColor.a *= alpha;\n\n      // u_animate \n      // x enable\n      // y duration\n      // z interval\n      // w trailLength\n  }\n\n  gl_FragColor = filterColor(gl_FragColor);\n}\n',Cx='#define LineTypeSolid 0.0\n#define LineTypeDash 1.0\n#define Animate 0.0\n#define LineTexture 1.0\nattribute vec3 a_Position;\nattribute vec4 a_Instance;\nattribute vec4 a_Color;\nattribute float a_Size;\nattribute vec2 a_iconMapUV;\n\nuniform float u_globel;\nuniform float u_globel_radius;\nuniform float u_global_height: 10;\nuniform mat4 u_ModelMatrix;\nuniform mat4 u_Mvp;\nuniform float segmentNumber;\nuniform vec4 u_animate: [ 1., 2., 1.0, 0.2 ];\n\nuniform float u_line_type: 0.0;\nuniform vec4 u_dash_array: [10.0, 5., 0, 0];\nuniform float u_icon_step: 100;\nuniform float u_line_texture: 0.0;\nuniform float u_opacity: 1.0;\n\nvarying vec4 v_dash_array;\nvarying vec4 v_color;\nvarying float v_segmentIndex;\nvarying vec2 v_iconMapUV;\nvarying mat4 styleMappingMat; // \u7528\u4e8e\u5c06\u5728\u9876\u70b9\u7740\u8272\u5668\u4e2d\u8ba1\u7b97\u597d\u7684\u6837\u5f0f\u503c\u4f20\u9012\u7ed9\u7247\u5143\n\n\n#pragma include "styleMapping"\n#pragma include "styleMappingCalOpacity"\n\n#pragma include "projection"\n#pragma include "project"\n#pragma include "picking"\n\nfloat maps (float value, float start1, float stop1, float start2, float stop2) {\n  return start2 + (stop2 - start2) * ((value - start1) / (stop1 - start1));\n}\n\nfloat getSegmentRatio(float index) {\n  return smoothstep(0.0, 1.0, index / (segmentNumber - 1.0));\n}\n\nfloat paraboloid(vec2 source, vec2 target, float ratio) {\n  vec2 x = mix(source, target, ratio);\n  vec2 center = mix(source, target, 0.5);\n  float dSourceCenter = distance(source, center);\n  float dXCenter = distance(x, center);\n  return (dSourceCenter + dXCenter) * (dSourceCenter - dXCenter);\n}\n\nvec3 getPos(vec2 source, vec2 target, float segmentRatio) {\n  float vertex_height = paraboloid(source, target, segmentRatio);\n\n  return vec3(\n    mix(source, target, segmentRatio),\n    sqrt(max(0.0, vertex_height))\n  );\n}\nvec2 getExtrusionOffset(vec2 line_clipspace, float offset_direction) {\n  // normalized direction of the line\n  vec2 dir_screenspace = normalize(line_clipspace);\n  // rotate by 90 degrees\n  dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);\n\n  vec2 offset = dir_screenspace * offset_direction * setPickingSize(a_Size) / 2.0;\n\n  return offset;\n}\nvec2 getNormal(vec2 line_clipspace, float offset_direction) {\n  // normalized direction of the line\n  vec2 dir_screenspace = normalize(line_clipspace);\n  // rotate by 90 degrees\n  dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);\n  return reverse_offset_normal(vec3(dir_screenspace,1.0)).xy * sign(offset_direction);\n}\n\nfloat torad(float deg) {\n  return (deg / 180.0) * acos(-1.0);\n}\n\nvec3 lglt2xyz(vec2 lnglat) {\n  float pi = 3.1415926;\n  // + Math.PI/2 \u662f\u4e3a\u4e86\u5bf9\u9f50\u5750\u6807\n  float lng = torad(lnglat.x) + pi / 2.0;\n  float lat = torad(lnglat.y);\n\n  // \u624b\u52a8\u589e\u52a0\u4e00\u4e9b\u504f\u79fb\uff0c\u51cf\u8f7b\u9762\u7684\u51b2\u7a81\n  float radius = u_globel_radius;\n\n  float z = radius * cos(lat) * cos(lng);\n  float x = radius * cos(lat) * sin(lng);\n  float y = radius * sin(lat);\n  return vec3(x, y, z);\n}\n\nvoid main() {\n  // cal style mapping - \u6570\u636e\u7eb9\u7406\u6620\u5c04\u90e8\u5206\u7684\u8ba1\u7b97\n  styleMappingMat = mat4(\n    0.0, 0.0, 0.0, 0.0, // opacity - strokeOpacity - strokeWidth - empty\n    0.0, 0.0, 0.0, 0.0, // strokeR - strokeG - strokeB - strokeA\n    0.0, 0.0, 0.0, 0.0, // offsets[0] - offsets[1]\n    0.0, 0.0, 0.0, 0.0  // dataset \u6570\u636e\u96c6\n  );\n\n  float rowCount = u_cellTypeLayout[0][0];    // \u5f53\u524d\u7684\u6570\u636e\u7eb9\u7406\u6709\u51e0\u884c\n  float columnCount = u_cellTypeLayout[0][1]; // \u5f53\u770b\u5230\u6570\u636e\u7eb9\u7406\u6709\u51e0\u5217\n  float columnWidth = 1.0/columnCount;  // \u5217\u5bbd\n  float rowHeight = 1.0/rowCount;       // \u884c\u9ad8\n  float cellCount = calCellCount(); // opacity - strokeOpacity - strokeWidth - stroke - offsets\n  float id = a_vertexId; // \u7b2cn\u4e2a\u9876\u70b9\n  float cellCurrentRow = floor(id * cellCount / columnCount) + 1.0; // \u8d77\u59cb\u70b9\u5728\u7b2c\u51e0\u884c\n  float cellCurrentColumn = mod(id * cellCount, columnCount) + 1.0; // \u8d77\u59cb\u70b9\u5728\u7b2c\u51e0\u5217\n  \n  // cell \u56fa\u5b9a\u987a\u5e8f opacity -> strokeOpacity -> strokeWidth -> stroke ... \n  // \u6309\u987a\u5e8f\u4ece cell \u4e2d\u53d6\u503c\u3001\u82e5\u6ca1\u6709\u5219\u81ea\u52a8\u5f80\u4e0b\u53d6\u503c\n  float textureOffset = 0.0; // \u5728 cell \u4e2d\u53d6\u503c\u7684\u504f\u79fb\u91cf\n\n  vec2 opacityAndOffset = calOpacityAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);\n  styleMappingMat[0][0] = opacityAndOffset.r;\n  textureOffset = opacityAndOffset.g;\n  // cal style mapping - \u6570\u636e\u7eb9\u7406\u6620\u5c04\u90e8\u5206\u7684\u8ba1\u7b97\n\n  v_color = a_Color;\n  vec2 source = project_position(vec4(a_Instance.rg, 0, 0)).xy;\n  vec2 target = project_position(vec4(a_Instance.ba, 0, 0)).xy;\n  float segmentIndex = a_Position.x;\n  float segmentRatio = getSegmentRatio(segmentIndex);\n  float indexDir = mix(-1.0, 1.0, step(segmentIndex, 0.0));\n\n  float d_distance_ratio;\n   if(u_line_type == LineTypeDash) {\n    d_distance_ratio = segmentIndex / segmentNumber;\n    // float total_Distance = pixelDistance(a_Instance.rg, a_Instance.ba) / 2.0 * PI;\n    vec2 s = source;\n    vec2 t = target;\n    \n    if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x\n      s = unProjCustomCoord(source);\n      t = unProjCustomCoord(target);\n    }\n    float total_Distance = pixelDistance(s, t) / 2.0 * PI;\n    v_dash_array = pow(2.0, 20.0 - u_Zoom) * u_dash_array / (total_Distance / segmentNumber * segmentIndex);\n  }\n    if(u_animate.x == Animate) {\n      d_distance_ratio = segmentIndex / segmentNumber;\n  }\n  styleMappingMat[3].g = d_distance_ratio; // \u5f53\u524d\u70b9\u4f4d\u8ddd\u79bb\u5360\u7ebf\u603b\u957f\u7684\u6bd4\u4f8b\n\n  float nextSegmentRatio = getSegmentRatio(segmentIndex + indexDir);\n  vec3 curr = getPos(source, target, segmentRatio);\n  vec3 next = getPos(source, target, nextSegmentRatio);\n  vec2 offset = getExtrusionOffset((next.xy - curr.xy) * indexDir, a_Position.y);\n  // v_normal = getNormal((next.xy - curr.xy) * indexDir, a_Position.y);\n\n\n  v_segmentIndex = a_Position.x;\n  if(LineTexture == u_line_texture && u_line_type != LineTypeDash) { // \u5f00\u542f\u8d34\u56fe\u6a21\u5f0f  \n\n    float arcDistrance = length(source - target);\n    float pixelLen =  project_pixel_texture(u_icon_step);\n    styleMappingMat[3].b = floor(arcDistrance/pixelLen); // \u8d34\u56fe\u5728\u5f27\u7ebf\u4e0a\u91cd\u590d\u7684\u6570\u91cf\n\n    vec2 projectOffset = project_pixel(offset);\n    float lineOffsetWidth = length(projectOffset + projectOffset * sign(a_Position.y)); // \u7ebf\u6a2a\u5411\u504f\u79fb\u7684\u8ddd\u79bb\n    float linePixelSize = project_pixel(a_Size);  // \u5b9a\u70b9\u4f4d\u7f6e\u504f\u79fb\uff0c\u6309\u5730\u56fe\u7b49\u7ea7\u7f29\u653e\u540e\u7684\u8ddd\u79bb\n    styleMappingMat[3].a = lineOffsetWidth/linePixelSize;  // \u7ebf\u56fe\u5c42\u8d34\u56fe\u90e8\u5206\u7684 v \u5750\u6807\u503c\n\n    v_iconMapUV = a_iconMapUV;\n  }\n  \n\n  // gl_Position = project_common_position_to_clipspace(vec4(curr.xy + project_pixel(offset), curr.z, 1.0));\n  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x\n    gl_Position = u_Mvp * (vec4(curr.xy + project_pixel(offset), curr.z, 1.0));\n  } else {\n    gl_Position = project_common_position_to_clipspace(vec4(curr.xy + project_pixel(offset), curr.z, 1.0));\n  }\n\n  // \u5730\u7403\u6a21\u5f0f\n  if(u_globel > 0.0) {\n    vec3 startLngLat = lglt2xyz(a_Instance.rg);\n    vec3 endLngLat = lglt2xyz(a_Instance.ba);\n    float globalRadius = length(startLngLat);\n\n    vec3 lineDir = normalize(endLngLat - startLngLat);\n    vec3 midPointDir = normalize((startLngLat + endLngLat)/2.0);\n\n    // \u7ebf\u7684\u504f\u79fb\n    vec3 lnglatOffset = cross(lineDir, midPointDir) * a_Position.y;\n    // \u8ba1\u7b97\u8d77\u59cb\u70b9\u548c\u7ec8\u6b62\u70b9\u7684\u8ddd\u79bb\n    float lnglatLength = length(a_Instance.rg - a_Instance.ba)/50.0;\n    // \u8ba1\u7b97\u98de\u7ebf\u5404\u4e2a\u8282\u70b9\u76f8\u5e94\u7684\u9ad8\u5ea6\n    float lineHeight = u_global_height * (-4.0*segmentRatio*segmentRatio + 4.0 * segmentRatio) * lnglatLength;\n    // \u5730\u7403\u70b9\u4f4d\n    vec3 globalPoint = normalize(mix(startLngLat, endLngLat, segmentRatio)) * (globalRadius + lineHeight) + lnglatOffset * a_Size;\n    \n    gl_Position = u_ViewProjectionMatrix * vec4(globalPoint, 1.0);\n  }\n \n\n  setPickingColor(a_PickingColor);\n}\n',Tx={solid:0,dash:1},Ax=function(t){Object(st["a"])(n,t);var e=bx(n);function n(){var t;Object(et["a"])(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return t=e.call.apply(e,[this].concat(i)),Object(Ar["a"])(Object(ft["a"])(t),"updateTexture",(function(){var e=t.rendererService.createTexture2D;if(t.texture)return t.texture.update({data:t.iconService.getCanvas()}),void t.layer.render();t.texture=e({data:t.iconService.getCanvas(),mag:Rp.NEAREST,min:Rp.NEAREST,premultiplyAlpha:!1,width:1024,height:t.iconService.canvasHeight||128})})),t}return Object(nt["a"])(n,[{key:"getUninforms",value:function(){var t=this.layer.getLayerConfig(),e=t.opacity,n=void 0===e?1:e,r=t.sourceColor,i=t.targetColor,o=t.textureBlend,a=void 0===o?"normal":o,s=t.lineType,u=void 0===s?"solid":s,c=t.dashArray,l=void 0===c?[10,5]:c,f=t.lineTexture,h=void 0!==f&&f,p=t.iconStep,d=void 0===p?100:p,v=t.segmentNumber,g=void 0===v?30:v,m=t.globalArcHeight,y=void 0===m?10:m;2===l.length&&l.push(0,0);var _=0,b=[0,0,0,0],x=[0,0,0,0];if(r&&i&&(b=li(r),x=li(i),_=1),this.rendererService.getDirty()&&this.texture.bind(),this.dataTextureTest&&this.dataTextureNeedUpdate({opacity:n})){this.judgeStyleAttributes({opacity:n});var w=this.layer.getEncodedData(),E=this.calDataFrame(this.cellLength,w,this.cellProperties),S=E.data,O=E.width,C=E.height;this.rowCount=C,this.dataTexture=this.cellLength>0&&S.length>0?this.createTexture2D({flipY:!0,data:S,format:Rp.LUMINANCE,type:Rp.FLOAT,width:O,height:C}):this.createTexture2D({flipY:!0,data:[1],format:Rp.LUMINANCE,type:Rp.FLOAT,width:1,height:1})}return{u_globel:1,u_globel_radius:vb,u_global_height:y,u_dataTexture:this.dataTexture,u_cellTypeLayout:this.getCellTypeLayout(),u_opacity:Object(K["isNumber"])(n)?n:1,u_textureBlend:"normal"===a?0:1,segmentNumber:g,u_line_type:Tx[u]||0,u_dash_array:l,u_texture:this.texture,u_line_texture:h?1:0,u_icon_step:d,u_textSize:[1024,this.iconService.canvasHeight||128],u_linearColor:_,u_sourceColor:b,u_targetColor:x}}},{key:"getAnimateUniforms",value:function(){var t=this.layer.getLayerConfig(),e=t.animateOption;return{u_animate:this.animateOption2Array(e),u_time:this.layer.getLayerAnimateTime()}}},{key:"initModels",value:function(){var t=Object(mi["a"])(_i.a.mark((function t(){return _i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.updateTexture(),this.iconService.on("imageUpdate",this.updateTexture),t.next=4,this.buildModels();case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"clearModels",value:function(){var t,e;null===(t=this.texture)||void 0===t||t.destroy(),null===(e=this.dataTexture)||void 0===e||e.destroy(),this.iconService.off("imageUpdate",this.updateTexture)}},{key:"getShaders",value:function(){var t=this.layer.getLayerConfig(),e=t.sourceColor,n=t.targetColor;return e&&n?{frag:Ox,vert:Cx,type:"Linear"}:{frag:Ex,vert:Sx,type:""}}},{key:"buildModels",value:function(){var t=Object(mi["a"])(_i.a.mark((function t(){var e,n,r,i,o,a,s,u,c,l,f,h;return _i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=this.layer.getLayerConfig(),n=e.segmentNumber,r=void 0===n?30:n,i=e.mask,o=void 0!==i&&i,a=e.maskInside,s=void 0===a||a,u=this.getShaders(),c=u.frag,l=u.vert,f=u.type,t.next=4,this.layer.buildLayerModel({moduleName:"lineEarthArc3d"+f,vertexShader:l,fragmentShader:c,triangulation:tx,depth:{enable:!0},blend:this.getBlend(),segmentNumber:r,stencil:gi(o,s)});case 4:return h=t.sent,t.abrupt("return",[h]);case 6:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"registerBuiltinAttributes",value:function(){var t=this;this.styleAttributeService.registerStyleAttribute({name:"size",type:ey.Attribute,descriptor:{name:"a_Size",buffer:{usage:Rp.DYNAMIC_DRAW,data:[],type:Rp.FLOAT},size:1,update:function(t){var e=t.size,n=void 0===e?1:e;return Array.isArray(n)?[n[0]]:[n]}}}),this.styleAttributeService.registerStyleAttribute({name:"instance",type:ey.Attribute,descriptor:{name:"a_Instance",buffer:{usage:Rp.STATIC_DRAW,data:[],type:Rp.FLOAT},size:4,update:function(t,e,n){return[n[3],n[4],n[5],n[6]]}}}),this.styleAttributeService.registerStyleAttribute({name:"uv",type:ey.Attribute,descriptor:{name:"a_iconMapUV",buffer:{usage:Rp.DYNAMIC_DRAW,data:[],type:Rp.FLOAT},size:2,update:function(e){var n=t.iconService.getIconMap(),r=e.texture,i=n[r]||{x:0,y:0},o=i.x,a=i.y;return[o,a]}}})}}]),n}(db);function kx(t){var e=Mx();return function(){var n,r=Object(ct["a"])(t);if(e){var i=Object(ct["a"])(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(ut["a"])(this,n)}}function Mx(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}var Px='#define LineTypeSolid 0.0\n#define LineTypeDash 1.0\n#define Animate 0.0\n#define LineTexture 1.0\n\nuniform float u_opacity;\nuniform float u_textureBlend;\nuniform float u_blur : 0.9;\nuniform float u_line_type: 0.0;\n// varying vec2 v_normal;\nvarying vec4 v_dash_array;\nvarying float v_distance_ratio;\nvarying vec4 v_color;\n\nuniform float u_time;\nuniform vec4 u_animate: [ 1., 2., 1.0, 0.2 ];\n\nuniform float u_line_texture: 0.0;\nuniform sampler2D u_texture;\nuniform vec2 u_textSize;\nuniform float segmentNumber;\n\nvarying vec2 v_iconMapUV;\n\nuniform float u_linearColor: 0;\nuniform vec4 u_sourceColor;\nuniform vec4 u_targetColor;\n\nvarying mat4 styleMappingMat;\n\n#pragma include "picking"\n#pragma include "project"\n#pragma include "projection"\n\nvoid main() {\n  float opacity = styleMappingMat[0][0];\n  float animateSpeed = 0.0;\n  float d_segmentIndex = styleMappingMat[3].g;\n  \n  // \u8bbe\u7f6e\u5f27\u7ebf\u7684\u5e95\u8272\n  if(u_linearColor == 1.0) { // \u4f7f\u7528\u6e10\u53d8\u989c\u8272\n    gl_FragColor = mix(u_sourceColor, u_targetColor, d_segmentIndex/segmentNumber);\n  } else { // \u4f7f\u7528 color \u65b9\u6cd5\u4f20\u5165\u7684\u989c\u8272\n     gl_FragColor = v_color;\n  }\n\n  // float blur = 1.- smoothstep(u_blur, 1., length(v_normal.xy));\n  // float blur = smoothstep(1.0, u_blur, length(v_normal.xy));\n  gl_FragColor.a *= opacity;\n  if(u_line_type == LineTypeDash) {\n    float dashLength = mod(v_distance_ratio, v_dash_array.x + v_dash_array.y + v_dash_array.z + v_dash_array.w);\n    if(dashLength < v_dash_array.x || (dashLength > (v_dash_array.x + v_dash_array.y) && dashLength <  v_dash_array.x + v_dash_array.y + v_dash_array.z)) {\n      // \u5b9e\u7ebf\u90e8\u5206\n    } else {\n      // \u865a\u7ebf\u90e8\u5206\n      discard;\n    };\n  }\n\n  // \u8bbe\u7f6e\u5f27\u7ebf\u7684\u52a8\u753b\u6a21\u5f0f\n  if(u_animate.x == Animate) {\n      animateSpeed = u_time / u_animate.y;\n      float alpha =1.0 - fract( mod(1.0- v_distance_ratio, u_animate.z)* (1.0/ u_animate.z) + u_time / u_animate.y);\n      alpha = (alpha + u_animate.w -1.0) / u_animate.w;\n      alpha = smoothstep(0., 1., alpha);\n      gl_FragColor.a *= alpha;\n  }\n\n  // \u8bbe\u7f6e\u5f27\u7ebf\u7684\u8d34\u56fe\n  if(LineTexture == u_line_texture && u_line_type != LineTypeDash) { \n    float arcRadio = smoothstep( 0.0, 1.0, (d_segmentIndex / (segmentNumber - 1.0)));\n    // float arcRadio = d_segmentIndex / (segmentNumber - 1.0);\n    float count = styleMappingMat[3].b; // \u8d34\u56fe\u5728\u5f27\u7ebf\u4e0a\u91cd\u590d\u7684\u6570\u91cf\n    float u = fract(arcRadio * count - animateSpeed * count);\n    // float u = fract(arcRadio * count - animateSpeed);\n    if(u_animate.x == Animate) {\n      u = gl_FragColor.a/opacity;\n    }\n\n    float v = styleMappingMat[3].a; // \u7ebf\u56fe\u5c42\u8d34\u56fe\u90e8\u5206\u7684 v \u5750\u6807\u503c\n\n    vec2 uv= v_iconMapUV / u_textSize + vec2(u, v) / u_textSize * 64.;\n    vec4 pattern = texture2D(u_texture, uv);\n    \n    // \u8bbe\u7f6e\u8d34\u56fe\u548c\u5e95\u8272\u7684\u53e0\u52a0\u6a21\u5f0f\n    if(u_textureBlend == 0.0) { // normal\n      pattern.a = 0.0;\n      gl_FragColor = filterColor(gl_FragColor + pattern);\n    } else { // replace\n        pattern.a *= opacity;\n        if(gl_FragColor.a <= 0.0) {\n          pattern.a = 0.0;\n        }\n        gl_FragColor = filterColor(pattern);\n    }\n  } else {\n    gl_FragColor = filterColor(gl_FragColor);\n  }\n\n  // gl_FragColor = filterColor(gl_FragColor);\n}',Rx='#define LineTypeSolid 0.0\n#define LineTypeDash 1.0\n#define Animate 0.0\n#define LineTexture 1.0\n\nattribute vec4 a_Color;\nattribute vec3 a_Position;\nattribute vec4 a_Instance;\nattribute float a_Size;\nuniform mat4 u_ModelMatrix;\nuniform mat4 u_Mvp;\nuniform float segmentNumber;\nuniform vec4 u_animate: [ 1., 2., 1.0, 0.2 ];\nvarying vec4 v_color;\n\nvarying float v_distance_ratio;\nuniform float u_line_type: 0.0;\nuniform vec4 u_dash_array: [10.0, 5., 0, 0];\nvarying vec4 v_dash_array;\n\nuniform float u_icon_step: 100;\nuniform float u_line_texture: 0.0;\n\nattribute vec2 a_iconMapUV;\nvarying vec2 v_iconMapUV;\n\nuniform float u_opacity: 1.0;\nvarying mat4 styleMappingMat; // \u7528\u4e8e\u5c06\u5728\u9876\u70b9\u7740\u8272\u5668\u4e2d\u8ba1\u7b97\u597d\u7684\u6837\u5f0f\u503c\u4f20\u9012\u7ed9\u7247\u5143\n\n#pragma include "styleMapping"\n#pragma include "styleMappingCalOpacity"\n\n#pragma include "projection"\n#pragma include "project"\n#pragma include "picking"\n\nfloat maps (float value, float start1, float stop1, float start2, float stop2) {\n    return start2 + (stop2 - start2) * ((value - start1) / (stop1 - start1));\n}\n\nfloat getSegmentRatio(float index) {\n    return index / (segmentNumber - 1.);\n}\n\nfloat paraboloid(vec2 source, vec2 target, float ratio) {\n    vec2 x = mix(source, target, ratio);\n    vec2 center = mix(source, target, 0.5);\n    float dSourceCenter = distance(source, center);\n    float dXCenter = distance(x, center);\n    return (dSourceCenter + dXCenter) * (dSourceCenter - dXCenter);\n}\n\nvec3 getPos(vec2 source, vec2 target, float segmentRatio) {\n     float vertex_height = paraboloid(source, target, segmentRatio);\n\n    return vec3(\n    mix(source, target, segmentRatio),\n    sqrt(max(0.0, vertex_height))\n    );\n}\nvec2 getExtrusionOffset(vec2 line_clipspace, float offset_direction) {\n  // normalized direction of the line\n  vec2 dir_screenspace = normalize(line_clipspace);\n  // rotate by 90 degrees\n   dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);\n  vec2 offset = dir_screenspace * offset_direction * setPickingSize(a_Size)/ 2.0;\n  return offset;\n}\nvec2 getNormal(vec2 line_clipspace, float offset_direction) {\n  // normalized direction of the line\n  vec2 dir_screenspace = normalize(line_clipspace);\n  // rotate by 90 degrees\n   dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);\n   return reverse_offset_normal(vec3(dir_screenspace,1.0)).xy * sign(offset_direction);\n}\nfloat getAngularDist (vec2 source, vec2 target) {\n  vec2 delta = source - target;\n  vec2 sin_half_delta = sin(delta / 2.0);\n  float a =\n    sin_half_delta.y * sin_half_delta.y +\n    cos(source.y) * cos(target.y) *\n    sin_half_delta.x * sin_half_delta.x;\n  return 2.0 * atan(sqrt(a), sqrt(1.0 - a));\n}\n\nvec2 midPoint(vec2 source, vec2 target) {\n  vec2 center = target - source;\n  float r = length(center);\n  float theta = atan(center.y, center.x);\n  float thetaOffset = 0.314;\n  float r2 = r / 2.0 / cos(thetaOffset);\n  float theta2 = theta + thetaOffset;\n  vec2 mid = vec2(r2*cos(theta2) + source.x, r2*sin(theta2) + source.y);\n  return mid;\n}\nfloat bezier3(vec3 arr, float t) {\n  float ut = 1. - t;\n  return (arr.x * ut + arr.y * t) * ut + (arr.y * ut + arr.z * t) * t;\n}\n\nvec2 interpolate (vec2 source, vec2 target, float angularDist, float t) {\n  // if the angularDist is PI, linear interpolation is applied. otherwise, use spherical interpolation\n  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x\n    vec2 mid = midPoint(source, target);\n    vec3 x = vec3(source.x, mid.x, target.x);\n    vec3 y = vec3(source.y, mid.y, target.y);\n    return vec2(bezier3(x ,t), bezier3(y,t));\n  }else {\n    if(abs(angularDist - PI) < 0.001) {\n      return (1.0 - t) * source + t * target;\n    }\n    float a = sin((1.0 - t) * angularDist) / sin(angularDist);\n    float b = sin(t * angularDist) / sin(angularDist);\n    vec2 sin_source = sin(source);\n    vec2 cos_source = cos(source);\n    vec2 sin_target = sin(target);\n    vec2 cos_target = cos(target);\n    float x = a * cos_source.y * cos_source.x + b * cos_target.y * cos_target.x;\n    float y = a * cos_source.y * sin_source.x + b * cos_target.y * sin_target.x;\n    float z = a * sin_source.y + b * sin_target.y;\n    return vec2(atan(y, x), atan(z, sqrt(x * x + y * y)));\n  }\n}\n\nvoid main() {\n  // cal style mapping - \u6570\u636e\u7eb9\u7406\u6620\u5c04\u90e8\u5206\u7684\u8ba1\u7b97\n  styleMappingMat = mat4(\n    0.0, 0.0, 0.0, 0.0, // opacity - strokeOpacity - strokeWidth - empty\n    0.0, 0.0, 0.0, 0.0, // strokeR - strokeG - strokeB - strokeA\n    0.0, 0.0, 0.0, 0.0, // offsets[0] - offsets[1]\n    0.0, 0.0, 0.0, 0.0  // dataset \u6570\u636e\u96c6\n  );\n\n  float rowCount = u_cellTypeLayout[0][0];    // \u5f53\u524d\u7684\u6570\u636e\u7eb9\u7406\u6709\u51e0\u884c\n  float columnCount = u_cellTypeLayout[0][1]; // \u5f53\u770b\u5230\u6570\u636e\u7eb9\u7406\u6709\u51e0\u5217\n  float columnWidth = 1.0/columnCount;  // \u5217\u5bbd\n  float rowHeight = 1.0/rowCount;       // \u884c\u9ad8\n  float cellCount = calCellCount(); // opacity - strokeOpacity - strokeWidth - stroke - offsets\n  float id = a_vertexId; // \u7b2cn\u4e2a\u9876\u70b9\n  float cellCurrentRow = floor(id * cellCount / columnCount) + 1.0; // \u8d77\u59cb\u70b9\u5728\u7b2c\u51e0\u884c\n  float cellCurrentColumn = mod(id * cellCount, columnCount) + 1.0; // \u8d77\u59cb\u70b9\u5728\u7b2c\u51e0\u5217\n  \n  // cell \u56fa\u5b9a\u987a\u5e8f opacity -> strokeOpacity -> strokeWidth -> stroke ... \n  // \u6309\u987a\u5e8f\u4ece cell \u4e2d\u53d6\u503c\u3001\u82e5\u6ca1\u6709\u5219\u81ea\u52a8\u5f80\u4e0b\u53d6\u503c\n  float textureOffset = 0.0; // \u5728 cell \u4e2d\u53d6\u503c\u7684\u504f\u79fb\u91cf\n\n  vec2 opacityAndOffset = calOpacityAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);\n  styleMappingMat[0][0] = opacityAndOffset.r;\n  textureOffset = opacityAndOffset.g;\n  // cal style mapping - \u6570\u636e\u7eb9\u7406\u6620\u5c04\u90e8\u5206\u7684\u8ba1\u7b97\n\n  v_color = a_Color;\n  vec2 source = radians(a_Instance.rg);\n  vec2 target = radians(a_Instance.ba);\n  float angularDist = getAngularDist(source, target);\n  float segmentIndex = a_Position.x;\n  float segmentRatio = getSegmentRatio(segmentIndex);\n  float indexDir = mix(-1.0, 1.0, step(segmentIndex, 0.0));\n\n  if(u_line_type == LineTypeDash) {\n    v_distance_ratio = segmentIndex / segmentNumber;\n    vec2 s = source;\n    vec2 t = target;\n    \n    if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x\n      s = unProjCustomCoord(source);\n      t = unProjCustomCoord(target);\n    }\n    float total_Distance = pixelDistance(s, t) / 2.0 * PI;\n    total_Distance = total_Distance*16.0; // total_Distance*16.0 \u8c03\u6574\u9ed8\u8ba4\u7684\u6548\u679c\n    v_dash_array = pow(2.0, 20.0 - u_Zoom) * u_dash_array / total_Distance;\n  }\n\n  if(u_animate.x == Animate) {\n      v_distance_ratio = segmentIndex / segmentNumber;\n  }\n\n  float nextSegmentRatio = getSegmentRatio(segmentIndex + indexDir);\n  v_distance_ratio = segmentIndex / segmentNumber;\n  vec4 curr = project_position(vec4(degrees(interpolate(source, target, angularDist, segmentRatio)), 0.0, 1.0));\n  vec4 next = project_position(vec4(degrees(interpolate(source, target, angularDist, nextSegmentRatio)), 0.0, 1.0));\n  // v_normal = getNormal((next.xy - curr.xy) * indexDir, a_Position.y);\n  vec2 offset = project_pixel(getExtrusionOffset((next.xy - curr.xy) * indexDir, a_Position.y));\n  //  vec4 project_pos = project_position(vec4(curr.xy, 0, 1.0));\n  // gl_Position = project_common_position_to_clipspace(vec4(curr.xy + offset, curr.z, 1.0));\n\n  styleMappingMat[3].g = a_Position.x; // \u8be5\u9876\u70b9\u5728\u5f27\u7ebf\u4e0a\u7684\u5206\u6bb5\u6392\u5e8f\n  if(LineTexture == u_line_texture) { // \u5f00\u542f\u8d34\u56fe\u6a21\u5f0f  \n    // float mapZoomScale = u_CoordinateSystem !== COORDINATE_SYSTEM_P20_2?10000000.0:1.0;\n    float d_arcDistrance = length(source - target);\n    if(u_CoordinateSystem == COORDINATE_SYSTEM_P20) { // amap\n      d_arcDistrance = d_arcDistrance * 1000000.0;\n    }\n    if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) { // mapbox\n      d_arcDistrance = project_pixel_allmap(d_arcDistrance);\n    }\n    float d_pixelLen = project_pixel(u_icon_step)/8.0;\n    styleMappingMat[3].b = floor(d_arcDistrance/d_pixelLen); // \u8d34\u56fe\u5728\u5f27\u7ebf\u4e0a\u91cd\u590d\u7684\u6570\u91cf\n\n    float lineOffsetWidth = length(offset + offset * sign(a_Position.y)); // \u7ebf\u6a2a\u5411\u504f\u79fb\u7684\u8ddd\u79bb\n    float linePixelSize = project_pixel(a_Size);  // \u5b9a\u70b9\u4f4d\u7f6e\u504f\u79fb\uff0c\u6309\u5730\u56fe\u7b49\u7ea7\u7f29\u653e\u540e\u7684\u8ddd\u79bb\n    styleMappingMat[3].a = lineOffsetWidth/linePixelSize;  // \u7ebf\u56fe\u5c42\u8d34\u56fe\u90e8\u5206\u7684 v \u5750\u6807\u503c\n\n    v_iconMapUV = a_iconMapUV;\n  }\n\n  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x\n    gl_Position = u_Mvp * (vec4(curr.xy + offset, curr.z, 1.0));\n  } else {\n    gl_Position = project_common_position_to_clipspace(vec4(curr.xy + offset, curr.z, 1.0));\n  }\n  setPickingColor(a_PickingColor);\n}\n\n',jx={solid:0,dash:1},Ix=function(t){Object(st["a"])(n,t);var e=kx(n);function n(){var t;Object(et["a"])(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return t=e.call.apply(e,[this].concat(i)),Object(Ar["a"])(Object(ft["a"])(t),"updateTexture",(function(){var e=t.rendererService.createTexture2D;if(t.texture)return t.texture.update({data:t.iconService.getCanvas()}),void t.layer.render();t.texture=e({data:t.iconService.getCanvas(),mag:Rp.NEAREST,min:Rp.NEAREST,premultiplyAlpha:!1,width:1024,height:t.iconService.canvasHeight||128})})),t}return Object(nt["a"])(n,[{key:"getUninforms",value:function(){var t=this.layer.getLayerConfig(),e=t.opacity,n=void 0===e?1:e,r=t.sourceColor,i=t.targetColor,o=t.textureBlend,a=void 0===o?"normal":o,s=t.lineType,u=void 0===s?"solid":s,c=t.dashArray,l=void 0===c?[10,5]:c,f=t.lineTexture,h=void 0!==f&&f,p=t.iconStep,d=void 0===p?100:p,v=t.segmentNumber,g=void 0===v?30:v;2===l.length&&l.push(0,0),this.rendererService.getDirty()&&this.texture.bind();var m=0,y=[0,0,0,0],_=[0,0,0,0];if(r&&i&&(y=li(r),_=li(i),m=1),this.dataTextureTest&&this.dataTextureNeedUpdate({opacity:n})){this.judgeStyleAttributes({opacity:n});var b=this.layer.getEncodedData(),x=this.calDataFrame(this.cellLength,b,this.cellProperties),w=x.data,E=x.width,S=x.height;this.rowCount=S,this.dataTexture=this.cellLength>0&&w.length>0?this.createTexture2D({flipY:!0,data:w,format:Rp.LUMINANCE,type:Rp.FLOAT,width:E,height:S}):this.createTexture2D({flipY:!0,data:[1],format:Rp.LUMINANCE,type:Rp.FLOAT,width:1,height:1})}return{u_dataTexture:this.dataTexture,u_cellTypeLayout:this.getCellTypeLayout(),u_opacity:Object(K["isNumber"])(n)?n:1,u_textureBlend:"normal"===a?0:1,segmentNumber:g,u_line_type:jx[u]||0,u_dash_array:l,u_texture:this.texture,u_line_texture:h?1:0,u_icon_step:d,u_textSize:[1024,this.iconService.canvasHeight||128],u_linearColor:m,u_sourceColor:y,u_targetColor:_}}},{key:"getAnimateUniforms",value:function(){var t=this.layer.getLayerConfig(),e=t.animateOption;return{u_animate:this.animateOption2Array(e),u_time:this.layer.getLayerAnimateTime()}}},{key:"initModels",value:function(){var t=Object(mi["a"])(_i.a.mark((function t(){return _i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.updateTexture(),this.iconService.on("imageUpdate",this.updateTexture),t.next=4,this.buildModels();case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"clearModels",value:function(){var t,e;null===(t=this.texture)||void 0===t||t.destroy(),null===(e=this.dataTexture)||void 0===e||e.destroy(),this.iconService.off("imageUpdate",this.updateTexture)}},{key:"buildModels",value:function(){var t=Object(mi["a"])(_i.a.mark((function t(){var e,n,r,i,o,a;return _i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=this.layer.getLayerConfig(),n=e.mask,r=void 0!==n&&n,i=e.maskInside,o=void 0===i||i,t.next=3,this.layer.buildLayerModel({moduleName:"lineGreatCircle",vertexShader:Rx,fragmentShader:Px,triangulation:tx,depth:{enable:!1},blend:this.getBlend(),stencil:gi(r,o)});case 3:return a=t.sent,t.abrupt("return",[a]);case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"registerBuiltinAttributes",value:function(){var t=this;this.styleAttributeService.registerStyleAttribute({name:"size",type:ey.Attribute,descriptor:{name:"a_Size",buffer:{usage:Rp.DYNAMIC_DRAW,data:[],type:Rp.FLOAT},size:1,update:function(t){var e=t.size,n=void 0===e?1:e;return Array.isArray(n)?[n[0]]:[n]}}}),this.styleAttributeService.registerStyleAttribute({name:"instance",type:ey.Attribute,descriptor:{name:"a_Instance",buffer:{usage:Rp.STATIC_DRAW,data:[],type:Rp.FLOAT},size:4,update:function(t,e,n){return[n[3],n[4],n[5],n[6]]}}}),this.styleAttributeService.registerStyleAttribute({name:"uv",type:ey.Attribute,descriptor:{name:"a_iconMapUV",buffer:{usage:Rp.DYNAMIC_DRAW,data:[],type:Rp.FLOAT},size:2,update:function(e){var n=t.iconService.getIconMap(),r=e.texture,i=n[r]||{x:0,y:0},o=i.x,a=i.y;return[o,a]}}})}}]),n}(db);function Lx(t){var e=Nx();return function(){var n,r=Object(ct["a"])(t);if(e){var i=Object(ct["a"])(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(ut["a"])(this,n)}}function Nx(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}var Dx,Fx,Bx,zx,Ux='#define COORDINATE_SYSTEM_LNGLAT 1.0        // mapbox\n#define COORDINATE_SYSTEM_LNGLAT_OFFSET 2.0 // mapbox offset\n#define COORDINATE_SYSTEM_VECTOR_TILE 3.0\n#define COORDINATE_SYSTEM_IDENTITY 4.0\n#define COORDINATE_SYSTEM_P20 5.0           // amap\n#define COORDINATE_SYSTEM_P20_OFFSET 6.0    // amap offset\n#define COORDINATE_SYSTEM_METER_OFFSET 7.0\n\n#define COORDINATE_SYSTEM_P20_2 8.0         // amap2.0\nuniform float u_CoordinateSystem;\nvarying vec4 v_color;\nuniform float u_arrow: 0.0;\nuniform float u_linearColor: 0;\nuniform vec4 u_sourceColor;\nuniform vec4 u_targetColor;\n\n#pragma include "picking"\n\nvarying mat4 styleMappingMat;\nvoid main() {\n  float distanceAndIndex = styleMappingMat[0][3];\n  float miter = styleMappingMat[0][2];\n\n  float opacity = styleMappingMat[0][0];\n  float d_distance_ratio = styleMappingMat[3].r; // \u5f53\u524d\u70b9\u4f4d\u8ddd\u79bb\u5360\u7ebf\u603b\u957f\u7684\u6bd4\u4f8b\n\n\n  if(u_arrow > 0.0 && distanceAndIndex < 2.0) { // arrow\n    if(u_CoordinateSystem == COORDINATE_SYSTEM_P20 || u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET) { \n      if(cross(vec3(styleMappingMat[1].rg, 0.0), vec3(styleMappingMat[1].ba, 0.0)).z < 0.0) { // amap\n        discard;\n      }\n    } else { // amap2 mapbox map\n      if(cross(vec3(styleMappingMat[1].rg, 0.0), vec3(styleMappingMat[1].ba, 0.0)).z > 0.0) { \n        discard;\n      }\n    }\n  } else { // line body\n    if(miter < 0.0) {\n      discard;\n    }\n  }\n\n\n  if(u_linearColor == 1.0) { // \u4f7f\u7528\u6e10\u53d8\u989c\u8272\n    gl_FragColor = mix(u_sourceColor, u_targetColor, d_distance_ratio);\n  } else { // \u4f7f\u7528 color \u65b9\u6cd5\u4f20\u5165\u7684\u989c\u8272\n    gl_FragColor = v_color;\n  }\n\n  gl_FragColor.a *= opacity; // \u5168\u5c40\u900f\u660e\u5ea6\n  gl_FragColor = filterColor(gl_FragColor);\n}\n',Vx='attribute float a_Miter;\nattribute vec4 a_Color;\nattribute vec2 a_Size;\nattribute vec3 a_Normal;\nattribute vec3 a_Position;\n\n// dash line\nattribute vec4 a_dirPoints;\nattribute vec3 a_DistanceAndIndex;\n\nuniform vec4 u_lineDir;\n\nuniform mat4 u_ModelMatrix;\nuniform mat4 u_Mvp;\n\n#pragma include "projection"\n#pragma include "picking"\n\nvarying vec4 v_color;\n\nuniform float u_linearColor: 0;\nuniform float u_arrow: 0.0;\nuniform float u_arrowHeight: 3.0;\nuniform float u_arrowWidth: 2.0;\nuniform float u_tailWidth: 1.0;\n\nuniform float u_opacity: 1.0;\nvarying mat4 styleMappingMat; // \u7528\u4e8e\u5c06\u5728\u9876\u70b9\u7740\u8272\u5668\u4e2d\u8ba1\u7b97\u597d\u7684\u6837\u5f0f\u503c\u4f20\u9012\u7ed9\u7247\u5143\n\n#pragma include "styleMapping"\n#pragma include "styleMappingCalOpacity"\n\nvec2 calculateArrow(vec2 offset) {\n  /*\n  * \u5728\u652f\u6301\u7bad\u5934\u7684\u65f6\u5019\uff0c\u7b2c\u4e8c\u3001\u7b2c\u4e09\u7ec4\u9876\u70b9\u662f\u989d\u5916\u63d2\u5165\u7528\u4e8e\u6784\u5efa\u9876\u70b9\u7684\n  */\n  float arrowFlag = -1.0;\n  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) {\n    // \u9ad8\u5fb7 2.0 \u7684\u65cb\u8f6c\u89d2\u5ea6\u4e0d\u540c\n    arrowFlag = 1.0;\n  }\n  float pi = arrowFlag * 3.1415926/2.;\n  if(a_Miter < 0.) {\n    // \u6839\u636e\u7ebf\u7684\u4e24\u4fa7\u504f\u79fb\u4e0d\u540c\u3001\u65cb\u8f6c\u7684\u65b9\u5411\u76f8\u53cd\n    pi = -pi;\n  }\n  highp float angle_sin = sin(pi);\n  highp float angle_cos = cos(pi);\n  // \u8ba1\u7b97\u5782\u76f4\u4e0e\u7ebf\u65b9\u5411\u7684\u65cb\u8f6c\u77e9\u9635\n  mat2 rotation_matrix = mat2(angle_cos, -1.0 * angle_sin, angle_sin, angle_cos);\n  float arrowWidth = u_arrowWidth;\n  float arrowHeight = u_arrowHeight;\n\n  vec2 arrowOffset = vec2(0.0);\n  /*\n  * a_DistanceAndIndex.y \u7528\u4e8e\u6807\u8bb0\u5f53\u524d\u9876\u70b9\u5c5e\u4e8e\u54ea\u4e00\u7ec4\uff08\u4e24\u4e2a\u9876\u70b9\u4e00\u7ec4\uff0c\u6784\u6210\u7ebf\u7684\u5176\u5b9e\u662f\u77e9\u5f62\uff0c\u6700\u7b80\u9700\u8981\u56db\u4e2a\u9876\u70b9\u3001\u4e24\u7ec4\u9876\u70b9\u6784\u6210\uff09\n  */\n  if(a_DistanceAndIndex.y == 0.0) {\n    // \u7bad\u5934\u5c16\u90e8\n    offset = vec2(0.0);\n  } else if(a_DistanceAndIndex.y == 1.0) {\n    // \u7bad\u5934\u4e24\u4fa7\n    arrowOffset = rotation_matrix*(offset * arrowHeight);\n    offset += arrowOffset; // \u6cbf\u7ebf\u504f\u79fb\n    offset = offset * arrowWidth; // \u5782\u76f4\u7ebf\u5411\u5916\u504f\u79fb\uff08\u662f\u6784\u5efa\u7bad\u5934\u4e24\u4fa7\u7684\u9876\u70b9\uff09\n  } else if(a_DistanceAndIndex.y == 2.0 || a_DistanceAndIndex.y == 3.0 || a_DistanceAndIndex.y == 4.0) {\n    // \u504f\u79fb\u5176\u4f59\u7684\u70b9\u4f4d\uff08\u5c06\u957f\u5ea6\u8ba9\u4f4d\u7ed9\u7bad\u5934\uff09\n    arrowOffset = rotation_matrix*(offset * arrowHeight) * arrowWidth;\n    offset += arrowOffset;// \u6cbf\u7ebf\u504f\u79fb\n  }\n\n  return offset;\n}\n\nvoid main() {\n  // cal style mapping - \u6570\u636e\u7eb9\u7406\u6620\u5c04\u90e8\u5206\u7684\u8ba1\u7b97\n  styleMappingMat = mat4(\n    0.0, 0.0, 0.0, 0.0, // opacity - strokeOpacity - a_Miter - a_DistanceAndIndex\n    0.0, 0.0, 0.0, 0.0, // originX - originY - vectorX - vectorY\n    0.0, 0.0, 0.0, 0.0, // offsets[0] - offsets[1]\n    0.0, 0.0, 0.0, 0.0  // distance_ratio/distance/pixelLen/texV\n  );\n  styleMappingMat[0][3] = a_DistanceAndIndex.y;\n  styleMappingMat[0][2] = a_Miter;\n\n  float rowCount = u_cellTypeLayout[0][0];    // \u5f53\u524d\u7684\u6570\u636e\u7eb9\u7406\u6709\u51e0\u884c\n  float columnCount = u_cellTypeLayout[0][1]; // \u5f53\u770b\u5230\u6570\u636e\u7eb9\u7406\u6709\u51e0\u5217\n  float columnWidth = 1.0/columnCount;  // \u5217\u5bbd\n  float rowHeight = 1.0/rowCount;       // \u884c\u9ad8\n  float cellCount = calCellCount(); // opacity - strokeOpacity - strokeWidth - stroke - offsets\n  float id = a_vertexId; // \u7b2cn\u4e2a\u9876\u70b9\n  float cellCurrentRow = floor(id * cellCount / columnCount) + 1.0; // \u8d77\u59cb\u70b9\u5728\u7b2c\u51e0\u884c\n  float cellCurrentColumn = mod(id * cellCount, columnCount) + 1.0; // \u8d77\u59cb\u70b9\u5728\u7b2c\u51e0\u5217\n  \n  // cell \u56fa\u5b9a\u987a\u5e8f opacity -> strokeOpacity -> strokeWidth -> stroke ... \n  // \u6309\u987a\u5e8f\u4ece cell \u4e2d\u53d6\u503c\u3001\u82e5\u6ca1\u6709\u5219\u81ea\u52a8\u5f80\u4e0b\u53d6\u503c\n  float textureOffset = 0.0; // \u5728 cell \u4e2d\u53d6\u503c\u7684\u504f\u79fb\u91cf\n\n  vec2 opacityAndOffset = calOpacityAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);\n  styleMappingMat[0][0] = opacityAndOffset.r;\n  textureOffset = opacityAndOffset.g;\n  // cal style mapping - \u6570\u636e\u7eb9\u7406\u6620\u5c04\u90e8\u5206\u7684\u8ba1\u7b97\n\n\n  v_color = a_Color;\n\n  vec3 size = a_Miter * setPickingSize(a_Size.x) * reverse_offset_normal(a_Normal);\n  \n  vec2 offset = project_pixel(size.xy);\n\n  // styleMappingMat[1].rg = a_Position.xy + offset;\n\n  vec2 copyOffset = vec2(offset.x, offset.y);\n\n  float lineDistance = a_DistanceAndIndex.x;\n  float total_Distance = a_DistanceAndIndex.z;\n  float currentLinePointRatio = lineDistance / total_Distance;\n \n  if(u_arrow > 0.0) {\n      //  \u8ba1\u7b97\u7bad\u5934\n    offset = calculateArrow(offset);\n\n    if(a_DistanceAndIndex.y > 4.0) {\n      offset *= mix(1.0, u_tailWidth, currentLinePointRatio);\n    }\n  }\n\n  float lineOffsetWidth = length(offset + offset * sign(a_Miter)); // \u7ebf\u6a2a\u5411\u504f\u79fb\u7684\u8ddd\u79bb\uff08\u5411\u4e24\u4fa7\u504f\u79fb\u7684\u548c\uff09\n  float linePixelSize = project_pixel(a_Size.x) * 2.0;  // \u5b9a\u70b9\u4f4d\u7f6e\u504f\u79fb\uff0c\u6309\u5730\u56fe\u7b49\u7ea7\u7f29\u653e\u540e\u7684\u8ddd\u79bb \u5355\u4fa7 * 2\n\n  // \u8bbe\u7f6e\u6570\u636e\u96c6\u7684\u53c2\u6570\n  styleMappingMat[3][0] = currentLinePointRatio; // \u5f53\u524d\u70b9\u4f4d\u8ddd\u79bb\u5360\u7ebf\u603b\u957f\u7684\u6bd4\u4f8b\n  styleMappingMat[3][1] = lineDistance;       // \u5f53\u524d\u9876\u70b9\u7684\u8ddd\u79bb\n\n  vec4 project_pos = project_position(vec4(a_Position.xy, 0, 1.0));\n\n  // gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, a_Size.y, 1.0));\n\n  float h = float(a_Position.z); // \u7ebf\u9876\u70b9\u7684\u9ad8\u5ea6 - \u517c\u5bb9\u4e0d\u5b58\u5728\u7b2c\u4e09\u4e2a\u6570\u503c\u7684\u60c5\u51b5 vertex height\n  float lineHeight = a_Size.y; // size \u7b2c\u4e8c\u4e2a\u53c2\u6570\u4ee3\u8868\u7684\u9ad8\u5ea6 [linewidth, lineheight]\n\n  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x\n    lineHeight *= 0.2; // \u4fdd\u6301\u548c amap/mapbox \u4e00\u81f4\u7684\u6548\u679c\n    gl_Position = u_Mvp * (vec4(project_pos.xy + offset, lineHeight, 1.0));\n  } else {\n    gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, lineHeight, 1.0));\n  }\n  \n  if(u_arrow > 0.0 && a_DistanceAndIndex.y < 2.0) {\n    vec2 startPoint = a_dirPoints.rg;\n    vec2 endPoint = a_dirPoints.ba;\n    vec4 t1 = project_position(vec4(startPoint, 0, 1.0));\n    vec4 t2 = project_position(vec4(endPoint, 0, 1.0));\n    // TODO\uff1a \u540e\u7eed\u4f18\u5316\u53ef\u4ee5\u628a\u4f4d\u7f6e\u8ba1\u7b97\u653e\u5728 cpu \u4e2d\u5b8c\u6210\n    if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x\n      vec2 p1 = (u_Mvp * vec4(t1.xy, 0.0, 1.0)).xy;\n      vec2 p2 = (u_Mvp * vec4(t2.xy, 0.0, 1.0)).xy;\n      styleMappingMat[1].rg = normalize(p1 - p2);\n      styleMappingMat[1].ba = normalize(gl_Position.xy - p2);\n    } else {\n      vec2 p1 = project_common_position_to_clipspace(vec4(t1.xy, 0.0, 1.0)).xy;\n      vec2 p2 = project_common_position_to_clipspace(vec4(t2.xy, 0.0, 1.0)).xy;\n      styleMappingMat[1].rg = normalize(p1 - p2);\n      styleMappingMat[1].ba = normalize(gl_Position.xy - p2);\n    }\n  }\n\n  setPickingColor(a_PickingColor);\n}\n',Hx=function(t){Object(st["a"])(n,t);var e=Lx(n);function n(){return Object(et["a"])(this,n),e.apply(this,arguments)}return Object(nt["a"])(n,[{key:"getUninforms",value:function(){var t=this.layer.getLayerConfig(),e=t.opacity,n=void 0===e?1:e,r=t.sourceColor,i=t.targetColor,o=t.arrow,a=void 0===o?{enable:!1,arrowWidth:2,arrowHeight:3,tailWidth:1}:o,s=0,u=[0,0,0,0],c=[0,0,0,0];if(r&&i&&(u=li(r),c=li(i),s=1),this.dataTextureTest&&this.dataTextureNeedUpdate({opacity:n})){this.judgeStyleAttributes({opacity:n});var l=this.layer.getEncodedData(),f=this.calDataFrame(this.cellLength,l,this.cellProperties),h=f.data,p=f.width,d=f.height;this.rowCount=d,this.dataTexture=this.cellLength>0&&h.length>0?this.createTexture2D({flipY:!0,data:h,format:Rp.LUMINANCE,type:Rp.FLOAT,width:p,height:d}):this.createTexture2D({flipY:!0,data:[1],format:Rp.LUMINANCE,type:Rp.FLOAT,width:1,height:1})}return{u_dataTexture:this.dataTexture,u_cellTypeLayout:this.getCellTypeLayout(),u_opacity:Object(K["isNumber"])(n)?n:1,u_linearColor:s,u_sourceColor:u,u_targetColor:c,u_arrow:Number(a.enable),u_arrowHeight:a.arrowHeight||3,u_arrowWidth:a.arrowWidth||2,u_tailWidth:void 0===a.tailWidth?1:a.tailWidth}}},{key:"initModels",value:function(){var t=Object(mi["a"])(_i.a.mark((function t(){return _i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.buildModels();case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"clearModels",value:function(){var t;null===(t=this.dataTexture)||void 0===t||t.destroy()}},{key:"buildModels",value:function(){var t=Object(mi["a"])(_i.a.mark((function t(){var e,n,r,i,o,a,s,u,c,l,f;return _i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=this.layer.getLayerConfig(),n=e.mask,r=void 0!==n&&n,i=e.maskInside,o=void 0===i||i,a=e.depth,s=void 0!==a&&a,u=this.getShaders(),c=u.frag,l=u.vert,this.layer.triangulation=Gb,t.next=5,this.layer.buildLayerModel({moduleName:"lineHalf",vertexShader:l,fragmentShader:c,triangulation:Gb,depth:{enable:s},blend:this.getBlend(),stencil:gi(r,o)});case 5:return f=t.sent,t.abrupt("return",[f]);case 7:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"getShaders",value:function(){return{frag:Ux,vert:Vx,type:"normal"}}},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"distanceAndIndex",type:ey.Attribute,descriptor:{name:"a_DistanceAndIndex",buffer:{usage:Rp.STATIC_DRAW,data:[],type:Rp.FLOAT},size:3,update:function(t,e,n,r,i,o){return void 0===o?[n[3],10,n[5]]:[n[3],o,n[5]]}}}),this.styleAttributeService.registerStyleAttribute({name:"dirPoints",type:ey.Attribute,descriptor:{name:"a_dirPoints",buffer:{usage:Rp.STATIC_DRAW,data:[],type:Rp.FLOAT},size:4,update:function(t){var e=t.coordinates[0]||[0,0],n=t.coordinates[3]||[0,0];return[e[0],e[1],n[0],n[1]]}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:ey.Attribute,descriptor:{name:"a_Size",buffer:{usage:Rp.DYNAMIC_DRAW,data:[],type:Rp.FLOAT},size:2,update:function(t){var e=t.size,n=void 0===e?1:e;return Array.isArray(n)?[n[0],n[1]]:[n,0]}}}),this.styleAttributeService.registerStyleAttribute({name:"normal",type:ey.Attribute,descriptor:{name:"a_Normal",buffer:{usage:Rp.STATIC_DRAW,data:[],type:Rp.FLOAT},size:3,update:function(t,e,n,r,i){return i}}}),this.styleAttributeService.registerStyleAttribute({name:"miter",type:ey.Attribute,descriptor:{name:"a_Miter",buffer:{usage:Rp.STATIC_DRAW,data:[],type:Rp.FLOAT},size:1,update:function(t,e,n){return[n[4]]}}})}}]),n}(db);function Gx(t){var e=Wx();return function(){var n,r=Object(ct["a"])(t);if(e){var i=Object(ct["a"])(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(ut["a"])(this,n)}}function Wx(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(function(t){t[t["solid"]=0]="solid",t[t["dash"]=1]="dash"})(Dx||(Dx={})),function(t){t["VERTICAL"]="vertical",t["HORIZONTAL"]="horizontal"}(Fx||(Fx={})),function(t){t["NORMAL"]="normal",t["REPLACE"]="replace"}(Bx||(Bx={})),function(t){t["ALWAYS"]="always",t["DRAGEND"]="dragend"}(zx||(zx={}));var Zx='#define LineTypeSolid 0.0\nuniform float u_opacity : 1.0;\n\nvarying vec4 v_color;\n\n// dash\nvarying vec4 v_dash_array;\n\n#pragma include "picking"\n\nuniform float u_time;\nuniform vec4 u_animate: [ 1., 2., 1.0, 0.2 ]; // \u63a7\u5236\u8fd0\u52a8\n\nvarying mat4 styleMappingMat;\n// [animate, duration, interval, trailLength],\nvoid main() {\n  float opacity = styleMappingMat[0][0];\n  float d_distance_ratio = styleMappingMat[3].r; // \u5f53\u524d\u70b9\u4f4d\u8ddd\u79bb\u5360\u7ebf\u603b\u957f\u7684\u6bd4\u4f8b\n  gl_FragColor = v_color;\n  gl_FragColor.a *= opacity; // \u5168\u5c40\u900f\u660e\u5ea6\n \n  float dashLength = mod(d_distance_ratio, v_dash_array.x + v_dash_array.y + v_dash_array.z + v_dash_array.w);\n  if(dashLength < v_dash_array.x || (dashLength > (v_dash_array.x + v_dash_array.y) && dashLength <  v_dash_array.x + v_dash_array.y + v_dash_array.z)) {\n    // \u5b9e\u7ebf\u90e8\u5206\n  } else {\n    // \u865a\u7ebf\u90e8\u5206\n    discard;\n  };\n\n  gl_FragColor = filterColor(gl_FragColor);\n}\n',Yx='#define LineTypeSolid 0.0\n#define LineTypeDash 1.0\n#define Animate 0.0\n\nattribute float a_Miter;\nattribute vec4 a_Color;\nattribute vec2 a_Size;\nattribute vec3 a_Normal;\nattribute vec3 a_Position;\n\nattribute vec2 a_iconMapUV;\n\n// dash line\nattribute float a_Total_Distance;\nattribute vec2 a_DistanceAndIndex;\n\nuniform mat4 u_ModelMatrix;\nuniform mat4 u_Mvp;\nuniform vec4 u_dash_array: [10.0, 5., 0, 0];\n\nuniform float u_vertexScale: 1.0;\n\n#pragma include "projection"\n#pragma include "picking"\n\nvarying vec4 v_color;\nvarying vec4 v_dash_array;\n\nuniform float u_opacity: 1.0;\nvarying mat4 styleMappingMat; // \u7528\u4e8e\u5c06\u5728\u9876\u70b9\u7740\u8272\u5668\u4e2d\u8ba1\u7b97\u597d\u7684\u6837\u5f0f\u503c\u4f20\u9012\u7ed9\u7247\u5143\n\n#pragma include "styleMapping"\n#pragma include "styleMappingCalOpacity"\n\nvoid main() {\n  // cal style mapping - \u6570\u636e\u7eb9\u7406\u6620\u5c04\u90e8\u5206\u7684\u8ba1\u7b97\n  styleMappingMat = mat4(\n    0.0, 0.0, 0.0, 0.0, // opacity - strokeOpacity - strokeWidth - empty\n    0.0, 0.0, 0.0, 0.0, // strokeR - strokeG - strokeB - strokeA\n    0.0, 0.0, 0.0, 0.0, // offsets[0] - offsets[1]\n    0.0, 0.0, 0.0, 0.0  // distance_ratio/distance/pixelLen/texV\n  );\n\n  float rowCount = u_cellTypeLayout[0][0];    // \u5f53\u524d\u7684\u6570\u636e\u7eb9\u7406\u6709\u51e0\u884c\n  float columnCount = u_cellTypeLayout[0][1]; // \u5f53\u770b\u5230\u6570\u636e\u7eb9\u7406\u6709\u51e0\u5217\n  float columnWidth = 1.0/columnCount;  // \u5217\u5bbd\n  float rowHeight = 1.0/rowCount;       // \u884c\u9ad8\n  float cellCount = calCellCount(); // opacity - strokeOpacity - strokeWidth - stroke - offsets\n  float id = a_vertexId; // \u7b2cn\u4e2a\u9876\u70b9\n  float cellCurrentRow = floor(id * cellCount / columnCount) + 1.0; // \u8d77\u59cb\u70b9\u5728\u7b2c\u51e0\u884c\n  float cellCurrentColumn = mod(id * cellCount, columnCount) + 1.0; // \u8d77\u59cb\u70b9\u5728\u7b2c\u51e0\u5217\n  \n  // cell \u56fa\u5b9a\u987a\u5e8f opacity -> strokeOpacity -> strokeWidth -> stroke ... \n  // \u6309\u987a\u5e8f\u4ece cell \u4e2d\u53d6\u503c\u3001\u82e5\u6ca1\u6709\u5219\u81ea\u52a8\u5f80\u4e0b\u53d6\u503c\n  float textureOffset = 0.0; // \u5728 cell \u4e2d\u53d6\u503c\u7684\u504f\u79fb\u91cf\n\n  vec2 opacityAndOffset = calOpacityAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);\n  styleMappingMat[0][0] = opacityAndOffset.r;\n  textureOffset = opacityAndOffset.g;\n  // cal style mapping - \u6570\u636e\u7eb9\u7406\u6620\u5c04\u90e8\u5206\u7684\u8ba1\u7b97\n\n  v_dash_array = pow(2.0, 20.0 - u_Zoom) * u_dash_array / a_Total_Distance;\n  v_color = a_Color;\n\n  vec3 size = a_Miter * setPickingSize(a_Size.x) * reverse_offset_normal(a_Normal);\n  vec2 offset = project_pixel(size.xy);\n\n  // \u8bbe\u7f6e\u6570\u636e\u96c6\u7684\u53c2\u6570\n  styleMappingMat[3][0] = a_DistanceAndIndex.x / a_Total_Distance; // \u5f53\u524d\u70b9\u4f4d\u8ddd\u79bb\u5360\u7ebf\u603b\u957f\u7684\u6bd4\u4f8b\n  styleMappingMat[3][1] = a_DistanceAndIndex.x;       // \u5f53\u524d\u9876\u70b9\u7684\u8ddd\u79bb\n\n  vec4 project_pos = project_position(vec4(a_Position.xy, 0, 1.0));\n\n  // gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, a_Size.y, 1.0));\n\n  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x\n    gl_Position = u_Mvp * (vec4(project_pos.xy + offset, project_pixel(a_Size.y), 1.0));\n  } else {\n    float lineHeight = a_Size.y;\n \n    // #define COORDINATE_SYSTEM_P20 5.0\n    // #define COORDINATE_SYSTEM_P20_OFFSET 6.0\n    // amap1.x\n    if(u_CoordinateSystem == COORDINATE_SYSTEM_P20 || u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET) {\n      // \u4fdd\u6301\u9ad8\u5ea6\u76f8\u5bf9\u4e0d\u53d8\n      lineHeight *= pow(2.0, 20.0 - u_Zoom);\n    }\n\n    gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, lineHeight, 1.0));\n  }\n\n  setPickingColor(a_PickingColor);\n}\n',Xx='#define Animate 0.0\n#define LineTexture 1.0\nuniform float u_opacity : 1.0;\nuniform float u_textureBlend;\n\nuniform float u_borderWidth: 0.0;\n\nuniform vec3 u_blur;\nuniform vec4 u_borderColor;\nvarying vec4 v_color;\n\n// line texture\nuniform float u_line_texture;\nuniform sampler2D u_texture;\nuniform vec2 u_textSize;\n\nvarying vec2 v_iconMapUV;\n\n#pragma include "picking"\n\nuniform float u_time;\nuniform vec4 u_animate: [ 1, 2., 1.0, 0.2 ]; // \u63a7\u5236\u8fd0\u52a8\n\nvarying mat4 styleMappingMat;\n// [animate, duration, interval, trailLength],\nvoid main() {\n  float opacity = styleMappingMat[0][0];\n  float animateSpeed = 0.0; // \u8fd0\u52a8\u901f\u5ea6\n  float d_distance_ratio = styleMappingMat[3].r; // \u5f53\u524d\u70b9\u4f4d\u8ddd\u79bb\u5360\u7ebf\u603b\u957f\u7684\u6bd4\u4f8b\n  gl_FragColor = v_color;\n  // anti-alias\n  // float blur = 1.0 - smoothstep(u_blur, 1., length(v_normal.xy));\n  gl_FragColor.a *= opacity; // \u5168\u5c40\u900f\u660e\u5ea6\n  if(u_animate.x == Animate) {\n      animateSpeed = u_time / u_animate.y;\n       float alpha =1.0 - fract( mod(1.0- d_distance_ratio, u_animate.z)* (1.0/ u_animate.z) + animateSpeed);\n      alpha = (alpha + u_animate.w -1.0) / u_animate.w;\n      alpha = smoothstep(0., 1., alpha);\n      gl_FragColor.a *= alpha;\n  }\n\n  if(u_line_texture == LineTexture) { // while load texture\n    float aDistance = styleMappingMat[3].g;      // \u5f53\u524d\u9876\u70b9\u7684\u8ddd\u79bb\n    float d_texPixelLen = styleMappingMat[3].b;  // \u8d34\u56fe\u7684\u50cf\u7d20\u957f\u5ea6\uff0c\u6839\u636e\u5730\u56fe\u5c42\u7ea7\u7f29\u653e\n    float u = fract(mod(aDistance, d_texPixelLen)/d_texPixelLen - animateSpeed);\n    float v = styleMappingMat[3].a;  // \u7ebf\u56fe\u5c42\u8d34\u56fe\u90e8\u5206\u7684 v \u5750\u6807\u503c\n\n    // v = max(smoothstep(0.95, 1.0, v), v);\n    vec2 uv= v_iconMapUV / u_textSize + vec2(u, v) / u_textSize * 64.;\n    \n    // gl_FragColor = filterColor(gl_FragColor + texture2D(u_texture, vec2(u, v)));\n    // gl_FragColor = filterColor(gl_FragColor + texture2D(u_texture, uv));\n     vec4 pattern = texture2D(u_texture, uv);\n\n    if(u_textureBlend == 0.0) { // normal\n      pattern.a = 0.0;\n      gl_FragColor += pattern;\n    } else { // replace\n        pattern.a *= opacity;\n        if(gl_FragColor.a <= 0.0) {\n          pattern.a = 0.0;\n        }\n        gl_FragColor = pattern;\n    }\n  } \n\n  float v = styleMappingMat[3].a;\n  float borderWidth = min(0.5, u_borderWidth);\n  // \u7ed8\u5236 border\n  if(borderWidth > 0.01) {\n    float borderOuterWidth = borderWidth/2.0;\n\n    if(v >= 1.0 - borderWidth || v <= borderWidth) {\n      if(v > borderWidth) {\n        float linear = smoothstep(0.0, 1.0, (v - (1.0 - borderWidth))/borderWidth);\n        gl_FragColor.rgb = mix(gl_FragColor.rgb, u_borderColor.rgb, linear);\n      } else if(v <= borderWidth) {\n        float linear = smoothstep(0.0, 1.0, v/borderWidth);\n        gl_FragColor.rgb = mix(u_borderColor.rgb, gl_FragColor.rgb, linear);\n      }\n    }\n\n    if(v < borderOuterWidth) {\n      gl_FragColor.a = mix(0.0, gl_FragColor.a, v/borderOuterWidth);\n    } else if(v > 1.0 - borderOuterWidth) {\n      gl_FragColor.a = mix(gl_FragColor.a, 0.0, (v - (1.0 - borderOuterWidth))/borderOuterWidth);\n    }\n  }\n\n  // blur\n  float blurV = styleMappingMat[3][3];\n  if(blurV < 0.5) {\n    gl_FragColor.a *= mix(u_blur.r, u_blur.g, blurV/0.5);\n  } else {\n    gl_FragColor.a *= mix(u_blur.g, u_blur.b, (blurV - 0.5)/0.5);\n  }\n  \n  gl_FragColor = filterColor(gl_FragColor);\n}\n',qx='\n#define Animate 0.0\n\nattribute float a_Miter;\nattribute vec4 a_Color;\nattribute vec2 a_Size;\nattribute vec3 a_Normal;\nattribute vec3 a_Position;\n\nattribute vec2 a_iconMapUV;\n\n// dash line\nattribute float a_Total_Distance;\nattribute vec2 a_DistanceAndIndex;\n\nuniform mat4 u_ModelMatrix;\nuniform mat4 u_Mvp;\nuniform vec4 u_animate: [ 1., 2., 1.0, 0.2 ];\nuniform float u_icon_step: 100;\n\nuniform float u_heightfixed: 0.0;\nuniform float u_vertexScale: 1.0;\nuniform float u_raisingHeight: 0.0;\n\n#pragma include "projection"\n#pragma include "picking"\n\nvarying vec4 v_color;\n\n// texV \u7ebf\u56fe\u5c42 - \u8d34\u56fe\u90e8\u5206\u7684 v \u5750\u6807\uff08\u7ebf\u7684\u5bbd\u5ea6\u65b9\u5411\uff09\nvarying vec2 v_iconMapUV;\n\n\nuniform float u_linearColor: 0;\nuniform float u_arrow: 0.0;\nuniform float u_arrowHeight: 3.0;\nuniform float u_arrowWidth: 2.0;\nuniform float u_tailWidth: 1.0;\n\nuniform float u_opacity: 1.0;\nvarying mat4 styleMappingMat; // \u7528\u4e8e\u5c06\u5728\u9876\u70b9\u7740\u8272\u5668\u4e2d\u8ba1\u7b97\u597d\u7684\u6837\u5f0f\u503c\u4f20\u9012\u7ed9\u7247\u5143\n\n#pragma include "styleMapping"\n#pragma include "styleMappingCalOpacity"\n\nvec2 calculateArrow(vec2 offset) {\n  /*\n  * \u5728\u652f\u6301\u7bad\u5934\u7684\u65f6\u5019\uff0c\u7b2c\u4e8c\u3001\u7b2c\u4e09\u7ec4\u9876\u70b9\u662f\u989d\u5916\u63d2\u5165\u7528\u4e8e\u6784\u5efa\u9876\u70b9\u7684\n  */\n  float arrowFlag = -1.0;\n  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) {\n    // \u9ad8\u5fb7 2.0 \u7684\u65cb\u8f6c\u89d2\u5ea6\u4e0d\u540c\n    arrowFlag = 1.0;\n  }\n  float pi = arrowFlag * 3.1415926/2.;\n  if(a_Miter < 0.) {\n    // \u6839\u636e\u7ebf\u7684\u4e24\u4fa7\u504f\u79fb\u4e0d\u540c\u3001\u65cb\u8f6c\u7684\u65b9\u5411\u76f8\u53cd\n    pi = -pi;\n  }\n  highp float angle_sin = sin(pi);\n  highp float angle_cos = cos(pi);\n  // \u8ba1\u7b97\u5782\u76f4\u4e0e\u7ebf\u65b9\u5411\u7684\u65cb\u8f6c\u77e9\u9635\n  mat2 rotation_matrix = mat2(angle_cos, -1.0 * angle_sin, angle_sin, angle_cos);\n  float arrowWidth = u_arrowWidth;\n  float arrowHeight = u_arrowHeight;\n\n  vec2 arrowOffset = vec2(0.0);\n  /*\n  * a_DistanceAndIndex.y \u7528\u4e8e\u6807\u8bb0\u5f53\u524d\u9876\u70b9\u5c5e\u4e8e\u54ea\u4e00\u7ec4\uff08\u4e24\u4e2a\u9876\u70b9\u4e00\u7ec4\uff0c\u6784\u6210\u7ebf\u7684\u5176\u5b9e\u662f\u77e9\u5f62\uff0c\u6700\u7b80\u9700\u8981\u56db\u4e2a\u9876\u70b9\u3001\u4e24\u7ec4\u9876\u70b9\u6784\u6210\uff09\n  */\n  if(a_DistanceAndIndex.y == 0.0) {\n    // \u7bad\u5934\u5c16\u90e8\n    offset = vec2(0.0);\n  } else if(a_DistanceAndIndex.y == 1.0) {\n    // \u7bad\u5934\u4e24\u4fa7\n    arrowOffset = rotation_matrix*(offset * arrowHeight);\n    offset += arrowOffset; // \u6cbf\u7ebf\u504f\u79fb\n    offset = offset * arrowWidth; // \u5782\u76f4\u7ebf\u5411\u5916\u504f\u79fb\uff08\u662f\u6784\u5efa\u7bad\u5934\u4e24\u4fa7\u7684\u9876\u70b9\uff09\n  } else if(a_DistanceAndIndex.y == 2.0 || a_DistanceAndIndex.y == 3.0 || a_DistanceAndIndex.y == 4.0) {\n    // \u504f\u79fb\u5176\u4f59\u7684\u70b9\u4f4d\uff08\u5c06\u957f\u5ea6\u8ba9\u4f4d\u7ed9\u7bad\u5934\uff09\n    arrowOffset = rotation_matrix*(offset * arrowHeight) * arrowWidth;\n    offset += arrowOffset;// \u6cbf\u7ebf\u504f\u79fb\n  }\n\n  return offset;\n}\n\nvoid main() {\n  // cal style mapping - \u6570\u636e\u7eb9\u7406\u6620\u5c04\u90e8\u5206\u7684\u8ba1\u7b97\n  styleMappingMat = mat4(\n    0.0, 0.0, 0.0, 0.0, // opacity - strokeOpacity - strokeWidth - empty\n    0.0, 0.0, 0.0, 0.0, // strokeR - strokeG - strokeB - strokeA\n    0.0, 0.0, 0.0, 0.0, // offsets[0] - offsets[1]\n    0.0, 0.0, 0.0, 0.0  // distance_ratio/distance/pixelLen/texV\n  );\n\n  float rowCount = u_cellTypeLayout[0][0];    // \u5f53\u524d\u7684\u6570\u636e\u7eb9\u7406\u6709\u51e0\u884c\n  float columnCount = u_cellTypeLayout[0][1]; // \u5f53\u770b\u5230\u6570\u636e\u7eb9\u7406\u6709\u51e0\u5217\n  float columnWidth = 1.0/columnCount;  // \u5217\u5bbd\n  float rowHeight = 1.0/rowCount;       // \u884c\u9ad8\n  float cellCount = calCellCount(); // opacity - strokeOpacity - strokeWidth - stroke - offsets\n  float id = a_vertexId; // \u7b2cn\u4e2a\u9876\u70b9\n  float cellCurrentRow = floor(id * cellCount / columnCount) + 1.0; // \u8d77\u59cb\u70b9\u5728\u7b2c\u51e0\u884c\n  float cellCurrentColumn = mod(id * cellCount, columnCount) + 1.0; // \u8d77\u59cb\u70b9\u5728\u7b2c\u51e0\u5217\n  \n  // cell \u56fa\u5b9a\u987a\u5e8f opacity -> strokeOpacity -> strokeWidth -> stroke ... \n  // \u6309\u987a\u5e8f\u4ece cell \u4e2d\u53d6\u503c\u3001\u82e5\u6ca1\u6709\u5219\u81ea\u52a8\u5f80\u4e0b\u53d6\u503c\n  float textureOffset = 0.0; // \u5728 cell \u4e2d\u53d6\u503c\u7684\u504f\u79fb\u91cf\n\n  vec2 opacityAndOffset = calOpacityAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);\n  styleMappingMat[0][0] = opacityAndOffset.r;\n  textureOffset = opacityAndOffset.g;\n  // cal style mapping - \u6570\u636e\u7eb9\u7406\u6620\u5c04\u90e8\u5206\u7684\u8ba1\u7b97\n\n  float d_texPixelLen;    // \u8d34\u56fe\u7684\u50cf\u7d20\u957f\u5ea6\uff0c\u6839\u636e\u5730\u56fe\u5c42\u7ea7\u7f29\u653e\n\n  v_iconMapUV = a_iconMapUV;\n  d_texPixelLen = project_float_pixel(u_icon_step);\n  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) {\n    d_texPixelLen *= 10.0;\n  }\n\n  v_color = a_Color;\n\n  vec3 size = a_Miter * setPickingSize(a_Size.x) * reverse_offset_normal(a_Normal);\n  \n  vec2 offset = project_pixel(size.xy);\n\n  float lineDistance = a_DistanceAndIndex.x;\n  float currentLinePointRatio = lineDistance / a_Total_Distance;\n \n  if(u_arrow > 0.0) {\n      //  \u8ba1\u7b97\u7bad\u5934\n    offset = calculateArrow(offset);\n\n    if(a_DistanceAndIndex.y > 4.0) {\n      offset *= mix(1.0, u_tailWidth, currentLinePointRatio);\n    }\n  }\n\n  float lineOffsetWidth = length(offset + offset * sign(a_Miter)); // \u7ebf\u6a2a\u5411\u504f\u79fb\u7684\u8ddd\u79bb\uff08\u5411\u4e24\u4fa7\u504f\u79fb\u7684\u548c\uff09\n  float linePixelSize = project_pixel(a_Size.x) * 2.0;  // \u5b9a\u70b9\u4f4d\u7f6e\u504f\u79fb\uff0c\u6309\u5730\u56fe\u7b49\u7ea7\u7f29\u653e\u540e\u7684\u8ddd\u79bb \u5355\u4fa7 * 2\n  float texV = lineOffsetWidth/linePixelSize; // \u7ebf\u56fe\u5c42\u8d34\u56fe\u90e8\u5206\u7684 v \u5750\u6807\u503c\n\n  // \u8bbe\u7f6e\u6570\u636e\u96c6\u7684\u53c2\u6570\n  styleMappingMat[3][0] = currentLinePointRatio; // \u5f53\u524d\u70b9\u4f4d\u8ddd\u79bb\u5360\u7ebf\u603b\u957f\u7684\u6bd4\u4f8b\n  styleMappingMat[3][1] = lineDistance;       // \u5f53\u524d\u9876\u70b9\u7684\u8ddd\u79bb\n  styleMappingMat[3][2] = d_texPixelLen;    // \u8d34\u56fe\u7684\u50cf\u7d20\u957f\u5ea6\uff0c\u6839\u636e\u5730\u56fe\u5c42\u7ea7\u7f29\u653e\n  styleMappingMat[3][3] = texV;             // \u7ebf\u56fe\u5c42\u8d34\u56fe\u90e8\u5206\u7684 v \u5750\u6807\u503c\n\n  vec4 project_pos = project_position(vec4(a_Position.xy, 0, 1.0));\n\n  // gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, a_Size.y, 1.0));\n\n  float h = float(a_Position.z) * u_vertexScale; // \u7ebf\u9876\u70b9\u7684\u9ad8\u5ea6 - \u517c\u5bb9\u4e0d\u5b58\u5728\u7b2c\u4e09\u4e2a\u6570\u503c\u7684\u60c5\u51b5 vertex height\n  float lineHeight = a_Size.y; // size \u7b2c\u4e8c\u4e2a\u53c2\u6570\u4ee3\u8868\u7684\u9ad8\u5ea6 [linewidth, lineheight]\n\n  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x\n    lineHeight *= 0.2; // \u4fdd\u6301\u548c amap/mapbox \u4e00\u81f4\u7684\u6548\u679c\n    h *= 0.2;\n    if(u_heightfixed < 1.0) {\n      lineHeight = project_pixel(a_Size.y);\n    }\n    gl_Position = u_Mvp * (vec4(project_pos.xy + offset, lineHeight + h + u_raisingHeight, 1.0));\n  } else {\n    // mapbox -  amap\n    \n    // \u517c\u5bb9 mapbox \u5728\u7ebf\u9ad8\u5ea6\u4e0a\u7684\u6548\u679c\u8868\u73b0\u57fa\u672c\u4e00\u81f4\n    if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {\n      // mapbox\n      // \u4fdd\u6301\u9ad8\u5ea6\u76f8\u5bf9\u4e0d\u53d8\n      float mapboxZoomScale = 4.0/pow(2.0, 21.0 - u_Zoom);\n      h *= mapboxZoomScale;\n      h += u_raisingHeight * mapboxZoomScale;\n      if(u_heightfixed > 0.0) {\n        lineHeight *= mapboxZoomScale;\n      }\n      \n    } else {\n      // amap\n      h += u_raisingHeight;\n      // lineHeight \u9876\u70b9\u504f\u79fb\u9ad8\u5ea6\n      if(u_heightfixed < 1.0) {\n        lineHeight *= pow(2.0, 20.0 - u_Zoom);\n      }\n    }\n\n    gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, lineHeight + h, 1.0));\n  }\n\n  setPickingColor(a_PickingColor);\n}\n',Kx='varying vec4 v_color;\nuniform float u_linearDir: 1.0;\nuniform float u_linearColor: 0;\nuniform vec4 u_sourceColor;\nuniform vec4 u_targetColor;\n\n#pragma include "picking"\n\n\nvarying mat4 styleMappingMat;\n\nvoid main() {\n  float opacity = styleMappingMat[0][0];\n  float linearRadio = styleMappingMat[3][0]; // \u5f53\u524d\u70b9\u4f4d\u8ddd\u79bb\u5360\u7ebf\u603b\u957f\u7684\u6bd4\u4f8b\n  if(u_linearDir < 1.0) {\n    linearRadio = styleMappingMat[3][3];\n  }\n\n  if(u_linearColor == 1.0) { // \u4f7f\u7528\u6e10\u53d8\u989c\u8272\n    gl_FragColor = mix(u_sourceColor, u_targetColor, linearRadio);\n  } else { // \u4f7f\u7528 color \u65b9\u6cd5\u4f20\u5165\u7684\u989c\u8272\n     gl_FragColor = v_color;\n  }\n\n  gl_FragColor.a *= opacity; // \u5168\u5c40\u900f\u660e\u5ea6\n  gl_FragColor = filterColor(gl_FragColor);\n}\n',Qx={solid:0,dash:1},$x=function(t){Object(st["a"])(n,t);var e=Gx(n);function n(){var t;Object(et["a"])(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return t=e.call.apply(e,[this].concat(i)),Object(Ar["a"])(Object(ft["a"])(t),"texture",t.createTexture2D({data:[0,0,0,0],mag:Rp.NEAREST,min:Rp.NEAREST,premultiplyAlpha:!1,width:1,height:1})),Object(Ar["a"])(Object(ft["a"])(t),"dataTexture",t.createTexture2D({flipY:!0,data:[1],format:Rp.LUMINANCE,type:Rp.FLOAT,width:1,height:1})),Object(Ar["a"])(Object(ft["a"])(t),"updateTexture",(function(){var e=t.rendererService.createTexture2D;if(t.texture)return t.texture.update({data:t.iconService.getCanvas()}),void t.layer.render();t.texture=e({data:t.iconService.getCanvas(),mag:Rp.NEAREST,min:Rp.NEAREST,premultiplyAlpha:!1,width:1024,height:t.iconService.canvasHeight||128})})),t}return Object(nt["a"])(n,[{key:"getUninforms",value:function(){var t=this.layer.getLayerConfig(),e=t.opacity,n=void 0===e?1:e,r=t.sourceColor,i=t.targetColor,o=t.textureBlend,a=void 0===o?"normal":o,s=t.lineType,u=void 0===s?"solid":s,c=t.dashArray,l=void 0===c?[10,5,0,0]:c,f=t.lineTexture,h=void 0!==f&&f,p=t.iconStep,d=void 0===p?100:p,v=t.vertexHeightScale,g=void 0===v?20:v,m=t.borderWidth,y=void 0===m?0:m,_=t.borderColor,b=void 0===_?"#ccc":_,x=t.raisingHeight,w=void 0===x?0:x,E=t.heightfixed,S=void 0!==E&&E,O=t.linearDir,C=void 0===O?Fx.VERTICAL:O,T=t.blur,A=void 0===T?[1,1,1]:T,k=t.arrow,M=void 0===k?{enable:!1,arrowWidth:2,arrowHeight:3,tailWidth:1}:k;2===l.length&&l.push(0,0),this.rendererService.getDirty()&&this.texture&&this.texture.bind();var P=0,R=[0,0,0,0],j=[0,0,0,0];if(r&&i&&(R=li(r),j=li(i),P=1),this.dataTextureTest&&this.dataTextureNeedUpdate({opacity:n})){this.judgeStyleAttributes({opacity:n});var I=this.layer.getEncodedData(),L=this.calDataFrame(this.cellLength,I,this.cellProperties),N=L.data,D=L.width,F=L.height;this.rowCount=F,this.dataTexture=this.cellLength>0&&N.length>0?this.createTexture2D({flipY:!0,data:N,format:Rp.LUMINANCE,type:Rp.FLOAT,width:D,height:F}):this.createTexture2D({flipY:!0,data:[1],format:Rp.LUMINANCE,type:Rp.FLOAT,width:1,height:1})}return{u_dataTexture:this.dataTexture,u_cellTypeLayout:this.getCellTypeLayout(),u_opacity:Object(K["isNumber"])(n)?n:1,u_textureBlend:a===Bx.NORMAL?0:1,u_line_type:Qx[u],u_dash_array:l,u_blur:A,u_texture:this.texture,u_line_texture:h?1:0,u_icon_step:d,u_textSize:[1024,this.iconService.canvasHeight||128],u_borderWidth:y,u_borderColor:li(b),u_linearDir:C===Fx.VERTICAL?1:0,u_linearColor:P,u_sourceColor:R,u_targetColor:j,u_heightfixed:Number(S),u_vertexScale:g,u_raisingHeight:Number(w),u_arrow:Number(M.enable),u_arrowHeight:M.arrowHeight||3,u_arrowWidth:M.arrowWidth||2,u_tailWidth:void 0===M.tailWidth?1:M.tailWidth}}},{key:"getAnimateUniforms",value:function(){var t=this.layer.getLayerConfig(),e=t.animateOption;return{u_animate:this.animateOption2Array(e),u_time:this.layer.getLayerAnimateTime()}}},{key:"initModels",value:function(){var t=Object(mi["a"])(_i.a.mark((function t(){return _i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.buildModels();case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"clearModels",value:function(){var t,e;null===(t=this.texture)||void 0===t||t.destroy(),null===(e=this.dataTexture)||void 0===e||e.destroy(),this.iconService.off("imageUpdate",this.updateTexture)}},{key:"buildModels",value:function(){var t=Object(mi["a"])(_i.a.mark((function t(){var e,n,r,i,o,a,s,u,c,l,f,h,p,d,v;return _i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=this.layer.getLayerConfig(),n=e.mask,r=void 0!==n&&n,i=e.maskInside,o=void 0===i||i,a=e.depth,s=void 0!==a&&a,u=e.workerEnabled,c=void 0!==u&&u,l=e.enablePicking,f=this.getShaders(),h=f.frag,p=f.vert,d=f.type,this.layer.triangulation=_c,t.next=5,this.layer.buildLayerModel({moduleName:"line"+d,vertexShader:p,fragmentShader:h,triangulation:_c,depth:{enable:s},blend:this.getBlend(),stencil:gi(r,o),workerEnabled:c,workerOptions:{modelType:"line"+d,enablePicking:l,iconMap:this.iconService.getIconMap()}});case 5:return v=t.sent,t.abrupt("return",[v]);case 7:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"getShaders",value:function(){var t=this.layer.getLayerConfig(),e=t.sourceColor,n=t.targetColor,r=t.lineType;return"dash"===r?{frag:Zx,vert:Yx,type:"Dash"}:e&&n?{frag:Kx,vert:qx,type:"Linear"}:{frag:Xx,vert:qx,type:""}}},{key:"registerBuiltinAttributes",value:function(){var t=this;this.styleAttributeService.registerStyleAttribute({name:"distanceAndIndex",type:ey.Attribute,descriptor:{name:"a_DistanceAndIndex",buffer:{usage:Rp.STATIC_DRAW,data:[],type:Rp.FLOAT},size:2,update:function(t,e,n,r,i,o){return void 0===o?[n[3],10]:[n[3],o]}}}),this.styleAttributeService.registerStyleAttribute({name:"total_distance",type:ey.Attribute,descriptor:{name:"a_Total_Distance",buffer:{usage:Rp.STATIC_DRAW,data:[],type:Rp.FLOAT},size:1,update:function(t,e,n){return[n[5]]}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:ey.Attribute,descriptor:{name:"a_Size",buffer:{usage:Rp.DYNAMIC_DRAW,data:[],type:Rp.FLOAT},size:2,update:function(t){var e=t.size,n=void 0===e?1:e;return Array.isArray(n)?[n[0],n[1]]:[n,0]}}}),this.styleAttributeService.registerStyleAttribute({name:"normal",type:ey.Attribute,descriptor:{name:"a_Normal",buffer:{usage:Rp.STATIC_DRAW,data:[],type:Rp.FLOAT},size:3,update:function(t,e,n,r,i){return i}}}),this.styleAttributeService.registerStyleAttribute({name:"miter",type:ey.Attribute,descriptor:{name:"a_Miter",buffer:{usage:Rp.STATIC_DRAW,data:[],type:Rp.FLOAT},size:1,update:function(t,e,n){return[n[4]]}}}),this.styleAttributeService.registerStyleAttribute({name:"uv",type:ey.Attribute,descriptor:{name:"a_iconMapUV",buffer:{usage:Rp.DYNAMIC_DRAW,data:[],type:Rp.FLOAT},size:2,update:function(e){var n=t.iconService.getIconMap(),r=e.texture,i=n[r]||{x:0,y:0},o=i.x,a=i.y;return[o,a]}}})}}]),n}(db);function Jx(t){var e=tw();return function(){var n,r=Object(ct["a"])(t);if(e){var i=Object(ct["a"])(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(ut["a"])(this,n)}}function tw(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}var ew='uniform float u_opacity : 1.0;\nuniform sampler2D u_texture;\nuniform float u_linearDir: 1.0;\n\n#pragma include "picking"\n\nvarying mat4 styleMappingMat;\n\nvoid main() {\n  float opacity = styleMappingMat[0][0];\n  float linearRadio = styleMappingMat[3].r; // \u5f53\u524d\u70b9\u4f4d\u8ddd\u79bb\u5360\u7ebf\u603b\u957f\u7684\u6bd4\u4f8b\n  if(u_linearDir < 1.0) {\n    linearRadio = styleMappingMat[3][3];\n  }\n\n  gl_FragColor = texture2D(u_texture, vec2(linearRadio, 0.5));\n\n  gl_FragColor.a *= opacity; // \u5168\u5c40\u900f\u660e\u5ea6\n  gl_FragColor = filterColor(gl_FragColor);\n}\n',nw='\nattribute float a_Miter;\nattribute vec2 a_Size;\nattribute vec3 a_Normal;\nattribute vec3 a_Position;\n\n// dash line\nattribute float a_Total_Distance;\nattribute vec2 a_DistanceAndIndex;\n\nuniform mat4 u_ModelMatrix;\nuniform mat4 u_Mvp;\n\nuniform float u_heightfixed: 0.0;\nuniform float u_vertexScale: 1.0;\nuniform float u_raisingHeight: 0.0;\n\nuniform float u_opacity: 1.0;\n\n#pragma include "projection"\n#pragma include "picking"\n\nvarying mat4 styleMappingMat; // \u7528\u4e8e\u5c06\u5728\u9876\u70b9\u7740\u8272\u5668\u4e2d\u8ba1\u7b97\u597d\u7684\u6837\u5f0f\u503c\u4f20\u9012\u7ed9\u7247\u5143\n\n#pragma include "styleMapping"\n#pragma include "styleMappingCalOpacity"\n\nvoid main() {\n  // cal style mapping - \u6570\u636e\u7eb9\u7406\u6620\u5c04\u90e8\u5206\u7684\u8ba1\u7b97\n  styleMappingMat = mat4(\n    0.0, 0.0, 0.0, 0.0, // opacity - strokeOpacity - strokeWidth - empty\n    0.0, 0.0, 0.0, 0.0, // strokeR - strokeG - strokeB - strokeA\n    0.0, 0.0, 0.0, 0.0, // offsets[0] - offsets[1]\n    0.0, 0.0, 0.0, 0.0  // distance_ratio/distance/pixelLen/texV\n  );\n\n  float rowCount = u_cellTypeLayout[0][0];    // \u5f53\u524d\u7684\u6570\u636e\u7eb9\u7406\u6709\u51e0\u884c\n  float columnCount = u_cellTypeLayout[0][1]; // \u5f53\u770b\u5230\u6570\u636e\u7eb9\u7406\u6709\u51e0\u5217\n  float columnWidth = 1.0/columnCount;  // \u5217\u5bbd\n  float rowHeight = 1.0/rowCount;       // \u884c\u9ad8\n  float cellCount = calCellCount(); // opacity - strokeOpacity - strokeWidth - stroke - offsets\n  float id = a_vertexId; // \u7b2cn\u4e2a\u9876\u70b9\n  float cellCurrentRow = floor(id * cellCount / columnCount) + 1.0; // \u8d77\u59cb\u70b9\u5728\u7b2c\u51e0\u884c\n  float cellCurrentColumn = mod(id * cellCount, columnCount) + 1.0; // \u8d77\u59cb\u70b9\u5728\u7b2c\u51e0\u5217\n  \n  // cell \u56fa\u5b9a\u987a\u5e8f opacity -> strokeOpacity -> strokeWidth -> stroke ... \n  // \u6309\u987a\u5e8f\u4ece cell \u4e2d\u53d6\u503c\u3001\u82e5\u6ca1\u6709\u5219\u81ea\u52a8\u5f80\u4e0b\u53d6\u503c\n  float textureOffset = 0.0; // \u5728 cell \u4e2d\u53d6\u503c\u7684\u504f\u79fb\u91cf\n\n  vec2 opacityAndOffset = calOpacityAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);\n  styleMappingMat[0][0] = opacityAndOffset.r;\n  textureOffset = opacityAndOffset.g;\n  // cal style mapping - \u6570\u636e\u7eb9\u7406\u6620\u5c04\u90e8\u5206\u7684\u8ba1\u7b97\n\n  vec3 size = a_Miter * setPickingSize(a_Size.x) * reverse_offset_normal(a_Normal);\n  \n  vec2 offset = project_pixel(size.xy);\n\n  float lineDistance = a_DistanceAndIndex.x;\n  float currentLinePointRatio = lineDistance / a_Total_Distance;\n \n\n  float lineOffsetWidth = length(offset + offset * sign(a_Miter)); // \u7ebf\u6a2a\u5411\u504f\u79fb\u7684\u8ddd\u79bb\uff08\u5411\u4e24\u4fa7\u504f\u79fb\u7684\u548c\uff09\n  float linePixelSize = project_pixel(a_Size.x) * 2.0;  // \u5b9a\u70b9\u4f4d\u7f6e\u504f\u79fb\uff0c\u6309\u5730\u56fe\u7b49\u7ea7\u7f29\u653e\u540e\u7684\u8ddd\u79bb \u5355\u4fa7 * 2\n  float texV = lineOffsetWidth/linePixelSize; // \u7ebf\u56fe\u5c42\u8d34\u56fe\u90e8\u5206\u7684 v \u5750\u6807\u503c\n\n  // \u8bbe\u7f6e\u6570\u636e\u96c6\u7684\u53c2\u6570\n  styleMappingMat[3][0] = currentLinePointRatio; // \u5f53\u524d\u70b9\u4f4d\u8ddd\u79bb\u5360\u7ebf\u603b\u957f\u7684\u6bd4\u4f8b\n  styleMappingMat[3][3] = texV;             // \u7ebf\u56fe\u5c42\u8d34\u56fe\u90e8\u5206\u7684 v \u5750\u6807\u503c\n\n  vec4 project_pos = project_position(vec4(a_Position.xy, 0, 1.0));\n\n  // gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, a_Size.y, 1.0));\n\n  float h = float(a_Position.z) * u_vertexScale; // \u7ebf\u9876\u70b9\u7684\u9ad8\u5ea6 - \u517c\u5bb9\u4e0d\u5b58\u5728\u7b2c\u4e09\u4e2a\u6570\u503c\u7684\u60c5\u51b5 vertex height\n  float lineHeight = a_Size.y; // size \u7b2c\u4e8c\u4e2a\u53c2\u6570\u4ee3\u8868\u7684\u9ad8\u5ea6 [linewidth, lineheight]\n\n  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x\n    lineHeight *= 0.2; // \u4fdd\u6301\u548c amap/mapbox \u4e00\u81f4\u7684\u6548\u679c\n    h *= 0.2;\n    if(u_heightfixed < 1.0) {\n      lineHeight = project_pixel(a_Size.y);\n    }\n    gl_Position = u_Mvp * (vec4(project_pos.xy + offset, lineHeight + h + u_raisingHeight, 1.0));\n  } else {\n    // mapbox -  amap\n    \n    // \u517c\u5bb9 mapbox \u5728\u7ebf\u9ad8\u5ea6\u4e0a\u7684\u6548\u679c\u8868\u73b0\u57fa\u672c\u4e00\u81f4\n    if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {\n      // mapbox\n      // \u4fdd\u6301\u9ad8\u5ea6\u76f8\u5bf9\u4e0d\u53d8\n      float mapboxZoomScale = 4.0/pow(2.0, 21.0 - u_Zoom);\n      h *= mapboxZoomScale;\n      h += u_raisingHeight * mapboxZoomScale;\n      if(u_heightfixed > 0.0) {\n        lineHeight *= mapboxZoomScale;\n      }\n      \n    } else {\n      // amap\n      h += u_raisingHeight;\n      // lineHeight \u9876\u70b9\u504f\u79fb\u9ad8\u5ea6\n      if(u_heightfixed < 1.0) {\n        lineHeight *= pow(2.0, 20.0 - u_Zoom);\n      }\n    }\n\n    gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, lineHeight + h, 1.0));\n  }\n\n  setPickingColor(a_PickingColor);\n}\n',rw=function(t){Object(st["a"])(n,t);var e=Jx(n);function n(){var t;Object(et["a"])(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return t=e.call.apply(e,[this].concat(i)),Object(Ar["a"])(Object(ft["a"])(t),"updateTexture",(function(){var e=t.rendererService.createTexture2D;t.colorTexture&&t.colorTexture.destroy();var n=t.layer.getLayerConfig(),r=n.rampColors,i=pi(r);t.colorTexture=e({data:new Uint8Array(i.data),width:i.width,height:i.height,wrapS:Rp.CLAMP_TO_EDGE,wrapT:Rp.CLAMP_TO_EDGE,min:Rp.NEAREST,mag:Rp.NEAREST,flipY:!1})})),t}return Object(nt["a"])(n,[{key:"getUninforms",value:function(){var t=this.layer.getLayerConfig(),e=t.opacity,n=void 0===e?1:e,r=t.vertexHeightScale,i=void 0===r?20:r,o=t.raisingHeight,a=void 0===o?0:o,s=t.heightfixed,u=void 0!==s&&s,c=t.linearDir,l=void 0===c?Fx.VERTICAL:c;if(this.rendererService.getDirty()&&this.colorTexture.bind(),this.dataTextureTest&&this.dataTextureNeedUpdate({opacity:n})){this.judgeStyleAttributes({opacity:n});var f=this.layer.getEncodedData(),h=this.calDataFrame(this.cellLength,f,this.cellProperties),p=h.data,d=h.width,v=h.height;this.rowCount=v,this.dataTexture=this.cellLength>0&&p.length>0?this.createTexture2D({flipY:!0,data:p,format:Rp.LUMINANCE,type:Rp.FLOAT,width:d,height:v}):this.createTexture2D({flipY:!0,data:[1],format:Rp.LUMINANCE,type:Rp.FLOAT,width:1,height:1})}return{u_dataTexture:this.dataTexture,u_cellTypeLayout:this.getCellTypeLayout(),u_linearDir:l===Fx.VERTICAL?1:0,u_opacity:Object(K["isNumber"])(n)?n:1,u_texture:this.colorTexture,u_heightfixed:Number(u),u_vertexScale:i,u_raisingHeight:Number(a)}}},{key:"initModels",value:function(){var t=Object(mi["a"])(_i.a.mark((function t(){return _i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.updateTexture(),t.next=3,this.buildModels();case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"clearModels",value:function(){var t,e;null===(t=this.colorTexture)||void 0===t||t.destroy(),null===(e=this.dataTexture)||void 0===e||e.destroy()}},{key:"buildModels",value:function(){var t=Object(mi["a"])(_i.a.mark((function t(){var e,n,r,i,o,a,s,u;return _i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=this.layer.getLayerConfig(),n=e.mask,r=void 0!==n&&n,i=e.maskInside,o=void 0===i||i,a=e.depth,s=void 0!==a&&a,this.layer.triangulation=Gb,t.next=4,this.layer.buildLayerModel({moduleName:"lineRampColors",vertexShader:nw,fragmentShader:ew,triangulation:Gb,depth:{enable:s},blend:this.getBlend(),stencil:gi(r,o)});case 4:return u=t.sent,t.abrupt("return",[u]);case 6:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"distanceAndIndex",type:ey.Attribute,descriptor:{name:"a_DistanceAndIndex",buffer:{usage:Rp.STATIC_DRAW,data:[],type:Rp.FLOAT},size:2,update:function(t,e,n,r,i,o){return void 0===o?[n[3],10]:[n[3],o]}}}),this.styleAttributeService.registerStyleAttribute({name:"total_distance",type:ey.Attribute,descriptor:{name:"a_Total_Distance",buffer:{usage:Rp.STATIC_DRAW,data:[],type:Rp.FLOAT},size:1,update:function(t,e,n){return[n[5]]}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:ey.Attribute,descriptor:{name:"a_Size",buffer:{usage:Rp.DYNAMIC_DRAW,data:[],type:Rp.FLOAT},size:2,update:function(t){var e=t.size,n=void 0===e?1:e;return Array.isArray(n)?[n[0],n[1]]:[n,0]}}}),this.styleAttributeService.registerStyleAttribute({name:"normal",type:ey.Attribute,descriptor:{name:"a_Normal",buffer:{usage:Rp.STATIC_DRAW,data:[],type:Rp.FLOAT},size:3,update:function(t,e,n,r,i){return i}}}),this.styleAttributeService.registerStyleAttribute({name:"miter",type:ey.Attribute,descriptor:{name:"a_Miter",buffer:{usage:Rp.STATIC_DRAW,data:[],type:Rp.FLOAT},size:1,update:function(t,e,n){return[n[4]]}}})}}]),n}(db);function iw(t){var e=ow();return function(){var n,r=Object(ct["a"])(t);if(e){var i=Object(ct["a"])(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(ut["a"])(this,n)}}function ow(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}var aw="\nvarying vec4 v_color;\nvarying mat4 styleMappingMat;\nvoid main() {\n  float opacity = styleMappingMat[0][0];\n  float d_distance_ratio = styleMappingMat[3].r; // \u5f53\u524d\u70b9\u4f4d\u8ddd\u79bb\u5360\u7ebf\u603b\u957f\u7684\u6bd4\u4f8b\n\n  gl_FragColor = v_color;\n  gl_FragColor.a *= opacity; // \u5168\u5c40\u900f\u660e\u5ea6\n}\n",sw="uniform vec4 u_sourceColor;\nuniform vec4 u_targetColor;\n\nvarying mat4 styleMappingMat;\nvoid main() {\n  float opacity = styleMappingMat[0][0];\n\n  // styleMappingMat[3][0] \u5f53\u524d\u70b9\u4f4d\u8ddd\u79bb\u5360\u7ebf\u603b\u957f\u7684\u6bd4\u4f8b\n  gl_FragColor = mix(u_sourceColor, u_targetColor, styleMappingMat[3][0]);\n  gl_FragColor.a *= opacity; // \u5168\u5c40\u900f\u660e\u5ea6\n}\n",uw='attribute vec4 a_Color;\nattribute vec2 a_Size;\nattribute vec3 a_Position;\n\nattribute float a_Total_Distance;\nattribute float a_Distance;\n\nuniform mat4 u_ModelMatrix;\nuniform mat4 u_Mvp;\n\nuniform float u_opacity: 1.0;\nuniform float u_vertexScale: 1.0;\n\n#pragma include "projection"\n\nvarying vec4 v_color;\n\nvarying mat4 styleMappingMat; // \u7528\u4e8e\u5c06\u5728\u9876\u70b9\u7740\u8272\u5668\u4e2d\u8ba1\u7b97\u597d\u7684\u6837\u5f0f\u503c\u4f20\u9012\u7ed9\u7247\u5143\n\n#pragma include "styleMapping"\n#pragma include "styleMappingCalOpacity"\n\nvoid main() {\n  // cal style mapping - \u6570\u636e\u7eb9\u7406\u6620\u5c04\u90e8\u5206\u7684\u8ba1\u7b97\n  styleMappingMat = mat4(\n    0.0, 0.0, 0.0, 0.0, // opacity - strokeOpacity - strokeWidth - empty\n    0.0, 0.0, 0.0, 0.0, // strokeR - strokeG - strokeB - strokeA\n    0.0, 0.0, 0.0, 0.0, // offsets[0] - offsets[1]\n    0.0, 0.0, 0.0, 0.0  // distance_ratio/distance/pixelLen/texV\n  );\n\n  float rowCount = u_cellTypeLayout[0][0];    // \u5f53\u524d\u7684\u6570\u636e\u7eb9\u7406\u6709\u51e0\u884c\n  float columnCount = u_cellTypeLayout[0][1]; // \u5f53\u770b\u5230\u6570\u636e\u7eb9\u7406\u6709\u51e0\u5217\n  float columnWidth = 1.0/columnCount;  // \u5217\u5bbd\n  float rowHeight = 1.0/rowCount;       // \u884c\u9ad8\n  float cellCount = calCellCount(); // opacity - strokeOpacity - strokeWidth - stroke - offsets\n  float id = a_vertexId; // \u7b2cn\u4e2a\u9876\u70b9\n  float cellCurrentRow = floor(id * cellCount / columnCount) + 1.0; // \u8d77\u59cb\u70b9\u5728\u7b2c\u51e0\u884c\n  float cellCurrentColumn = mod(id * cellCount, columnCount) + 1.0; // \u8d77\u59cb\u70b9\u5728\u7b2c\u51e0\u5217\n  \n  // cell \u56fa\u5b9a\u987a\u5e8f opacity -> strokeOpacity -> strokeWidth -> stroke ... \n  // \u6309\u987a\u5e8f\u4ece cell \u4e2d\u53d6\u503c\u3001\u82e5\u6ca1\u6709\u5219\u81ea\u52a8\u5f80\u4e0b\u53d6\u503c\n  float textureOffset = 0.0; // \u5728 cell \u4e2d\u53d6\u503c\u7684\u504f\u79fb\u91cf\n\n  vec2 opacityAndOffset = calOpacityAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);\n  styleMappingMat[0][0] = opacityAndOffset.r;\n  textureOffset = opacityAndOffset.g;\n  // cal style mapping - \u6570\u636e\u7eb9\u7406\u6620\u5c04\u90e8\u5206\u7684\u8ba1\u7b97\n\n  \n  v_color = a_Color; \n  styleMappingMat[3][0] = a_Distance / a_Total_Distance;\n\n  vec4 project_pos = project_position(vec4(a_Position.xy, 0, 1.0));\n\n  float h = float(a_Position.z) * u_vertexScale; // \u7ebf\u9876\u70b9\u7684\u9ad8\u5ea6 - \u517c\u5bb9\u4e0d\u5b58\u5728\u7b2c\u4e09\u4e2a\u6570\u503c\u7684\u60c5\u51b5\n\n  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x\n    gl_Position = u_Mvp * (vec4(project_pos.xy, project_pixel(a_Size.y) + h * 0.2, 1.0));\n  } else {\n    float lineHeight = a_Size.y;\n    // \u517c\u5bb9 mapbox \u5728\u7ebf\u9ad8\u5ea6\u4e0a\u7684\u6548\u679c\u8868\u73b0\u57fa\u672c\u4e00\u81f4\n    if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {\n      // \u4fdd\u6301\u9ad8\u5ea6\u76f8\u5bf9\u4e0d\u53d8\n      h *= 2.0/pow(2.0, 20.0 - u_Zoom);\n    }\n\n    // #define COORDINATE_SYSTEM_P20 5.0\n    // #define COORDINATE_SYSTEM_P20_OFFSET 6.0\n    // amap1.x\n    if(u_CoordinateSystem == COORDINATE_SYSTEM_P20 || u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET) {\n      // \u4fdd\u6301\u9ad8\u5ea6\u76f8\u5bf9\u4e0d\u53d8\n      lineHeight *= pow(2.0, 20.0 - u_Zoom);\n    }\n\n    gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy, lineHeight + h, 1.0));\n    gl_PointSize = 10.0;\n  }\n}\n',cw=function(t){Object(st["a"])(n,t);var e=iw(n);function n(){return Object(et["a"])(this,n),e.apply(this,arguments)}return Object(nt["a"])(n,[{key:"getUninforms",value:function(){var t=this.layer.getLayerConfig(),e=t.opacity,n=void 0===e?1:e,r=t.sourceColor,i=t.targetColor,o=t.vertexHeightScale,a=void 0===o?20:o,s=0,u=[0,0,0,0],c=[0,0,0,0];if(r&&i&&(u=li(r),c=li(i),s=1),this.dataTextureTest&&this.dataTextureNeedUpdate({opacity:n})){this.judgeStyleAttributes({opacity:n});var l=this.layer.getEncodedData(),f=this.calDataFrame(this.cellLength,l,this.cellProperties),h=f.data,p=f.width,d=f.height;this.rowCount=d,this.dataTexture=this.cellLength>0&&h.length>0?this.createTexture2D({flipY:!0,data:h,format:Rp.LUMINANCE,type:Rp.FLOAT,width:p,height:d}):this.createTexture2D({flipY:!0,data:[1],format:Rp.LUMINANCE,type:Rp.FLOAT,width:1,height:1})}return{u_dataTexture:this.dataTexture,u_cellTypeLayout:this.getCellTypeLayout(),u_opacity:Object(K["isNumber"])(n)?n:1,u_linearColor:s,u_sourceColor:u,u_targetColor:c,u_vertexScale:a}}},{key:"initModels",value:function(){var t=Object(mi["a"])(_i.a.mark((function t(){return _i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.buildModels();case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"clearModels",value:function(){var t;null===(t=this.dataTexture)||void 0===t||t.destroy()}},{key:"getShaders",value:function(){var t=this.layer.getLayerConfig(),e=t.sourceColor,n=t.targetColor;return e&&n?{frag:sw,vert:uw,type:"lineSimpleLinear"}:{frag:aw,vert:uw,type:"lineSimpleNormal"}}},{key:"buildModels",value:function(){var t=Object(mi["a"])(_i.a.mark((function t(){var e,n,r,i,o,a,s,u,c,l;return _i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=this.layer.getLayerConfig(),n=e.mask,r=void 0!==n&&n,i=e.maskInside,o=void 0===i||i,a=this.getShaders(),s=a.frag,u=a.vert,c=a.type,t.next=4,this.layer.buildLayerModel({moduleName:c,vertexShader:u,fragmentShader:s,triangulation:Wb,primitive:Rp.LINES,depth:{enable:!1},blend:this.getBlend(),stencil:gi(r,o),pick:!1});case 4:return l=t.sent,t.abrupt("return",[l]);case 6:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"distance",type:ey.Attribute,descriptor:{name:"a_Distance",buffer:{usage:Rp.STATIC_DRAW,data:[],type:Rp.FLOAT},size:1,update:function(t,e,n){return[n[3]]}}}),this.styleAttributeService.registerStyleAttribute({name:"total_distance",type:ey.Attribute,descriptor:{name:"a_Total_Distance",buffer:{usage:Rp.STATIC_DRAW,data:[],type:Rp.FLOAT},size:1,update:function(t,e,n){return[n[5]]}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:ey.Attribute,descriptor:{name:"a_Size",buffer:{usage:Rp.DYNAMIC_DRAW,data:[],type:Rp.FLOAT},size:2,update:function(t){var e=t.size,n=void 0===e?1:e;return Array.isArray(n)?[n[0],n[1]]:[n,0]}}})}}]),n}(db);function lw(t){var e=fw();return function(){var n,r=Object(ct["a"])(t);if(e){var i=Object(ct["a"])(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(ut["a"])(this,n)}}function fw(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}var hw='uniform float u_opacity : 1.0;\nvarying vec4 v_color;\n\n#pragma include "picking"\n\nvoid main() {\n  gl_FragColor = v_color;\n  gl_FragColor.a *= u_opacity;\n  gl_FragColor = filterColor(gl_FragColor);\n}\n',pw='attribute float a_Miter;\nattribute vec4 a_Color;\nattribute vec2 a_Size;\nattribute vec3 a_Normal;\nattribute vec3 a_Position;\n\n// uniform vec2 u_tileOrigin;\n// uniform float u_coord;\n\nuniform mat4 u_ModelMatrix;\nuniform mat4 u_Mvp;\n\n\n#pragma include "projection"\n#pragma include "picking"\n\nvarying vec4 v_color;\n\nvoid main() {\n  v_color = a_Color;\n\n  vec3 size = a_Miter * setPickingSize(a_Size.x) * reverse_offset_normal(a_Normal);\n  \n  vec2 offset = project_pixel(size.xy);\n\n  vec4 project_pos = project_position(vec4(a_Position.xy, 0, 1.0));\n\n  // if(u_coord > 0.0) { // \u4f7f\u7528\u7ecf\u7eac\u5ea6\u5750\u6807\n      if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x\n      gl_Position = u_Mvp * (vec4(project_pos.xy + offset, 0.0, 1.0));\n    } else {\n      gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, 0.0, 1.0));\n    }\n  // } else { // \u4f7f\u7528\u504f\u79fb\u5750\u6807\n  //   vec2 pointPos = a_Position.xy;\n  //   vec4 tileWorld = vec4(project_mvt_offset_position(vec4(u_tileOrigin, 0.0, 1.0)).xyz, 1.0); // \u74e6\u7247\u8d77\u59cb\u70b9\u7684\u4e16\u754c\u5750\u6807\n\n  //   vec2 pointOffset =  pointPos *  pow(2.0, u_Zoom); // \u74e6\u7247\u5185\u7684\u70b9\u7684\u504f\u79fb\u5750\u6807\n    \n  //   tileWorld.xy += pointOffset;\n\n  //   tileWorld.xy += offset;\n\n  //   if (u_CoordinateSystem == COORDINATE_SYSTEM_METER_OFFSET || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {\n  //     // Needs to be divided with project_uCommonUnitsPerMeter\n  //     tileWorld.w *= u_PixelsPerMeter.z;\n  //   }\n  //   gl_Position = u_ViewProjectionMatrix * tileWorld + u_ViewportCenterProjection;\n  // }\n\n  setPickingColor(a_PickingColor);\n}\n',dw="uniform float u_opacity : 1.0;\nuniform vec4 u_color;\n\nvoid main() {\n  gl_FragColor = u_color;\n  gl_FragColor.a *= u_opacity;\n}\n",vw='attribute float a_Miter;\nattribute vec4 a_Color;\nattribute vec3 a_Normal;\nattribute vec3 a_Position;\n\nuniform mat4 u_ModelMatrix;\nuniform mat4 u_Mvp;\nuniform float u_size;\n\n#pragma include "projection"\n\nvoid main() {\n\n  vec3 size = a_Miter * u_size * reverse_offset_normal(a_Normal);\n  \n  vec2 offset = project_pixel(size.xy);\n\n  vec4 project_pos = project_position(vec4(a_Position.xy, 0, 1.0));\n\n  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x\n    gl_Position = u_Mvp * (vec4(project_pos.xy + offset, 0.0, 1.0));\n  } else {\n    gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, 0.0, 1.0));\n  }\n}\n',gw=function(t){Object(st["a"])(n,t);var e=lw(n);function n(){return Object(et["a"])(this,n),e.apply(this,arguments)}return Object(nt["a"])(n,[{key:"getUninforms",value:function(){var t=this.layer.getLayerConfig(),e=t.opacity,n=void 0===e?1:e,r=t.usage,i=t.color,o=void 0===i?"#fff":i,a=t.size,s=void 0===a?1:a;return{u_opacity:Number(n),u_color:"basemap"===r?li(o):[0,0,0,0],u_size:"basemap"===r?s:1}}},{key:"initModels",value:function(){var t=Object(mi["a"])(_i.a.mark((function t(){return _i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.buildModels();case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"buildModels",value:function(){var t=Object(mi["a"])(_i.a.mark((function t(){var e,n,r,i,o,a,s,u,c;return _i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=this.layer.getLayerConfig(),n=e.mask,r=void 0!==n&&n,i=e.maskInside,o=void 0===i||i,a=e.depth,s=void 0!==a&&a,u=e.usage,this.layer.triangulation=Gb,t.next=4,this.layer.buildLayerModel({moduleName:"lineTile_"+u,vertexShader:"basemap"===u?vw:pw,fragmentShader:"basemap"===u?dw:hw,triangulation:Gb,blend:this.getBlend(),depth:{enable:s},stencil:gi(r,o),pick:"basemap"!==u});case 4:return c=t.sent,t.abrupt("return",[c]);case 6:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"registerBuiltinAttributes",value:function(){var t=this.layer.getLayerConfig(),e=t.usage;"basemap"!==e&&this.styleAttributeService.registerStyleAttribute({name:"size",type:ey.Attribute,descriptor:{name:"a_Size",buffer:{usage:Rp.DYNAMIC_DRAW,data:[],type:Rp.FLOAT},size:2,update:function(t){var e=t.size,n=void 0===e?1:e;return Array.isArray(n)?[n[0],n[1]]:[n,0]}}}),this.styleAttributeService.registerStyleAttribute({name:"normal",type:ey.Attribute,descriptor:{name:"a_Normal",buffer:{usage:Rp.STATIC_DRAW,data:[],type:Rp.FLOAT},size:3,update:function(t,e,n,r,i){return i}}}),this.styleAttributeService.registerStyleAttribute({name:"miter",type:ey.Attribute,descriptor:{name:"a_Miter",buffer:{usage:Rp.STATIC_DRAW,data:[],type:Rp.FLOAT},size:1,update:function(t,e,n){return[n[4]]}}})}}]),n}(db);function mw(t){var e=yw();return function(){var n,r=Object(ct["a"])(t);if(e){var i=Object(ct["a"])(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(ut["a"])(this,n)}}function yw(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}var _w='#define Animate 0.0\n#define LineTexture 1.0\n\n// line texture\nuniform float u_line_texture;\nuniform sampler2D u_texture;\nuniform vec2 u_textSize;\nuniform float u_linearColor: 0;\nuniform vec4 u_sourceColor;\nuniform vec4 u_targetColor;\nuniform float u_opacity : 1.0;\nuniform float u_textureBlend;\nuniform float u_iconStepCount;\nuniform float u_time;\nuniform vec4 u_animate: [ 1., 2., 1.0, 0.2 ]; // \u63a7\u5236\u8fd0\u52a8\n\nvarying vec2 v_iconMapUV;\nvarying float v_blur;\nvarying float v_radio;\nvarying vec4 v_color;\nvarying vec4 v_dataset;\n\n#pragma include "picking"\n\nvoid main() {\n  float opacity = u_opacity;\n  float animateSpeed = 0.0; // \u8fd0\u52a8\u901f\u5ea6\n  float d_distance_ratio = v_dataset.r; // \u5f53\u524d\u70b9\u4f4d\u8ddd\u79bb\u5360\u7ebf\u603b\u957f\u7684\u6bd4\u4f8b\n  float v = v_dataset.a;\n\n  if(u_linearColor == 1.0) { // \u4f7f\u7528\u6e10\u53d8\u989c\u8272\n    gl_FragColor = mix(u_sourceColor, u_targetColor, v);\n  } else { // \u4f7f\u7528 color \u65b9\u6cd5\u4f20\u5165\u7684\u989c\u8272\n     gl_FragColor = v_color;\n  }\n\n  gl_FragColor.a *= opacity; // \u5168\u5c40\u900f\u660e\u5ea6\n  if(u_animate.x == Animate) {\n      animateSpeed = u_time / u_animate.y;\n       float alpha =1.0 - fract( mod(1.0- d_distance_ratio, u_animate.z)* (1.0/ u_animate.z) + animateSpeed);\n      alpha = (alpha + u_animate.w -1.0) / u_animate.w;\n      alpha = smoothstep(0., 1., alpha);\n      gl_FragColor.a *= alpha;\n  }\n\n  if(u_line_texture == LineTexture) { // while load texture\n    float aDistance = v_dataset.g;      // \u5f53\u524d\u9876\u70b9\u7684\u8ddd\u79bb\n    float d_texPixelLen = v_dataset.b;  // \u8d34\u56fe\u7684\u50cf\u7d20\u957f\u5ea6\uff0c\u6839\u636e\u5730\u56fe\u5c42\u7ea7\u7f29\u653e\n    float u = fract(mod(aDistance, d_texPixelLen)/d_texPixelLen - animateSpeed);\n    float v = v_dataset.a;  // \u7ebf\u56fe\u5c42\u8d34\u56fe\u90e8\u5206\u7684 v \u5750\u6807\u503c\n\n    // \u8ba1\u7b97\u7eb9\u7406\u95f4\u9694 start\n    float flag = 0.0;\n    if(u > 1.0/u_iconStepCount) {\n      flag = 1.0;\n    }\n    u = fract(u*u_iconStepCount);\n    // \u8ba1\u7b97\u7eb9\u7406\u95f4\u9694 end\n\n    vec2 uv= v_iconMapUV / u_textSize + vec2(u, v) / u_textSize * 64.;\n    vec4 pattern = texture2D(u_texture, uv);\n\n    // Tip: \u5224\u65ad\u7eb9\u7406\u95f4\u9694\n    if(flag > 0.0) {\n      pattern = vec4(0.0);\n    }\n\n    if(u_textureBlend == 0.0) { // normal\n      pattern.a = 0.0;\n      gl_FragColor = filterColor(gl_FragColor + pattern);\n    } else { // replace\n        pattern.a *= opacity;\n        if(gl_FragColor.a <= 0.0) {\n          pattern.a = 0.0;\n        }\n        gl_FragColor = filterColor(pattern);\n    }\n  }\n  \n\n  // blur - AA\n  if(v < v_blur) {\n    gl_FragColor.a = mix(0.0, gl_FragColor.a, v/v_blur);\n  } else if(v > 1.0 - v_blur) {\n    gl_FragColor.a = mix(gl_FragColor.a, 0.0, (v - (1.0 - v_blur))/v_blur);\n  }\n\n  gl_FragColor = filterColor(gl_FragColor);\n}\n',bw='#define Animate 0.0\n\nattribute float a_Miter;\nattribute vec4 a_Color;\nattribute vec2 a_Size;\nattribute vec3 a_Normal;\nattribute vec3 a_Position;\nattribute vec2 a_iconMapUV;\nattribute float a_Total_Distance;\nattribute float a_Distance;\n\nuniform mat4 u_ModelMatrix;\nuniform mat4 u_Mvp;\nuniform vec4 u_animate: [ 1., 2., 1.0, 0.2 ];\nuniform float u_icon_step: 100;\nuniform float u_heightfixed;\nuniform float u_linearColor: 0;\n\n#pragma include "projection"\n#pragma include "light"\n#pragma include "picking"\n\n// texV \u7ebf\u56fe\u5c42 - \u8d34\u56fe\u90e8\u5206\u7684 v \u5750\u6807\uff08\u7ebf\u7684\u5bbd\u5ea6\u65b9\u5411\uff09\nvarying vec2 v_iconMapUV;\nvarying vec4 v_color;\nvarying float v_blur;\nvarying float v_radio;\nvarying vec4 v_dataset;\n\nvoid main() {\n\n\n  float d_distance_ratio; // \u5f53\u524d\u70b9\u4f4d\u8ddd\u79bb\u5360\u7ebf\u603b\u957f\u7684\u6bd4\u4f8b\n  float d_texPixelLen;    // \u8d34\u56fe\u7684\u50cf\u7d20\u957f\u5ea6\uff0c\u6839\u636e\u5730\u56fe\u5c42\u7ea7\u7f29\u653e\n\n  v_iconMapUV = a_iconMapUV;\n  if(u_heightfixed < 1.0) {     // \u9ad8\u5ea6\u968f zoom \u8c03\u6574\n    d_texPixelLen = project_pixel(u_icon_step);\n  } else {\n    d_texPixelLen = u_icon_step;\n  }\n  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) {\n    d_texPixelLen *= 10.0;\n  }\n\n  if(u_animate.x == Animate || u_linearColor == 1.0) {\n      d_distance_ratio = a_Distance / a_Total_Distance;\n  }\n\n  float miter = (a_Miter + 1.0)/2.0;\n  // \u8bbe\u7f6e\u6570\u636e\u96c6\u7684\u53c2\u6570\n  v_dataset[0] = d_distance_ratio; // \u5f53\u524d\u70b9\u4f4d\u8ddd\u79bb\u5360\u7ebf\u603b\u957f\u7684\u6bd4\u4f8b\n  v_dataset[1] = a_Distance;       // \u5f53\u524d\u9876\u70b9\u7684\u8ddd\u79bb\n  v_dataset[2] = d_texPixelLen;    // \u8d34\u56fe\u7684\u50cf\u7d20\u957f\u5ea6\uff0c\u6839\u636e\u5730\u56fe\u5c42\u7ea7\u7f29\u653e\n  v_dataset[3] = miter;          // \u7ebf\u56fe\u5c42\u8d34\u56fe\u90e8\u5206\u7684 v \u5750\u6807\u503c 0 - 1\n\n  vec4 project_pos = project_position(vec4(a_Position.xy, 0, 1.0));\n\n  float originSize = a_Size.x;  // \u56fa\u5b9a\u9ad8\u5ea6\n  if(u_heightfixed < 1.0) {     // \u9ad8\u5ea6\u968f zoom \u8c03\u6574\n    originSize = project_float_pixel(a_Size.x);\n  }\n\n  float wallHeight = originSize * miter;\n  float lightWeight = calc_lighting(vec4(project_pos.xy, wallHeight, 1.0));\n\n  v_blur = min(project_float_pixel(2.0) / originSize, 0.05);\n  v_color = vec4(a_Color.rgb * lightWeight, a_Color.w);\n\n  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x\n    gl_Position = u_Mvp * (vec4(project_pos.xy, wallHeight, 1.0));\n  } else {\n    gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy, wallHeight, 1.0));\n  }\n\n  setPickingColor(a_PickingColor);\n}\n',xw=function(t){Object(st["a"])(n,t);var e=mw(n);function n(){var t;Object(et["a"])(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return t=e.call.apply(e,[this].concat(i)),Object(Ar["a"])(Object(ft["a"])(t),"updateTexture",(function(){var e=t.rendererService.createTexture2D;if(t.texture)return t.texture.update({data:t.iconService.getCanvas()}),void t.layer.render();t.texture=e({data:t.iconService.getCanvas(),mag:Rp.NEAREST,min:Rp.NEAREST,premultiplyAlpha:!1,width:1024,height:t.iconService.canvasHeight||128})})),t}return Object(nt["a"])(n,[{key:"getUninforms",value:function(){var t=this.layer.getLayerConfig(),e=t.opacity,n=void 0===e?1:e,r=t.sourceColor,i=t.targetColor,o=t.textureBlend,a=void 0===o?"normal":o,s=t.heightfixed,u=void 0!==s&&s,c=t.lineTexture,l=void 0!==c&&c,f=t.iconStep,h=void 0===f?100:f,p=t.iconStepCount,d=void 0===p?1:p;this.rendererService.getDirty()&&this.texture.bind();var v=0,g=[0,0,0,0],m=[0,0,0,0];return r&&i&&(g=li(r),m=li(i),v=1),{u_heightfixed:Number(u),u_opacity:Object(K["isNumber"])(n)?n:1,u_textureBlend:"normal"===a?0:1,u_texture:this.texture,u_line_texture:l?1:0,u_iconStepCount:d,u_icon_step:h,u_textSize:[1024,this.iconService.canvasHeight||128],u_linearColor:v,u_sourceColor:g,u_targetColor:m}}},{key:"getAnimateUniforms",value:function(){var t=this.layer.getLayerConfig(),e=t.animateOption;return{u_animate:this.animateOption2Array(e),u_time:this.layer.getLayerAnimateTime()}}},{key:"initModels",value:function(){var t=Object(mi["a"])(_i.a.mark((function t(){return _i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.updateTexture(),this.iconService.on("imageUpdate",this.updateTexture),t.next=4,this.buildModels();case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"clearModels",value:function(){var t;null===(t=this.texture)||void 0===t||t.destroy(),this.iconService.off("imageUpdate",this.updateTexture)}},{key:"buildModels",value:function(){var t=Object(mi["a"])(_i.a.mark((function t(){var e;return _i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.layer.buildLayerModel({moduleName:"lineWall",vertexShader:bw,fragmentShader:_w,triangulation:Gb,depth:{enable:!1},blend:this.getBlend()});case 2:return e=t.sent,t.abrupt("return",[e]);case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"registerBuiltinAttributes",value:function(){var t=this;this.styleAttributeService.registerStyleAttribute({name:"distance",type:ey.Attribute,descriptor:{name:"a_Distance",buffer:{usage:Rp.STATIC_DRAW,data:[],type:Rp.FLOAT},size:1,update:function(t,e,n){return[n[3]]}}}),this.styleAttributeService.registerStyleAttribute({name:"total_distance",type:ey.Attribute,descriptor:{name:"a_Total_Distance",buffer:{usage:Rp.STATIC_DRAW,data:[],type:Rp.FLOAT},size:1,update:function(t,e,n){return[n[5]]}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:ey.Attribute,descriptor:{name:"a_Size",buffer:{usage:Rp.DYNAMIC_DRAW,data:[],type:Rp.FLOAT},size:2,update:function(t){var e=t.size,n=void 0===e?1:e;return Array.isArray(n)?[n[0],n[1]]:[n,0]}}}),this.styleAttributeService.registerStyleAttribute({name:"normal",type:ey.Attribute,descriptor:{name:"a_Normal",buffer:{usage:Rp.STATIC_DRAW,data:[],type:Rp.FLOAT},size:3,update:function(t,e,n,r,i){return i}}}),this.styleAttributeService.registerStyleAttribute({name:"miter",type:ey.Attribute,descriptor:{name:"a_Miter",buffer:{usage:Rp.STATIC_DRAW,data:[],type:Rp.FLOAT},size:1,update:function(t,e,n){return[n[4]]}}}),this.styleAttributeService.registerStyleAttribute({name:"uv",type:ey.Attribute,descriptor:{name:"a_iconMapUV",buffer:{usage:Rp.DYNAMIC_DRAW,data:[],type:Rp.FLOAT},size:2,update:function(e){var n=t.iconService.getIconMap(),r=e.texture,i=n[r]||{x:0,y:0},o=i.x,a=i.y;return[o,a]}}})}}]),n}(db),ww={arc:fx,arc3d:_x,greatcircle:Ix,wall:xw,line:$x,halfLine:Hx,simple:cw,linearline:rw,tileLine:gw,earthArc3d:Ax},Ew=ww;function Sw(t){var e=Ow();return function(){var n,r=Object(ct["a"])(t);if(e){var i=Object(ct["a"])(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(ut["a"])(this,n)}}function Ow(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}var Cw=function(t){Object(st["a"])(n,t);var e=Sw(n);function n(){var t;Object(et["a"])(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return t=e.call.apply(e,[this].concat(i)),Object(Ar["a"])(Object(ft["a"])(t),"type","LineLayer"),Object(Ar["a"])(Object(ft["a"])(t),"arrowInsertCount",0),Object(Ar["a"])(Object(ft["a"])(t),"defaultSourceConfig",{data:[{lng1:100,lat1:30,lng2:130,lat2:30}],options:{parser:{type:"json",x:"lng1",y:"lat1",x1:"lng2",y1:"lat2"}}}),t}return Object(nt["a"])(n,[{key:"buildModels",value:function(){var t=Object(mi["a"])(_i.a.mark((function t(){var e;return _i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=this.getModelType(),this.layerModel=new Ew[e](this),t.next=4,this.initLayerModels();case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"getDefaultConfig",value:function(){var t=this.getModelType(),e={line:{},linearline:{},simple:{},wall:{},arc3d:{blend:"additive"},arc:{blend:"additive"},greatcircle:{blend:"additive"},tileLine:{},halfLine:{},earthArc3d:{}};return e[t]}},{key:"getModelType",value:function(){var t;if(this.layerType)return this.layerType;var e=this.styleAttributeService.getLayerStyleAttribute("shape"),n=null===e||void 0===e||null===(t=e.scale)||void 0===t?void 0:t.field;return n||"line"}},{key:"processData",value:function(t){if("simple"!==this.getModelType())return t;var e=[];return t.map((function(t){if(Array.isArray(t.coordinates)&&Array.isArray(t.coordinates[0])&&Array.isArray(t.coordinates[0][0])){var n=Object(P["a"])({},t);t.coordinates.map((function(t){e.push(Object(P["a"])(Object(P["a"])({},n),{},{coordinates:t}))}))}else e.push(t)})),e}}]),n}(lb);function Tw(t){var e=Aw();return function(){var n,r=Object(ct["a"])(t);if(e){var i=Object(ct["a"])(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(ut["a"])(this,n)}}function Aw(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}var kw="uniform float u_opacity : 1.0;\nuniform vec4 u_color;\n\nvoid main() {\n  gl_FragColor = u_color;\n  gl_FragColor.a *= u_opacity;\n}\n",Mw='attribute vec3 a_Position;\nuniform mat4 u_ModelMatrix;\nuniform mat4 u_Mvp;\n\n#pragma include "projection"\n\nvoid main() {\n  vec4 project_pos = project_position(vec4(a_Position, 1.0));\n\n  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x\n    gl_Position = u_Mvp * (vec4(project_pos.xyz, 1.0));\n  } else {\n    gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));\n  }\n}\n\n',Pw=function(t){Object(st["a"])(n,t);var e=Tw(n);function n(){return Object(et["a"])(this,n),e.apply(this,arguments)}return Object(nt["a"])(n,[{key:"getUninforms",value:function(){var t=this.layer.getLayerConfig(),e=t.opacity,n=void 0===e?0:e,r=t.color,i=void 0===r?"#000":r;return{u_opacity:Object(K["isNumber"])(n)?n:0,u_color:li(i)}}},{key:"initModels",value:function(){var t=Object(mi["a"])(_i.a.mark((function t(){return _i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.buildModels();case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"buildModels",value:function(){var t=Object(mi["a"])(_i.a.mark((function t(){var e;return _i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.layer.buildLayerModel({moduleName:"mask",vertexShader:Mw,fragmentShader:kw,triangulation:qb,depth:{enable:!1},blend:this.getBlend(),stencil:{enable:!0,mask:255,func:{cmp:Rp.ALWAYS,ref:1,mask:255},opFront:{fail:Rp.REPLACE,zfail:Rp.REPLACE,zpass:Rp.REPLACE}},pick:!1});case 2:return e=t.sent,t.abrupt("return",[e]);case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"clearModels",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];t&&this.layerService.clear()}},{key:"registerBuiltinAttributes",value:function(){return""}}]),n}(db),Rw={fill:Pw},jw=Rw;function Iw(t){var e=Lw();return function(){var n,r=Object(ct["a"])(t);if(e){var i=Object(ct["a"])(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(ut["a"])(this,n)}}function Lw(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}var Nw,Dw,Fw,Bw,zw,Uw,Vw,Hw,Gw,Ww=function(t){Object(st["a"])(n,t);var e=Iw(n);function n(){var t;Object(et["a"])(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return t=e.call.apply(e,[this].concat(i)),Object(Ar["a"])(Object(ft["a"])(t),"type","MaskLayer"),t}return Object(nt["a"])(n,[{key:"buildModels",value:function(){var t=Object(mi["a"])(_i.a.mark((function t(){var e;return _i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=this.getModelType(),this.layerModel=new jw[e](this),t.next=4,this.initLayerModels();case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"getModelType",value:function(){return"fill"}}]),n}(lb),Zw=(Nw=Object(Yf["injectable"])(),Dw=Object(Yf["inject"])(Kf.IMapService),Fw=Object(Yf["inject"])(Kf.IFontService),Nw((zw=function(){function t(){Object(et["a"])(this,t),sp(this,"mapService",Uw,this),sp(this,"fontService",Vw,this)}return Object(nt["a"])(t,[{key:"apply",value:function(t,e){var n=this,r=e.styleAttributeService;t.hooks.init.tapPromise("DataMappingPlugin",Object(mi["a"])(_i.a.mark((function e(){return _i.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n.generateMaping(t,{styleAttributeService:r});case 1:case"end":return e.stop()}}),e)})))),t.hooks.beforeRenderData.tapPromise("DataMappingPlugin",function(){var e=Object(mi["a"])(_i.a.mark((function e(i){return _i.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(i){e.next=2;break}return e.abrupt("return",i);case 2:return t.dataState.dataMappingNeedUpdate=!1,n.generateMaping(t,{styleAttributeService:r}),e.abrupt("return",!0);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),t.hooks.beforeRender.tap("DataMappingPlugin",(function(){var e=t.getSource();if(!t.layerModelNeedUpdate&&e&&e.inited){var i=r.getLayerStyleAttributes()||[],o=r.getLayerStyleAttribute("filter"),a=e.data.dataArray;if(!Array.isArray(a)||0!==a.length){var s=i.filter((function(t){return t.needRemapping})),u=a;if(null!==o&&void 0!==o&&o.needRemapping&&null!==o&&void 0!==o&&o.scale&&(u=a.filter((function(t){return n.applyAttributeMapping(o,t)[0]}))),s.length)if(null!==o&&void 0!==o&&o.needRemapping){var c=n.mapping(t,i,u,void 0);t.setEncodedData(c),o.needRemapping=!1}else{var l=n.mapping(t,s,u,t.getEncodedData());t.setEncodedData(l)}}}}))}},{key:"generateMaping",value:function(t,e){var n=this,r=e.styleAttributeService,i=r.getLayerStyleAttributes()||[],o=r.getLayerStyleAttribute("filter"),a=t.getSource().data.dataArray,s=a;null!==o&&void 0!==o&&o.scale&&(s=a.filter((function(t){return n.applyAttributeMapping(o,t)[0]}))),s=t.processData(s);var u=this.mapping(t,i,s,void 0);t.setEncodedData(u),t.emit("dataUpdate",null)}},{key:"mapping",value:function(t,e,n,r){var i=this,o=t.getLayerConfig(),a=o.arrow,s=void 0===a?{enable:!1}:a,u=e.filter((function(t){return void 0!==t.scale})),c=n.map((function(e,n){var o=r?r[n]:{},a=Object(P["a"])({id:e._id,coordinates:e.coordinates},o);if(u.forEach((function(t){var n=i.applyAttributeMapping(t,e);t.needRemapping=!1,"color"===t.name&&(n=n.map((function(t){return li(t)}))),a[t.name]=Array.isArray(n)&&1===n.length?n[0]:n,"shape"===t.name&&(a.shape=i.fontService.getIconFontKey(a[t.name]))})),s.enable&&("line"===a.shape||"halfLine"===a.shape)){var c=a.coordinates;if(t.arrowInsertCount<t.encodeDataLength){var l=i.getArrowPoints(c[0],c[1]);a.coordinates.splice(1,0,l,l),t.arrowInsertCount++}}return a}));return this.adjustData2Amap2Coordinates(c,t),this.adjustData2SimpleCoordinates(c),c}},{key:"adjustData2Amap2Coordinates",value:function(t,e){var n=this;if(t.length>0&&this.mapService.version===M_["GAODE2.x"]){var r=e.coordCenter||e.getSource().center;"number"===typeof t[0].coordinates[0]?t.filter((function(t){return!t.originCoordinates})).map((function(t){t.version=M_["GAODE2.x"],t.originCoordinates=Object(K["cloneDeep"])(t.coordinates),t.coordinates=n.mapService.lngLatToCoordByLayer(t.coordinates,r)})):t.filter((function(t){return!t.originCoordinates})).map((function(t){t.version=M_["GAODE2.x"],t.originCoordinates=Object(K["cloneDeep"])(t.coordinates),t.coordinates=n.mapService.lngLatToCoordsByLayer(t.coordinates,r)}))}}},{key:"adjustData2SimpleCoordinates",value:function(t){var e=this;t.length>0&&this.mapService.version===M_.SIMPLE&&t.map((function(t){t.simpleCoordinate||(t.coordinates=e.unProjectCoordinates(t.coordinates),t.simpleCoordinate=!0)}))}},{key:"unProjectCoordinates",value:function(t){var e=this;if("number"===typeof t[0])return this.mapService.simpleMapCoord.unproject(t);if(t[0]&&t[0][0]instanceof Array){var n=[];return t.map((function(t){var r=[];t.map((function(t){r.push(e.mapService.simpleMapCoord.unproject(t))})),n.push(r)})),n}var r=[];return t.map((function(t){r.push(e.mapService.simpleMapCoord.unproject(t))})),r}},{key:"applyAttributeMapping",value:function(t,e){var n;if(!t.scale)return[];var r=(null===t||void 0===t||null===(n=t.scale)||void 0===n?void 0:n.scalers)||[],i=[];r.forEach((function(n){var r,o=n.field;(e.hasOwnProperty(o)||"variable"===(null===(r=t.scale)||void 0===r?void 0:r.type))&&i.push(e[o])}));var o=t.mapping?t.mapping(i):[];return o}},{key:"getArrowPoints",value:function(t,e){var n=[e[0]-t[0],e[1]-t[1]],r=wr(n),i=[t[0]+1e-4*r[0],t[1]+1e-4*r[1]];return i}}]),t}(),Uw=up(zw.prototype,"mapService",[Dw],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Vw=up(zw.prototype,"fontService",[Fw],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Bw=zw))||Bw),Yw=(Hw=Object(Yf["injectable"])(),Hw(Gw=function(){function t(){Object(et["a"])(this,t)}return Object(nt["a"])(t,[{key:"apply",value:function(t){var e=this;this.mapService=t.getContainer().get(Kf.IMapService),t.hooks.init.tapPromise("DataSourcePlugin",Object(mi["a"])(_i.a.mark((function n(){var r,i,o,a;return _i.a.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(r=t.getSource(),r||(i=t.sourceOption||t.defaultSourceConfig,o=i.data,a=i.options,r=new n_(o,a),t.setSource(r)),!r.inited){n.next=6;break}e.updateClusterData(t),n.next=8;break;case 6:return n.next=8,new Promise((function(n){r.on("update",(function(r){"inited"===r.type&&e.updateClusterData(t),n(null)}))}));case 8:case"end":return n.stop()}}),n)})))),t.hooks.beforeRenderData.tapPromise("DataSourcePlugin",Object(mi["a"])(_i.a.mark((function n(){var r,i;return _i.a.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.updateClusterData(t),i=t.dataState.dataSourceNeedUpdate,t.dataState.dataSourceNeedUpdate=!1,n.abrupt("return",r||i);case 4:case"end":return n.stop()}}),n)}))))}},{key:"updateClusterData",value:function(t){if(t.isTileLayer||t.tileLayer||!t.getSource())return!1;var e=t.getSource(),n=e.cluster,r=e.clusterOptions.zoom,i=void 0===r?0:r,o=this.mapService.getZoom()-1,a=t.dataState.dataSourceNeedUpdate;return n&&a&&e.updateClusterData(Math.floor(o)),!!(n&&Math.abs(t.clusterZoom-o)>=1)&&(i!==Math.floor(o)&&e.updateClusterData(Math.floor(o)),t.clusterZoom=o,!0)}}]),t}())||Gw),Xw=function(t,e){return t<e?-1:t>e?1:t>=e?0:NaN},qw=function(t){return 1===t.length&&(t=Kw(t)),{left:function(e,n,r,i){null==r&&(r=0),null==i&&(i=e.length);while(r<i){var o=r+i>>>1;t(e[o],n)<0?r=o+1:i=o}return r},right:function(e,n,r,i){null==r&&(r=0),null==i&&(i=e.length);while(r<i){var o=r+i>>>1;t(e[o],n)>0?i=o:r=o+1}return r}}};function Kw(t){return function(e,n){return Xw(t(e),n)}}var Qw=qw(Xw),$w=Qw.right,Jw=(Qw.left,$w);var tE=function(t){return null===t?NaN:+t},eE=function(t,e){var n,r,i,o=t.length,a=-1;if(null==e){while(++a<o)if(null!=(n=t[a])&&n>=n){r=i=n;while(++a<o)null!=(n=t[a])&&(r>n&&(r=n),i<n&&(i=n))}}else while(++a<o)if(null!=(n=e(t[a],a,t))&&n>=n){r=i=n;while(++a<o)null!=(n=e(t[a],a,t))&&(r>n&&(r=n),i<n&&(i=n))}return[r,i]},nE=Array.prototype,rE=(nE.slice,nE.map,Math.sqrt(50)),iE=Math.sqrt(10),oE=Math.sqrt(2),aE=function(t,e,n){var r,i,o,a,s=-1;if(e=+e,t=+t,n=+n,t===e&&n>0)return[t];if((r=e<t)&&(i=t,t=e,e=i),0===(a=sE(t,e,n))||!isFinite(a))return[];if(a>0){t=Math.ceil(t/a),e=Math.floor(e/a),o=new Array(i=Math.ceil(e-t+1));while(++s<i)o[s]=(t+s)*a}else{t=Math.floor(t*a),e=Math.ceil(e*a),o=new Array(i=Math.ceil(t-e+1));while(++s<i)o[s]=(t-s)/a}return r&&o.reverse(),o};function sE(t,e,n){var r=(e-t)/Math.max(0,n),i=Math.floor(Math.log(r)/Math.LN10),o=r/Math.pow(10,i);return i>=0?(o>=rE?10:o>=iE?5:o>=oE?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(o>=rE?10:o>=iE?5:o>=oE?2:1)}function uE(t,e,n){var r=Math.abs(e-t)/Math.max(0,n),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),o=r/i;return o>=rE?i*=10:o>=iE?i*=5:o>=oE&&(i*=2),e<t?-i:i}var cE=function(t,e,n){if(null==n&&(n=tE),r=t.length){if((e=+e)<=0||r<2)return+n(t[0],0,t);if(e>=1)return+n(t[r-1],r-1,t);var r,i=(r-1)*e,o=Math.floor(i),a=+n(t[o],o,t),s=+n(t[o+1],o+1,t);return a+(s-a)*(i-o)}};function lE(t,e,n,r,i){var o=t*t,a=o*t;return((1-3*t+3*o-a)*e+(4-6*o+3*a)*n+(1+3*t+3*o-3*a)*r+a*i)/6}var fE=function(t){var e=t.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,e-1):Math.floor(n*e),i=t[r],o=t[r+1],a=r>0?t[r-1]:2*i-o,s=r<e-1?t[r+2]:2*o-i;return lE((n-r/e)*e,a,i,o,s)}},hE=function(t){var e=t.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*e),i=t[(r+e-1)%e],o=t[r%e],a=t[(r+1)%e],s=t[(r+2)%e];return lE((n-r/e)*e,i,o,a,s)}},pE=function(t){return function(){return t}};function dE(t,e){return function(n){return t+n*e}}function vE(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function gE(t){return 1===(t=+t)?mE:function(e,n){return n-e?vE(e,n,t):pE(isNaN(e)?n:e)}}function mE(t,e){var n=e-t;return n?dE(t,n):pE(isNaN(t)?e:t)}var yE=function t(e){var n=gE(e);function r(t,e){var r=n((t=ti(t)).r,(e=ti(e)).r),i=n(t.g,e.g),o=n(t.b,e.b),a=mE(t.opacity,e.opacity);return function(e){return t.r=r(e),t.g=i(e),t.b=o(e),t.opacity=a(e),t+""}}return r.gamma=t,r}(1);function _E(t){return function(e){var n,r,i=e.length,o=new Array(i),a=new Array(i),s=new Array(i);for(n=0;n<i;++n)r=ti(e[n]),o[n]=r.r||0,a[n]=r.g||0,s[n]=r.b||0;return o=t(o),a=t(a),s=t(s),r.opacity=1,function(t){return r.r=o(t),r.g=a(t),r.b=s(t),r+""}}}var bE=_E(fE);_E(hE);function xE(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function wE(t,e){switch(arguments.length){case 0:break;case 1:this.interpolator(t);break;default:this.interpolator(e).domain(t);break}return this}var EE="$";function SE(){}function OE(t,e){var n=new SE;if(t instanceof SE)t.each((function(t,e){n.set(e,t)}));else if(Array.isArray(t)){var r,i=-1,o=t.length;if(null==e)while(++i<o)n.set(i,t[i]);else while(++i<o)n.set(e(r=t[i],i,t),r)}else if(t)for(var a in t)n.set(a,t[a]);return n}SE.prototype=OE.prototype={constructor:SE,has:function(t){return EE+t in this},get:function(t){return this[EE+t]},set:function(t,e){return this[EE+t]=e,this},remove:function(t){var e=EE+t;return e in this&&delete this[e]},clear:function(){for(var t in this)t[0]===EE&&delete this[t]},keys:function(){var t=[];for(var e in this)e[0]===EE&&t.push(e.slice(1));return t},values:function(){var t=[];for(var e in this)e[0]===EE&&t.push(this[e]);return t},entries:function(){var t=[];for(var e in this)e[0]===EE&&t.push({key:e.slice(1),value:this[e]});return t},size:function(){var t=0;for(var e in this)e[0]===EE&&++t;return t},empty:function(){for(var t in this)if(t[0]===EE)return!1;return!0},each:function(t){for(var e in this)e[0]===EE&&t(this[e],e.slice(1),this)}};var CE=OE;function TE(){}var AE=CE.prototype;function kE(t,e){var n=new TE;if(t instanceof TE)t.each((function(t){n.add(t)}));else if(t){var r=-1,i=t.length;if(null==e)while(++r<i)n.add(t[r]);else while(++r<i)n.add(e(t[r],r,t))}return n}TE.prototype=kE.prototype={constructor:TE,has:AE.has,add:function(t){return t+="",this[EE+t]=t,this},remove:AE.remove,clear:AE.clear,values:AE.keys,size:AE.size,empty:AE.empty,each:AE.each};var ME=Array.prototype,PE=ME.map,RE=ME.slice,jE={name:"implicit"};function IE(){var t=CE(),e=[],n=[],r=jE;function i(i){var o=i+"",a=t.get(o);if(!a){if(r!==jE)return r;t.set(o,a=e.push(i))}return n[(a-1)%n.length]}return i.domain=function(n){if(!arguments.length)return e.slice();e=[],t=CE();var r,o,a=-1,s=n.length;while(++a<s)t.has(o=(r=n[a])+"")||t.set(o,e.push(r));return i},i.range=function(t){return arguments.length?(n=RE.call(t),i):n.slice()},i.unknown=function(t){return arguments.length?(r=t,i):r},i.copy=function(){return IE(e,n).unknown(r)},xE.apply(i,arguments),i}var LE=function(t,e){e||(e=[]);var n,r=t?Math.min(e.length,t.length):0,i=e.slice();return function(o){for(n=0;n<r;++n)i[n]=t[n]*(1-o)+e[n]*o;return i}};function NE(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function DE(t,e){var n,r=e?e.length:0,i=t?Math.min(r,t.length):0,o=new Array(i),a=new Array(r);for(n=0;n<i;++n)o[n]=ZE(t[n],e[n]);for(;n<r;++n)a[n]=e[n];return function(t){for(n=0;n<i;++n)a[n]=o[n](t);return a}}var FE=function(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}},BE=function(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}},zE=function(t,e){var n,r={},i={};for(n in null!==t&&"object"===typeof t||(t={}),null!==e&&"object"===typeof e||(e={}),e)n in t?r[n]=ZE(t[n],e[n]):i[n]=e[n];return function(t){for(n in r)i[n]=r[n](t);return i}},UE=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,VE=new RegExp(UE.source,"g");function HE(t){return function(){return t}}function GE(t){return function(e){return t(e)+""}}var WE=function(t,e){var n,r,i,o=UE.lastIndex=VE.lastIndex=0,a=-1,s=[],u=[];t+="",e+="";while((n=UE.exec(t))&&(r=VE.exec(e)))(i=r.index)>o&&(i=e.slice(o,i),s[a]?s[a]+=i:s[++a]=i),(n=n[0])===(r=r[0])?s[a]?s[a]+=r:s[++a]=r:(s[++a]=null,u.push({i:a,x:BE(n,r)})),o=VE.lastIndex;return o<e.length&&(i=e.slice(o),s[a]?s[a]+=i:s[++a]=i),s.length<2?u[0]?GE(u[0].x):HE(e):(e=u.length,function(t){for(var n,r=0;r<e;++r)s[(n=u[r]).i]=n.x(t);return s.join("")})},ZE=function(t,e){var n,r=typeof e;return null==e||"boolean"===r?pE(e):("number"===r?BE:"string"===r?(n=Kr(e))?(e=n,yE):WE:e instanceof Kr?yE:e instanceof Date?FE:NE(e)?LE:Array.isArray(e)?DE:"function"!==typeof e.valueOf&&"function"!==typeof e.toString||isNaN(e)?zE:BE)(t,e)},YE=function(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}},XE=function(t){return function(){return t}},qE=function(t){return+t},KE=[0,1];function QE(t){return t}function $E(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:XE(isNaN(e)?NaN:.5)}function JE(t){var e,n=t[0],r=t[t.length-1];return n>r&&(e=n,n=r,r=e),function(t){return Math.max(n,Math.min(r,t))}}function tS(t,e,n){var r=t[0],i=t[1],o=e[0],a=e[1];return i<r?(r=$E(i,r),o=n(a,o)):(r=$E(r,i),o=n(o,a)),function(t){return o(r(t))}}function eS(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),o=new Array(r),a=-1;t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());while(++a<r)i[a]=$E(t[a],t[a+1]),o[a]=n(e[a],e[a+1]);return function(e){var n=Jw(t,e,1,r)-1;return o[n](i[n](e))}}function nS(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function rS(){var t,e,n,r,i,o,a=KE,s=KE,u=ZE,c=QE;function l(){return r=Math.min(a.length,s.length)>2?eS:tS,i=o=null,f}function f(e){return isNaN(e=+e)?n:(i||(i=r(a.map(t),s,u)))(t(c(e)))}return f.invert=function(n){return c(e((o||(o=r(s,a.map(t),BE)))(n)))},f.domain=function(t){return arguments.length?(a=PE.call(t,qE),c===QE||(c=JE(a)),l()):a.slice()},f.range=function(t){return arguments.length?(s=RE.call(t),l()):s.slice()},f.rangeRound=function(t){return s=RE.call(t),u=YE,l()},f.clamp=function(t){return arguments.length?(c=t?JE(a):QE,f):c!==QE},f.interpolate=function(t){return arguments.length?(u=t,l()):u},f.unknown=function(t){return arguments.length?(n=t,f):n},function(n,r){return t=n,e=r,l()}}function iS(t,e){return rS()(t,e)}var oS=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function aS(t){if(!(e=oS.exec(t)))throw new Error("invalid format: "+t);var e;return new sS({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}function sS(t){this.fill=void 0===t.fill?" ":t.fill+"",this.align=void 0===t.align?">":t.align+"",this.sign=void 0===t.sign?"-":t.sign+"",this.symbol=void 0===t.symbol?"":t.symbol+"",this.zero=!!t.zero,this.width=void 0===t.width?void 0:+t.width,this.comma=!!t.comma,this.precision=void 0===t.precision?void 0:+t.precision,this.trim=!!t.trim,this.type=void 0===t.type?"":t.type+""}aS.prototype=sS.prototype,sS.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var uS=function(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)};function cS(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}var lS,fS,hS,pS,dS=function(t){return t=cS(Math.abs(t)),t?t[1]:NaN},vS=function(t,e){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(dS(e)/3)))-dS(Math.abs(t)))},gS=function(t,e){return function(n,r){var i=n.length,o=[],a=0,s=t[0],u=0;while(i>0&&s>0){if(u+s+1>r&&(s=Math.max(1,r-u)),o.push(n.substring(i-=s,i+s)),(u+=s+1)>r)break;s=t[a=(a+1)%t.length]}return o.reverse().join(e)}},mS=function(t){return function(e){return e.replace(/[0-9]/g,(function(e){return t[+e]}))}},yS=function(t){t:for(var e,n=t.length,r=1,i=-1;r<n;++r)switch(t[r]){case".":i=e=r;break;case"0":0===i&&(i=r),e=r;break;default:if(!+t[r])break t;i>0&&(i=0);break}return i>0?t.slice(0,i)+t.slice(e+1):t},_S=function(t,e){var n=cS(t,e);if(!n)return t+"";var r=n[0],i=n[1],o=i-(lS=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,a=r.length;return o===a?r:o>a?r+new Array(o-a+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+cS(t,Math.max(0,e+o-1))[0]},bS=function(t,e){var n=cS(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")},xS={"%":function(t,e){return(100*t).toFixed(e)},b:function(t){return Math.round(t).toString(2)},c:function(t){return t+""},d:uS,e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},g:function(t,e){return t.toPrecision(e)},o:function(t){return Math.round(t).toString(8)},p:function(t,e){return bS(100*t,e)},r:bS,s:_S,X:function(t){return Math.round(t).toString(16).toUpperCase()},x:function(t){return Math.round(t).toString(16)}},wS=function(t){return t},ES=Array.prototype.map,SS=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"],OS=function(t){var e=void 0===t.grouping||void 0===t.thousands?wS:gS(ES.call(t.grouping,Number),t.thousands+""),n=void 0===t.currency?"":t.currency[0]+"",r=void 0===t.currency?"":t.currency[1]+"",i=void 0===t.decimal?".":t.decimal+"",o=void 0===t.numerals?wS:mS(ES.call(t.numerals,String)),a=void 0===t.percent?"%":t.percent+"",s=void 0===t.minus?"-":t.minus+"",u=void 0===t.nan?"NaN":t.nan+"";function c(t){t=aS(t);var c=t.fill,l=t.align,f=t.sign,h=t.symbol,p=t.zero,d=t.width,v=t.comma,g=t.precision,m=t.trim,y=t.type;"n"===y?(v=!0,y="g"):xS[y]||(void 0===g&&(g=12),m=!0,y="g"),(p||"0"===c&&"="===l)&&(p=!0,c="0",l="=");var _="$"===h?n:"#"===h&&/[boxX]/.test(y)?"0"+y.toLowerCase():"",b="$"===h?r:/[%p]/.test(y)?a:"",x=xS[y],w=/[defgprs%]/.test(y);function E(t){var n,r,a,h=_,E=b;if("c"===y)E=x(t)+E,t="";else{t=+t;var S=t<0||1/t<0;if(t=isNaN(t)?u:x(Math.abs(t),g),m&&(t=yS(t)),S&&0===+t&&"+"!==f&&(S=!1),h=(S?"("===f?f:s:"-"===f||"("===f?"":f)+h,E=("s"===y?SS[8+lS/3]:"")+E+(S&&"("===f?")":""),w){n=-1,r=t.length;while(++n<r)if(a=t.charCodeAt(n),48>a||a>57){E=(46===a?i+t.slice(n+1):t.slice(n))+E,t=t.slice(0,n);break}}}v&&!p&&(t=e(t,1/0));var O=h.length+t.length+E.length,C=O<d?new Array(d-O+1).join(c):"";switch(v&&p&&(t=e(C+t,C.length?d-E.length:1/0),C=""),l){case"<":t=h+t+E+C;break;case"=":t=h+C+t+E;break;case"^":t=C.slice(0,O=C.length>>1)+h+t+E+C.slice(O);break;default:t=C+h+t+E;break}return o(t)}return g=void 0===g?6:/[gprs]/.test(y)?Math.max(1,Math.min(21,g)):Math.max(0,Math.min(20,g)),E.toString=function(){return t+""},E}function l(t,e){var n=c((t=aS(t),t.type="f",t)),r=3*Math.max(-8,Math.min(8,Math.floor(dS(e)/3))),i=Math.pow(10,-r),o=SS[8+r/3];return function(t){return n(i*t)+o}}return{format:c,formatPrefix:l}};function CS(t){return fS=OS(t),hS=fS.format,pS=fS.formatPrefix,fS}CS({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"});var TS=function(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,dS(e)-dS(t))+1},AS=function(t){return Math.max(0,-dS(Math.abs(t)))},kS=function(t,e,n,r){var i,o=uE(t,e,n);switch(r=aS(null==r?",f":r),r.type){case"s":var a=Math.max(Math.abs(t),Math.abs(e));return null!=r.precision||isNaN(i=vS(o,a))||(r.precision=i),pS(r,a);case"":case"e":case"g":case"p":case"r":null!=r.precision||isNaN(i=TS(o,Math.max(Math.abs(t),Math.abs(e))))||(r.precision=i-("e"===r.type));break;case"f":case"%":null!=r.precision||isNaN(i=AS(o))||(r.precision=i-2*("%"===r.type));break}return hS(r)};function MS(t){var e=t.domain;return t.ticks=function(t){var n=e();return aE(n[0],n[n.length-1],null==t?10:t)},t.tickFormat=function(t,n){var r=e();return kS(r[0],r[r.length-1],null==t?10:t,n)},t.nice=function(n){null==n&&(n=10);var r,i=e(),o=0,a=i.length-1,s=i[o],u=i[a];return u<s&&(r=s,s=u,u=r,r=o,o=a,a=r),r=sE(s,u,n),r>0?(s=Math.floor(s/r)*r,u=Math.ceil(u/r)*r,r=sE(s,u,n)):r<0&&(s=Math.ceil(s*r)/r,u=Math.floor(u*r)/r,r=sE(s,u,n)),r>0?(i[o]=Math.floor(s/r)*r,i[a]=Math.ceil(u/r)*r,e(i)):r<0&&(i[o]=Math.ceil(s*r)/r,i[a]=Math.floor(u*r)/r,e(i)),t},t}function PS(){var t=iS(QE,QE);return t.copy=function(){return nS(t,PS())},xE.apply(t,arguments),MS(t)}function RS(t){var e;function n(t){return isNaN(t=+t)?e:t}return n.invert=n,n.domain=n.range=function(e){return arguments.length?(t=PE.call(e,qE),n):t.slice()},n.unknown=function(t){return arguments.length?(e=t,n):e},n.copy=function(){return RS(t).unknown(e)},t=arguments.length?PE.call(t,qE):[0,1],MS(n)}var jS=function(t,e){t=t.slice();var n,r=0,i=t.length-1,o=t[r],a=t[i];return a<o&&(n=r,r=i,i=n,n=o,o=a,a=n),t[r]=e.floor(o),t[i]=e.ceil(a),t};function IS(t){return Math.log(t)}function LS(t){return Math.exp(t)}function NS(t){return-Math.log(-t)}function DS(t){return-Math.exp(-t)}function FS(t){return isFinite(t)?+("1e"+t):t<0?0:t}function BS(t){return 10===t?FS:t===Math.E?Math.exp:function(e){return Math.pow(t,e)}}function zS(t){return t===Math.E?Math.log:10===t&&Math.log10||2===t&&Math.log2||(t=Math.log(t),function(e){return Math.log(e)/t})}function US(t){return function(e){return-t(-e)}}function VS(t){var e,n,r=t(IS,LS),i=r.domain,o=10;function a(){return e=zS(o),n=BS(o),i()[0]<0?(e=US(e),n=US(n),t(NS,DS)):t(IS,LS),r}return r.base=function(t){return arguments.length?(o=+t,a()):o},r.domain=function(t){return arguments.length?(i(t),a()):i()},r.ticks=function(t){var r,a=i(),s=a[0],u=a[a.length-1];(r=u<s)&&(h=s,s=u,u=h);var c,l,f,h=e(s),p=e(u),d=null==t?10:+t,v=[];if(!(o%1)&&p-h<d){if(h=Math.round(h)-1,p=Math.round(p)+1,s>0){for(;h<p;++h)for(l=1,c=n(h);l<o;++l)if(f=c*l,!(f<s)){if(f>u)break;v.push(f)}}else for(;h<p;++h)for(l=o-1,c=n(h);l>=1;--l)if(f=c*l,!(f<s)){if(f>u)break;v.push(f)}}else v=aE(h,p,Math.min(p-h,d)).map(n);return r?v.reverse():v},r.tickFormat=function(t,i){if(null==i&&(i=10===o?".0e":","),"function"!==typeof i&&(i=hS(i)),t===1/0)return i;null==t&&(t=10);var a=Math.max(1,o*t/r.ticks().length);return function(t){var r=t/n(Math.round(e(t)));return r*o<o-.5&&(r*=o),r<=a?i(t):""}},r.nice=function(){return i(jS(i(),{floor:function(t){return n(Math.floor(e(t)))},ceil:function(t){return n(Math.ceil(e(t)))}}))},r}function HS(){var t=VS(rS()).domain([1,10]);return t.copy=function(){return nS(t,HS()).base(t.base())},xE.apply(t,arguments),t}function GS(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function WS(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function ZS(t){return t<0?-t*t:t*t}function YS(t){var e=t(QE,QE),n=1;function r(){return 1===n?t(QE,QE):.5===n?t(WS,ZS):t(GS(n),GS(1/n))}return e.exponent=function(t){return arguments.length?(n=+t,r()):n},MS(e)}function XS(){var t=YS(rS());return t.copy=function(){return nS(t,XS()).exponent(t.exponent())},xE.apply(t,arguments),t}function qS(){var t,e=[],n=[],r=[];function i(){var t=0,i=Math.max(1,n.length);r=new Array(i-1);while(++t<i)r[t-1]=cE(e,t/i);return o}function o(e){return isNaN(e=+e)?t:n[Jw(r,e)]}return o.invertExtent=function(t){var i=n.indexOf(t);return i<0?[NaN,NaN]:[i>0?r[i-1]:e[0],i<r.length?r[i]:e[e.length-1]]},o.domain=function(t){if(!arguments.length)return e.slice();e=[];for(var n,r=0,o=t.length;r<o;++r)n=t[r],null==n||isNaN(n=+n)||e.push(n);return e.sort(Xw),i()},o.range=function(t){return arguments.length?(n=RE.call(t),i()):n.slice()},o.unknown=function(e){return arguments.length?(t=e,o):t},o.quantiles=function(){return r.slice()},o.copy=function(){return qS().domain(e).range(n).unknown(t)},xE.apply(o,arguments)}function KS(){var t,e=0,n=1,r=1,i=[.5],o=[0,1];function a(e){return e<=e?o[Jw(i,e,0,r)]:t}function s(){var t=-1;i=new Array(r);while(++t<r)i[t]=((t+1)*n-(t-r)*e)/(r+1);return a}return a.domain=function(t){return arguments.length?(e=+t[0],n=+t[1],s()):[e,n]},a.range=function(t){return arguments.length?(r=(o=RE.call(t)).length-1,s()):o.slice()},a.invertExtent=function(t){var a=o.indexOf(t);return a<0?[NaN,NaN]:a<1?[e,i[0]]:a>=r?[i[r-1],n]:[i[a-1],i[a]]},a.unknown=function(e){return arguments.length?(t=e,a):a},a.thresholds=function(){return i.slice()},a.copy=function(){return KS().domain([e,n]).range(o).unknown(t)},xE.apply(MS(a),arguments)}function QS(){var t,e=[.5],n=[0,1],r=1;function i(i){return i<=i?n[Jw(e,i,0,r)]:t}return i.domain=function(t){return arguments.length?(e=RE.call(t),r=Math.min(e.length,n.length-1),i):e.slice()},i.range=function(t){return arguments.length?(n=RE.call(t),r=Math.min(e.length,n.length-1),i):n.slice()},i.invertExtent=function(t){var r=n.indexOf(t);return[e[r-1],e[r]]},i.unknown=function(e){return arguments.length?(t=e,i):t},i.copy=function(){return QS().domain(e).range(n).unknown(t)},xE.apply(i,arguments)}var $S=new Date,JS=new Date;function tO(t,e,n,r){function i(e){return t(e=0===arguments.length?new Date:new Date(+e)),e}return i.floor=function(e){return t(e=new Date(+e)),e},i.ceil=function(n){return t(n=new Date(n-1)),e(n,1),t(n),n},i.round=function(t){var e=i(t),n=i.ceil(t);return t-e<n-t?e:n},i.offset=function(t,n){return e(t=new Date(+t),null==n?1:Math.floor(n)),t},i.range=function(n,r,o){var a,s=[];if(n=i.ceil(n),o=null==o?1:Math.floor(o),!(n<r)||!(o>0))return s;do{s.push(a=new Date(+n)),e(n,o),t(n)}while(a<n&&n<r);return s},i.filter=function(n){return tO((function(e){if(e>=e)while(t(e),!n(e))e.setTime(e-1)}),(function(t,r){if(t>=t)if(r<0)while(++r<=0)while(e(t,-1),!n(t));else while(--r>=0)while(e(t,1),!n(t));}))},n&&(i.count=function(e,r){return $S.setTime(+e),JS.setTime(+r),t($S),t(JS),Math.floor(n($S,JS))},i.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?i.filter(r?function(e){return r(e)%t===0}:function(e){return i.count(0,e)%t===0}):i:null}),i}var eO=tO((function(t){t.setMonth(0,1),t.setHours(0,0,0,0)}),(function(t,e){t.setFullYear(t.getFullYear()+e)}),(function(t,e){return e.getFullYear()-t.getFullYear()}),(function(t){return t.getFullYear()}));eO.every=function(t){return isFinite(t=Math.floor(t))&&t>0?tO((function(e){e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)}),(function(e,n){e.setFullYear(e.getFullYear()+n*t)})):null};var nO=eO,rO=(eO.range,tO((function(t){t.setDate(1),t.setHours(0,0,0,0)}),(function(t,e){t.setMonth(t.getMonth()+e)}),(function(t,e){return e.getMonth()-t.getMonth()+12*(e.getFullYear()-t.getFullYear())}),(function(t){return t.getMonth()}))),iO=rO,oO=(rO.range,1e3),aO=6e4,sO=36e5,uO=864e5,cO=6048e5;function lO(t){return tO((function(e){e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)}),(function(t,e){t.setDate(t.getDate()+7*e)}),(function(t,e){return(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*aO)/cO}))}var fO=lO(0),hO=lO(1),pO=lO(2),dO=lO(3),vO=lO(4),gO=lO(5),mO=lO(6),yO=(fO.range,hO.range,pO.range,dO.range,vO.range,gO.range,mO.range,tO((function(t){t.setHours(0,0,0,0)}),(function(t,e){t.setDate(t.getDate()+e)}),(function(t,e){return(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*aO)/uO}),(function(t){return t.getDate()-1}))),_O=yO,bO=(yO.range,tO((function(t){t.setTime(t-t.getMilliseconds()-t.getSeconds()*oO-t.getMinutes()*aO)}),(function(t,e){t.setTime(+t+e*sO)}),(function(t,e){return(e-t)/sO}),(function(t){return t.getHours()}))),xO=bO,wO=(bO.range,tO((function(t){t.setTime(t-t.getMilliseconds()-t.getSeconds()*oO)}),(function(t,e){t.setTime(+t+e*aO)}),(function(t,e){return(e-t)/aO}),(function(t){return t.getMinutes()}))),EO=wO,SO=(wO.range,tO((function(t){t.setTime(t-t.getMilliseconds())}),(function(t,e){t.setTime(+t+e*oO)}),(function(t,e){return(e-t)/oO}),(function(t){return t.getUTCSeconds()}))),OO=SO,CO=(SO.range,tO((function(){}),(function(t,e){t.setTime(+t+e)}),(function(t,e){return e-t})));CO.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?tO((function(e){e.setTime(Math.floor(e/t)*t)}),(function(e,n){e.setTime(+e+n*t)}),(function(e,n){return(n-e)/t})):CO:null};var TO=CO;CO.range;function AO(t){return tO((function(e){e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCDate(t.getUTCDate()+7*e)}),(function(t,e){return(e-t)/cO}))}var kO=AO(0),MO=AO(1),PO=AO(2),RO=AO(3),jO=AO(4),IO=AO(5),LO=AO(6),NO=(kO.range,MO.range,PO.range,RO.range,jO.range,IO.range,LO.range,tO((function(t){t.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCDate(t.getUTCDate()+e)}),(function(t,e){return(e-t)/uO}),(function(t){return t.getUTCDate()-1}))),DO=NO,FO=(NO.range,tO((function(t){t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCFullYear(t.getUTCFullYear()+e)}),(function(t,e){return e.getUTCFullYear()-t.getUTCFullYear()}),(function(t){return t.getUTCFullYear()})));FO.every=function(t){return isFinite(t=Math.floor(t))&&t>0?tO((function(e){e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)}),(function(e,n){e.setUTCFullYear(e.getUTCFullYear()+n*t)})):null};var BO=FO;FO.range;function zO(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function UO(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function VO(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function HO(t){var e=t.dateTime,n=t.date,r=t.time,i=t.periods,o=t.days,a=t.shortDays,s=t.months,u=t.shortMonths,c=$O(i),l=JO(i),f=$O(o),h=JO(o),p=$O(a),d=JO(a),v=$O(s),g=JO(s),m=$O(u),y=JO(u),_={a:j,A:I,b:L,B:N,c:null,d:bC,e:bC,f:OC,g:NC,G:FC,H:xC,I:wC,j:EC,L:SC,m:CC,M:TC,p:D,q:F,Q:sT,s:uT,S:AC,u:kC,U:MC,V:RC,w:jC,W:IC,x:null,X:null,y:LC,Y:DC,Z:BC,"%":aT},b={a:B,A:z,b:U,B:V,c:null,d:zC,e:zC,f:WC,g:nT,G:iT,H:UC,I:VC,j:HC,L:GC,m:ZC,M:YC,p:H,q:G,Q:sT,s:uT,S:XC,u:qC,U:KC,V:$C,w:JC,W:tT,x:null,X:null,y:eT,Y:rT,Z:oT,"%":aT},x={a:C,A:T,b:A,B:k,c:M,d:lC,e:lC,f:gC,g:aC,G:oC,H:hC,I:hC,j:fC,L:vC,m:cC,M:pC,p:O,q:uC,Q:yC,s:_C,S:dC,u:eC,U:nC,V:rC,w:tC,W:iC,x:P,X:R,y:aC,Y:oC,Z:sC,"%":mC};function w(t,e){return function(n){var r,i,o,a=[],s=-1,u=0,c=t.length;n instanceof Date||(n=new Date(+n));while(++s<c)37===t.charCodeAt(s)&&(a.push(t.slice(u,s)),null!=(i=ZO[r=t.charAt(++s)])?r=t.charAt(++s):i="e"===r?" ":"0",(o=e[r])&&(r=o(n,i)),a.push(r),u=s+1);return a.push(t.slice(u,s)),a.join("")}}function E(t,e){return function(n){var r,i,o=VO(1900,void 0,1),a=S(o,t,n+="",0);if(a!=n.length)return null;if("Q"in o)return new Date(o.Q);if("s"in o)return new Date(1e3*o.s+("L"in o?o.L:0));if(e&&!("Z"in o)&&(o.Z=0),"p"in o&&(o.H=o.H%12+12*o.p),void 0===o.m&&(o.m="q"in o?o.q:0),"V"in o){if(o.V<1||o.V>53)return null;"w"in o||(o.w=1),"Z"in o?(r=UO(VO(o.y,0,1)),i=r.getUTCDay(),r=i>4||0===i?MO.ceil(r):MO(r),r=DO.offset(r,7*(o.V-1)),o.y=r.getUTCFullYear(),o.m=r.getUTCMonth(),o.d=r.getUTCDate()+(o.w+6)%7):(r=zO(VO(o.y,0,1)),i=r.getDay(),r=i>4||0===i?hO.ceil(r):hO(r),r=_O.offset(r,7*(o.V-1)),o.y=r.getFullYear(),o.m=r.getMonth(),o.d=r.getDate()+(o.w+6)%7)}else("W"in o||"U"in o)&&("w"in o||(o.w="u"in o?o.u%7:"W"in o?1:0),i="Z"in o?UO(VO(o.y,0,1)).getUTCDay():zO(VO(o.y,0,1)).getDay(),o.m=0,o.d="W"in o?(o.w+6)%7+7*o.W-(i+5)%7:o.w+7*o.U-(i+6)%7);return"Z"in o?(o.H+=o.Z/100|0,o.M+=o.Z%100,UO(o)):zO(o)}}function S(t,e,n,r){var i,o,a=0,s=e.length,u=n.length;while(a<s){if(r>=u)return-1;if(i=e.charCodeAt(a++),37===i){if(i=e.charAt(a++),o=x[i in ZO?e.charAt(a++):i],!o||(r=o(t,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}function O(t,e,n){var r=c.exec(e.slice(n));return r?(t.p=l[r[0].toLowerCase()],n+r[0].length):-1}function C(t,e,n){var r=p.exec(e.slice(n));return r?(t.w=d[r[0].toLowerCase()],n+r[0].length):-1}function T(t,e,n){var r=f.exec(e.slice(n));return r?(t.w=h[r[0].toLowerCase()],n+r[0].length):-1}function A(t,e,n){var r=m.exec(e.slice(n));return r?(t.m=y[r[0].toLowerCase()],n+r[0].length):-1}function k(t,e,n){var r=v.exec(e.slice(n));return r?(t.m=g[r[0].toLowerCase()],n+r[0].length):-1}function M(t,n,r){return S(t,e,n,r)}function P(t,e,r){return S(t,n,e,r)}function R(t,e,n){return S(t,r,e,n)}function j(t){return a[t.getDay()]}function I(t){return o[t.getDay()]}function L(t){return u[t.getMonth()]}function N(t){return s[t.getMonth()]}function D(t){return i[+(t.getHours()>=12)]}function F(t){return 1+~~(t.getMonth()/3)}function B(t){return a[t.getUTCDay()]}function z(t){return o[t.getUTCDay()]}function U(t){return u[t.getUTCMonth()]}function V(t){return s[t.getUTCMonth()]}function H(t){return i[+(t.getUTCHours()>=12)]}function G(t){return 1+~~(t.getUTCMonth()/3)}return _.x=w(n,_),_.X=w(r,_),_.c=w(e,_),b.x=w(n,b),b.X=w(r,b),b.c=w(e,b),{format:function(t){var e=w(t+="",_);return e.toString=function(){return t},e},parse:function(t){var e=E(t+="",!1);return e.toString=function(){return t},e},utcFormat:function(t){var e=w(t+="",b);return e.toString=function(){return t},e},utcParse:function(t){var e=E(t+="",!0);return e.toString=function(){return t},e}}}var GO,WO,ZO={"-":"",_:" ",0:"0"},YO=/^\s*\d+/,XO=/^%/,qO=/[\\^$*+?|[\]().{}]/g;function KO(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",o=i.length;return r+(o<n?new Array(n-o+1).join(e)+i:i)}function QO(t){return t.replace(qO,"\\$&")}function $O(t){return new RegExp("^(?:"+t.map(QO).join("|")+")","i")}function JO(t){var e={},n=-1,r=t.length;while(++n<r)e[t[n].toLowerCase()]=n;return e}function tC(t,e,n){var r=YO.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function eC(t,e,n){var r=YO.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function nC(t,e,n){var r=YO.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function rC(t,e,n){var r=YO.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function iC(t,e,n){var r=YO.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function oC(t,e,n){var r=YO.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function aC(t,e,n){var r=YO.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function sC(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function uC(t,e,n){var r=YO.exec(e.slice(n,n+1));return r?(t.q=3*r[0]-3,n+r[0].length):-1}function cC(t,e,n){var r=YO.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function lC(t,e,n){var r=YO.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function fC(t,e,n){var r=YO.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function hC(t,e,n){var r=YO.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function pC(t,e,n){var r=YO.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function dC(t,e,n){var r=YO.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function vC(t,e,n){var r=YO.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function gC(t,e,n){var r=YO.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function mC(t,e,n){var r=XO.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function yC(t,e,n){var r=YO.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function _C(t,e,n){var r=YO.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function bC(t,e){return KO(t.getDate(),e,2)}function xC(t,e){return KO(t.getHours(),e,2)}function wC(t,e){return KO(t.getHours()%12||12,e,2)}function EC(t,e){return KO(1+_O.count(nO(t),t),e,3)}function SC(t,e){return KO(t.getMilliseconds(),e,3)}function OC(t,e){return SC(t,e)+"000"}function CC(t,e){return KO(t.getMonth()+1,e,2)}function TC(t,e){return KO(t.getMinutes(),e,2)}function AC(t,e){return KO(t.getSeconds(),e,2)}function kC(t){var e=t.getDay();return 0===e?7:e}function MC(t,e){return KO(fO.count(nO(t)-1,t),e,2)}function PC(t){var e=t.getDay();return e>=4||0===e?vO(t):vO.ceil(t)}function RC(t,e){return t=PC(t),KO(vO.count(nO(t),t)+(4===nO(t).getDay()),e,2)}function jC(t){return t.getDay()}function IC(t,e){return KO(hO.count(nO(t)-1,t),e,2)}function LC(t,e){return KO(t.getFullYear()%100,e,2)}function NC(t,e){return t=PC(t),KO(t.getFullYear()%100,e,2)}function DC(t,e){return KO(t.getFullYear()%1e4,e,4)}function FC(t,e){var n=t.getDay();return t=n>=4||0===n?vO(t):vO.ceil(t),KO(t.getFullYear()%1e4,e,4)}function BC(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+KO(e/60|0,"0",2)+KO(e%60,"0",2)}function zC(t,e){return KO(t.getUTCDate(),e,2)}function UC(t,e){return KO(t.getUTCHours(),e,2)}function VC(t,e){return KO(t.getUTCHours()%12||12,e,2)}function HC(t,e){return KO(1+DO.count(BO(t),t),e,3)}function GC(t,e){return KO(t.getUTCMilliseconds(),e,3)}function WC(t,e){return GC(t,e)+"000"}function ZC(t,e){return KO(t.getUTCMonth()+1,e,2)}function YC(t,e){return KO(t.getUTCMinutes(),e,2)}function XC(t,e){return KO(t.getUTCSeconds(),e,2)}function qC(t){var e=t.getUTCDay();return 0===e?7:e}function KC(t,e){return KO(kO.count(BO(t)-1,t),e,2)}function QC(t){var e=t.getUTCDay();return e>=4||0===e?jO(t):jO.ceil(t)}function $C(t,e){return t=QC(t),KO(jO.count(BO(t),t)+(4===BO(t).getUTCDay()),e,2)}function JC(t){return t.getUTCDay()}function tT(t,e){return KO(MO.count(BO(t)-1,t),e,2)}function eT(t,e){return KO(t.getUTCFullYear()%100,e,2)}function nT(t,e){return t=QC(t),KO(t.getUTCFullYear()%100,e,2)}function rT(t,e){return KO(t.getUTCFullYear()%1e4,e,4)}function iT(t,e){var n=t.getUTCDay();return t=n>=4||0===n?jO(t):jO.ceil(t),KO(t.getUTCFullYear()%1e4,e,4)}function oT(){return"+0000"}function aT(){return"%"}function sT(t){return+t}function uT(t){return Math.floor(+t/1e3)}function cT(t){return GO=HO(t),WO=GO.format,GO.parse,GO.utcFormat,GO.utcParse,GO}cT({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});var lT=1e3,fT=60*lT,hT=60*fT,pT=24*hT,dT=7*pT,vT=30*pT,gT=365*pT;function mT(t){return new Date(t)}function yT(t){return t instanceof Date?+t:+new Date(+t)}function _T(t,e,n,r,i,o,a,s,u){var c=iS(QE,QE),l=c.invert,f=c.domain,h=u(".%L"),p=u(":%S"),d=u("%I:%M"),v=u("%I %p"),g=u("%a %d"),m=u("%b %d"),y=u("%B"),_=u("%Y"),b=[[a,1,lT],[a,5,5*lT],[a,15,15*lT],[a,30,30*lT],[o,1,fT],[o,5,5*fT],[o,15,15*fT],[o,30,30*fT],[i,1,hT],[i,3,3*hT],[i,6,6*hT],[i,12,12*hT],[r,1,pT],[r,2,2*pT],[n,1,dT],[e,1,vT],[e,3,3*vT],[t,1,gT]];function x(s){return(a(s)<s?h:o(s)<s?p:i(s)<s?d:r(s)<s?v:e(s)<s?n(s)<s?g:m:t(s)<s?y:_)(s)}function w(e,n,r,i){if(null==e&&(e=10),"number"===typeof e){var o=Math.abs(r-n)/e,a=qw((function(t){return t[2]})).right(b,o);a===b.length?(i=uE(n/gT,r/gT,e),e=t):a?(a=b[o/b[a-1][2]<b[a][2]/o?a-1:a],i=a[1],e=a[0]):(i=Math.max(uE(n,r,e),1),e=s)}return null==i?e:e.every(i)}return c.invert=function(t){return new Date(l(t))},c.domain=function(t){return arguments.length?f(PE.call(t,yT)):f().map(mT)},c.ticks=function(t,e){var n,r=f(),i=r[0],o=r[r.length-1],a=o<i;return a&&(n=i,i=o,o=n),n=w(t,i,o,e),n=n?n.range(i,o+1):[],a?n.reverse():n},c.tickFormat=function(t,e){return null==e?x:u(e)},c.nice=function(t,e){var n=f();return(t=w(t,n[0],n[n.length-1],e))?f(jS(n,t)):c},c.copy=function(){return nS(c,_T(t,e,n,r,i,o,a,s,u))},c}var bT,xT,wT,ET=function(){return xE.apply(_T(nO,iO,fO,_O,xO,EO,OO,TO,WO).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)},ST=tO((function(t){t.setUTCDate(1),t.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCMonth(t.getUTCMonth()+e)}),(function(t,e){return e.getUTCMonth()-t.getUTCMonth()+12*(e.getUTCFullYear()-t.getUTCFullYear())}),(function(t){return t.getUTCMonth()})),OT=(ST.range,tO((function(t){t.setUTCMinutes(0,0,0)}),(function(t,e){t.setTime(+t+e*sO)}),(function(t,e){return(e-t)/sO}),(function(t){return t.getUTCHours()}))),CT=(OT.range,tO((function(t){t.setUTCSeconds(0,0)}),(function(t,e){t.setTime(+t+e*aO)}),(function(t,e){return(e-t)/aO}),(function(t){return t.getUTCMinutes()})));CT.range;function TT(){var t,e,n,r,i,o=0,a=1,s=QE,u=!1;function c(e){return isNaN(e=+e)?i:s(0===n?.5:(e=(r(e)-t)*n,u?Math.max(0,Math.min(1,e)):e))}return c.domain=function(i){return arguments.length?(t=r(o=+i[0]),e=r(a=+i[1]),n=t===e?0:1/(e-t),c):[o,a]},c.clamp=function(t){return arguments.length?(u=!!t,c):u},c.interpolator=function(t){return arguments.length?(s=t,c):s},c.unknown=function(t){return arguments.length?(i=t,c):i},function(i){return r=i,t=i(o),e=i(a),n=t===e?0:1/(e-t),c}}function AT(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function kT(){var t=MS(TT()(QE));return t.copy=function(){return AT(t,kT())},wE.apply(t,arguments)}function MT(){var t,e,n,r,i,o,a,s=0,u=.5,c=1,l=QE,f=!1;function h(t){return isNaN(t=+t)?a:(t=.5+((t=+o(t))-e)*(t<e?r:i),l(f?Math.max(0,Math.min(1,t)):t))}return h.domain=function(a){return arguments.length?(t=o(s=+a[0]),e=o(u=+a[1]),n=o(c=+a[2]),r=t===e?0:.5/(e-t),i=e===n?0:.5/(n-e),h):[s,u,c]},h.clamp=function(t){return arguments.length?(f=!!t,h):f},h.interpolator=function(t){return arguments.length?(l=t,h):l},h.unknown=function(t){return arguments.length?(a=t,h):a},function(a){return o=a,t=a(s),e=a(u),n=a(c),r=t===e?0:.5/(e-t),i=e===n?0:.5/(n-e),h}}function PT(){var t=MS(MT()(QE));return t.copy=function(){return AT(t,PT())},wE.apply(t,arguments)}var RT,jT,IT=/^(?:(?!0000)[0-9]{4}([-/.]+)(?:(?:0?[1-9]|1[0-2])\1(?:0?[1-9]|1[0-9]|2[0-8])|(?:0?[13-9]|1[0-2])\1(?:29|30)|(?:0?[13578]|1[02])\1(?:31))|(?:[0-9]{2}(?:0[48]|[2468][048]|[13579][26])|(?:0[48]|[2468][048]|[13579][26])00)([-/.]?)0?2\2(?:29))(\s+([01]|([01][0-9]|2[0-3])):([0-9]|[0-5][0-9]):([0-9]|[0-5][0-9]))?$/,LT=(bT={},Object(Ar["a"])(bT,Jm.LINEAR,PS),Object(Ar["a"])(bT,Jm.POWER,XS),Object(Ar["a"])(bT,Jm.LOG,HS),Object(Ar["a"])(bT,Jm.IDENTITY,RS),Object(Ar["a"])(bT,Jm.SEQUENTIAL,kT),Object(Ar["a"])(bT,Jm.TIME,ET),Object(Ar["a"])(bT,Jm.QUANTILE,qS),Object(Ar["a"])(bT,Jm.QUANTIZE,KS),Object(Ar["a"])(bT,Jm.THRESHOLD,QS),Object(Ar["a"])(bT,Jm.CAT,IE),Object(Ar["a"])(bT,Jm.DIVERGING,PT),bT),NT=(xT=Object(Yf["injectable"])(),xT(wT=function(){function t(){Object(et["a"])(this,t),Object(Ar["a"])(this,"scaleOptions",{})}return Object(nt["a"])(t,[{key:"apply",value:function(t,e){var n=this,r=e.styleAttributeService;t.hooks.init.tapPromise("FeatureScalePlugin",Object(mi["a"])(_i.a.mark((function e(){var i,o,a;return _i.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n.scaleOptions=t.getScaleOptions(),o=r.getLayerStyleAttributes(),a=null===(i=t.getSource())||void 0===i?void 0:i.data.dataArray,!Array.isArray(a)||0!==a.length){e.next=7;break}return e.abrupt("return");case 7:n.caculateScalesForAttributes(o||[],a);case 8:case"end":return e.stop()}}),e)})))),t.hooks.beforeRenderData.tapPromise("FeatureScalePlugin",function(){var e=Object(mi["a"])(_i.a.mark((function e(i){var o,a;return _i.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(i){e.next=2;break}return e.abrupt("return",i);case 2:if(n.scaleOptions=t.getScaleOptions(),o=r.getLayerStyleAttributes(),a=t.getSource().data.dataArray,!Array.isArray(a)||0!==a.length){e.next=7;break}return e.abrupt("return",!0);case 7:return n.caculateScalesForAttributes(o||[],a),t.layerModelNeedUpdate=!0,e.abrupt("return",!0);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),t.hooks.beforeRender.tap("FeatureScalePlugin",(function(){if(!t.layerModelNeedUpdate){n.scaleOptions=t.getScaleOptions();var e=r.getLayerStyleAttributes(),i=t.getSource().data.dataArray;if((!Array.isArray(i)||0!==i.length)&&e){var o=e.filter((function(t){return t.needRescale}));o.length&&n.caculateScalesForAttributes(o,i)}}}))}},{key:"isNumber",value:function(t){return!isNaN(parseFloat(t))&&isFinite(t)}},{key:"caculateScalesForAttributes",value:function(t,e){var n=this;t.forEach((function(t){if(t.scale){var r=t.scale;r.names=n.parseFields(t.scale.field||[]);var i=[];r.names.forEach((function(r){var o;i.push(n.createScale(r,t.name,null===(o=t.scale)||void 0===o?void 0:o.values,e))})),i.some((function(t){return t.type===ty.VARIABLE}))?(r.type=ty.VARIABLE,i.forEach((function(t){var e,n;if(!r.callback&&"text"!==r.values)switch(null===(e=t.option)||void 0===e?void 0:e.type){case Jm.LOG:case Jm.LINEAR:case Jm.POWER:if(r.values&&r.values.length>2){var i=t.scale.ticks(r.values.length);t.scale.domain(i)}r.values?t.scale.range(r.values):t.scale.range(t.option.domain);break;case Jm.QUANTILE:case Jm.QUANTIZE:case Jm.THRESHOLD:t.scale.range(r.values);break;case Jm.CAT:r.values?t.scale.range(r.values):t.scale.range(t.option.domain);break;case Jm.DIVERGING:case Jm.SEQUENTIAL:t.scale.interpolator(bE(r.values));break}"text"===r.values&&t.scale.range(null===(n=t.option)||void 0===n?void 0:n.domain)}))):(r.type=ty.CONSTANT,r.defaultValues=i.map((function(t,e){return t.scale(r.names[e])}))),r.scalers=i.map((function(t){return{field:t.field,func:t.scale,option:t.option}})),t.needRescale=!1}}))}},{key:"parseFields",value:function(t){return Array.isArray(t)?t:Object(K["isString"])(t)?t.split("*"):[t]}},{key:"createScale",value:function(t,e,n,r){var i,o,a=this.scaleOptions[e]&&(null===(i=this.scaleOptions[e])||void 0===i?void 0:i.field)===t?this.scaleOptions[e]:this.scaleOptions[t],s={field:t,scale:void 0,type:ty.VARIABLE,option:a};if(!r||!r.length)return a&&a.type?s.scale=this.createDefaultScale(a):(s.scale=IE([t]),s.type=ty.CONSTANT),s;var u=null===(o=r.find((function(e){return!Object(K["isNil"])(e[t])})))||void 0===o?void 0:o[t];if(this.isNumber(t)||Object(K["isNil"])(u)&&!a)s.scale=IE([t]),s.type=ty.CONSTANT;else{var c=a&&a.type||this.getDefaultType(u);"text"===n&&(c=Jm.CAT);var l=this.createScaleConfig(c,t,a,r);s.scale=this.createDefaultScale(l),s.option=l}return s}},{key:"getDefaultType",value:function(t){var e=Jm.LINEAR;return"string"===typeof t&&(e=IT.test(t)?Jm.TIME:Jm.CAT),e}},{key:"createScaleConfig",value:function(t,e,n,r){var i={type:t},o=(null===r||void 0===r?void 0:r.map((function(t){return t[e]})))||[];if(null!==n&&void 0!==n&&n.domain)i.domain=null===n||void 0===n?void 0:n.domain;else if(t!==Jm.CAT&&t!==Jm.QUANTILE&&t!==Jm.DIVERGING)i.domain=eE(o);else if(t===Jm.CAT)i.domain=Object(K["uniq"])(o);else if(t===Jm.QUANTILE)i.domain=o;else if(t===Jm.DIVERGING){var a=eE(o),s=void 0!==(null===n||void 0===n?void 0:n.neutral)?null===n||void 0===n?void 0:n.neutral:(a[0]+a[1])/2;i.domain=[a[0],s,a[1]]}return Object(P["a"])(Object(P["a"])({},i),n)}},{key:"createDefaultScale",value:function(t){var e=t.type,n=t.domain,r=t.unknown,i=t.clamp,o=t.nice,a=LT[e]();return n&&a.domain&&a.domain(n),r&&a.unknown(r),void 0!==i&&a.clamp&&a.clamp(i),void 0!==o&&a.nice&&a.nice(o),a}}]),t}())||wT),DT=(RT=Object(Yf["injectable"])(),RT(jT=function(){function t(){Object(et["a"])(this,t)}return Object(nt["a"])(t,[{key:"apply",value:function(t){t.hooks.beforeRender.tap("LayerAnimateStylePlugin",(function(){var e=t.animateStatus;e&&t.models.forEach((function(e){e.addUniforms(Object(P["a"])({},t.layerModel.getAnimateUniforms()))}))}))}}]),t}())||jT),FT=function(){function t(e){var n=e.rendererService,r=e.layerService,i=e.parent;Object(et["a"])(this,t),Object(Ar["a"])(this,"tileResource",new Map),Object(Ar["a"])(this,"_tiles",[]),this.rendererService=n,this.layerService=r,this.parent=i}return Object(nt["a"])(t,[{key:"tiles",get:function(){return this._tiles}},{key:"hasTile",value:function(t){return this._tiles.some((function(e){return e.key===t}))}},{key:"addTile",value:function(t){this._tiles.push(t)}},{key:"getTile",value:function(t){return this._tiles.find((function(e){return e.key===t}))}},{key:"getVisibleTileBylngLat",value:function(t){return this._tiles.find((function(e){return e.isLoaded&&e.visible&&e.lnglatInBounds(t)}))}},{key:"removeTile",value:function(t){var e=this._tiles.findIndex((function(e){return e.key===t})),n=this._tiles.splice(e,1);n[0]&&n[0].destroy()}},{key:"updateTileVisible",value:function(t){var e=this.getTile(t.key);null===e||void 0===e||e.updateVisible(t.isVisible)}},{key:"isParentLoaded",value:function(t){var e=t.parent;if(!e)return!0;var n=this.getTile(null===e||void 0===e?void 0:e.key);return!(null===n||void 0===n||!n.isLoaded)}},{key:"isChildrenLoaded",value:function(t){var e=this,n=null===t||void 0===t?void 0:t.children;return 0===n.length||n.some((function(t){var n=e.getTile(null===t||void 0===t?void 0:t.key);return!1===(null===n||void 0===n?void 0:n.isLoaded)}))}},{key:"render",value:function(){var t=Object(mi["a"])(_i.a.mark((function t(){var e,n=this;return _i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e=this.getRenderLayers(),e.map(function(){var t=Object(mi["a"])(_i.a.mark((function t(e){return _i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,n.layerService.renderLayer(e);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 2:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"getRenderLayers",value:function(){var t=this._tiles.filter((function(t){return t.visible&&t.isLoaded})),e=[];return t.map((function(t){return e.push.apply(e,Object(M["a"])(t.getLayers()))})),e}},{key:"getLayers",value:function(){var t=this._tiles.filter((function(t){return t.isLoaded})),e=[];return t.map((function(t){return e.push.apply(e,Object(M["a"])(t.getLayers()))})),e}},{key:"getTiles",value:function(){return this._tiles}},{key:"destroy",value:function(){this._tiles.forEach((function(t){return t.destroy()})),this.tileResource.clear()}}]),t}(),BT=n("3L5V"),zT=n.n(BT);function UT(t,e,n){void 0===n&&(n={});var r=z(t),i=z(e),o=zT.a.union(r.coordinates,i.coordinates);return 0===o.length?null:1===o.length?L(o[0],n.properties):F(o,n.properties)}var VT=UT,HT=function(){function t(){Object(et["a"])(this,t)}return Object(nt["a"])(t,[{key:"getCombineFeature",value:function(t){var e=null,n=t[0];return t.map((function(t){var n=L(t.coordinates);e=null===e?n:VT(e,n)})),n&&(e.properties=Object(P["a"])({},n)),e}}]),t}(),GT="select",WT="active",ZT=function(){function t(e){var n=e.layerService,r=e.tileLayerService,i=e.parent;Object(et["a"])(this,t),Object(Ar["a"])(this,"tilePickID",new Map),this.layerService=n,this.tileLayerService=r,this.parent=i,this.tileSourceService=new HT}return Object(nt["a"])(t,[{key:"pickRender",value:function(t){var e=this.tileLayerService.getVisibleTileBylngLat(t.lngLat);if(e){var n=e.getMainLayer();null===n||void 0===n||n.layerPickService.pickRender(t)}}},{key:"pick",value:function(t,e){var n=this.parent.getContainer(),r=n.get(Kf.IPickingService);if("RasterLayer"===t.type){var i=this.tileLayerService.getVisibleTileBylngLat(e.lngLat);if(i&&void 0!==i.getMainLayer()){var o=i.getMainLayer();return o.layerPickService.pickRasterLayer(o,e,this.parent)}return!1}return this.pickRender(e),r.pickFromPickingFBO(t,e)}},{key:"selectFeature",value:function(t){var e=Object(q["a"])(t,3),n=e[0],r=e[1],i=e[2],o=this.color2PickId(n,r,i);this.tilePickID.set(GT,o),this.updateHighLight(n,r,i,GT)}},{key:"highlightPickedFeature",value:function(t){var e=Object(q["a"])(t,3),n=e[0],r=e[1],i=e[2],o=this.color2PickId(n,r,i);this.tilePickID.set(WT,o),this.updateHighLight(n,r,i,WT)}},{key:"updateHighLight",value:function(t,e,n,r){this.tileLayerService.tiles.map((function(i){var o=i.getMainLayer();switch(r){case GT:null===o||void 0===o||o.hooks.beforeSelect.call([t,e,n]);break;case WT:null===o||void 0===o||o.hooks.beforeHighlight.call([t,e,n]);break}}))}},{key:"setPickState",value:function(){var t=this.tilePickID.get(GT),e=this.tilePickID.get(WT);if(t){var n=this.pickId2Color(t),r=Object(q["a"])(n,3),i=r[0],o=r[1],a=r[2];this.updateHighLight(i,o,a,GT)}else if(e){var s=this.pickId2Color(e),u=Object(q["a"])(s,3),c=u[0],l=u[1],f=u[2];this.updateHighLight(c,l,f,WT)}else;}},{key:"color2PickId",value:function(t,e,n){return fi(new Uint8Array([t,e,n]))}},{key:"pickId2Color",value:function(t){return hi(t)}},{key:"getFeatureById",value:function(t){var e=this.tileLayerService.getTiles().filter((function(t){return t.visible})),n=[];return e.map((function(e){n.push.apply(n,Object(M["a"])(e.getFeatureById(t)))})),n.length<=0?null:[]}},{key:"pickRasterLayer",value:function(t,e,n){return!1}}]),t}();function YT(t){var e=XT();return function(){var n,r=Object(ct["a"])(t);if(e){var i=Object(ct["a"])(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(ut["a"])(this,n)}}function XT(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}var qT='varying vec4 v_color;\nuniform float u_opacity: 1.0;\n\nuniform float u_pickLight: 0.0;\n\n#pragma include "picking"\n\nvarying mat4 styleMappingMat; // \u4f20\u9012\u4ece\u7247\u5143\u4e2d\u4f20\u9012\u7684\u6620\u5c04\u6570\u636e\n\nuniform float u_linearColor: 0;\nuniform vec4 u_sourceColor;\nuniform vec4 u_targetColor;\n\nuniform float u_opacitylinear: 0.0;\nuniform float u_opacitylinear_dir: 1.0;\n\nvoid main() {\n  float opacity = styleMappingMat[0][0];\n  float lightWeight = styleMappingMat[1][3];\n  float barLinearZ = styleMappingMat[2][3];\n\n  // \u8bbe\u7f6e\u5706\u67f1\u7684\u5e95\u8272\n  if(u_linearColor == 1.0) { // \u4f7f\u7528\u6e10\u53d8\u989c\u8272\n    gl_FragColor = mix(u_sourceColor, u_targetColor, barLinearZ);\n    gl_FragColor.rgb *= lightWeight;\n  } else { // \u4f7f\u7528 color \u65b9\u6cd5\u4f20\u5165\u7684\u989c\u8272\n     gl_FragColor = v_color;\n  }\n\n  // \u5e94\u7528\u900f\u660e\u5ea6\n  gl_FragColor.a *= opacity;\n\n  // \u5f00\u542f\u900f\u660e\u5ea6\u6e10\u53d8\n  if(u_opacitylinear > 0.0) {\n    gl_FragColor.a *= u_opacitylinear_dir > 0.0 ? (1.0 - barLinearZ): barLinearZ;\n  }\n\n  // picking\n  if(u_pickLight > 0.0) {\n    gl_FragColor = filterColorAlpha(gl_FragColor, lightWeight);\n  } else {\n    gl_FragColor = filterColor(gl_FragColor);\n  }\n}\n',KT='precision highp float;\n\n#define pi 3.1415926535\n#define ambientRatio 0.5\n#define diffuseRatio 0.3\n#define specularRatio 0.2\n\nattribute vec3 a_Position;\nattribute vec3 a_Pos;\nattribute vec4 a_Color;\nattribute vec3 a_Size;\nattribute vec3 a_Normal;\n\nuniform float u_heightfixed: 0.0; // \u9ed8\u8ba4\u4e0d\u56fa\u5b9a\nuniform float u_globel;\nuniform float u_r;\nuniform mat4 u_ModelMatrix;\nuniform mat4 u_Mvp;\nvarying vec4 v_color;\n\nuniform float u_opacity : 1;\nuniform float u_lightEnable: 1;\n\nvarying mat4 styleMappingMat; // \u7528\u4e8e\u5c06\u5728\u9876\u70b9\u7740\u8272\u5668\u4e2d\u8ba1\u7b97\u597d\u7684\u6837\u5f0f\u503c\u4f20\u9012\u7ed9\u7247\u5143\n\n#pragma include "styleMapping"\n#pragma include "styleMappingCalOpacity"\n\n#pragma include "projection"\n#pragma include "light"\n#pragma include "picking"\n\nfloat getYRadian(float x, float z) {\n  if(x > 0.0 && z > 0.0) {\n    return atan(x/z);\n  } else if(x > 0.0 && z <= 0.0){\n    return atan(-z/x) + pi/2.0;\n  } else if(x <= 0.0 && z <= 0.0) {\n    return  pi + atan(x/z); //atan(x/z) + \n  } else {\n    return atan(z/-x) + pi*3.0/2.0;\n  }\n}\n\nfloat getXRadian(float y, float r) {\n  return atan(y/r);\n}\n\nvoid main() {\n\n  // cal style mapping - \u6570\u636e\u7eb9\u7406\u6620\u5c04\u90e8\u5206\u7684\u8ba1\u7b97\n  styleMappingMat = mat4(\n    0.0, 0.0, 0.0, 0.0, // opacity - strokeOpacity - strokeWidth - empty\n    0.0, 0.0, 0.0, 0.0, // strokeR - strokeG - strokeB - strokeA - lightWeight\n    0.0, 0.0, 0.0, 0.0, // offsets[0] - offsets[1] - linearZ(\u5782\u76f4\u65b9\u5411 0 - 1 \u7684\u503c)\n    0.0, 0.0, 0.0, 0.0\n  );\n\n  float rowCount = u_cellTypeLayout[0][0];    // \u5f53\u524d\u7684\u6570\u636e\u7eb9\u7406\u6709\u51e0\u884c\n  float columnCount = u_cellTypeLayout[0][1]; // \u5f53\u770b\u5230\u6570\u636e\u7eb9\u7406\u6709\u51e0\u5217\n  float columnWidth = 1.0/columnCount;  // \u5217\u5bbd\n  float rowHeight = 1.0/rowCount;       // \u884c\u9ad8\n  float cellCount = calCellCount(); // opacity - strokeOpacity - strokeWidth - stroke - offsets\n  float id = a_vertexId; // \u7b2cn\u4e2a\u9876\u70b9\n  float cellCurrentRow = floor(id * cellCount / columnCount) + 1.0; // \u8d77\u59cb\u70b9\u5728\u7b2c\u51e0\u884c\n  float cellCurrentColumn = mod(id * cellCount, columnCount) + 1.0; // \u8d77\u59cb\u70b9\u5728\u7b2c\u51e0\u5217\n  \n  // cell \u56fa\u5b9a\u987a\u5e8f opacity -> strokeOpacity -> strokeWidth -> stroke ... \n  // \u6309\u987a\u5e8f\u4ece cell \u4e2d\u53d6\u503c\u3001\u82e5\u6ca1\u6709\u5219\u81ea\u52a8\u5f80\u4e0b\u53d6\u503c\n  float textureOffset = 0.0; // \u5728 cell \u4e2d\u53d6\u503c\u7684\u504f\u79fb\u91cf\n\n  vec2 opacityAndOffset = calOpacityAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);\n  styleMappingMat[0][0] = opacityAndOffset.r;\n  textureOffset = opacityAndOffset.g;\n  // cal style mapping - \u6570\u636e\u7eb9\u7406\u6620\u5c04\u90e8\u5206\u7684\u8ba1\u7b97\n  vec3 size = a_Size * a_Position;\n\n  // a_Position.z \u662f\u5728\u6784\u5efa\u7f51\u683c\u7684\u65f6\u5019\u4f20\u5165\u7684\u6807\u51c6\u503c 0 - 1\uff0c\u5728\u63d2\u503c\u5668\u63d2\u503c\u53ef\u4ee5\u83b7\u53d6 0\uff5e1 \u7ebf\u6027\u6e10\u53d8\u7684\u503c\n  styleMappingMat[2][3] =  a_Position.z;\n\n  vec3 offset = size; // \u63a7\u5236\u5706\u67f1\u4f53\u7684\u5927\u5c0f - \u4ece\u6807\u51c6\u5355\u4f4d\u5706\u67f1\u4f53\u8fdb\u884c\u504f\u79fb\n  if(u_heightfixed < 1.0) { // \u5706\u67f1\u4f53\u4e0d\u56fa\u5b9a\u9ad8\u5ea6\n    \n    if (u_CoordinateSystem == COORDINATE_SYSTEM_P20 || u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET) {\n      // P20 \u5750\u6807\u7cfb\u4e0b\uff0c\u4e3a\u4e86\u548c Web \u58a8\u5361\u6258\u5750\u6807\u7cfb\u7edf\u4e00\uff0czoom \u9ed8\u8ba4\u51cf1\n      offset = offset * pow(2.0, (19.0 - u_Zoom));\n    }\n    if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) {\n      // P20_2 \u5750\u6807\u7cfb\u4e0b\uff0c\u4e3a\u4e86\u548c Web \u58a8\u5361\u6258\u5750\u6807\u7cfb\u7edf\u4e00\uff0czoom \u9ed8\u8ba4\u51cf3\n      offset = offset * pow(2.0, (19.0 - 3.0 - u_Zoom));\n    }\n  } else {// \u5706\u67f1\u4f53\u56fa\u5b9a\u9ad8\u5ea6 \uff08 \u5904\u7406 mapbox \uff09\n    if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {\n      offset *= 4.0/pow(2.0, 21.0 - u_Zoom);\n    }\n  }\n\n\n  vec4 project_pos = project_position(vec4(a_Pos.xy, 0., 1.0));\n\n  // u_r \u63a7\u5236\u5706\u67f1\u7684\u751f\u957f\n  vec4 pos = vec4(project_pos.xy + offset.xy, offset.z * u_r, 1.0);\n\n  // \u5706\u67f1\u5149\u7167\u6548\u679c\n  float lightWeight = 1.0;\n  if(u_lightEnable > 0.0) { // \u53d6\u6d88\u4e09\u5143\u8868\u8fbe\u5f0f\uff0c\u589e\u5f3a\u5065\u58ee\u6027\n    lightWeight = calc_lighting(pos);\n  }\n  styleMappingMat[1][3] = lightWeight;\n\n  v_color =vec4(a_Color.rgb * lightWeight, a_Color.w);\n\n  \n  // \u5728\u5730\u7403\u6a21\u5f0f\u4e0b\uff0c\u5c06\u539f\u672c\u5782\u76f4\u4e8e xy \u5e73\u9762\u7684\u5706\u67f1\u8c03\u6574\u59ff\u6001\u5230\u9002\u5e94\u5706\u7684\u89d2\u5ea6\n  //\u65cb\u8f6c\u77e9\u9635mx\uff0c\u521b\u5efa\u7ed5x\u8f74\u65cb\u8f6c\u77e9\u9635\n  float r = sqrt(a_Pos.z*a_Pos.z + a_Pos.x*a_Pos.x);\n  float xRadian = getXRadian(a_Pos.y, r);\n  float xcos = cos(xRadian);//\u6c42\u89e3\u65cb\u8f6c\u89d2\u5ea6\u4f59\u5f26\u503c\n  float xsin = sin(xRadian);//\u6c42\u89e3\u65cb\u8f6c\u89d2\u5ea6\u6b63\u5f26\u503c\n  mat4 mx = mat4(\n    1,0,0,0,  \n    0,xcos,-xsin,0,  \n    0,xsin,xcos,0,  \n    0,0,0,1);\n\n  //\u65cb\u8f6c\u77e9\u9635my\uff0c\u521b\u5efa\u7ed5y\u8f74\u65cb\u8f6c\u77e9\u9635\n  float yRadian = getYRadian(a_Pos.x, a_Pos.z);\n  float ycos = cos(yRadian);//\u6c42\u89e3\u65cb\u8f6c\u89d2\u5ea6\u4f59\u5f26\u503c\n  float ysin = sin(yRadian);//\u6c42\u89e3\u65cb\u8f6c\u89d2\u5ea6\u6b63\u5f26\u503c\n  mat4 my = mat4(\n    ycos,0,-ysin,0,  \n    0,1,0,0,  \n    ysin,0,ycos,0,  \n    0,0,0,1);\n\n  gl_Position = u_ViewProjectionMatrix * vec4(( my * mx *  vec4(a_Position * a_Size, 1.0)).xyz + a_Pos, 1.0);\n  \n\n  setPickingColor(a_PickingColor);\n}\n',QT=function(t){Object(st["a"])(n,t);var e=YT(n);function n(){var t;Object(et["a"])(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return t=e.call.apply(e,[this].concat(i)),Object(Ar["a"])(Object(ft["a"])(t),"raiseCount",0),Object(Ar["a"])(Object(ft["a"])(t),"raiseRepeat",0),t}return Object(nt["a"])(n,[{key:"getUninforms",value:function(){var t=this.layer.getLayerConfig(),e=t.animateOption,n=void 0===e?{enable:!1,speed:.01,repeat:!1}:e,r=t.opacity,i=void 0===r?1:r,o=t.sourceColor,a=t.targetColor,s=t.pickLight,u=void 0!==s&&s,c=t.heightfixed,l=void 0!==c&&c,f=t.opacityLinear,h=void 0===f?{enable:!1,dir:"up"}:f,p=t.lightEnable,d=void 0===p||p;if(this.dataTextureTest&&this.dataTextureNeedUpdate({opacity:i})){this.judgeStyleAttributes({opacity:i});var v=this.layer.getEncodedData(),g=this.calDataFrame(this.cellLength,v,this.cellProperties),m=g.data,y=g.width,_=g.height;this.rowCount=_,this.dataTexture=this.cellLength>0&&m.length>0?this.createTexture2D({flipY:!0,data:m,format:Rp.LUMINANCE,type:Rp.FLOAT,width:y,height:_}):this.createTexture2D({flipY:!0,data:[1],format:Rp.LUMINANCE,type:Rp.FLOAT,width:1,height:1})}var b=0,x=[0,0,0,0],w=[0,0,0,0];if(o&&a&&(x=li(o),w=li(a),b=1),this.raiseCount<1&&this.raiseRepeat>0&&n.enable){var E=n.speed,S=void 0===E?.01:E;this.raiseCount+=S,this.raiseCount>=1&&(this.raiseRepeat>1?(this.raiseCount=0,this.raiseRepeat--):this.raiseCount=1)}return{u_pickLight:Number(u),u_heightfixed:Number(l),u_r:n.enable&&this.raiseRepeat>0?this.raiseCount:1,u_dataTexture:this.dataTexture,u_cellTypeLayout:this.getCellTypeLayout(),u_opacity:Object(K["isNumber"])(i)?i:1,u_linearColor:b,u_sourceColor:x,u_targetColor:w,u_opacitylinear:Number(h.enable),u_opacitylinear_dir:"up"===h.dir?1:0,u_lightEnable:Number(d)}}},{key:"initModels",value:function(){var t=Object(mi["a"])(_i.a.mark((function t(){return _i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.buildModels();case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"buildModels",value:function(){var t=Object(mi["a"])(_i.a.mark((function t(){var e,n,r,i;return _i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=this.layer.getLayerConfig(),n=e.animateOption.repeat,r=void 0===n?1:n,this.raiseRepeat=r,t.next=4,this.layer.buildLayerModel({moduleName:"pointEarthExtrude",vertexShader:KT,fragmentShader:qT,triangulation:Vb,depth:{enable:!0},cull:{enable:!0,face:Uc(this.mapService.version)},blend:this.getBlend()});case 4:return i=t.sent,t.abrupt("return",[i]);case 6:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"clearModels",value:function(){var t;null===(t=this.dataTexture)||void 0===t||t.destroy()}},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"size",type:ey.Attribute,descriptor:{name:"a_Size",buffer:{usage:Rp.DYNAMIC_DRAW,data:[],type:Rp.FLOAT},size:3,update:function(t){var e=t.size;if(e){var n=[];return Array.isArray(e)&&(n=2===e.length?[e[0],e[0],e[1]]:e),Array.isArray(e)||(n=[e,e,e]),n}return[2,2,2]}}}),this.styleAttributeService.registerStyleAttribute({name:"normal",type:ey.Attribute,descriptor:{name:"a_Normal",buffer:{usage:Rp.STATIC_DRAW,data:[],type:Rp.FLOAT},size:3,update:function(t,e,n,r,i){return i}}}),this.styleAttributeService.registerStyleAttribute({name:"pos",type:ey.Attribute,descriptor:{name:"a_Pos",buffer:{usage:Rp.DYNAMIC_DRAW,data:[],type:Rp.FLOAT},size:3,update:function(t){var e=Sr(t.coordinates);return mb([e[0],e[1]])}}})}}]),n}(db);function $T(t){var e=JT();return function(){var n,r=Object(ct["a"])(t);if(e){var i=Object(ct["a"])(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(ut["a"])(this,n)}}function JT(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}var tA="uniform float u_additive;\n\nvarying mat4 styleMappingMat; // \u4f20\u9012\u4ece\u7247\u5143\u4e2d\u4f20\u9012\u7684\u6620\u5c04\u6570\u636e\n\nvarying vec4 v_data;\nvarying vec4 v_color;\nvarying float v_radius;\n\n#pragma include \"sdf_2d\"\n#pragma include \"picking\"\n\n\nvoid main() {\n  int shape = int(floor(v_data.w + 0.5));\n\n  vec4 textrueStroke = vec4(\n    styleMappingMat[1][0],\n    styleMappingMat[1][1],\n    styleMappingMat[1][2],\n    styleMappingMat[1][3]\n  );\n\n  float opacity = styleMappingMat[0][0];\n  float stroke_opacity = styleMappingMat[0][1];\n  float strokeWidth = styleMappingMat[0][2];\n  vec4 strokeColor = textrueStroke == vec4(0) ? v_color : textrueStroke;\n\n  lowp float antialiasblur = v_data.z;\n  float r = v_radius / (v_radius + strokeWidth);\n\n  float outer_df;\n  float inner_df;\n  // 'circle', 'triangle', 'square', 'pentagon', 'hexagon', 'octogon', 'hexagram', 'rhombus', 'vesica'\n  if (shape == 0) {\n    outer_df = sdCircle(v_data.xy, 1.0);\n    inner_df = sdCircle(v_data.xy, r);\n  } else if (shape == 1) {\n    outer_df = sdEquilateralTriangle(1.1 * v_data.xy);\n    inner_df = sdEquilateralTriangle(1.1 / r * v_data.xy);\n  } else if (shape == 2) {\n    outer_df = sdBox(v_data.xy, vec2(1.));\n    inner_df = sdBox(v_data.xy, vec2(r));\n  } else if (shape == 3) {\n    outer_df = sdPentagon(v_data.xy, 0.8);\n    inner_df = sdPentagon(v_data.xy, r * 0.8);\n  } else if (shape == 4) {\n    outer_df = sdHexagon(v_data.xy, 0.8);\n    inner_df = sdHexagon(v_data.xy, r * 0.8);\n  } else if (shape == 5) {\n    outer_df = sdOctogon(v_data.xy, 1.0);\n    inner_df = sdOctogon(v_data.xy, r);\n  } else if (shape == 6) {\n    outer_df = sdHexagram(v_data.xy, 0.52);\n    inner_df = sdHexagram(v_data.xy, r * 0.52);\n  } else if (shape == 7) {\n    outer_df = sdRhombus(v_data.xy, vec2(1.0));\n    inner_df = sdRhombus(v_data.xy, vec2(r));\n  } else if (shape == 8) {\n    outer_df = sdVesica(v_data.xy, 1.1, 0.8);\n    inner_df = sdVesica(v_data.xy, r * 1.1, r * 0.8);\n  }\n\n  if(outer_df > antialiasblur + 0.018) discard;\n\n  float opacity_t = smoothstep(0.0, antialiasblur, outer_df);\n\n  float color_t = strokeWidth < 0.01 ? 0.0 : smoothstep(\n    antialiasblur,\n    0.0,\n    inner_df\n  );\n\n  if(strokeWidth < 0.01) {\n    gl_FragColor = vec4(v_color.rgb, v_color.a * opacity);\n  } else {\n    gl_FragColor = mix(vec4(v_color.rgb, v_color.a * opacity), strokeColor * stroke_opacity, color_t);\n  }\n\n  if(u_additive > 0.0) {\n    gl_FragColor *= opacity_t;\n    gl_FragColor = filterColorAlpha(gl_FragColor, gl_FragColor.a);\n  } else {\n    gl_FragColor.a *= opacity_t;\n    gl_FragColor = filterColor(gl_FragColor);\n  }\n}\n",eA='attribute vec4 a_Color;\nattribute vec3 a_Position;\nattribute vec3 a_Extrude;\nattribute float a_Size;\nattribute float a_Shape;\n\nvarying mat4 styleMappingMat; // \u7528\u4e8e\u5c06\u5728\u9876\u70b9\u7740\u8272\u5668\u4e2d\u8ba1\u7b97\u597d\u7684\u6837\u5f0f\u503c\u4f20\u9012\u7ed9\u7247\u5143\n\nuniform mat4 u_ModelMatrix;\nuniform mat4 u_Mvp;\n\nvarying vec4 v_data;\nvarying vec4 v_color;\nvarying float v_radius;\n\nuniform float u_opacity : 1;\nuniform float u_stroke_opacity : 1;\nuniform float u_stroke_width : 2;\nuniform vec4 u_stroke_color : [0.0, 0.0, 0.0, 0.0];\nuniform vec2 u_offsets;\n\nuniform float u_blur : 0.0;\n\n#pragma include "styleMapping"\n#pragma include "styleMappingCalOpacity"\n#pragma include "styleMappingCalStrokeOpacity"\n#pragma include "styleMappingCalStrokeWidth"\n\n#pragma include "projection"\n#pragma include "picking"\n\n\nvoid main() {\n  vec3 extrude = a_Extrude;\n  float shape_type = a_Shape;\n  /*\n  *  setPickingSize \u8bbe\u7f6e\u62fe\u53d6\u5927\u5c0f\n  */\n  float newSize = setPickingSize(a_Size);\n  // float newSize = setPickingSize(a_Size) * 0.00001038445708445579;\n\n  // cal style mapping - \u6570\u636e\u7eb9\u7406\u6620\u5c04\u90e8\u5206\u7684\u8ba1\u7b97\n  styleMappingMat = mat4(\n    0.0, 0.0, 0.0, 0.0, // opacity - strokeOpacity - strokeWidth - empty\n    0.0, 0.0, 0.0, 0.0, // strokeR - strokeG - strokeB - strokeA\n    0.0, 0.0, 0.0, 0.0, // offsets[0] - offsets[1]\n    0.0, 0.0, 0.0, 0.0\n  );\n\n  float rowCount = u_cellTypeLayout[0][0];    // \u5f53\u524d\u7684\u6570\u636e\u7eb9\u7406\u6709\u51e0\u884c\n  float columnCount = u_cellTypeLayout[0][1]; // \u5f53\u770b\u5230\u6570\u636e\u7eb9\u7406\u6709\u51e0\u5217\n  float columnWidth = 1.0/columnCount;  // \u5217\u5bbd\n  float rowHeight = 1.0/rowCount;       // \u884c\u9ad8\n  float cellCount = calCellCount(); // opacity - strokeOpacity - strokeWidth - stroke - offsets\n  float id = a_vertexId; // \u7b2cn\u4e2a\u9876\u70b9\n  float cellCurrentRow = floor(id * cellCount / columnCount) + 1.0; // \u8d77\u59cb\u70b9\u5728\u7b2c\u51e0\u884c\n  float cellCurrentColumn = mod(id * cellCount, columnCount) + 1.0; // \u8d77\u59cb\u70b9\u5728\u7b2c\u51e0\u5217\n  \n  // cell \u56fa\u5b9a\u987a\u5e8f opacity -> strokeOpacity -> strokeWidth -> stroke ... \n  // \u6309\u987a\u5e8f\u4ece cell \u4e2d\u53d6\u503c\u3001\u82e5\u6ca1\u6709\u5219\u81ea\u52a8\u5f80\u4e0b\u53d6\u503c\n  float textureOffset = 0.0; // \u5728 cell \u4e2d\u53d6\u503c\u7684\u504f\u79fb\u91cf\n\n  vec2 opacityAndOffset = calOpacityAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);\n  styleMappingMat[0][0] = opacityAndOffset.r;\n  textureOffset = opacityAndOffset.g;\n\n  vec2 strokeOpacityAndOffset = calStrokeOpacityAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);\n  styleMappingMat[0][1] = strokeOpacityAndOffset.r;\n  textureOffset = strokeOpacityAndOffset.g;\n\n  vec2 strokeWidthAndOffset = calStrokeWidthAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);\n  styleMappingMat[0][2] = strokeWidthAndOffset.r;\n  textureOffset = strokeWidthAndOffset.g;\n\n  vec4 textrueStroke = vec4(-1.0, -1.0, -1.0, -1.0);\n  if(hasStroke()) {\n    vec2 valueRPos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);\n    styleMappingMat[1][0] = pos2value(valueRPos, columnWidth, rowHeight); // R\n    textureOffset += 1.0;\n\n    vec2 valueGPos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);\n    styleMappingMat[1][1] = pos2value(valueGPos, columnWidth, rowHeight); // G\n    textureOffset += 1.0;\n\n    vec2 valueBPos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);\n    styleMappingMat[1][2] = pos2value(valueBPos, columnWidth, rowHeight); // B\n    textureOffset += 1.0;\n\n    vec2 valueAPos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);\n    styleMappingMat[1][3] = pos2value(valueAPos, columnWidth, rowHeight); // A\n    textureOffset += 1.0;\n  } else {\n    if(u_stroke_color == vec4(0.0)) {\n      styleMappingMat[1][0] = v_color.r;\n      styleMappingMat[1][1] = v_color.g;\n      styleMappingMat[1][2] = v_color.b;\n      styleMappingMat[1][3] = v_color.a;\n    } else {\n      styleMappingMat[1][0] = u_stroke_color.r;\n      styleMappingMat[1][1] = u_stroke_color.g;\n      styleMappingMat[1][2] = u_stroke_color.b;\n      styleMappingMat[1][3] = u_stroke_color.a;\n    }\n  }\n\n  // cal style mapping\n\n  // unpack color(vec2)\n  v_color = a_Color;\n\n  // radius(16-bit)\n  v_radius = newSize;\n\n  // anti-alias\n  //  float antialiased_blur = -max(u_blur, antialiasblur);\n  float antialiasblur = -max(2.0 / u_DevicePixelRatio / newSize, u_blur);\n\n  // TODP: /abs(extrude.x) \u662f\u4e3a\u4e86\u517c\u5bb9\u5730\u7403\u6a21\u5f0f\n  v_data = vec4(extrude.x/abs(extrude.x), extrude.y/abs(extrude.y), antialiasblur,shape_type);\n\n\n  gl_Position = u_ViewProjectionMatrix * vec4(a_Position + extrude * newSize * 0.1, 1.0);\n\n  setPickingColor(a_PickingColor);\n}\n',nA=function(t){Object(st["a"])(n,t);var e=$T(n);function n(){return Object(et["a"])(this,n),e.apply(this,arguments)}return Object(nt["a"])(n,[{key:"getUninforms",value:function(){var t=this.layer.getLayerConfig(),e=t.opacity,n=void 0===e?1:e,r=t.strokeOpacity,i=void 0===r?1:r,o=t.strokeWidth,a=void 0===o?0:o,s=t.stroke,u=void 0===s?"rgba(0,0,0,0)":s,c=t.offsets,l=void 0===c?[0,0]:c,f=t.blend,h=t.blur,p=void 0===h?0:h;if(this.dataTextureTest&&this.dataTextureNeedUpdate({opacity:n,strokeOpacity:i,strokeWidth:a,stroke:u,offsets:l})){this.judgeStyleAttributes({opacity:n,strokeOpacity:i,strokeWidth:a,stroke:u,offsets:l});var d=this.layer.getEncodedData(),v=this.calDataFrame(this.cellLength,d,this.cellProperties),g=v.data,m=v.width,y=v.height;this.rowCount=y,this.dataTexture=this.cellLength>0&&g.length>0?this.createTexture2D({flipY:!0,data:g,format:Rp.LUMINANCE,type:Rp.FLOAT,width:m,height:y}):this.createTexture2D({flipY:!0,data:[1],format:Rp.LUMINANCE,type:Rp.FLOAT,width:1,height:1})}return{u_blur:p,u_additive:"additive"===f?1:0,u_dataTexture:this.dataTexture,u_cellTypeLayout:this.getCellTypeLayout(),u_opacity:Object(K["isNumber"])(n)?n:1,u_stroke_opacity:Object(K["isNumber"])(i)?i:1,u_stroke_width:Object(K["isNumber"])(a)?a:1,u_stroke_color:this.getStrokeColor(u),u_offsets:this.isOffsetStatic(l)?l:[0,0]}}},{key:"getAnimateUniforms",value:function(){var t=this.layer.getLayerConfig(),e=t.animateOption,n=void 0===e?{enable:!1}:e;return{u_animate:this.animateOption2Array(n),u_time:this.layer.getLayerAnimateTime()}}},{key:"initModels",value:function(){var t=Object(mi["a"])(_i.a.mark((function t(){return _i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.buildModels();case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"buildModels",value:function(){var t=Object(mi["a"])(_i.a.mark((function t(){var e;return _i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.layer.triangulation=Ub,t.next=3,this.layer.buildLayerModel({moduleName:"pointEarthFill",vertexShader:eA,fragmentShader:tA,triangulation:Ub,depth:{enable:!0},blend:this.getBlend()});case 3:return e=t.sent,t.abrupt("return",[e]);case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"clearModels",value:function(){var t;null===(t=this.dataTexture)||void 0===t||t.destroy()}},{key:"animateOption2Array",value:function(t){return[t.enable?0:1,t.speed||1,t.rings||3,0]}},{key:"registerBuiltinAttributes",value:function(){var t=this;this.styleAttributeService.registerStyleAttribute({name:"extrude",type:ey.Attribute,descriptor:{name:"a_Extrude",buffer:{usage:Rp.DYNAMIC_DRAW,data:[],type:Rp.FLOAT},size:3,update:function(t,e,n,r){var i=Object(q["a"])(n,3),o=i[0],s=i[1],c=i[2],l=u.fromValues(0,0,1),f=u.fromValues(o,0,c),h=o>=0?u.angle(l,f):2*Math.PI-u.angle(l,f),p=2*Math.PI-Math.asin(s/100),d=a.create();a.rotateY(d,d,h),a.rotateX(d,d,p);var v=u.fromValues(1,1,0);u.transformMat4(v,v,d),u.normalize(v,v);var g=u.fromValues(-1,1,0);u.transformMat4(g,g,d),u.normalize(g,g);var m=u.fromValues(-1,-1,0);u.transformMat4(m,m,d),u.normalize(m,m);var y=u.fromValues(1,-1,0);u.transformMat4(y,y,d),u.normalize(y,y);var _=[].concat(Object(M["a"])(v),Object(M["a"])(g),Object(M["a"])(m),Object(M["a"])(y)),b=r%4*3;return[_[b],_[b+1],_[b+2]]}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:ey.Attribute,descriptor:{name:"a_Size",buffer:{usage:Rp.DYNAMIC_DRAW,data:[],type:Rp.FLOAT},size:1,update:function(t){var e=t.size,n=void 0===e?5:e;return Array.isArray(n)?[n[0]]:[n]}}}),this.styleAttributeService.registerStyleAttribute({name:"shape",type:ey.Attribute,descriptor:{name:"a_Shape",buffer:{usage:Rp.DYNAMIC_DRAW,data:[],type:Rp.FLOAT},size:1,update:function(e){var n=e.shape,r=void 0===n?2:n,i=t.layer.getLayerConfig().shape2d,o=i.indexOf(r);return[o]}}})}}]),n}(db);function rA(t){var e=iA();return function(){var n,r=Object(ct["a"])(t);if(e){var i=Object(ct["a"])(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(ut["a"])(this,n)}}function iA(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}var oA='varying vec4 v_color;\nuniform float u_opacity: 1.0;\n\nuniform float u_pickLight: 0.0;\n\n#pragma include "picking"\n\nvarying mat4 styleMappingMat; // \u4f20\u9012\u4ece\u7247\u5143\u4e2d\u4f20\u9012\u7684\u6620\u5c04\u6570\u636e\n\nuniform float u_linearColor: 0;\nuniform vec4 u_sourceColor;\nuniform vec4 u_targetColor;\n\nuniform float u_opacitylinear: 0.0;\nuniform float u_opacitylinear_dir: 1.0;\n\nvoid main() {\n  float opacity = styleMappingMat[0][0];\n  float lightWeight = styleMappingMat[1][3];\n  float barLinearZ = styleMappingMat[2][3];\n\n  // \u8bbe\u7f6e\u5706\u67f1\u7684\u5e95\u8272\n  if(u_linearColor == 1.0) { // \u4f7f\u7528\u6e10\u53d8\u989c\u8272\n    gl_FragColor = mix(u_sourceColor, u_targetColor, barLinearZ);\n    gl_FragColor.rgb *= lightWeight;\n  } else { // \u4f7f\u7528 color \u65b9\u6cd5\u4f20\u5165\u7684\u989c\u8272\n     gl_FragColor = v_color;\n  }\n\n  // \u5e94\u7528\u900f\u660e\u5ea6\n  gl_FragColor.a *= opacity;\n\n  // \u5f00\u542f\u900f\u660e\u5ea6\u6e10\u53d8\n  if(u_opacitylinear > 0.0) {\n    gl_FragColor.a *= u_opacitylinear_dir > 0.0 ? (1.0 - barLinearZ): barLinearZ;\n  }\n\n  // picking\n  if(u_pickLight > 0.0) {\n    gl_FragColor = filterColorAlpha(gl_FragColor, lightWeight);\n  } else {\n    gl_FragColor = filterColor(gl_FragColor);\n  }\n}\n',aA='precision highp float;\n\n#define pi 3.1415926535\n#define ambientRatio 0.5\n#define diffuseRatio 0.3\n#define specularRatio 0.2\n\nattribute vec3 a_Position;\nattribute vec3 a_Pos;\nattribute vec4 a_Color;\nattribute vec3 a_Size;\nattribute vec3 a_Normal;\n\nuniform float u_heightfixed: 0.0; // \u9ed8\u8ba4\u4e0d\u56fa\u5b9a\nuniform float u_r;\nuniform mat4 u_ModelMatrix;\nuniform mat4 u_Mvp;\nvarying vec4 v_color;\n\nuniform float u_opacity : 1;\nuniform float u_lightEnable: 1;\n\nvarying mat4 styleMappingMat; // \u7528\u4e8e\u5c06\u5728\u9876\u70b9\u7740\u8272\u5668\u4e2d\u8ba1\u7b97\u597d\u7684\u6837\u5f0f\u503c\u4f20\u9012\u7ed9\u7247\u5143\n\n#pragma include "styleMapping"\n#pragma include "styleMappingCalOpacity"\n\n#pragma include "projection"\n#pragma include "light"\n#pragma include "picking"\n\nfloat getYRadian(float x, float z) {\n  if(x > 0.0 && z > 0.0) {\n    return atan(x/z);\n  } else if(x > 0.0 && z <= 0.0){\n    return atan(-z/x) + pi/2.0;\n  } else if(x <= 0.0 && z <= 0.0) {\n    return  pi + atan(x/z); //atan(x/z) + \n  } else {\n    return atan(z/-x) + pi*3.0/2.0;\n  }\n}\n\nfloat getXRadian(float y, float r) {\n  return atan(y/r);\n}\n\nvoid main() {\n\n  // cal style mapping - \u6570\u636e\u7eb9\u7406\u6620\u5c04\u90e8\u5206\u7684\u8ba1\u7b97\n  styleMappingMat = mat4(\n    0.0, 0.0, 0.0, 0.0, // opacity - strokeOpacity - strokeWidth - empty\n    0.0, 0.0, 0.0, 0.0, // strokeR - strokeG - strokeB - strokeA - lightWeight\n    0.0, 0.0, 0.0, 0.0, // offsets[0] - offsets[1] - linearZ(\u5782\u76f4\u65b9\u5411 0 - 1 \u7684\u503c)\n    0.0, 0.0, 0.0, 0.0\n  );\n\n  float rowCount = u_cellTypeLayout[0][0];    // \u5f53\u524d\u7684\u6570\u636e\u7eb9\u7406\u6709\u51e0\u884c\n  float columnCount = u_cellTypeLayout[0][1]; // \u5f53\u770b\u5230\u6570\u636e\u7eb9\u7406\u6709\u51e0\u5217\n  float columnWidth = 1.0/columnCount;  // \u5217\u5bbd\n  float rowHeight = 1.0/rowCount;       // \u884c\u9ad8\n  float cellCount = calCellCount(); // opacity - strokeOpacity - strokeWidth - stroke - offsets\n  float id = a_vertexId; // \u7b2cn\u4e2a\u9876\u70b9\n  float cellCurrentRow = floor(id * cellCount / columnCount) + 1.0; // \u8d77\u59cb\u70b9\u5728\u7b2c\u51e0\u884c\n  float cellCurrentColumn = mod(id * cellCount, columnCount) + 1.0; // \u8d77\u59cb\u70b9\u5728\u7b2c\u51e0\u5217\n  \n  // cell \u56fa\u5b9a\u987a\u5e8f opacity -> strokeOpacity -> strokeWidth -> stroke ... \n  // \u6309\u987a\u5e8f\u4ece cell \u4e2d\u53d6\u503c\u3001\u82e5\u6ca1\u6709\u5219\u81ea\u52a8\u5f80\u4e0b\u53d6\u503c\n  float textureOffset = 0.0; // \u5728 cell \u4e2d\u53d6\u503c\u7684\u504f\u79fb\u91cf\n\n  vec2 opacityAndOffset = calOpacityAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);\n  styleMappingMat[0][0] = opacityAndOffset.r;\n  textureOffset = opacityAndOffset.g;\n  // cal style mapping - \u6570\u636e\u7eb9\u7406\u6620\u5c04\u90e8\u5206\u7684\u8ba1\u7b97\n  vec3 size = a_Size * a_Position;\n\n  // a_Position.z \u662f\u5728\u6784\u5efa\u7f51\u683c\u7684\u65f6\u5019\u4f20\u5165\u7684\u6807\u51c6\u503c 0 - 1\uff0c\u5728\u63d2\u503c\u5668\u63d2\u503c\u53ef\u4ee5\u83b7\u53d6 0\uff5e1 \u7ebf\u6027\u6e10\u53d8\u7684\u503c\n  styleMappingMat[2][3] =  a_Position.z;\n\n  vec3 offset = size; // \u63a7\u5236\u5706\u67f1\u4f53\u7684\u5927\u5c0f - \u4ece\u6807\u51c6\u5355\u4f4d\u5706\u67f1\u4f53\u8fdb\u884c\u504f\u79fb\n  if(u_heightfixed < 1.0) { // \u5706\u67f1\u4f53\u4e0d\u56fa\u5b9a\u9ad8\u5ea6\n    \n    if (u_CoordinateSystem == COORDINATE_SYSTEM_P20 || u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET) {\n      // P20 \u5750\u6807\u7cfb\u4e0b\uff0c\u4e3a\u4e86\u548c Web \u58a8\u5361\u6258\u5750\u6807\u7cfb\u7edf\u4e00\uff0czoom \u9ed8\u8ba4\u51cf1\n      offset = offset * pow(2.0, (19.0 - u_Zoom));\n    }\n    if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) {\n      // P20_2 \u5750\u6807\u7cfb\u4e0b\uff0c\u4e3a\u4e86\u548c Web \u58a8\u5361\u6258\u5750\u6807\u7cfb\u7edf\u4e00\uff0czoom \u9ed8\u8ba4\u51cf3\n      offset = offset * pow(2.0, (19.0 - 3.0 - u_Zoom));\n    }\n  } else {// \u5706\u67f1\u4f53\u56fa\u5b9a\u9ad8\u5ea6 \uff08 \u5904\u7406 mapbox \uff09\n    if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {\n      offset *= 4.0/pow(2.0, 21.0 - u_Zoom);\n    }\n  }\n\n\n  vec4 project_pos = project_position(vec4(a_Pos.xy, 0., 1.0));\n\n  // u_r \u63a7\u5236\u5706\u67f1\u7684\u751f\u957f\n  vec4 pos = vec4(project_pos.xy + offset.xy, offset.z * u_r, 1.0);\n\n  // \u5706\u67f1\u5149\u7167\u6548\u679c\n  float lightWeight = 1.0;\n  if(u_lightEnable > 0.0) { // \u53d6\u6d88\u4e09\u5143\u8868\u8fbe\u5f0f\uff0c\u589e\u5f3a\u5065\u58ee\u6027\n    lightWeight = calc_lighting(pos);\n  }\n  styleMappingMat[1][3] = lightWeight;\n\n  v_color =vec4(a_Color.rgb * lightWeight, a_Color.w);\n\n  // gl_Position = project_common_position_to_clipspace(pos);\n\n  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x\n    gl_Position = u_Mvp * pos;\n  } else {\n    gl_Position = project_common_position_to_clipspace(pos);\n  }\n\n  setPickingColor(a_PickingColor);\n}\n',sA=function(t){Object(st["a"])(n,t);var e=rA(n);function n(){var t;Object(et["a"])(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return t=e.call.apply(e,[this].concat(i)),Object(Ar["a"])(Object(ft["a"])(t),"raiseCount",0),Object(Ar["a"])(Object(ft["a"])(t),"raiseRepeat",0),t}return Object(nt["a"])(n,[{key:"getUninforms",value:function(){var t=this.layer.getLayerConfig(),e=t.animateOption,n=void 0===e?{enable:!1,speed:.01,repeat:!1}:e,r=t.opacity,i=void 0===r?1:r,o=t.sourceColor,a=t.targetColor,s=t.pickLight,u=void 0!==s&&s,c=t.heightfixed,l=void 0!==c&&c,f=t.opacityLinear,h=void 0===f?{enable:!1,dir:"up"}:f,p=t.lightEnable,d=void 0===p||p;if(this.dataTextureTest&&this.dataTextureNeedUpdate({opacity:i})){this.judgeStyleAttributes({opacity:i});var v=this.layer.getEncodedData(),g=this.calDataFrame(this.cellLength,v,this.cellProperties),m=g.data,y=g.width,_=g.height;this.rowCount=_,this.dataTexture=this.cellLength>0&&m.length>0?this.createTexture2D({flipY:!0,data:m,format:Rp.LUMINANCE,type:Rp.FLOAT,width:y,height:_}):this.createTexture2D({flipY:!0,data:[1],format:Rp.LUMINANCE,type:Rp.FLOAT,width:1,height:1})}var b=0,x=[0,0,0,0],w=[0,0,0,0];if(o&&a&&(x=li(o),w=li(a),b=1),this.raiseCount<1&&this.raiseRepeat>0&&n.enable){var E=n.speed,S=void 0===E?.01:E;this.raiseCount+=S,this.raiseCount>=1&&(this.raiseRepeat>1?(this.raiseCount=0,this.raiseRepeat--):this.raiseCount=1)}return{u_pickLight:Number(u),u_heightfixed:Number(l),u_r:n.enable&&this.raiseRepeat>0?this.raiseCount:1,u_dataTexture:this.dataTexture,u_cellTypeLayout:this.getCellTypeLayout(),u_opacity:Object(K["isNumber"])(i)?i:1,u_linearColor:b,u_sourceColor:x,u_targetColor:w,u_opacitylinear:Number(h.enable),u_opacitylinear_dir:"up"===h.dir?1:0,u_lightEnable:Number(d)}}},{key:"initModels",value:function(){var t=Object(mi["a"])(_i.a.mark((function t(){return _i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.buildModels();case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"buildModels",value:function(){var t=Object(mi["a"])(_i.a.mark((function t(){var e,n,r,i,o,a;return _i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=this.layer.getLayerConfig(),n=e.depth,r=void 0===n||n,i=e.animateOption.repeat,o=void 0===i?1:i,this.raiseRepeat=o,t.next=4,this.layer.buildLayerModel({moduleName:"pointExtrude",vertexShader:aA,fragmentShader:oA,triangulation:Vb,blend:this.getBlend(),cull:{enable:!0,face:Uc(this.mapService.version)},depth:{enable:r}});case 4:return a=t.sent,t.abrupt("return",[a]);case 6:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"clearModels",value:function(){var t;null===(t=this.dataTexture)||void 0===t||t.destroy()}},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"size",type:ey.Attribute,descriptor:{name:"a_Size",buffer:{usage:Rp.DYNAMIC_DRAW,data:[],type:Rp.FLOAT},size:3,update:function(t){var e=t.size;if(e){var n=[];return Array.isArray(e)&&(n=2===e.length?[e[0],e[0],e[1]]:e),Array.isArray(e)||(n=[e,e,e]),n}return[2,2,2]}}}),this.styleAttributeService.registerStyleAttribute({name:"normal",type:ey.Attribute,descriptor:{name:"a_Normal",buffer:{usage:Rp.STATIC_DRAW,data:[],type:Rp.FLOAT},size:3,update:function(t,e,n,r,i){return i}}}),this.styleAttributeService.registerStyleAttribute({name:"pos",type:ey.Attribute,descriptor:{name:"a_Pos",buffer:{usage:Rp.DYNAMIC_DRAW,data:[],type:Rp.FLOAT},size:3,update:function(t){var e=Sr(t.coordinates);return[e[0],e[1],0]}}})}}]),n}(db);function uA(t){var e=cA();return function(){var n,r=Object(ct["a"])(t);if(e){var i=Object(ct["a"])(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(ut["a"])(this,n)}}function cA(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}var lA="\nuniform float u_additive;\n\nvarying mat4 styleMappingMat; // \u4f20\u9012\u4ece\u7247\u5143\u4e2d\u4f20\u9012\u7684\u6620\u5c04\u6570\u636e\n\nvarying vec4 v_data;\nvarying vec4 v_color;\nvarying float v_radius;\nuniform float u_time;\nuniform vec4 u_animate: [ 1., 2., 1.0, 0.2 ];\n\n#pragma include \"sdf_2d\"\n#pragma include \"picking\"\n\nvoid main() {\n\n  vec4 textrueStroke = vec4(\n    styleMappingMat[1][0],\n    styleMappingMat[1][1],\n    styleMappingMat[1][2],\n    styleMappingMat[1][3]\n  );\n\n  float opacity = styleMappingMat[0][0];\n\n  lowp float antialiasblur = v_data.z;\n  float r = v_radius / (v_radius);\n\n  float outer_df;\n  float inner_df;\n  // 'circle', 'triangle', 'square', 'pentagon', 'hexagon', 'octogon', 'hexagram', 'rhombus', 'vesica'\n  \n  outer_df = sdCircle(v_data.xy, 1.0);\n  inner_df = sdCircle(v_data.xy, r);\n\n\n  float opacity_t = smoothstep(0.0, antialiasblur, outer_df);\n\n  float color_t = smoothstep(\n    antialiasblur,\n    0.0,\n    inner_df\n  );\n  float PI = 3.14159;\n  float N_RINGS = 3.0;\n  float FREQ = 1.0;\n\n gl_FragColor = vec4(v_color.rgb, v_color.a * opacity);\n\n  float d = length(v_data.xy);\n  if(d > 0.5) {\n    discard;\n  }\n  float intensity = clamp(cos(d * PI), 0.0, 1.0) * clamp(cos(2.0 * PI * (d * 2.0 * u_animate.z - u_animate.y * u_time)), 0.0, 1.0);\n  \n  // \u6839\u636e\u53e0\u52a0\u6a21\u5f0f\u9009\u62e9\u6548\u679c\n  if(u_additive > 0.0) {\n    gl_FragColor *= intensity;\n    // \u4f18\u5316\u6c34\u6ce2\u70b9 blend additive \u6a21\u5f0f\u4e0b\u6709\u7684\u62fe\u53d6\u6548\u679c \n    gl_FragColor = filterColorAlpha(gl_FragColor, gl_FragColor.a);\n  } else {\n    gl_FragColor = vec4(gl_FragColor.xyz, gl_FragColor.a * intensity);\n    gl_FragColor = filterColor(gl_FragColor);\n  }\n}\n",fA="uniform float u_additive;\n\nvarying mat4 styleMappingMat; // \u4f20\u9012\u4ece\u7247\u5143\u4e2d\u4f20\u9012\u7684\u6620\u5c04\u6570\u636e\n\nvarying vec4 v_data;\nvarying vec4 v_color;\nvarying float v_radius;\n\n#pragma include \"sdf_2d\"\n#pragma include \"picking\"\n\n\nvoid main() {\n  int shape = int(floor(v_data.w + 0.5));\n\n  vec4 textrueStroke = vec4(\n    styleMappingMat[1][0],\n    styleMappingMat[1][1],\n    styleMappingMat[1][2],\n    styleMappingMat[1][3]\n  );\n\n  float opacity = styleMappingMat[0][0];\n  float stroke_opacity = styleMappingMat[0][1];\n  float strokeWidth = styleMappingMat[0][2];\n  vec4 strokeColor = textrueStroke == vec4(0) ? v_color : textrueStroke;\n\n  lowp float antialiasblur = v_data.z;\n  float r = v_radius / (v_radius + strokeWidth);\n\n  float outer_df;\n  float inner_df;\n  // 'circle', 'triangle', 'square', 'pentagon', 'hexagon', 'octogon', 'hexagram', 'rhombus', 'vesica'\n  if (shape == 0) {\n    outer_df = sdCircle(v_data.xy, 1.0);\n    inner_df = sdCircle(v_data.xy, r);\n  } else if (shape == 1) {\n    outer_df = sdEquilateralTriangle(1.1 * v_data.xy);\n    inner_df = sdEquilateralTriangle(1.1 / r * v_data.xy);\n  } else if (shape == 2) {\n    outer_df = sdBox(v_data.xy, vec2(1.));\n    inner_df = sdBox(v_data.xy, vec2(r));\n  } else if (shape == 3) {\n    outer_df = sdPentagon(v_data.xy, 0.8);\n    inner_df = sdPentagon(v_data.xy, r * 0.8);\n  } else if (shape == 4) {\n    outer_df = sdHexagon(v_data.xy, 0.8);\n    inner_df = sdHexagon(v_data.xy, r * 0.8);\n  } else if (shape == 5) {\n    outer_df = sdOctogon(v_data.xy, 1.0);\n    inner_df = sdOctogon(v_data.xy, r);\n  } else if (shape == 6) {\n    outer_df = sdHexagram(v_data.xy, 0.52);\n    inner_df = sdHexagram(v_data.xy, r * 0.52);\n  } else if (shape == 7) {\n    outer_df = sdRhombus(v_data.xy, vec2(1.0));\n    inner_df = sdRhombus(v_data.xy, vec2(r));\n  } else if (shape == 8) {\n    outer_df = sdVesica(v_data.xy, 1.1, 0.8);\n    inner_df = sdVesica(v_data.xy, r * 1.1, r * 0.8);\n  }\n\n  float opacity_t = smoothstep(0.0, antialiasblur, outer_df);\n\n  float color_t = strokeWidth < 0.01 ? 0.0 : smoothstep(\n    antialiasblur,\n    0.0,\n    inner_df\n  );\n\n  if(strokeWidth < 0.01) {\n    gl_FragColor = vec4(v_color.rgb, v_color.a * opacity);\n  } else {\n    gl_FragColor = mix(vec4(v_color.rgb, v_color.a * opacity), strokeColor * stroke_opacity, color_t);\n  }\n\n  if(u_additive > 0.0) {\n    gl_FragColor *= opacity_t;\n    gl_FragColor = filterColorAlpha(gl_FragColor, gl_FragColor.a);\n  } else {\n    gl_FragColor.a *= opacity_t;\n    gl_FragColor = filterColor(gl_FragColor);\n  }\n}\n",hA='attribute vec4 a_Color;\nattribute vec3 a_Position;\nattribute vec3 a_Extrude;\nattribute float a_Size;\nattribute float a_Shape;\n\nvarying mat4 styleMappingMat; // \u7528\u4e8e\u5c06\u5728\u9876\u70b9\u7740\u8272\u5668\u4e2d\u8ba1\u7b97\u597d\u7684\u6837\u5f0f\u503c\u4f20\u9012\u7ed9\u7247\u5143\n\nuniform mat4 u_ModelMatrix;\nuniform mat4 u_Mvp;\nuniform float u_meter2coord;\nuniform float u_meteryScale;\nuniform float u_isMeter;\n\nvarying vec4 v_data;\nvarying vec4 v_color;\nvarying float v_radius;\n\nuniform float u_opacity : 1;\nuniform float u_stroke_opacity : 1;\nuniform float u_stroke_width : 2;\nuniform vec4 u_stroke_color : [0.0, 0.0, 0.0, 0.0];\nuniform vec2 u_offsets;\n\nuniform float u_blur : 0.0;\nuniform float u_raisingHeight: 0.0;\nuniform float u_heightfixed: 0.0;\n\n#pragma include "styleMapping"\n#pragma include "styleMappingCalOpacity"\n#pragma include "styleMappingCalStrokeOpacity"\n#pragma include "styleMappingCalStrokeWidth"\n\n#pragma include "projection"\n#pragma include "picking"\n\n\nvoid main() {\n  vec3 extrude = a_Extrude;\n  float shape_type = a_Shape;\n  /*\n  *  setPickingSize \u8bbe\u7f6e\u62fe\u53d6\u5927\u5c0f\n  *  u_meter2coord \u5728\u7b49\u9762\u79ef\u5927\u5c0f\u7684\u65f6\u5019\u8bbe\u7f6e\u5355\u4f4d\n  */\n  float newSize = setPickingSize(a_Size) * u_meter2coord;\n  // float newSize = setPickingSize(a_Size) * 0.00001038445708445579;\n\n  // cal style mapping - \u6570\u636e\u7eb9\u7406\u6620\u5c04\u90e8\u5206\u7684\u8ba1\u7b97\n  styleMappingMat = mat4(\n    0.0, 0.0, 0.0, 0.0, // opacity - strokeOpacity - strokeWidth - empty\n    0.0, 0.0, 0.0, 0.0, // strokeR - strokeG - strokeB - strokeA\n    0.0, 0.0, 0.0, 0.0, // offsets[0] - offsets[1]\n    0.0, 0.0, 0.0, 0.0\n  );\n\n  float rowCount = u_cellTypeLayout[0][0];    // \u5f53\u524d\u7684\u6570\u636e\u7eb9\u7406\u6709\u51e0\u884c\n  float columnCount = u_cellTypeLayout[0][1]; // \u5f53\u770b\u5230\u6570\u636e\u7eb9\u7406\u6709\u51e0\u5217\n  float columnWidth = 1.0/columnCount;  // \u5217\u5bbd\n  float rowHeight = 1.0/rowCount;       // \u884c\u9ad8\n  float cellCount = calCellCount(); // opacity - strokeOpacity - strokeWidth - stroke - offsets\n  float id = a_vertexId; // \u7b2cn\u4e2a\u9876\u70b9\n  float cellCurrentRow = floor(id * cellCount / columnCount) + 1.0; // \u8d77\u59cb\u70b9\u5728\u7b2c\u51e0\u884c\n  float cellCurrentColumn = mod(id * cellCount, columnCount) + 1.0; // \u8d77\u59cb\u70b9\u5728\u7b2c\u51e0\u5217\n  \n  // cell \u56fa\u5b9a\u987a\u5e8f opacity -> strokeOpacity -> strokeWidth -> stroke ... \n  // \u6309\u987a\u5e8f\u4ece cell \u4e2d\u53d6\u503c\u3001\u82e5\u6ca1\u6709\u5219\u81ea\u52a8\u5f80\u4e0b\u53d6\u503c\n  float textureOffset = 0.0; // \u5728 cell \u4e2d\u53d6\u503c\u7684\u504f\u79fb\u91cf\n\n  vec2 opacityAndOffset = calOpacityAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);\n  styleMappingMat[0][0] = opacityAndOffset.r;\n  textureOffset = opacityAndOffset.g;\n\n  vec2 strokeOpacityAndOffset = calStrokeOpacityAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);\n  styleMappingMat[0][1] = strokeOpacityAndOffset.r;\n  textureOffset = strokeOpacityAndOffset.g;\n\n  vec2 strokeWidthAndOffset = calStrokeWidthAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);\n  styleMappingMat[0][2] = strokeWidthAndOffset.r;\n  textureOffset = strokeWidthAndOffset.g;\n\n  vec4 textrueStroke = vec4(-1.0, -1.0, -1.0, -1.0);\n  if(hasStroke()) {\n    vec2 valueRPos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);\n    styleMappingMat[1][0] = pos2value(valueRPos, columnWidth, rowHeight); // R\n    textureOffset += 1.0;\n\n    vec2 valueGPos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);\n    styleMappingMat[1][1] = pos2value(valueGPos, columnWidth, rowHeight); // G\n    textureOffset += 1.0;\n\n    vec2 valueBPos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);\n    styleMappingMat[1][2] = pos2value(valueBPos, columnWidth, rowHeight); // B\n    textureOffset += 1.0;\n\n    vec2 valueAPos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);\n    styleMappingMat[1][3] = pos2value(valueAPos, columnWidth, rowHeight); // A\n    textureOffset += 1.0;\n  } else {\n    if(u_stroke_color == vec4(0.0)) {\n      styleMappingMat[1][0] = v_color.r;\n      styleMappingMat[1][1] = v_color.g;\n      styleMappingMat[1][2] = v_color.b;\n      styleMappingMat[1][3] = v_color.a;\n    } else {\n      styleMappingMat[1][0] = u_stroke_color.r;\n      styleMappingMat[1][1] = u_stroke_color.g;\n      styleMappingMat[1][2] = u_stroke_color.b;\n      styleMappingMat[1][3] = u_stroke_color.a;\n    }\n  }\n\n  vec2 textrueOffsets = vec2(0.0, 0.0);\n  if(hasOffsets()) {\n    vec2 valueXPos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);\n    textrueOffsets.r = pos2value(valueXPos, columnWidth, rowHeight); // x\n    textureOffset += 1.0;\n\n    vec2 valueYPos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);\n    textrueOffsets.g = pos2value(valueYPos, columnWidth, rowHeight); // x\n    textureOffset += 1.0;\n  } else {\n    textrueOffsets = u_offsets;\n  }\n\n  // cal style mapping\n\n  // unpack color(vec2)\n  v_color = a_Color;\n\n  // radius(16-bit)\n  v_radius = newSize;\n\n  // anti-alias\n  //  float antialiased_blur = -max(u_blur, antialiasblur);\n  float antialiasblur = -max(2.0 / u_DevicePixelRatio / newSize, u_blur);\n\n  vec2 offset = (extrude.xy * (newSize + u_stroke_width) + textrueOffsets);\n  vec3 aPosition = a_Position;\n  if(u_isMeter < 1.0) {\n    // \u4e0d\u4ee5\u7c73\u4e3a\u5b9e\u9645\u5355\u4f4d\n    offset = project_pixel(offset);\n  } else {\n    // \u4ee5\u7c73\u4e3a\u5b9e\u9645\u5355\u4f4d\n    if(newSize * pow(2.0, u_Zoom) < 48.0) {\n      antialiasblur = max(antialiasblur, -0.05);\n    } else if(newSize * pow(2.0, u_Zoom) < 128.0) {\n      antialiasblur = max(antialiasblur, -0.6/pow(u_Zoom, 2.0));\n    } else {\n      antialiasblur = max(antialiasblur, -0.8/pow(u_Zoom, 2.0));\n    }\n    \n    if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {\n      aPosition.x += offset.x / u_meteryScale;\n      aPosition.y += offset.y;\n      offset = vec2(0.0);\n    }\n  }\n\n  // TODP: /abs(extrude.x) \u662f\u4e3a\u4e86\u517c\u5bb9\u5730\u7403\u6a21\u5f0f\n  v_data = vec4(extrude.x/abs(extrude.x), extrude.y/abs(extrude.y), antialiasblur,shape_type);\n\n\n  // vec4 project_pos = project_position(vec4(a_Position.xy, 0.0, 1.0));\n  vec4 project_pos = project_position(vec4(aPosition.xy, 0.0, 1.0));\n  // gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, project_pixel(setPickingOrder(0.0)), 1.0));\n\n  float raisingHeight = u_raisingHeight;\n\n  if(u_heightfixed < 1.0) { // false\n    raisingHeight = project_pixel(u_raisingHeight);\n  } else {\n     if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {\n      float mapboxZoomScale = 4.0/pow(2.0, 21.0 - u_Zoom);\n      raisingHeight = u_raisingHeight * mapboxZoomScale;\n    }\n  }\n \n\n  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x\n    gl_Position = u_Mvp * vec4(project_pos.xy + offset, raisingHeight, 1.0);\n  } else {\n    gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, raisingHeight, 1.0));\n  }\n \n  // gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, 0.0, 1.0));\n\n  setPickingColor(a_PickingColor);\n}\n',pA=function(t){Object(st["a"])(n,t);var e=uA(n);function n(){var t;Object(et["a"])(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return t=e.call.apply(e,[this].concat(i)),Object(Ar["a"])(Object(ft["a"])(t),"meter2coord",1),Object(Ar["a"])(Object(ft["a"])(t),"meterYScale",1),Object(Ar["a"])(Object(ft["a"])(t),"isMeter",!1),Object(Ar["a"])(Object(ft["a"])(t),"unit","l7size"),t}return Object(nt["a"])(n,[{key:"getUninforms",value:function(){var t=this.layer.getLayerConfig(),e=t.opacity,n=void 0===e?1:e,r=t.strokeOpacity,i=void 0===r?1:r,o=t.strokeWidth,a=void 0===o?0:o,s=t.stroke,u=void 0===s?"rgba(0,0,0,0)":s,c=t.offsets,l=void 0===c?[0,0]:c,f=t.blend,h=t.blur,p=void 0===h?0:h,d=t.raisingHeight,v=void 0===d?0:d,g=t.heightfixed,m=void 0!==g&&g,y=t.unit,_=void 0===y?"l7size":y;if(this.updateUnit(_),this.dataTextureTest&&this.dataTextureNeedUpdate({opacity:n,strokeOpacity:i,strokeWidth:a,stroke:u,offsets:l})){this.judgeStyleAttributes({opacity:n,strokeOpacity:i,strokeWidth:a,stroke:u,offsets:l});var b=this.layer.getEncodedData(),x=this.calDataFrame(this.cellLength,b,this.cellProperties),w=x.data,E=x.width,S=x.height;this.rowCount=S,this.dataTexture=this.cellLength>0&&w.length>0?this.createTexture2D({flipY:!0,data:w,format:Rp.LUMINANCE,type:Rp.FLOAT,width:E,height:S}):this.createTexture2D({flipY:!0,data:[1],format:Rp.LUMINANCE,type:Rp.FLOAT,width:1,height:1})}return{u_raisingHeight:Number(v),u_heightfixed:Number(m),u_meter2coord:this.meter2coord,u_meteryScale:this.meterYScale,u_isMeter:Number(this.isMeter),u_blur:p,u_additive:"additive"===f?1:0,u_dataTexture:this.dataTexture,u_cellTypeLayout:this.getCellTypeLayout(),u_opacity:Object(K["isNumber"])(n)?n:1,u_stroke_opacity:Object(K["isNumber"])(i)?i:1,u_stroke_width:Object(K["isNumber"])(a)?a:1,u_stroke_color:this.getStrokeColor(u),u_offsets:this.isOffsetStatic(l)?l:[0,0]}}},{key:"getAnimateUniforms",value:function(){var t=this.layer.getLayerConfig(),e=t.animateOption,n=void 0===e?{enable:!1}:e;return{u_animate:this.animateOption2Array(n),u_time:this.layer.getLayerAnimateTime()}}},{key:"getAttribute",value:function(){return this.styleAttributeService.createAttributesAndIndices(this.layer.getEncodedData(),bc)}},{key:"initModels",value:function(){var t=Object(mi["a"])(_i.a.mark((function t(){return _i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.updateUnit("l7size"),t.next=3,this.buildModels();case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"calMeter2Coord",value:function(){var t=Object(q["a"])(this.layer.getSource().extent,4),e=t[0],n=t[1],r=t[2],i=t[3],o=[(e+r)/2,(n+i)/2],a=this.mapService.version,s=null===sn||void 0===sn?void 0:sn.mapboxgl;if(a===M_.MAPBOX&&null!==s&&void 0!==s&&s.MercatorCoordinate){var u=s.MercatorCoordinate.fromLngLat({lng:o[0],lat:o[1]},0),c=u.meterInMercatorCoordinateUnits(),l=new s.MercatorCoordinate(u.x-c,u.y,u.z),f=l.toLngLat(),h=new s.MercatorCoordinate(u.x,u.y-c,u.z),p=h.toLngLat();return this.meter2coord=o[0]-f.lng,void(this.meterYScale=(p.lat-o[1])/this.meter2coord)}var d=this.mapService.meterToCoord(o,[e,n]),v=this.mapService.meterToCoord(o,[r===e?r+.1:r,i===n?n+.1:i]);this.meter2coord=(d+v)/2,this.meter2coord||(this.meter2coord=7.70681090738883)}},{key:"buildModels",value:function(){var t=Object(mi["a"])(_i.a.mark((function t(){var e,n,r,i,o,a,s,u,c,l,f,h,p,d,v,g;return _i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=this.layer.getLayerConfig(),n=e.mask,r=void 0!==n&&n,i=e.maskInside,o=void 0===i||i,a=e.animateOption,s=void 0===a?{enable:!1}:a,u=e.workerEnabled,c=void 0!==u&&u,l=e.enablePicking,f=e.shape2d,h=this.getShaders(s),p=h.frag,d=h.vert,v=h.type,this.layer.triangulation=bc,t.next=5,this.layer.buildLayerModel({moduleName:v,vertexShader:d,fragmentShader:p,triangulation:bc,depth:{enable:!1},blend:this.getBlend(),stencil:gi(r,o),workerEnabled:c,workerOptions:{modelType:v,enablePicking:l,shape2d:f}});case 5:return g=t.sent,t.abrupt("return",[g]);case 7:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"getShaders",value:function(t){if(!t.enable)return{frag:fA,vert:hA,type:"pointFill"};switch(t.type){case"wave":return{frag:lA,vert:hA,type:"pointWave"};default:return{frag:lA,vert:hA,type:"pointWave"}}}},{key:"clearModels",value:function(){var t;null===(t=this.dataTexture)||void 0===t||t.destroy()}},{key:"animateOption2Array",value:function(t){return[t.enable?0:1,t.speed||1,t.rings||3,0]}},{key:"registerBuiltinAttributes",value:function(){var t=this.layer.getLayerConfig().shape2d;this.styleAttributeService.registerStyleAttribute({name:"extrude",type:ey.Attribute,descriptor:{name:"a_Extrude",buffer:{usage:Rp.DYNAMIC_DRAW,data:[],type:Rp.FLOAT},size:3,update:function(t,e,n,r){var i=[1,1,0,-1,1,0,-1,-1,0,1,-1,0],o=r%4*3;return[i[o],i[o+1],i[o+2]]}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:ey.Attribute,descriptor:{name:"a_Size",buffer:{usage:Rp.DYNAMIC_DRAW,data:[],type:Rp.FLOAT},size:1,update:function(t){var e=t.size,n=void 0===e?5:e;return Array.isArray(n)?[n[0]]:[n]}}}),this.styleAttributeService.registerStyleAttribute({name:"shape",type:ey.Attribute,descriptor:{name:"a_Shape",buffer:{usage:Rp.DYNAMIC_DRAW,data:[],type:Rp.FLOAT},size:1,update:function(e){var n=e.shape,r=void 0===n?2:n,i=t.indexOf(r);return[i]}}})}},{key:"updateUnit",value:function(t){var e=this.mapService.version;this.unit!==t&&("meter"!==this.unit&&"meter"===t&&e!==M_.DEFUALT&&e!==M_.GLOBEL?(this.isMeter=!0,this.calMeter2Coord()):"meter"===this.unit&&"meter"!==t&&(this.isMeter=!1,this.meter2coord=1),this.unit=t)}}]),n}(db);function dA(t){var e=vA();return function(){var n,r=Object(ct["a"])(t);if(e){var i=Object(ct["a"])(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(ut["a"])(this,n)}}function vA(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}var gA='uniform sampler2D u_texture;\nuniform vec2 u_textSize;\n\nvarying mat4 styleMappingMat; // \u4f20\u9012\u4ece\u7247\u5143\u4e2d\u4f20\u9012\u7684\u6620\u5c04\u6570\u636e\n\n#pragma include "sdf_2d"\n#pragma include "picking"\nvarying vec2 v_uv; // \u672c\u8eab\u7684 uv \u5750\u6807\nvarying vec2 v_Iconuv;\n\nvoid main() {\n\n  float opacity = styleMappingMat[0][0];\n\n  vec2 pos = v_Iconuv / u_textSize + v_uv / u_textSize * 64.;\n  gl_FragColor = texture2D(u_texture, pos);\n  gl_FragColor.a *= opacity;\n\n  gl_FragColor = filterColor(gl_FragColor);\n}\n',mA='attribute vec4 a_Color;\nattribute vec3 a_Position;\nattribute vec3 a_Extrude;\nattribute float a_Size;\nattribute vec2 a_Uv;\nattribute float a_Rotate;\n\nvarying mat4 styleMappingMat; // \u7528\u4e8e\u5c06\u5728\u9876\u70b9\u7740\u8272\u5668\u4e2d\u8ba1\u7b97\u597d\u7684\u6837\u5f0f\u503c\u4f20\u9012\u7ed9\u7247\u5143\n\nuniform mat4 u_ModelMatrix;\nuniform mat4 u_Mvp;\nuniform mat2 u_RotateMatrix;\nuniform float u_isMeter;\n\nvarying vec2 v_uv; // \u672c\u8eab\u7684 uv \u5750\u6807\nvarying vec2 v_Iconuv; // icon \u8d34\u56fe\u7684 uv \u5750\u6807\n\nuniform float u_raisingHeight: 0.0;\nuniform float u_heightfixed: 0.0;\nuniform float u_opacity : 1;\nuniform vec2 u_offsets;\n\n#pragma include "styleMapping"\n#pragma include "styleMappingCalOpacity"\n\n#pragma include "projection"\n#pragma include "picking"\n\nvoid main() {\n  vec3 extrude = a_Extrude;\n\n  v_uv = (a_Extrude.xy + 1.0)/2.0;\n  v_uv.y = 1.0 - v_uv.y;\n  v_Iconuv = a_Uv;\n\n  // cal style mapping - \u6570\u636e\u7eb9\u7406\u6620\u5c04\u90e8\u5206\u7684\u8ba1\u7b97\n  styleMappingMat = mat4(\n    0.0, 0.0, 0.0, 0.0, // opacity - empty - empty - empty\n    0.0, 0.0, 0.0, 0.0, // empty - empty - empty - empty\n    0.0, 0.0, 0.0, 0.0, // offsets[0] - offsets[1]\n    0.0, 0.0, 0.0, 0.0\n  );\n\n  float rowCount = u_cellTypeLayout[0][0];    // \u5f53\u524d\u7684\u6570\u636e\u7eb9\u7406\u6709\u51e0\u884c\n  float columnCount = u_cellTypeLayout[0][1]; // \u5f53\u770b\u5230\u6570\u636e\u7eb9\u7406\u6709\u51e0\u5217\n  float columnWidth = 1.0/columnCount;  // \u5217\u5bbd\n  float rowHeight = 1.0/rowCount;       // \u884c\u9ad8\n  float cellCount = calCellCount(); // opacity - strokeOpacity - strokeWidth - stroke - offsets\n  float id = a_vertexId; // \u7b2cn\u4e2a\u9876\u70b9\n  float cellCurrentRow = floor(id * cellCount / columnCount) + 1.0; // \u8d77\u59cb\u70b9\u5728\u7b2c\u51e0\u884c\n  float cellCurrentColumn = mod(id * cellCount, columnCount) + 1.0; // \u8d77\u59cb\u70b9\u5728\u7b2c\u51e0\u5217\n  \n  // cell \u56fa\u5b9a\u987a\u5e8f opacity -> strokeOpacity -> strokeWidth -> stroke ... \n  // \u6309\u987a\u5e8f\u4ece cell \u4e2d\u53d6\u503c\u3001\u82e5\u6ca1\u6709\u5219\u81ea\u52a8\u5f80\u4e0b\u53d6\u503c\n  float textureOffset = 0.0; // \u5728 cell \u4e2d\u53d6\u503c\u7684\u504f\u79fb\u91cf\n\n  vec2 opacityAndOffset = calOpacityAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);\n  styleMappingMat[0][0] = opacityAndOffset.r;\n  textureOffset = opacityAndOffset.g;\n\n  vec2 textrueOffsets = vec2(0.0, 0.0);\n  if(hasOffsets()) {\n    vec2 valueXPos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);\n    textrueOffsets.r = pos2value(valueXPos, columnWidth, rowHeight); // x\n    textureOffset += 1.0;\n\n    vec2 valueYPos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);\n    textrueOffsets.g = pos2value(valueYPos, columnWidth, rowHeight); // x\n    textureOffset += 1.0;\n  } else {\n    textrueOffsets = u_offsets;\n  }\n\n  // cal style mapping\n\n  highp float angle_sin = sin(a_Rotate);\n  highp float angle_cos = cos(a_Rotate);\n  mat2 rotation_matrix = mat2(angle_cos, -1.0 * angle_sin, angle_sin, angle_cos);\n\n  // vec2 offset = (u_RotateMatrix * extrude.xy * (a_Size) + textrueOffsets);\n  vec2 offset = (rotation_matrix * u_RotateMatrix * extrude.xy * (a_Size) + textrueOffsets);\n  vec3 aPosition = a_Position;\n  if(u_isMeter < 1.0) {\n    // \u4e0d\u4ee5\u7c73\u4e3a\u5b9e\u9645\u5355\u4f4d\n    offset = project_pixel(offset);\n  } else {\n    // \u4ee5\u7c73\u4e3a\u5b9e\u9645\u5355\u4f4d\n\n    if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {\n      aPosition.xy += offset;\n      offset.x = 0.0;\n      offset.y = 0.0;\n    }\n  }\n\n  vec4 project_pos = project_position(vec4(aPosition.xy, 0.0, 1.0));\n  float raisingHeight = u_raisingHeight;\n  if(u_heightfixed < 1.0) { // height fixed\n    raisingHeight = project_pixel(u_raisingHeight);\n  } else {\n    if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {\n      float mapboxZoomScale = 4.0/pow(2.0, 21.0 - u_Zoom);\n      raisingHeight = u_raisingHeight * mapboxZoomScale;\n    }\n  }\n\n  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x\n    gl_Position = u_Mvp * vec4(project_pos.xy + offset, raisingHeight, 1.0);\n  } else {\n    gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, raisingHeight, 1.0));\n  }\n \n  // gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, 0.0, 1.0));\n\n  setPickingColor(a_PickingColor);\n}\n',yA=function(t){Object(st["a"])(n,t);var e=dA(n);function n(){var t;Object(et["a"])(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return t=e.call.apply(e,[this].concat(i)),Object(Ar["a"])(Object(ft["a"])(t),"meter2coord",1),Object(Ar["a"])(Object(ft["a"])(t),"isMeter",!1),Object(Ar["a"])(Object(ft["a"])(t),"radian",0),Object(Ar["a"])(Object(ft["a"])(t),"updateTexture",(function(){var e=t.rendererService.createTexture2D;if(t.texture)return t.texture.update({data:t.iconService.getCanvas(),mag:"linear",min:"linear mipmap nearest",mipmap:!0}),void t.layerService.throttleRenderLayers();t.texture=e({data:t.iconService.getCanvas(),mag:Rp.LINEAR,min:Rp.LINEAR_MIPMAP_LINEAR,premultiplyAlpha:!1,width:1024,height:t.iconService.canvasHeight||128,mipmap:!0})})),t}return Object(nt["a"])(n,[{key:"getUninforms",value:function(){var t=this.layer.getLayerConfig(),e=t.opacity,n=void 0===e?1:e,r=t.offsets,i=void 0===r?[0,0]:r,o=t.rotation,a=t.raisingHeight,s=void 0===a?0:a,u=t.heightfixed,c=void 0!==u&&u;this.rendererService.getDirty()&&this.texture.bind();var l=1;if("GAODE2.x"!==this.mapService.version&&"GAODE1.x"!==this.mapService.version||(l=-1),this.radian=void 0!==o?l*Math.PI*o/180:l*Math.PI*(this.mapService.getRotation()%360)/180,this.dataTextureTest&&this.dataTextureNeedUpdate({opacity:n,offsets:i})){this.judgeStyleAttributes({opacity:n,offsets:i});var f=this.layer.getEncodedData(),h=this.calDataFrame(this.cellLength,f,this.cellProperties),p=h.data,d=h.width,v=h.height;this.rowCount=v,this.dataTexture=this.cellLength>0&&p.length>0?this.createTexture2D({flipY:!0,data:p,format:Rp.LUMINANCE,type:Rp.FLOAT,width:d,height:v}):this.createTexture2D({flipY:!0,data:[1],format:Rp.LUMINANCE,type:Rp.FLOAT,width:1,height:1})}return{u_raisingHeight:Number(s),u_heightfixed:Number(c),u_isMeter:Number(this.isMeter),u_RotateMatrix:new Float32Array([Math.cos(this.radian),Math.sin(this.radian),-Math.sin(this.radian),Math.cos(this.radian)]),u_dataTexture:this.dataTexture,u_cellTypeLayout:this.getCellTypeLayout(),u_texture:this.texture,u_textSize:[1024,this.iconService.canvasHeight||128],u_opacity:Object(K["isNumber"])(n)?n:1,u_offsets:this.isOffsetStatic(i)?i:[0,0]}}},{key:"getAttribute",value:function(){return this.styleAttributeService.createAttributesAndIndices(this.layer.getEncodedData(),zb)}},{key:"initModels",value:function(){var t=Object(mi["a"])(_i.a.mark((function t(){var e,n,r,i;return _i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.iconService.on("imageUpdate",this.updateTexture),this.updateTexture(),e=this.layer.getLayerConfig(),n=e.unit,r=void 0===n?"l7size":n,i=this.mapService.version,"meter"===r&&i!==M_.DEFUALT&&i!==M_.GLOBEL&&(this.isMeter=!0,this.calMeter2Coord()),t.next=7,this.buildModels();case 7:return t.abrupt("return",t.sent);case 8:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"calMeter2Coord",value:function(){var t=Object(q["a"])(this.layer.getSource().extent,4),e=t[0],n=t[1],r=t[2],i=t[3],o=[(e+r)/2,(n+i)/2],a=this.mapService.version;if(a===M_.MAPBOX&&window.mapboxgl.MercatorCoordinate){var s=window.mapboxgl.MercatorCoordinate.fromLngLat({lng:o[0],lat:o[1]},0),u=1,c=u*s.meterInMercatorCoordinateUnits(),l=new window.mapboxgl.MercatorCoordinate(s.x-c,s.y,s.z),f=l.toLngLat();this.meter2coord=o[0]-f.lng}else{var h=this.mapService.meterToCoord(o,[e,n]),p=this.mapService.meterToCoord(o,[r===e?r+.1:r,i===n?n+.1:i]);this.meter2coord=(h+p)/2,this.meter2coord||(this.meter2coord=7.70681090738883)}}},{key:"buildModels",value:function(){var t=Object(mi["a"])(_i.a.mark((function t(){var e,n,r,i,o,a;return _i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=this.layer.getLayerConfig(),n=e.mask,r=void 0!==n&&n,i=e.maskInside,o=void 0===i||i,t.next=3,this.layer.buildLayerModel({moduleName:"pointFillImage",vertexShader:mA,fragmentShader:gA,triangulation:zb,depth:{enable:!1},blend:this.getBlend(),stencil:gi(r,o),cull:{enable:!0,face:Uc(this.mapService.version)}});case 3:return a=t.sent,t.abrupt("return",[a]);case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"clearModels",value:function(){var t,e;this.iconService.off("imageUpdate",this.updateTexture),null===(t=this.texture)||void 0===t||t.destroy(),null===(e=this.dataTexture)||void 0===e||e.destroy()}},{key:"registerBuiltinAttributes",value:function(){var t=this;this.styleAttributeService.registerStyleAttribute({name:"rotate",type:ey.Attribute,descriptor:{name:"a_Rotate",buffer:{usage:Rp.DYNAMIC_DRAW,data:[],type:Rp.FLOAT},size:1,update:function(t){var e=t.rotate,n=void 0===e?0:e;return Array.isArray(n)?[n[0]]:[n]}}}),this.styleAttributeService.registerStyleAttribute({name:"uv",type:ey.Attribute,descriptor:{name:"a_Uv",buffer:{usage:Rp.DYNAMIC_DRAW,data:[],type:Rp.FLOAT},size:2,update:function(e){var n=t.iconService.getIconMap(),r=e.shape,i=n[r]||{x:0,y:0},o=i.x,a=i.y;return[o,a]}}}),this.styleAttributeService.registerStyleAttribute({name:"extrude",type:ey.Attribute,descriptor:{name:"a_Extrude",buffer:{usage:Rp.DYNAMIC_DRAW,data:[],type:Rp.FLOAT},size:3,update:function(t,e,n,r){var i=[1,1,0,-1,1,0,-1,-1,0,1,-1,0],o=r%4*3;return[i[o],i[o+1],i[o+2]]}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:ey.Attribute,descriptor:{name:"a_Size",buffer:{usage:Rp.DYNAMIC_DRAW,data:[],type:Rp.FLOAT},size:1,update:function(e){var n=e.size,r=void 0===n?5:n;return Array.isArray(r)?[r[0]*t.meter2coord]:[r*t.meter2coord]}}})}}]),n}(db);function _A(t){var e=bA();return function(){var n,r=Object(ct["a"])(t);if(e){var i=Object(ct["a"])(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(ut["a"])(this,n)}}function bA(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}var xA='\nuniform sampler2D u_texture;\nvarying vec4 v_color;\nvarying vec2 v_uv;\nuniform vec2 u_textSize;\nuniform float u_opacity : 1;\n\nvarying mat4 styleMappingMat; // \u4f20\u9012\u4ece\u7247\u5143\u4e2d\u4f20\u9012\u7684\u6620\u5c04\u6570\u636e\n\n#pragma include "picking"\n\nvoid main(){\n      float opacity = styleMappingMat[0][0];\n      float size = styleMappingMat[1][0];\n      vec2 pos = v_uv / u_textSize + gl_PointCoord / u_textSize * 64.;\n      vec4 textureColor;\n\n      // Y = 0.299R + 0.587G + 0.114B // \u4eae\u5ea6\u63d0\u53d6\n     \n      textureColor = texture2D(u_texture, pos);\n\n      // Tip: \u53bb\u9664\u8fb9\u7f18\u90e8\u5206 mipmap \u5bfc\u81f4\u7684\u6df7\u5408\u53d8\u6697\n      float fragmengTocenter = distance(vec2(0.5), gl_PointCoord);\n      if(fragmengTocenter >= 0.5) {\n            float luma = 0.299 * textureColor.r + 0.587 * textureColor.g + 0.114 * textureColor.b;\n            textureColor.a *= luma;\n      }\n      \n      \n\n      if(all(lessThan(v_color, vec4(1.0+0.00001))) && all(greaterThan(v_color, vec4(1.0-0.00001))) || v_color==vec4(1.0)){\n            gl_FragColor= textureColor;\n      }else {\n            gl_FragColor= step(0.01, textureColor.z) * v_color;\n      }\n\n      gl_FragColor.a = gl_FragColor.a * opacity;\n      gl_FragColor = filterColor(gl_FragColor);\n}\n',wA='precision highp float;\nattribute vec3 a_Position;\nattribute vec4 a_Color;\nattribute vec2 a_Uv;\nattribute float a_Size;\nvarying vec4 v_color;\nvarying vec2 v_uv;\nuniform mat4 u_ModelMatrix;\nuniform mat4 u_Mvp;\nuniform vec2 u_offsets;\n\nuniform float u_opacity : 1;\nuniform float u_raisingHeight: 0.0;\nuniform float u_heightfixed: 0.0;\n\nvarying mat4 styleMappingMat; // \u7528\u4e8e\u5c06\u5728\u9876\u70b9\u7740\u8272\u5668\u4e2d\u8ba1\u7b97\u597d\u7684\u6837\u5f0f\u503c\u4f20\u9012\u7ed9\u7247\u5143\n\n#pragma include "styleMapping"\n#pragma include "styleMappingCalOpacity"\n\n#pragma include "projection"\n#pragma include "picking"\n\nvoid main() {\n  // cal style mapping - \u6570\u636e\u7eb9\u7406\u6620\u5c04\u90e8\u5206\u7684\u8ba1\u7b97\n  styleMappingMat = mat4(\n    0.0, 0.0, 0.0, 0.0, // opacity - strokeOpacity - strokeWidth - empty\n    0.0, 0.0, 0.0, 0.0, // strokeR - strokeG - strokeB - strokeA\n    0.0, 0.0, 0.0, 0.0, // offsets[0] - offsets[1]\n    0.0, 0.0, 0.0, 0.0\n  );\n\n  float rowCount = u_cellTypeLayout[0][0];    // \u5f53\u524d\u7684\u6570\u636e\u7eb9\u7406\u6709\u51e0\u884c\n  float columnCount = u_cellTypeLayout[0][1]; // \u5f53\u770b\u5230\u6570\u636e\u7eb9\u7406\u6709\u51e0\u5217\n  float columnWidth = 1.0/columnCount;  // \u5217\u5bbd\n  float rowHeight = 1.0/rowCount;       // \u884c\u9ad8\n  float cellCount = calCellCount(); // opacity - strokeOpacity - strokeWidth - stroke - offsets\n  float id = a_vertexId; // \u7b2cn\u4e2a\u9876\u70b9\n  float cellCurrentRow = floor(id * cellCount / columnCount) + 1.0; // \u8d77\u59cb\u70b9\u5728\u7b2c\u51e0\u884c\n  float cellCurrentColumn = mod(id * cellCount, columnCount) + 1.0; // \u8d77\u59cb\u70b9\u5728\u7b2c\u51e0\u5217\n  \n  // cell \u56fa\u5b9a\u987a\u5e8f opacity -> strokeOpacity -> strokeWidth -> stroke ... \n  // \u6309\u987a\u5e8f\u4ece cell \u4e2d\u53d6\u503c\u3001\u82e5\u6ca1\u6709\u5219\u81ea\u52a8\u5f80\u4e0b\u53d6\u503c\n  float textureOffset = 0.0; // \u5728 cell \u4e2d\u53d6\u503c\u7684\u504f\u79fb\u91cf\n\n  vec2 opacityAndOffset = calOpacityAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);\n  styleMappingMat[0][0] = opacityAndOffset.r;\n  textureOffset = opacityAndOffset.g;\n\n  styleMappingMat[1][0] = a_Size;\n\n  vec2 textrueOffsets = vec2(0.0, 0.0);\n  if(hasOffsets()) {\n    vec2 valueXPos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);\n    textrueOffsets.r = pos2value(valueXPos, columnWidth, rowHeight); // x\n    textureOffset += 1.0;\n\n    vec2 valueYPos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);\n    textrueOffsets.g = pos2value(valueYPos, columnWidth, rowHeight); // x\n    textureOffset += 1.0;\n  } else {\n    textrueOffsets = u_offsets;\n  }\n\n  // cal style mapping - \u6570\u636e\u7eb9\u7406\u6620\u5c04\u90e8\u5206\u7684\u8ba1\u7b97\n  v_color = a_Color;\n  v_uv = a_Uv;\n  vec4 project_pos = project_position(vec4(a_Position, 1.0));\n   \n  vec2 offset = project_pixel(textrueOffsets);\n\n  float raisingHeight = u_raisingHeight;\n  if(u_heightfixed < 1.0) { // false\n    raisingHeight = project_pixel(u_raisingHeight);\n  } else {\n     if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {\n      float mapboxZoomScale = 4.0/pow(2.0, 21.0 - u_Zoom);\n      raisingHeight = u_raisingHeight * mapboxZoomScale;\n    }\n  }\n\n  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x\n    gl_Position = u_Mvp * vec4(project_pos.xy + offset, raisingHeight, 1.0);\n  } else {\n    gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, raisingHeight, 1.0));\n  }\n\n  gl_PointSize = a_Size * 2.0 * u_DevicePixelRatio;\n  setPickingColor(a_PickingColor);\n}\n',EA=function(t){Object(st["a"])(n,t);var e=_A(n);function n(){var t;Object(et["a"])(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return t=e.call.apply(e,[this].concat(i)),Object(Ar["a"])(Object(ft["a"])(t),"updateTexture",(function(){var e=t.rendererService.createTexture2D;if(t.texture)return t.texture.update({data:t.iconService.getCanvas(),mag:"linear",min:"linear mipmap nearest",mipmap:!0}),void setTimeout((function(){t.layerService.throttleRenderLayers()}));t.texture=e({data:t.iconService.getCanvas(),mag:Rp.LINEAR,min:Rp.LINEAR_MIPMAP_LINEAR,premultiplyAlpha:!1,width:1024,height:t.iconService.canvasHeight||128,mipmap:!0})})),t}return Object(nt["a"])(n,[{key:"getUninforms",value:function(){var t=this.layer.getLayerConfig(),e=t.opacity,n=void 0===e?1:e,r=t.offsets,i=void 0===r?[0,0]:r,o=t.raisingHeight,a=void 0===o?0:o,s=t.heightfixed,u=void 0!==s&&s;if(this.rendererService.getDirty()&&this.texture.bind(),this.dataTextureTest&&this.dataTextureNeedUpdate({opacity:n,offsets:i})){this.judgeStyleAttributes({opacity:n,offsets:i});var c=this.layer.getEncodedData(),l=this.calDataFrame(this.cellLength,c,this.cellProperties),f=l.data,h=l.width,p=l.height;this.rowCount=p,this.dataTexture=this.cellLength>0&&f.length>0?this.createTexture2D({flipY:!0,data:f,format:Rp.LUMINANCE,type:Rp.FLOAT,width:h,height:p}):this.createTexture2D({flipY:!0,data:[1],format:Rp.LUMINANCE,type:Rp.FLOAT,width:1,height:1})}return{u_raisingHeight:Number(a),u_heightfixed:Number(u),u_dataTexture:this.dataTexture,u_cellTypeLayout:this.getCellTypeLayout(),u_texture:this.texture,u_textSize:[1024,this.iconService.canvasHeight||128],u_opacity:Object(K["isNumber"])(n)?n:1,u_offsets:this.isOffsetStatic(i)?i:[0,0]}}},{key:"initModels",value:function(){var t=Object(mi["a"])(_i.a.mark((function t(){return _i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.iconService.on("imageUpdate",this.updateTexture),this.updateTexture(),t.next=4,this.buildModels();case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"clearModels",value:function(){var t,e;null===(t=this.texture)||void 0===t||t.destroy(),null===(e=this.dataTexture)||void 0===e||e.destroy(),this.iconService.off("imageUpdate",this.updateTexture)}},{key:"buildModels",value:function(){var t=Object(mi["a"])(_i.a.mark((function t(){var e,n,r,i,o,a;return _i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=this.layer.getLayerConfig(),n=e.mask,r=void 0!==n&&n,i=e.maskInside,o=void 0===i||i,t.next=3,this.layer.buildLayerModel({moduleName:"pointImage",vertexShader:wA,fragmentShader:xA,triangulation:Hb,depth:{enable:!1},primitive:Rp.POINTS,blend:this.getBlend(),stencil:gi(r,o)});case 3:return a=t.sent,t.abrupt("return",[a]);case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"registerBuiltinAttributes",value:function(){var t=this;this.styleAttributeService.registerStyleAttribute({name:"size",type:ey.Attribute,descriptor:{name:"a_Size",buffer:{usage:Rp.DYNAMIC_DRAW,data:[],type:Rp.FLOAT},size:1,update:function(t){var e=t.size,n=void 0===e?5:e;return Array.isArray(n)?[n[0]]:[n]}}}),this.styleAttributeService.registerStyleAttribute({name:"uv",type:ey.Attribute,descriptor:{name:"a_Uv",buffer:{usage:Rp.DYNAMIC_DRAW,data:[],type:Rp.FLOAT},size:2,update:function(e){var n=t.iconService.getIconMap(),r=e.shape,i=n[r]||{x:0,y:0},o=i.x,a=i.y;return[o,a]}}})}}]),n}(db);function SA(t){var e=OA();return function(){var n,r=Object(ct["a"])(t);if(e){var i=Object(ct["a"])(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(ut["a"])(this,n)}}function OA(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}var CA="uniform float u_opacity : 1;\nvarying vec4 v_color;\nvoid main() {\n  gl_FragColor = v_color;\n  gl_FragColor.a *= u_opacity;\n}\n",TA='\nattribute vec3 a_Position;\nuniform mat4 u_ModelMatrix;\nuniform mat4 u_Mvp;\nattribute float a_Size;\nattribute vec4 a_Color;\n\nvarying vec4 v_color;\n\n#pragma include "projection"\n#pragma include "project"\n\nvoid main() {\n  v_color = a_Color;\n\n  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x\n    gl_Position = u_Mvp * vec4(a_Position.xy, a_Position.z, 1.0);\n  } else {\n    vec4 project_pos = project_position(vec4(a_Position, 1.0)) + vec4(a_Size / 2.,-a_Size /2.,0.,0.);\n    gl_Position = project_common_position_to_clipspace(vec4(vec2(project_pos.xy),project_pos.z,project_pos.w));\n  }\n\n  gl_PointSize = a_Size * 2.0 * u_DevicePixelRatio;\n}\n';function AA(t){var e=t.coordinates;return{vertices:Object(M["a"])(e),indices:[0],size:e.length}}var kA=function(t){Object(st["a"])(n,t);var e=SA(n);function n(){return Object(et["a"])(this,n),e.apply(this,arguments)}return Object(nt["a"])(n,[{key:"getDefaultStyle",value:function(){return{blend:"additive"}}},{key:"getUninforms",value:function(){var t=this.layer.getLayerConfig(),e=t.opacity,n=void 0===e?1:e;return{u_opacity:Object(K["isNumber"])(n)?n:1}}},{key:"initModels",value:function(){var t=Object(mi["a"])(_i.a.mark((function t(){return _i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.buildModels();case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"buildModels",value:function(){var t=Object(mi["a"])(_i.a.mark((function t(){var e,n,r,i,o,a;return _i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=this.layer.getLayerConfig(),n=e.mask,r=void 0!==n&&n,i=e.maskInside,o=void 0===i||i,this.layer.triangulation=AA,t.next=4,this.layer.buildLayerModel({moduleName:"pointNormal",vertexShader:TA,fragmentShader:CA,triangulation:AA,depth:{enable:!1},primitive:Rp.POINTS,blend:this.getBlend(),stencil:gi(r,o),pick:!1});case 4:return a=t.sent,t.abrupt("return",[a]);case 6:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"clearModels",value:function(){}},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"size",type:ey.Attribute,descriptor:{name:"a_Size",buffer:{usage:Rp.DYNAMIC_DRAW,data:[],type:Rp.FLOAT},size:1,update:function(t){var e=t.size,n=void 0===e?1:e;return Array.isArray(n)?[n[0]]:[n]}}})}}]),n}(db);function MA(t){var e=PA();return function(){var n,r=Object(ct["a"])(t);if(e){var i=Object(ct["a"])(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(ut["a"])(this,n)}}function PA(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}var RA='\nuniform float u_additive;\nuniform float u_opacity: 1.0;\n\nvarying vec4 v_data;\nvarying vec4 v_color;\nvarying float v_radius;\nvarying vec2 v_exteude;\n#pragma include "sdf_2d"\n#pragma include "picking"\n\nvoid main() {\n\n  lowp float antialiasblur = v_data.z;\n  float r = v_radius / (v_radius);\n\n  float outer_df = sdCircle(v_data.xy, 1.0);\n  float inner_df = sdCircle(v_data.xy, r);\n\n  float opacity_t = smoothstep(0.0, antialiasblur, outer_df);\n\n  gl_FragColor = vec4(v_color.rgb, v_color.a * u_opacity);\n\n  if(u_additive > 0.0) {\n    gl_FragColor *= opacity_t;\n  } else {\n    gl_FragColor.a *= opacity_t;\n  }\n\n  if(gl_FragColor.a > 0.0) {\n    gl_FragColor = filterColor(gl_FragColor);\n  }\n\n  vec2 extrude =  v_exteude;\n  vec2 dir = normalize(extrude);\n  vec2 baseDir = vec2(1.0, 0.0);\n  float pi = 3.14159265359;\n  // full circle\n  // float rades = dot(dir, baseDir);\n  // float flag = sign(dir.y);\n  // float radar_v = (flag - 1.0) * -0.5 + flag * acos(rades)/pi/2.0;\n  \n  // half circle\n  float flag = sign(dir.y);\n  float rades = dot(dir, baseDir);\n  float radar_v = (flag - 1.0) * -0.5 * acos(rades)/pi;\n  // simple AA\n  if(radar_v > 0.99) {\n    radar_v = 1.0 - (radar_v - 0.99)/0.01;\n  }\n\n  gl_FragColor.a *= radar_v;\n}\n',jA='attribute vec4 a_Color;\nattribute vec3 a_Position;\nattribute vec3 a_Extrude;\nattribute float a_Size;\nuniform float u_speed: 1.0;\nuniform float u_time;\n\nuniform mat4 u_ModelMatrix;\nuniform mat4 u_Mvp;\nuniform float u_isMeter;\n\nvarying vec4 v_data;\nvarying vec4 v_color;\nvarying float v_radius;\nvarying vec2 v_exteude;\n\n#pragma include "projection"\n#pragma include "picking"\n\nvoid main() {\n  vec3 extrude = a_Extrude;\n  float newSize = setPickingSize(a_Size);\n\n  float time = u_time * u_speed;\n  mat2 rotateMatrix = mat2( \n    cos(time), sin(time), \n    -sin(time), cos(time)\n  );\n  v_exteude = rotateMatrix * a_Extrude.xy;\n\n  // unpack color(vec2)\n  v_color = a_Color;\n\n  // radius(16-bit)\n  v_radius = newSize;\n\n  // anti-alias\n  float blur = 0.0;\n  float antialiasblur = -max(2.0 / u_DevicePixelRatio / a_Size, blur);\n\n  vec2 offset = (extrude.xy * (newSize));\n  vec3 aPosition = a_Position;\n  if(u_isMeter < 1.0) {\n    // \u4e0d\u4ee5\u7c73\u4e3a\u5b9e\u9645\u5355\u4f4d\n    offset = project_pixel(offset);\n  } else {\n    // \u4ee5\u7c73\u4e3a\u5b9e\u9645\u5355\u4f4d\n    antialiasblur *= pow(19.0 - u_Zoom, 2.0);\n    antialiasblur = max(antialiasblur, -0.01);\n    // offset *= 0.5;\n\n    if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {\n      aPosition.xy += offset;\n      offset.x = 0.0;\n      offset.y = 0.0;\n    }\n  }\n\n  v_data = vec4(extrude.x, extrude.y, antialiasblur, -1.0);\n\n  vec4 project_pos = project_position(vec4(aPosition.xy, 0.0, 1.0));\n\n  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x\n    gl_Position = u_Mvp * vec4(project_pos.xy + offset, 0.0, 1.0);\n  } else {\n    gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, project_pixel(setPickingOrder(0.0)), 1.0));\n  }\n\n  setPickingColor(a_PickingColor);\n}\n',IA=function(t){Object(st["a"])(n,t);var e=MA(n);function n(){var t;Object(et["a"])(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return t=e.call.apply(e,[this].concat(i)),Object(Ar["a"])(Object(ft["a"])(t),"meter2coord",1),Object(Ar["a"])(Object(ft["a"])(t),"isMeter",!1),t}return Object(nt["a"])(n,[{key:"getUninforms",value:function(){var t=this.layer.getLayerConfig(),e=t.opacity,n=void 0===e?1:e,r=t.blend,i=t.speed,o=void 0===i?1:i;return{u_isMeter:Number(this.isMeter),u_speed:o,u_additive:"additive"===r?1:0,u_opacity:Object(K["isNumber"])(n)?n:1}}},{key:"getAnimateUniforms",value:function(){var t=this.layer.getLayerConfig(),e=t.animateOption,n=void 0===e?{enable:!1}:e;return{u_animate:this.animateOption2Array(n),u_time:this.layer.getLayerAnimateTime()}}},{key:"getAttribute",value:function(){return this.styleAttributeService.createAttributesAndIndices(this.layer.getEncodedData(),zb)}},{key:"initModels",value:function(){var t=Object(mi["a"])(_i.a.mark((function t(){var e,n,r,i;return _i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=this.layer.getLayerConfig(),n=e.unit,r=void 0===n?"l7size":n,i=this.mapService.version,"meter"===r&&i!==M_.DEFUALT&&i!==M_.GLOBEL&&(this.isMeter=!0,this.calMeter2Coord()),t.next=5,this.buildModels();case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"calMeter2Coord",value:function(){var t=Object(q["a"])(this.layer.getSource().extent,4),e=t[0],n=t[1],r=t[2],i=t[3],o=[(e+r)/2,(n+i)/2],a=this.mapService.version;if(a===M_.MAPBOX&&window.mapboxgl.MercatorCoordinate){var s=window.mapboxgl.MercatorCoordinate.fromLngLat({lng:o[0],lat:o[1]},0),u=1,c=u*s.meterInMercatorCoordinateUnits(),l=new window.mapboxgl.MercatorCoordinate(s.x-c,s.y,s.z),f=l.toLngLat();this.meter2coord=o[0]-f.lng}else{var h=this.mapService.meterToCoord(o,[e,n]),p=this.mapService.meterToCoord(o,[r===e?r+.1:r,i===n?n+.1:i]);this.meter2coord=(h+p)/2,this.meter2coord||(this.meter2coord=7.70681090738883)}}},{key:"buildModels",value:function(){var t=Object(mi["a"])(_i.a.mark((function t(){var e,n,r,i,o,a;return _i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=this.layer.getLayerConfig(),n=e.mask,r=void 0!==n&&n,i=e.maskInside,o=void 0===i||i,t.next=3,this.layer.buildLayerModel({moduleName:"pointRadar",vertexShader:jA,fragmentShader:RA,triangulation:zb,depth:{enable:!1},blend:this.getBlend(),stencil:gi(r,o)});case 3:return a=t.sent,t.abrupt("return",[a]);case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"clearModels",value:function(){var t;null===(t=this.dataTexture)||void 0===t||t.destroy()}},{key:"animateOption2Array",value:function(t){return[t.enable?0:1,t.speed||1,t.rings||3,0]}},{key:"registerBuiltinAttributes",value:function(){var t=this;this.styleAttributeService.registerStyleAttribute({name:"extrude",type:ey.Attribute,descriptor:{name:"a_Extrude",buffer:{usage:Rp.DYNAMIC_DRAW,data:[],type:Rp.FLOAT},size:3,update:function(t,e,n,r){var i=[1,1,0,-1,1,0,-1,-1,0,1,-1,0],o=r%4*3;return[i[o],i[o+1],i[o+2]]}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:ey.Attribute,descriptor:{name:"a_Size",buffer:{usage:Rp.DYNAMIC_DRAW,data:[],type:Rp.FLOAT},size:1,update:function(e){var n=e.size,r=void 0===n?5:n;return Array.isArray(r)?[r[0]*t.meter2coord]:[r*t.meter2coord]}}})}}]),n}(db);function LA(t){var e=NA();return function(){var n,r=Object(ct["a"])(t);if(e){var i=Object(ct["a"])(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(ut["a"])(this,n)}}function NA(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}var DA='\nuniform float u_opacity : 1;\nuniform vec2 u_offsets;\nuniform float u_additive;\n\nuniform float u_stroke_opacity : 1;\n\nuniform vec4 u_stroke_color : [0.0, 0.0, 0.0, 0.0];\n\nvarying vec4 v_color;\nvarying mat4 styleMappingMat; // \u4f20\u9012\u4ece\u7247\u5143\u4e2d\u4f20\u9012\u7684\u6620\u5c04\u6570\u636e\nvarying float v_blur;\nvarying float v_innerRadius;\n\n#pragma include "picking"\nvoid main() {\n  vec2 center = vec2(0.5);\n\n  float opacity = styleMappingMat[0][0];\n  // Tip: \u7247\u5143\u5230\u4e2d\u5fc3\u70b9\u7684\u8ddd\u79bb 0 - 1\n  float fragmengTocenter = distance(center, gl_PointCoord) * 2.0;\n  // Tip: \u7247\u5143\u7684\u526a\u5207\u6210\u5706\u5f62\n  float circleClipOpacity = 1.0 - smoothstep(v_blur, 1.0, fragmengTocenter);\n\n\n  if(v_innerRadius < 0.99) {\n    // \u5f53\u5b58\u5728 stroke \u4e14 stroke > 0.01\n    float blurWidth = (1.0 - v_blur)/2.0;\n    vec4 stroke = vec4(u_stroke_color.rgb, u_stroke_opacity);\n    if(fragmengTocenter > v_innerRadius + blurWidth) {\n      gl_FragColor = stroke;\n    } else if(fragmengTocenter > v_innerRadius - blurWidth){\n      float mixR = (fragmengTocenter - (v_innerRadius - blurWidth)) / (blurWidth * 2.0);\n      gl_FragColor = mix(v_color, stroke, mixR);\n    } else {\n      gl_FragColor = v_color;\n    }\n  } else {\n    // \u5f53\u4e0d\u5b58\u5728 stroke \u6216 stroke <= 0.01\n    gl_FragColor = v_color;\n  }\n\n  gl_FragColor.a *= opacity;\n\n  gl_FragColor = filterColor(gl_FragColor);\n  \n  if(u_additive > 0.0) {\n    gl_FragColor *= circleClipOpacity;\n  } else {\n    gl_FragColor.a *= circleClipOpacity;\n  }\n\n}\n',FA='\nattribute vec3 a_Position;\nuniform mat4 u_ModelMatrix;\nuniform mat4 u_Mvp;\nattribute float a_Size;\nattribute vec4 a_Color;\nvarying vec4 v_color;\n\nuniform float u_opacity : 1;\nuniform vec2 u_offsets;\nuniform float u_stroke_width;\n\nvarying mat4 styleMappingMat; // \u7528\u4e8e\u5c06\u5728\u9876\u70b9\u7740\u8272\u5668\u4e2d\u8ba1\u7b97\u597d\u7684\u6837\u5f0f\u503c\u4f20\u9012\u7ed9\u7247\u5143\nvarying float v_blur;\nvarying float v_innerRadius;\n\n#pragma include "styleMapping"\n#pragma include "styleMappingCalOpacity"\n\n#pragma include "projection"\n#pragma include "picking"\n#pragma include "project"\nvoid main() {\n  v_color = a_Color;\n  v_blur = 1.0 - max(2.0/a_Size, 0.05);\n  v_innerRadius = max((a_Size - u_stroke_width) / a_Size, 0.0);\n\n  // cal style mapping - \u6570\u636e\u7eb9\u7406\u6620\u5c04\u90e8\u5206\u7684\u8ba1\u7b97\nstyleMappingMat = mat4(\n    0.0, 0.0, 0.0, 0.0, // opacity - strokeOpacity - strokeWidth - empty\n    0.0, 0.0, 0.0, 0.0, // strokeR - strokeG - strokeB - strokeA\n    0.0, 0.0, 0.0, 0.0, // offsets[0] - offsets[1]\n    0.0, 0.0, 0.0, 0.0\n  );\n\n  float rowCount = u_cellTypeLayout[0][0];    // \u5f53\u524d\u7684\u6570\u636e\u7eb9\u7406\u6709\u51e0\u884c\n  float columnCount = u_cellTypeLayout[0][1]; // \u5f53\u770b\u5230\u6570\u636e\u7eb9\u7406\u6709\u51e0\u5217\n  float columnWidth = 1.0/columnCount;  // \u5217\u5bbd\n  float rowHeight = 1.0/rowCount;       // \u884c\u9ad8\n  float cellCount = calCellCount(); // opacity - strokeOpacity - strokeWidth - stroke - offsets\n  float id = a_vertexId; // \u7b2cn\u4e2a\u9876\u70b9\n  float cellCurrentRow = floor(id * cellCount / columnCount) + 1.0; // \u8d77\u59cb\u70b9\u5728\u7b2c\u51e0\u884c\n  float cellCurrentColumn = mod(id * cellCount, columnCount) + 1.0; // \u8d77\u59cb\u70b9\u5728\u7b2c\u51e0\u5217\n  \n  // cell \u56fa\u5b9a\u987a\u5e8f opacity -> strokeOpacity -> strokeWidth -> stroke ... \n  // \u6309\u987a\u5e8f\u4ece cell \u4e2d\u53d6\u503c\u3001\u82e5\u6ca1\u6709\u5219\u81ea\u52a8\u5f80\u4e0b\u53d6\u503c\n  float textureOffset = 0.0; // \u5728 cell \u4e2d\u53d6\u503c\u7684\u504f\u79fb\u91cf\n\n  vec2 opacityAndOffset = calOpacityAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);\n  styleMappingMat[0][0] = opacityAndOffset.r;\n  textureOffset = opacityAndOffset.g;\n\n  vec2 textrueOffsets = vec2(0.0, 0.0);\n  if(hasOffsets()) {\n    vec2 valueXPos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);\n    textrueOffsets.r = pos2value(valueXPos, columnWidth, rowHeight); // x\n    textureOffset += 1.0;\n\n    vec2 valueYPos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);\n    textrueOffsets.g = pos2value(valueYPos, columnWidth, rowHeight); // x\n    textureOffset += 1.0;\n  } else {\n    textrueOffsets = u_offsets;\n  }\n\n  // cal style mapping\n  \n  vec2 offset = project_pixel(textrueOffsets);\n  \n  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x\n    gl_Position = u_Mvp * vec4(a_Position.xy + offset, a_Position.z, 1.0);\n  } else { // else\n    vec4 project_pos = project_position(vec4(a_Position, 1.0)) + vec4(a_Size / 2.,-a_Size /2.,0.,0.);\n    gl_Position = project_common_position_to_clipspace(vec4(vec2(project_pos.xy+offset),project_pos.z,project_pos.w));\n  }\n\n  gl_PointSize = a_Size * 2.0 * u_DevicePixelRatio;\n  setPickingColor(a_PickingColor);\n}\n';function BA(t){var e=t.coordinates;return{vertices:Object(M["a"])(e),indices:[0],size:e.length}}var zA=function(t){Object(st["a"])(n,t);var e=LA(n);function n(){return Object(et["a"])(this,n),e.apply(this,arguments)}return Object(nt["a"])(n,[{key:"getDefaultStyle",value:function(){return{blend:"additive"}}},{key:"getUninforms",value:function(){var t=this.layer.getLayerConfig(),e=t.opacity,n=void 0===e?1:e,r=t.offsets,i=void 0===r?[0,0]:r,o=t.blend,a=t.strokeOpacity,s=void 0===a?1:a,u=t.strokeWidth,c=void 0===u?0:u,l=t.stroke,f=void 0===l?"#fff":l;if(this.dataTextureTest&&this.dataTextureNeedUpdate({opacity:n,offsets:i})){this.judgeStyleAttributes({opacity:n,offsets:i});var h=this.layer.getEncodedData(),p=this.calDataFrame(this.cellLength,h,this.cellProperties),d=p.data,v=p.width,g=p.height;this.rowCount=g,this.dataTexture=this.cellLength>0&&d.length>0?this.createTexture2D({flipY:!0,data:d,format:Rp.LUMINANCE,type:Rp.FLOAT,width:v,height:g}):this.createTexture2D({flipY:!0,data:[1],format:Rp.LUMINANCE,type:Rp.FLOAT,width:1,height:1})}return{u_additive:"additive"===o?1:0,u_dataTexture:this.dataTexture,u_cellTypeLayout:this.getCellTypeLayout(),u_opacity:Object(K["isNumber"])(n)?n:1,u_offsets:this.isOffsetStatic(i)?i:[0,0],u_stroke_opacity:Object(K["isNumber"])(s)?s:1,u_stroke_width:Object(K["isNumber"])(c)?c:1,u_stroke_color:this.getStrokeColor(f)}}},{key:"initModels",value:function(){var t=Object(mi["a"])(_i.a.mark((function t(){return _i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.buildModels();case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"buildModels",value:function(){var t=Object(mi["a"])(_i.a.mark((function t(){var e,n,r,i,o,a;return _i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=this.layer.getLayerConfig(),n=e.mask,r=void 0!==n&&n,i=e.maskInside,o=void 0===i||i,this.layer.triangulation=BA,t.next=4,this.layer.buildLayerModel({moduleName:"pointSimple",vertexShader:FA,fragmentShader:DA,triangulation:BA,depth:{enable:!1},primitive:Rp.POINTS,blend:this.getBlend(),stencil:gi(r,o)});case 4:return a=t.sent,t.abrupt("return",[a]);case 6:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"clearModels",value:function(){var t;null===(t=this.dataTexture)||void 0===t||t.destroy()}},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"size",type:ey.Attribute,descriptor:{name:"a_Size",buffer:{usage:Rp.DYNAMIC_DRAW,data:[],type:Rp.FLOAT},size:1,update:function(t){var e=t.size,n=void 0===e?1:e;return Array.isArray(n)?[n[0]]:[n]}}})}}]),n}(db);function UA(t,e){var n="undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=VA(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n["return"]||n["return"]()}finally{if(s)throw o}}}}function VA(t,e){if(t){if("string"===typeof t)return HA(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?HA(t,e):void 0}}function HA(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var GA=function(){function t(e,n,r){Object(et["a"])(this,t),Object(Ar["a"])(this,"boxCells",[]);var i=this.boxCells;this.xCellCount=Math.ceil(e/r),this.yCellCount=Math.ceil(n/r);for(var o=0;o<this.xCellCount*this.yCellCount;o++)i.push([]);this.boxKeys=[],this.bboxes=[],this.width=e,this.height=n,this.xScale=this.xCellCount/e,this.yScale=this.yCellCount/n,this.boxUid=0}return Object(nt["a"])(t,[{key:"insert",value:function(t,e,n,r,i){this.forEachCell(e,n,r,i,this.insertBoxCell,this.boxUid++),this.boxKeys.push(t),this.bboxes.push(e),this.bboxes.push(n),this.bboxes.push(r),this.bboxes.push(i)}},{key:"query",value:function(t,e,n,r,i){return this.queryHitTest(t,e,n,r,!1,i)}},{key:"hitTest",value:function(t,e,n,r,i){return this.queryHitTest(t,e,n,r,!0,i)}},{key:"insertBoxCell",value:function(t,e,n,r,i,o){this.boxCells[i].push(o)}},{key:"queryHitTest",value:function(t,e,n,r,i,o){if(n<0||t>this.width||r<0||e>this.height)return!i&&[];var a=[];if(t<=0&&e<=0&&this.width<=n&&this.height<=r){if(i)return!0;for(var s=0;s<this.boxKeys.length;s++)a.push({key:this.boxKeys[s],x1:this.bboxes[4*s],y1:this.bboxes[4*s+1],x2:this.bboxes[4*s+2],y2:this.bboxes[4*s+3]});return o?a.filter(o):a}var u={hitTest:i,seenUids:{box:{},circle:{}}};return this.forEachCell(t,e,n,r,this.queryCell,a,u,o),i?a.length>0:a}},{key:"queryCell",value:function(t,e,n,r,i,o,a,s){var u=a.seenUids,c=this.boxCells[i];if(null!==c){var l,f=this.bboxes,h=UA(c);try{for(h.s();!(l=h.n()).done;){var p=l.value;if(!u.box[p]){u.box[p]=!0;var d=4*p;if(t<=f[d+2]&&e<=f[d+3]&&n>=f[d+0]&&r>=f[d+1]&&(!s||s(this.boxKeys[p]))){if(a.hitTest)return o.push(!0),!0;o.push({key:this.boxKeys[p],x1:f[d],y1:f[d+1],x2:f[d+2],y2:f[d+3]})}}}}catch(v){h.e(v)}finally{h.f()}}return!1}},{key:"forEachCell",value:function(t,e,n,r,i,o,a,s){for(var u=this.convertToXCellCoord(t),c=this.convertToYCellCoord(e),l=this.convertToXCellCoord(n),f=this.convertToYCellCoord(r),h=u;h<=l;h++)for(var p=c;p<=f;p++){var d=this.xCellCount*p+h;if(i.call(this,t,e,n,r,d,o,a,s))return}}},{key:"convertToXCellCoord",value:function(t){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(t*this.xScale)))}},{key:"convertToYCellCoord",value:function(t){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(t*this.yScale)))}}]),t}(),WA=GA,ZA=function(){function t(e,n){Object(et["a"])(this,t),Object(Ar["a"])(this,"viewportPadding",100),this.width=e,this.height=n,this.viewportPadding=Math.max(e,n),this.grid=new WA(e+this.viewportPadding,n+this.viewportPadding,25),this.screenRightBoundary=e+this.viewportPadding,this.screenBottomBoundary=n+this.viewportPadding,this.gridRightBoundary=e+2*this.viewportPadding,this.gridBottomBoundary=n+2*this.viewportPadding}return Object(nt["a"])(t,[{key:"placeCollisionBox",value:function(t){var e=t.x1+t.anchorPointX+this.viewportPadding,n=t.y1+t.anchorPointY+this.viewportPadding,r=t.x2+t.anchorPointX+this.viewportPadding,i=t.y2+t.anchorPointY+this.viewportPadding;return!this.isInsideGrid(e,n,r,i)||this.grid.hitTest(e,n,r,i)?{box:[]}:{box:[e,n,r,i]}}},{key:"insertCollisionBox",value:function(t,e){var n={featureIndex:e};this.grid.insert(n,t[0],t[1],t[2],t[3])}},{key:"project",value:function(t,e,n){var r=c.fromValues(e,n,0,1),i=c.create(),o=a.fromValues.apply(a,Object(M["a"])(t));return c.transformMat4(i,r,o),{x:(i[0]/i[3]+1)/2*this.width+this.viewportPadding,y:(-i[1]/i[3]+1)/2*this.height+this.viewportPadding}}},{key:"isInsideGrid",value:function(t,e,n,r){return n>=0&&t<this.gridRightBoundary&&r>=0&&e<this.gridBottomBoundary}}]),t}();function YA(t,e){var n="undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=XA(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n["return"]||n["return"]()}finally{if(s)throw o}}}}function XA(t,e){if(t){if("string"===typeof t)return qA(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?qA(t,e):void 0}}function qA(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function KA(t){var e=.5,n=.5;switch(t){case"right":case"top-right":case"bottom-right":e=1;break;case"left":case"top-left":case"bottom-left":e=0;break;default:e=.5}switch(t){case"bottom":case"bottom-right":case"bottom-left":n=1;break;case"top":case"top-right":case"top-left":n=0;break;default:n=.5}return{horizontalAlign:e,verticalAlign:n}}function QA(t,e,n,r,i){if(i){var o=t[r],a=o.glyph;if(a)for(var s=e[a].advance*o.scale,u=(t[r].x+s)*i,c=n;c<=r;c++)t[c].x-=u}}function $A(t,e,n,r,i,o,a){var s,u=(e-n)*i,c=(-r*a+.5)*o,l=YA(t);try{for(l.s();!(s=l.n()).done;){var f=s.value;f.x+=u,f.y+=c}}catch(h){l.e(h)}finally{l.f()}}function JA(t,e,n,r,i,o,a){var s=-8,u=0,c=s,l=0,f=t.positionedGlyphs,h="right"===o?1:"left"===o?0:.5,p=f.length;n.forEach((function(t){if(t.split("").forEach((function(t){var n=e[t],r=0;n&&(f.push({glyph:t,x:u,y:c+r,vertical:!1,scale:1,metrics:n}),u+=n.advance+a)})),f.length!==p){var n=u-a;l=Math.max(n,l),QA(f,e,p,f.length-1,h)}u=0,c-=r+5}));var d=KA(i),v=d.horizontalAlign,g=d.verticalAlign;$A(f,h,v,g,l,r,n.length);var m=c-s;t.top+=-g*m,t.bottom=t.top-m,t.left+=-v*l,t.right=t.left+l}function tk(t,e,n,r,i,o,a){var s=-8,u=0,c=s,l=0,f=t.positionedGlyphs,h="right"===o?1:"left"===o?0:.5,p=f.length;n.forEach((function(t){var n=e[t],i=0;if(n&&(f.push({glyph:t,x:n.advance/2,y:c+i,vertical:!1,scale:1,metrics:n}),u+=n.advance+a),f.length!==p){var o=u-a;l=Math.max(o,l),QA(f,e,p,f.length-1,h)}u=0,c-=r+5}));var d=KA(i),v=d.horizontalAlign,g=d.verticalAlign;$A(f,h,v,g,l,r,n.length);var m=c-s;t.top+=-g*m,t.bottom=t.top-m,t.left+=-v*l,t.right=t.left+l}function ek(t,e,n,r,i,o){var a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:[0,0],s=arguments.length>7?arguments[7]:void 0,u=t.split("\n"),c=[],l={positionedGlyphs:c,top:a[1],bottom:a[1],left:a[0],right:a[0],lineCount:u.length,text:t};return s?tk(l,e,u,n,r,i,o):JA(l,e,u,n,r,i,o),!!c.length&&l}function nk(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0],r=arguments.length>2?arguments[2]:void 0,i=t.positionedGlyphs,o=void 0===i?[]:i,a=[],s=YA(o);try{for(s.s();!(e=s.n()).done;){var u=e.value,c=u.metrics,l=4,f=c.advance*u.scale/2,h=r?[u.x+f,u.y]:[0,0],p=r?[0,0]:[u.x+f+n[0],u.y+n[1]],d=(0-l)*u.scale-f+p[0],v=(0-l)*u.scale+p[1],g=d+c.width*u.scale,m=v+c.height*u.scale,y={x:d,y:v},_={x:g,y:v},b={x:d,y:m},x={x:g,y:m};a.push({tl:y,tr:_,bl:b,br:x,tex:c,glyphOffset:h})}}catch(w){s.e(w)}finally{s.f()}return a}function rk(t,e){var n="undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=ik(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n["return"]||n["return"]()}finally{if(s)throw o}}}}function ik(t,e){if(t){if("string"===typeof t)return ok(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ok(t,e):void 0}}function ok(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function ak(t){var e=sk();return function(){var n,r=Object(ct["a"])(t);if(e){var i=Object(ct["a"])(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(ut["a"])(this,n)}}function sk(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}var uk='#define SDF_PX 8.0\n#define EDGE_GAMMA 0.105\n#define FONT_SIZE 48.0\nuniform sampler2D u_sdf_map;\nuniform float u_gamma_scale : 0.5;\n// uniform float u_font_size : 24.0;\nuniform float u_opacity : 1.0;\nuniform vec4 u_stroke_color : [0, 0, 0, 1];\nuniform float u_stroke_width : 2.0;\nuniform float u_halo_blur : 0.5;\nuniform float u_DevicePixelRatio;\n\nvarying vec4 v_color;\nvarying vec2 v_uv;\nvarying float v_gamma_scale;\nvarying float v_fontScale;\n\nvarying mat4 styleMappingMat; // \u4f20\u9012\u4ece\u7247\u5143\u4e2d\u4f20\u9012\u7684\u6620\u5c04\u6570\u636e\n\n#pragma include "picking"\nvoid main() {\n  // get style data mapping\n  float opacity = styleMappingMat[0][0];\n  float strokeWidth = styleMappingMat[0][2];\n  vec4 textrueStroke = vec4(\n    styleMappingMat[1][0],\n    styleMappingMat[1][1],\n    styleMappingMat[1][2],\n    styleMappingMat[1][3]\n  );\n\n  // get sdf from atlas\n  float dist = texture2D(u_sdf_map, v_uv).a;\n\n  // float fontScale = u_font_size / FONT_SIZE;\n\n  // lowp float buff = (6.0 - u_stroke_width / v_fontScale) / SDF_PX;\n  lowp float buff = (6.0 - strokeWidth / v_fontScale) / SDF_PX;\n  highp float gamma = (u_halo_blur * 1.19 / SDF_PX + EDGE_GAMMA) / (v_fontScale * u_gamma_scale) / 1.0;\n\n  highp float gamma_scaled = gamma * v_gamma_scale;\n\n  highp float alpha = smoothstep(buff - gamma_scaled, buff + gamma_scaled, dist);\n  // gl_FragColor = mix(vec4(v_color.rgb, v_color.a * u_opacity), vec4(u_stroke_color.rgb, u_stroke_color.a * u_opacity), smoothstep(0., 0.5, 1. - dist));\n  gl_FragColor = mix(vec4(v_color.rgb, v_color.a * opacity), vec4(textrueStroke.rgb, textrueStroke.a * opacity), smoothstep(0., 0.5, 1. - dist));\n  gl_FragColor.a= gl_FragColor.a * alpha;\n  gl_FragColor = filterColor(gl_FragColor);\n}\n',ck='#define SDF_PX 8.0\n#define EDGE_GAMMA 0.105\n#define FONT_SIZE 24.0\nattribute vec3 a_Position;\nattribute vec2 a_tex;\nattribute vec2 a_textOffsets;\nattribute vec4 a_Color;\nattribute float a_Size;\nattribute float a_Rotate;\n\nuniform vec2 u_sdf_map_size;\nuniform mat4 u_ModelMatrix;\nuniform mat4 u_Mvp;\nuniform float u_raisingHeight: 0.0;\n\nvarying vec2 v_uv;\nvarying float v_gamma_scale;\nvarying vec4 v_color;\nvarying float v_fontScale;\n\nvarying mat4 styleMappingMat; // \u7528\u4e8e\u5c06\u5728\u9876\u70b9\u7740\u8272\u5668\u4e2d\u8ba1\u7b97\u597d\u7684\u6837\u5f0f\u503c\u4f20\u9012\u7ed9\u7247\u5143\n\nuniform float u_opacity : 1;\nuniform float u_stroke_width : 2;\nuniform vec4 u_stroke_color : [0.0, 0.0, 0.0, 0.0];\n\n#pragma include "styleMapping"\n#pragma include "styleMappingCalOpacity"\n#pragma include "styleMappingCalStrokeWidth"\n\n#pragma include "projection"\n#pragma include "picking"\n\nvoid main() {\n  // cal style mapping - \u6570\u636e\u7eb9\u7406\u6620\u5c04\u90e8\u5206\u7684\u8ba1\u7b97\n   styleMappingMat = mat4(\n    0.0, 0.0, 0.0, 0.0, // opacity - strokeOpacity - strokeWidth - empty\n    0.0, 0.0, 0.0, 0.0, // strokeR - strokeG - strokeB - strokeA\n    0.0, 0.0, 0.0, 0.0, // offsets[0] - offsets[1]\n    0.0, 0.0, 0.0, 0.0\n  );\n\n  float rowCount = u_cellTypeLayout[0][0];    // \u5f53\u524d\u7684\u6570\u636e\u7eb9\u7406\u6709\u51e0\u884c\n  float columnCount = u_cellTypeLayout[0][1]; // \u5f53\u770b\u5230\u6570\u636e\u7eb9\u7406\u6709\u51e0\u5217\n  float columnWidth = 1.0/columnCount;  // \u5217\u5bbd\n  float rowHeight = 1.0/rowCount;       // \u884c\u9ad8\n  float cellCount = calCellCount(); // opacity - strokeOpacity - strokeWidth - stroke - offsets\n  float id = a_vertexId; // \u7b2cn\u4e2a\u9876\u70b9\n  float cellCurrentRow = floor(id * cellCount / columnCount) + 1.0; // \u8d77\u59cb\u70b9\u5728\u7b2c\u51e0\u884c\n  float cellCurrentColumn = mod(id * cellCount, columnCount) + 1.0; // \u8d77\u59cb\u70b9\u5728\u7b2c\u51e0\u5217\n  \n  // cell \u56fa\u5b9a\u987a\u5e8f opacity -> strokeOpacity -> strokeWidth -> stroke ... \n  // \u6309\u987a\u5e8f\u4ece cell \u4e2d\u53d6\u503c\u3001\u82e5\u6ca1\u6709\u5219\u81ea\u52a8\u5f80\u4e0b\u53d6\u503c\n  float textureOffset = 0.0; // \u5728 cell \u4e2d\u53d6\u503c\u7684\u504f\u79fb\u91cf\n\n  vec2 opacityAndOffset = calOpacityAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);\n  styleMappingMat[0][0] = opacityAndOffset.r;\n  textureOffset = opacityAndOffset.g;\n\n   vec2 strokeWidthAndOffset = calStrokeWidthAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);\n  styleMappingMat[0][2] = strokeWidthAndOffset.r;\n  textureOffset = strokeWidthAndOffset.g;\n\n  vec4 textrueStroke = vec4(-1.0, -1.0, -1.0, -1.0);\n  if(hasStroke()) {\n    vec2 valueRPos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);\n    styleMappingMat[1][0] = pos2value(valueRPos, columnWidth, rowHeight); // R\n    textureOffset += 1.0;\n\n    vec2 valueGPos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);\n    styleMappingMat[1][1] = pos2value(valueGPos, columnWidth, rowHeight); // G\n    textureOffset += 1.0;\n\n    vec2 valueBPos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);\n    styleMappingMat[1][2] = pos2value(valueBPos, columnWidth, rowHeight); // B\n    textureOffset += 1.0;\n\n    vec2 valueAPos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);\n    styleMappingMat[1][3] = pos2value(valueAPos, columnWidth, rowHeight); // A\n    textureOffset += 1.0;\n  } else {\n    if(u_stroke_color == vec4(0.0)) {\n      styleMappingMat[1][0] = v_color.r;\n      styleMappingMat[1][1] = v_color.g;\n      styleMappingMat[1][2] = v_color.b;\n      styleMappingMat[1][3] = v_color.a;\n    } else {\n      styleMappingMat[1][0] = u_stroke_color.r;\n      styleMappingMat[1][1] = u_stroke_color.g;\n      styleMappingMat[1][2] = u_stroke_color.b;\n      styleMappingMat[1][3] = u_stroke_color.a;\n    }\n  }\n  \n  // cal style mapping - \u6570\u636e\u7eb9\u7406\u6620\u5c04\u90e8\u5206\u7684\u8ba1\u7b97\n\n  v_color = a_Color;\n  v_uv = a_tex / u_sdf_map_size;\n\n  // \u6587\u672c\u7f29\u653e\u6bd4\u4f8b\n  float fontScale = a_Size / FONT_SIZE;\n  v_fontScale = fontScale;\n\n  vec4 project_pos = project_position(vec4(a_Position, 1.0));\n  // vec4 projected_position  = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));\n\n  highp float angle_sin = sin(a_Rotate);\n  highp float angle_cos = cos(a_Rotate);\n  mat2 rotation_matrix = mat2(angle_cos, -1.0 * angle_sin, angle_sin, angle_cos);\n  \n  // gl_Position = vec4(projected_position.xy / projected_position.w + rotation_matrix * a_textOffsets * fontScale / u_ViewportSize * 2.0 * u_DevicePixelRatio, 0.0, 1.0);\n\n  float raiseHeight = u_raisingHeight;\n  if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {\n    float mapboxZoomScale = 4.0/pow(2.0, 21.0 - u_Zoom);\n    raiseHeight = u_raisingHeight * mapboxZoomScale;\n  }\n\n  vec4 projected_position;\n  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x\n   projected_position  = u_Mvp * (vec4(a_Position.xyz + vec3(0.0, 0.0, raiseHeight), 1.0));\n  } else { // else\n   projected_position  = project_common_position_to_clipspace(vec4(project_pos.xyz + vec3(0.0, 0.0, raiseHeight), 1.0));\n  }\n\n  gl_Position = vec4(\n    projected_position.xy / projected_position.w + rotation_matrix * a_textOffsets * fontScale / u_ViewportSize * 2.0 * u_DevicePixelRatio, 0.0, 1.0);\n  v_gamma_scale = gl_Position.w;\n  setPickingColor(a_PickingColor);\n\n}\n';function lk(t){var e=this,n=t.id,r=[],i=[];if(!e.glyphInfoMap||!e.glyphInfoMap[n])return{vertices:[],indices:[],size:7};var o=e.glyphInfoMap[n].centroid,a=2===o.length?[o[0],o[1],0]:o;return e.glyphInfoMap[n].glyphQuads.forEach((function(t,e){r.push.apply(r,Object(M["a"])(a).concat([t.tex.x,t.tex.y+t.tex.height,t.tl.x,t.tl.y],Object(M["a"])(a),[t.tex.x+t.tex.width,t.tex.y+t.tex.height,t.tr.x,t.tr.y],Object(M["a"])(a),[t.tex.x+t.tex.width,t.tex.y,t.br.x,t.br.y],Object(M["a"])(a),[t.tex.x,t.tex.y,t.bl.x,t.bl.y])),i.push(0+4*e,1+4*e,2+4*e,2+4*e,3+4*e,0+4*e)})),{vertices:r,indices:i,size:7}}var fk=function(t){Object(st["a"])(n,t);var e=ak(n);function n(){var t;Object(et["a"])(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return t=e.call.apply(e,[this].concat(i)),Object(Ar["a"])(Object(ft["a"])(t),"glyphInfoMap",{}),Object(Ar["a"])(Object(ft["a"])(t),"currentZoom",-1),Object(Ar["a"])(Object(ft["a"])(t),"textureHeight",0),Object(Ar["a"])(Object(ft["a"])(t),"textCount",0),Object(Ar["a"])(Object(ft["a"])(t),"preTextStyle",{}),Object(Ar["a"])(Object(ft["a"])(t),"mapping",Object(mi["a"])(_i.a.mark((function e(){return _i.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.initGlyph(),t.updateTexture(),e.next=4,t.reBuildModel();case 4:case"end":return e.stop()}}),e)})))),t}return Object(nt["a"])(n,[{key:"getUninforms",value:function(){var t=this.layer.getLayerConfig(),e=t.opacity,n=void 0===e?1:e,r=t.stroke,i=void 0===r?"#fff":r,o=t.strokeWidth,a=void 0===o?0:o,s=t.textAnchor,u=void 0===s?"center":s,c=t.textOffset,l=t.textAllowOverlap,f=void 0!==l&&l,h=t.halo,p=void 0===h?.5:h,d=t.gamma,v=void 0===d?2:d,g=t.raisingHeight,m=void 0===g?0:g,y=this.fontService,_=y.canvas,b=y.mapping;if(b&&Object.keys(b).length!==this.textCount&&_&&(this.updateTexture(),this.textCount=Object.keys(b).length),this.preTextStyle={textAnchor:u,textAllowOverlap:f,textOffset:c},this.dataTextureTest&&this.dataTextureNeedUpdate({opacity:n,strokeWidth:a,stroke:i})){this.judgeStyleAttributes({opacity:n,strokeWidth:a,stroke:i});var x=this.layer.getEncodedData(),w=this.calDataFrame(this.cellLength,x,this.cellProperties),E=w.data,S=w.width,O=w.height;this.rowCount=O,this.dataTexture=this.cellLength>0&&E.length>0?this.createTexture2D({flipY:!0,data:E,format:Rp.LUMINANCE,type:Rp.FLOAT,width:S,height:O}):this.createTexture2D({flipY:!0,data:[1],format:Rp.LUMINANCE,type:Rp.FLOAT,width:1,height:1})}return{u_dataTexture:this.dataTexture,u_cellTypeLayout:this.getCellTypeLayout(),u_raisingHeight:Number(m),u_opacity:Object(K["isNumber"])(n)?n:1,u_stroke_width:Object(K["isNumber"])(a)?a:1,u_stroke_color:this.getStrokeColor(i),u_sdf_map:this.texture,u_halo_blur:p,u_gamma_scale:v,u_sdf_map_size:[(null===_||void 0===_?void 0:_.width)||1,(null===_||void 0===_?void 0:_.height)||1]}}},{key:"initModels",value:function(){var t=Object(mi["a"])(_i.a.mark((function t(){var e,n,r,i,o,a;return _i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.bindEvent(),this.extent=this.textExtent(),e=this.layer.getLayerConfig(),n=e.textAnchor,r=void 0===n?"center":n,i=e.textAllowOverlap,o=void 0===i||i,a=e.textOffset,this.preTextStyle={textAnchor:r,textAllowOverlap:o,textOffset:a},t.next=6,this.buildModels();case 6:return t.abrupt("return",t.sent);case 7:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"buildModels",value:function(){var t=Object(mi["a"])(_i.a.mark((function t(){var e,n,r,i,o,a,s,u;return _i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=this.layer.getLayerConfig(),n=e.mask,r=void 0!==n&&n,i=e.maskInside,o=void 0===i||i,a=e.textAllowOverlap,s=void 0!==a&&a,this.initGlyph(),this.updateTexture(),s||this.filterGlyphs(),t.next=6,this.layer.buildLayerModel({moduleName:"pointText",vertexShader:ck,fragmentShader:uk,triangulation:lk.bind(this),depth:{enable:!1},blend:this.getBlend(),stencil:gi(r,o)});case 6:return u=t.sent,t.abrupt("return",[u]);case 8:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"needUpdate",value:function(){var t=Object(mi["a"])(_i.a.mark((function t(){var e,n,r,i,o,a,s,u,c,l;return _i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e=this.layer.getLayerConfig(),n=e.textAllowOverlap,r=void 0!==n&&n,i=e.textAnchor,o=void 0===i?"center":i,a=e.textOffset,s=this.layer.getEncodedData(),JSON.stringify(a)===JSON.stringify(this.preTextStyle.textOffset)&&o===this.preTextStyle.textAnchor){t.next=6;break}return t.next=5,this.mapping();case 5:return t.abrupt("return",!0);case 6:if(!(s.length<5||r)){t.next=8;break}return t.abrupt("return",!1);case 8:if(u=this.mapService.getZoom(),c=this.mapService.getBounds(),l=br(this.extent,c),!(Math.abs(this.currentZoom-u)>1)&&l&&r===this.preTextStyle.textAllowOverlap){t.next=15;break}return t.next=14,this.reBuildModel();case 14:return t.abrupt("return",!0);case 15:return t.abrupt("return",!1);case 16:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"clearModels",value:function(){var t,e;null===(t=this.texture)||void 0===t||t.destroy(),null===(e=this.dataTexture)||void 0===e||e.destroy(),this.layer.off("remapping",this.mapping)}},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"rotate",type:ey.Attribute,descriptor:{name:"a_Rotate",buffer:{usage:Rp.DYNAMIC_DRAW,data:[],type:Rp.FLOAT},size:1,update:function(t){var e=t.rotate,n=void 0===e?0:e;return Array.isArray(n)?[n[0]]:[n]}}}),this.styleAttributeService.registerStyleAttribute({name:"textOffsets",type:ey.Attribute,descriptor:{name:"a_textOffsets",buffer:{usage:Rp.STATIC_DRAW,data:[],type:Rp.FLOAT},size:2,update:function(t,e,n){return[n[5],n[6]]}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:ey.Attribute,descriptor:{name:"a_Size",buffer:{usage:Rp.DYNAMIC_DRAW,data:[],type:Rp.FLOAT},size:1,update:function(t){var e=t.size,n=void 0===e?12:e;return Array.isArray(n)?[n[0]]:[n]}}}),this.styleAttributeService.registerStyleAttribute({name:"textUv",type:ey.Attribute,descriptor:{name:"a_tex",buffer:{usage:Rp.DYNAMIC_DRAW,data:[],type:Rp.FLOAT},size:2,update:function(t,e,n){return[n[3],n[4]]}}})}},{key:"bindEvent",value:function(){this.layer.isTileLayer||this.layer.on("remapping",this.mapping)}},{key:"textExtent",value:function(){var t=this.mapService.getBounds();return _r(t,.5)}},{key:"initTextFont",value:function(){var t=this.layer.getLayerConfig(),e=t.fontWeight,n=void 0===e?"400":e,r=t.fontFamily,i=void 0===r?"sans-serif":r,o=this.layer.getEncodedData(),a=[];o.forEach((function(t){var e=t.shape,n=void 0===e?"":e;n=n.toString();var r,i=rk(n);try{for(i.s();!(r=i.n()).done;){var o=r.value;-1===a.indexOf(o)&&a.push(o)}}catch(s){i.e(s)}finally{i.f()}})),this.fontService.setFontOptions({characterSet:a,fontWeight:n,fontFamily:i,iconfont:!1})}},{key:"initIconFontTex",value:function(){var t=this.layer.getLayerConfig(),e=t.fontWeight,n=void 0===e?"400":e,r=t.fontFamily,i=void 0===r?"sans-serif":r,o=this.layer.getEncodedData(),a=[];o.forEach((function(t){var e=t.shape,n=void 0===e?"":e;n="".concat(n),-1===a.indexOf(n)&&a.push(n)})),this.fontService.setFontOptions({characterSet:a,fontWeight:n,fontFamily:i,iconfont:!0})}},{key:"generateGlyphLayout",value:function(t){var e=this,n=this.fontService.mapping,r=this.layer.getLayerConfig(),i=r.spacing,o=void 0===i?2:i,a=r.textAnchor,s=void 0===a?"center":a,u=r.textOffset,c=this.layer.getEncodedData();this.glyphInfo=c.map((function(r){var i=r.shape,a=void 0===i?"":i,c=r.id,l=r.size,f=void 0===l?1:l,h=ek(a.toString(),n,f,s,"left",o,u||r.textOffset||[0,0],t),p=nk(h,u,!1);return r.shaping=h,r.glyphQuads=p,r.centroid=Sr(r.coordinates),r.originCentroid="GAODE2.x"===r.version?Sr(r.originCoordinates):r.originCentroid=r.centroid,e.glyphInfoMap[c]={shaping:h,glyphQuads:p,centroid:Sr(r.coordinates)},r}))}},{key:"filterGlyphs",value:function(){var t=this,e=this.layer.getLayerConfig(),n=e.padding,r=void 0===n?[4,4]:n,i=e.textAllowOverlap,o=void 0!==i&&i;if(!o){this.glyphInfoMap={},this.currentZoom=this.mapService.getZoom(),this.extent=this.textExtent();var a=this.rendererService.getViewportSize(),s=a.width,u=a.height,c=new ZA(s,u),l=this.glyphInfo.filter((function(e){var n=e.shaping,i=e.id,o=void 0===i?0:i,a="GAODE2.x"===e.version?e.originCentroid:e.centroid,s=e.size,u=s/16,l=t.mapService.lngLatToContainer(a),f=c.placeCollisionBox({x1:n.left*u-r[0],x2:n.right*u+r[0],y1:n.top*u-r[1],y2:n.bottom*u+r[1],anchorPointX:l.x,anchorPointY:l.y}),h=f.box;return!(!h||!h.length)&&(c.insertCollisionBox(h,o),!0)}));l.forEach((function(e){t.glyphInfoMap[e.id]=e}))}}},{key:"initGlyph",value:function(){var t=this.layer.getLayerConfig(),e=t.iconfont,n=void 0!==e&&e;n?this.initIconFontTex():this.initTextFont(),this.generateGlyphLayout(n)}},{key:"updateTexture",value:function(){var t=this.rendererService.createTexture2D,e=this.fontService.canvas;this.textureHeight=e.height,this.texture&&this.texture.destroy(),this.texture=t({data:e,mag:Rp.LINEAR,min:Rp.LINEAR,width:e.width,height:e.height})}},{key:"reBuildModel",value:function(){var t=Object(mi["a"])(_i.a.mark((function t(){var e,n,r,i,o,a;return _i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=this.layer.getLayerConfig(),n=e.mask,r=void 0!==n&&n,i=e.maskInside,o=void 0===i||i,this.filterGlyphs(),t.next=4,this.layer.buildLayerModel({moduleName:"pointText",vertexShader:ck,fragmentShader:uk,triangulation:lk.bind(this),depth:{enable:!1},blend:this.getBlend(),stencil:gi(r,o)});case 4:a=t.sent,this.layer.models=[a];case 6:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()}]),n}(db);function hk(t,e){var n="undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=pk(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n["return"]||n["return"]()}finally{if(s)throw o}}}}function pk(t,e){if(t){if("string"===typeof t)return dk(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?dk(t,e):void 0}}function dk(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function vk(t){var e=gk();return function(){var n,r=Object(ct["a"])(t);if(e){var i=Object(ct["a"])(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(ut["a"])(this,n)}}function gk(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}var mk='#define SDF_PX 8.0\n#define EDGE_GAMMA 0.105\n#define FONT_SIZE 48.0\nuniform sampler2D u_sdf_map;\nuniform float u_gamma_scale : 0.5;\n// uniform float u_font_size : 24.0;\nuniform float u_opacity : 1.0;\nuniform vec4 u_stroke_color : [0, 0, 0, 1];\nuniform float u_stroke_width : 2.0;\nuniform float u_halo_blur : 0.5;\nuniform float u_DevicePixelRatio;\n\nvarying vec4 v_color;\nvarying vec2 v_uv;\nvarying float v_gamma_scale;\nvarying float v_fontScale;\n\n#pragma include "picking"\nvoid main() {\n  // get sdf from atlas\n  float dist = texture2D(u_sdf_map, v_uv).a;\n\n  lowp float buff = (6.0 - u_stroke_width / v_fontScale) / SDF_PX;\n  highp float gamma = (u_halo_blur * 1.19 / SDF_PX + EDGE_GAMMA) / (v_fontScale * u_gamma_scale) / 1.0;\n\n  highp float gamma_scaled = gamma * v_gamma_scale;\n\n  highp float alpha = smoothstep(buff - gamma_scaled, buff + gamma_scaled, dist);\n  \n  gl_FragColor = mix(vec4(v_color.rgb, v_color.a * u_opacity), vec4(u_stroke_color.rgb, u_stroke_color.a * u_opacity), smoothstep(0., 0.5, 1. - dist));\n  gl_FragColor.a= gl_FragColor.a * alpha;\n  gl_FragColor = filterColor(gl_FragColor);\n}\n',yk='#define SDF_PX 8.0\n#define EDGE_GAMMA 0.105\n#define FONT_SIZE 24.0\nattribute vec3 a_Position;\nattribute vec2 a_tex;\nattribute vec2 a_textOffsets;\nattribute vec4 a_Color;\nattribute float a_Size;\n\nuniform vec2 u_sdf_map_size;\nuniform mat4 u_ModelMatrix;\nuniform mat4 u_Mvp;\n\nvarying vec2 v_uv;\nvarying float v_gamma_scale;\nvarying vec4 v_color;\nvarying float v_fontScale;\n\nuniform float u_opacity : 1;\nuniform float u_stroke_width : 2;\nuniform vec4 u_stroke_color : [0.0, 0.0, 0.0, 0.0];\n\n#pragma include "projection"\n#pragma include "picking"\n\nvoid main() {\n  v_color = a_Color;\n  v_uv = a_tex / u_sdf_map_size;\n\n  // \u6587\u672c\u7f29\u653e\u6bd4\u4f8b\n  float fontScale = a_Size / FONT_SIZE;\n  v_fontScale = fontScale;\n\n  vec4 project_pos = project_position(vec4(a_Position, 1.0));\n\n  vec4 projected_position;\n  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x\n   projected_position  = u_Mvp * (vec4(a_Position.xyz, 1.0));\n  } else { // else\n   projected_position  = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));\n  }\n\n  gl_Position = vec4(\n    projected_position.xy / projected_position.w + a_textOffsets * fontScale / u_ViewportSize * 2.0 * u_DevicePixelRatio, 0.0, 1.0);\n  v_gamma_scale = gl_Position.w;\n  setPickingColor(a_PickingColor);\n\n}\n',_k="#define SDF_PX 8.0\n#define EDGE_GAMMA 0.105\n#define FONT_SIZE 48.0\nuniform sampler2D u_sdf_map;\nuniform float u_gamma_scale : 0.5;\n\nuniform float u_opacity : 1.0;\nuniform vec4 u_stroke_color : [0, 0, 0, 1];\nuniform float u_stroke_width : 2.0;\nuniform float u_halo_blur : 0.5;\nuniform float u_DevicePixelRatio;\n\nvarying vec2 v_uv;\nvarying float v_gamma_scale;\nvarying float v_fontScale;\nuniform vec4 u_color;\n\nvoid main() {\n  // get sdf from atlas\n  float dist = texture2D(u_sdf_map, v_uv).a;\n\n  lowp float buff = (6.0 - u_stroke_width / v_fontScale) / SDF_PX;\n  highp float gamma = (u_halo_blur * 1.19 / SDF_PX + EDGE_GAMMA) / (v_fontScale * u_gamma_scale) / 1.0;\n\n  highp float gamma_scaled = gamma * v_gamma_scale;\n\n  highp float alpha = smoothstep(buff - gamma_scaled, buff + gamma_scaled, dist);\n  \n  gl_FragColor = mix(vec4(u_color.rgb, u_color.a * u_opacity), vec4(u_stroke_color.rgb, u_stroke_color.a * u_opacity), smoothstep(0., 0.5, 1. - dist));\n  gl_FragColor.a= gl_FragColor.a * alpha;\n}\n",bk='#define FONT_SIZE 24.0\nattribute vec3 a_Position;\nattribute vec2 a_tex;\nattribute vec2 a_textOffsets;\n\nuniform vec2 u_sdf_map_size;\nuniform mat4 u_ModelMatrix;\nuniform mat4 u_Mvp;\n\nuniform float u_size;\n\nvarying vec2 v_uv;\nvarying float v_gamma_scale;\nvarying float v_fontScale;\n\n#pragma include "projection"\n\nvoid main() {\n  v_uv = a_tex / u_sdf_map_size;\n\n  // \u6587\u672c\u7f29\u653e\u6bd4\u4f8b\n  float fontScale = u_size / FONT_SIZE;\n  v_fontScale = fontScale;\n\n  vec4 project_pos = project_position(vec4(a_Position, 1.0));\n\n  vec4 projected_position;\n  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x\n   projected_position  = u_Mvp * (vec4(a_Position.xyz, 1.0));\n  } else { // else\n   projected_position  = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));\n  }\n\n  gl_Position = vec4(\n    projected_position.xy / projected_position.w + a_textOffsets * fontScale / u_ViewportSize * 2.0 * u_DevicePixelRatio, 0.0, 1.0);\n  v_gamma_scale = gl_Position.w;\n\n}\n';function xk(t){var e=this,n=t.id,r=[],i=[];if(!e.glyphInfoMap||!e.glyphInfoMap[n])return{vertices:[],indices:[],size:7};var o=e.glyphInfoMap[n].centroid,a=2===o.length?[o[0],o[1],0]:o;return e.glyphInfoMap[n].glyphQuads.forEach((function(t,e){r.push.apply(r,Object(M["a"])(a).concat([t.tex.x,t.tex.y+t.tex.height,t.tl.x,t.tl.y],Object(M["a"])(a),[t.tex.x+t.tex.width,t.tex.y+t.tex.height,t.tr.x,t.tr.y],Object(M["a"])(a),[t.tex.x+t.tex.width,t.tex.y,t.br.x,t.br.y],Object(M["a"])(a),[t.tex.x,t.tex.y,t.bl.x,t.bl.y])),i.push(0+4*e,1+4*e,2+4*e,2+4*e,3+4*e,0+4*e)})),{vertices:r,indices:i,size:7}}var wk=function(t){Object(st["a"])(n,t);var e=vk(n);function n(){var t;Object(et["a"])(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return t=e.call.apply(e,[this].concat(i)),Object(Ar["a"])(Object(ft["a"])(t),"glyphInfoMap",{}),Object(Ar["a"])(Object(ft["a"])(t),"currentZoom",-1),Object(Ar["a"])(Object(ft["a"])(t),"textureHeight",0),Object(Ar["a"])(Object(ft["a"])(t),"textCount",0),Object(Ar["a"])(Object(ft["a"])(t),"preTextStyle",{}),Object(Ar["a"])(Object(ft["a"])(t),"mapping",(function(){t.initGlyph(),t.updateTexture(),t.filterGlyphs(),t.reBuildModel()})),t}return Object(nt["a"])(n,[{key:"getUninforms",value:function(){var t=this.layer.getLayerConfig(),e=t.opacity,n=void 0===e?1:e,r=t.stroke,i=void 0===r?"#fff":r,o=t.strokeWidth,a=void 0===o?0:o,s=t.textAnchor,u=void 0===s?"center":s,c=t.textAllowOverlap,l=void 0!==c&&c,f=t.halo,h=void 0===f?.5:f,p=t.gamma,d=void 0===p?2:p,v=t.usage,g=t.color,m=void 0===g?"#fff":g,y=t.size,_=void 0===y?1:y,b=this.fontService,x=b.canvas,w=b.mapping;return Object.keys(w).length!==this.textCount&&(this.updateTexture(),this.textCount=Object.keys(w).length),this.preTextStyle={textAnchor:u,textAllowOverlap:l},{u_opacity:Object(K["isNumber"])(n)?n:1,u_stroke_width:Object(K["isNumber"])(a)?a:1,u_stroke_color:this.getStrokeColor(i),u_sdf_map:this.texture,u_halo_blur:h,u_gamma_scale:d,u_sdf_map_size:[x.width,x.height],u_color:"basemap"===v?li(m):[0,0,0,0],u_size:"basemap"===v?_:1}}},{key:"initModels",value:function(){var t=Object(mi["a"])(_i.a.mark((function t(){var e,n,r,i,o;return _i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.extent=this.textExtent(),e=this.layer.getLayerConfig(),n=e.textAnchor,r=void 0===n?"center":n,i=e.textAllowOverlap,o=void 0===i||i,this.preTextStyle={textAnchor:r,textAllowOverlap:o},t.next=5,this.buildModels();case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"buildModels",value:function(){var t=Object(mi["a"])(_i.a.mark((function t(){var e,n,r;return _i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.mapping(),e=this.layer.getLayerConfig(),n=e.usage,t.next=4,this.layer.buildLayerModel({moduleName:"pointTileText_"+n,vertexShader:"basemap"===n?bk:yk,fragmentShader:"basemap"===n?_k:mk,triangulation:xk.bind(this),depth:{enable:!1},blend:this.getBlend(),pick:"basemap"!==n});case 4:return r=t.sent,t.abrupt("return",[r]);case 6:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"clearModels",value:function(){var t;null===(t=this.texture)||void 0===t||t.destroy()}},{key:"registerBuiltinAttributes",value:function(){var t=this.layer.getLayerConfig(),e=t.usage;this.styleAttributeService.registerStyleAttribute({name:"textOffsets",type:ey.Attribute,descriptor:{name:"a_textOffsets",buffer:{usage:Rp.STATIC_DRAW,data:[],type:Rp.FLOAT},size:2,update:function(t,e,n){return[n[5],n[6]]}}}),"basemap"!==e&&this.styleAttributeService.registerStyleAttribute({name:"size",type:ey.Attribute,descriptor:{name:"a_Size",buffer:{usage:Rp.DYNAMIC_DRAW,data:[],type:Rp.FLOAT},size:1,update:function(t){var e=t.size,n=void 0===e?12:e;return Array.isArray(n)?[n[0]]:[n]}}}),this.styleAttributeService.registerStyleAttribute({name:"textUv",type:ey.Attribute,descriptor:{name:"a_tex",buffer:{usage:Rp.DYNAMIC_DRAW,data:[],type:Rp.FLOAT},size:2,update:function(t,e,n){return[n[3],n[4]]}}})}},{key:"textExtent",value:function(){var t=this.mapService.getBounds();return _r(t,.5)}},{key:"initTextFont",value:function(){var t=this.layer.getLayerConfig(),e=t.fontWeight,n=void 0===e?"400":e,r=t.fontFamily,i=void 0===r?"sans-serif":r,o=this.layer.getEncodedData(),a=[];o.forEach((function(t){var e=t.shape,n=void 0===e?"":e;n=n.toString();var r,i=hk(n);try{for(i.s();!(r=i.n()).done;){var o=r.value;-1===a.indexOf(o)&&a.push(o)}}catch(s){i.e(s)}finally{i.f()}})),this.fontService.setFontOptions({characterSet:a,fontWeight:n,fontFamily:i,iconfont:!1})}},{key:"generateGlyphLayout",value:function(){var t=this,e=this.fontService.mapping,n=this.layer.getLayerConfig(),r=n.spacing,i=void 0===r?2:r,o=n.textAnchor,a=void 0===o?"center":o,s=this.layer.getEncodedData();this.glyphInfo=s.map((function(n){var r=n.shape,o=void 0===r?"":r,s=n.id,u=n.size,c=void 0===u?1:u,l=n.textOffset,f=void 0===l?[0,0]:l,h=ek(o.toString(),e,c,a,"left",i,f,!1),p=nk(h,f,!1);return n.shaping=h,n.glyphQuads=p,n.centroid=Sr(n.coordinates),n.originCentroid="GAODE2.x"===n.version?Sr(n.originCoordinates):n.originCentroid=n.centroid,t.glyphInfoMap[s]={shaping:h,glyphQuads:p,centroid:Sr(n.coordinates)},n}))}},{key:"filterGlyphs",value:function(){var t=this,e=this.layer.getLayerConfig(),n=e.padding,r=void 0===n?[4,4]:n,i=e.textAllowOverlap,o=void 0!==i&&i;if(!o){this.glyphInfoMap={},this.currentZoom=this.mapService.getZoom(),this.extent=this.textExtent();var a=this.rendererService.getViewportSize(),s=a.width,u=a.height,c=new ZA(s,u),l=this.glyphInfo.filter((function(e){var n=e.shaping,i=e.id,o=void 0===i?0:i,a="GAODE2.x"===e.version?e.originCentroid:e.centroid,s=e.size,u=s/24,l=t.mapService.lngLatToContainer(a),f=c.placeCollisionBox({x1:n.left*u-r[0],x2:n.right*u+r[0],y1:n.top*u-r[1],y2:n.bottom*u+r[1],anchorPointX:l.x,anchorPointY:l.y}),h=f.box;return!(!h||!h.length)&&(c.insertCollisionBox(h,o),!0)}));l.forEach((function(e){t.glyphInfoMap[e.id]=e}))}}},{key:"initGlyph",value:function(){this.initTextFont(),this.generateGlyphLayout()}},{key:"updateTexture",value:function(){var t=this.rendererService.createTexture2D,e=this.fontService.canvas;this.textureHeight=e.height,this.texture&&this.texture.destroy(),this.texture=t({data:e,mag:Rp.LINEAR,min:Rp.LINEAR,width:e.width,height:e.height})}},{key:"reBuildModel",value:function(){var t=Object(mi["a"])(_i.a.mark((function t(){var e,n,r;return _i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=this.layer.getLayerConfig(),n=e.usage,this.filterGlyphs(),t.next=4,this.layer.buildLayerModel({moduleName:"pointTileText_"+n,vertexShader:"basemap"===n?bk:yk,fragmentShader:"basemap"===n?_k:mk,triangulation:xk.bind(this),depth:{enable:!1},blend:this.getBlend(),pick:"basemap"!==n});case 4:return r=t.sent,t.abrupt("return",[r]);case 6:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()}]),n}(db);function Ek(t){var e=Sk();return function(){var n,r=Object(ct["a"])(t);if(e){var i=Object(ct["a"])(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(ut["a"])(this,n)}}function Sk(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}var Ok="uniform float u_additive;\n\nuniform float u_opacity : 1;\nuniform float u_stroke_opacity : 1;\nuniform float u_stroke_width : 2;\nuniform vec4 u_stroke_color : [0.0, 0.0, 0.0, 0.0];\n\nvarying vec4 v_data;\nvarying vec4 v_color;\nvarying float v_radius;\n\n#pragma include \"sdf_2d\"\n#pragma include \"picking\"\n\nvoid main() {\n  int shape = int(floor(v_data.w + 0.5));\n\n\n  lowp float antialiasblur = v_data.z;\n  float r = v_radius / (v_radius + u_stroke_width);\n\n  float outer_df;\n  float inner_df;\n  // 'circle', 'triangle', 'square', 'pentagon', 'hexagon', 'octogon', 'hexagram', 'rhombus', 'vesica'\n  if (shape == 0) {\n    outer_df = sdCircle(v_data.xy, 1.0);\n    inner_df = sdCircle(v_data.xy, r);\n  } else if (shape == 1) {\n    outer_df = sdEquilateralTriangle(1.1 * v_data.xy);\n    inner_df = sdEquilateralTriangle(1.1 / r * v_data.xy);\n  } else if (shape == 2) {\n    outer_df = sdBox(v_data.xy, vec2(1.));\n    inner_df = sdBox(v_data.xy, vec2(r));\n  } else if (shape == 3) {\n    outer_df = sdPentagon(v_data.xy, 0.8);\n    inner_df = sdPentagon(v_data.xy, r * 0.8);\n  } else if (shape == 4) {\n    outer_df = sdHexagon(v_data.xy, 0.8);\n    inner_df = sdHexagon(v_data.xy, r * 0.8);\n  } else if (shape == 5) {\n    outer_df = sdOctogon(v_data.xy, 1.0);\n    inner_df = sdOctogon(v_data.xy, r);\n  } else if (shape == 6) {\n    outer_df = sdHexagram(v_data.xy, 0.52);\n    inner_df = sdHexagram(v_data.xy, r * 0.52);\n  } else if (shape == 7) {\n    outer_df = sdRhombus(v_data.xy, vec2(1.0));\n    inner_df = sdRhombus(v_data.xy, vec2(r));\n  } else if (shape == 8) {\n    outer_df = sdVesica(v_data.xy, 1.1, 0.8);\n    inner_df = sdVesica(v_data.xy, r * 1.1, r * 0.8);\n  }\n\n\n  float opacity_t = smoothstep(0.0, antialiasblur, outer_df);\n\n  float color_t = u_stroke_width < 0.01 ? 0.0 : smoothstep(\n    antialiasblur,\n    0.0,\n    inner_df\n  );\n\n  if(u_stroke_width < 0.01) {\n    gl_FragColor = vec4(v_color.rgb, v_color.a * u_opacity);\n  } else {\n    gl_FragColor = mix(vec4(v_color.rgb, v_color.a * u_opacity), u_stroke_color * u_stroke_opacity, color_t);\n  }\n\n  if(u_additive > 0.0) {\n    gl_FragColor *= opacity_t;\n    gl_FragColor = filterColorAlpha(gl_FragColor, gl_FragColor.a);\n  } else {\n    gl_FragColor.a *= opacity_t;\n    gl_FragColor = filterColor(gl_FragColor);\n  }\n}\n",Ck='attribute vec4 a_Color;\nattribute vec3 a_Position;\nattribute vec3 a_Extrude;\nattribute float a_Size;\nattribute float a_Shape;\n\nuniform mat4 u_ModelMatrix;\nuniform mat4 u_Mvp;\n\n// uniform vec2 u_tileOrigin;\n// uniform float u_coord;\n\nvarying vec4 v_data;\nvarying vec4 v_color;\nvarying float v_radius;\n\nuniform float u_opacity : 1;\nuniform float u_stroke_opacity : 1;\nuniform float u_stroke_width : 2;\nuniform vec4 u_stroke_color : [0.0, 0.0, 0.0, 0.0];\n\n#pragma include "projection"\n#pragma include "picking"\n\nvoid main() {\n  vec3 extrude = a_Extrude;\n  float shape_type = a_Shape;\n  float newSize = setPickingSize(a_Size);\n\n  // cal style mapping\n\n  v_color = a_Color;\n  v_radius = newSize;\n\n  // anti-alias\n  //  float antialiased_blur = -max(u_blur, antialiasblur);\n  float antialiasblur = -max(2.0 / u_DevicePixelRatio / a_Size, 0.0);\n\n  vec2 offset = (extrude.xy * (newSize + u_stroke_width));\n  offset = project_pixel(offset);\n\n  v_data = vec4(extrude.x, extrude.y, antialiasblur,shape_type);\n\n  vec4 project_pos = project_position(vec4(a_Position.xy, 0.0, 1.0));\n\n  if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {\n    float mapboxZoomScale = 4.0/pow(2.0, 21.0 - u_Zoom);\n  }\n\n// if(u_coord > 0.0) {\n  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x\n    gl_Position = u_Mvp * vec4(project_pos.xy + offset, 0.0, 1.0);\n  } else {\n    gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, 0.0, 1.0));\n  }\n// } else {\n\n  // vec2 pointPos = a_Position.xy;\n  // vec4 world = vec4(project_mvt_offset_position(vec4(u_tileOrigin, 0.0, 1.0)).xyz, 1.0); // \u74e6\u7247\u8d77\u59cb\u70b9\u7684\u4e16\u754c\u5750\u6807\n\n  // vec2 pointOffset =  pointPos *  pow(2.0, u_Zoom); // \u74e6\u7247\u5185\u7684\u70b9\u7684\u504f\u79fb\u5750\u6807\n  \n  // world.xy += offset;\n  // world.xy += pointOffset;\n\n  // if (u_CoordinateSystem == COORDINATE_SYSTEM_METER_OFFSET || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {\n  //   // Needs to be divided with project_uCommonUnitsPerMeter\n  //   world.w *= u_PixelsPerMeter.z;\n  // }\n\n  // gl_Position = u_ViewProjectionMatrix * world + u_ViewportCenterProjection;\n// }\n\n \n  setPickingColor(a_PickingColor);\n\n\n}\n',Tk=function(t){Object(st["a"])(n,t);var e=Ek(n);function n(){return Object(et["a"])(this,n),e.apply(this,arguments)}return Object(nt["a"])(n,[{key:"getUninforms",value:function(){var t=this.layer.getLayerConfig(),e=t.opacity,n=void 0===e?1:e,r=t.strokeOpacity,i=void 0===r?1:r,o=t.strokeWidth,a=void 0===o?0:o,s=t.stroke,u=void 0===s?"rgba(0,0,0,0)":s,c=t.blend;return{u_additive:"additive"===c?1:0,u_opacity:Number(n),u_stroke_opacity:Number(i),u_stroke_width:Number(a),u_stroke_color:this.getStrokeColor(u)}}},{key:"getAttribute",value:function(){return this.styleAttributeService.createAttributesAndIndices(this.layer.getEncodedData(),zb)}},{key:"initModels",value:function(){var t=Object(mi["a"])(_i.a.mark((function t(){return _i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.buildModels();case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"buildModels",value:function(){var t=Object(mi["a"])(_i.a.mark((function t(){var e,n,r,i,o;return _i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=this.layer.getLayerConfig(),n=e.workerEnabled,r=void 0!==n&&n,i=e.usage,this.layer.triangulation=zb,t.next=4,this.layer.buildLayerModel({moduleName:"pointTile_"+i,vertexShader:Ck,fragmentShader:Ok,triangulation:zb,depth:{enable:!1},cull:{enable:!0,face:Uc(this.mapService.version)},blend:this.getBlend(),workerEnabled:r,workerOptions:{modelType:"pointTile"},pick:"basemap"!==i});case 4:return o=t.sent,t.abrupt("return",[o]);case 6:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"clearModels",value:function(){}},{key:"registerBuiltinAttributes",value:function(){var t=this;this.styleAttributeService.registerStyleAttribute({name:"extrude",type:ey.Attribute,descriptor:{name:"a_Extrude",buffer:{usage:Rp.DYNAMIC_DRAW,data:[],type:Rp.FLOAT},size:3,update:function(t,e,n,r){var i=[1,1,0,-1,1,0,-1,-1,0,1,-1,0],o=r%4*3;return[i[o],i[o+1],i[o+2]]}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:ey.Attribute,descriptor:{name:"a_Size",buffer:{usage:Rp.DYNAMIC_DRAW,data:[],type:Rp.FLOAT},size:1,update:function(t){var e=t.size,n=void 0===e?5:e;return Array.isArray(n)?[n[0]]:[n]}}}),this.styleAttributeService.registerStyleAttribute({name:"shape",type:ey.Attribute,descriptor:{name:"a_Shape",buffer:{usage:Rp.DYNAMIC_DRAW,data:[],type:Rp.FLOAT},size:1,update:function(e){var n=e.shape,r=void 0===n?2:n,i=t.layer.getLayerConfig().shape2d,o=i.indexOf(r);return[o]}}})}}]),n}(db),Ak={fillImage:yA,fill:pA,radar:IA,image:EA,normal:kA,simplePoint:zA,extrude:sA,text:fk,tile:Tk,tileText:wk,earthFill:nA,earthExtrude:QT},kk=Ak;function Mk(t,e){var n="undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=Pk(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n["return"]||n["return"]()}finally{if(s)throw o}}}}function Pk(t,e){if(t){if("string"===typeof t)return Rk(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Rk(t,e):void 0}}function Rk(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function jk(t){var e=Ik();return function(){var n,r=Object(ct["a"])(t);if(e){var i=Object(ct["a"])(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(ut["a"])(this,n)}}function Ik(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}var Lk=function(t){Object(st["a"])(n,t);var e=jk(n);function n(){var t;Object(et["a"])(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return t=e.call.apply(e,[this].concat(i)),Object(Ar["a"])(Object(ft["a"])(t),"type","PointLayer"),Object(Ar["a"])(Object(ft["a"])(t),"defaultSourceConfig",{data:[],options:{parser:{type:"json",x:"lng",y:"lat"}}}),t}return Object(nt["a"])(n,[{key:"buildModels",value:function(){var t=Object(mi["a"])(_i.a.mark((function t(){var e;return _i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=this.getModelType(),this.layerModel&&this.layerModel.clearModels(),this.layerModel=new kk[e](this),t.next=5,this.initLayerModels();case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"rebuildModels",value:function(){var t=Object(mi["a"])(_i.a.mark((function t(){return _i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.buildModels();case 2:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"getModelTypeWillEmptyData",value:function(){if(this.shapeOption){var t=this.shapeOption,e=t.field,n=t.values,r=this.getLayerConfig(),i=r.shape2d,o=this.iconService.getIconMap();if(e&&-1!==(null===i||void 0===i?void 0:i.indexOf(e)))return"fill";if("text"===n)return"text";if(n&&n instanceof Array){var a,s=Mk(n);try{for(s.s();!(a=s.n()).done;){var u=a.value;if("string"===typeof u&&o.hasOwnProperty(u))return"image"}}catch(c){s.e(c)}finally{s.f()}}}return"normal"}},{key:"getDefaultConfig",value:function(){var t=this.getModelType(),e={fillImage:{},normal:{blend:"additive"},radar:{},simplePoint:{},fill:{blend:"normal"},extrude:{},image:{},text:{blend:"normal"},tile:{},tileText:{},earthFill:{},earthExtrude:{}};return e[t]}},{key:"getModelType",value:function(){var t=this.getEncodedData(),e=this.getLayerConfig(),n=e.shape2d,r=e.shape3d,i=this.iconService.getIconMap(),o=t.find((function(t){return t.hasOwnProperty("shape")}));if(o){var a=o.shape;return"dot"===a?"normal":"simple"===a?"simplePoint":"radar"===a?"radar":"fillImage"===this.layerType?"fillImage":-1!==(null===n||void 0===n?void 0:n.indexOf(a))?"GLOBEL"===this.mapService.version?"earthFill":"fill":-1!==(null===r||void 0===r?void 0:r.indexOf(a))?"GLOBEL"===this.mapService.version?"earthExtrude":"extrude":i.hasOwnProperty(a)?"image":"text"}return this.getModelTypeWillEmptyData()}}]),n}(lb);function Nk(t){var e=Dk();return function(){var n,r=Object(ct["a"])(t);if(e){var i=Object(ct["a"])(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(ut["a"])(this,n)}}function Dk(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}var Fk='uniform float u_opacity: 1.0;\nuniform vec4 u_sourceColor;\nuniform vec4 u_targetColor;\nuniform float u_linearColor: 0;\n\nuniform float u_topsurface: 1.0;\nuniform float u_sidesurface: 1.0;\n\nvarying vec4 v_Color;\nvarying mat4 styleMappingMat; // \u4f20\u9012\u4ece\u7247\u5143\u4e2d\u4f20\u9012\u7684\u6620\u5c04\u6570\u636e\n#pragma include "picking"\n\nvoid main() {\n  float opacity = styleMappingMat[0][0];  \n  float isSide = styleMappingMat[0][3];\n  float sidey = styleMappingMat[3][0];\n  float lightWeight = styleMappingMat[3][1];\n\n  // Tip: \u90e8\u5206\u673a\u578b GPU \u8ba1\u7b97\u7cbe\u5ea6\u517c\u5bb9\n  if(isSide < 0.999) {\n    // side face\n    if(u_sidesurface < 1.0) {\n      discard;\n    }\n\n    if(u_linearColor == 1.0) {\n      vec4 linearColor = mix(u_targetColor, u_sourceColor, sidey);\n      linearColor.rgb *= lightWeight;\n      gl_FragColor = linearColor;\n    } else {\n      gl_FragColor = v_Color;\n    }\n\n  } else {\n     // top face\n    if(u_topsurface < 1.0) {\n      discard;\n    }\n\n    gl_FragColor = v_Color;\n  }\n\n  gl_FragColor.a *= opacity;\n  gl_FragColor = filterColor(gl_FragColor);\n}\n',Bk='precision highp float;\n\n#define ambientRatio 0.5\n#define diffuseRatio 0.3\n#define specularRatio 0.2\n\nattribute vec4 a_Color;\nattribute vec3 a_Position;\nattribute vec3 a_Normal;\nattribute float a_Size;\nattribute vec3 a_uvs;\nuniform mat4 u_ModelMatrix;\nuniform mat4 u_Mvp;\n\nvarying vec4 v_Color;\nuniform float u_heightfixed: 0.0; // \u9ed8\u8ba4\u4e0d\u56fa\u5b9a\nuniform float u_raisingHeight: 0.0;\nuniform float u_opacity: 1.0;\nvarying mat4 styleMappingMat; // \u7528\u4e8e\u5c06\u5728\u9876\u70b9\u7740\u8272\u5668\u4e2d\u8ba1\u7b97\u597d\u7684\u6837\u5f0f\u503c\u4f20\u9012\u7ed9\u7247\u5143\n\n#pragma include "styleMapping"\n#pragma include "styleMappingCalOpacity"\n\n#pragma include "projection"\n#pragma include "light"\n#pragma include "picking"\n\nvoid main() {\n  // cal style mapping - \u6570\u636e\u7eb9\u7406\u6620\u5c04\u90e8\u5206\u7684\u8ba1\u7b97\n  styleMappingMat = mat4(\n    0.0, 0.0, 0.0, 0.0, // opacity - strokeOpacity - strokeWidth - isSide\n    0.0, 0.0, 0.0, 0.0, // strokeR - strokeG - strokeB - strokeA\n    0.0, 0.0, 0.0, 0.0, // offsets[0] - offsets[1]\n    0.0, 0.0, 0.0, 0.0  // sidey\n  );\n  styleMappingMat[0][3] = a_Position.z;\n  styleMappingMat[3][0] = a_uvs[2];\n\n  float rowCount = u_cellTypeLayout[0][0];    // \u5f53\u524d\u7684\u6570\u636e\u7eb9\u7406\u6709\u51e0\u884c\n  float columnCount = u_cellTypeLayout[0][1]; // \u5f53\u770b\u5230\u6570\u636e\u7eb9\u7406\u6709\u51e0\u5217\n  float columnWidth = 1.0/columnCount;  // \u5217\u5bbd\n  float rowHeight = 1.0/rowCount;       // \u884c\u9ad8\n  float cellCount = calCellCount(); // opacity - strokeOpacity - strokeWidth - stroke - offsets\n  float id = a_vertexId; // \u7b2cn\u4e2a\u9876\u70b9\n  float cellCurrentRow = floor(id * cellCount / columnCount) + 1.0; // \u8d77\u59cb\u70b9\u5728\u7b2c\u51e0\u884c\n  float cellCurrentColumn = mod(id * cellCount, columnCount) + 1.0; // \u8d77\u59cb\u70b9\u5728\u7b2c\u51e0\u5217\n  \n  // cell \u56fa\u5b9a\u987a\u5e8f opacity -> strokeOpacity -> strokeWidth -> stroke ... \n  // \u6309\u987a\u5e8f\u4ece cell \u4e2d\u53d6\u503c\u3001\u82e5\u6ca1\u6709\u5219\u81ea\u52a8\u5f80\u4e0b\u53d6\u503c\n  float textureOffset = 0.0; // \u5728 cell \u4e2d\u53d6\u503c\u7684\u504f\u79fb\u91cf\n\n  vec2 opacityAndOffset = calOpacityAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);\n  styleMappingMat[0][0] = opacityAndOffset.r;\n  textureOffset = opacityAndOffset.g;\n  // cal style mapping - \u6570\u636e\u7eb9\u7406\u6620\u5c04\u90e8\u5206\u7684\u8ba1\u7b97\n\n  vec4 pos = vec4(a_Position.xy, a_Position.z * a_Size, 1.0);\n  vec4 project_pos = project_position(pos);\n\n  if(u_heightfixed > 0.0) { // \u5224\u65ad\u51e0\u4f55\u4f53\u662f\u5426\u56fa\u5b9a\u9ad8\u5ea6\n    project_pos.z = a_Position.z * a_Size;\n    project_pos.z += u_raisingHeight;\n\n    if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {\n      float mapboxZoomScale = 4.0/pow(2.0, 21.0 - u_Zoom);\n      project_pos.z *= mapboxZoomScale;\n      project_pos.z += u_raisingHeight * mapboxZoomScale;\n    }\n  }\n\n  // project_pos.z += 500000.0; // amap1\n\n  // project_pos.z += (500000.0 * 4.0)/pow(2.0, 21.0 - u_Zoom); // mapbox\n  // gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));\n\n  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x\n    // gl_Position = u_Mvp * (vec4(project_pos.xyz * vec3(1.0, 1.0, -1.0), 1.0));\n    gl_Position = u_Mvp * (vec4(project_pos.xyz, 1.0));\n  } else {\n    gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));\n  }\n\n  float lightWeight = calc_lighting(pos);\n  // v_Color = a_Color;\n  v_Color = vec4(a_Color.rgb * lightWeight, a_Color.w);\n\n  styleMappingMat[3][1] = lightWeight;\n\n  setPickingColor(a_PickingColor);\n}\n',zk='uniform sampler2D u_texture;\nuniform float u_opacity: 1.0;\nuniform vec4 u_sourceColor;\nuniform vec4 u_targetColor;\nuniform float u_linearColor: 0;\n\nuniform float u_topsurface: 1.0;\nuniform float u_sidesurface: 1.0;\n\nvarying vec4 v_Color;\nvarying mat4 styleMappingMat; // \u4f20\u9012\u4ece\u7247\u5143\u4e2d\u4f20\u9012\u7684\u6620\u5c04\u6570\u636e\n#pragma include "picking"\n\nvoid main() {\n  float opacity = styleMappingMat[0][0];\n  float isSide = styleMappingMat[0][3];\n  float lightWeight = styleMappingMat[3][1];\n  float topU = styleMappingMat[2][2];\n  float topV = styleMappingMat[2][3];\n\n  float sidey = styleMappingMat[3][0];\n  // Tip: \u90e8\u5206\u673a\u578b GPU \u8ba1\u7b97\u7cbe\u5ea6\u517c\u5bb9\n  if(isSide < 0.999) {\n    // side face\n    if(u_sidesurface < 1.0) {\n      discard;\n    }\n\n    if(u_linearColor == 1.0) {\n      vec4 linearColor = mix(u_targetColor, u_sourceColor, sidey);\n      linearColor.rgb *= lightWeight;\n      gl_FragColor = linearColor;\n    } else {\n      gl_FragColor = v_Color;\n    }\n  } else {\n\n     // top face\n    if(u_topsurface < 1.0) {\n      discard;\n    }\n\n    gl_FragColor = texture2D(u_texture, vec2(topU, topV));\n  }\n  \n\n  gl_FragColor.a *= opacity;\n  gl_FragColor = filterColor(gl_FragColor);\n}\n',Uk='precision highp float;\n\n#define ambientRatio 0.5\n#define diffuseRatio 0.3\n#define specularRatio 0.2\n\nattribute vec4 a_Color;\nattribute vec3 a_Position;\nattribute vec3 a_Normal;\nattribute float a_Size;\nattribute vec3 a_uvs;\nuniform mat4 u_ModelMatrix;\nuniform mat4 u_Mvp;\n\nvarying vec4 v_Color;\nuniform float u_heightfixed: 0.0; // \u9ed8\u8ba4\u4e0d\u56fa\u5b9a\nuniform float u_raisingHeight: 0.0;\nuniform float u_opacity: 1.0;\nvarying mat4 styleMappingMat; // \u7528\u4e8e\u5c06\u5728\u9876\u70b9\u7740\u8272\u5668\u4e2d\u8ba1\u7b97\u597d\u7684\u6837\u5f0f\u503c\u4f20\u9012\u7ed9\u7247\u5143\n\n#pragma include "styleMapping"\n#pragma include "styleMappingCalOpacity"\n\n#pragma include "projection"\n#pragma include "light"\n#pragma include "picking"\n\nvoid main() {\n  v_Color = a_Color;\n\n  // cal style mapping - \u6570\u636e\u7eb9\u7406\u6620\u5c04\u90e8\u5206\u7684\u8ba1\u7b97\n  styleMappingMat = mat4(\n    0.0, 0.0, 0.0, 0.0, // opacity - strokeOpacity - strokeWidth - a_Position.z(judge side by a_Position.z)\n    0.0, 0.0, 0.0, 0.0, // strokeR - strokeG - strokeB - strokeA\n    0.0, 0.0, 0.0, 0.0, // offsets[0] - offsets[1] - u - v\n    0.0, 0.0, 0.0, 0.0  // sidey\n  );\n  \n  styleMappingMat[0][3] = a_Position.z;\n  styleMappingMat[2][2] = a_uvs[0];\n  styleMappingMat[2][3] = 1.0 - a_uvs[1];\n  styleMappingMat[3][0] = a_uvs[2];\n\n\n  float rowCount = u_cellTypeLayout[0][0];    // \u5f53\u524d\u7684\u6570\u636e\u7eb9\u7406\u6709\u51e0\u884c\n  float columnCount = u_cellTypeLayout[0][1]; // \u5f53\u770b\u5230\u6570\u636e\u7eb9\u7406\u6709\u51e0\u5217\n  float columnWidth = 1.0/columnCount;  // \u5217\u5bbd\n  float rowHeight = 1.0/rowCount;       // \u884c\u9ad8\n  float cellCount = calCellCount(); // opacity - strokeOpacity - strokeWidth - stroke - offsets\n  float id = a_vertexId; // \u7b2cn\u4e2a\u9876\u70b9\n  float cellCurrentRow = floor(id * cellCount / columnCount) + 1.0; // \u8d77\u59cb\u70b9\u5728\u7b2c\u51e0\u884c\n  float cellCurrentColumn = mod(id * cellCount, columnCount) + 1.0; // \u8d77\u59cb\u70b9\u5728\u7b2c\u51e0\u5217\n  \n  // cell \u56fa\u5b9a\u987a\u5e8f opacity -> strokeOpacity -> strokeWidth -> stroke ... \n  // \u6309\u987a\u5e8f\u4ece cell \u4e2d\u53d6\u503c\u3001\u82e5\u6ca1\u6709\u5219\u81ea\u52a8\u5f80\u4e0b\u53d6\u503c\n  float textureOffset = 0.0; // \u5728 cell \u4e2d\u53d6\u503c\u7684\u504f\u79fb\u91cf\n\n  vec2 opacityAndOffset = calOpacityAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);\n  styleMappingMat[0][0] = opacityAndOffset.r;\n  textureOffset = opacityAndOffset.g;\n  // cal style mapping - \u6570\u636e\u7eb9\u7406\u6620\u5c04\u90e8\u5206\u7684\u8ba1\u7b97\n\n  vec4 pos = vec4(a_Position.xy, a_Position.z * a_Size, 1.0);\n  vec4 project_pos = project_position(pos);\n\n  if(u_heightfixed > 0.0) { // \u5224\u65ad\u51e0\u4f55\u4f53\u662f\u5426\u56fa\u5b9a\u9ad8\u5ea6\n    project_pos.z = a_Position.z * a_Size;\n    project_pos.z += u_raisingHeight;\n\n    if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {\n      float mapboxZoomScale = 4.0/pow(2.0, 21.0 - u_Zoom);\n      project_pos.z *= mapboxZoomScale;\n      project_pos.z += u_raisingHeight * mapboxZoomScale;\n    }\n  }\n\n  // project_pos.z += 500000.0; // amap1\n\n  // project_pos.z += (500000.0 * 4.0)/pow(2.0, 21.0 - u_Zoom); // mapbox\n  // gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));\n\n  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x\n    // gl_Position = u_Mvp * (vec4(project_pos.xyz * vec3(1.0, 1.0, -1.0), 1.0));\n    gl_Position = u_Mvp * (vec4(project_pos.xyz, 1.0));\n  } else {\n    gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));\n  }\n\n  float lightWeight = calc_lighting(pos);\n  styleMappingMat[3][1] = lightWeight;\n\n  setPickingColor(a_PickingColor);\n}\n',Vk='uniform float u_opacity: 1.0;\nuniform vec4 u_sourceColor;\nuniform vec4 u_targetColor;\nuniform float u_linearColor: 0;\n\nuniform float u_topsurface: 1.0;\nuniform float u_sidesurface: 1.0;\n\nvarying vec4 v_Color;\nvarying mat4 styleMappingMat; // \u4f20\u9012\u4ece\u7247\u5143\u4e2d\u4f20\u9012\u7684\u6620\u5c04\u6570\u636e\n#pragma include "picking"\n\nvoid main() {\n  float opacity = styleMappingMat[0][0];\n  float isSide = styleMappingMat[0][3];\n  float sidey = styleMappingMat[3][0];\n  float lightWeight = styleMappingMat[3][1];\n\n  // Tip: \u90e8\u5206\u673a\u578b GPU \u8ba1\u7b97\u7cbe\u5ea6\u517c\u5bb9\n  if(isSide < 0.999) {\n    // side face\n    if(u_sidesurface < 1.0) {\n      discard;\n    }\n    \n    if( u_linearColor == 1.0) {\n      // side use linear\n      vec4 linearColor = mix(u_targetColor, u_sourceColor, sidey);\n      linearColor.rgb *= lightWeight;\n      gl_FragColor = linearColor;\n    } else {\n      // side notuse linear\n       gl_FragColor = v_Color;\n    }\n  } else {\n    // top face\n    if(u_topsurface < 1.0) {\n      discard;\n    }\n    gl_FragColor = v_Color;\n  }\n\n  gl_FragColor.a *= opacity;\n  gl_FragColor = filterColorAlpha(gl_FragColor, lightWeight);\n}\n',Hk='precision highp float;\n\n#define ambientRatio 0.5\n#define diffuseRatio 0.3\n#define specularRatio 0.2\n\nattribute vec4 a_Color;\nattribute vec3 a_Position;\nattribute vec3 a_Normal;\nattribute float a_Size;\nattribute vec3 a_uvs;\nuniform mat4 u_ModelMatrix;\nuniform mat4 u_Mvp;\n\nvarying vec4 v_Color;\nuniform float u_heightfixed: 0.0; // \u9ed8\u8ba4\u4e0d\u56fa\u5b9a\nuniform float u_raisingHeight: 0.0;\nuniform float u_opacity: 1.0;\nvarying mat4 styleMappingMat; // \u7528\u4e8e\u5c06\u5728\u9876\u70b9\u7740\u8272\u5668\u4e2d\u8ba1\u7b97\u597d\u7684\u6837\u5f0f\u503c\u4f20\u9012\u7ed9\u7247\u5143\n\n#pragma include "styleMapping"\n#pragma include "styleMappingCalOpacity"\n\n#pragma include "projection"\n#pragma include "light"\n#pragma include "picking"\n\nvoid main() {\n  // cal style mapping - \u6570\u636e\u7eb9\u7406\u6620\u5c04\u90e8\u5206\u7684\u8ba1\u7b97\n  styleMappingMat = mat4(\n    0.0, 0.0, 0.0, 0.0, // opacity - strokeOpacity - strokeWidth - isSide\n    0.0, 0.0, 0.0, 0.0, // strokeR - strokeG - strokeB - strokeA\n    0.0, 0.0, 0.0, 0.0, // offsets[0] - offsets[1]\n    0.0, 0.0, 0.0, 0.0  // sidey\n  );\n  styleMappingMat[0][3] = a_Position.z;\n  styleMappingMat[3][0] = a_uvs[2];\n\n  float rowCount = u_cellTypeLayout[0][0];    // \u5f53\u524d\u7684\u6570\u636e\u7eb9\u7406\u6709\u51e0\u884c\n  float columnCount = u_cellTypeLayout[0][1]; // \u5f53\u770b\u5230\u6570\u636e\u7eb9\u7406\u6709\u51e0\u5217\n  float columnWidth = 1.0/columnCount;  // \u5217\u5bbd\n  float rowHeight = 1.0/rowCount;       // \u884c\u9ad8\n  float cellCount = calCellCount(); // opacity - strokeOpacity - strokeWidth - stroke - offsets\n  float id = a_vertexId; // \u7b2cn\u4e2a\u9876\u70b9\n  float cellCurrentRow = floor(id * cellCount / columnCount) + 1.0; // \u8d77\u59cb\u70b9\u5728\u7b2c\u51e0\u884c\n  float cellCurrentColumn = mod(id * cellCount, columnCount) + 1.0; // \u8d77\u59cb\u70b9\u5728\u7b2c\u51e0\u5217\n  \n  // cell \u56fa\u5b9a\u987a\u5e8f opacity -> strokeOpacity -> strokeWidth -> stroke ... \n  // \u6309\u987a\u5e8f\u4ece cell \u4e2d\u53d6\u503c\u3001\u82e5\u6ca1\u6709\u5219\u81ea\u52a8\u5f80\u4e0b\u53d6\u503c\n  float textureOffset = 0.0; // \u5728 cell \u4e2d\u53d6\u503c\u7684\u504f\u79fb\u91cf\n\n  vec2 opacityAndOffset = calOpacityAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);\n  styleMappingMat[0][0] = opacityAndOffset.r;\n  textureOffset = opacityAndOffset.g;\n  // cal style mapping - \u6570\u636e\u7eb9\u7406\u6620\u5c04\u90e8\u5206\u7684\u8ba1\u7b97\n  vec4 pos = vec4(a_Position.xy, a_Position.z * a_Size, 1.0);\n  vec4 project_pos = project_position(pos);\n\n  if(u_heightfixed > 0.0) { // \u5224\u65ad\u51e0\u4f55\u4f53\u662f\u5426\u56fa\u5b9a\u9ad8\u5ea6\n    project_pos.z = a_Position.z * a_Size;\n    project_pos.z += u_raisingHeight;\n    if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {\n      float mapboxZoomScale = 4.0/pow(2.0, 21.0 - u_Zoom);\n      project_pos.z *= mapboxZoomScale;\n      project_pos.z += u_raisingHeight * mapboxZoomScale;\n    }\n  }\n\n  // gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));\n\n  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x\n    // gl_Position = u_Mvp * (vec4(project_pos.xyz * vec3(1.0, 1.0, -1.0), 1.0));\n    gl_Position = u_Mvp * (vec4(project_pos.xyz, 1.0));\n  } else {\n    gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));\n  }\n\n  float lightWeight = calc_lighting(pos);\n  // v_Color = a_Color;\n  v_Color = vec4(a_Color.rgb * lightWeight, a_Color.w);\n\n  styleMappingMat[3][1] = lightWeight;\n\n  setPickingColor(a_PickingColor);\n}\n',Gk=function(t){Object(st["a"])(n,t);var e=Nk(n);function n(){return Object(et["a"])(this,n),e.apply(this,arguments)}return Object(nt["a"])(n,[{key:"getUninforms",value:function(){var t=this.layer.getLayerConfig(),e=t.opacity,n=void 0===e?1:e,r=t.heightfixed,i=void 0!==r&&r,o=t.raisingHeight,a=void 0===o?0:o,s=t.topsurface,u=void 0===s||s,c=t.sidesurface,l=void 0===c||c,f=t.sourceColor,h=t.targetColor;if(this.dataTextureTest&&this.dataTextureNeedUpdate({opacity:n})){this.judgeStyleAttributes({opacity:n});var p=this.layer.getEncodedData(),d=this.calDataFrame(this.cellLength,p,this.cellProperties),v=d.data,g=d.width,m=d.height;this.rowCount=m,this.dataTexture=this.cellLength>0&&v.length>0?this.createTexture2D({flipY:!0,data:v,format:Rp.LUMINANCE,type:Rp.FLOAT,width:g,height:m}):this.createTexture2D({flipY:!0,data:[1],format:Rp.LUMINANCE,type:Rp.FLOAT,width:1,height:1})}var y=0,_=[1,1,1,1],b=[1,1,1,1];return f&&h&&(_=li(f),b=li(h),y=1),{u_topsurface:Number(u),u_sidesurface:Number(l),u_heightfixed:Number(i),u_dataTexture:this.dataTexture,u_cellTypeLayout:this.getCellTypeLayout(),u_raisingHeight:Number(a),u_opacity:Object(K["isNumber"])(n)?n:1,u_linearColor:y,u_sourceColor:_,u_targetColor:b,u_texture:this.texture}}},{key:"initModels",value:function(){var t=Object(mi["a"])(_i.a.mark((function t(){return _i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.loadTexture(),t.next=3,this.buildModels();case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"buildModels",value:function(){var t=Object(mi["a"])(_i.a.mark((function t(){var e,n,r,i,o,a,s,u,c,l;return _i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=this.layer.getLayerConfig(),n=e.mask,r=void 0!==n&&n,i=e.maskInside,o=void 0===i||i,a=this.getShaders(),s=a.frag,u=a.vert,c=a.type,t.next=4,this.layer.buildLayerModel({moduleName:c,vertexShader:u,fragmentShader:s,triangulation:$b,stencil:gi(r,o)});case 4:return l=t.sent,t.abrupt("return",[l]);case 6:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"getShaders",value:function(){var t=this.layer.getLayerConfig(),e=t.pickLight,n=t.mapTexture;return n?{frag:zk,vert:Uk,type:"polygonExtrudeTexture"}:e?{frag:Vk,vert:Hk,type:"polygonExtrudePickLight"}:{frag:Fk,vert:Bk,type:"polygonExtrude"}}},{key:"clearModels",value:function(){var t,e;null===(t=this.dataTexture)||void 0===t||t.destroy(),null===(e=this.texture)||void 0===e||e.destroy()}},{key:"registerBuiltinAttributes",value:function(){var t=this.layer.getSource().extent,e=Object(q["a"])(t,4),n=e[0],r=e[1],i=e[2],o=e[3],a=i-n,s=o-r;this.styleAttributeService.registerStyleAttribute({name:"uvs",type:ey.Attribute,descriptor:{name:"a_uvs",buffer:{usage:Rp.STATIC_DRAW,data:[],type:Rp.FLOAT},size:3,update:function(t,e,i){var o=i[0],u=i[1];return[(o-n)/a,(u-r)/s,i[4]]}}}),this.styleAttributeService.registerStyleAttribute({name:"normal",type:ey.Attribute,descriptor:{name:"a_Normal",buffer:{usage:Rp.STATIC_DRAW,data:[],type:Rp.FLOAT},size:3,update:function(t,e,n,r,i){return i}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:ey.Attribute,descriptor:{name:"a_Size",buffer:{usage:Rp.DYNAMIC_DRAW,data:[],type:Rp.FLOAT},size:1,update:function(t){var e=t.size,n=void 0===e?10:e;return Array.isArray(n)?[n[0]]:[n]}}})}},{key:"loadTexture",value:function(){var t=this,e=this.layer.getLayerConfig(),n=e.mapTexture,r=this.rendererService.createTexture2D;if(this.texture=r({height:0,width:0}),n){var i=new Image;i.crossOrigin="",i.src=n,i.onload=function(){t.texture=r({data:i,width:i.width,height:i.height,wrapS:Rp.CLAMP_TO_EDGE,wrapT:Rp.CLAMP_TO_EDGE,min:Rp.LINEAR,mag:Rp.LINEAR}),t.layerService.reRender()}}}}]),n}(db);function Wk(t){var e=Zk();return function(){var n,r=Object(ct["a"])(t);if(e){var i=Object(ct["a"])(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(ut["a"])(this,n)}}function Zk(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}var Yk='uniform float u_opacity: 1.0;\nvarying vec4 v_color;\nvarying mat4 styleMappingMat; // \u4f20\u9012\u4ece\u7247\u5143\u4e2d\u4f20\u9012\u7684\u6620\u5c04\u6570\u636e\n\n#pragma include "picking"\n\nvoid main() {\n  float opacity = styleMappingMat[0][0];\n  gl_FragColor = v_color;\n  gl_FragColor.a *= opacity;\n  gl_FragColor = filterColor(gl_FragColor);\n}\n',Xk='uniform float u_opacity: 1.0;\nvarying vec4 v_Color;\nvarying mat4 styleMappingMat; // \u4f20\u9012\u4ece\u7247\u5143\u4e2d\u4f20\u9012\u7684\u6620\u5c04\u6570\u636e\n\n#pragma include "picking"\nuniform float u_opacitylinear: 0.0;\nuniform float u_dir: 1.0;\nvarying vec3 v_linear;\nvarying vec2 v_pos;\n\n\nvoid main() {\n  float opacity = styleMappingMat[0][0];\n  gl_FragColor = v_Color;\n  \n  if(u_opacitylinear > 0.0) {\n    gl_FragColor.a *= u_dir == 1.0 ? 1.0 - length(v_pos - v_linear.xy)/v_linear.z : length(v_pos - v_linear.xy)/v_linear.z;\n  }\n\n  gl_FragColor.a *= opacity;\n  gl_FragColor = filterColor(gl_FragColor);\n}\n',qk='attribute vec4 a_Color;\nattribute vec3 a_Position;\n\nuniform mat4 u_ModelMatrix;\nuniform mat4 u_Mvp;\nuniform float u_opacity: 1.0;\nuniform float u_raisingHeight: 0.0;\n\nvarying vec4 v_Color;\nvarying mat4 styleMappingMat; // \u7528\u4e8e\u5c06\u5728\u9876\u70b9\u7740\u8272\u5668\u4e2d\u8ba1\u7b97\u597d\u7684\u6837\u5f0f\u503c\u4f20\u9012\u7ed9\u7247\u5143\n\n#pragma include "styleMapping"\n#pragma include "styleMappingCalOpacity"\n\n#pragma include "projection"\n#pragma include "picking"\n\nuniform float u_opacitylinear: 0.0;\n\nattribute vec3 a_linear;\nvarying vec3 v_linear;\nvarying vec2 v_pos;\n\nvoid main() {\n  if(u_opacitylinear > 0.0) {\n    v_linear = a_linear;\n    v_pos = a_Position.xy;\n  }\n  \n  // cal style mapping - \u6570\u636e\u7eb9\u7406\u6620\u5c04\u90e8\u5206\u7684\u8ba1\u7b97\nstyleMappingMat = mat4(\n    0.0, 0.0, 0.0, 0.0, // opacity - strokeOpacity - strokeWidth - empty\n    0.0, 0.0, 0.0, 0.0, // strokeR - strokeG - strokeB - strokeA\n    0.0, 0.0, 0.0, 0.0, // offsets[0] - offsets[1]\n    0.0, 0.0, 0.0, 0.0\n  );\n\n  float rowCount = u_cellTypeLayout[0][0];    // \u5f53\u524d\u7684\u6570\u636e\u7eb9\u7406\u6709\u51e0\u884c\n  float columnCount = u_cellTypeLayout[0][1]; // \u5f53\u770b\u5230\u6570\u636e\u7eb9\u7406\u6709\u51e0\u5217\n  float columnWidth = 1.0/columnCount;  // \u5217\u5bbd\n  float rowHeight = 1.0/rowCount;       // \u884c\u9ad8\n  float cellCount = calCellCount(); // opacity - strokeOpacity - strokeWidth - stroke - offsets\n  float id = a_vertexId; // \u7b2cn\u4e2a\u9876\u70b9\n  float cellCurrentRow = floor(id * cellCount / columnCount) + 1.0; // \u8d77\u59cb\u70b9\u5728\u7b2c\u51e0\u884c\n  float cellCurrentColumn = mod(id * cellCount, columnCount) + 1.0; // \u8d77\u59cb\u70b9\u5728\u7b2c\u51e0\u5217\n  \n  // cell \u56fa\u5b9a\u987a\u5e8f opacity -> strokeOpacity -> strokeWidth -> stroke ... \n  // \u6309\u987a\u5e8f\u4ece cell \u4e2d\u53d6\u503c\u3001\u82e5\u6ca1\u6709\u5219\u81ea\u52a8\u5f80\u4e0b\u53d6\u503c\n  float textureOffset = 0.0; // \u5728 cell \u4e2d\u53d6\u503c\u7684\u504f\u79fb\u91cf\n\n  vec2 opacityAndOffset = calOpacityAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);\n  styleMappingMat[0][0] = opacityAndOffset.r;\n  textureOffset = opacityAndOffset.g;\n  // cal style mapping - \u6570\u636e\u7eb9\u7406\u6620\u5c04\u90e8\u5206\u7684\u8ba1\u7b97\n\n  v_Color = a_Color;\n  vec4 project_pos = project_position(vec4(a_Position, 1.0));\n  // gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));\n  project_pos.z += u_raisingHeight;\n\n  if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {\n    float mapboxZoomScale = 4.0/pow(2.0, 21.0 - u_Zoom);\n    project_pos.z *= mapboxZoomScale;\n    project_pos.z += u_raisingHeight * mapboxZoomScale;\n  }\n\n  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x\n    gl_Position = u_Mvp * (vec4(project_pos.xyz, 1.0));\n  } else {\n    gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));\n  }\n\n  setPickingColor(a_PickingColor);\n}',Kk='attribute vec4 a_Color;\nattribute vec3 a_Position;\n\nuniform mat4 u_ModelMatrix;\nuniform mat4 u_Mvp;\n\nuniform float u_opacity: 1.0;\nuniform float u_raisingHeight: 0.0;\n\nvarying vec4 v_color;\nvarying mat4 styleMappingMat; // \u7528\u4e8e\u5c06\u5728\u9876\u70b9\u7740\u8272\u5668\u4e2d\u8ba1\u7b97\u597d\u7684\u6837\u5f0f\u503c\u4f20\u9012\u7ed9\u7247\u5143\n\n#pragma include "styleMapping"\n#pragma include "styleMappingCalOpacity"\n\n#pragma include "projection"\n#pragma include "picking"\n\nvoid main() {\n  // cal style mapping - \u6570\u636e\u7eb9\u7406\u6620\u5c04\u90e8\u5206\u7684\u8ba1\u7b97\nstyleMappingMat = mat4(\n    0.0, 0.0, 0.0, 0.0, // opacity - strokeOpacity - strokeWidth - empty\n    0.0, 0.0, 0.0, 0.0, // strokeR - strokeG - strokeB - strokeA\n    0.0, 0.0, 0.0, 0.0, // offsets[0] - offsets[1]\n    0.0, 0.0, 0.0, 0.0\n  );\n\n  float rowCount = u_cellTypeLayout[0][0];    // \u5f53\u524d\u7684\u6570\u636e\u7eb9\u7406\u6709\u51e0\u884c\n  float columnCount = u_cellTypeLayout[0][1]; // \u5f53\u770b\u5230\u6570\u636e\u7eb9\u7406\u6709\u51e0\u5217\n  float columnWidth = 1.0/columnCount;  // \u5217\u5bbd\n  float rowHeight = 1.0/rowCount;       // \u884c\u9ad8\n  float cellCount = calCellCount(); // opacity - strokeOpacity - strokeWidth - stroke - offsets\n  float id = a_vertexId; // \u7b2cn\u4e2a\u9876\u70b9\n  float cellCurrentRow = floor(id * cellCount / columnCount) + 1.0; // \u8d77\u59cb\u70b9\u5728\u7b2c\u51e0\u884c\n  float cellCurrentColumn = mod(id * cellCount, columnCount) + 1.0; // \u8d77\u59cb\u70b9\u5728\u7b2c\u51e0\u5217\n  \n  // cell \u56fa\u5b9a\u987a\u5e8f opacity -> strokeOpacity -> strokeWidth -> stroke ... \n  // \u6309\u987a\u5e8f\u4ece cell \u4e2d\u53d6\u503c\u3001\u82e5\u6ca1\u6709\u5219\u81ea\u52a8\u5f80\u4e0b\u53d6\u503c\n  float textureOffset = 0.0; // \u5728 cell \u4e2d\u53d6\u503c\u7684\u504f\u79fb\u91cf\n\n  vec2 opacityAndOffset = calOpacityAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);\n  styleMappingMat[0][0] = opacityAndOffset.r;\n  textureOffset = opacityAndOffset.g;\n  // cal style mapping - \u6570\u636e\u7eb9\u7406\u6620\u5c04\u90e8\u5206\u7684\u8ba1\u7b97\n\n  v_color = a_Color;\n  vec4 project_pos = project_position(vec4(a_Position, 1.0));\n  // gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));\n\n  project_pos.z += u_raisingHeight;\n\n  if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {\n    float mapboxZoomScale = 4.0/pow(2.0, 21.0 - u_Zoom);\n    project_pos.z *= mapboxZoomScale;\n    project_pos.z += u_raisingHeight * mapboxZoomScale;\n  }\n\n  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x\n    gl_Position = u_Mvp * (vec4(project_pos.xyz, 1.0));\n  } else {\n    gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));\n  }\n\n  setPickingColor(a_PickingColor);\n}\n\n',Qk=function(t){Object(st["a"])(n,t);var e=Wk(n);function n(){return Object(et["a"])(this,n),e.apply(this,arguments)}return Object(nt["a"])(n,[{key:"getUninforms",value:function(){var t=this.layer.getLayerConfig(),e=t.raisingHeight,n=void 0===e?0:e,r=t.opacity,i=void 0===r?1:r,o=t.opacityLinear,a=void 0===o?{enable:!1,dir:"in"}:o;if(this.dataTextureTest&&this.dataTextureNeedUpdate({opacity:i})){this.judgeStyleAttributes({opacity:i});var s=this.layer.getEncodedData(),u=this.calDataFrame(this.cellLength,s,this.cellProperties),c=u.data,l=u.width,f=u.height;this.rowCount=f,this.dataTexture=this.cellLength>0&&c.length>0?this.createTexture2D({flipY:!0,data:c,format:Rp.LUMINANCE,type:Rp.FLOAT,width:l,height:f}):this.createTexture2D({flipY:!0,data:[1],format:Rp.LUMINANCE,type:Rp.FLOAT,width:1,height:1})}return{u_dataTexture:this.dataTexture,u_cellTypeLayout:this.getCellTypeLayout(),u_raisingHeight:Number(n),u_opacity:Object(K["isNumber"])(i)?i:1,u_opacitylinear:Number(a.enable),u_dir:"in"===a.dir?1:0}}},{key:"initModels",value:function(){var t=Object(mi["a"])(_i.a.mark((function t(){return _i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.buildModels();case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"buildModels",value:function(){var t=Object(mi["a"])(_i.a.mark((function t(){var e,n,r,i,o,a,s,u,c,l,f,h,p,d;return _i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=this.getModelParams(),n=e.frag,r=e.vert,i=e.triangulation,o=e.type,a=this.layer.getLayerConfig(),s=a.mask,u=void 0!==s&&s,c=a.maskInside,l=void 0===c||c,f=a.workerEnabled,h=void 0!==f&&f,p=a.enablePicking,this.layer.triangulation=i,t.next=5,this.layer.buildLayerModel({moduleName:o,vertexShader:r,fragmentShader:n,triangulation:i,primitive:Rp.TRIANGLES,depth:{enable:!1},blend:this.getBlend(),stencil:gi(u,l),workerEnabled:h,workerOptions:{modelType:o,enablePicking:p}});case 5:return d=t.sent,t.abrupt("return",[d]);case 7:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"clearModels",value:function(){var t;null===(t=this.dataTexture)||void 0===t||t.destroy()}},{key:"registerBuiltinAttributes",value:function(){var t=this.layer.getLayerConfig(),e=t.opacityLinear,n=void 0===e?{enable:!1,dir:"in"}:e;n.enable&&this.styleAttributeService.registerStyleAttribute({name:"linear",type:ey.Attribute,descriptor:{name:"a_linear",buffer:{usage:Rp.STATIC_DRAW,data:[],type:Rp.FLOAT},size:3,update:function(t,e,n){return[n[3],n[4],n[5]]}}})}},{key:"getModelParams",value:function(){var t=this.layer.getLayerConfig(),e=t.opacityLinear,n=void 0===e?{enable:!1}:e;return n.enable?{frag:Xk,vert:qk,type:"polygonLinear",triangulation:Kb}:{frag:Yk,vert:Kk,type:"polygonFill",triangulation:xc}}}]),n}(db);function $k(t){var e=Jk();return function(){var n,r=Object(ct["a"])(t);if(e){var i=Object(ct["a"])(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(ut["a"])(this,n)}}function Jk(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}var tM="\nuniform float u_time: 0.0;\nuniform float u_opacity: 1.0;\n\nvarying vec2 v_uv;\n\nfloat coast2water_fadedepth = 0.10;\nfloat large_waveheight      = .750; // change to adjust the \"heavy\" waves\nfloat large_wavesize        = 3.4;  // factor to adjust the large wave size\nfloat small_waveheight      = 0.6;  // change to adjust the small random waves\nfloat small_wavesize        = 0.5;   // factor to ajust the small wave size\nfloat water_softlight_fact  = 15.;  // range [1..200] (should be << smaller than glossy-fact)\nfloat water_glossylight_fact= 120.; // range [1..200]\nfloat particle_amount       = 70.;\n// vec3 watercolor             = vec3(0.43, 0.60, 0.66); // 'transparent' low-water color (RGB)\n// vec3 watercolor2            = vec3(0.06, 0.07, 0.11); // deep-water color (RGB, should be darker than the low-water color)\nuniform vec4 u_watercolor;\nuniform vec4 u_watercolor2;\nvec3 water_specularcolor    = vec3(1.3, 1.3, 0.9);    // specular Color (RGB) of the water-highlights\n#define light                 vec3(-0., sin(u_time*0.5)*.5 + .35, 2.8) // position of the sun\n\nuniform sampler2D u_texture1;\nuniform sampler2D u_texture2;\nuniform sampler2D u_texture3;\n\n  \n\nfloat hash( float n ) {\n    return fract(sin(n)*43758.5453123);\n}\n\n// 2d noise function\nfloat noise1( in vec2 x ) {\n  vec2 p  = floor(x);\n  vec2 f  = smoothstep(0.0, 1.0, fract(x));\n  float n = p.x + p.y*57.0;\n  return mix(mix( hash(n+  0.0), hash(n+  1.0),f.x),\n    mix( hash(n+ 57.0), hash(n+ 58.0),f.x),f.y);\n}\n\nfloat noise(vec2 p) {\n    return texture2D(u_texture2,p*vec2(1./256.)).x;\n}\n\nvec4 highness(vec2 p) {\n    vec4 t = texture2D(u_texture1,fract(p));\n    float clipped = -2.0-smoothstep(3.,10.,t.a)*6.9-smoothstep(10.,100.,t.a)*89.9-smoothstep(0.,10000.,t.a)*10000.0;\n    return clamp(t, 0.0,3.0)+clamp(t/3.0-1.0, 0.0,1.0)+clamp(t/16.0-1.0, 0.0,1.0);\n}\n\nfloat height_map( vec2 p ) {\n    vec4 height=highness(p);\n    /*\n    height = -0.5+\n        0.5*smoothstep(-100.,0.,-height)+\n        2.75*smoothstep(0.,2.,height)+\n        1.75*smoothstep(2.,4.,height)+\n        2.75*smoothstep(4.,16.,height)+\n        1.5*smoothstep(16.,1000.,height);\n    */\n\n    mat2 m = mat2( 0.9563*1.4,  -0.2924*1.4,  0.2924*1.4,  0.9563*1.4 );\n    //p = p*6.;\n    float f = 0.6000*noise1( p ); p = m*p*1.1*6.;\n    f += 0.2500*noise( p ); p = m*p*1.32;\n    f += 0.1666*noise( p ); p = m*p*1.11;\n    f += 0.0834*noise( p ); p = m*p*1.12;\n    f += 0.0634*noise( p ); p = m*p*1.13;\n    f += 0.0444*noise( p ); p = m*p*1.14;\n    f += 0.0274*noise( p ); p = m*p*1.15;\n    f += 0.0134*noise( p ); p = m*p*1.16;\n    f += 0.0104*noise( p ); p = m*p*1.17;\n    f += 0.0084*noise( p );\n    f = .25*f+dot(height,vec4(-.03125,-.125,.25,.25))*.5;\n        const float FLAT_LEVEL = 0.92525;\n        //f = f*0.25+height*0.75;\n    if (f<FLAT_LEVEL)\n        f = f;\n    else\n        f = pow((f-FLAT_LEVEL)/(1.-FLAT_LEVEL), 2.)*(1.-FLAT_LEVEL)*2.0+FLAT_LEVEL; // makes a smooth coast-increase\n    return clamp(f, 0., 10.);\n}\n\nvec3 plasma_quintic( float x ) {\n    x = clamp( x, 0.0, 1.0);\n    vec4 x1 = vec4( 1.0, x, x * x, x * x * x ); // 1 x x2 x3\n    vec4 x2 = x1 * x1.w * x; // x4 x5 x6 x7\n    return vec3(\n        dot( x1.xyzw, vec4( +0.063861086, +1.992659096, -1.023901152, -0.490832805 ) ) + dot( x2.xy, vec2( +1.308442123, -0.914547012 ) ),\n        dot( x1.xyzw, vec4( +0.049718590, -0.791144343, +2.892305078, +0.811726816 ) ) + dot( x2.xy, vec2( -4.686502417, +2.717794514 ) ),\n        dot( x1.xyzw, vec4( +0.513275779, +1.580255060, -5.164414457, +4.559573646 ) ) + dot( x2.xy, vec2( -1.916810682, +0.570638854 ) ) );\n}\n\nvec4 color(vec2 p){\n    vec4 c1 = vec4(1.7,1.6,.9,1);\n    vec4 c2 = vec4(.2,.94,.1,1);\n    vec4 c3 = vec4(.3,.2,.0,1);\n    vec4 c4 = vec4(.99,.99,1.6,1);\n    vec4 v = highness(p);\n    float los = smoothstep(0.1,1.1,v.b);\n    float his = smoothstep(3.5,6.5,v.b);\n    float ces = smoothstep(1.,5.,v.a);\n    vec4 lo = mix(c1,c2,los);\n    vec4 hi = mix(c3,c4,his);\n    vec4 ce = mix(lo,hi,ces);\n\n    return vec4(plasma_quintic(ces),1).ragb;\n}\n\nvec3 terrain_map( vec2 p )\n{\n  return color(p).rgb*0.75+0.25*vec3(0.7, .55, .4)+texture2D(u_texture3, fract(p*5.)).rgb*.5; // test-terrain is simply 'sandstone'\n}\n\nconst mat2 m = mat2( 0.72, -1.60,  1.60,  0.72 );\n\nfloat water_map( vec2 p, float height ) {\n    vec2 p2 = p*large_wavesize;\n    vec2 shift1 = 0.001*vec2( u_time*160.0*2.0, u_time*120.0*2.0 );\n    vec2 shift2 = 0.001*vec2( u_time*190.0*2.0, -u_time*130.0*2.0 );\n\n    // coarse crossing 'ocean' waves...\n    float f = 0.6000*noise( p );\n    f += 0.2500*noise( p*m );\n    f += 0.1666*noise( p*m*m );\n    float wave = sin(p2.x*0.622+p2.y*0.622+shift2.x*4.269)*large_waveheight*f*height*height ;\n\n    p *= small_wavesize;\n    f = 0.;\n    float amp = 1.0, s = .5;\n    for (int i=0; i<9; i++)\n    { p = m*p*.947; f -= amp*abs(sin((noise( p+shift1*s )-.5)*2.)); amp = amp*.59; s*=-1.329; }\n    \n    return wave+f*small_waveheight;\n}\n\nfloat nautic(vec2 p) {\n    p *= 18.;\n    float f = 0.;\n    float amp = 1.0, s = .5;\n    for (int i=0; i<3; i++)\n    { p = m*p*1.2; f += amp*abs(smoothstep(0., 1., noise( p+u_time*s ))-.5); amp = amp*.5; s*=-1.227; }\n    return pow(1.-f, 5.);\n}\n\nfloat particles(vec2 p) {\n    p *= 200.;\n    float f = 0.;\n    float amp = 1.0, s = 1.5;\n    for (int i=0; i<3; i++)\n    { p = m*p*1.2; f += amp*noise( p+u_time*s ); amp = amp*.5; s*=-1.227; }\n    return pow(f*.35, 7.)*particle_amount;\n}\n\nfloat test_shadow( vec2 xy, float height) {\n    vec3 r0 = vec3(xy, height);\n    vec3 rd = normalize( light - r0 );\n    \n    float hit = 1.0;\n    float t   = 0.001;\n    for (int j=1; j<25; j++)\n    {\n        vec3 p = r0 + t*rd;\n        float h = height_map( p.xy );\n        float height_diff = p.z - h;\n        if (height_diff<0.0)\n        {\n            return 0.0;\n        }\n        t += 0.01+height_diff*.02;\n        hit = min(hit, 2.*height_diff/t); // soft shaddow   \n    }\n    return hit;\n}\n\nvec3 CalcTerrain(vec2 uv, float height) {\n    vec3 col = terrain_map( uv );\n    vec2 iResolution = vec2(512.);\n    float h1 = height_map(uv-vec2(0., 0.5)/ iResolution.xy);\n    float h2 = height_map(uv+vec2(0., 0.5)/ iResolution.xy);\n    float h3 = height_map(uv-vec2(0.5, 0.)/ iResolution.xy);\n    float h4 = height_map(uv+vec2(0.5, 0.)/ iResolution.xy);\n    vec3 norm = normalize(vec3(h3-h4, h1-h2, 1.));\n    vec3 r0 = vec3(uv, height);\n    vec3 rd = normalize( light - r0 );\n    float grad = dot(norm, rd);\n    col *= grad+pow(grad, 8.);\n    float terrainshade = test_shadow( uv, height );\n    col = mix(col*.25, col, terrainshade);\n    return col;\n}\n\n\nvoid main() {\n  vec3 watercolor = u_watercolor.rgb;\n  vec3 watercolor2 = u_watercolor2.rgb;\n  vec2 uv = v_uv;\n  float WATER_LEVEL = 0.84; // Water level (range: 0.0 - 2.0)\n  float deepwater_fadedepth   = 0.4 + coast2water_fadedepth;\n  float height = height_map( uv );\n  vec3 col;\n\n    float waveheight = clamp(WATER_LEVEL*3.-1.5, 0., 1.);\n    float level = WATER_LEVEL + .2*water_map(uv*15. + vec2(u_time*.1), waveheight);\n    if (height > level)\n    {\n        col = CalcTerrain(uv, height);\n    }\n    if (height <= level)\n    {\n        vec2 dif = vec2(.0, .01);\n        vec2 pos = uv*15. + vec2(u_time*.01);\n        float h1 = water_map(pos-dif,waveheight);\n        float h2 = water_map(pos+dif,waveheight);\n        float h3 = water_map(pos-dif.yx,waveheight);\n        float h4 = water_map(pos+dif.yx,waveheight);\n        vec3 normwater = normalize(vec3(h3-h4, h1-h2, .125)); // norm-vector of the 'bumpy' water-plane\n        uv += normwater.xy*.002*(level-height);\n        \n        col = CalcTerrain(uv, height);\n\n        float coastfade = clamp((level-height)/coast2water_fadedepth, 0., 1.);\n        float coastfade2= clamp((level-height)/deepwater_fadedepth, 0., 1.);\n        float intensity = col.r*.2126+col.g*.7152+col.b*.0722;\n        watercolor = mix(watercolor*intensity, watercolor2, smoothstep(0., 1., coastfade2));\n\n        vec3 r0 = vec3(uv, WATER_LEVEL);\n        vec3 rd = normalize( light - r0 ); // ray-direction to the light from water-position\n        float grad     = dot(normwater, rd); // dot-product of norm-vector and light-direction\n        float specular = pow(grad, water_softlight_fact);  // used for soft highlights                          \n        float specular2= pow(grad, water_glossylight_fact); // used for glossy highlights\n        float gradpos  = dot(vec3(0., 0., 1.), rd);\n        float specular1= smoothstep(0., 1., pow(gradpos, 5.));  // used for diffusity (some darker corona around light's specular reflections...)                          \n        float watershade  = test_shadow( uv, level );\n        watercolor *= 2.2+watershade;\n        watercolor += (.2+.8*watershade) * ((grad-1.0)*.5+specular) * .25;\n        watercolor /= (1.+specular1*1.25);\n        watercolor += watershade*specular2*water_specularcolor;\n        watercolor += watershade*coastfade*(1.-coastfade2)*(vec3(.5, .6, .7)*nautic(uv)+vec3(1., 1., 1.)*particles(uv));\n        \n        col = mix(col, watercolor, coastfade);\n    }\n    \n\n  float opacity = u_opacity;\n  gl_FragColor = vec4(col, opacity);  \n}\n",eM='attribute vec2 a_uv;\nattribute vec3 a_Position;\nuniform mat4 u_ModelMatrix;\nuniform mat4 u_Mvp;\n\nvarying vec2 v_uv;\n\n#pragma include "projection"\n\nvoid main() {\n  v_uv = a_uv;\n\n  vec4 project_pos = project_position(vec4(a_Position, 1.0));\n\n  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x\n    gl_Position = u_Mvp * (vec4(project_pos.xyz, 1.0));\n  } else {\n    gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));\n  }\n}\n\n',nM=function(t){Object(st["a"])(n,t);var e=$k(n);function n(){return Object(et["a"])(this,n),e.apply(this,arguments)}return Object(nt["a"])(n,[{key:"getUninforms",value:function(){var t=this.layer.getLayerConfig(),e=t.opacity,n=void 0===e?1:e,r=t.watercolor,i=void 0===r?"#6D99A8":r,o=t.watercolor2,a=void 0===o?"#0F121C":o;return{u_texture1:this.texture1,u_texture2:this.texture2,u_texture3:this.texture3,u_watercolor:li(i),u_watercolor2:li(a),u_opacity:Object(K["isNumber"])(n)?n:1}}},{key:"getAnimateUniforms",value:function(){return{u_time:this.layer.getLayerAnimateTime()}}},{key:"initModels",value:function(){var t=Object(mi["a"])(_i.a.mark((function t(){return _i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.loadTexture(),t.next=3,this.buildModels();case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"buildModels",value:function(){var t=Object(mi["a"])(_i.a.mark((function t(){var e,n,r,i,o,a;return _i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=this.layer.getLayerConfig(),n=e.mask,r=void 0!==n&&n,i=e.maskInside,o=void 0===i||i,t.next=3,this.layer.buildLayerModel({moduleName:"polygonOcean",vertexShader:eM,fragmentShader:tM,triangulation:qb,primitive:Rp.TRIANGLES,depth:{enable:!1},stencil:gi(r,o)});case 3:return a=t.sent,t.abrupt("return",[a]);case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"clearModels",value:function(){var t,e,n;null===(t=this.texture1)||void 0===t||t.destroy(),null===(e=this.texture2)||void 0===e||e.destroy(),null===(n=this.texture3)||void 0===n||n.destroy()}},{key:"registerBuiltinAttributes",value:function(){var t=this.layer.getSource().extent,e=Object(q["a"])(t,4),n=e[0],r=e[1],i=e[2],o=e[3],a=i-n,s=o-r;this.styleAttributeService.registerStyleAttribute({name:"oceanUv",type:ey.Attribute,descriptor:{name:"a_uv",buffer:{usage:Rp.STATIC_DRAW,data:[],type:Rp.FLOAT},size:2,update:function(t,e,i,o){var u=t.version===M_["GAODE2.x"]?t.originCoordinates[0][o]:i,c=Object(q["a"])(u,2),l=c[0],f=c[1];return[(l-n)/a,(f-r)/s]}}})}},{key:"loadTexture",value:function(){var t=this,e=this.rendererService.createTexture2D,n={height:0,width:0};function r(t){var e=0,n=[],r=["https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*EojwT4VzSiYAAAAAAAAAAAAAARQnAQ","https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*MJ22QbpuCzIAAAAAAAAAAAAAARQnAQ","https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*-z2HSIVDsHIAAAAAAAAAAAAAARQnAQ"];r.map((function(r){var i=new Image;i.crossOrigin="",i.src=r,n.push(i),i.onload=function(){e++,3===e&&t(n)}}))}function i(t){return e({data:t,width:t.width,height:t.height,wrapS:Rp.MIRRORED_REPEAT,wrapT:Rp.MIRRORED_REPEAT,min:Rp.LINEAR,mag:Rp.LINEAR})}this.texture1=e(n),this.texture2=e(n),this.texture3=e(n),r((function(e){t.texture1=i(e[0]),t.texture2=i(e[1]),t.texture3=i(e[2]),t.layerService.reRender()}))}}]),n}(db);function rM(t){var e=iM();return function(){var n,r=Object(ct["a"])(t);if(e){var i=Object(ct["a"])(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(ut["a"])(this,n)}}function iM(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}var oM='uniform float u_opacity : 1.0;\nvarying vec4 v_color;\n\n#pragma include "picking"\n\nvoid main() {\n  gl_FragColor = v_color;\n  gl_FragColor.a *= u_opacity;\n  gl_FragColor = filterColor(gl_FragColor);\n}\n',aM='attribute vec4 a_Color;\nattribute vec3 a_Position;\n\nuniform mat4 u_ModelMatrix;\nuniform mat4 u_Mvp;\n\n// uniform vec2 u_tileOrigin;\n// uniform float u_coord;\n\nvarying vec4 v_color;\n\n#pragma include "projection"\n#pragma include "picking"\n\nvoid main() {\n  v_color = a_Color;\n  vec4 project_pos = project_position(vec4(a_Position, 1.0));\n\n  // if(u_coord > 0.0) {\n    if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x\n      gl_Position = u_Mvp * (vec4(project_pos.xyz, 1.0));\n    } else {\n      gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));\n    }\n  // } else {\n  //   vec4 world = vec4(project_mvt_offset_position(vec4(u_tileOrigin, 0.0, 1.0)).xyz, 1.0); // \u74e6\u7247\u8d77\u59cb\u70b9\u7684\u4e16\u754c\u5750\u6807\n\n  //   vec2 pointOffset = a_Position.xy *  pow(2.0, u_Zoom); // \u74e6\u7247\u5185\u7684\u70b9\u7684\u504f\u79fb\u5750\u6807\n    \n  //   world.xy += pointOffset;\n\n  //   if (u_CoordinateSystem == COORDINATE_SYSTEM_METER_OFFSET || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {\n  //     // Needs to be divided with project_uCommonUnitsPerMeter\n  //     world.w *= u_PixelsPerMeter.z;\n  //   }\n\n  //   gl_Position = u_ViewProjectionMatrix * world + u_ViewportCenterProjection;\n  // }\n\n  setPickingColor(a_PickingColor);\n}\n\n',sM="uniform float u_opacity : 1.0;\nuniform vec4 u_color;\n\nvoid main() {\n  gl_FragColor = u_color;\n  gl_FragColor.a *= u_opacity;\n}\n",uM='attribute vec3 a_Position;\n\nuniform mat4 u_ModelMatrix;\nuniform mat4 u_Mvp;\n\n#pragma include "projection"\n\nvoid main() {\n  vec4 project_pos = project_position(vec4(a_Position, 1.0));\n\n  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x\n    gl_Position = u_Mvp * (vec4(project_pos.xyz, 1.0));\n  } else {\n    gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));\n  }\n}',cM=function(t){Object(st["a"])(n,t);var e=rM(n);function n(){return Object(et["a"])(this,n),e.apply(this,arguments)}return Object(nt["a"])(n,[{key:"getUninforms",value:function(){var t=this.layer.getLayerConfig(),e=t.opacity,n=void 0===e?1:e,r=t.usage,i=t.color,o=void 0===i?"#fff":i;return{u_opacity:n,u_color:"basemap"===r?li(o):[0,0,0,0]}}},{key:"initModels",value:function(){var t=Object(mi["a"])(_i.a.mark((function t(){return _i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.buildModels();case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"buildModels",value:function(){var t=Object(mi["a"])(_i.a.mark((function t(){var e,n,r,i,o,a,s;return _i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=this.layer.getLayerConfig(),n=e.mask,r=void 0!==n&&n,i=e.maskInside,o=void 0===i||i,a=e.usage,this.layer.triangulation=qb,t.next=4,this.layer.buildLayerModel({moduleName:"polygonTile_"+a,vertexShader:"basemap"===a?uM:aM,fragmentShader:"basemap"===a?sM:oM,triangulation:qb,depth:{enable:!1},blend:this.getBlend(),stencil:gi(r,o),pick:"basemap"!==a});case 4:return s=t.sent,t.abrupt("return",[s]);case 6:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"clearModels",value:function(){}},{key:"registerBuiltinAttributes",value:function(){}}]),n}(db);function lM(t){var e=fM();return function(){var n,r=Object(ct["a"])(t);if(e){var i=Object(ct["a"])(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(ut["a"])(this,n)}}function fM(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}var hM="uniform sampler2D u_texture;\nuniform float u_time: 0.0;\nuniform float u_speed: 1.0;\nuniform float u_opacity: 1.0;\n\nvarying vec4 v_Color;\nvarying vec2 v_uv;\n\nfloat rand(vec2 n) { return 0.5 + 0.5 * fract(sin(dot(n.xy, vec2(12.9898, 78.233)))* 43758.5453); }\n\nfloat water(vec3 p) {\n  float t = u_time * u_speed;\n  p.z += t * 2.; p.x += t * 2.;\n  vec3 c1 = texture2D(u_texture, p.xz / 30.).xyz;\n  p.z += t * 3.; p.x += t * 0.52;\n  vec3 c2 = texture2D(u_texture, p.xz / 30.).xyz;\n  p.z += t * 4.; p.x += t * 0.8;\n  vec3 c3 = texture2D(u_texture, p.xz / 30.).xyz;\n  c1 += c2 - c3;\n  float z = (c1.x + c1.y + c1.z) / 3.;\n  return p.y + z / 4.;\n}\n\nfloat map(vec3 p) {\n  float d = 100.0;\n  d = water(p);\n  return d;\n}\n\nfloat intersect(vec3 ro, vec3 rd) {\n  float d = 0.0;\n  for (int i = 0; i <= 100; i++) {\n    float h = map(ro + rd * d);\n    if (h < 0.1) return  d;\n    d += h;\n  }\n  return 0.0;\n}\n\nvec3 norm(vec3 p) {\n  float eps = .1;\n  return normalize(vec3(\n    map(p + vec3(eps, 0, 0)) - map(p + vec3(-eps, 0, 0)),\n    map(p + vec3(0, eps, 0)) - map(p + vec3(0, -eps, 0)),\n    map(p + vec3(0, 0, eps)) - map(p + vec3(0, 0, -eps))\n  ));\n} \n\nfloat calSpc() {\n  vec3 l1 = normalize(vec3(1, 1, 1));\n  vec3 ro = vec3(-3, 20, -8);\n  vec3 rc = vec3(0, 0, 0);\n  vec3 ww = normalize(rc - ro);\n  vec3 uu = normalize(cross(vec3(0,1,0), ww));\n  vec3 vv = normalize(cross(rc - ro, uu));\n  vec3 rd = normalize(uu * v_uv.x + vv * v_uv.y + ww);\n  float d = intersect(ro, rd);\n  vec3 p = ro + rd * d;\n  vec3 n = norm(p);\n  float spc = pow(max(0.0, dot(reflect(l1, n), rd)), 30.0);\n  return spc;\n}\n\nvoid main() {\n  float opacity = u_opacity;\n  gl_FragColor = v_Color;\n  gl_FragColor.a *= opacity;\n\n  float spc = calSpc();\n  gl_FragColor += spc * 0.4;\n}\n",pM='attribute vec4 a_Color;\nattribute vec2 a_uv;\nattribute vec3 a_Position;\nuniform mat4 u_ModelMatrix;\nuniform mat4 u_Mvp;\n\nvarying vec4 v_Color;\nvarying vec2 v_uv;\nuniform float u_opacity: 1.0;\n\n\n#pragma include "projection"\n\nvoid main() {\n  v_uv = a_uv;\n\n  v_Color = a_Color;\n  vec4 project_pos = project_position(vec4(a_Position, 1.0));\n\n  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x\n    gl_Position = u_Mvp * (vec4(project_pos.xyz, 1.0));\n  } else {\n    gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));\n  }\n}\n\n',dM=function(t){Object(st["a"])(n,t);var e=lM(n);function n(){return Object(et["a"])(this,n),e.apply(this,arguments)}return Object(nt["a"])(n,[{key:"getUninforms",value:function(){var t=this.layer.getLayerConfig(),e=t.opacity,n=void 0===e?1:e,r=t.speed,i=void 0===r?.5:r;return{u_texture:this.texture,u_speed:i,u_opacity:Object(K["isNumber"])(n)?n:1}}},{key:"getAnimateUniforms",value:function(){return{u_time:this.layer.getLayerAnimateTime()}}},{key:"initModels",value:function(){var t=Object(mi["a"])(_i.a.mark((function t(){return _i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.loadTexture(),t.next=3,this.buildModels();case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"buildModels",value:function(){var t=Object(mi["a"])(_i.a.mark((function t(){var e,n,r,i,o,a;return _i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=this.layer.getLayerConfig(),n=e.mask,r=void 0!==n&&n,i=e.maskInside,o=void 0===i||i,t.next=3,this.layer.buildLayerModel({moduleName:"polygonWater",vertexShader:pM,fragmentShader:hM,triangulation:qb,primitive:Rp.TRIANGLES,depth:{enable:!1},stencil:gi(r,o)});case 3:return a=t.sent,t.abrupt("return",[a]);case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"clearModels",value:function(){var t;null===(t=this.texture)||void 0===t||t.destroy()}},{key:"registerBuiltinAttributes",value:function(){var t=this.layer.getSource().extent,e=Object(q["a"])(t,4),n=e[0],r=e[1],i=e[2],o=e[3],a=i-n,s=o-r;this.styleAttributeService.registerStyleAttribute({name:"waterUv",type:ey.Attribute,descriptor:{name:"a_uv",buffer:{usage:Rp.STATIC_DRAW,data:[],type:Rp.FLOAT},size:2,update:function(t,e,i,o){var u=t.version===M_["GAODE2.x"]?t.originCoordinates[0][o]:i,c=Object(q["a"])(u,2),l=c[0],f=c[1];return[(l-n)/a,(f-r)/s]}}})}},{key:"loadTexture",value:function(){var t=this,e=this.layer.getLayerConfig(),n=e.waterTexture,r=this.rendererService.createTexture2D;this.texture=r({height:0,width:0});var i=new Image;i.crossOrigin="",n?(console.warn("L7 recommend\uff1ahttps://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*EojwT4VzSiYAAAAAAAAAAAAAARQnAQ"),i.src=n):i.src="https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*EojwT4VzSiYAAAAAAAAAAAAAARQnAQ",i.onload=function(){t.texture=r({data:i,width:i.width,height:i.height,wrapS:Rp.MIRRORED_REPEAT,wrapT:Rp.MIRRORED_REPEAT,min:Rp.LINEAR,mag:Rp.LINEAR}),t.layerService.reRender()}}}]),n}(db),vM={fill:Qk,line:$x,extrude:Gk,text:fk,point_fill:pA,point_image:EA,point_normal:kA,point_extrude:sA,water:dM,ocean:nM,tile:cM},gM=vM;function mM(t){var e=yM();return function(){var n,r=Object(ct["a"])(t);if(e){var i=Object(ct["a"])(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(ut["a"])(this,n)}}function yM(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}var _M=function(t){Object(st["a"])(n,t);var e=mM(n);function n(){var t;Object(et["a"])(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return t=e.call.apply(e,[this].concat(i)),Object(Ar["a"])(Object(ft["a"])(t),"type","PolygonLayer"),t}return Object(nt["a"])(n,[{key:"buildModels",value:function(){var t=Object(mi["a"])(_i.a.mark((function t(){var e;return _i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=this.getModelType(),this.layerModel=new gM[e](this),t.next=4,this.initLayerModels();case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"getModelType",value:function(){var t,e=this.styleAttributeService.getLayerStyleAttribute("shape"),n=null===e||void 0===e||null===(t=e.scale)||void 0===t?void 0:t.field;return"fill"===n?"fill":"extrude"===n?"extrude":"water"===n?"water":"ocean"===n?"ocean":"line"===n?"line":"tile"===n?"tile":this.getPointModelType()}},{key:"getPointModelType",value:function(){var t=this.getEncodedData(),e=this.getLayerConfig(),n=e.shape2d,r=e.shape3d,i=this.iconService.getIconMap(),o=t.find((function(t){return t.hasOwnProperty("shape")}));if(o){var a=o.shape;return"dot"===a?"point_normal":-1!==(null===n||void 0===n?void 0:n.indexOf(a))?"point_fill":-1!==(null===r||void 0===r?void 0:r.indexOf(a))?"point_extrude":i.hasOwnProperty(a)?"point_image":"text"}return"fill"}}]),n}(lb);function bM(t){return"PolygonLayer"===t?_M:"LineLayer"===t?Cw:Lk}function xM(t){return-1!==["PolygonLayer","LineLayer"].indexOf(t)}var wM=function(){function t(e,n){Object(et["a"])(this,t),Object(Ar["a"])(this,"visible",!0),Object(Ar["a"])(this,"layers",[]),Object(Ar["a"])(this,"isLoaded",!1),this.parent=n,this.sourceTile=e,this.x=e.x,this.y=e.y,this.z=e.z,this.key="".concat(this.x,"_").concat(this.y,"_").concat(this.z)}return Object(nt["a"])(t,[{key:"getLayers",value:function(){return this.layers}},{key:"styleUpdate",value:function(){}},{key:"lnglatInBounds",value:function(t){var e=Object(q["a"])(this.sourceTile.bounds,4),n=e[0],r=e[1],i=e[2],o=e[3],a=t.lng,s=t.lat;return a>=n&&a<=i&&s>=r&&s<=o}},{key:"getLayerOptions",value:function(){var t=this.parent.getLayerConfig();return Object(P["a"])(Object(P["a"])({},t),{},{autoFit:!1,mask:xM(this.parent.type)||t.mask})}},{key:"addMask",value:function(){var t=Object(mi["a"])(_i.a.mark((function t(e,n){var r;return _i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=Qm(this.parent.sceneContainer),n.setContainer(r,this.parent.sceneContainer),t.next=4,n.init();case 4:e.addMaskLayer(n);case 5:case"end":return t.stop()}}),t,this)})));function e(e,n){return t.apply(this,arguments)}return e}()},{key:"addLayer",value:function(){var t=Object(mi["a"])(_i.a.mark((function t(e){var n;return _i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.isTileLayer=!0,n=Qm(this.parent.sceneContainer),e.setContainer(n,this.parent.sceneContainer),this.layers.push(e),t.next=6,e.init();case 6:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"updateVisible",value:function(t){this.visible=t,this.updateOptions("visible",t)}},{key:"updateOptions",value:function(t,e){this.layers.forEach((function(n){n.updateLayerConfig(Object(Ar["a"])({},t,e))}))}},{key:"getMainLayer",value:function(){return this.layers[0]}},{key:"getFeatures",value:function(t){return[]}},{key:"getFeatureById",value:function(t){return[]}},{key:"destroy",value:function(){this.layers.forEach((function(t){return t.destroy()}))}}]),t}();function EM(t){var e=SM();return function(){var n,r=Object(ct["a"])(t);if(e){var i=Object(ct["a"])(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(ut["a"])(this,n)}}function SM(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}var OM=function(t){Object(st["a"])(n,t);var e=EM(n);function n(){return Object(et["a"])(this,n),e.apply(this,arguments)}return Object(nt["a"])(n,[{key:"initTileLayer",value:function(){var t=Object(mi["a"])(_i.a.mark((function t(){var e,n,r,i,o;return _i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e=this.parent.getLayerAttributeConfig(),n=this.getLayerOptions(),r=bM(this.parent.type),i=this.getSourceOption(),i){t.next=7;break}return this.isLoaded=!0,t.abrupt("return");case 7:if(o=new r(Object(P["a"])({},n)).source(i.data,i.options),Object.keys(e).forEach((function(t){var n,r,i=t;o[i](null===(n=e[i])||void 0===n?void 0:n.field,null===(r=e[i])||void 0===r?void 0:r.values)})),!n.mask){t.next=12;break}return t.next=12,this.addTileMask(o);case 12:return t.next=14,this.addLayer(o);case 14:this.setLayerMinMaxZoom(o),this.isLoaded=!0;case 16:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"addTileMask",value:function(){var t=Object(mi["a"])(_i.a.mark((function t(e){var n;return _i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=new Ww({layerType:"MaskLayer"}).source({type:"FeatureCollection",features:[this.sourceTile.bboxPolygon]},{parser:{type:"geojson",featureId:"id"}}),t.next=3,this.addMask(e,n);case 3:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"getSourceOption",value:function(){var t=this.parent.getSource(),e=this.parent.getLayerConfig(),n=e.sourceLayer,r=void 0===n?"defaultLayer":n,i=e.featureId,o=void 0===i?"id":i,a=this.getFeatures(r);return{data:{type:"FeatureCollection",features:a},options:{parser:{type:"geojson",featureId:o},transforms:t.transforms}}}},{key:"setLayerMinMaxZoom",value:function(t){"text"===t.getModelType()&&t.updateLayerConfig({maxZoom:this.z+1,minZoom:this.z-1})}},{key:"getFeatures",value:function(t){var e=this.sourceTile.data;return e.getTileData(t)}},{key:"getFeatureById",value:function(t){var e=this.getMainLayer();return e?e.getSource().data.dataArray.filter((function(e){return e._id===t})):[]}}]),n}(wM);function CM(t){var e=TM();return function(){var n,r=Object(ct["a"])(t);if(e){var i=Object(ct["a"])(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(ut["a"])(this,n)}}function TM(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}var AM=function(t){Object(st["a"])(n,t);var e=CM(n);function n(){return Object(et["a"])(this,n),e.apply(this,arguments)}return Object(nt["a"])(n,[{key:"initTileLayer",value:function(){var t=Object(mi["a"])(_i.a.mark((function t(){var e,n,r,i;return _i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=this.getSourceOption(),n=e.data.features[0].properties,r=(new Cw).source(e.data,e.options).size(1).shape("line").color("red"),i=new Lk({minZoom:this.z-1,maxZoom:this.z+1}).source([n],{parser:{type:"json",x:"textLng",y:"textLat"}}).size(20).color("red").shape(this.key).style({stroke:"#fff",strokeWidth:2}),t.next=6,this.addLayer(r);case 6:return t.next=8,this.addLayer(i);case 8:this.isLoaded=!0;case 9:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"getSourceOption",value:function(){var t=this.parent.getSource(),e=this.sourceTile.data.layers["testTile"].features;return{data:{type:"FeatureCollection",features:e},options:{parser:{type:"geojson"},transforms:t.transforms}}}}]),n}(wM);function kM(t){var e=MM();return function(){var n,r=Object(ct["a"])(t);if(e){var i=Object(ct["a"])(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(ut["a"])(this,n)}}function MM(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}var PM="precision mediump float;\nuniform float u_opacity: 1.0;\nuniform sampler2D u_texture;\nvarying vec2 v_texCoord;\nvoid main() {\n  vec4 color = texture2D(u_texture,vec2(v_texCoord.x,v_texCoord.y));\n  gl_FragColor = color;\n  gl_FragColor.a *= u_opacity;\n}\n",RM='precision highp float;\nuniform mat4 u_ModelMatrix;\nuniform mat4 u_Mvp;\nattribute vec3 a_Position;\nattribute vec2 a_Uv;\nvarying vec2 v_texCoord;\n#pragma include "projection"\nvoid main() {\n   v_texCoord = a_Uv;\n   vec4 project_pos = project_position(vec4(a_Position, 1.0));\n   // gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy,0., 1.0));\n   if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x\n      gl_Position = u_Mvp * (vec4(project_pos.xy,0., 1.0));\n   } else {\n      gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy,0., 1.0));\n   }\n}\n',jM=function(t){Object(st["a"])(n,t);var e=kM(n);function n(){return Object(et["a"])(this,n),e.apply(this,arguments)}return Object(nt["a"])(n,[{key:"getUninforms",value:function(){var t=this.layer.getLayerConfig(),e=t.opacity;return{u_opacity:e||1,u_texture:this.texture}}},{key:"initModels",value:function(){var t=Object(mi["a"])(_i.a.mark((function t(){var e,n,r,i,o,a,s,u,c,l,f,h=this;return _i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e=this.layer.getLayerConfig(),n=e.mask,r=void 0!==n&&n,i=e.maskInside,o=void 0===i||i,a=this.layer.getSource(),s=this.rendererService.createTexture2D,this.texture=s({height:0,width:0}),!on){t.next=12;break}u=this.layerService.sceneService.getSceneConfig().canvas,c=u.createImage(),c.crossOrigin="anonymous",c.src=a.data.originData,c.onload=function(){h.texture=s({data:c,width:c.width,height:c.height}),h.layerService.reRender()},t.next=16;break;case 12:return t.next=14,a.data.images;case 14:l=t.sent,this.texture=s({data:l[0],width:l[0].width,height:l[0].height,mag:Rp.LINEAR,min:Rp.LINEAR});case 16:return t.next=18,this.layer.buildLayerModel({moduleName:"rasterImage",vertexShader:RM,fragmentShader:PM,triangulation:Jb,primitive:Rp.TRIANGLES,blend:{enable:!0},depth:{enable:!1},stencil:gi(r,o)});case 18:return f=t.sent,t.abrupt("return",[f]);case 20:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"clearModels",value:function(){var t;null===(t=this.texture)||void 0===t||t.destroy()}},{key:"buildModels",value:function(){var t=Object(mi["a"])(_i.a.mark((function t(){return _i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.initModels();case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"uv",type:ey.Attribute,descriptor:{name:"a_Uv",buffer:{usage:Rp.DYNAMIC_DRAW,data:[],type:Rp.FLOAT},size:2,update:function(t,e,n){return[n[3],n[4]]}}})}}]),n}(db),IM={image:jM},LM=IM;function NM(t){var e=DM();return function(){var n,r=Object(ct["a"])(t);if(e){var i=Object(ct["a"])(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(ut["a"])(this,n)}}function DM(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}var FM=function(t){Object(st["a"])(n,t);var e=NM(n);function n(){var t;Object(et["a"])(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return t=e.call.apply(e,[this].concat(i)),Object(Ar["a"])(Object(ft["a"])(t),"type","ImageLayer"),t}return Object(nt["a"])(n,[{key:"buildModels",value:function(){var t=Object(mi["a"])(_i.a.mark((function t(){var e;return _i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=this.getModelType(),this.layerModel=new LM[e](this),t.next=4,this.initLayerModels();case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"getDefaultConfig",value:function(){var t=this.getModelType(),e={image:{}};return e[t]}},{key:"getModelType",value:function(){return"image"}}]),n}(lb);function BM(t){var e=zM();return function(){var n,r=Object(ct["a"])(t);if(e){var i=Object(ct["a"])(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(ut["a"])(this,n)}}function zM(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}var UM=function(t){Object(st["a"])(n,t);var e=BM(n);function n(){return Object(et["a"])(this,n),e.apply(this,arguments)}return Object(nt["a"])(n,[{key:"initTileLayer",value:function(){var t=Object(mi["a"])(_i.a.mark((function t(){var e,n,r,i;return _i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=this.parent.getLayerAttributeConfig(),n=this.getLayerOptions(),r=this.getSourceOption(),i=new FM(Object(P["a"])({},n)).source(r.data,r.options),e&&Object.keys(e).forEach((function(t){var n,r,o=t;i[o](null===(n=e[o])||void 0===n?void 0:n.field,null===(r=e[o])||void 0===r?void 0:r.values)})),t.next=7,this.addLayer(i);case 7:this.isLoaded=!0;case 8:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"getSourceOption",value:function(){var t=this.parent.getSource();return{data:this.sourceTile.data,options:{parser:{type:"image",extent:this.sourceTile.bounds},transforms:t.transforms}}}}]),n}(wM);function VM(t){var e=HM();return function(){var n,r=Object(ct["a"])(t);if(e){var i=Object(ct["a"])(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(ut["a"])(this,n)}}function HM(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}var GM="precision mediump float;\nuniform float u_opacity: 1.0;\nuniform sampler2D u_texture;\nuniform sampler2D u_colorTexture;\nuniform float u_min;\nuniform float u_max;\nuniform vec2 u_domain;\nuniform float u_noDataValue;\nuniform bool u_clampLow: true;\nuniform bool u_clampHigh: true;\nvarying vec2 v_texCoord;\nbool isnan_emu(float x) { return (x > 0.0 || x < 0.0) ? x != x : x != 0.0; }\n\n\nvoid main() {\n\n  float value = texture2D(u_texture,vec2(v_texCoord.x,v_texCoord.y)).r;\n  if (value == u_noDataValue || isnan_emu(value))\n    gl_FragColor = vec4(0.0, 0, 0, 0.0);\n  else if ((!u_clampLow && value < u_domain[0]) || (!u_clampHigh && value > u_domain[1]))\n    gl_FragColor = vec4(0, 0, 0, 0);\n  else {\n    float normalisedValue =(value - u_domain[0]) / (u_domain[1] -u_domain[0]);\n    vec4 color = texture2D(u_colorTexture,vec2(normalisedValue, 0));\n    gl_FragColor = color;\n    gl_FragColor.a =  gl_FragColor.a * u_opacity ;\n  }\n}\n",WM='precision highp float;\nuniform mat4 u_ModelMatrix;\nuniform mat4 u_Mvp;\nattribute vec3 a_Position;\nattribute vec2 a_Uv;\nvarying vec2 v_texCoord;\n#pragma include "projection"\nvoid main() {\n   v_texCoord = a_Uv;\n   vec4 project_pos = project_position(vec4(a_Position, 1.0));\n\n   if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x\n      gl_Position = u_Mvp * (vec4(project_pos.xy,0., 1.0));\n   } else {\n      gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy,0., 1.0));\n   }\n}\n',ZM=function(t){Object(st["a"])(n,t);var e=VM(n);function n(){return Object(et["a"])(this,n),e.apply(this,arguments)}return Object(nt["a"])(n,[{key:"getUninforms",value:function(){var t=this.layer.getLayerConfig(),e=t.opacity,n=void 0===e?1:e,r=t.clampLow,i=void 0===r||r,o=t.clampHigh,a=void 0===o||o,s=t.noDataValue,u=void 0===s?-9999999:s,c=t.domain,l=void 0===c?[0,1]:c,f=t.rampColors;return this.colorTexture=this.layer.textureService.getColorTexture(f),{u_opacity:n||1,u_texture:this.texture,u_domain:l,u_clampLow:i,u_clampHigh:"undefined"!==typeof a?a:i,u_noDataValue:u,u_colorTexture:this.colorTexture}}},{key:"getRasterData",value:function(){var t=Object(mi["a"])(_i.a.mark((function t(e){var n,r,i,o;return _i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!Array.isArray(e.data)){t.next=4;break}return t.abrupt("return",{data:e.data,width:e.width,height:e.height});case 4:return t.next=6,e.data;case 6:return n=t.sent,r=n.rasterData,i=n.width,o=n.height,t.abrupt("return",{data:Array.from(r),width:i,height:o});case 11:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"initModels",value:function(){var t=Object(mi["a"])(_i.a.mark((function t(){var e,n,r,i,o,a,s,u,c,l,f,h,p;return _i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=this.layer.getLayerConfig(),n=e.mask,r=void 0!==n&&n,i=e.maskInside,o=void 0===i||i,a=this.layer.getSource(),s=this.rendererService.createTexture2D,u=a.data.dataArray[0],t.next=6,this.getRasterData(u);case 6:return c=t.sent,l=c.data,f=c.width,h=c.height,this.texture=s({data:l,width:f,height:h,format:Rp.LUMINANCE,type:Rp.FLOAT}),t.next=13,this.layer.buildLayerModel({moduleName:"rasterImageData",vertexShader:WM,fragmentShader:GM,triangulation:Jb,primitive:Rp.TRIANGLES,depth:{enable:!1},stencil:gi(r,o)});case 13:return p=t.sent,t.abrupt("return",[p]);case 15:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"buildModels",value:function(){var t=Object(mi["a"])(_i.a.mark((function t(){return _i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.initModels();case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"clearModels",value:function(){var t,e;null===(t=this.texture)||void 0===t||t.destroy(),null===(e=this.colorTexture)||void 0===e||e.destroy()}},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"uv",type:ey.Attribute,descriptor:{name:"a_Uv",buffer:{usage:Rp.DYNAMIC_DRAW,data:[],type:Rp.FLOAT},size:2,update:function(t,e,n){return[n[3],n[4]]}}})}},{key:"updateColorTexture",value:function(){var t=this.rendererService.createTexture2D,e=this.layer.getLayerConfig(),n=e.rampColors,r=pi(n);this.colorTexture=t({data:r.data,width:r.width,height:r.height,flipY:!1})}}]),n}(db),YM=["data"],XM=["rasterData"];function qM(t){var e=KM();return function(){var n,r=Object(ct["a"])(t);if(e){var i=Object(ct["a"])(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(ut["a"])(this,n)}}function KM(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}var QM="precision mediump float;\nuniform vec2 u_rminmax: vec2(0,255); \nuniform vec2 u_gminmax: vec2(0,255);\nuniform vec2 u_bminmax: vec2(0,255);\nuniform float u_opacity: 1.0;\nuniform sampler2D u_texture;\nuniform float u_noDataValue : 0.0;\nvarying vec2 v_texCoord;\n\nvoid main() {\n  vec3 rgb = texture2D(u_texture,vec2(v_texCoord.x,v_texCoord.y)).rgb;\n  if(rgb == vec3(u_noDataValue)) {\n    gl_FragColor = vec4(0.0, 0, 0, 0.0);\n  } else {\n    gl_FragColor = vec4(rgb.r / (u_rminmax.y -u_rminmax.x), rgb.g /(u_gminmax.y -u_gminmax.x), rgb.b/ (u_bminmax.y - u_bminmax.x), u_opacity);\n  }\n \n}",$M='precision highp float;\nuniform mat4 u_ModelMatrix;\nuniform mat4 u_Mvp;\nattribute vec3 a_Position;\nattribute vec2 a_Uv;\nvarying vec2 v_texCoord;\n#pragma include "projection"\nvoid main() {\n   v_texCoord = a_Uv;\n   vec4 project_pos = project_position(vec4(a_Position, 1.0));\n\n   if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x\n      gl_Position = u_Mvp * (vec4(project_pos.xy,0., 1.0));\n   } else {\n      gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy,0., 1.0));\n   }\n}\n',JM=function(t){Object(st["a"])(n,t);var e=qM(n);function n(){var t;Object(et["a"])(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return t=e.call.apply(e,[this].concat(i)),Object(Ar["a"])(Object(ft["a"])(t),"dataOption",{}),t}return Object(nt["a"])(n,[{key:"getUninforms",value:function(){var t=this.layer.getLayerConfig(),e=t.opacity,n=void 0===e?1:e,r=t.noDataValue,i=void 0===r?0:r,o=this.dataOption,a=o.rMinMax,s=o.gMinMax,u=o.bMinMax;return{u_opacity:n||1,u_texture:this.texture,u_noDataValue:i,u_rminmax:a,u_gminmax:s,u_bminmax:u}}},{key:"getRasterData",value:function(){var t=Object(mi["a"])(_i.a.mark((function t(e){var n,r,i,o,a;return _i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!Array.isArray(e.data)){t.next=4;break}return n=e.data,r=Object(Gf["a"])(e,YM),this.dataOption=r,t.abrupt("return",Object(P["a"])({data:n},r));case 4:return t.next=6,e.data;case 6:if(i=t.sent,o=i.rasterData,a=Object(Gf["a"])(i,XM),this.dataOption=a,!Array.isArray(o)){t.next=14;break}return t.abrupt("return",Object(P["a"])({data:o},a));case 14:return t.abrupt("return",Object(P["a"])({data:Array.from(o)},a));case 15:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"initModels",value:function(){var t=Object(mi["a"])(_i.a.mark((function t(){var e,n,r,i,o,a,s,u,c,l,f,h,p;return _i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=this.layer.getLayerConfig(),n=e.mask,r=void 0!==n&&n,i=e.maskInside,o=void 0===i||i,a=this.layer.getSource(),s=this.rendererService.createTexture2D,u=a.data.dataArray[0],t.next=6,this.getRasterData(u);case 6:return c=t.sent,l=c.data,f=c.width,h=c.height,this.texture=s({data:l,width:f,height:h,format:Rp.RGB,type:Rp.FLOAT}),t.next=13,this.layer.buildLayerModel({moduleName:"rasterImageDataRGBA",vertexShader:$M,fragmentShader:QM,triangulation:Jb,primitive:Rp.TRIANGLES,depth:{enable:!1},stencil:gi(r,o)});case 13:return p=t.sent,t.abrupt("return",[p]);case 15:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"buildModels",value:function(){var t=Object(mi["a"])(_i.a.mark((function t(){return _i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.initModels();case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"clearModels",value:function(){var t;null===(t=this.texture)||void 0===t||t.destroy()}},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"uv",type:ey.Attribute,descriptor:{name:"a_Uv",buffer:{usage:Rp.DYNAMIC_DRAW,data:[],type:Rp.FLOAT},size:2,update:function(t,e,n){return[n[3],n[4]]}}})}}]),n}(db);function tP(t){var e=eP();return function(){var n,r=Object(ct["a"])(t);if(e){var i=Object(ct["a"])(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(ut["a"])(this,n)}}function eP(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}var nP="precision mediump float;\nuniform float u_opacity: 1.0;\n\nuniform sampler2D u_texture;\nuniform sampler2D u_colorTexture;\n\nvarying vec2 v_texCoord;\n\nuniform vec2 u_domain;\nuniform float u_noDataValue;\nuniform bool u_clampLow: true;\nuniform bool u_clampHigh: true;\n\nvoid main() {\n  vec4 baseColor = texture2D(u_texture, vec2(v_texCoord.x, v_texCoord.y)) * 256.0;\n  float r = baseColor.r * 256.0 * 256.0;\n  float g = baseColor.g * 256.0;\n  float b = baseColor.b;\n  float value =  (r + g + b) * 0.1 - 10000.0;\n  \n  if (value == u_noDataValue) {\n    gl_FragColor = vec4(0.0, 0, 0, 0.0);\n  } else if ((!u_clampLow && value < u_domain[0]) || (!u_clampHigh && value > u_domain[1])) {\n     gl_FragColor = vec4(0.0, 0, 0, 0.0);\n  } else {\n    float normalisedValue =(value - u_domain[0]) / (u_domain[1] - u_domain[0]);\n    vec4 color = texture2D(u_colorTexture, vec2(normalisedValue, 0));\n    gl_FragColor = color;\n    gl_FragColor.a =  gl_FragColor.a * u_opacity ;\n  }\n}\n",rP='precision highp float;\nuniform mat4 u_ModelMatrix;\nuniform mat4 u_Mvp;\nattribute vec3 a_Position;\nattribute vec2 a_Uv;\nvarying vec2 v_texCoord;\n#pragma include "projection"\nvoid main() {\n   v_texCoord = a_Uv;\n   vec4 project_pos = project_position(vec4(a_Position, 1.0));\n   // gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy,0., 1.0));\n   if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x\n      gl_Position = u_Mvp * (vec4(project_pos.xy,0., 1.0));\n   } else {\n      gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy,0., 1.0));\n   }\n}\n',iP=function(t){Object(st["a"])(n,t);var e=tP(n);function n(){return Object(et["a"])(this,n),e.apply(this,arguments)}return Object(nt["a"])(n,[{key:"getUninforms",value:function(){var t=this.layer.getLayerConfig(),e=t.opacity,n=t.clampLow,r=void 0===n||n,i=t.clampHigh,o=void 0===i||i,a=t.noDataValue,s=void 0===a?-9999999:a,u=t.domain,c=void 0===u?[0,1]:u,l=t.rampColors,f=t.colorTexture,h=f;return f?this.layer.textureService.setColorTexture(f,l):h=this.layer.textureService.getColorTexture(l),{u_opacity:e||1,u_texture:this.texture,u_domain:c,u_clampLow:r,u_clampHigh:"undefined"!==typeof o?o:r,u_noDataValue:s,u_colorTexture:h}}},{key:"initModels",value:function(){var t=Object(mi["a"])(_i.a.mark((function t(){var e,n,r,i,o,a,s,u,c;return _i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=this.layer.getLayerConfig(),n=e.mask,r=void 0!==n&&n,i=e.maskInside,o=void 0===i||i,a=this.layer.getSource(),s=this.rendererService.createTexture2D,t.next=5,a.data.images;case 5:return u=t.sent,this.texture=s({data:u[0],width:u[0].width,height:u[0].height}),t.next=9,this.layer.buildLayerModel({moduleName:"RasterTileDataImage",vertexShader:rP,fragmentShader:nP,triangulation:Jb,primitive:Rp.TRIANGLES,depth:{enable:!1},blend:this.getBlend(),stencil:gi(r,o)});case 9:return c=t.sent,t.abrupt("return",[c]);case 11:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"clearModels",value:function(){var t;null===(t=this.texture)||void 0===t||t.destroy()}},{key:"buildModels",value:function(){var t=Object(mi["a"])(_i.a.mark((function t(){return _i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.initModels();case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"uv",type:ey.Attribute,descriptor:{name:"a_Uv",buffer:{usage:Rp.DYNAMIC_DRAW,data:[],type:Rp.FLOAT},size:2,update:function(t,e,n){return[n[3],n[4]]}}})}}]),n}(db),oP={raster:ZM,rasterRgb:JM,raster3d:ZM,rasterTerrainRgb:iP},aP=oP;function sP(t){var e=uP();return function(){var n,r=Object(ct["a"])(t);if(e){var i=Object(ct["a"])(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(ut["a"])(this,n)}}function uP(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}var cP=function(t){Object(st["a"])(n,t);var e=sP(n);function n(){var t;Object(et["a"])(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return t=e.call.apply(e,[this].concat(i)),Object(Ar["a"])(Object(ft["a"])(t),"type","RasterLayer"),t}return Object(nt["a"])(n,[{key:"buildModels",value:function(){var t=Object(mi["a"])(_i.a.mark((function t(){var e;return _i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=this.getModelType(),this.layerModel=new aP[e](this),t.next=4,this.initLayerModels();case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"getDefaultConfig",value:function(){var t=this.getModelType(),e={raster:{},rasterRgb:{},raster3d:{},rasterTerrainRgb:{}};return e[t]}},{key:"getModelType",value:function(){var t=this.layerSource.getParserType();switch(t){case"raster":return"raster";case"rasterRgb":return"rasterRgb";case"image":return"rasterTerrainRgb";default:return"raster"}}}]),n}(lb),lP=["rasterData"];function fP(t){var e=hP();return function(){var n,r=Object(ct["a"])(t);if(e){var i=Object(ct["a"])(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(ut["a"])(this,n)}}function hP(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}var pP={positions:[0,1],colors:["#000","#fff"]},dP=function(t){Object(st["a"])(n,t);var e=fP(n);function n(){return Object(et["a"])(this,n),e.apply(this,arguments)}return Object(nt["a"])(n,[{key:"initTileLayer",value:function(){var t=Object(mi["a"])(_i.a.mark((function t(){var e,n,r,i;return _i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=this.parent.getLayerAttributeConfig(),n=this.getLayerOptions(),r=this.getSourceOption(),this.colorTexture=this.parent.textureService.getColorTexture(n.rampColors),i=new cP(Object(P["a"])(Object(P["a"])({},n),{},{colorTexture:this.colorTexture})).source(r.data,r.options),e&&Object.keys(e).forEach((function(t){var n,r,o=t;i[o](null===(n=e[o])||void 0===n?void 0:n.field,null===(r=e[o])||void 0===r?void 0:r.values)})),t.next=8,this.addLayer(i);case 8:this.isLoaded=!0;case 9:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"getSourceOption",value:function(){var t=this.parent.getSource(),e=this.sourceTile.data.data,n=e.rasterData,r=Object(Gf["a"])(e,lP);return{data:n,options:{parser:Object(P["a"])({type:"raster",extent:this.sourceTile.bounds},r),transforms:t.transforms}}}},{key:"styleUpdate",value:function(){for(var t=this,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=n.rampColors,o=void 0===i?pP:i;this.colorTexture=this.parent.textureService.getColorTexture(o),this.layers.forEach((function(e){return e.style({colorTexture:t.colorTexture})}))}},{key:"destroy",value:function(){this.layers.forEach((function(t){return t.destroy()}))}}]),n}(wM),vP=["rasterData"];function gP(t){var e=mP();return function(){var n,r=Object(ct["a"])(t);if(e){var i=Object(ct["a"])(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(ut["a"])(this,n)}}function mP(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}var yP=function(t){Object(st["a"])(n,t);var e=gP(n);function n(){return Object(et["a"])(this,n),e.apply(this,arguments)}return Object(nt["a"])(n,[{key:"initTileLayer",value:function(){var t=Object(mi["a"])(_i.a.mark((function t(){var e,n,r,i;return _i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=this.parent.getLayerAttributeConfig(),n=this.getLayerOptions(),r=this.getSourceOption(),i=new cP(Object(P["a"])({},n)).source(r.data,r.options),e&&Object.keys(e).forEach((function(t){var n,r,o=t;i[o](null===(n=e[o])||void 0===n?void 0:n.field,null===(r=e[o])||void 0===r?void 0:r.values)})),t.next=7,this.addLayer(i);case 7:this.isLoaded=!0;case 8:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"getSourceOption",value:function(){var t=this.parent.getSource(),e=this.sourceTile.data.data,n=e.rasterData,r=Object(Gf["a"])(e,vP);return{data:n,options:{parser:Object(P["a"])({type:"rasterRgb",extent:this.sourceTile.bounds},r),transforms:t.transforms}}}}]),n}(wM);function _P(t){var e=bP();return function(){var n,r=Object(ct["a"])(t);if(e){var i=Object(ct["a"])(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(ut["a"])(this,n)}}function bP(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}var xP=function(t){Object(st["a"])(n,t);var e=_P(n);function n(){return Object(et["a"])(this,n),e.apply(this,arguments)}return Object(nt["a"])(n,[{key:"initTileLayer",value:function(){var t=Object(mi["a"])(_i.a.mark((function t(){var e,n,r,i;return _i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=this.parent.getLayerAttributeConfig(),n=this.getLayerOptions(),r=this.getSourceOption(),i=new cP(Object(P["a"])({},n)).source(r.data,r.options),e&&Object.keys(e).forEach((function(t){var n,r,o=t;i[o](null===(n=e[o])||void 0===n?void 0:n.field,null===(r=e[o])||void 0===r?void 0:r.values)})),t.next=7,this.addLayer(i);case 7:this.isLoaded=!0;case 8:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"getSourceOption",value:function(){var t=this.parent.getSource();return{data:this.sourceTile.data,options:{parser:{type:"image",extent:this.sourceTile.bounds},transforms:t.transforms}}}}]),n}(wM);function wP(t){var e=EP();return function(){var n,r=Object(ct["a"])(t);if(e){var i=Object(ct["a"])(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(ut["a"])(this,n)}}function EP(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}var SP=function(t){Object(st["a"])(n,t);var e=wP(n);function n(){return Object(et["a"])(this,n),e.apply(this,arguments)}return Object(nt["a"])(n,[{key:"initTileLayer",value:function(){var t=Object(mi["a"])(_i.a.mark((function t(){var e,n,r,i;return _i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=this.parent.getLayerAttributeConfig(),n=this.getLayerOptions(),r=this.getSourceOption(),i=new Ww(Object(P["a"])({},n)).source(r.data,r.options),e&&Object.keys(e).forEach((function(t){var n,r,o=t;i[o](null===(n=e[o])||void 0===n?void 0:n.field,null===(r=e[o])||void 0===r?void 0:r.values)})),t.next=7,this.addLayer(i);case 7:this.isLoaded=!0;case 8:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"getFeatures",value:function(t){if(!t)return[];var e=this.sourceTile.data;return e.getTileData(t)}},{key:"getSourceOption",value:function(){var t=this.parent.getSource(),e=this.parent.getLayerConfig(),n=e.sourceLayer,r=e.featureId,i=this.getFeatures(n);return{data:{type:"FeatureCollection",features:i},options:{parser:{type:"geojson",featureId:r},transforms:t.transforms}}}}]),n}(wM);function OP(t){var e=t.type;switch(e){case"PolygonLayer":return OM;case"LineLayer":return OM;case"PointLayer":return OM;case"TileDebugLayer":return AM;case"MaskLayer":return SP;case"RasterLayer":var n=t.getSource().parser.dataType;switch(n){case"rgb":case"customRGB":return yP;case"arraybuffer":case"customArrayBuffer":return dP;case"terrainRGB":return xP;default:return UM}default:return OM}}var CP,TP,AP,kP,MP,PP,RP=["shape","color","size","style","animate","filter","rotate","scale","setBlend","setSelect","setActive"],jP=function(){function t(e){Object(et["a"])(this,t),Object(Ar["a"])(this,"initedTileset",!1),Object(Ar["a"])(this,"viewchange",Object(K["debounce"])(this.mapchange,24)),this.parent=e;var n=this.parent.getContainer();this.rendererService=n.get(Kf.IRendererService),this.layerService=n.get(Kf.ILayerService),this.mapService=n.get(Kf.IMapService),this.pickingService=n.get(Kf.IPickingService),this.tileLayerService=new FT({rendererService:this.rendererService,layerService:this.layerService,parent:e}),this.tilePickService=new ZT({tileLayerService:this.tileLayerService,layerService:this.layerService,parent:e}),this.parent.setLayerPickService(this.tilePickService),this.proxy(e),this.initTileSetManager()}return Object(nt["a"])(t,[{key:"initTileSetManager",value:function(){var t,e=this.parent.getSource();this.tilesetManager=e.tileset,this.initedTileset||(this.bindTilesetEvent(),this.initedTileset=!0);var n=this.getCurrentView(),r=n.latLonBounds,i=n.zoom;null===(t=this.tilesetManager)||void 0===t||t.update(i,r)}},{key:"mapchange",value:function(){var t,e=this.getCurrentView(),n=e.latLonBounds,r=e.zoom;if("GAODE1.x"===this.mapService.version){var i=this.parent.getLayerConfig(),o=i.visible;r<2&&o?(this.parent.updateLayerConfig({visible:!1}),this.layerService.reRender()):r>=2&&!o&&(this.parent.updateLayerConfig({visible:!0}),this.layerService.reRender())}this.lastViewStates&&this.lastViewStates.zoom===r&&this.lastViewStates.latLonBounds.toString()===n.toString()||(this.lastViewStates={zoom:r,latLonBounds:n},null===(t=this.tilesetManager)||void 0===t||t.throttleUpdate(r,n))}},{key:"getCurrentView",value:function(){var t=this.mapService.getBounds(),e=[t[0][0],t[0][1],t[1][0],t[1][1]],n=this.mapService.getZoom();return{latLonBounds:e,zoom:n}}},{key:"bindTilesetEvent",value:function(){var t=this;this.tilesetManager.on("tile-loaded",(function(t){})),this.tilesetManager.on("tile-unload",(function(e){t.tileUnLoad(e)})),this.tilesetManager.on("tile-error",(function(e,n){t.tileError(e)})),this.tilesetManager.on("tile-update",(function(){t.tileUpdate()})),this.mapService.on("zoomend",(function(){return t.mapchange()})),this.mapService.on("moveend",(function(){return t.viewchange()}))}},{key:"render",value:function(){this.tileLayerService.render()}},{key:"getLayers",value:function(){return this.tileLayerService.getLayers()}},{key:"getTiles",value:function(){return this.tileLayerService.getTiles()}},{key:"tileLoaded",value:function(t){}},{key:"tileError",value:function(t){console.warn("error:",t)}},{key:"destroy",value:function(){var t;null===(t=this.tilesetManager)||void 0===t||t.destroy(),this.tileLayerService.destroy()}},{key:"tileUnLoad",value:function(t){this.tileLayerService.removeTile(t.key)}},{key:"tileUpdate",value:function(){var t=Object(mi["a"])(_i.a.mark((function t(){var e,n,r=this;return _i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this.tilesetManager){t.next=2;break}return t.abrupt("return");case 2:return e=this.parent.getMinZoom(),n=this.parent.getMaxZoom(),t.next=6,Promise.all(this.tilesetManager.tiles.filter((function(t){return t.isLoaded})).filter((function(t){return t.isVisibleChange})).filter((function(t){return t.data})).filter((function(t){return t.z>=e&&t.z<n})).map(function(){var t=Object(mi["a"])(_i.a.mark((function t(e){var n,i;return _i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r.tileLayerService.hasTile(e.key)){t.next=9;break}return n=OP(r.parent),i=new n(e,r.parent),t.next=5,i.initTileLayer();case 5:r.tilePickService.setPickState(),0!==i.getLayers().length&&(r.tileLayerService.addTile(i),r.tileLayerService.updateTileVisible(e),r.layerService.reRender()),t.next=12;break;case 9:r.tileLayerService.updateTileVisible(e),r.tilePickService.setPickState(),r.layerService.reRender();case 12:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 6:this.tilesetManager.isLoaded&&this.parent.emit("tiles-loaded",this.tilesetManager.currentTiles);case 7:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"setPickState",value:function(t){}},{key:"pickRender",value:function(t){this.tilePickService.pickRender(t)}},{key:"selectFeature",value:function(t){this.tilePickService.selectFeature(t)}},{key:"highlightPickedFeature",value:function(t){this.tilePickService.highlightPickedFeature(t)}},{key:"proxy",value:function(t){var e=this;RP.forEach((function(n){var r=t[n].bind(t);t[n]=function(){for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return r.apply(void 0,o),e.getLayers().map((function(t){t[n].apply(t,o)})),"style"===n&&e.getTiles().forEach((function(t){return t.styleUpdate.apply(t,o)})),t}}))}}]),t}(),IP=(CP=Object(Yf["injectable"])(),CP(TP=function(){function t(){Object(et["a"])(this,t)}return Object(nt["a"])(t,[{key:"initLayerModel",value:function(){var t=Object(mi["a"])(_i.a.mark((function t(e){return _i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.prepareBuildModel(),t.next=3,e.buildModels();case 3:e.styleNeedUpdate=!1;case 4:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"prepareLayerModel",value:function(){var t=Object(mi["a"])(_i.a.mark((function t(e){return _i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.prepareBuildModel(),t.next=3,e.buildModels();case 3:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"apply",value:function(t){var e=this;t.hooks.init.tapPromise("LayerModelPlugin",Object(mi["a"])(_i.a.mark((function n(){return _i.a.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(!t.getSource().isTile){n.next=4;break}return t.prepareBuildModel(),t.tileLayer=new jP(t),n.abrupt("return");case 4:return n.next=6,e.initLayerModel(t);case 6:case"end":return n.stop()}}),n)})))),t.hooks.beforeRenderData.tapPromise("LayerModelPlugin",function(){var n=Object(mi["a"])(_i.a.mark((function n(r){return _i.a.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(r){n.next=2;break}return n.abrupt("return",!1);case 2:if(!t.getSource().isTile){n.next=5;break}return t.tileLayer=new jP(t),n.abrupt("return",!1);case 5:return n.next=7,e.prepareLayerModel(t);case 7:return n.abrupt("return",!0);case 8:case"end":return n.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}())}}]),t}())||TP),LP=(AP=Object(Yf["injectable"])(),AP(kP=function(){function t(){Object(et["a"])(this,t)}return Object(nt["a"])(t,[{key:"apply",value:function(t){t.hooks.afterInit.tap("LayerStylePlugin",(function(){var e=t.getLayerConfig(),n=e.autoFit,r=e.fitBoundsOptions;n&&t.fitBounds(r)}))}}]),t}())||kP),NP=["type"],DP={directional:{lights:"u_DirectionalLights",num:"u_NumOfDirectionalLights"},spot:{lights:"u_SpotLights",num:"u_NumOfSpotLights"}},FP={type:"directional",direction:[1,10.5,12],ambient:[.2,.2,.2],diffuse:[.6,.6,.6],specular:[.1,.1,.1]},BP={direction:[0,0,0],ambient:[0,0,0],diffuse:[0,0,0],specular:[0,0,0]},zP={position:[0,0,0],direction:[0,0,0],ambient:[0,0,0],diffuse:[0,0,0],specular:[0,0,0],constant:1,linear:0,quadratic:0,angle:14,exponent:40,blur:5};function UP(t){var e={u_DirectionalLights:new Array(3).fill(Object(P["a"])({},BP)),u_NumOfDirectionalLights:0,u_SpotLights:new Array(3).fill(Object(P["a"])({},zP)),u_NumOfSpotLights:0};return t&&t.length||(t=[FP]),t.forEach((function(t){var n=t.type,r=void 0===n?"directional":n,i=Object(Gf["a"])(t,NP),o=DP[r].lights,a=DP[r].num,s=e[a];e[o][s]=Object(P["a"])(Object(P["a"])({},e[o][s]),i),e[a]++})),e}var VP,HP,GP,WP,ZP,YP,XP=(MP=Object(Yf["injectable"])(),MP(PP=function(){function t(){Object(et["a"])(this,t)}return Object(nt["a"])(t,[{key:"apply",value:function(t){t.hooks.beforeRender.tap("LightingPlugin",(function(){var e=t.getLayerConfig(),n=e.enableLighting;n&&t.models.forEach((function(t){return t.addUniforms(Object(P["a"])({},UP()))}))}))}}]),t}())||PP),qP=(VP=Object(Yf["injectable"])(),VP(HP=function(){function t(){Object(et["a"])(this,t)}return Object(nt["a"])(t,[{key:"apply",value:function(t,e){var n=this,r=e.rendererService,i=e.postProcessingPassFactory,o=e.normalPassFactory;t.hooks.init.tapPromise("MultiPassRendererPlugin",(function(){var e=t.getLayerConfig(),r=e.enableMultiPassRenderer,a=e.passes,s=void 0===a?[]:a;n.enabled=!!r&&!1!==t.getLayerConfig().enableMultiPassRenderer,n.enabled&&(t.multiPassRenderer=W_(t,s,i,o),t.multiPassRenderer.setRenderFlag(!0))})),t.hooks.beforeRender.tap("MultiPassRendererPlugin",(function(){if(n.enabled){var e=r.getViewportSize(),i=e.width,o=e.height;t.multiPassRenderer.resize(i,o)}}))}}]),t}())||HP),KP={NONE:0,ENCODE:1,HIGHLIGHT:2},QP=(GP=Object(Yf["injectable"])(),GP(WP=function(){function t(){Object(et["a"])(this,t)}return Object(nt["a"])(t,[{key:"apply",value:function(t,e){var n=e.styleAttributeService;t.hooks.init.tapPromise("PixelPickingPlugin",(function(){var e=t.getLayerConfig(),r=e.enablePicking;n.registerStyleAttribute({name:"pickingColor",type:ey.Attribute,descriptor:{name:"a_PickingColor",buffer:{data:[],type:Rp.FLOAT},size:3,update:function(t){var e=t.id;return r?hi(e):[0,0,0]}}})})),t.hooks.beforePickingEncode.tap("PixelPickingPlugin",(function(){var e=t.getLayerConfig(),n=e.enablePicking;n&&t.isVisible()&&t.models.forEach((function(t){return t.addUniforms({u_PickingStage:KP.ENCODE})}))})),t.hooks.afterPickingEncode.tap("PixelPickingPlugin",(function(){var e=t.getLayerConfig(),n=e.enablePicking;n&&t.isVisible()&&t.models.forEach((function(t){return t.addUniforms({u_PickingStage:KP.HIGHLIGHT})}))})),t.hooks.beforeHighlight.tap("PixelPickingPlugin",(function(e){var n=t.getLayerConfig(),r=n.highlightColor,i=n.activeMix,o=void 0===i?0:i,a="string"===typeof r?li(r):r||[1,0,0,1];t.updateLayerConfig({pickedFeatureID:fi(new Uint8Array(e))}),t.models.forEach((function(t){return t.addUniforms({u_PickingStage:KP.HIGHLIGHT,u_PickingColor:e,u_HighlightColor:a.map((function(t){return 255*t})),u_activeMix:o})}))})),t.hooks.beforeSelect.tap("PixelPickingPlugin",(function(e){var n=t.getLayerConfig(),r=n.selectColor,i=n.selectMix,o=void 0===i?0:i,a="string"===typeof r?li(r):r||[1,0,0,1];t.updateLayerConfig({pickedFeatureID:fi(new Uint8Array(e))}),t.models.forEach((function(t){return t.addUniforms({u_PickingStage:KP.HIGHLIGHT,u_PickingColor:e,u_HighlightColor:a.map((function(t){return 255*t})),u_activeMix:o,u_CurrentSelectedId:e,u_SelectColor:a.map((function(t){return 255*t})),u_EnableSelect:1})}))}))}}]),t}())||WP),$P=["mvt","geojsonvt","testTile"];function JP(t){var e=t.getSource();return $P.includes(e.parser.type)}var tR,eR,nR,rR,iR,oR,aR,sR,uR,cR,lR,fR,hR,pR,dR,vR=(ZP=Object(Yf["injectable"])(),ZP(YP=function(){function t(){Object(et["a"])(this,t)}return Object(nt["a"])(t,[{key:"apply",value:function(t,e){var n=this,r=e.styleAttributeService;t.hooks.init.tapPromise("RegisterStyleAttributePlugin",(function(){JP(t)||n.registerBuiltinAttributes(r,t)}))}},{key:"registerBuiltinAttributes",value:function(t,e){"MaskLayer"!==e.type?(this.registerPositionAttribute(t),this.registerFilterAttribute(t),this.registerColorAttribute(t),this.registerVertexIdAttribute(t)):this.registerPositionAttribute(t)}},{key:"registerPositionAttribute",value:function(t){t.registerStyleAttribute({name:"position",type:ey.Attribute,descriptor:{name:"a_Position",buffer:{data:[],type:Rp.FLOAT},size:3,update:function(t,e,n){return 2===n.length?[n[0],n[1],0]:[n[0],n[1],n[2]]}}})}},{key:"registerFilterAttribute",value:function(t){t.registerStyleAttribute({name:"filter",type:ey.Attribute,descriptor:{name:"filter",buffer:{usage:Rp.DYNAMIC_DRAW,data:[],type:Rp.FLOAT},size:1,update:function(t){var e=t.filter;return e?[1]:[0]}}})}},{key:"registerColorAttribute",value:function(t){t.registerStyleAttribute({name:"color",type:ey.Attribute,descriptor:{name:"a_Color",buffer:{usage:Rp.DYNAMIC_DRAW,data:[],type:Rp.FLOAT},size:4,update:function(t){var e=t.color;return e&&e.length?e:[1,1,1,1]}}})}},{key:"registerVertexIdAttribute",value:function(t){t.registerStyleAttribute({name:"vertexId",type:ey.Attribute,descriptor:{name:"a_vertexId",buffer:{usage:Rp.DYNAMIC_DRAW,data:[],type:Rp.FLOAT},size:1,update:function(t,e){return[e]}}})}}]),t}())||YP),gR=(tR=Object(Yf["injectable"])(),eR=Object(Yf["inject"])(Kf.ICameraService),nR=Object(Yf["inject"])(Kf.ICoordinateSystemService),rR=Object(Yf["inject"])(Kf.IRendererService),iR=Object(Yf["inject"])(Kf.IMapService),tR((aR=function(){function t(){Object(et["a"])(this,t),sp(this,"cameraService",sR,this),sp(this,"coordinateSystemService",uR,this),sp(this,"rendererService",cR,this),sp(this,"mapService",lR,this)}return Object(nt["a"])(t,[{key:"apply",value:function(t){var e=this,n=this.mapService.version,r=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],i=[0,0];t.hooks.beforeRender.tap("ShaderUniformPlugin",(function(){var o=t.getLayerConfig().tileOrigin;e.coordinateSystemService.refresh(o),"GAODE2.x"===n&&(e.setLayerCenter(t),r=e.mapService.map.customCoords.getMVPMatrix(),i=e.mapService.getCustomCoordCenter());var a=e.rendererService.getViewportSize(),s=a.width,u=a.height;t.models.forEach((function(n){var o;n.addUniforms((o={},Object(Ar["a"])(o,iy.ProjectionMatrix,e.cameraService.getProjectionMatrix()),Object(Ar["a"])(o,iy.ViewMatrix,e.cameraService.getViewMatrix()),Object(Ar["a"])(o,iy.ViewProjectionMatrix,e.cameraService.getViewProjectionMatrix()),Object(Ar["a"])(o,iy.Zoom,e.cameraService.getZoom()),Object(Ar["a"])(o,iy.ZoomScale,e.cameraService.getZoomScale()),Object(Ar["a"])(o,iy.FocalDistance,e.cameraService.getFocalDistance()),Object(Ar["a"])(o,iy.CameraPosition,e.cameraService.getCameraPosition()),Object(Ar["a"])(o,Op.CoordinateSystem,e.coordinateSystemService.getCoordinateSystem()),Object(Ar["a"])(o,Op.ViewportCenter,e.coordinateSystemService.getViewportCenter()),Object(Ar["a"])(o,Op.ViewportCenterProjection,e.coordinateSystemService.getViewportCenterProjection()),Object(Ar["a"])(o,Op.PixelsPerDegree,e.coordinateSystemService.getPixelsPerDegree()),Object(Ar["a"])(o,Op.PixelsPerDegree2,e.coordinateSystemService.getPixelsPerDegree2()),Object(Ar["a"])(o,Op.PixelsPerMeter,e.coordinateSystemService.getPixelsPerMeter()),Object(Ar["a"])(o,Op.Mvp,r),Object(Ar["a"])(o,"u_SceneCenterMKT",i),Object(Ar["a"])(o,"u_ViewportSize",[s,u]),Object(Ar["a"])(o,"u_ModelMatrix",e.cameraService.getModelMatrix()),Object(Ar["a"])(o,"u_DevicePixelRatio",sn.devicePixelRatio),Object(Ar["a"])(o,"u_PickingBuffer",t.getLayerConfig().pickingBuffer||0),Object(Ar["a"])(o,"u_shaderPick",Number(t.getShaderPickStat())),o))}))}))}},{key:"setLayerCenter",value:function(t){void 0===t.coordCenter&&(t.coordCenter=t.getSource().center),this.mapService.setCoordCenter&&this.mapService.setCoordCenter(t.coordCenter)}}]),t}(),sR=up(aR.prototype,"cameraService",[eR],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),uR=up(aR.prototype,"coordinateSystemService",[nR],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),cR=up(aR.prototype,"rendererService",[rR],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),lR=up(aR.prototype,"mapService",[iR],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),oR=aR))||oR),mR=(fR=Object(Yf["injectable"])(),fR(hR=function(){function t(){Object(et["a"])(this,t)}return Object(nt["a"])(t,[{key:"apply",value:function(t){t.hooks.beforeRender.tap("UpdateModelPlugin",(function(){t.layerModel&&t.layerModel.needUpdate().then((function(e){e&&t.renderLayers()}))})),t.hooks.afterRender.tap("UpdateModelPlugin",(function(){t.layerModelNeedUpdate=!1}))}}]),t}())||hR),yR=(pR=Object(Yf["injectable"])(),pR(dR=function(){function t(){Object(et["a"])(this,t)}return Object(nt["a"])(t,[{key:"apply",value:function(t,e){var n=this,r=e.styleAttributeService;t.hooks.init.tapPromise("UpdateStyleAttributePlugin",(function(){n.initStyleAttribute(t,{styleAttributeService:r})})),t.hooks.beforeRender.tap("UpdateStyleAttributePlugin",(function(){t.layerModelNeedUpdate||t.inited&&n.updateStyleAttribute(t,{styleAttributeService:r})}))}},{key:"updateStyleAttribute",value:function(t,e){var n=e.styleAttributeService,r=n.getLayerStyleAttributes()||[],i=n.getLayerStyleAttribute("filter");if(i&&i.needRegenerateVertices)return t.layerModelNeedUpdate=!0,void r.forEach((function(t){return t.needRegenerateVertices=!1}));r.filter((function(t){return t.needRegenerateVertices})).forEach((function(e){n.updateAttributeByFeatureRange(e.name,t.getEncodedData(),e.featureRange.startIndex,e.featureRange.endIndex,t),e.needRegenerateVertices=!1}))}},{key:"initStyleAttribute",value:function(t,e){var n=e.styleAttributeService,r=n.getLayerStyleAttributes()||[];r.filter((function(t){return t.needRegenerateVertices})).forEach((function(e){n.updateAttributeByFeatureRange(e.name,t.getEncodedData(),e.featureRange.startIndex,e.featureRange.endIndex),e.needRegenerateVertices=!1}))}}]),t}())||dR);Xm.bind(Kf.ILayerPlugin).to(Yw).inRequestScope(),Xm.bind(Kf.ILayerPlugin).to(vR).inRequestScope(),Xm.bind(Kf.ILayerPlugin).to(NT).inRequestScope(),Xm.bind(Kf.ILayerPlugin).to(Zw).inRequestScope(),Xm.bind(Kf.ILayerPlugin).to(LP).inRequestScope(),Xm.bind(Kf.ILayerPlugin).to(yR).inRequestScope(),Xm.bind(Kf.ILayerPlugin).to(mR).inRequestScope(),Xm.bind(Kf.ILayerPlugin).to(qP).inRequestScope(),Xm.bind(Kf.ILayerPlugin).to(gR).inRequestScope(),Xm.bind(Kf.ILayerPlugin).to(DT).inRequestScope(),Xm.bind(Kf.ILayerPlugin).to(XP).inRequestScope(),Xm.bind(Kf.ILayerPlugin).to(QP).inRequestScope(),Xm.bind(Kf.ILayerPlugin).to(IP).inRequestScope();var _R,bR,xR,wR,ER,SR,OR,CR,TR,AR,kR,MR,PR,RR,jR,IR,LR=n("SUU4"),NR=n.n(LR),DR=function(){function t(e,n){Object(et["a"])(this,t);var r=n.buffer,i=n.offset,o=n.stride,a=n.normalized,s=n.size,u=n.divisor;this.buffer=r,this.attribute={buffer:r.get(),offset:i||0,stride:o||0,normalized:a||!1,divisor:u||0},s&&(this.attribute.size=s)}return Object(nt["a"])(t,[{key:"get",value:function(){return this.attribute}},{key:"updateBuffer",value:function(t){this.buffer.subData(t)}},{key:"destroy",value:function(){this.buffer.destroy()}}]),t}(),FR=(_R={},Object(Ar["a"])(_R,Rp.POINTS,"points"),Object(Ar["a"])(_R,Rp.LINES,"lines"),Object(Ar["a"])(_R,Rp.LINE_LOOP,"line loop"),Object(Ar["a"])(_R,Rp.LINE_STRIP,"line strip"),Object(Ar["a"])(_R,Rp.TRIANGLES,"triangles"),Object(Ar["a"])(_R,Rp.TRIANGLE_FAN,"triangle fan"),Object(Ar["a"])(_R,Rp.TRIANGLE_STRIP,"triangle strip"),_R),BR=(bR={},Object(Ar["a"])(bR,Rp.STATIC_DRAW,"static"),Object(Ar["a"])(bR,Rp.DYNAMIC_DRAW,"dynamic"),Object(Ar["a"])(bR,Rp.STREAM_DRAW,"stream"),bR),zR=(xR={},Object(Ar["a"])(xR,Rp.BYTE,"int8"),Object(Ar["a"])(xR,Rp.UNSIGNED_INT,"int16"),Object(Ar["a"])(xR,Rp.INT,"int32"),Object(Ar["a"])(xR,Rp.UNSIGNED_BYTE,"uint8"),Object(Ar["a"])(xR,Rp.UNSIGNED_SHORT,"uint16"),Object(Ar["a"])(xR,Rp.UNSIGNED_INT,"uint32"),Object(Ar["a"])(xR,Rp.FLOAT,"float"),xR),UR=(wR={},Object(Ar["a"])(wR,Rp.ALPHA,"alpha"),Object(Ar["a"])(wR,Rp.LUMINANCE,"luminance"),Object(Ar["a"])(wR,Rp.LUMINANCE_ALPHA,"luminance alpha"),Object(Ar["a"])(wR,Rp.RGB,"rgb"),Object(Ar["a"])(wR,Rp.RGBA,"rgba"),Object(Ar["a"])(wR,Rp.RGBA4,"rgba4"),Object(Ar["a"])(wR,Rp.RGB5_A1,"rgb5 a1"),Object(Ar["a"])(wR,Rp.RGB565,"rgb565"),Object(Ar["a"])(wR,Rp.DEPTH_COMPONENT,"depth"),Object(Ar["a"])(wR,Rp.DEPTH_STENCIL,"depth stencil"),wR),VR=(ER={},Object(Ar["a"])(ER,Rp.DONT_CARE,"dont care"),Object(Ar["a"])(ER,Rp.NICEST,"nice"),Object(Ar["a"])(ER,Rp.FASTEST,"fast"),ER),HR=(SR={},Object(Ar["a"])(SR,Rp.NEAREST,"nearest"),Object(Ar["a"])(SR,Rp.LINEAR,"linear"),Object(Ar["a"])(SR,Rp.LINEAR_MIPMAP_LINEAR,"mipmap"),Object(Ar["a"])(SR,Rp.NEAREST_MIPMAP_LINEAR,"nearest mipmap linear"),Object(Ar["a"])(SR,Rp.LINEAR_MIPMAP_NEAREST,"linear mipmap nearest"),Object(Ar["a"])(SR,Rp.NEAREST_MIPMAP_NEAREST,"nearest mipmap nearest"),SR),GR=(OR={},Object(Ar["a"])(OR,Rp.REPEAT,"repeat"),Object(Ar["a"])(OR,Rp.CLAMP_TO_EDGE,"clamp"),Object(Ar["a"])(OR,Rp.MIRRORED_REPEAT,"mirror"),OR),WR=(CR={},Object(Ar["a"])(CR,Rp.NONE,"none"),Object(Ar["a"])(CR,Rp.BROWSER_DEFAULT_WEBGL,"browser"),CR),ZR=(TR={},Object(Ar["a"])(TR,Rp.NEVER,"never"),Object(Ar["a"])(TR,Rp.ALWAYS,"always"),Object(Ar["a"])(TR,Rp.LESS,"less"),Object(Ar["a"])(TR,Rp.LEQUAL,"lequal"),Object(Ar["a"])(TR,Rp.GREATER,"greater"),Object(Ar["a"])(TR,Rp.GEQUAL,"gequal"),Object(Ar["a"])(TR,Rp.EQUAL,"equal"),Object(Ar["a"])(TR,Rp.NOTEQUAL,"notequal"),TR),YR=(AR={},Object(Ar["a"])(AR,Rp.FUNC_ADD,"add"),Object(Ar["a"])(AR,Rp.MIN_EXT,"min"),Object(Ar["a"])(AR,Rp.MAX_EXT,"max"),Object(Ar["a"])(AR,Rp.FUNC_SUBTRACT,"subtract"),Object(Ar["a"])(AR,Rp.FUNC_REVERSE_SUBTRACT,"reverse subtract"),AR),XR=(kR={},Object(Ar["a"])(kR,Rp.ZERO,"zero"),Object(Ar["a"])(kR,Rp.ONE,"one"),Object(Ar["a"])(kR,Rp.SRC_COLOR,"src color"),Object(Ar["a"])(kR,Rp.ONE_MINUS_SRC_COLOR,"one minus src color"),Object(Ar["a"])(kR,Rp.SRC_ALPHA,"src alpha"),Object(Ar["a"])(kR,Rp.ONE_MINUS_SRC_ALPHA,"one minus src alpha"),Object(Ar["a"])(kR,Rp.DST_COLOR,"dst color"),Object(Ar["a"])(kR,Rp.ONE_MINUS_DST_COLOR,"one minus dst color"),Object(Ar["a"])(kR,Rp.DST_ALPHA,"dst alpha"),Object(Ar["a"])(kR,Rp.ONE_MINUS_DST_ALPHA,"one minus dst alpha"),Object(Ar["a"])(kR,Rp.CONSTANT_COLOR,"constant color"),Object(Ar["a"])(kR,Rp.ONE_MINUS_CONSTANT_COLOR,"one minus constant color"),Object(Ar["a"])(kR,Rp.CONSTANT_ALPHA,"constant alpha"),Object(Ar["a"])(kR,Rp.ONE_MINUS_CONSTANT_ALPHA,"one minus constant alpha"),Object(Ar["a"])(kR,Rp.SRC_ALPHA_SATURATE,"src alpha saturate"),kR),qR=(MR={},Object(Ar["a"])(MR,Rp.NEVER,"never"),Object(Ar["a"])(MR,Rp.ALWAYS,"always"),Object(Ar["a"])(MR,Rp.LESS,"less"),Object(Ar["a"])(MR,Rp.LEQUAL,"lequal"),Object(Ar["a"])(MR,Rp.GREATER,"greater"),Object(Ar["a"])(MR,Rp.GEQUAL,"gequal"),Object(Ar["a"])(MR,Rp.EQUAL,"equal"),Object(Ar["a"])(MR,Rp.NOTEQUAL,"notequal"),MR),KR=(PR={},Object(Ar["a"])(PR,Rp.ZERO,"zero"),Object(Ar["a"])(PR,Rp.KEEP,"keep"),Object(Ar["a"])(PR,Rp.REPLACE,"replace"),Object(Ar["a"])(PR,Rp.INVERT,"invert"),Object(Ar["a"])(PR,Rp.INCR,"increment"),Object(Ar["a"])(PR,Rp.DECR,"decrement"),Object(Ar["a"])(PR,Rp.INCR_WRAP,"increment wrap"),Object(Ar["a"])(PR,Rp.DECR_WRAP,"decrement wrap"),PR),QR=(RR={},Object(Ar["a"])(RR,Rp.FRONT,"front"),Object(Ar["a"])(RR,Rp.BACK,"back"),RR),$R=function(){function t(e,n){Object(et["a"])(this,t);var r=n.data,i=n.usage,o=n.type;this.buffer=e.buffer({data:r,usage:BR[i||Rp.STATIC_DRAW],type:zR[o||Rp.UNSIGNED_BYTE]})}return Object(nt["a"])(t,[{key:"get",value:function(){return this.buffer}},{key:"destroy",value:function(){this.buffer.destroy()}},{key:"subData",value:function(t){var e=t.data,n=t.offset;this.buffer.subdata(e,n)}}]),t}(),JR=function(){function t(e,n){Object(et["a"])(this,t);var r=n.data,i=n.usage,o=n.type,a=n.count;this.elements=e.elements({data:r,usage:BR[i||Rp.STATIC_DRAW],type:zR[o||Rp.UNSIGNED_BYTE],count:a})}return Object(nt["a"])(t,[{key:"get",value:function(){return this.elements}},{key:"subData",value:function(t){var e=t.data;this.elements.subdata(e)}},{key:"destroy",value:function(){}}]),t}(),tj=function(){function t(e,n){Object(et["a"])(this,t);var r=n.width,i=n.height,o=n.color,a=n.colors,s={width:r,height:i};Array.isArray(a)&&(s.colors=a.map((function(t){return t.get()}))),o&&"boolean"!==typeof o&&(s.color=o.get()),this.framebuffer=e.framebuffer(s)}return Object(nt["a"])(t,[{key:"get",value:function(){return this.framebuffer}},{key:"destroy",value:function(){this.framebuffer.destroy()}},{key:"resize",value:function(t){var e=t.width,n=t.height;this.framebuffer.resize(e,n)}}]),t}(),ej=function(){function t(e,n){Object(et["a"])(this,t),Object(Ar["a"])(this,"destroyed",!1),Object(Ar["a"])(this,"uniforms",{}),this.reGl=e;var r=n.pick,i=void 0===r||r,o=n.vs,a=n.fs,s=n.attributes,u=n.uniforms,c=n.primitive,l=n.count,f=n.elements,h=n.depth,p=n.blend,d=n.stencil,v=n.cull,g=n.instances,m={};this.options=n,u&&(this.uniforms=this.extractUniforms(u),Object.keys(u).forEach((function(t){m[t]=e.prop(t)})));var y={};Object.keys(s).forEach((function(t){y[t]=s[t].get()}));var _={attributes:y,frag:a,uniforms:m,vert:o,blend:{},primitive:FR[void 0===c?Rp.TRIANGLES:c]};if(g&&(_.instances=g),l?_.count=l:f&&(_.elements=f.get()),this.initDepthDrawParams({depth:h},_),this.initBlendDrawParams({blend:p},_),this.initStencilDrawParams({stencil:d},_),this.initCullDrawParams({cull:v},_),this.drawCommand=e(_),i){var b=Object(K["cloneDeep"])(_);b.blend=Object(P["a"])(Object(P["a"])({},b.blend),{},{enable:!1}),this.drawPickCommand=e(b)}this.drawParams=_}return Object(nt["a"])(t,[{key:"updateAttributesAndElements",value:function(t,e){var n={};if(Object.keys(t).forEach((function(e){n[e]=t[e].get()})),this.drawParams.attributes=n,this.drawParams.elements=e.get(),this.drawCommand=this.reGl(this.drawParams),this.options.pick){var r=Object(K["cloneDeep"])(this.drawParams);r.blend=Object(P["a"])(Object(P["a"])({},r.blend),{},{enable:!1}),this.drawPickCommand=this.reGl(r)}}},{key:"updateAttributes",value:function(t){var e={};if(Object.keys(t).forEach((function(n){e[n]=t[n].get()})),this.drawParams.attributes=e,this.drawCommand=this.reGl(this.drawParams),this.options.pick){var n=Object(K["cloneDeep"])(this.drawParams);n.blend=Object(P["a"])(Object(P["a"])({},n.blend),{},{enable:!1}),this.drawPickCommand=this.reGl(n)}}},{key:"addUniforms",value:function(t){this.uniforms=Object(P["a"])(Object(P["a"])({},this.uniforms),this.extractUniforms(t))}},{key:"draw",value:function(t,e){if(!this.drawParams.attributes||0!==Object.keys(this.drawParams.attributes).length){var n=Object(P["a"])(Object(P["a"])({},this.uniforms),this.extractUniforms(t.uniforms||{})),r={};Object.keys(n).forEach((function(t){var e=Object(fe["a"])(n[t]);"boolean"===e||"number"===e||Array.isArray(n[t])||n[t].BYTES_PER_ELEMENT?r[t]=n[t]:r[t]=n[t].get()})),e?this.drawPickCommand&&this.drawPickCommand(r):this.drawCommand(r)}}},{key:"destroy",value:function(){var t,e;null===(t=this.drawParams)||void 0===t||null===(e=t.elements)||void 0===e||e.destroy(),this.options.attributes&&Object.values(this.options.attributes).forEach((function(t){null===t||void 0===t||t.destroy()})),this.destroyed=!0}},{key:"initDepthDrawParams",value:function(t,e){var n=t.depth;n&&(e.depth={enable:void 0===n.enable||!!n.enable,mask:void 0===n.mask||!!n.mask,func:ZR[n.func||Rp.LESS],range:n.range||[0,1]})}},{key:"initBlendDrawParams",value:function(t,e){var n=t.blend;if(n){var r=n.enable,i=n.func,o=n.equation,a=n.color,s=void 0===a?[0,0,0,0]:a;e.blend={enable:!!r,func:{srcRGB:XR[i&&i.srcRGB||Rp.SRC_ALPHA],srcAlpha:XR[i&&i.srcAlpha||Rp.SRC_ALPHA],dstRGB:XR[i&&i.dstRGB||Rp.ONE_MINUS_SRC_ALPHA],dstAlpha:XR[i&&i.dstAlpha||Rp.ONE_MINUS_SRC_ALPHA]},equation:{rgb:YR[o&&o.rgb||Rp.FUNC_ADD],alpha:YR[o&&o.alpha||Rp.FUNC_ADD]},color:s}}}},{key:"initStencilDrawParams",value:function(t,e){var n=t.stencil;if(n){var r=n.enable,i=n.mask,o=void 0===i?-1:i,a=n.func,s=void 0===a?{cmp:Rp.ALWAYS,ref:0,mask:-1}:a,u=n.opFront,c=void 0===u?{fail:Rp.KEEP,zfail:Rp.KEEP,zpass:Rp.KEEP}:u,l=n.opBack,f=void 0===l?{fail:Rp.KEEP,zfail:Rp.KEEP,zpass:Rp.KEEP}:l;e.stencil={enable:!!r,mask:o,func:Object(P["a"])(Object(P["a"])({},s),{},{cmp:qR[s.cmp]}),opFront:{fail:KR[c.fail],zfail:KR[c.zfail],zpass:KR[c.zpass]},opBack:{fail:KR[f.fail],zfail:KR[f.zfail],zpass:KR[f.zpass]}}}}},{key:"initCullDrawParams",value:function(t,e){var n=t.cull;if(n){var r=n.enable,i=n.face,o=void 0===i?Rp.BACK:i;e.cull={enable:!!r,face:QR[o]}}}},{key:"extractUniforms",value:function(t){var e=this,n={};return Object.keys(t).forEach((function(r){e.extractUniformsRecursively(r,t[r],n,"")})),n}},{key:"extractUniformsRecursively",value:function(t,e,n,r){var i=this;null===e||"number"===typeof e||"boolean"===typeof e||Array.isArray(e)&&"number"===typeof e[0]||Object(K["isTypedArray"])(e)||""===e||"resize"in e?n["".concat(r&&r+".").concat(t)]=e:(Object(K["isPlainObject"])(e)&&Object.keys(e).forEach((function(o){i.extractUniformsRecursively(o,e[o],n,"".concat(r&&r+".").concat(t))})),Array.isArray(e)&&e.forEach((function(e,o){Object.keys(e).forEach((function(a){i.extractUniformsRecursively(a,e[a],n,"".concat(r&&r+".").concat(t,"[").concat(o,"]"))}))})))}}]),t}(),nj=function(){function t(e,n){Object(et["a"])(this,t),Object(Ar["a"])(this,"isDestroy",!1);var r=n.data,i=n.type,o=void 0===i?Rp.UNSIGNED_BYTE:i,a=n.width,s=n.height,u=n.flipY,c=void 0!==u&&u,l=n.format,f=void 0===l?Rp.RGBA:l,h=n.mipmap,p=void 0!==h&&h,d=n.wrapS,v=void 0===d?Rp.CLAMP_TO_EDGE:d,g=n.wrapT,m=void 0===g?Rp.CLAMP_TO_EDGE:g,y=n.aniso,_=void 0===y?0:y,b=n.alignment,x=void 0===b?1:b,w=n.premultiplyAlpha,E=void 0!==w&&w,S=n.mag,O=void 0===S?Rp.NEAREST:S,C=n.min,T=void 0===C?Rp.NEAREST:C,A=n.colorSpace,k=void 0===A?Rp.BROWSER_DEFAULT_WEBGL:A,M=n.x,P=void 0===M?0:M,R=n.y,j=void 0===R?0:R,I=n.copy,L=void 0!==I&&I;this.width=a,this.height=s;var N={width:a,height:s,type:zR[o],format:UR[f],wrapS:GR[v],wrapT:GR[m],mag:HR[O],min:HR[T],alignment:x,flipY:c,colorSpace:WR[k],premultiplyAlpha:E,aniso:_,x:P,y:j,copy:L};r&&(N.data=r),"number"===typeof p?N.mipmap=VR[p]:"boolean"===typeof p&&(N.mipmap=p),this.texture=e.texture(N)}return Object(nt["a"])(t,[{key:"get",value:function(){return this.texture}},{key:"update",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.texture(t)}},{key:"bind",value:function(){this.texture._texture.bind()}},{key:"resize",value:function(t){var e=t.width,n=t.height;this.texture.resize(e,n),this.width=e,this.height=n}},{key:"destroy",value:function(){var t;this.isDestroy||(null===(t=this.texture)||void 0===t||t.destroy());this.isDestroy=!0}}]),t}(),rj=(jR=Object(Yf["injectable"])(),jR(IR=function(){function t(){var e=this;Object(et["a"])(this,t),Object(Ar["a"])(this,"createModel",(function(t){return new ej(e.gl,t)})),Object(Ar["a"])(this,"createAttribute",(function(t){return new DR(e.gl,t)})),Object(Ar["a"])(this,"createBuffer",(function(t){return new $R(e.gl,t)})),Object(Ar["a"])(this,"createElements",(function(t){return new JR(e.gl,t)})),Object(Ar["a"])(this,"createTexture2D",(function(t){return new nj(e.gl,t)})),Object(Ar["a"])(this,"createFramebuffer",(function(t){return new tj(e.gl,t)})),Object(Ar["a"])(this,"useFramebuffer",(function(t,n){e.gl({framebuffer:t?t.get():null})(n)})),Object(Ar["a"])(this,"clear",(function(t){var n,r=t.color,i=t.depth,o=t.stencil,a=t.framebuffer,s=void 0===a?null:a,u={color:r,depth:i,stencil:o};u.framebuffer=null===s?s:s.get(),null===(n=e.gl)||void 0===n||n.clear(u)})),Object(Ar["a"])(this,"viewport",(function(t){var n=t.x,r=t.y,i=t.width,o=t.height;e.gl._gl.viewport(n,r,i,o),e.width=i,e.height=o,e.gl._refresh()})),Object(Ar["a"])(this,"readPixels",(function(t){var n=t.framebuffer,r=t.x,i=t.y,o=t.width,a=t.height,s={x:r,y:i,width:o,height:a};return n&&(s.framebuffer=n.get()),e.gl.read(s)})),Object(Ar["a"])(this,"getViewportSize",(function(){return{width:e.gl._gl.drawingBufferWidth,height:e.gl._gl.drawingBufferHeight}})),Object(Ar["a"])(this,"getContainer",(function(){return on?e.canvas:null===(t=e.canvas)||void 0===t?void 0:t.parentElement;var t})),Object(Ar["a"])(this,"getCanvas",(function(){return e.canvas})),Object(Ar["a"])(this,"getGLContext",(function(){return e.gl._gl})),Object(Ar["a"])(this,"destroy",(function(){var t,n,r;e.canvas=null,null===(t=e.gl)||void 0===t||null===(n=t._gl)||void 0===n||null===(r=n.getExtension("WEBGL_lose_context"))||void 0===r||r.loseContext(),e.gl.destroy(),e.gl=null}))}return Object(nt["a"])(t,[{key:"init",value:function(){var t=Object(mi["a"])(_i.a.mark((function t(e,n,r){var i=this;return _i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this.canvas=e,!r){t.next=5;break}this.gl=r,t.next=8;break;case 5:return t.next=7,new Promise((function(t,e){NR()({canvas:i.canvas,attributes:{alpha:!0,antialias:n.antialias,premultipliedAlpha:!0,preserveDrawingBuffer:n.preserveDrawingBuffer,stencil:n.stencil},extensions:["OES_element_index_uint","OES_standard_derivatives","ANGLE_instanced_arrays"],optionalExtensions:["oes_texture_float_linear","OES_texture_float","EXT_texture_filter_anisotropic","EXT_blend_minmax","WEBGL_depth_texture"],profile:!0,onDone:function(n,r){!n&&r||e(n),t(r)}})}));case 7:this.gl=t.sent;case 8:this.extensionObject={OES_texture_float:this.testExtension("OES_texture_float")};case 9:case"end":return t.stop()}}),t,this)})));function e(e,n,r){return t.apply(this,arguments)}return e}()},{key:"getPointSizeRange",value:function(){return this.gl._gl.getParameter(this.gl._gl.ALIASED_POINT_SIZE_RANGE)}},{key:"testExtension",value:function(t){return!!this.getGLContext().getExtension(t)}},{key:"setState",value:function(){this.gl({cull:{enable:!1,face:"back"},viewport:{x:0,y:0,height:this.width,width:this.height},blend:{enable:!0,equation:"add"},framebuffer:null}),this.gl._refresh()}},{key:"setBaseState",value:function(){this.gl({cull:{enable:!1,face:"back"},viewport:{x:0,y:0,height:this.width,width:this.height},blend:{enable:!1,equation:"add"},framebuffer:null}),this.gl._refresh()}},{key:"setCustomLayerDefaults",value:function(){var t=this.getGLContext();t.disable(t.CULL_FACE)}},{key:"setDirty",value:function(t){this.isDirty=t}},{key:"getDirty",value:function(){return this.isDirty}}]),t}())||IR);function ij(t){var e=oj();return function(){var n,r=Object(ct["a"])(t);if(e){var i=Object(ct["a"])(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(ut["a"])(this,n)}}function oj(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}var aj,sj,uj,cj,lj,fj,hj,pj,dj,vj,gj,mj,yj,_j,bj=["selectstart","selecting","selectend"],xj=function(t){Object(st["a"])(n,t);var e=ij(n);function n(t){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(et["a"])(this,n),r=e.call(this),Object(Ar["a"])(Object(ft["a"])(r),"isEnable",!1),Object(Ar["a"])(Object(ft["a"])(r),"onDragStart",(function(t){r.box.style.display="block",r.startEvent=r.endEvent=t,r.syncBoxBound(),r.emit("selectstart",r.getLngLatBox(),r.startEvent,r.endEvent)})),Object(Ar["a"])(Object(ft["a"])(r),"onDragging",(function(t){r.endEvent=t,r.syncBoxBound(),r.emit("selecting",r.getLngLatBox(),r.startEvent,r.endEvent)})),Object(Ar["a"])(Object(ft["a"])(r),"onDragEnd",(function(t){r.endEvent=t,r.box.style.display="none",r.emit("selectend",r.getLngLatBox(),r.startEvent,r.endEvent)})),r.scene=t,r.options=i,r}return Object(nt["a"])(n,[{key:"container",get:function(){return this.scene.getMapService().getMarkerContainer()}},{key:"enable",value:function(){if(!this.isEnable){var t=this.options.className;if(this.scene.setMapStatus({dragEnable:!1}),this.container.style.cursor="crosshair",!this.box){var e=r.create("div",void 0,this.container);e.classList.add("l7-select-box"),t&&e.classList.add(t),e.style.display="none",this.box=e}this.scene.on("dragstart",this.onDragStart),this.scene.on("dragging",this.onDragging),this.scene.on("dragend",this.onDragEnd),this.isEnable=!0}}},{key:"disable",value:function(){this.isEnable&&(this.scene.setMapStatus({dragEnable:!0}),this.container.style.cursor="auto",this.scene.off("dragstart",this.onDragStart),this.scene.off("dragging",this.onDragging),this.scene.off("dragend",this.onDragEnd),this.isEnable=!1)}},{key:"syncBoxBound",value:function(){var t=this.startEvent,e=t.x,n=t.y,r=this.endEvent,i=r.x,o=r.y,a=Math.min(e,i),s=Math.min(n,o),u=Math.abs(e-i),c=Math.abs(n-o);this.box.style.top="".concat(s,"px"),this.box.style.left="".concat(a,"px"),this.box.style.width="".concat(u,"px"),this.box.style.height="".concat(c,"px")}},{key:"getLngLatBox",value:function(){var t=this.startEvent.lngLat,e=t.lng,n=t.lat,r=this.endEvent.lngLat,i=r.lng,o=r.lat;return Cr([[e,n],[i,o]])}}]),n}(vl["EventEmitter"]),wj=function(){function t(e){Object(et["a"])(this,t);var n=e.id,r=e.map,i=e.canvas,o=e.hasBaseMap,a=Km();this.container=a,r.setContainer(a,n,i,o),a.bind(Kf.IRendererService).to(rj).inSingletonScope(),this.sceneService=a.get(Kf.ISceneService),this.mapService=a.get(Kf.IMapService),this.iconService=a.get(Kf.IIconService),this.fontService=a.get(Kf.IFontService),this.controlService=a.get(Kf.IControlService),this.layerService=a.get(Kf.ILayerService),this.markerService=a.get(Kf.IMarkerService),this.interactionService=a.get(Kf.IInteractionService),this.popupService=a.get(Kf.IPopupService),this.boxSelect=new xj(this,{}),on?this.sceneService.initMiniScene(e):(this.initComponent(n),this.sceneService.init(e),this.initControl())}return Object(nt["a"])(t,[{key:"map",get:function(){return this.mapService.map}},{key:"loaded",get:function(){return this.sceneService.loaded}},{key:"getServiceContainer",value:function(){return this.container}},{key:"getSize",value:function(){return this.mapService.getSize()}},{key:"getMinZoom",value:function(){return this.mapService.getMinZoom()}},{key:"getMaxZoom",value:function(){return this.mapService.getMaxZoom()}},{key:"getType",value:function(){return this.mapService.getType()}},{key:"getMapContainer",value:function(){return this.mapService.getMapContainer()}},{key:"getMapCanvasContainer",value:function(){return this.mapService.getMapCanvasContainer()}},{key:"getMapService",value:function(){return this.mapService}},{key:"exportPng",value:function(t){return this.sceneService.exportPng(t)}},{key:"exportMap",value:function(t){return this.sceneService.exportPng(t)}},{key:"registerRenderService",value:function(t){var e=this;if(this.sceneService.loaded){var n=new t(this);n.init()}else this.on("loaded",(function(){var n=new t(e);n.init()}))}},{key:"setBgColor",value:function(t){this.mapService.setBgColor(t)}},{key:"addLayer",value:function(t){var e=this,n=Qm(this.container);if(t.setContainer(n,this.container),this.sceneService.addLayer(t),t.inited){var r=this.initMask(t);this.addMask(r,t.id)}else t.on("inited",(function(){var n=e.initMask(t);e.addMask(n,t.id)}))}},{key:"initMask",value:function(t){var e=t.getLayerConfig(),n=e.mask,r=e.maskfence,i=e.maskColor,o=void 0===i?"#000":i,a=e.maskOpacity,s=void 0===a?0:a;if(n&&r){var u=(new Ww).source(r).shape("fill").style({color:o,opacity:s});return u}}},{key:"addMask",value:function(t,e){if(t){var n=this.getLayer(e);if(n){var r=Qm(this.container);t.setContainer(r,this.container),n.addMaskLayer(t),this.sceneService.addMask(t)}else console.warn("parent layer not find!")}}},{key:"getPickedLayer",value:function(){return this.layerService.pickedLayerId}},{key:"getLayers",value:function(){return this.layerService.getLayers()}},{key:"getLayer",value:function(t){return this.layerService.getLayer(t)}},{key:"getLayerByName",value:function(t){return this.layerService.getLayerByName(t)}},{key:"removeLayer",value:function(t,e){this.layerService.remove(t,e)}},{key:"removeAllLayer",value:function(){this.layerService.removeAllLayers()}},{key:"render",value:function(){this.sceneService.render()}},{key:"setEnableRender",value:function(t){this.layerService.setEnableRender(t)}},{key:"addIconFont",value:function(t,e){this.fontService.addIconFont(t,e)}},{key:"addIconFonts",value:function(t){var e=this;t.forEach((function(t){var n=Object(q["a"])(t,2),r=n[0],i=n[1];e.fontService.addIconFont(r,i)}))}},{key:"addFontFace",value:function(t,e){var n=this;this.fontService.once("fontloaded",(function(t){n.emit("fontloaded",t)})),this.fontService.addFontFace(t,e)}},{key:"addImage",value:function(){var t=Object(mi["a"])(_i.a.mark((function t(e,n){return _i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(on){t.next=5;break}return t.next=3,this.iconService.addImage(e,n);case 3:t.next=6;break;case 5:this.iconService.addImageMini(e,n,this.sceneService);case 6:case"end":return t.stop()}}),t,this)})));function e(e,n){return t.apply(this,arguments)}return e}()},{key:"hasImage",value:function(t){return this.iconService.hasImage(t)}},{key:"removeImage",value:function(t){this.iconService.removeImage(t)}},{key:"addIconFontGlyphs",value:function(t,e){this.fontService.addIconGlyphs(e)}},{key:"addControl",value:function(t){this.controlService.addControl(t,this.container)}},{key:"removeControl",value:function(t){this.controlService.removeControl(t)}},{key:"getControlByName",value:function(t){return this.controlService.getControlByName(t)}},{key:"addMarker",value:function(t){this.markerService.addMarker(t)}},{key:"addMarkerLayer",value:function(t){this.markerService.addMarkerLayer(t)}},{key:"removeMarkerLayer",value:function(t){this.markerService.removeMarkerLayer(t)}},{key:"removeAllMakers",value:function(){this.markerService.removeAllMarkers()}},{key:"addPopup",value:function(t){this.popupService.addPopup(t)}},{key:"removePopup",value:function(t){this.popupService.removePopup(t)}},{key:"on",value:function(t,e){var n;bj.includes(t)?null===(n=this.boxSelect)||void 0===n||n.on(t,e):oy.includes(t)?this.sceneService.on(t,e):this.mapService.on(t,e)}},{key:"once",value:function(t,e){var n;bj.includes(t)?null===(n=this.boxSelect)||void 0===n||n.once(t,e):oy.includes(t)?this.sceneService.once(t,e):this.mapService.once(t,e)}},{key:"emit",value:function(t,e){-1===oy.indexOf(t)?this.mapService.on(t,e):this.sceneService.emit(t,e)}},{key:"off",value:function(t,e){var n;bj.includes(t)?null===(n=this.boxSelect)||void 0===n||n.off(t,e):oy.includes(t)?this.sceneService.off(t,e):this.mapService.off(t,e)}},{key:"getZoom",value:function(){return this.mapService.getZoom()}},{key:"getCenter",value:function(t){return this.mapService.getCenter(t)}},{key:"setCenter",value:function(t,e){return this.mapService.setCenter(t,e)}},{key:"getPitch",value:function(){return this.mapService.getPitch()}},{key:"setPitch",value:function(t){return this.mapService.setPitch(t)}},{key:"getRotation",value:function(){return this.mapService.getRotation()}},{key:"getBounds",value:function(){return this.mapService.getBounds()}},{key:"setRotation",value:function(t){this.mapService.setRotation(t)}},{key:"zoomIn",value:function(){this.mapService.zoomIn()}},{key:"zoomOut",value:function(){this.mapService.zoomOut()}},{key:"panTo",value:function(t){this.mapService.panTo(t)}},{key:"panBy",value:function(t,e){this.mapService.panBy(t,e)}},{key:"getContainer",value:function(){return this.mapService.getContainer()}},{key:"setZoom",value:function(t){this.mapService.setZoom(t)}},{key:"fitBounds",value:function(t,e){var n=this.sceneService.getSceneConfig(),r=n.fitBoundsOptions,i=n.animate;this.mapService.fitBounds(t,e||Object(P["a"])(Object(P["a"])({},r),{},{animate:i}))}},{key:"setZoomAndCenter",value:function(t,e){this.mapService.setZoomAndCenter(t,e)}},{key:"setMapStyle",value:function(t){this.mapService.setMapStyle(t)}},{key:"setMapStatus",value:function(t){this.mapService.setMapStatus(t)}},{key:"pixelToLngLat",value:function(t){return this.mapService.pixelToLngLat(t)}},{key:"lngLatToPixel",value:function(t){return this.mapService.lngLatToPixel(t)}},{key:"containerToLngLat",value:function(t){return this.mapService.containerToLngLat(t)}},{key:"lngLatToContainer",value:function(t){return this.mapService.lngLatToContainer(t)}},{key:"destroy",value:function(){this.sceneService.destroy()}},{key:"registerPostProcessingPass",value:function(t,e){this.container.bind(Kf.IPostProcessingPass).to(t).whenTargetNamed(e)}},{key:"enableShaderPick",value:function(){this.layerService.enableShaderPick()}},{key:"diasbleShaderPick",value:function(){this.layerService.disableShaderPick()}},{key:"enableBoxSelect",value:function(){var t=this,e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.boxSelect.enable(),e&&this.boxSelect.once("selectend",(function(){t.disableBoxSelect()}))}},{key:"disableBoxSelect",value:function(){this.boxSelect.disable()}},{key:"getPointSizeRange",value:function(){return this.sceneService.getPointSizeRange()}},{key:"initComponent",value:function(t){this.controlService.init({container:r.getContainer(t)},this.container),this.markerService.init(this.container),this.popupService.init(this.container)}},{key:"initControl",value:function(){var t=this.sceneService.getSceneConfig(),e=t.logoVisible,n=t.logoPosition;e&&this.addControl(new m_({position:n}))}}]),t}(),Ej=function(){function t(e){Object(et["a"])(this,t),Object(Ar["a"])(this,"size",1e4),this.size=e||1e4}return Object(nt["a"])(t,[{key:"setSize",value:function(t){this.size=t}},{key:"getSize",value:function(){return[this.size,this.size]}},{key:"mercatorXfromLng",value:function(t){return(180+t)/360*this.size}},{key:"mercatorYfromLat",value:function(t){return(1-(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+t*Math.PI/360)))/360)*this.size}},{key:"lngFromMercatorX",value:function(t){return t/this.size*360-180}},{key:"latFromMercatorY",value:function(t){var e=180-360*(1-t/this.size);return 360/Math.PI*Math.atan(Math.exp(e*Math.PI/180))-90}},{key:"project",value:function(t){var e=this.mercatorXfromLng(t[0]),n=this.mercatorYfromLat(t[1]);return[e,n]}},{key:"unproject",value:function(t){var e=this.lngFromMercatorX(t[0]),n=this.latFromMercatorY(t[1]);return[e,n]}}]),t}(),Sj={light:"mapbox://styles/zcxduo/ck2ypyb1r3q9o1co1766dex29",dark:"mapbox://styles/zcxduo/ck241p6413s0b1cpayzldv7x7",normal:"mapbox://styles/mapbox/streets-v11",blank:{version:8,sources:{},layers:[{id:"background",type:"background",layout:{visibility:"none"}}]}},Oj={mapmove:"move",camerachange:"move",zoomchange:"zoom",dragging:"drag"},Cj=12,Tj=(aj=Object(Yf["injectable"])(),sj=Object(Yf["inject"])(Kf.MapConfig),uj=Object(Yf["inject"])(Kf.IGlobalConfigService),cj=Object(Yf["inject"])(Kf.ICoordinateSystemService),lj=Object(Yf["inject"])(Kf.IEventEmitter),aj((hj=function(){function t(){var e=this;Object(et["a"])(this,t),Object(Ar["a"])(this,"version",M_.DEFUALT),Object(Ar["a"])(this,"simpleMapCoord",new Ej),Object(Ar["a"])(this,"bgColor","rgba(0.0, 0.0, 0.0, 0.0)"),sp(this,"config",pj,this),sp(this,"configService",dj,this),sp(this,"coordinateSystemService",vj,this),sp(this,"eventEmitter",gj,this),Object(Ar["a"])(this,"handleCameraChanged",(function(t){var n=e.map.getCenter(),r=n.lat,i=n.lng;e.emit("mapchange"),e.viewport.syncWithMapCamera({bearing:e.map.getBearing(),center:[i,r],viewportHeight:e.map.transform.height,pitch:e.map.getPitch(),viewportWidth:e.map.transform.width,zoom:e.map.getZoom(),cameraHeight:0}),e.updateCoordinateSystemService(),e.cameraChangedCallback(e.viewport)}))}return Object(nt["a"])(t,[{key:"setBgColor",value:function(t){this.bgColor=t}},{key:"addMarkerContainer",value:function(){var t=this.map.getCanvasContainer();this.markerContainer=r.create("div","l7-marker-container",t),this.markerContainer.setAttribute("tabindex","-1")}},{key:"getMarkerContainer",value:function(){return this.markerContainer}},{key:"getOverlayContainer",value:function(){}},{key:"on",value:function(t,e){-1!==ry.indexOf(t)?this.eventEmitter.on(t,e):this.map.on(Oj[t]||t,e)}},{key:"off",value:function(t,e){this.map.off(Oj[t]||t,e),this.eventEmitter.off(t,e)}},{key:"getContainer",value:function(){return this.map.getContainer()}},{key:"getMapCanvasContainer",value:function(){return this.map.getCanvasContainer()}},{key:"getSize",value:function(){if(this.version===M_.SIMPLE)return this.simpleMapCoord.getSize();var t=this.map.transform;return[t.width,t.height]}},{key:"getType",value:function(){return"default"}},{key:"getZoom",value:function(){return this.map.getZoom()}},{key:"setZoom",value:function(t){return this.map.setZoom(t)}},{key:"getCenter",value:function(){return this.map.getCenter()}},{key:"setCenter",value:function(t){this.map.setCenter(t)}},{key:"getPitch",value:function(){return this.map.getPitch()}},{key:"getRotation",value:function(){return this.map.getBearing()}},{key:"getBounds",value:function(){return this.map.getBounds().toArray()}},{key:"getMinZoom",value:function(){return this.map.getMinZoom()}},{key:"getMaxZoom",value:function(){return this.map.getMaxZoom()}},{key:"setRotation",value:function(t){this.map.setBearing(t)}},{key:"zoomIn",value:function(t,e){this.map.zoomIn(t,e)}},{key:"zoomOut",value:function(t,e){this.map.zoomOut(t,e)}},{key:"setPitch",value:function(t){return this.map.setPitch(t)}},{key:"panTo",value:function(t){this.map.panTo(t)}},{key:"panBy",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.panTo([t,e])}},{key:"fitBounds",value:function(t,e){this.map.fitBounds(t,e)}},{key:"setMaxZoom",value:function(t){this.map.setMaxZoom(t)}},{key:"setMinZoom",value:function(t){this.map.setMinZoom(t)}},{key:"setMapStatus",value:function(t){!0===t.doubleClickZoom&&this.map.doubleClickZoom.enable(),!1===t.doubleClickZoom&&this.map.doubleClickZoom.disable(),!1===t.dragEnable&&this.map.dragPan.disable(),!0===t.dragEnable&&this.map.dragPan.enable(),!1===t.rotateEnable&&this.map.dragRotate.disable(),!0===t.dragEnable&&this.map.dragRotate.enable(),!1===t.keyboardEnable&&this.map.keyboard.disable(),!0===t.keyboardEnable&&this.map.keyboard.enable(),!1===t.zoomEnable&&this.map.scrollZoom.disable(),!0===t.zoomEnable&&this.map.scrollZoom.enable()}},{key:"setZoomAndCenter",value:function(t,e){this.map.flyTo({zoom:t,center:e})}},{key:"setMapStyle",value:function(t){this.map.setStyle(this.getMapStyleValue(t))}},{key:"meterToCoord",value:function(t,e){return 1}},{key:"pixelToLngLat",value:function(t){return this.map.unproject(t)}},{key:"lngLatToPixel",value:function(t){return this.map.project(t)}},{key:"containerToLngLat",value:function(t){return this.map.unproject(t)}},{key:"lngLatToContainer",value:function(t){return this.map.project(t)}},{key:"getMapStyle",value:function(){try{var t,e=null!==(t=this.map.getStyle().sprite)&&void 0!==t?t:"";return/^mapbox:\/\/sprites\/zcxduo\/\w+\/\w+$/.test(e)?null===e||void 0===e?void 0:e.replace(/\/\w+$/,"").replace(/sprites/,"styles"):e}catch(n){return""}}},{key:"getMapStyleConfig",value:function(){return Sj}},{key:"getMapStyleValue",value:function(t){var e;return null!==(e=this.getMapStyleConfig()[t])&&void 0!==e?e:t}},{key:"destroy",value:function(){this.eventEmitter.removeAllListeners(),this.map&&(this.map.remove(),this.$mapContainer=null)}},{key:"emit",value:function(t){for(var e,n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];(e=this.eventEmitter).emit.apply(e,[t].concat(r))}},{key:"once",value:function(t){for(var e,n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];(e=this.eventEmitter).once.apply(e,[t].concat(r))}},{key:"getMapContainer",value:function(){return this.$mapContainer}},{key:"exportMap",value:function(t){var e=this.map.getCanvas(),n="jpg"===t?null===e||void 0===e?void 0:e.toDataURL("image/jpeg"):null===e||void 0===e?void 0:e.toDataURL("image/png");return n}},{key:"onCameraChanged",value:function(t){this.cameraChangedCallback=t}},{key:"creatMapContainer",value:function(t){var e=t;return"string"===typeof t&&(e=document.getElementById(t)),e}},{key:"updateView",value:function(t){this.emit("mapchange"),this.viewport.syncWithMapCamera({bearing:t.bearing,center:t.center,viewportHeight:t.viewportHeight,pitch:t.pitch,viewportWidth:t.viewportWidth,zoom:t.zoom,cameraHeight:0}),this.updateCoordinateSystemService(),this.cameraChangedCallback(this.viewport)}},{key:"updateCoordinateSystemService",value:function(){var t=this.config.offsetCoordinate,e=void 0===t||t;this.viewport.getZoom()>Cj&&e?this.coordinateSystemService.setCoordinateSystem(cp.LNGLAT_OFFSET):this.coordinateSystemService.setCoordinateSystem(cp.LNGLAT)}}]),t}(),pj=up(hj.prototype,"config",[sj],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),dj=up(hj.prototype,"configService",[uj],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),vj=up(hj.prototype,"coordinateSystemService",[cj],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),gj=up(hj.prototype,"eventEmitter",[lj],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),fj=hj))||fj),Aj=(mj=Ym(Kf.IGlobalConfigService),yj=function(){function t(e){Object(et["a"])(this,t),sp(this,"configService",_j,this),this.config=e}return Object(nt["a"])(t,[{key:"setContainer",value:function(t,e,n,r){t.bind(Kf.MapConfig).toConstantValue(Object(P["a"])(Object(P["a"])({},this.config),{},{id:e,canvas:n,hasBaseMap:r})),t.bind(Kf.IMapService).to(this.getServiceConstructor()).inSingletonScope()}},{key:"getServiceConstructor",value:function(){throw new Error("Method not implemented.")}}]),t}(),_j=up(yj.prototype,"configService",[mj],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),yj);function kj(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function Mj(t,e){var n=Ku([],e,t);return Du(n,n,1/n[3]),n}function Pj(t,e){if(!t)throw new Error(e||"viewport-mercator-project: assertion failed.")}var Rj=Math.PI,jj=Rj/4,Ij=Rj/180,Lj=180/Rj,Nj=512,Dj=4003e4,Fj=1.5;function Bj(t){return Math.pow(2,t)}function zj(t,e){var n=Object(q["a"])(t,2),r=n[0],i=n[1];Pj(Number.isFinite(r)&&Number.isFinite(e)),Pj(Number.isFinite(i)&&i>=-90&&i<=90,"invalid latitude"),e*=Nj;var o=r*Ij,a=i*Ij,s=e*(o+Rj)/(2*Rj),u=e*(Rj-Math.log(Math.tan(jj+.5*a)))/(2*Rj);return[s,u]}function Uj(t,e){var n=Object(q["a"])(t,2),r=n[0],i=n[1];e*=Nj;var o=r/e*(2*Rj)-Rj,a=2*(Math.atan(Math.exp(Rj-i/e*(2*Rj)))-jj);return[o*Lj,a*Lj]}function Vj(t){var e=t.latitude,n=t.longitude,r=t.zoom,i=t.scale,o=t.highPrecision,a=void 0!==o&&o;i=void 0!==i?i:Bj(r),Pj(Number.isFinite(e)&&Number.isFinite(n)&&Number.isFinite(i));var s={},u=Nj*i,c=Math.cos(e*Ij),l=u/360,f=l/c,h=u/Dj/c;if(s.pixelsPerMeter=[h,-h,h],s.metersPerPixel=[1/h,-1/h,1/h],s.pixelsPerDegree=[l,-f,h],s.degreesPerPixel=[1/l,-1/f,1/h],a){var p=Ij*Math.tan(e*Ij)/c,d=l*p/2,v=u/Dj*p,g=v/f*h;s.pixelsPerDegree2=[0,-d,v],s.pixelsPerMeter2=[g,0,g]}return s}function Hj(t){var e=t.height,n=t.pitch,r=t.bearing,i=t.altitude,o=t.center,a=void 0===o?null:o,s=t.flipY,u=void 0!==s&&s,c=kj();return $o(c,c,[0,0,-i]),Jo(c,c,[1,1,1/e]),ea(c,c,-n*Ij),ra(c,c,r*Ij),u&&Jo(c,c,[1,-1,1]),a&&$o(c,c,qs([],a)),c}function Gj(t){var e=t.width,n=t.height,r=t.altitude,i=void 0===r?Fj:r,o=t.pitch,a=void 0===o?0:o,s=t.nearZMultiplier,u=void 0===s?1:s,c=t.farZMultiplier,l=void 0===c?1:c,f=a*Ij,h=Math.atan(.5/i),p=Math.sin(h)*i/Math.sin(Math.PI/2-f-h),d=Math.cos(Math.PI/2-f)*p+i;return{fov:2*Math.atan(n/2/i),aspect:e/n,focalDistance:i,near:u,far:d*l}}function Wj(t){var e=t.width,n=t.height,r=t.pitch,i=t.altitude,o=t.nearZMultiplier,a=t.farZMultiplier,s=Gj({width:e,height:n,altitude:i,pitch:r,nearZMultiplier:o,farZMultiplier:a}),u=s.fov,c=s.aspect,l=s.near,f=s.far,h=ba([],u,c,l,f);return h}function Zj(t,e){var n=Object(q["a"])(t,3),r=n[0],i=n[1],o=n[2],a=void 0===o?0:o;return Pj(Number.isFinite(r)&&Number.isFinite(i)&&Number.isFinite(a)),Mj(e,[r,i,a,1])}function Yj(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=Object(q["a"])(t,3),i=r[0],o=r[1],a=r[2];if(Pj(Number.isFinite(i)&&Number.isFinite(o),"invalid pixel coordinate"),Number.isFinite(a)){var s=Mj(e,[i,o,a,1]);return s}var u=Mj(e,[i,o,0,1]),c=Mj(e,[i,o,1,1]),l=u[2],f=c[2],h=l===f?0:((n||0)-l)/(f-l);return cs([],u,c,h)}var Xj=kj(),qj=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.width,r=e.height,i=e.viewMatrix,o=void 0===i?Xj:i,a=e.projectionMatrix,s=void 0===a?Xj:a;Object(et["a"])(this,t),this.width=n||1,this.height=r||1,this.scale=1,this.pixelsPerMeter=1,this.viewMatrix=o,this.projectionMatrix=s;var u=kj();Qo(u,u,this.projectionMatrix),Qo(u,u,this.viewMatrix),this.viewProjectionMatrix=u;var c=kj();Jo(c,c,[this.width/2,-this.height/2,1]),$o(c,c,[1,-1,0]),Qo(c,c,this.viewProjectionMatrix);var l=Xo(kj(),c);if(!l)throw new Error("Pixel project matrix not invertible");this.pixelProjectionMatrix=c,this.pixelUnprojectionMatrix=l,this.equals=this.equals.bind(this),this.project=this.project.bind(this),this.unproject=this.unproject.bind(this),this.projectPosition=this.projectPosition.bind(this),this.unprojectPosition=this.unprojectPosition.bind(this),this.projectFlat=this.projectFlat.bind(this),this.unprojectFlat=this.unprojectFlat.bind(this)}return Object(nt["a"])(t,[{key:"equals",value:function(e){return e instanceof t&&(e.width===this.width&&e.height===this.height&&La(e.projectionMatrix,this.projectionMatrix)&&La(e.viewMatrix,this.viewMatrix))}},{key:"project",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.topLeft,r=void 0===n||n,i=this.projectPosition(t),o=Zj(i,this.pixelProjectionMatrix),a=Object(q["a"])(o,2),s=a[0],u=a[1],c=r?u:this.height-u;return 2===t.length?[s,c]:[s,c,o[2]]}},{key:"unproject",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.topLeft,r=void 0===n||n,i=e.targetZ,o=Object(q["a"])(t,3),a=o[0],s=o[1],u=o[2],c=r?s:this.height-s,l=i&&i*this.pixelsPerMeter,f=Yj([a,c,u],this.pixelUnprojectionMatrix,l),h=this.unprojectPosition(f),p=Object(q["a"])(h,3),d=p[0],v=p[1],g=p[2];return Number.isFinite(u)?[d,v,g]:Number.isFinite(i)?[d,v,i]:[d,v]}},{key:"projectPosition",value:function(t){var e=this.projectFlat(t),n=Object(q["a"])(e,2),r=n[0],i=n[1],o=(t[2]||0)*this.pixelsPerMeter;return[r,i,o]}},{key:"unprojectPosition",value:function(t){var e=this.unprojectFlat(t),n=Object(q["a"])(e,2),r=n[0],i=n[1],o=(t[2]||0)/this.pixelsPerMeter;return[r,i,o]}},{key:"projectFlat",value:function(t){arguments.length>1&&void 0!==arguments[1]||this.scale;return t}},{key:"unprojectFlat",value:function(t){arguments.length>1&&void 0!==arguments[1]||this.scale;return t}}]),t}();function Kj(t){var e=t.width,n=t.height,r=t.bounds,i=t.minExtent,o=void 0===i?0:i,a=t.maxZoom,s=void 0===a?24:a,u=t.padding,c=void 0===u?0:u,l=t.offset,f=void 0===l?[0,0]:l,h=Object(q["a"])(r,2),p=Object(q["a"])(h[0],2),d=p[0],v=p[1],g=Object(q["a"])(h[1],2),m=g[0],y=g[1];if(Number.isFinite(c)){var _=c;c={top:_,bottom:_,left:_,right:_}}else Pj(Number.isFinite(c.top)&&Number.isFinite(c.bottom)&&Number.isFinite(c.left)&&Number.isFinite(c.right));var b=new Qj({width:e,height:n,longitude:0,latitude:0,zoom:0}),x=b.project([d,y]),w=b.project([m,v]),E=[Math.max(Math.abs(w[0]-x[0]),o),Math.max(Math.abs(w[1]-x[1]),o)],S=[e-c.left-c.right-2*Math.abs(f[0]),n-c.top-c.bottom-2*Math.abs(f[1])];Pj(S[0]>0&&S[1]>0);var O=S[0]/E[0],C=S[1]/E[1],T=(c.right-c.left)/2/O,A=(c.bottom-c.top)/2/C,k=[(w[0]+x[0])/2+T,(w[1]+x[1])/2+A],M=b.unproject(k),P=b.zoom+Math.log2(Math.abs(Math.min(O,C)));return{longitude:M[0],latitude:M[1],zoom:Math.min(P,s)}}var Qj=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.width,i=n.height,o=n.latitude,a=void 0===o?0:o,s=n.longitude,u=void 0===s?0:s,c=n.zoom,l=void 0===c?0:c,f=n.pitch,h=void 0===f?0:f,p=n.bearing,d=void 0===p?0:p,v=n.altitude,g=void 0===v?1.5:v,m=n.nearZMultiplier,y=n.farZMultiplier;Object(et["a"])(this,e),r=r||1,i=i||1;var _=Bj(l);g=Math.max(.75,g);var b=zj([u,a],_);b[2]=0;var x=Wj({width:r,height:i,pitch:h,bearing:d,altitude:g,nearZMultiplier:m||1/i,farZMultiplier:y||1.01}),w=Hj({height:i,center:b,pitch:h,bearing:d,altitude:g,flipY:!0});return t=Object(ut["a"])(this,Object(ct["a"])(e).call(this,{width:r,height:i,viewMatrix:w,projectionMatrix:x})),t.latitude=a,t.longitude=u,t.zoom=l,t.pitch=h,t.bearing=d,t.altitude=g,t.scale=_,t.center=b,t.pixelsPerMeter=Vj(Object(ft["a"])(Object(ft["a"])(t))).pixelsPerMeter[2],Object.freeze(Object(ft["a"])(Object(ft["a"])(t))),t}return Object(st["a"])(e,t),Object(nt["a"])(e,[{key:"projectFlat",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.scale;return zj(t,e)}},{key:"unprojectFlat",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.scale;return Uj(t,e)}},{key:"getMapCenterByLngLatPosition",value:function(t){var e=t.lngLat,n=t.pos,r=Yj(n,this.pixelUnprojectionMatrix),i=zj(e,this.scale),o=Ha([],i,is([],r)),a=Ha([],this.center,o);return Uj(a,this.scale)}},{key:"getLocationAtPoint",value:function(t){var e=t.lngLat,n=t.pos;return this.getMapCenterByLngLatPosition({lngLat:e,pos:n})}},{key:"fitBounds",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=this.width,i=this.height,o=Kj(Object.assign({width:r,height:i,bounds:t},n)),a=o.longitude,s=o.latitude,u=o.zoom;return new e({width:r,height:i,longitude:a,latitude:s,zoom:u})}}]),e}(qj),$j=function(){function t(){Object(et["a"])(this,t)}return Object(nt["a"])(t,[{key:"syncWithMapCamera",value:function(t){var e=t.center,n=t.zoom,r=t.pitch,i=t.bearing,o=t.viewportHeight,a=t.viewportWidth,s=this.viewport?{width:this.viewport.width,height:this.viewport.height,longitude:this.viewport.center[0],latitude:this.viewport.center[1],zoom:this.viewport.zoom,pitch:this.viewport.pitch,bearing:this.viewport.bearing}:{};this.viewport=new Qj(Object(P["a"])(Object(P["a"])({},s),{},{width:a,height:o,longitude:e&&e[0],latitude:e&&e[1],zoom:n,pitch:r,bearing:i}))}},{key:"getZoom",value:function(){return this.viewport.zoom}},{key:"getZoomScale",value:function(){return Math.pow(2,this.getZoom())}},{key:"getCenter",value:function(){return[this.viewport.longitude,this.viewport.latitude]}},{key:"getProjectionMatrix",value:function(){return this.viewport.projectionMatrix}},{key:"getModelMatrix",value:function(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}},{key:"getViewMatrix",value:function(){return this.viewport.viewMatrix}},{key:"getViewMatrixUncentered",value:function(){return this.viewport.viewMatrixUncentered}},{key:"getViewProjectionMatrix",value:function(){return this.viewport.viewProjectionMatrix}},{key:"getViewProjectionMatrixUncentered",value:function(){return this.viewport.viewProjectionMatrix}},{key:"getFocalDistance",value:function(){return 1}},{key:"projectFlat",value:function(t,e){return this.viewport.projectFlat(t,e)}}]),t}(),Jj=n("GLe2"),tI=n("qLMh");function eI(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function nI(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function rI(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?nI(Object(n),!0).forEach((function(e){eI(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):nI(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function iI(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}function oI(t,e){if(null==t)return{};var n,r,i=iI(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function aI(t,e,n,r,i,o,a){try{var s=t[o](a),u=s.value}catch(c){return void n(c)}s.done?e(u):Promise.resolve(u).then(r,i)}function sI(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){aI(o,r,i,a,s,"next",t)}function s(t){aI(o,r,i,a,s,"throw",t)}a(void 0)}))}}var uI,cI=n("zvhG"),lI=n.n(cI);function fI(t,e){var n="undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=hI(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n["return"]||n["return"]()}finally{if(s)throw o}}}}function hI(t,e){if(t){if("string"===typeof t)return pI(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?pI(t,e):void 0}}function pI(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function dI(t,e,n){var r=n-e,i=((t-e)%r+r)%r+e;return i===e?n:i}function vI(t,e,n){return Math.min(n,Math.max(e,t))}function gI(t,e,n){return t*(1-n)+e*n}function mI(t,e,n,r){var i=new lI.a(t,e,n,r);return function(t){return i.solve(t)}}var yI=mI(.25,.1,.25,1);function _I(){return!(on||!sn.matchMedia)&&(null==uI&&(uI=sn.matchMedia("(prefers-reduced-motion: reduce)")),uI.matches)}function bI(t,e){var n,r={},i=fI(e);try{for(i.s();!(n=i.n()).done;){var o=n.value;o in t&&(r[o]=t[o])}}catch(a){i.e(a)}finally{i.f()}return r}var xI=on?Date.now.bind(Date):sn.performance&&sn.performance.now?sn.performance.now.bind(sn.performance):Date.now.bind(Date);sn.requestAnimationFrame||sn.mozRequestAnimationFrame||sn.webkitRequestAnimationFrame||sn.msRequestAnimationFrame,sn.cancelAnimationFrame||sn.mozCancelAnimationFrame||sn.webkitCancelAnimationFrame||sn.msCancelAnimationFrame;var wI=6371008.8,EI=function(){function t(e,n){if(Object(et["a"])(this,t),isNaN(e)||isNaN(n))throw new Error("Invalid LngLat object: (".concat(e,", ").concat(n,")"));if(this.lng=+e,this.lat=+n,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}return Object(nt["a"])(t,[{key:"wrap",value:function(){return new t(dI(this.lng,-180,180),this.lat)}},{key:"toArray",value:function(){return[this.lng,this.lat]}},{key:"toString",value:function(){return"LngLat(".concat(this.lng,", ").concat(this.lat,")")}},{key:"distanceTo",value:function(t){var e=Math.PI/180,n=this.lat*e,r=t.lat*e,i=Math.sin(n)*Math.sin(r)+Math.cos(n)*Math.cos(r)*Math.cos((t.lng-this.lng)*e),o=wI*Math.acos(Math.min(i,1));return o}}],[{key:"convert",value:function(e){if(e instanceof t)return e;if(Array.isArray(e)&&(2===e.length||3===e.length))return new t(Number(e[0]),Number(e[1]));if(!Array.isArray(e)&&"object"===Object(fe["a"])(e)&&null!==e){var n="lng"in e?e.lng:e.lon;return new t(Number(n),Number(e.lat))}throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}]),t}(),SI=function(){function t(e,n){Object(et["a"])(this,t),e&&(n?this.setSouthWest(e).setNorthEast(n):4===e.length?this.setSouthWest([e[0],e[1]]).setNorthEast([e[2],e[3]]):this.setSouthWest(e[0]).setNorthEast(e[1]))}return Object(nt["a"])(t,[{key:"setNorthEast",value:function(t){return this.ne=t instanceof EI?new EI(t.lng,t.lat):EI.convert(t),this}},{key:"setSouthWest",value:function(t){return this.sw=t instanceof EI?new EI(t.lng,t.lat):EI.convert(t),this}},{key:"extend",value:function(e){var n,r,i=this.sw,o=this.ne;if(e instanceof EI)n=e,r=e;else{if(!(e instanceof t)){if(Array.isArray(e)){if(4===e.length||e.every(Array.isArray)){var a=e;return this.extend(t.convert(a))}var s=e;return this.extend(EI.convert(s))}return this}if(n=e.sw,r=e.ne,!n||!r)return this}return i||o?(i.lng=Math.min(n.lng,i.lng),i.lat=Math.min(n.lat,i.lat),o.lng=Math.max(r.lng,o.lng),o.lat=Math.max(r.lat,o.lat)):(this.sw=new EI(n.lng,n.lat),this.ne=new EI(r.lng,r.lat)),this}},{key:"getCenter",value:function(){return new EI((this.sw.lng+this.ne.lng)/2,(this.sw.lat+this.ne.lat)/2)}},{key:"getSouthWest",value:function(){return this.sw}},{key:"getNorthEast",value:function(){return this.ne}},{key:"getNorthWest",value:function(){return new EI(this.getWest(),this.getNorth())}},{key:"getSouthEast",value:function(){return new EI(this.getEast(),this.getSouth())}},{key:"getWest",value:function(){return this.sw.lng}},{key:"getSouth",value:function(){return this.sw.lat}},{key:"getEast",value:function(){return this.ne.lng}},{key:"getNorth",value:function(){return this.ne.lat}},{key:"toArray",value:function(){return[this.sw.toArray(),this.ne.toArray()]}},{key:"toString",value:function(){return"LngLatBounds(".concat(this.sw.toString(),", ").concat(this.ne.toString(),")")}},{key:"isEmpty",value:function(){return!(this.sw&&this.ne)}},{key:"contains",value:function(t){var e=EI.convert(t),n=e.lng,r=e.lat,i=this.sw.lat<=r&&r<=this.ne.lat,o=this.sw.lng<=n&&n<=this.ne.lng;return this.sw.lng>this.ne.lng&&(o=this.sw.lng>=n&&n>=this.ne.lng),i&&o}}],[{key:"convert",value:function(e){return e instanceof t?e:new t(e)}}]),t}(),OI=function(){function t(e,n){Object(et["a"])(this,t),this.x=e,this.y=n}return Object(nt["a"])(t,[{key:"clone",value:function(){return new t(this.x,this.y)}},{key:"_add",value:function(t){return this.x+=t.x,this.y+=t.y,this}},{key:"add",value:function(t){return this.clone()._add(t)}},{key:"_sub",value:function(t){return this.x-=t.x,this.y-=t.y,this}},{key:"sub",value:function(t){return this.clone()._sub(t)}},{key:"_multByPoint",value:function(t){return this.x*=t.x,this.y*=t.y,this}},{key:"multByPoint",value:function(t){return this.clone()._multByPoint(t)}},{key:"_divByPoint",value:function(t){return this.x/=t.x,this.y/=t.y,this}},{key:"divByPoint",value:function(t){return this.clone()._divByPoint(t)}},{key:"_mult",value:function(t){return this.x*=t,this.y*=t,this}},{key:"mult",value:function(t){return this.clone()._mult(t)}},{key:"_div",value:function(t){return this.x/=t,this.y/=t,this}},{key:"div",value:function(t){return this.clone()._div(t)}},{key:"_rotate",value:function(t){var e=Math.cos(t),n=Math.sin(t),r=e*this.x-n*this.y,i=n*this.x+e*this.y;return this.x=r,this.y=i,this}},{key:"rotate",value:function(t){return this.clone()._rotate(t)}},{key:"_rotateAround",value:function(t,e){var n=Math.cos(t),r=Math.sin(t),i=e.x+n*(this.x-e.x)-r*(this.y-e.y),o=e.y+r*(this.x-e.x)+n*(this.y-e.y);return this.x=i,this.y=o,this}},{key:"roateAround",value:function(t,e){return this.clone()._rotateAround(t,e)}},{key:"_matMult",value:function(t){var e=t[0]*this.x+t[1]*this.y,n=t[2]*this.x+t[3]*this.y;return this.x=e,this.y=n,this}},{key:"matMult",value:function(t){return this.clone()._matMult(t)}},{key:"_unit",value:function(){return this.div(this.mag()),this}},{key:"unit",value:function(){return this.clone()._unit()}},{key:"_perp",value:function(){var t=this.y;return this.y=this.x,this.x=-t,this}},{key:"perp",value:function(){return this.clone()._perp()}},{key:"_round",value:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},{key:"round",value:function(){return this.clone()._round()}},{key:"mag",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y)}},{key:"equals",value:function(t){return this.x===t.x&&this.y===t.y}},{key:"dist",value:function(t){return Math.sqrt(this.distSqr(t))}},{key:"distSqr",value:function(t){var e=t.x-this.x,n=t.y-this.y;return e*e+n*n}},{key:"angle",value:function(){return Math.atan2(this.y,this.x)}},{key:"angleTo",value:function(t){return Math.atan2(this.y-t.y,this.x-t.x)}},{key:"angleWith",value:function(t){return this.angleWithSep(t.x,t.y)}},{key:"angleWithSep",value:function(t,e){return Math.atan2(this.x*e-this.y*t,this.x*t+this.y*e)}}],[{key:"convert",value:function(e){return e instanceof t?e:Array.isArray(e)?new t(e[0],e[1]):e}}]),t}(),CI=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if(Object(et["a"])(this,t),isNaN(e)||e<0||isNaN(n)||n<0||isNaN(r)||r<0||isNaN(i)||i<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=e,this.bottom=n,this.left=r,this.right=i}return Object(nt["a"])(t,[{key:"interpolate",value:function(t,e,n){return null!=e.top&&null!=t.top&&(this.top=gI(t.top,e.top,n)),null!=e.bottom&&null!=t.bottom&&(this.bottom=gI(t.bottom,e.bottom,n)),null!=e.left&&null!=t.left&&(this.left=gI(t.left,e.left,n)),null!=e.right&&null!=t.right&&(this.right=gI(t.right,e.right,n)),this}},{key:"getCenter",value:function(t,e){var n=vI((this.left+t-this.right)/2,0,t),r=vI((this.top+e-this.bottom)/2,0,e);return new OI(n,r)}},{key:"equals",value:function(t){return this.top===t.top&&this.bottom===t.bottom&&this.left===t.left&&this.right===t.right}},{key:"clone",value:function(){return new t(this.top,this.bottom,this.left,this.right)}},{key:"toJSON",value:function(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}]),t}(),TI=2*Math.PI*wI;function AI(t){return TI*Math.cos(t*Math.PI/180)}function kI(t){return(180+t)/360}function MI(t){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+t*Math.PI/360)))/360}function PI(t,e){return t/AI(e)}function RI(t){return 360*t-180}function jI(t){var e=180-360*t;return 360/Math.PI*Math.atan(Math.exp(e*Math.PI/180))-90}function II(t,e){return t*AI(jI(e))}function LI(t){return 1/Math.cos(t*Math.PI/180)}var NI=function(){function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;Object(et["a"])(this,t),this.x=+e,this.y=+n,this.z=+r}return Object(nt["a"])(t,[{key:"toLngLat",value:function(){return new EI(RI(this.x),jI(this.y))}},{key:"toAltitude",value:function(){return II(this.z,this.y)}},{key:"meterInMercatorCoordinateUnits",value:function(){return 1/TI*LI(jI(this.y))}}],[{key:"fromLngLat",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=EI.convert(e);return new t(kI(r.lng),MI(r.lat),PI(n,r.lat))}}]),t}();function DI(t,e){var n="undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=FI(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n["return"]||n["return"]()}finally{if(s)throw o}}}}function FI(t,e){if(t){if("string"===typeof t)return BI(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?BI(t,e):void 0}}function BI(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var zI=function(){function t(e,n,r,i,o){Object(et["a"])(this,t),this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=void 0===o||o,this._minZoom=e||0,this._maxZoom=n||22,this._minPitch=void 0===r||null===r?0:r,this._maxPitch=void 0===i||null===i?60:i,this.setMaxBounds(),this.width=0,this.height=0,this._center=new EI(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this.unmodified=!0,this.edgeInsets=new CI,this.posMatrixCache={},this.alignedPosMatrixCache={}}return Object(nt["a"])(t,[{key:"minZoom",get:function(){return this._minZoom},set:function(t){this._minZoom!==t&&(this._minZoom=t,this.zoom=Math.max(this.zoom,t))}},{key:"maxZoom",get:function(){return this._maxZoom},set:function(t){this._maxZoom!==t&&(this._maxZoom=t,this.zoom=Math.min(this.zoom,t))}},{key:"minPitch",get:function(){return this._minPitch},set:function(t){this._minPitch!==t&&(this._minPitch=t,this._pitch=Math.max(this._pitch,t))}},{key:"maxPitch",get:function(){return this._maxPitch},set:function(t){this._maxPitch!==t&&(this._maxPitch=t,this._pitch=Math.min(this._pitch,t))}},{key:"renderWorldCopies",get:function(){return this._renderWorldCopies},set:function(t){void 0===t?t=!0:null===t&&(t=!1),this._renderWorldCopies=t}},{key:"worldSize",get:function(){return this.tileSize*this.scale}},{key:"centerOffset",get:function(){return this.centerPoint._sub(this.size._div(2))}},{key:"size",get:function(){return new OI(this.width,this.height)}},{key:"bearing",get:function(){return-this.angle/Math.PI*180},set:function(t){var e=-dI(t,-180,180)*Math.PI/180;this.angle!==e&&(this.unmodified=!1,this.angle=e,this.calcMatrices(),this.rotationMatrix=o.create(),o.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))}},{key:"pitch",get:function(){return this._pitch/Math.PI*180},set:function(t){var e=vI(t,this._minPitch,this._maxPitch)/180*Math.PI;this._pitch!==e&&(this.unmodified=!1,this._pitch=e,this.calcMatrices())}},{key:"fov",get:function(){return this._fov/Math.PI*180},set:function(t){t=Math.max(.01,Math.min(60,t)),this._fov!==t&&(this.unmodified=!1,this._fov=t/180*Math.PI,this.calcMatrices())}},{key:"zoom",get:function(){return this._zoom},set:function(t){var e=Math.min(Math.max(t,this._minZoom),this._maxZoom);this._zoom!==e&&(this.unmodified=!1,this._zoom=e,this.scale=this.zoomScale(e),this.tileZoom=Math.floor(e),this.zoomFraction=e-this.tileZoom,this.constrain(),this.calcMatrices())}},{key:"center",get:function(){return this._center},set:function(t){t.lat===this._center.lat&&t.lng===this._center.lng||(this.unmodified=!1,this._center=t,this.constrain(),this.calcMatrices())}},{key:"padding",get:function(){return this.edgeInsets.toJSON()},set:function(t){this.edgeInsets.equals(t)||(this.unmodified=!1,this.edgeInsets.interpolate(this.edgeInsets,t,1),this.calcMatrices())}},{key:"centerPoint",get:function(){return this.edgeInsets.getCenter(this.width,this.height)}},{key:"point",get:function(){return this.project(this.center)}},{key:"clone",value:function(){var e=new t(this._minZoom,this._maxZoom,this._minPitch,this._maxPitch,this._renderWorldCopies);return e.tileSize=this.tileSize,e.latRange=this.latRange,e.width=this.width,e.height=this.height,e.center=this._center,e.zoom=this.zoom,e.angle=this.angle,e.fov=this._fov,e.pitch=this._pitch,e.unmodified=this.unmodified,e.edgeInsets=this.edgeInsets.clone(),e.calcMatrices(),e}},{key:"isPaddingEqual",value:function(t){return this.edgeInsets.equals(t)}},{key:"interpolatePadding",value:function(t,e,n){this.unmodified=!1,this.edgeInsets.interpolate(t,e,n),this.constrain(),this.calcMatrices()}},{key:"coveringZoomLevel",value:function(t){var e=(t.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/t.tileSize));return Math.max(0,e)}},{key:"resize",value:function(t,e){this.width=t,this.height=e,this.pixelsToGLUnits=[2/t,-2/e],this.constrain(),this.calcMatrices()}},{key:"zoomScale",value:function(t){return Math.pow(2,t)}},{key:"scaleZoom",value:function(t){return Math.log(t)/Math.LN2}},{key:"project",value:function(t){var e=vI(t.lat,-this.maxValidLatitude,this.maxValidLatitude);return new OI(kI(t.lng)*this.worldSize,MI(e)*this.worldSize)}},{key:"unproject",value:function(t){return new NI(t.x/this.worldSize,t.y/this.worldSize).toLngLat()}},{key:"setLocationAtPoint",value:function(t,e){var n=this.pointCoordinate(e),r=this.pointCoordinate(this.centerPoint),i=this.locationCoordinate(t),o=new NI(i.x-(n.x-r.x),i.y-(n.y-r.y));this.center=this.coordinateLocation(o),this._renderWorldCopies&&(this.center=this.center.wrap())}},{key:"pointCoordinate",value:function(t){var e=0,n=new Float64Array([t.x,t.y,0,1]),r=new Float64Array([t.x,t.y,1,1]);c.transformMat4(n,n,this.pixelMatrixInverse),c.transformMat4(r,r,this.pixelMatrixInverse);var i=n[3],o=r[3],a=n[0]/i,s=r[0]/o,u=n[1]/i,l=r[1]/o,f=n[2]/i,h=r[2]/o,p=f===h?0:(e-f)/(h-f);return new NI(gI(a,s,p)/this.worldSize,gI(u,l,p)/this.worldSize)}},{key:"getBounds",value:function(){return(new SI).extend(this.pointLocation(new OI(0,0))).extend(this.pointLocation(new OI(this.width,0))).extend(this.pointLocation(new OI(this.width,this.height))).extend(this.pointLocation(new OI(0,this.height)))}},{key:"getMaxBounds",value:function(){return this.latRange&&2===this.latRange.length&&this.lngRange&&2===this.lngRange.length?new SI([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}},{key:"setMaxBounds",value:function(t){t?(this.lngRange=[t.getWest(),t.getEast()],this.latRange=[t.getSouth(),t.getNorth()],this.constrain()):(this.lngRange=void 0,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])}},{key:"customLayerMatrix",value:function(){return this.mercatorMatrix.slice()}},{key:"maxPitchScaleFactor",value:function(){if(!this.pixelMatrixInverse)return 1;var t=this.pointCoordinate(new OI(0,0)),e=new Float32Array([t.x*this.worldSize,t.y*this.worldSize,0,1]),n=c.transformMat4(e,e,this.pixelMatrix);return n[3]/this.cameraToCenterDistance}},{key:"getCameraPoint",value:function(){var t=this._pitch,e=Math.tan(t)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new OI(0,e))}},{key:"getCameraQueryGeometry",value:function(t){var e=this.getCameraPoint();if(1===t.length)return[t[0],e];var n,r=e.x,i=e.y,o=e.x,a=e.y,s=DI(t);try{for(s.s();!(n=s.n()).done;){var u=n.value;r=Math.min(r,u.x),i=Math.min(i,u.y),o=Math.max(o,u.x),a=Math.max(a,u.y)}}catch(c){s.e(c)}finally{s.f()}return[new OI(r,i),new OI(o,i),new OI(o,a),new OI(r,a),new OI(r,i)]}},{key:"coordinatePoint",value:function(t){var e=c.fromValues(t.x*this.worldSize,t.y*this.worldSize,0,1);return c.transformMat4(e,e,this.pixelMatrix),new OI(e[0]/e[3],e[1]/e[3])}},{key:"locationPoint",value:function(t){return this.coordinatePoint(this.locationCoordinate(t))}},{key:"pointLocation",value:function(t){return this.coordinateLocation(this.pointCoordinate(t))}},{key:"locationCoordinate",value:function(t){return NI.fromLngLat(t)}},{key:"coordinateLocation",value:function(t){return t.toLngLat()}},{key:"getProjectionMatrix",value:function(){return this.projMatrix}},{key:"constrain",value:function(){if(this.center&&this.width&&this.height&&!this.constraining){this.constraining=!0;var t,e,n,r,i=-90,o=90,a=-180,s=180,u=this.size,c=this.unmodified;if(this.latRange){var l=this.latRange;i=MI(l[1])*this.worldSize,o=MI(l[0])*this.worldSize,t=o-i<u.y?u.y/(o-i):0}if(this.lngRange){var f=this.lngRange;a=kI(f[0])*this.worldSize,s=kI(f[1])*this.worldSize,e=s-a<u.x?u.x/(s-a):0}var h=this.point,p=Math.max(e||0,t||0);if(p)return this.center=this.unproject(new OI(e?(s+a)/2:h.x,t?(o+i)/2:h.y)),on?this.zoom=Math.max(this.zoom,Math.max(-1,this.minZoom)):this.zoom+=this.scaleZoom(p),this.unmodified=c,void(this.constraining=!1);if(this.latRange){var d=h.y,v=u.y/2;d-v<i&&(r=i+v),d+v>o&&(r=o-v)}if(this.lngRange){var g=h.x,m=u.x/2;g-m<a&&(n=a+m),g+m>s&&(n=s-m)}void 0===n&&void 0===r||(this.center=this.unproject(new OI(void 0!==n?n:h.x,void 0!==r?r:h.y))),this.unmodified=c,this.constraining=!1}}},{key:"calcMatrices",value:function(){if(this.height){var t=this._fov/2,e=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(t)*this.height;var n=Math.PI/2+this._pitch,r=this._fov*(.5+e.y/this.height),i=Math.sin(r)*this.cameraToCenterDistance/Math.sin(vI(Math.PI-n-r,.01,Math.PI-.01)),o=this.point,s=o.x,u=o.y,c=Math.cos(Math.PI/2-this._pitch)*i+this.cameraToCenterDistance,l=1.01*c,f=this.height/50,h=new Float64Array(16);a.perspective(h,this._fov,this.width/this.height,f,l),h[8]=2*-e.x/this.width,h[9]=2*e.y/this.height,a.scale(h,h,[1,-1,1]),a.translate(h,h,[0,0,-this.cameraToCenterDistance]),a.rotateX(h,h,this._pitch),a.rotateZ(h,h,this.angle),a.translate(h,h,[-s,-u,0]),this.mercatorMatrix=a.scale([],h,[this.worldSize,this.worldSize,this.worldSize]),a.scale(h,h,[1,1,PI(1,this.center.lat)*this.worldSize,1]),this.projMatrix=h,this.invProjMatrix=a.invert([],this.projMatrix);var p=this.width%2/2,d=this.height%2/2,v=Math.cos(this.angle),g=Math.sin(this.angle),m=s-Math.round(s)+v*p+g*d,y=u-Math.round(u)+v*d+g*p,_=new Float64Array(h);if(a.translate(_,_,[m>.5?m-1:m,y>.5?y-1:y,0]),this.alignedProjMatrix=_,h=a.create(),a.scale(h,h,[this.width/2,-this.height/2,1]),a.translate(h,h,[1,-1,0]),this.labelPlaneMatrix=h,h=a.create(),a.scale(h,h,[1,-1,1]),a.translate(h,h,[-1,-1,0]),a.scale(h,h,[2/this.width,2/this.height,1]),this.glCoordMatrix=h,this.pixelMatrix=a.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),h=a.invert(new Float64Array(16),this.pixelMatrix),!h)throw new Error("failed to invert matrix");this.pixelMatrixInverse=h,this.posMatrixCache={},this.alignedPosMatrixCache={}}}}]),t}(),UI=n("QkVN"),VI=n.n(UI),HI=Object(nt["a"])((function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(et["a"])(this,t),VI()(this,n),this.type=e}));function GI(t){var e=WI();return function(){var n,r=Object(ct["a"])(t);if(e){var i=Object(ct["a"])(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(ut["a"])(this,n)}}function WI(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}vl["EventEmitter"];function ZI(t,e){var n="undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=YI(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n["return"]||n["return"]()}finally{if(s)throw o}}}}function YI(t,e){if(t){if("string"===typeof t)return XI(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?XI(t,e):void 0}}function XI(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var qI={};qI.create=function(t,e,n){var r=sn.document.createElement(t);return void 0!==e&&(r.className=e),n&&n.appendChild(r),r},qI.createNS=function(t,e){var n=sn.document.createElementNS(t,e);return n};var KI=sn.document&&sn.document.documentElement.style;function QI(t){if(!KI)return t[0];var e,n=ZI(t);try{for(n.s();!(e=n.n()).done;){var r=e.value;if(r in KI)return r}}catch(i){n.e(i)}finally{n.f()}return t[0]}var $I,JI=QI(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]);qI.disableDrag=function(){KI&&JI&&($I=KI[JI],KI[JI]="none")},qI.enableDrag=function(){KI&&JI&&(KI[JI]=$I)};var tL=QI(["transform","WebkitTransform"]);qI.setTransform=function(t,e){t.style[tL]=e};var eL=!1;try{var nL=Object.defineProperty({},"passive",{get:function(){eL=!0}});sn.addEventListener("test",nL,nL),sn.removeEventListener("test",nL,nL)}catch(mL){eL=!1}qI.addEventListener=function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};"passive"in r&&eL?t.addEventListener(e,n,r):t.addEventListener(e,n,r.capture)},qI.removeEventListener=function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};"passive"in r&&eL?t.removeEventListener(e,n,r):t.removeEventListener(e,n,r.capture)};var rL=function t(e){e.preventDefault(),e.stopPropagation(),sn.removeEventListener("click",t,!0)};qI.suppressClick=function(){on||(sn.addEventListener("click",rL,!0),setTimeout((function(){sn.removeEventListener("click",rL,!0)}),0))},qI.mousePos=function(t,e){if(on)return new OI(e.clientX-t.left-0,e.clientY-t.top-0);var n=t.getBoundingClientRect();return new OI(e.clientX-n.left-t.clientLeft,e.clientY-n.top-t.clientTop)},qI.touchPos=function(t,e){if(on){var n,r=[],i=ZI(e);try{for(i.s();!(n=i.n()).done;){var o=n.value;r.push(new OI(o.clientX-t.left,o.clientY-t.top))}}catch(mL){i.e(mL)}finally{i.f()}return r}var a,s=t.getBoundingClientRect(),u=[],c=ZI(e);try{for(c.s();!(a=c.n()).done;){var l=a.value;u.push(new OI(l.clientX-s.left-t.clientLeft,l.clientY-s.top-t.clientTop))}}catch(mL){c.e(mL)}finally{c.f()}return u},qI.mouseButton=function(t){return on&&"undefined"!==typeof sn.InstallTrigger&&2===t.button&&t.ctrlKey&&sn.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:t.button},qI.remove=function(t){t.parentNode&&t.parentNode.removeChild(t)};var iL={linearity:.3,easing:mI(0,0,.3,1)};VI()({deceleration:2500,maxSpeed:1400},iL),VI()({deceleration:20,maxSpeed:1400},iL),VI()({deceleration:1e3,maxSpeed:360},iL),VI()({deceleration:1e3,maxSpeed:90},iL);var oL,aL=0,sL=2;oL={},Object(Ar["a"])(oL,aL,1),Object(Ar["a"])(oL,sL,2);sn.performance;function uL(t,e){var n="undefined"!==typeof my&&!!my&&"function"===typeof my.showToast&&!0!==my.isFRM,r="undefined"!==typeof wx&&null!==wx&&("undefined"!==typeof wx.request||"undefined"!==typeof wx.miniProgram);if(!n&&!r&&(e||(e=document),e)){var i=e.head||e.getElementsByTagName("head")[0];if(!i){i=e.createElement("head");var o=e.body||e.getElementsByTagName("body")[0];o?o.parentNode.insertBefore(i,o):e.documentElement.appendChild(i)}var a=e.createElement("style");return a.type="text/css",a.styleSheet?a.styleSheet.cssText=t:a.appendChild(e.createTextNode(t)),i.appendChild(a),a}}uL(".l7-map {\n  font: 12px/20px 'Helvetica Neue', Arial, Helvetica, sans-serif;\n  overflow: hidden;\n  position: relative;\n  -webkit-tap-highlight-color: rgba(0, 0, 0, 0);\n}\n\n.l7-canvas {\n  position: absolute;\n  left: 0;\n  top: 0;\n}\n\n.l7-map:-webkit-full-screen {\n  width: 100%;\n  height: 100%;\n}\n\n.l7-canary {\n  background-color: salmon;\n}\n\n.l7-canvas-container.l7-interactive,\n.l7-ctrl-group button.l7-ctrl-compass {\n  cursor: -webkit-grab;\n  cursor: grab;\n  -moz-user-select: none;\n  -webkit-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n\n.l7-canvas-container.l7-interactive.l7-track-pointer {\n  cursor: pointer;\n}\n\n.l7-canvas-container.l7-interactive:active,\n.l7-ctrl-group button.l7-ctrl-compass:active {\n  cursor: -webkit-grabbing;\n  cursor: grabbing;\n}\n\n.l7-canvas-container.l7-touch-zoom-rotate,\n.l7-canvas-container.l7-touch-zoom-rotate .l7-canvas {\n  -ms-touch-action: pan-x pan-y;\n      touch-action: pan-x pan-y;\n}\n\n.l7-canvas-container.l7-touch-drag-pan,\n.l7-canvas-container.l7-touch-drag-pan .l7-canvas {\n  -ms-touch-action: pinch-zoom;\n      touch-action: pinch-zoom;\n}\n\n.l7-canvas-container.l7-touch-zoom-rotate.l7-touch-drag-pan,\n.l7-canvas-container.l7-touch-zoom-rotate.l7-touch-drag-pan .l7-canvas {\n  -ms-touch-action: none;\n      touch-action: none;\n}\n\n.l7-ctrl-top-left,\n.l7-ctrl-top-right,\n.l7-ctrl-bottom-left,\n.l7-ctrl-bottom-right { position: absolute; pointer-events: none; z-index: 2; }\n.l7-ctrl-top-left     { top: 0; left: 0; }\n.l7-ctrl-top-right    { top: 0; right: 0; }\n.l7-ctrl-bottom-left  { bottom: 0; left: 0; }\n.l7-ctrl-bottom-right { right: 0; bottom: 0; }\n\n.l7-ctrl {\n  clear: both;\n  pointer-events: auto;\n\n  /* workaround for a Safari bug https://github.com/mapbox/mapbox-gl-js/issues/8185 */\n  -webkit-transform: translate(0, 0);\n          transform: translate(0, 0);\n}\n.l7-ctrl-top-left .l7-ctrl     { margin: 10px 0 0 10px; float: left; }\n.l7-ctrl-top-right .l7-ctrl    { margin: 10px 10px 0 0; float: right; }\n.l7-ctrl-bottom-left .l7-ctrl  { margin: 0 0 10px 10px; float: left; }\n.l7-ctrl-bottom-right .l7-ctrl { margin: 0 10px 10px 0; float: right; }\n\n\n.l7-crosshair,\n.l7-crosshair .l7-interactive,\n.l7-crosshair .l7-interactive:active {\n    cursor: crosshair;\n}\n\n.l7-boxzoom {\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 0;\n    height: 0;\n    background: #fff;\n    border: 2px dotted #202020;\n    opacity: 0.5;\n    z-index: 10;\n}\n");function cL(t,e){var n="undefined"!==typeof my&&!!my&&"function"===typeof my.showToast&&!0!==my.isFRM,r="undefined"!==typeof wx&&null!==wx&&("undefined"!==typeof wx.request||"undefined"!==typeof wx.miniProgram);if(!n&&!r&&(e||(e=document),e)){var i=e.head||e.getElementsByTagName("head")[0];if(!i){i=e.createElement("head");var o=e.body||e.getElementsByTagName("body")[0];o?o.parentNode.insertBefore(i,o):e.documentElement.appendChild(i)}var a=e.createElement("style");return a.type="text/css",a.styleSheet?a.styleSheet.cssText=t:a.appendChild(e.createTextNode(t)),i.appendChild(a),a}}cL(".l7-map {\n  font: 12px/20px 'Helvetica Neue', Arial, Helvetica, sans-serif;\n  overflow: hidden;\n  position: relative;\n  -webkit-tap-highlight-color: rgba(0, 0, 0, 0);\n}\n\n.l7-canvas {\n  position: absolute;\n  left: 0;\n  top: 0;\n}\n\n.l7-map:-webkit-full-screen {\n  width: 100%;\n  height: 100%;\n}\n\n.l7-canary {\n  background-color: salmon;\n}\n\n.l7-canvas-container.l7-interactive,\n.l7-ctrl-group button.l7-ctrl-compass {\n  cursor: -webkit-grab;\n  cursor: grab;\n  -moz-user-select: none;\n  -webkit-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n\n.l7-canvas-container.l7-interactive.l7-track-pointer {\n  cursor: pointer;\n}\n\n.l7-canvas-container.l7-interactive:active,\n.l7-ctrl-group button.l7-ctrl-compass:active {\n  cursor: -webkit-grabbing;\n  cursor: grabbing;\n}\n\n.l7-canvas-container.l7-touch-zoom-rotate,\n.l7-canvas-container.l7-touch-zoom-rotate .l7-canvas {\n  -ms-touch-action: pan-x pan-y;\n      touch-action: pan-x pan-y;\n}\n\n.l7-canvas-container.l7-touch-drag-pan,\n.l7-canvas-container.l7-touch-drag-pan .l7-canvas {\n  -ms-touch-action: pinch-zoom;\n      touch-action: pinch-zoom;\n}\n\n.l7-canvas-container.l7-touch-zoom-rotate.l7-touch-drag-pan,\n.l7-canvas-container.l7-touch-zoom-rotate.l7-touch-drag-pan .l7-canvas {\n  -ms-touch-action: none;\n      touch-action: none;\n}\n\n.l7-ctrl-top-left,\n.l7-ctrl-top-right,\n.l7-ctrl-bottom-left,\n.l7-ctrl-bottom-right { position: absolute; pointer-events: none; z-index: 2; }\n.l7-ctrl-top-left     { top: 0; left: 0; }\n.l7-ctrl-top-right    { top: 0; right: 0; }\n.l7-ctrl-bottom-left  { bottom: 0; left: 0; }\n.l7-ctrl-bottom-right { right: 0; bottom: 0; }\n\n.l7-ctrl {\n  clear: both;\n  pointer-events: auto;\n\n  /* workaround for a Safari bug https://github.com/mapbox/mapbox-gl-js/issues/8185 */\n  -webkit-transform: translate(0, 0);\n          transform: translate(0, 0);\n}\n.l7-ctrl-top-left .l7-ctrl     { margin: 10px 0 0 10px; float: left; }\n.l7-ctrl-top-right .l7-ctrl    { margin: 10px 10px 0 0; float: right; }\n.l7-ctrl-bottom-left .l7-ctrl  { margin: 0 0 10px 10px; float: left; }\n.l7-ctrl-bottom-right .l7-ctrl { margin: 0 10px 10px 0; float: right; }\n\n\n.l7-crosshair,\n.l7-crosshair .l7-interactive,\n.l7-crosshair .l7-interactive:active {\n    cursor: crosshair;\n}\n\n.l7-boxzoom {\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 0;\n    height: 0;\n    background: #fff;\n    border: 2px dotted #202020;\n    opacity: 0.5;\n    z-index: 10;\n}\n");n("VFMm");class lL extends $j{constructor(){super(...arguments),this.focalDistance=1,this.scale=void 0,this.modelMatrix=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],this.viewMatrix=void 0,this.viewMatrixUncentered=void 0,this.viewProjectionMatrix=void 0,this.ViewProjectionMatrixUncentered=void 0,this.projectionMatrix=void 0}getViewMatrix(){var t;return null!==(t=this.viewMatrix)&&void 0!==t?t:this.viewport.viewMatrix}getViewMatrixUncentered(){var t;return null!==(t=this.viewMatrixUncentered)&&void 0!==t?t:this.viewport.viewMatrixUncentered}getViewProjectionMatrix(){var t;return null!==(t=this.viewProjectionMatrix)&&void 0!==t?t:this.viewport.viewProjectionMatrix}getViewProjectionMatrixUncentered(){var t;return null!==(t=this.ViewProjectionMatrixUncentered)&&void 0!==t?t:this.viewport.ViewProjectionMatrixUncentered}getProjectionMatrix(){var t;return null!==(t=this.projectionMatrix)&&void 0!==t?t:this.viewport.projectionMatrix}getZoomScale(){var t;return null!==(t=this.scale)&&void 0!==t?t:Math.pow(2,this.getZoom())}getFocalDistance(){return this.focalDistance}getModelMatrix(){return this.modelMatrix}setFocalDistance(t){this.focalDistance=t}setScale(t){this.scale=t}setModelMatrix(t){this.modelMatrix=t}setProjectionMatrix(t){this.projectionMatrix=t}setViewMatrix(t){this.viewMatrix=t}setViewMatrixUncentered(t){this.viewMatrixUncentered=t}setViewProjectionMatrix(t){this.viewProjectionMatrix=t}setViewProjectionMatrixUncentered(t){this.ViewProjectionMatrixUncentered=t}projectFlat(t,e){return this.viewport.projectFlat(t,e)}}var fL=["id","style","rotation","mapInstance","version","mapSize"],hL=0;class pL extends Tj{constructor(){super(...arguments),this.viewport=void 0,this.handleCameraChanged=t=>{var e=this.map.getCenter(),n=e.x,r=e.y,i=this.map.getPitch(),o=this.map.getBearing(),a=this.map.getSize(),s=a.width,u=a.height,c=this.getMapBoxZoom();console.log(c),this.viewport.syncWithMapCamera({bearing:o,center:[n,r],pitch:i,viewportWidth:s,viewportHeight:u,zoom:c}),this.updateCoordinateSystemService(),this.cameraChangedCallback(this.viewport)}}getType(){return"maptalks"}lngLatToCoord(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{x:0,y:0,z:0},n=this.lngLatToMercator(t,0),r=n.x,i=n.y;return[r-e.x,i-e.y]}lngLatToMercator(t,e){var n=this.map.coordToViewPoint(new Jj["a"](t),null,e),r=n.x,i=void 0===r?0:r,o=n.y,a=void 0===o?0:o,s=n.z,u=void 0===s?0:s;return{x:i,y:a,z:u}}getModelMatrix(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[1,1,1],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{x:0,y:0,z:0},o=NI.fromLngLat(t,e),s=o.meterInMercatorCoordinateUnits(),c=a.create();return a.translate(c,c,u.fromValues(o.x-i.x,o.y-i.y,o.z||0-i.z)),a.scale(c,c,u.fromValues(s*r[0],-s*r[1],s*r[2])),a.rotateX(c,c,n[0]),a.rotateY(c,c,n[1]),a.rotateZ(c,c,n[2]),c}init(){var t=this;return sI(Object(tI["a"])().mark((function e(){var n,r,i,o,a,s,u,c,l,f;return Object(tI["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=t.config,r=n.id,i=void 0===r?"map":r,o=n.style,void 0===o?"light":o,a=n.rotation,s=void 0===a?0:a,u=n.mapInstance,c=n.version,void 0===c?"maptalks":c,l=n.mapSize,void 0===l?1e4:l,f=oI(n,fL),t.viewport=new lL,u?(t.map=u,t.$mapContainer=t.map.getContainer()):(t.$mapContainer=t.creatMapContainer(i),t.map=new Jj["b"](t.$mapContainer,rI({zoomAnimation:!0,bearing:s},f))),t.map.project=e=>t.map.getProjection().project(new Jj["c"](...e)),t.map.unproject=e=>t.map.getProjection().unproject(new Jj["c"](...e)),t.map.on("loaded",t.handleCameraChanged.bind(t)),t.map.on("moving",t.handleCameraChanged.bind(t)),t.map.on("zooming",t.handleCameraChanged.bind(t)),t.map.on("pitch",t.handleCameraChanged.bind(t)),t.map.on("resize",t.handleCameraChanged.bind(t)),t.map.on("viewchange",t.handleCameraChanged.bind(t)),t.handleCameraChanged();case 12:case"end":return e.stop()}}),e)})))()}destroy(){var t,e;null===(t=this.$mapContainer)||void 0===t||null===(e=t.parentNode)||void 0===e||e.removeChild(this.$mapContainer),this.eventEmitter.removeAllListeners(),this.map&&(this.map.remove(),this.$mapContainer=null)}addMarkerContainer(){var t=this.map.getPanels();this.markerContainer=t.frontStatic}setCenter(t){this.map.setCenter(new Jj["a"](t))}setMaxZoom(t){this.map.setMaxZoom(t+1)}setMinZoom(t){this.map.setMinZoom(t+1)}getBounds(){var t=this.map.getExtent(),e=t.xmin,n=t.ymin,r=t.xmax,i=t.ymax;return[[e,n],[r,i]]}fitBounds(t,e){this.map.fitExtent(t.flat())}setZoomAndCenter(t,e){this.map.flyTo({zoom:t+1,center:e})}setZoom(t){this.map.setZoom(t+1)}panTo(t){this.map.panTo(new Jj["a"](t))}setMapStatus(t){throw new Error("Method not implemented.")}setMapStyle(t){throw new Error("Method not implemented.")}meterToCoord(t,e){var n=new Jj["c"](t[0],t[1]),r=new Jj["c"](e[0],e[1]),i=n.distanceTo(r),o=this.lngLatToMercator(t),a=this.lngLatToMercator(e),s=o.x,u=o.y,c=a.x,l=a.y,f=4194304*Math.sqrt(Math.pow(s-c,2)+Math.pow(u-l,2))*2;return f/i}getMapBoxZoom(){var t=12756274*Math.PI/(256*Math.pow(2,20)),e=this.map.getResolution();return 19-Math.log(e/t)/Math.LN2}subtract(t,e){return t.x-=e.x,t.y-=e.y,t}exportMap(t){return this.map.toDataURL({mimeType:"image/".concat("jpg"===t?"jpeg":"png")})}getZoomScale(t,e){var n=null!==e&&void 0!==e?e:this.getZoom(),r=this.map.getResolution(t),i=this.map.getResolution(n);return i/r}onCameraChanged(t){this.cameraChangedCallback=t}creatMapContainer(t){var e=t;"string"===typeof t&&(e=document.getElementById(t));var n=document.createElement("div");return n.style.cssText+="\n\t\t\tposition: absolute;\n\t\t\ttop: 0;\n\t\t\theight: 100%;\n\t\t\twidth: 100%;\n\t\t",n.id="l7_maptalks_div"+hL++,e.appendChild(n),n}}class dL extends Aj{getServiceConstructor(){return pL}}var vL=n("q1tI"),gL=n.n(vL);e["default"]=()=>(Object(vL["useEffect"])((()=>{var t=new wj({id:"map",map:new dL({style:"light",center:[112,30],zoom:4,pitch:45,rotation:0})});return t.on("loaded",(()=>{var e,n,r=new Jj["d"]("vec",{tileSystem:[1,-1,-180,90],urlTemplate:"https://t{s}.tianditu.gov.cn/vec_c/wmts?SERVICE=WMTS&REQUEST=GetTile&VERSION=1.0.0&LAYER=vec&STYLE=default&TILEMATRIXSET=c&FORMAT=tiles&TILEMATRIX={z}&TILEROW={y}&TILECOL={x}&tk=b72aa81ac2b3cae941d1eb213499e15e",subdomains:["1","2","3","4","5"],spatialReference:{projection:"EPSG:4326"}}),i=new Jj["d"]("txt",{tileSystem:[1,-1,-180,90],urlTemplate:"https://t{s}.tianditu.gov.cn/cva_c/wmts?SERVICE=WMTS&REQUEST=GetTile&VERSION=1.0.0&LAYER=cva&STYLE=default&TILEMATRIXSET=c&FORMAT=tiles&TILEMATRIX={z}&TILEROW={y}&TILECOL={x}&tk=b72aa81ac2b3cae941d1eb213499e15e",subdomains:["1","2","3","4","5"],spatialReference:{projection:"EPSG:4326"}});null===(e=t.getMapService().map)||void 0===e||e.addLayer(r),null===(n=t.getMapService().map)||void 0===n||n.addLayer(i),fetch("https://gw.alipayobjects.com/os/rmsportal/UEXQMifxtkQlYfChpPwT.txt").then((t=>t.text())).then((e=>{var n=new Cw({}).source(e,{parser:{type:"csv",x:"lng1",y:"lat1",x1:"lng2",y1:"lat2"}}).size(1).shape("arc").color("#8C1EB2").style({opacity:.8,blur:.99});t.addLayer(n)}))})),()=>{t.destroy()}}),[]),gL.a.createElement("div",{id:"map",style:{height:"500px",position:"relative"}}))},ZWaQ:function(t,e,n){"use strict";var r=n("m/L8").f,i=n("fHMY"),o=n("4syw"),a=n("A2ZE"),s=n("GarU"),u=n("ImZN"),c=n("fdAy"),l=n("JiZb"),f=n("g6v/"),h=n("8YOa").fastKey,p=n("afO8"),d=p.set,v=p.getterFor;t.exports={getConstructor:function(t,e,n,c){var l=t((function(t,r){s(t,l,e),d(t,{type:e,index:i(null),first:void 0,last:void 0,size:0}),f||(t.size=0),void 0!=r&&u(r,t[c],t,n)})),p=v(e),g=function(t,e,n){var r,i,o=p(t),a=m(t,e);return a?a.value=n:(o.last=a={index:i=h(e,!0),key:e,value:n,previous:r=o.last,next:void 0,removed:!1},o.first||(o.first=a),r&&(r.next=a),f?o.size++:t.size++,"F"!==i&&(o.index[i]=a)),t},m=function(t,e){var n,r=p(t),i=h(e);if("F"!==i)return r.index[i];for(n=r.first;n;n=n.next)if(n.key==e)return n};return o(l.prototype,{clear:function(){var t=this,e=p(t),n=e.index,r=e.first;while(r)r.removed=!0,r.previous&&(r.previous=r.previous.next=void 0),delete n[r.index],r=r.next;e.first=e.last=void 0,f?e.size=0:t.size=0},delete:function(t){var e=this,n=p(e),r=m(e,t);if(r){var i=r.next,o=r.previous;delete n.index[r.index],r.removed=!0,o&&(o.next=i),i&&(i.previous=o),n.first==r&&(n.first=i),n.last==r&&(n.last=o),f?n.size--:e.size--}return!!r},forEach:function(t){var e,n=p(this),r=a(t,arguments.length>1?arguments[1]:void 0,3);while(e=e?e.next:n.first){r(e.value,e.key,this);while(e&&e.removed)e=e.previous}},has:function(t){return!!m(this,t)}}),o(l.prototype,n?{get:function(t){var e=m(this,t);return e&&e.value},set:function(t,e){return g(this,0===t?0:t,e)}}:{add:function(t){return g(this,t=0===t?0:t,t)}}),f&&r(l.prototype,"size",{get:function(){return p(this).size}}),l},setStrong:function(t,e,n){var r=e+" Iterator",i=v(e),o=v(r);c(t,e,(function(t,e){d(this,{type:r,target:t,state:i(t),kind:e,last:void 0})}),(function(){var t=o(this),e=t.kind,n=t.last;while(n&&n.removed)n=n.previous;return t.target&&(t.last=n=n?n.next:t.state.first)?"keys"==e?{value:n.key,done:!1}:"values"==e?{value:n.value,done:!1}:{value:[n.key,n.value],done:!1}:(t.target=void 0,{value:void 0,done:!0})}),n?"entries":"values",!n,!0),l(e)}}},ZY7T:function(t,e,n){"use strict";var r=n("I+eb"),i=n("xDBR"),o=n("0GbY"),a=n("glrk"),s=n("HAuM"),u=n("SEBh"),c=n("ImZN");r({target:"Set",proto:!0,real:!0,forced:i},{intersection:function(t){var e=a(this),n=new(u(e,o("Set"))),r=s(e.has),i=s(n.add);return c(t,(function(t){r.call(e,t)&&i.call(n,t)})),n}})},ZfDv:function(t,e,n){var r=n("hh1v"),i=n("6LWA"),o=n("tiKp"),a=o("species");t.exports=function(t,e){var n;return i(t)&&(n=t.constructor,"function"!=typeof n||n!==Array&&!i(n.prototype)?r(n)&&(n=n[a],null===n&&(n=void 0)):n=void 0),new(void 0===n?Array:n)(0===e?0:e)}},Zkgb:function(t,e,n){},Zm9Q:function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var r=n("q1tI"),i=n.n(r),o=n("TOwV");function a(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=[];return i.a.Children.forEach(t,(function(t){(void 0!==t&&null!==t||e.keepEmpty)&&(Array.isArray(t)?n=n.concat(a(t)):Object(o["isFragment"])(t)&&t.props?n=n.concat(a(t.props.children,e)):n.push(t))})),n}},ZsH6:function(t,e,n){var r=n("I+eb"),i=n("eDxR"),o=n("glrk"),a=n("4WOD"),s=i.has,u=i.get,c=i.toKey,l=function(t,e,n){var r=s(t,e,n);if(r)return u(t,e,n);var i=a(e);return null!==i?l(t,i,n):void 0};r({target:"Reflect",stat:!0},{getMetadata:function(t,e){var n=arguments.length<3?void 0:c(arguments[2]);return l(t,o(e),n)}})},Ztfv:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.tagProperty=e.tagParameter=e.decorate=void 0;var r=n("MON2"),i=n("xfSm");function o(t,e,n,r){var o=i.TAGGED;s(o,t,e,r,n)}function a(t,e,n){var r=i.TAGGED_PROP;s(r,t.constructor,e,n)}function s(t,e,n,i,o){var a={},s="number"===typeof o,u=void 0!==o&&s?o.toString():n;if(s&&void 0!==n)throw new Error(r.INVALID_DECORATOR_OPERATION);Reflect.hasOwnMetadata(t,e)&&(a=Reflect.getMetadata(t,e));var c=a[u];if(Array.isArray(c))for(var l=0,f=c;l<f.length;l++){var h=f[l];if(h.key===i.key)throw new Error(r.DUPLICATED_METADATA+" "+h.key.toString())}else c=[];c.push(i),a[u]=c,Reflect.defineMetadata(t,a,e)}function u(t,e){Reflect.decorate(t,e)}function c(t,e){return function(n,r){e(n,r,t)}}function l(t,e,n){"number"===typeof n?u([c(n,t)],e):"string"===typeof n?Reflect.decorate([t],e,n):u([t],e)}e.tagParameter=o,e.tagProperty=a,e.decorate=l},Zxc8:function(t,e,n){"use strict";n.r(e);var r=n("q1tI"),i=n.n(r),o=n("wx14"),a=n("rePB"),s=n("ODXe"),u=n("U8pU"),c=n("Ff2n"),l=n("VTBJ"),f=n("TSYQ"),h=n.n(f),p=n("Zm9Q"),d=function(){if("undefined"===typeof navigator||"undefined"===typeof window)return!1;var t=navigator.userAgent||navigator.vendor||window.opera;return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(null===t||void 0===t?void 0:t.substr(0,4))};function v(t){var e=r["useRef"]();e.current=t;var n=r["useCallback"]((function(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return null===(t=e.current)||void 0===t?void 0:t.call.apply(t,[e].concat(r))}),[]);return n}var g=n("TNol"),m=n("dm2S");function y(t){return void 0!==t}function _(t,e){var n=e||{},r=n.defaultValue,i=n.value,o=n.onChange,a=n.postState,u=Object(m["a"])((function(){return y(i)?i:y(r)?"function"===typeof r?r():r:"function"===typeof t?t():t})),c=Object(s["a"])(u,2),l=c[0],f=c[1],h=void 0!==i?i:l,p=a?a(h):h,d=v(o),_=Object(m["a"])([h]),b=Object(s["a"])(_,2),x=b[0],w=b[1];Object(g["b"])((function(){var t=x[0];l!==t&&d(l,t)}),[x]),Object(g["b"])((function(){y(i)||f(i)}),[i]);var E=v((function(t,e){f(t,e),w([h],e)}));return[p,E]}var b=n("KQm4"),x=n("wgJM"),w=n("t23M");function E(t){var e=Object(r["useRef"])(),n=Object(r["useRef"])(!1);function i(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];n.current||(x["a"].cancel(e.current),e.current=Object(x["a"])((function(){t.apply(void 0,i)})))}return Object(r["useEffect"])((function(){return n.current=!1,function(){n.current=!0,x["a"].cancel(e.current)}}),[]),i}function S(t){var e=Object(r["useRef"])([]),n=Object(r["useState"])({}),i=Object(s["a"])(n,2),o=i[1],a=Object(r["useRef"])("function"===typeof t?t():t),u=E((function(){var t=a.current;e.current.forEach((function(e){t=e(t)})),e.current=[],a.current=t,o({})}));function c(t){e.current.push(t),u()}return[a.current,c]}var O=n("4IlW");function C(t,e){var n,i=t.prefixCls,o=t.id,s=t.active,u=t.tab,c=u.key,l=u.tab,f=u.disabled,p=u.closeIcon,d=t.closable,v=t.renderWrapper,g=t.removeAriaLabel,m=t.editable,y=t.onClick,_=t.onRemove,b=t.onFocus,x=t.style,w="".concat(i,"-tab");r["useEffect"]((function(){return _}),[]);var E=m&&!1!==d&&!f;function S(t){f||y(t)}function C(t){t.preventDefault(),t.stopPropagation(),m.onEdit("remove",{key:c,event:t})}var T=r["createElement"]("div",{key:c,ref:e,className:h()(w,(n={},Object(a["a"])(n,"".concat(w,"-with-remove"),E),Object(a["a"])(n,"".concat(w,"-active"),s),Object(a["a"])(n,"".concat(w,"-disabled"),f),n)),style:x,onClick:S},r["createElement"]("div",{role:"tab","aria-selected":s,id:o&&"".concat(o,"-tab-").concat(c),className:"".concat(w,"-btn"),"aria-controls":o&&"".concat(o,"-panel-").concat(c),"aria-disabled":f,tabIndex:f?null:0,onClick:function(t){t.stopPropagation(),S(t)},onKeyDown:function(t){[O["a"].SPACE,O["a"].ENTER].includes(t.which)&&(t.preventDefault(),S(t))},onFocus:b},l),E&&r["createElement"]("button",{type:"button","aria-label":g||"remove",tabIndex:0,className:"".concat(w,"-remove"),onClick:function(t){t.stopPropagation(),C(t)}},p||m.removeIcon||"\xd7"));return v?v(T):T}var T=r["forwardRef"](C),A={width:0,height:0,left:0,top:0};function k(t,e,n){return Object(r["useMemo"])((function(){for(var n,r=new Map,i=e.get(null===(n=t[0])||void 0===n?void 0:n.key)||A,o=i.left+i.width,a=0;a<t.length;a+=1){var s,u=t[a].key,c=e.get(u);if(!c)c=e.get(null===(s=t[a-1])||void 0===s?void 0:s.key)||A;var f=r.get(u)||Object(l["a"])({},c);f.right=o-f.left-f.width,r.set(u,f)}return r}),[t.map((function(t){return t.key})).join("_"),e,n])}var M={width:0,height:0,left:0,top:0,right:0};function P(t,e,n,i,o){var a,s,u,c=o.tabs,l=o.tabPosition,f=o.rtl;["top","bottom"].includes(l)?(a="width",s=f?"right":"left",u=Math.abs(e.left)):(a="height",s="top",u=-e.top);var h=e[a],p=n[a],d=i[a],v=h;return p+d>h&&p<h&&(v=h-d),Object(r["useMemo"])((function(){if(!c.length)return[0,0];for(var e=c.length,n=e,r=0;r<e;r+=1){var i=t.get(c[r].key)||M;if(i[s]+i[a]>u+v){n=r-1;break}}for(var o=0,l=e-1;l>=0;l-=1){var f=t.get(c[l].key)||M;if(f[s]<u){o=l+1;break}}return[o,n]}),[t,u,v,l,c.map((function(t){return t.key})).join("_"),f])}var R=n("Gytx"),j=n.n(R),I=n("Kwbf"),L=["prefixCls","invalidate","item","renderItem","responsive","responsiveDisabled","registerSize","itemKey","className","style","children","display","order","component"],N=void 0;function D(t,e){var n=t.prefixCls,i=t.invalidate,a=t.item,s=t.renderItem,u=t.responsive,f=t.responsiveDisabled,p=t.registerSize,d=t.itemKey,v=t.className,g=t.style,m=t.children,y=t.display,_=t.order,b=t.component,x=void 0===b?"div":b,E=Object(c["a"])(t,L),S=u&&!y;function O(t){p(d,t)}r["useEffect"]((function(){return function(){O(null)}}),[]);var C,T=s&&a!==N?s(a):m;i||(C={opacity:S?0:1,height:S?0:N,overflowY:S?"hidden":N,order:u?_:N,pointerEvents:S?"none":N,position:S?"absolute":N});var A={};S&&(A["aria-hidden"]=!0);var k=r["createElement"](x,Object(o["a"])({className:h()(!i&&n,v),style:Object(l["a"])(Object(l["a"])({},C),g)},A,E,{ref:e}),T);return u&&(k=r["createElement"](w["a"],{onResize:function(t){var e=t.offsetWidth;O(e)},disabled:f},k)),k}var F=r["forwardRef"](D);F.displayName="Item";var B=F;function z(){var t=Object(m["a"])({}),e=Object(s["a"])(t,2),n=e[1],i=Object(r["useRef"])([]),o=0,a=0;function u(t){var e=o;o+=1,i.current.length<e+1&&(i.current[e]=t);var r=i.current[e];function s(t){i.current[e]="function"===typeof t?t(i.current[e]):t,x["a"].cancel(a),a=Object(x["a"])((function(){n({},!0)}))}return[r,s]}return u}var U=["component"],V=["className"],H=["className"],G=function(t,e){var n=r["useContext"](X);if(!n){var i=t.component,a=void 0===i?"div":i,s=Object(c["a"])(t,U);return r["createElement"](a,Object(o["a"])({},s,{ref:e}))}var u=n.className,l=Object(c["a"])(n,V),f=t.className,p=Object(c["a"])(t,H);return r["createElement"](X.Provider,{value:null},r["createElement"](B,Object(o["a"])({ref:e,className:h()(u,f)},l,p)))},W=r["forwardRef"](G);W.displayName="RawItem";var Z=W,Y=["prefixCls","data","renderItem","renderRawItem","itemKey","itemWidth","ssr","style","className","maxCount","renderRest","renderRawRest","suffix","component","itemComponent","onVisibleChange"],X=r["createContext"](null),q="responsive",K="invalidate";function Q(t){return"+ ".concat(t.length," ...")}function $(t,e){var n=t.prefixCls,i=void 0===n?"rc-overflow":n,a=t.data,u=void 0===a?[]:a,f=t.renderItem,p=t.renderRawItem,d=t.itemKey,v=t.itemWidth,m=void 0===v?10:v,y=t.ssr,_=t.style,b=t.className,x=t.maxCount,E=t.renderRest,S=t.renderRawRest,O=t.suffix,C=t.component,T=void 0===C?"div":C,A=t.itemComponent,k=t.onVisibleChange,M=Object(c["a"])(t,Y),P=z(),R="full"===y,j=P(null),I=Object(s["a"])(j,2),L=I[0],N=I[1],D=L||0,F=P(new Map),U=Object(s["a"])(F,2),V=U[0],H=U[1],G=P(0),W=Object(s["a"])(G,2),Z=W[0],$=W[1],J=P(0),tt=Object(s["a"])(J,2),et=tt[0],nt=tt[1],rt=P(0),it=Object(s["a"])(rt,2),ot=it[0],at=it[1],st=Object(r["useState"])(null),ut=Object(s["a"])(st,2),ct=ut[0],lt=ut[1],ft=Object(r["useState"])(null),ht=Object(s["a"])(ft,2),pt=ht[0],dt=ht[1],vt=r["useMemo"]((function(){return null===pt&&R?Number.MAX_SAFE_INTEGER:pt||0}),[pt,L]),gt=Object(r["useState"])(!1),mt=Object(s["a"])(gt,2),yt=mt[0],_t=mt[1],bt="".concat(i,"-item"),xt=Math.max(Z,et),wt=x===q,Et=u.length&&wt,St=x===K,Ot=Et||"number"===typeof x&&u.length>x,Ct=Object(r["useMemo"])((function(){var t=u;return Et?t=null===L&&R?u:u.slice(0,Math.min(u.length,D/m)):"number"===typeof x&&(t=u.slice(0,x)),t}),[u,m,L,x,Et]),Tt=Object(r["useMemo"])((function(){return Et?u.slice(vt+1):u.slice(Ct.length)}),[u,Ct,Et,vt]),At=Object(r["useCallback"])((function(t,e){var n;return"function"===typeof d?d(t):null!==(n=d&&(null===t||void 0===t?void 0:t[d]))&&void 0!==n?n:e}),[d]),kt=Object(r["useCallback"])(f||function(t){return t},[f]);function Mt(t,e,n){(pt!==t||void 0!==e&&e!==ct)&&(dt(t),n||(_t(t<u.length-1),null===k||void 0===k||k(t)),void 0!==e&&lt(e))}function Pt(t,e){N(e.clientWidth)}function Rt(t,e){H((function(n){var r=new Map(n);return null===e?r["delete"](t):r.set(t,e),r}))}function jt(t,e){nt(e),$(et)}function It(t,e){at(e)}function Lt(t){return V.get(At(Ct[t],t))}Object(g["a"])((function(){if(D&&xt&&Ct){var t=ot,e=Ct.length,n=e-1;if(!e)return void Mt(0,null);for(var r=0;r<e;r+=1){var i=Lt(r);if(R&&(i=i||0),void 0===i){Mt(r-1,void 0,!0);break}if(t+=i,0===n&&t<=D||r===n-1&&t+Lt(n)<=D){Mt(n,null);break}if(t+xt>D){Mt(r-1,t-i-ot+et);break}}O&&Lt(0)+ot>D&&lt(null)}}),[D,V,et,ot,At,Ct]);var Nt=yt&&!!Tt.length,Dt={};null!==ct&&Et&&(Dt={position:"absolute",left:ct,top:0});var Ft,Bt={prefixCls:bt,responsive:Et,component:A,invalidate:St},zt=p?function(t,e){var n=At(t,e);return r["createElement"](X.Provider,{key:n,value:Object(l["a"])(Object(l["a"])({},Bt),{},{order:e,item:t,itemKey:n,registerSize:Rt,display:e<=vt})},p(t,e))}:function(t,e){var n=At(t,e);return r["createElement"](B,Object(o["a"])({},Bt,{order:e,key:n,item:t,renderItem:kt,itemKey:n,registerSize:Rt,display:e<=vt}))},Ut={order:Nt?vt:Number.MAX_SAFE_INTEGER,className:"".concat(bt,"-rest"),registerSize:jt,display:Nt};if(S)S&&(Ft=r["createElement"](X.Provider,{value:Object(l["a"])(Object(l["a"])({},Bt),Ut)},S(Tt)));else{var Vt=E||Q;Ft=r["createElement"](B,Object(o["a"])({},Bt,Ut),"function"===typeof Vt?Vt(Tt):Vt)}var Ht=r["createElement"](T,Object(o["a"])({className:h()(!St&&i,b),style:_,ref:e},M),Ct.map(zt),Ot?Ft:null,O&&r["createElement"](B,Object(o["a"])({},Bt,{responsive:wt,responsiveDisabled:!Et,order:vt,className:"".concat(bt,"-suffix"),registerSize:It,display:!0,style:Dt}),O));return wt&&(Ht=r["createElement"](w["a"],{onResize:Pt,disabled:!Et},Ht)),Ht}var J=r["forwardRef"]($);J.displayName="Overflow",J.Item=Z,J.RESPONSIVE=q,J.INVALIDATE=K;var tt=J,et=tt,nt=n("1OyB"),rt=n("vuIU"),it=n("Ji7U"),ot=n("LK+K"),at=n("bT9E"),st=n("YrtM"),ut=["children","locked"],ct=r["createContext"](null);function lt(t,e){var n=Object(l["a"])({},t);return Object.keys(e).forEach((function(t){var r=e[t];void 0!==r&&(n[t]=r)})),n}function ft(t){var e=t.children,n=t.locked,i=Object(c["a"])(t,ut),o=r["useContext"](ct),a=Object(st["a"])((function(){return lt(o,i)}),[o,i],(function(t,e){return!n&&(t[0]!==e[0]||!j()(t[1],e[1]))}));return r["createElement"](ct.Provider,{value:a},e)}function ht(t,e,n,i){var o=r["useContext"](ct),a=o.activeKey,s=o.onActive,u=o.onInactive,c={active:a===t};return e||(c.onMouseEnter=function(e){null===n||void 0===n||n({key:t,domEvent:e}),s(t)},c.onMouseLeave=function(e){null===i||void 0===i||i({key:t,domEvent:e}),u(t)}),c}var pt=["item"];function dt(t){var e=t.item,n=Object(c["a"])(t,pt);return Object.defineProperty(n,"item",{get:function(){return Object(I["a"])(!1,"`info.item` is deprecated since we will move to function component that not provides React Node instance in future."),e}}),n}function vt(t){var e,n=t.icon,i=t.props,o=t.children;return e="function"===typeof n?r["createElement"](n,Object(l["a"])({},i)):n,e||o||null}function gt(t){var e=r["useContext"](ct),n=e.mode,i=e.rtl,o=e.inlineIndent;if("inline"!==n)return null;var a=t;return i?{paddingRight:a*o}:{paddingLeft:a*o}}var mt=[],yt=r["createContext"](null);function _t(){return r["useContext"](yt)}var bt=r["createContext"](mt);function xt(t){var e=r["useContext"](bt);return r["useMemo"]((function(){return void 0!==t?[].concat(Object(b["a"])(e),[t]):e}),[e,t])}var wt=r["createContext"](null),Et=r["createContext"](null);function St(t,e){return void 0===t?null:"".concat(t,"-").concat(e)}function Ot(t){var e=r["useContext"](Et);return St(e,t)}var Ct=r["createContext"]({}),Tt=Ct,At=["title","attribute","elementRef"],kt=["style","className","eventKey","warnKey","disabled","itemIcon","children","role","onMouseEnter","onMouseLeave","onClick","onKeyDown","onFocus"],Mt=["active"],Pt=function(t){Object(it["a"])(n,t);var e=Object(ot["a"])(n);function n(){return Object(nt["a"])(this,n),e.apply(this,arguments)}return Object(rt["a"])(n,[{key:"render",value:function(){var t=this.props,e=t.title,n=t.attribute,i=t.elementRef,a=Object(c["a"])(t,At),s=Object(at["a"])(a,["eventKey"]);return Object(I["a"])(!n,"`attribute` of Menu.Item is deprecated. Please pass attribute directly."),r["createElement"](et.Item,Object(o["a"])({},n,{title:"string"===typeof e?e:void 0},s,{ref:i}))}}]),n}(r["Component"]),Rt=function(t){var e,n=t.style,i=t.className,s=t.eventKey,u=(t.warnKey,t.disabled),f=t.itemIcon,p=t.children,d=t.role,v=t.onMouseEnter,g=t.onMouseLeave,m=t.onClick,y=t.onKeyDown,_=t.onFocus,x=Object(c["a"])(t,kt),w=Ot(s),E=r["useContext"](ct),S=E.prefixCls,C=E.onItemClick,T=E.disabled,A=E.overflowDisabled,k=E.itemIcon,M=E.selectedKeys,P=E.onActive,R=r["useContext"](Tt),j=R._internalRenderMenuItem,I="".concat(S,"-item"),L=r["useRef"](),N=r["useRef"](),D=T||u,F=xt(s);var B=function(t){return{key:s,keyPath:Object(b["a"])(F).reverse(),item:L.current,domEvent:t}},z=f||k,U=ht(s,D,v,g),V=U.active,H=Object(c["a"])(U,Mt),G=M.includes(s),W=gt(F.length),Z=function(t){if(!D){var e=B(t);null===m||void 0===m||m(dt(e)),C(e)}},Y=function(t){if(null===y||void 0===y||y(t),t.which===O["a"].ENTER){var e=B(t);null===m||void 0===m||m(dt(e)),C(e)}},X=function(t){P(s),null===_||void 0===_||_(t)},q={};"option"===t.role&&(q["aria-selected"]=G);var K=r["createElement"](Pt,Object(o["a"])({ref:L,elementRef:N,role:null===d?"none":d||"menuitem",tabIndex:u?null:-1,"data-menu-id":A&&w?null:w},x,H,q,{component:"li","aria-disabled":u,style:Object(l["a"])(Object(l["a"])({},W),n),className:h()(I,(e={},Object(a["a"])(e,"".concat(I,"-active"),V),Object(a["a"])(e,"".concat(I,"-selected"),G),Object(a["a"])(e,"".concat(I,"-disabled"),D),e),i),onClick:Z,onKeyDown:Y,onFocus:X}),p,r["createElement"](vt,{props:Object(l["a"])(Object(l["a"])({},t),{},{isSelected:G}),icon:z}));return j&&(K=j(K,t,{selected:G})),K};function jt(t){var e=t.eventKey,n=_t(),i=xt(e);return r["useEffect"]((function(){if(n)return n.registerPath(e,i),function(){n.unregisterPath(e,i)}}),[i]),n?null:r["createElement"](Rt,t)}var It=jt,Lt=["label","children","key","type"];function Nt(t,e){return Object(p["a"])(t).map((function(t,n){if(r["isValidElement"](t)){var i,o,a=t.key,s=null!==(i=null===(o=t.props)||void 0===o?void 0:o.eventKey)&&void 0!==i?i:a,u=null===s||void 0===s;u&&(s="tmp_key-".concat([].concat(Object(b["a"])(e),[n]).join("-")));var c={key:s,eventKey:s};return r["cloneElement"](t,c)}return t}))}function Dt(t){return(t||[]).map((function(t,e){if(t&&"object"===Object(u["a"])(t)){var n=t.label,i=t.children,a=t.key,s=t.type,l=Object(c["a"])(t,Lt),f=null!==a&&void 0!==a?a:"tmp-".concat(e);return i||"group"===s?"group"===s?r["createElement"](Jr,Object(o["a"])({key:f},l,{title:n}),Dt(i)):r["createElement"](_r,Object(o["a"])({key:f},l,{title:n}),Dt(i)):"divider"===s?r["createElement"](ti,Object(o["a"])({key:f},l)):r["createElement"](It,Object(o["a"])({key:f},l),n)}return null})).filter((function(t){return t}))}function Ft(t,e,n){var r=t;return e&&(r=Dt(e)),Nt(r,n)}function Bt(t){var e=r["useRef"](t);e.current=t;var n=r["useCallback"]((function(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return null===(t=e.current)||void 0===t?void 0:t.call.apply(t,[e].concat(r))}),[]);return t?n:void 0}var zt=["className","children"],Ut=function(t,e){var n=t.className,i=t.children,a=Object(c["a"])(t,zt),s=r["useContext"](ct),u=s.prefixCls,l=s.mode,f=s.rtl;return r["createElement"]("ul",Object(o["a"])({className:h()(u,f&&"".concat(u,"-rtl"),"".concat(u,"-sub"),"".concat(u,"-").concat("inline"===l?"inline":"vertical"),n)},a,{"data-menu-list":!0,ref:e}),i)},Vt=r["forwardRef"](Ut);Vt.displayName="SubMenuList";var Ht=Vt,Gt=n("JX7q"),Wt=n("i8i4"),Zt=n.n(Wt);function Yt(t,e){if(!t)return!1;if(t.contains)return t.contains(e);var n=e;while(n){if(n===t)return!0;n=n.parentNode}return!1}var Xt=n("m+aA"),qt=n("c+Xe");function Kt(t,e,n,r){var i=Zt.a.unstable_batchedUpdates?function(t){Zt.a.unstable_batchedUpdates(n,t)}:n;return t.addEventListener&&t.addEventListener(e,i,r),{remove:function(){t.removeEventListener&&t.removeEventListener(e,i,r)}}}var Qt=n("MNnm"),$t=Object(r["forwardRef"])((function(t,e){var n=t.didUpdate,i=t.getContainer,o=t.children,a=Object(r["useRef"])(),s=Object(r["useRef"])();Object(r["useImperativeHandle"])(e,(function(){return{}}));var u=Object(r["useRef"])(!1);return!u.current&&Object(Qt["a"])()&&(s.current=i(),a.current=s.current.parentNode,u.current=!0),Object(r["useEffect"])((function(){null===n||void 0===n||n(t)})),Object(r["useEffect"])((function(){return null===s.current.parentNode&&null!==a.current&&a.current.appendChild(s.current),function(){var t,e;null===(t=s.current)||void 0===t||null===(e=t.parentNode)||void 0===e||e.removeChild(s.current)}}),[]),s.current?Zt.a.createPortal(o,s.current):null})),Jt=$t;function te(t,e,n){return n?t[0]===e[0]:t[0]===e[0]&&t[1]===e[1]}function ee(t,e,n){var r=t[e]||{};return Object(l["a"])(Object(l["a"])({},r),n)}function ne(t,e,n,r){for(var i=n.points,o=Object.keys(t),a=0;a<o.length;a+=1){var s=o[a];if(te(t[s].points,i,r))return"".concat(e,"-placement-").concat(s)}return""}var re=n("8XRh");function ie(t){var e=t.prefixCls,n=t.motion,r=t.animation,i=t.transitionName;return n||(r?{motionName:"".concat(e,"-").concat(r)}:i?{motionName:i}:null)}function oe(t){var e=t.prefixCls,n=t.visible,i=t.zIndex,a=t.mask,s=t.maskMotion,u=t.maskAnimation,c=t.maskTransitionName;if(!a)return null;var f={};return(s||c||u)&&(f=Object(l["a"])({motionAppear:!0},ie({motion:s,prefixCls:e,transitionName:c,animation:u}))),r["createElement"](re["a"],Object(o["a"])({},f,{visible:n,removeOnLeave:!0}),(function(t){var n=t.className;return r["createElement"]("div",{style:{zIndex:i},className:h()("".concat(e,"-mask"),n)})}))}var ae,se=function(t){if(!t)return!1;if(t instanceof HTMLElement&&t.offsetParent)return!0;if(t instanceof SVGGraphicsElement&&t.getBBox){var e=t.getBBox(),n=e.width,r=e.height;if(n||r)return!0}if(t instanceof HTMLElement&&t.getBoundingClientRect){var i=t.getBoundingClientRect(),o=i.width,a=i.height;if(o||a)return!0}return!1};function ue(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function ce(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ue(Object(n),!0).forEach((function(e){fe(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ue(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function le(t){return le="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},le(t)}function fe(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var he={Webkit:"-webkit-",Moz:"-moz-",ms:"-ms-",O:"-o-"};function pe(){if(void 0!==ae)return ae;ae="";var t=document.createElement("p").style,e="Transform";for(var n in he)n+e in t&&(ae=n);return ae}function de(){return pe()?"".concat(pe(),"TransitionProperty"):"transitionProperty"}function ve(){return pe()?"".concat(pe(),"Transform"):"transform"}function ge(t,e){var n=de();n&&(t.style[n]=e,"transitionProperty"!==n&&(t.style.transitionProperty=e))}function me(t,e){var n=ve();n&&(t.style[n]=e,"transform"!==n&&(t.style.transform=e))}function ye(t){return t.style.transitionProperty||t.style[de()]}function _e(t){var e=window.getComputedStyle(t,null),n=e.getPropertyValue("transform")||e.getPropertyValue(ve());if(n&&"none"!==n){var r=n.replace(/[^0-9\-.,]/g,"").split(",");return{x:parseFloat(r[12]||r[4],0),y:parseFloat(r[13]||r[5],0)}}return{x:0,y:0}}var be=/matrix\((.*)\)/,xe=/matrix3d\((.*)\)/;function we(t,e){var n=window.getComputedStyle(t,null),r=n.getPropertyValue("transform")||n.getPropertyValue(ve());if(r&&"none"!==r){var i,o=r.match(be);if(o)o=o[1],i=o.split(",").map((function(t){return parseFloat(t,10)})),i[4]=e.x,i[5]=e.y,me(t,"matrix(".concat(i.join(","),")"));else{var a=r.match(xe)[1];i=a.split(",").map((function(t){return parseFloat(t,10)})),i[12]=e.x,i[13]=e.y,me(t,"matrix3d(".concat(i.join(","),")"))}}else me(t,"translateX(".concat(e.x,"px) translateY(").concat(e.y,"px) translateZ(0)"))}var Ee,Se=/[\-+]?(?:\d*\.|)\d+(?:[eE][\-+]?\d+|)/.source;function Oe(t){var e=t.style.display;t.style.display="none",t.offsetHeight,t.style.display=e}function Ce(t,e,n){var r=n;if("object"!==le(e))return"undefined"!==typeof r?("number"===typeof r&&(r="".concat(r,"px")),void(t.style[e]=r)):Ee(t,e);for(var i in e)e.hasOwnProperty(i)&&Ce(t,i,e[i])}function Te(t){var e,n,r,i=t.ownerDocument,o=i.body,a=i&&i.documentElement;return e=t.getBoundingClientRect(),n=Math.floor(e.left),r=Math.floor(e.top),n-=a.clientLeft||o.clientLeft||0,r-=a.clientTop||o.clientTop||0,{left:n,top:r}}function Ae(t,e){var n=t["page".concat(e?"Y":"X","Offset")],r="scroll".concat(e?"Top":"Left");if("number"!==typeof n){var i=t.document;n=i.documentElement[r],"number"!==typeof n&&(n=i.body[r])}return n}function ke(t){return Ae(t)}function Me(t){return Ae(t,!0)}function Pe(t){var e=Te(t),n=t.ownerDocument,r=n.defaultView||n.parentWindow;return e.left+=ke(r),e.top+=Me(r),e}function Re(t){return null!==t&&void 0!==t&&t==t.window}function je(t){return Re(t)?t.document:9===t.nodeType?t:t.ownerDocument}function Ie(t,e,n){var r=n,i="",o=je(t);return r=r||o.defaultView.getComputedStyle(t,null),r&&(i=r.getPropertyValue(e)||r[e]),i}var Le=new RegExp("^(".concat(Se,")(?!px)[a-z%]+$"),"i"),Ne=/^(top|right|bottom|left)$/,De="currentStyle",Fe="runtimeStyle",Be="left",ze="px";function Ue(t,e){var n=t[De]&&t[De][e];if(Le.test(n)&&!Ne.test(e)){var r=t.style,i=r[Be],o=t[Fe][Be];t[Fe][Be]=t[De][Be],r[Be]="fontSize"===e?"1em":n||0,n=r.pixelLeft+ze,r[Be]=i,t[Fe][Be]=o}return""===n?"auto":n}function Ve(t,e){return"left"===t?e.useCssRight?"right":t:e.useCssBottom?"bottom":t}function He(t){return"left"===t?"right":"right"===t?"left":"top"===t?"bottom":"bottom"===t?"top":void 0}function Ge(t,e,n){"static"===Ce(t,"position")&&(t.style.position="relative");var r=-999,i=-999,o=Ve("left",n),a=Ve("top",n),s=He(o),u=He(a);"left"!==o&&(r=999),"top"!==a&&(i=999);var c="",l=Pe(t);("left"in e||"top"in e)&&(c=ye(t)||"",ge(t,"none")),"left"in e&&(t.style[s]="",t.style[o]="".concat(r,"px")),"top"in e&&(t.style[u]="",t.style[a]="".concat(i,"px")),Oe(t);var f=Pe(t),h={};for(var p in e)if(e.hasOwnProperty(p)){var d=Ve(p,n),v="left"===p?r:i,g=l[p]-f[p];h[d]=d===p?v+g:v-g}Ce(t,h),Oe(t),("left"in e||"top"in e)&&ge(t,c);var m={};for(var y in e)if(e.hasOwnProperty(y)){var _=Ve(y,n),b=e[y]-l[y];m[_]=y===_?h[_]+b:h[_]-b}Ce(t,m)}function We(t,e){var n=Pe(t),r=_e(t),i={x:r.x,y:r.y};"left"in e&&(i.x=r.x+e.left-n.left),"top"in e&&(i.y=r.y+e.top-n.top),we(t,i)}function Ze(t,e,n){if(n.ignoreShake){var r=Pe(t),i=r.left.toFixed(0),o=r.top.toFixed(0),a=e.left.toFixed(0),s=e.top.toFixed(0);if(i===a&&o===s)return}n.useCssRight||n.useCssBottom?Ge(t,e,n):n.useCssTransform&&ve()in document.body.style?We(t,e):Ge(t,e,n)}function Ye(t,e){for(var n=0;n<t.length;n++)e(t[n])}function Xe(t){return"border-box"===Ee(t,"boxSizing")}"undefined"!==typeof window&&(Ee=window.getComputedStyle?Ie:Ue);var qe=["margin","border","padding"],Ke=-1,Qe=2,$e=1,Je=0;function tn(t,e,n){var r,i={},o=t.style;for(r in e)e.hasOwnProperty(r)&&(i[r]=o[r],o[r]=e[r]);for(r in n.call(t),e)e.hasOwnProperty(r)&&(o[r]=i[r])}function en(t,e,n){var r,i,o,a=0;for(i=0;i<e.length;i++)if(r=e[i],r)for(o=0;o<n.length;o++){var s=void 0;s="border"===r?"".concat(r).concat(n[o],"Width"):r+n[o],a+=parseFloat(Ee(t,s))||0}return a}var nn={getParent:function(t){var e=t;do{e=11===e.nodeType&&e.host?e.host:e.parentNode}while(e&&1!==e.nodeType&&9!==e.nodeType);return e}};function rn(t,e,n){var r=n;if(Re(t))return"width"===e?nn.viewportWidth(t):nn.viewportHeight(t);if(9===t.nodeType)return"width"===e?nn.docWidth(t):nn.docHeight(t);var i="width"===e?["Left","Right"]:["Top","Bottom"],o="width"===e?Math.floor(t.getBoundingClientRect().width):Math.floor(t.getBoundingClientRect().height),a=Xe(t),s=0;(null===o||void 0===o||o<=0)&&(o=void 0,s=Ee(t,e),(null===s||void 0===s||Number(s)<0)&&(s=t.style[e]||0),s=Math.floor(parseFloat(s))||0),void 0===r&&(r=a?$e:Ke);var u=void 0!==o||a,c=o||s;return r===Ke?u?c-en(t,["border","padding"],i):s:u?r===$e?c:c+(r===Qe?-en(t,["border"],i):en(t,["margin"],i)):s+en(t,qe.slice(r),i)}Ye(["Width","Height"],(function(t){nn["doc".concat(t)]=function(e){var n=e.document;return Math.max(n.documentElement["scroll".concat(t)],n.body["scroll".concat(t)],nn["viewport".concat(t)](n))},nn["viewport".concat(t)]=function(e){var n="client".concat(t),r=e.document,i=r.body,o=r.documentElement,a=o[n];return"CSS1Compat"===r.compatMode&&a||i&&i[n]||a}}));var on={position:"absolute",visibility:"hidden",display:"block"};function an(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r,i=e[0];return 0!==i.offsetWidth?r=rn.apply(void 0,e):tn(i,on,(function(){r=rn.apply(void 0,e)})),r}function sn(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}Ye(["width","height"],(function(t){var e=t.charAt(0).toUpperCase()+t.slice(1);nn["outer".concat(e)]=function(e,n){return e&&an(e,t,n?Je:$e)};var n="width"===t?["Left","Right"]:["Top","Bottom"];nn[t]=function(e,r){var i=r;if(void 0===i)return e&&an(e,t,Ke);if(e){var o=Xe(e);return o&&(i+=en(e,["padding","border"],n)),Ce(e,t,i)}}}));var un={getWindow:function(t){if(t&&t.document&&t.setTimeout)return t;var e=t.ownerDocument||t;return e.defaultView||e.parentWindow},getDocument:je,offset:function(t,e,n){if("undefined"===typeof e)return Pe(t);Ze(t,e,n||{})},isWindow:Re,each:Ye,css:Ce,clone:function(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);var r=t.overflow;if(r)for(e in t)t.hasOwnProperty(e)&&(n.overflow[e]=t.overflow[e]);return n},mix:sn,getWindowScrollLeft:function(t){return ke(t)},getWindowScrollTop:function(t){return Me(t)},merge:function(){for(var t={},e=0;e<arguments.length;e++)un.mix(t,e<0||arguments.length<=e?void 0:arguments[e]);return t},viewportWidth:0,viewportHeight:0};sn(un,nn);var cn=un.getParent;function ln(t){if(un.isWindow(t)||9===t.nodeType)return null;var e,n=un.getDocument(t),r=n.body,i=un.css(t,"position"),o="fixed"===i||"absolute"===i;if(!o)return"html"===t.nodeName.toLowerCase()?null:cn(t);for(e=cn(t);e&&e!==r&&9!==e.nodeType;e=cn(e))if(i=un.css(e,"position"),"static"!==i)return e;return null}var fn=un.getParent;function hn(t){if(un.isWindow(t)||9===t.nodeType)return!1;var e=un.getDocument(t),n=e.body,r=null;for(r=fn(t);r&&r!==n&&r!==e;r=fn(r)){var i=un.css(r,"position");if("fixed"===i)return!0}return!1}function pn(t,e){var n={left:0,right:1/0,top:0,bottom:1/0},r=ln(t),i=un.getDocument(t),o=i.defaultView||i.parentWindow,a=i.body,s=i.documentElement;while(r){if(-1!==navigator.userAgent.indexOf("MSIE")&&0===r.clientWidth||r===a||r===s||"visible"===un.css(r,"overflow")){if(r===a||r===s)break}else{var u=un.offset(r);u.left+=r.clientLeft,u.top+=r.clientTop,n.top=Math.max(n.top,u.top),n.right=Math.min(n.right,u.left+r.clientWidth),n.bottom=Math.min(n.bottom,u.top+r.clientHeight),n.left=Math.max(n.left,u.left)}r=ln(r)}var c=null;if(!un.isWindow(t)&&9!==t.nodeType){c=t.style.position;var l=un.css(t,"position");"absolute"===l&&(t.style.position="fixed")}var f=un.getWindowScrollLeft(o),h=un.getWindowScrollTop(o),p=un.viewportWidth(o),d=un.viewportHeight(o),v=s.scrollWidth,g=s.scrollHeight,m=window.getComputedStyle(a);if("hidden"===m.overflowX&&(v=o.innerWidth),"hidden"===m.overflowY&&(g=o.innerHeight),t.style&&(t.style.position=c),e||hn(t))n.left=Math.max(n.left,f),n.top=Math.max(n.top,h),n.right=Math.min(n.right,f+p),n.bottom=Math.min(n.bottom,h+d);else{var y=Math.max(v,f+p);n.right=Math.min(n.right,y);var _=Math.max(g,h+d);n.bottom=Math.min(n.bottom,_)}return n.top>=0&&n.left>=0&&n.bottom>n.top&&n.right>n.left?n:null}function dn(t,e,n,r){var i=un.clone(t),o={width:e.width,height:e.height};return r.adjustX&&i.left<n.left&&(i.left=n.left),r.resizeWidth&&i.left>=n.left&&i.left+o.width>n.right&&(o.width-=i.left+o.width-n.right),r.adjustX&&i.left+o.width>n.right&&(i.left=Math.max(n.right-o.width,n.left)),r.adjustY&&i.top<n.top&&(i.top=n.top),r.resizeHeight&&i.top>=n.top&&i.top+o.height>n.bottom&&(o.height-=i.top+o.height-n.bottom),r.adjustY&&i.top+o.height>n.bottom&&(i.top=Math.max(n.bottom-o.height,n.top)),un.mix(i,o)}function vn(t){var e,n,r;if(un.isWindow(t)||9===t.nodeType){var i=un.getWindow(t);e={left:un.getWindowScrollLeft(i),top:un.getWindowScrollTop(i)},n=un.viewportWidth(i),r=un.viewportHeight(i)}else e=un.offset(t),n=un.outerWidth(t),r=un.outerHeight(t);return e.width=n,e.height=r,e}function gn(t,e){var n=e.charAt(0),r=e.charAt(1),i=t.width,o=t.height,a=t.left,s=t.top;return"c"===n?s+=o/2:"b"===n&&(s+=o),"c"===r?a+=i/2:"r"===r&&(a+=i),{left:a,top:s}}function mn(t,e,n,r,i){var o=gn(e,n[1]),a=gn(t,n[0]),s=[a.left-o.left,a.top-o.top];return{left:Math.round(t.left-s[0]+r[0]-i[0]),top:Math.round(t.top-s[1]+r[1]-i[1])}}function yn(t,e,n){return t.left<n.left||t.left+e.width>n.right}function _n(t,e,n){return t.top<n.top||t.top+e.height>n.bottom}function bn(t,e,n){return t.left>n.right||t.left+e.width<n.left}function xn(t,e,n){return t.top>n.bottom||t.top+e.height<n.top}function wn(t,e,n){var r=[];return un.each(t,(function(t){r.push(t.replace(e,(function(t){return n[t]})))})),r}function En(t,e){return t[e]=-t[e],t}function Sn(t,e){var n;return n=/%$/.test(t)?parseInt(t.substring(0,t.length-1),10)/100*e:parseInt(t,10),n||0}function On(t,e){t[0]=Sn(t[0],e.width),t[1]=Sn(t[1],e.height)}function Cn(t,e,n,r){var i=n.points,o=n.offset||[0,0],a=n.targetOffset||[0,0],s=n.overflow,u=n.source||t;o=[].concat(o),a=[].concat(a),s=s||{};var c={},l=0,f=!(!s||!s.alwaysByViewport),h=pn(u,f),p=vn(u);On(o,p),On(a,e);var d=mn(p,e,i,o,a),v=un.merge(p,d);if(h&&(s.adjustX||s.adjustY)&&r){if(s.adjustX&&yn(d,p,h)){var g=wn(i,/[lr]/gi,{l:"r",r:"l"}),m=En(o,0),y=En(a,0),_=mn(p,e,g,m,y);bn(_,p,h)||(l=1,i=g,o=m,a=y)}if(s.adjustY&&_n(d,p,h)){var b=wn(i,/[tb]/gi,{t:"b",b:"t"}),x=En(o,1),w=En(a,1),E=mn(p,e,b,x,w);xn(E,p,h)||(l=1,i=b,o=x,a=w)}l&&(d=mn(p,e,i,o,a),un.mix(v,d));var S=yn(d,p,h),O=_n(d,p,h);if(S||O){var C=i;S&&(C=wn(i,/[lr]/gi,{l:"r",r:"l"})),O&&(C=wn(i,/[tb]/gi,{t:"b",b:"t"})),i=C,o=n.offset||[0,0],a=n.targetOffset||[0,0]}c.adjustX=s.adjustX&&S,c.adjustY=s.adjustY&&O,(c.adjustX||c.adjustY)&&(v=dn(d,p,h,c))}return v.width!==p.width&&un.css(u,"width",un.width(u)+v.width-p.width),v.height!==p.height&&un.css(u,"height",un.height(u)+v.height-p.height),un.offset(u,{left:v.left,top:v.top},{useCssRight:n.useCssRight,useCssBottom:n.useCssBottom,useCssTransform:n.useCssTransform,ignoreShake:n.ignoreShake}),{points:i,offset:o,targetOffset:a,overflow:c}}function Tn(t,e){var n=pn(t,e),r=vn(t);return!n||r.left+r.width<=n.left||r.top+r.height<=n.top||r.left>=n.right||r.top>=n.bottom}function An(t,e,n){var r=n.target||e,i=vn(r),o=!Tn(r,n.overflow&&n.overflow.alwaysByViewport);return Cn(t,i,n,o)}function kn(t,e,n){var r,i,o=un.getDocument(t),a=o.defaultView||o.parentWindow,s=un.getWindowScrollLeft(a),u=un.getWindowScrollTop(a),c=un.viewportWidth(a),l=un.viewportHeight(a);r="pageX"in e?e.pageX:s+e.clientX,i="pageY"in e?e.pageY:u+e.clientY;var f={left:r,top:i,width:0,height:0},h=r>=0&&r<=s+c&&i>=0&&i<=u+l,p=[n.points[0],"cc"];return Cn(t,f,ce(ce({},n),{},{points:p}),h)}An.__getOffsetParent=ln,An.__getVisibleRectForElement=pn;var Mn=n("Y+p1"),Pn=n.n(Mn),Rn=n("bdgK");function jn(t,e){return t===e||!(!t||!e)&&("pageX"in e&&"pageY"in e?t.pageX===e.pageX&&t.pageY===e.pageY:"clientX"in e&&"clientY"in e&&(t.clientX===e.clientX&&t.clientY===e.clientY))}function In(t,e){t!==document.activeElement&&Yt(e,t)&&"function"===typeof t.focus&&t.focus()}function Ln(t,e){var n=null,r=null;function i(t){var i=Object(s["a"])(t,1),o=i[0].target;if(document.documentElement.contains(o)){var a=o.getBoundingClientRect(),u=a.width,c=a.height,l=Math.floor(u),f=Math.floor(c);n===l&&r===f||Promise.resolve().then((function(){e({width:l,height:f})})),n=l,r=f}}var o=new Rn["a"](i);return t&&o.observe(t),function(){o.disconnect()}}var Nn=function(t,e){var n=i.a.useRef(!1),r=i.a.useRef(null);function o(){window.clearTimeout(r.current)}function a(i){if(o(),n.current&&!0!==i)r.current=window.setTimeout((function(){n.current=!1,a()}),e);else{if(!1===t())return;n.current=!0,r.current=window.setTimeout((function(){n.current=!1}),e)}}return[a,function(){n.current=!1,o()}]};function Dn(t){return"function"!==typeof t?null:t()}function Fn(t){return"object"===Object(u["a"])(t)&&t?t:null}var Bn=function(t,e){var n=t.children,r=t.disabled,o=t.target,a=t.align,u=t.onAlign,c=t.monitorWindowResize,l=t.monitorBufferTime,f=void 0===l?0:l,h=i.a.useRef({}),p=i.a.useRef(),d=i.a.Children.only(n),v=i.a.useRef({});v.current.disabled=r,v.current.target=o,v.current.align=a,v.current.onAlign=u;var g=Nn((function(){var t=v.current,e=t.disabled,n=t.target,r=t.align,i=t.onAlign;if(!e&&n){var o,a=p.current,s=Dn(n),u=Fn(n);h.current.element=s,h.current.point=u,h.current.align=r;var c=document,l=c.activeElement;return s&&se(s)?o=An(a,s,r):u&&(o=kn(a,u,r)),In(l,a),i&&o&&i(a,o),!0}return!1}),f),m=Object(s["a"])(g,2),y=m[0],_=m[1],b=i.a.useRef({cancel:function(){}}),x=i.a.useRef({cancel:function(){}});i.a.useEffect((function(){var t=Dn(o),e=Fn(o);p.current!==x.current.element&&(x.current.cancel(),x.current.element=p.current,x.current.cancel=Ln(p.current,y)),h.current.element===t&&jn(h.current.point,e)&&Pn()(h.current.align,a)||(y(),b.current.element!==t&&(b.current.cancel(),b.current.element=t,b.current.cancel=Ln(t,y)))})),i.a.useEffect((function(){r?_():y()}),[r]);var w=i.a.useRef(null);return i.a.useEffect((function(){c?w.current||(w.current=Kt(window,"resize",y)):w.current&&(w.current.remove(),w.current=null)}),[c]),i.a.useEffect((function(){return function(){b.current.cancel(),x.current.cancel(),w.current&&w.current.remove(),_()}}),[]),i.a.useImperativeHandle(e,(function(){return{forceAlign:function(){return y(!0)}}})),i.a.isValidElement(d)&&(d=i.a.cloneElement(d,{ref:Object(qt["a"])(d.ref,p)})),d},zn=i.a.forwardRef(Bn);zn.displayName="Align";var Un=zn,Vn=Un;function Hn(){Hn=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,r=Object.defineProperty||function(t,e,n){t[e]=n.value},i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function c(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(k){c=function(t,e,n){return t[e]=n}}function l(t,e,n,i){var o=e&&e.prototype instanceof p?e:p,a=Object.create(o.prototype),s=new C(i||[]);return r(a,"_invoke",{value:w(t,n,s)}),a}function f(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(k){return{type:"throw",arg:k}}}t.wrap=l;var h={};function p(){}function d(){}function v(){}var g={};c(g,o,(function(){return this}));var m=Object.getPrototypeOf,y=m&&m(m(T([])));y&&y!==e&&n.call(y,o)&&(g=y);var _=v.prototype=p.prototype=Object.create(g);function b(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function x(t,e){function i(r,o,a,s){var c=f(t[r],t,o);if("throw"!==c.type){var l=c.arg,h=l.value;return h&&"object"==Object(u["a"])(h)&&n.call(h,"__await")?e.resolve(h.__await).then((function(t){i("next",t,a,s)}),(function(t){i("throw",t,a,s)})):e.resolve(h).then((function(t){l.value=t,a(l)}),(function(t){return i("throw",t,a,s)}))}s(c.arg)}var o;r(this,"_invoke",{value:function(t,n){function r(){return new e((function(e,r){i(t,n,e,r)}))}return o=o?o.then(r,r):r()}})}function w(t,e,n){var r="suspendedStart";return function(i,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw o;return A()}for(n.method=i,n.arg=o;;){var a=n.delegate;if(a){var s=E(a,n);if(s){if(s===h)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=f(t,e,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===h)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}function E(t,e){var n=e.method,r=t.iterator[n];if(void 0===r)return e.delegate=null,"throw"===n&&t.iterator["return"]&&(e.method="return",e.arg=void 0,E(t,e),"throw"===e.method)||"return"!==n&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var i=f(r,t.iterator,e.arg);if("throw"===i.type)return e.method="throw",e.arg=i.arg,e.delegate=null,h;var o=i.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,h):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,h)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function C(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function T(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,i=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:A}}function A(){return{value:void 0,done:!0}}return d.prototype=v,r(_,"constructor",{value:v,configurable:!0}),r(v,"constructor",{value:d,configurable:!0}),d.displayName=c(v,s,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,c(t,s,"GeneratorFunction")),t.prototype=Object.create(_),t},t.awrap=function(t){return{__await:t}},b(x.prototype),c(x.prototype,a,(function(){return this})),t.AsyncIterator=x,t.async=function(e,n,r,i,o){void 0===o&&(o=Promise);var a=new x(l(e,n,r,i),o);return t.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},b(_),c(_,s,"Generator"),c(_,o,(function(){return this})),c(_,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},t.values=T,C.prototype={constructor:C,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return a.type="throw",a.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],a=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var s=n.call(o,"catchLoc"),u=n.call(o,"finallyLoc");if(s&&u){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,h):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),O(n),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;O(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:T(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),h}},t}var Gn=n("HaE+"),Wn=["measure","alignPre","align",null,"motion"],Zn=function(t,e){var n=Object(m["a"])(null),i=Object(s["a"])(n,2),o=i[0],a=i[1],u=Object(r["useRef"])();function c(t){a(t,!0)}function l(){x["a"].cancel(u.current)}function f(t){l(),u.current=Object(x["a"])((function(){c((function(t){switch(o){case"align":return"motion";case"motion":return"stable";default:}return t})),null===t||void 0===t||t()}))}return Object(r["useEffect"])((function(){c("measure")}),[t]),Object(r["useEffect"])((function(){switch(o){case"measure":e();break;default:}o&&(u.current=Object(x["a"])(Object(Gn["a"])(Hn().mark((function t(){var e,n;return Hn().wrap((function(t){while(1)switch(t.prev=t.next){case 0:e=Wn.indexOf(o),n=Wn[e+1],n&&-1!==e&&c(n);case 3:case"end":return t.stop()}}),t)})))))}),[o]),Object(r["useEffect"])((function(){return function(){l()}}),[]),[o,f]},Yn=function(t){var e=r["useState"]({width:0,height:0}),n=Object(s["a"])(e,2),i=n[0],o=n[1];function a(t){var e=t.offsetWidth,n=t.offsetHeight,r=t.getBoundingClientRect(),i=r.width,a=r.height;Math.abs(e-i)<1&&Math.abs(n-a)<1&&(e=i,n=a),o({width:e,height:n})}var u=r["useMemo"]((function(){var e={};if(t){var n=i.width,r=i.height;-1!==t.indexOf("height")&&r?e.height=r:-1!==t.indexOf("minHeight")&&r&&(e.minHeight=r),-1!==t.indexOf("width")&&n?e.width=n:-1!==t.indexOf("minWidth")&&n&&(e.minWidth=n)}return e}),[t,i]);return[u,a]},Xn=r["forwardRef"]((function(t,e){var n=t.visible,i=t.prefixCls,a=t.className,u=t.style,c=t.children,f=t.zIndex,p=t.stretch,d=t.destroyPopupOnHide,v=t.forceRender,m=t.align,y=t.point,_=t.getRootDomNode,b=t.getClassNameFromAlign,x=t.onAlign,w=t.onMouseEnter,E=t.onMouseLeave,S=t.onMouseDown,O=t.onTouchStart,C=t.onClick,T=Object(r["useRef"])(),A=Object(r["useRef"])(),k=Object(r["useState"])(),M=Object(s["a"])(k,2),P=M[0],R=M[1],j=Yn(p),I=Object(s["a"])(j,2),L=I[0],N=I[1];function D(){p&&N(_())}var F=Zn(n,D),B=Object(s["a"])(F,2),z=B[0],U=B[1],V=Object(r["useState"])(0),H=Object(s["a"])(V,2),G=H[0],W=H[1],Z=Object(r["useRef"])();function Y(){return y||_}function X(){var t;null===(t=T.current)||void 0===t||t.forceAlign()}function q(t,e){var n=b(e);P!==n&&R(n),W((function(t){return t+1})),"align"===z&&(null===x||void 0===x||x(t,e))}Object(g["a"])((function(){"alignPre"===z&&W(0)}),[z]),Object(g["a"])((function(){"align"===z&&(G<3?X():U((function(){var t;null===(t=Z.current)||void 0===t||t.call(Z)})))}),[G]);var K=Object(l["a"])({},ie(t));function Q(){return new Promise((function(t){Z.current=t}))}["onAppearEnd","onEnterEnd","onLeaveEnd"].forEach((function(t){var e=K[t];K[t]=function(t,n){return U(),null===e||void 0===e?void 0:e(t,n)}})),r["useEffect"]((function(){K.motionName||"motion"!==z||U()}),[K.motionName,z]),r["useImperativeHandle"](e,(function(){return{forceAlign:X,getElement:function(){return A.current}}}));var $=Object(l["a"])(Object(l["a"])({},L),{},{zIndex:f,opacity:"motion"!==z&&"stable"!==z&&n?0:void 0,pointerEvents:n||"stable"===z?void 0:"none"},u),J=!0;null===m||void 0===m||!m.points||"align"!==z&&"stable"!==z||(J=!1);var tt=c;return r["Children"].count(c)>1&&(tt=r["createElement"]("div",{className:"".concat(i,"-content")},c)),r["createElement"](re["a"],Object(o["a"])({visible:n,ref:A,leavedClassName:"".concat(i,"-hidden")},K,{onAppearPrepare:Q,onEnterPrepare:Q,removeOnLeave:d,forceRender:v}),(function(t,e){var n=t.className,o=t.style,s=h()(i,a,P,n);return r["createElement"](Vn,{target:Y(),key:"popup",ref:T,monitorWindowResize:!0,disabled:J,align:m,onAlign:q},r["createElement"]("div",{ref:e,className:s,onMouseEnter:w,onMouseLeave:E,onMouseDownCapture:S,onTouchStartCapture:O,onClick:C,style:Object(l["a"])(Object(l["a"])({},o),$)},tt))}))}));Xn.displayName="PopupInner";var qn=Xn,Kn=r["forwardRef"]((function(t,e){var n=t.prefixCls,i=t.visible,a=t.zIndex,s=t.children,u=t.mobile;u=void 0===u?{}:u;var c=u.popupClassName,f=u.popupStyle,p=u.popupMotion,d=void 0===p?{}:p,v=u.popupRender,g=t.onClick,m=r["useRef"]();r["useImperativeHandle"](e,(function(){return{forceAlign:function(){},getElement:function(){return m.current}}}));var y=Object(l["a"])({zIndex:a},f),_=s;return r["Children"].count(s)>1&&(_=r["createElement"]("div",{className:"".concat(n,"-content")},s)),v&&(_=v(_)),r["createElement"](re["a"],Object(o["a"])({visible:i,ref:m,removeOnLeave:!0},d),(function(t,e){var i=t.className,o=t.style,a=h()(n,c,i);return r["createElement"]("div",{ref:e,className:a,onClick:g,style:Object(l["a"])(Object(l["a"])({},o),y)},_)}))}));Kn.displayName="MobilePopupInner";var Qn=Kn,$n=["visible","mobile"],Jn=r["forwardRef"]((function(t,e){var n=t.visible,i=t.mobile,a=Object(c["a"])(t,$n),u=Object(r["useState"])(n),f=Object(s["a"])(u,2),h=f[0],p=f[1],v=Object(r["useState"])(!1),g=Object(s["a"])(v,2),m=g[0],y=g[1],_=Object(l["a"])(Object(l["a"])({},a),{},{visible:h});Object(r["useEffect"])((function(){p(n),n&&i&&y(d())}),[n,i]);var b=m?r["createElement"](Qn,Object(o["a"])({},_,{mobile:i,ref:e})):r["createElement"](qn,Object(o["a"])({},_,{ref:e}));return r["createElement"]("div",null,r["createElement"](oe,_),b)}));Jn.displayName="Popup";var tr=Jn,er=r["createContext"](null),nr=er;function rr(){}function ir(){return""}function or(t){return t?t.ownerDocument:window.document}var ar=["onClick","onMouseDown","onTouchStart","onMouseEnter","onMouseLeave","onFocus","onBlur","onContextMenu"];function sr(t){var e=function(e){Object(it["a"])(i,e);var n=Object(ot["a"])(i);function i(t){var e,s;return Object(nt["a"])(this,i),e=n.call(this,t),Object(a["a"])(Object(Gt["a"])(e),"popupRef",r["createRef"]()),Object(a["a"])(Object(Gt["a"])(e),"triggerRef",r["createRef"]()),Object(a["a"])(Object(Gt["a"])(e),"portalContainer",void 0),Object(a["a"])(Object(Gt["a"])(e),"attachId",void 0),Object(a["a"])(Object(Gt["a"])(e),"clickOutsideHandler",void 0),Object(a["a"])(Object(Gt["a"])(e),"touchOutsideHandler",void 0),Object(a["a"])(Object(Gt["a"])(e),"contextMenuOutsideHandler1",void 0),Object(a["a"])(Object(Gt["a"])(e),"contextMenuOutsideHandler2",void 0),Object(a["a"])(Object(Gt["a"])(e),"mouseDownTimeout",void 0),Object(a["a"])(Object(Gt["a"])(e),"focusTime",void 0),Object(a["a"])(Object(Gt["a"])(e),"preClickTime",void 0),Object(a["a"])(Object(Gt["a"])(e),"preTouchTime",void 0),Object(a["a"])(Object(Gt["a"])(e),"delayTimer",void 0),Object(a["a"])(Object(Gt["a"])(e),"hasPopupMouseDown",void 0),Object(a["a"])(Object(Gt["a"])(e),"onMouseEnter",(function(t){var n=e.props.mouseEnterDelay;e.fireEvents("onMouseEnter",t),e.delaySetPopupVisible(!0,n,n?null:t)})),Object(a["a"])(Object(Gt["a"])(e),"onMouseMove",(function(t){e.fireEvents("onMouseMove",t),e.setPoint(t)})),Object(a["a"])(Object(Gt["a"])(e),"onMouseLeave",(function(t){e.fireEvents("onMouseLeave",t),e.delaySetPopupVisible(!1,e.props.mouseLeaveDelay)})),Object(a["a"])(Object(Gt["a"])(e),"onPopupMouseEnter",(function(){e.clearDelayTimer()})),Object(a["a"])(Object(Gt["a"])(e),"onPopupMouseLeave",(function(t){var n;t.relatedTarget&&!t.relatedTarget.setTimeout&&Yt(null===(n=e.popupRef.current)||void 0===n?void 0:n.getElement(),t.relatedTarget)||e.delaySetPopupVisible(!1,e.props.mouseLeaveDelay)})),Object(a["a"])(Object(Gt["a"])(e),"onFocus",(function(t){e.fireEvents("onFocus",t),e.clearDelayTimer(),e.isFocusToShow()&&(e.focusTime=Date.now(),e.delaySetPopupVisible(!0,e.props.focusDelay))})),Object(a["a"])(Object(Gt["a"])(e),"onMouseDown",(function(t){e.fireEvents("onMouseDown",t),e.preClickTime=Date.now()})),Object(a["a"])(Object(Gt["a"])(e),"onTouchStart",(function(t){e.fireEvents("onTouchStart",t),e.preTouchTime=Date.now()})),Object(a["a"])(Object(Gt["a"])(e),"onBlur",(function(t){e.fireEvents("onBlur",t),e.clearDelayTimer(),e.isBlurToHide()&&e.delaySetPopupVisible(!1,e.props.blurDelay)})),Object(a["a"])(Object(Gt["a"])(e),"onContextMenu",(function(t){t.preventDefault(),e.fireEvents("onContextMenu",t),e.setPopupVisible(!0,t)})),Object(a["a"])(Object(Gt["a"])(e),"onContextMenuClose",(function(){e.isContextMenuToShow()&&e.close()})),Object(a["a"])(Object(Gt["a"])(e),"onClick",(function(t){if(e.fireEvents("onClick",t),e.focusTime){var n;if(e.preClickTime&&e.preTouchTime?n=Math.min(e.preClickTime,e.preTouchTime):e.preClickTime?n=e.preClickTime:e.preTouchTime&&(n=e.preTouchTime),Math.abs(n-e.focusTime)<20)return;e.focusTime=0}e.preClickTime=0,e.preTouchTime=0,e.isClickToShow()&&(e.isClickToHide()||e.isBlurToHide())&&t&&t.preventDefault&&t.preventDefault();var r=!e.state.popupVisible;(e.isClickToHide()&&!r||r&&e.isClickToShow())&&e.setPopupVisible(!e.state.popupVisible,t)})),Object(a["a"])(Object(Gt["a"])(e),"onPopupMouseDown",(function(){var t;(e.hasPopupMouseDown=!0,clearTimeout(e.mouseDownTimeout),e.mouseDownTimeout=window.setTimeout((function(){e.hasPopupMouseDown=!1}),0),e.context)&&(t=e.context).onPopupMouseDown.apply(t,arguments)})),Object(a["a"])(Object(Gt["a"])(e),"onDocumentClick",(function(t){if(!e.props.mask||e.props.maskClosable){var n=t.target,r=e.getRootDomNode(),i=e.getPopupDomNode();Yt(r,n)&&!e.isContextMenuOnly()||Yt(i,n)||e.hasPopupMouseDown||e.close()}})),Object(a["a"])(Object(Gt["a"])(e),"getRootDomNode",(function(){var t=e.props.getTriggerDOMNode;if(t)return t(e.triggerRef.current);try{var n=Object(Xt["a"])(e.triggerRef.current);if(n)return n}catch(r){}return Zt.a.findDOMNode(Object(Gt["a"])(e))})),Object(a["a"])(Object(Gt["a"])(e),"getPopupClassNameFromAlign",(function(t){var n=[],r=e.props,i=r.popupPlacement,o=r.builtinPlacements,a=r.prefixCls,s=r.alignPoint,u=r.getPopupClassNameFromAlign;return i&&o&&n.push(ne(o,a,t,s)),u&&n.push(u(t)),n.join(" ")})),Object(a["a"])(Object(Gt["a"])(e),"getComponent",(function(){var t=e.props,n=t.prefixCls,i=t.destroyPopupOnHide,a=t.popupClassName,s=t.onPopupAlign,u=t.popupMotion,c=t.popupAnimation,l=t.popupTransitionName,f=t.popupStyle,h=t.mask,p=t.maskAnimation,d=t.maskTransitionName,v=t.maskMotion,g=t.zIndex,m=t.popup,y=t.stretch,_=t.alignPoint,b=t.mobile,x=t.forceRender,w=t.onPopupClick,E=e.state,S=E.popupVisible,O=E.point,C=e.getPopupAlign(),T={};return e.isMouseEnterToShow()&&(T.onMouseEnter=e.onPopupMouseEnter),e.isMouseLeaveToHide()&&(T.onMouseLeave=e.onPopupMouseLeave),T.onMouseDown=e.onPopupMouseDown,T.onTouchStart=e.onPopupMouseDown,r["createElement"](tr,Object(o["a"])({prefixCls:n,destroyPopupOnHide:i,visible:S,point:_&&O,className:a,align:C,onAlign:s,animation:c,getClassNameFromAlign:e.getPopupClassNameFromAlign},T,{stretch:y,getRootDomNode:e.getRootDomNode,style:f,mask:h,zIndex:g,transitionName:l,maskAnimation:p,maskTransitionName:d,maskMotion:v,ref:e.popupRef,motion:u,mobile:b,forceRender:x,onClick:w}),"function"===typeof m?m():m)})),Object(a["a"])(Object(Gt["a"])(e),"attachParent",(function(t){x["a"].cancel(e.attachId);var n,r=e.props,i=r.getPopupContainer,o=r.getDocument,a=e.getRootDomNode();i?(a||0===i.length)&&(n=i(a)):n=o(e.getRootDomNode()).body,n?n.appendChild(t):e.attachId=Object(x["a"])((function(){e.attachParent(t)}))})),Object(a["a"])(Object(Gt["a"])(e),"getContainer",(function(){if(!e.portalContainer){var t=e.props.getDocument,n=t(e.getRootDomNode()).createElement("div");n.style.position="absolute",n.style.top="0",n.style.left="0",n.style.width="100%",e.portalContainer=n}return e.attachParent(e.portalContainer),e.portalContainer})),Object(a["a"])(Object(Gt["a"])(e),"setPoint",(function(t){var n=e.props.alignPoint;n&&t&&e.setState({point:{pageX:t.pageX,pageY:t.pageY}})})),Object(a["a"])(Object(Gt["a"])(e),"handlePortalUpdate",(function(){e.state.prevPopupVisible!==e.state.popupVisible&&e.props.afterPopupVisibleChange(e.state.popupVisible)})),Object(a["a"])(Object(Gt["a"])(e),"triggerContextValue",{onPopupMouseDown:e.onPopupMouseDown}),s="popupVisible"in t?!!t.popupVisible:!!t.defaultPopupVisible,e.state={prevPopupVisible:s,popupVisible:s},ar.forEach((function(t){e["fire".concat(t)]=function(n){e.fireEvents(t,n)}})),e}return Object(rt["a"])(i,[{key:"componentDidMount",value:function(){this.componentDidUpdate()}},{key:"componentDidUpdate",value:function(){var t,e=this.props,n=this.state;if(n.popupVisible)return this.clickOutsideHandler||!this.isClickToHide()&&!this.isContextMenuToShow()||(t=e.getDocument(this.getRootDomNode()),this.clickOutsideHandler=Kt(t,"mousedown",this.onDocumentClick)),this.touchOutsideHandler||(t=t||e.getDocument(this.getRootDomNode()),this.touchOutsideHandler=Kt(t,"touchstart",this.onDocumentClick)),!this.contextMenuOutsideHandler1&&this.isContextMenuToShow()&&(t=t||e.getDocument(this.getRootDomNode()),this.contextMenuOutsideHandler1=Kt(t,"scroll",this.onContextMenuClose)),void(!this.contextMenuOutsideHandler2&&this.isContextMenuToShow()&&(this.contextMenuOutsideHandler2=Kt(window,"blur",this.onContextMenuClose)));this.clearOutsideHandler()}},{key:"componentWillUnmount",value:function(){this.clearDelayTimer(),this.clearOutsideHandler(),clearTimeout(this.mouseDownTimeout),x["a"].cancel(this.attachId)}},{key:"getPopupDomNode",value:function(){var t;return(null===(t=this.popupRef.current)||void 0===t?void 0:t.getElement())||null}},{key:"getPopupAlign",value:function(){var t=this.props,e=t.popupPlacement,n=t.popupAlign,r=t.builtinPlacements;return e&&r?ee(r,e,n):n}},{key:"setPopupVisible",value:function(t,e){var n=this.props.alignPoint,r=this.state.popupVisible;this.clearDelayTimer(),r!==t&&("popupVisible"in this.props||this.setState({popupVisible:t,prevPopupVisible:r}),this.props.onPopupVisibleChange(t)),n&&e&&t&&this.setPoint(e)}},{key:"delaySetPopupVisible",value:function(t,e,n){var r=this,i=1e3*e;if(this.clearDelayTimer(),i){var o=n?{pageX:n.pageX,pageY:n.pageY}:null;this.delayTimer=window.setTimeout((function(){r.setPopupVisible(t,o),r.clearDelayTimer()}),i)}else this.setPopupVisible(t,n)}},{key:"clearDelayTimer",value:function(){this.delayTimer&&(clearTimeout(this.delayTimer),this.delayTimer=null)}},{key:"clearOutsideHandler",value:function(){this.clickOutsideHandler&&(this.clickOutsideHandler.remove(),this.clickOutsideHandler=null),this.contextMenuOutsideHandler1&&(this.contextMenuOutsideHandler1.remove(),this.contextMenuOutsideHandler1=null),this.contextMenuOutsideHandler2&&(this.contextMenuOutsideHandler2.remove(),this.contextMenuOutsideHandler2=null),this.touchOutsideHandler&&(this.touchOutsideHandler.remove(),this.touchOutsideHandler=null)}},{key:"createTwoChains",value:function(t){var e=this.props.children.props,n=this.props;return e[t]&&n[t]?this["fire".concat(t)]:e[t]||n[t]}},{key:"isClickToShow",value:function(){var t=this.props,e=t.action,n=t.showAction;return-1!==e.indexOf("click")||-1!==n.indexOf("click")}},{key:"isContextMenuOnly",value:function(){var t=this.props.action;return"contextMenu"===t||1===t.length&&"contextMenu"===t[0]}},{key:"isContextMenuToShow",value:function(){var t=this.props,e=t.action,n=t.showAction;return-1!==e.indexOf("contextMenu")||-1!==n.indexOf("contextMenu")}},{key:"isClickToHide",value:function(){var t=this.props,e=t.action,n=t.hideAction;return-1!==e.indexOf("click")||-1!==n.indexOf("click")}},{key:"isMouseEnterToShow",value:function(){var t=this.props,e=t.action,n=t.showAction;return-1!==e.indexOf("hover")||-1!==n.indexOf("mouseEnter")}},{key:"isMouseLeaveToHide",value:function(){var t=this.props,e=t.action,n=t.hideAction;return-1!==e.indexOf("hover")||-1!==n.indexOf("mouseLeave")}},{key:"isFocusToShow",value:function(){var t=this.props,e=t.action,n=t.showAction;return-1!==e.indexOf("focus")||-1!==n.indexOf("focus")}},{key:"isBlurToHide",value:function(){var t=this.props,e=t.action,n=t.hideAction;return-1!==e.indexOf("focus")||-1!==n.indexOf("blur")}},{key:"forcePopupAlign",value:function(){var t;this.state.popupVisible&&(null===(t=this.popupRef.current)||void 0===t||t.forceAlign())}},{key:"fireEvents",value:function(t,e){var n=this.props.children.props[t];n&&n(e);var r=this.props[t];r&&r(e)}},{key:"close",value:function(){this.setPopupVisible(!1)}},{key:"render",value:function(){var e=this.state.popupVisible,n=this.props,i=n.children,o=n.forceRender,a=n.alignPoint,s=n.className,u=n.autoDestroy,c=r["Children"].only(i),f={key:"trigger"};this.isContextMenuToShow()?f.onContextMenu=this.onContextMenu:f.onContextMenu=this.createTwoChains("onContextMenu"),this.isClickToHide()||this.isClickToShow()?(f.onClick=this.onClick,f.onMouseDown=this.onMouseDown,f.onTouchStart=this.onTouchStart):(f.onClick=this.createTwoChains("onClick"),f.onMouseDown=this.createTwoChains("onMouseDown"),f.onTouchStart=this.createTwoChains("onTouchStart")),this.isMouseEnterToShow()?(f.onMouseEnter=this.onMouseEnter,a&&(f.onMouseMove=this.onMouseMove)):f.onMouseEnter=this.createTwoChains("onMouseEnter"),this.isMouseLeaveToHide()?f.onMouseLeave=this.onMouseLeave:f.onMouseLeave=this.createTwoChains("onMouseLeave"),this.isFocusToShow()||this.isBlurToHide()?(f.onFocus=this.onFocus,f.onBlur=this.onBlur):(f.onFocus=this.createTwoChains("onFocus"),f.onBlur=this.createTwoChains("onBlur"));var p=h()(c&&c.props&&c.props.className,s);p&&(f.className=p);var d=Object(l["a"])({},f);Object(qt["c"])(c)&&(d.ref=Object(qt["a"])(this.triggerRef,c.ref));var v,g=r["cloneElement"](c,d);return(e||this.popupRef.current||o)&&(v=r["createElement"](t,{key:"portal",getContainer:this.getContainer,didUpdate:this.handlePortalUpdate},this.getComponent())),!e&&u&&(v=null),r["createElement"](nr.Provider,{value:this.triggerContextValue},g,v)}}],[{key:"getDerivedStateFromProps",value:function(t,e){var n=t.popupVisible,r={};return void 0!==n&&e.popupVisible!==n&&(r.popupVisible=n,r.prevPopupVisible=e.popupVisible),r}}]),i}(r["Component"]);return Object(a["a"])(e,"contextType",nr),Object(a["a"])(e,"defaultProps",{prefixCls:"rc-trigger-popup",getPopupClassNameFromAlign:ir,getDocument:or,onPopupVisibleChange:rr,afterPopupVisibleChange:rr,onPopupAlign:rr,popupClassName:"",mouseEnterDelay:0,mouseLeaveDelay:.1,focusDelay:0,blurDelay:.15,popupStyle:{},destroyPopupOnHide:!1,popupAlign:{},defaultPopupVisible:!1,mask:!1,maskClosable:!0,action:[],showAction:[],hideAction:[],autoDestroy:!1}),e}var ur=sr(Jt),cr={adjustX:1,adjustY:1},lr={topLeft:{points:["bl","tl"],overflow:cr,offset:[0,-7]},bottomLeft:{points:["tl","bl"],overflow:cr,offset:[0,7]},leftTop:{points:["tr","tl"],overflow:cr,offset:[-4,0]},rightTop:{points:["tl","tr"],overflow:cr,offset:[4,0]}},fr={topLeft:{points:["bl","tl"],overflow:cr,offset:[0,-7]},bottomLeft:{points:["tl","bl"],overflow:cr,offset:[0,7]},rightTop:{points:["tr","tl"],overflow:cr,offset:[-4,0]},leftTop:{points:["tl","tr"],overflow:cr,offset:[4,0]}};function hr(t,e,n){return e||(n?n[t]||n.other:void 0)}var pr={horizontal:"bottomLeft",vertical:"rightTop","vertical-left":"rightTop","vertical-right":"leftTop"};function dr(t){var e=t.prefixCls,n=t.visible,i=t.children,o=t.popup,u=t.popupClassName,c=t.popupOffset,f=t.disabled,p=t.mode,d=t.onVisibleChange,v=r["useContext"](ct),g=v.getPopupContainer,m=v.rtl,y=v.subMenuOpenDelay,_=v.subMenuCloseDelay,b=v.builtinPlacements,w=v.triggerSubMenuAction,E=v.forceSubMenuRender,S=v.rootClassName,O=v.motion,C=v.defaultMotions,T=r["useState"](!1),A=Object(s["a"])(T,2),k=A[0],M=A[1],P=m?Object(l["a"])(Object(l["a"])({},fr),b):Object(l["a"])(Object(l["a"])({},lr),b),R=pr[p],j=hr(p,O,C),I=Object(l["a"])(Object(l["a"])({},j),{},{leavedClassName:"".concat(e,"-hidden"),removeOnLeave:!1,motionAppear:!0}),L=r["useRef"]();return r["useEffect"]((function(){return L.current=Object(x["a"])((function(){M(n)})),function(){x["a"].cancel(L.current)}}),[n]),r["createElement"](ur,{prefixCls:e,popupClassName:h()("".concat(e,"-popup"),Object(a["a"])({},"".concat(e,"-rtl"),m),u,S),stretch:"horizontal"===p?"minWidth":null,getPopupContainer:g,builtinPlacements:P,popupPlacement:R,popupVisible:k,popup:o,popupAlign:c&&{offset:c},action:f?[]:[w],mouseEnterDelay:y,mouseLeaveDelay:_,onPopupVisibleChange:d,forceRender:E,popupMotion:I},i)}function vr(t){var e=t.id,n=t.open,i=t.keyPath,a=t.children,u="inline",c=r["useContext"](ct),f=c.prefixCls,h=c.forceSubMenuRender,p=c.motion,d=c.defaultMotions,v=c.mode,g=r["useRef"](!1);g.current=v===u;var m=r["useState"](!g.current),y=Object(s["a"])(m,2),_=y[0],b=y[1],x=!!g.current&&n;r["useEffect"]((function(){g.current&&b(!1)}),[v]);var w=Object(l["a"])({},hr(u,p,d));i.length>1&&(w.motionAppear=!1);var E=w.onVisibleChanged;return w.onVisibleChanged=function(t){return g.current||t||b(!0),null===E||void 0===E?void 0:E(t)},_?null:r["createElement"](ft,{mode:u,locked:!g.current},r["createElement"](re["a"],Object(o["a"])({visible:x},w,{forceRender:h,removeOnLeave:!1,leavedClassName:"".concat(f,"-hidden")}),(function(t){var n=t.className,i=t.style;return r["createElement"](Ht,{id:e,className:n,style:i},a)})))}var gr=["style","className","title","eventKey","warnKey","disabled","internalPopupClose","children","itemIcon","expandIcon","popupClassName","popupOffset","onClick","onMouseEnter","onMouseLeave","onTitleClick","onTitleMouseEnter","onTitleMouseLeave"],mr=["active"],yr=function(t){var e,n=t.style,i=t.className,u=t.title,f=t.eventKey,p=(t.warnKey,t.disabled),d=t.internalPopupClose,v=t.children,g=t.itemIcon,m=t.expandIcon,y=t.popupClassName,_=t.popupOffset,b=t.onClick,x=t.onMouseEnter,w=t.onMouseLeave,E=t.onTitleClick,S=t.onTitleMouseEnter,O=t.onTitleMouseLeave,C=Object(c["a"])(t,gr),T=Ot(f),A=r["useContext"](ct),k=A.prefixCls,M=A.mode,P=A.openKeys,R=A.disabled,j=A.overflowDisabled,I=A.activeKey,L=A.selectedKeys,N=A.itemIcon,D=A.expandIcon,F=A.onItemClick,B=A.onOpenChange,z=A.onActive,U=r["useContext"](Tt),V=U._internalRenderSubMenuItem,H=r["useContext"](wt),G=H.isSubPathKey,W=xt(),Z="".concat(k,"-submenu"),Y=R||p,X=r["useRef"](),q=r["useRef"]();var K=g||N,Q=m||D,$=P.includes(f),J=!j&&$,tt=G(L,f),nt=ht(f,Y,S,O),rt=nt.active,it=Object(c["a"])(nt,mr),ot=r["useState"](!1),at=Object(s["a"])(ot,2),st=at[0],ut=at[1],lt=function(t){Y||ut(t)},pt=function(t){lt(!0),null===x||void 0===x||x({key:f,domEvent:t})},mt=function(t){lt(!1),null===w||void 0===w||w({key:f,domEvent:t})},yt=r["useMemo"]((function(){return rt||"inline"!==M&&(st||G([I],f))}),[M,rt,I,st,f,G]),_t=gt(W.length),bt=function(t){Y||(null===E||void 0===E||E({key:f,domEvent:t}),"inline"===M&&B(f,!$))},Et=Bt((function(t){null===b||void 0===b||b(dt(t)),F(t)})),St=function(t){"inline"!==M&&B(f,t)},Ct=function(){z(f)},At=T&&"".concat(T,"-popup"),kt=r["createElement"]("div",Object(o["a"])({role:"menuitem",style:_t,className:"".concat(Z,"-title"),tabIndex:Y?null:-1,ref:X,title:"string"===typeof u?u:null,"data-menu-id":j&&T?null:T,"aria-expanded":J,"aria-haspopup":!0,"aria-controls":At,"aria-disabled":Y,onClick:bt,onFocus:Ct},it),u,r["createElement"](vt,{icon:"horizontal"!==M?Q:null,props:Object(l["a"])(Object(l["a"])({},t),{},{isOpen:J,isSubMenu:!0})},r["createElement"]("i",{className:"".concat(Z,"-arrow")}))),Mt=r["useRef"](M);if("inline"!==M&&(Mt.current=W.length>1?"vertical":M),!j){var Pt=Mt.current;kt=r["createElement"](dr,{mode:Pt,prefixCls:Z,visible:!d&&J&&"inline"!==M,popupClassName:y,popupOffset:_,popup:r["createElement"](ft,{mode:"horizontal"===Pt?"vertical":Pt},r["createElement"](Ht,{id:At,ref:q},v)),disabled:Y,onVisibleChange:St},kt)}var Rt=r["createElement"](et.Item,Object(o["a"])({role:"none"},C,{component:"li",style:n,className:h()(Z,"".concat(Z,"-").concat(M),i,(e={},Object(a["a"])(e,"".concat(Z,"-open"),J),Object(a["a"])(e,"".concat(Z,"-active"),yt),Object(a["a"])(e,"".concat(Z,"-selected"),tt),Object(a["a"])(e,"".concat(Z,"-disabled"),Y),e)),onMouseEnter:pt,onMouseLeave:mt}),kt,!j&&r["createElement"](vr,{id:At,open:J,keyPath:W},v));return V&&(Rt=V(Rt,t,{selected:tt,active:yt,open:J,disabled:Y})),r["createElement"](ft,{onItemClick:Et,mode:"horizontal"===M?"vertical":M,itemIcon:K,expandIcon:Q},Rt)};function _r(t){var e,n=t.eventKey,i=t.children,o=xt(n),a=Nt(i,o),s=_t();return r["useEffect"]((function(){if(s)return s.registerPath(n,o),function(){s.unregisterPath(n,o)}}),[o]),e=s?a:r["createElement"](yr,t,a),r["createElement"](bt.Provider,{value:o},e)}function br(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(se(t)){var n=t.nodeName.toLowerCase(),r=["input","select","textarea","button"].includes(n)||t.isContentEditable||"a"===n&&!!t.getAttribute("href"),i=t.getAttribute("tabindex"),o=Number(i),a=null;return i&&!Number.isNaN(o)?a=o:r&&null===a&&(a=0),r&&t.disabled&&(a=null),null!==a&&(a>=0||e&&a<0)}return!1}function xr(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=Object(b["a"])(t.querySelectorAll("*")).filter((function(t){return br(t,e)}));return br(t,e)&&n.unshift(t),n}var wr=O["a"].LEFT,Er=O["a"].RIGHT,Sr=O["a"].UP,Or=O["a"].DOWN,Cr=O["a"].ENTER,Tr=O["a"].ESC,Ar=O["a"].HOME,kr=O["a"].END,Mr=[Sr,Or,wr,Er];function Pr(t,e,n,r){var i,o,s,u,c="prev",l="next",f="children",h="parent";if("inline"===t&&r===Cr)return{inlineTrigger:!0};var p=(i={},Object(a["a"])(i,Sr,c),Object(a["a"])(i,Or,l),i),d=(o={},Object(a["a"])(o,wr,n?l:c),Object(a["a"])(o,Er,n?c:l),Object(a["a"])(o,Or,f),Object(a["a"])(o,Cr,f),o),v=(s={},Object(a["a"])(s,Sr,c),Object(a["a"])(s,Or,l),Object(a["a"])(s,Cr,f),Object(a["a"])(s,Tr,h),Object(a["a"])(s,wr,n?f:h),Object(a["a"])(s,Er,n?h:f),s),g={inline:p,horizontal:d,vertical:v,inlineSub:p,horizontalSub:v,verticalSub:v},m=null===(u=g["".concat(t).concat(e?"":"Sub")])||void 0===u?void 0:u[r];switch(m){case c:return{offset:-1,sibling:!0};case l:return{offset:1,sibling:!0};case h:return{offset:-1,sibling:!1};case f:return{offset:1,sibling:!1};default:return null}}function Rr(t){var e=t;while(e){if(e.getAttribute("data-menu-list"))return e;e=e.parentElement}return null}function jr(t,e){var n=t||document.activeElement;while(n){if(e.has(n))return n;n=n.parentElement}return null}function Ir(t,e){var n=xr(t,!0);return n.filter((function(t){return e.has(t)}))}function Lr(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;if(!t)return null;var i=Ir(t,e),o=i.length,a=i.findIndex((function(t){return n===t}));return r<0?-1===a?a=o-1:a-=1:r>0&&(a+=1),a=(a+o)%o,i[a]}function Nr(t,e,n,i,o,a,s,u,c,l){var f=r["useRef"](),h=r["useRef"]();h.current=e;var p=function(){x["a"].cancel(f.current)};return r["useEffect"]((function(){return function(){p()}}),[]),function(r){var d=r.which;if([].concat(Mr,[Cr,Tr,Ar,kr]).includes(d)){var v,g,m,y=function(){v=new Set,g=new Map,m=new Map;var t=a();return t.forEach((function(t){var e=document.querySelector("[data-menu-id='".concat(St(i,t),"']"));e&&(v.add(e),m.set(e,t),g.set(t,e))})),v};y();var _=g.get(e),b=jr(_,v),w=m.get(b),E=Pr(t,1===s(w,!0).length,n,d);if(!E&&d!==Ar&&d!==kr)return;(Mr.includes(d)||[Ar,kr].includes(d))&&r.preventDefault();var S=function(t){if(t){var e=t,n=t.querySelector("a");(null===n||void 0===n?void 0:n.getAttribute("href"))&&(e=n);var r=m.get(t);u(r),p(),f.current=Object(x["a"])((function(){h.current===r&&e.focus()}))}};if([Ar,kr].includes(d)||E.sibling||!b){var O,C;O=b&&"inline"!==t?Rr(b):o.current;var T=Ir(O,v);C=d===Ar?T[0]:d===kr?T[T.length-1]:Lr(O,v,b,E.offset),S(C)}else if(E.inlineTrigger)c(w);else if(E.offset>0)c(w,!0),p(),f.current=Object(x["a"])((function(){y();var t=b.getAttribute("aria-controls"),e=document.getElementById(t),n=Lr(e,v);S(n)}),5);else if(E.offset<0){var A=s(w,!0),k=A[A.length-2],M=g.get(k);c(k,!1),S(M)}}null===l||void 0===l||l(r)}}var Dr=Math.random().toFixed(5).toString().slice(2),Fr=0;function Br(t){var e=_(t,{value:t}),n=Object(s["a"])(e,2),i=n[0],o=n[1];return r["useEffect"]((function(){Fr+=1;var t="".concat(Dr,"-").concat(Fr);o("rc-menu-uuid-".concat(t))}),[]),i}function zr(t){Promise.resolve().then(t)}var Ur="__RC_UTIL_PATH_SPLIT__",Vr=function(t){return t.join(Ur)},Hr=function(t){return t.split(Ur)},Gr="rc-menu-more";function Wr(){var t=r["useState"]({}),e=Object(s["a"])(t,2),n=e[1],i=Object(r["useRef"])(new Map),o=Object(r["useRef"])(new Map),a=r["useState"]([]),u=Object(s["a"])(a,2),c=u[0],l=u[1],f=Object(r["useRef"])(0),h=Object(r["useRef"])(!1),p=function(){h.current||n({})},d=Object(r["useCallback"])((function(t,e){var n=Vr(e);o.current.set(n,t),i.current.set(t,n),f.current+=1;var r=f.current;zr((function(){r===f.current&&p()}))}),[]),v=Object(r["useCallback"])((function(t,e){var n=Vr(e);o.current["delete"](n),i.current["delete"](t)}),[]),g=Object(r["useCallback"])((function(t){l(t)}),[]),m=Object(r["useCallback"])((function(t,e){var n=i.current.get(t)||"",r=Hr(n);return e&&c.includes(r[0])&&r.unshift(Gr),r}),[c]),y=Object(r["useCallback"])((function(t,e){return t.some((function(t){var n=m(t,!0);return n.includes(e)}))}),[m]),_=function(){var t=Object(b["a"])(i.current.keys());return c.length&&t.push(Gr),t},x=Object(r["useCallback"])((function(t){var e="".concat(i.current.get(t)).concat(Ur),n=new Set;return Object(b["a"])(o.current.keys()).forEach((function(t){t.startsWith(e)&&n.add(o.current.get(t))})),n}),[]);return r["useEffect"]((function(){return function(){h.current=!0}}),[]),{registerPath:d,unregisterPath:v,refreshOverflowKeys:g,isSubPathKey:y,getKeyPath:m,getKeys:_,getSubPathKeys:x}}var Zr=["prefixCls","rootClassName","style","className","tabIndex","items","children","direction","id","mode","inlineCollapsed","disabled","disabledOverflow","subMenuOpenDelay","subMenuCloseDelay","forceSubMenuRender","defaultOpenKeys","openKeys","activeKey","defaultActiveFirst","selectable","multiple","defaultSelectedKeys","selectedKeys","onSelect","onDeselect","inlineIndent","motion","defaultMotions","triggerSubMenuAction","builtinPlacements","itemIcon","expandIcon","overflowedIndicator","overflowedIndicatorPopupClassName","getPopupContainer","onClick","onOpenChange","onKeyDown","openAnimation","openTransitionName","_internalRenderMenuItem","_internalRenderSubMenuItem"],Yr=[],Xr=r["forwardRef"]((function(t,e){var n,i,u=t.prefixCls,f=void 0===u?"rc-menu":u,p=t.rootClassName,d=t.style,v=t.className,g=t.tabIndex,m=void 0===g?0:g,y=t.items,x=t.children,w=t.direction,E=t.id,S=t.mode,O=void 0===S?"vertical":S,C=t.inlineCollapsed,T=t.disabled,A=t.disabledOverflow,k=t.subMenuOpenDelay,M=void 0===k?.1:k,P=t.subMenuCloseDelay,R=void 0===P?.1:P,I=t.forceSubMenuRender,L=t.defaultOpenKeys,N=t.openKeys,D=t.activeKey,F=t.defaultActiveFirst,B=t.selectable,z=void 0===B||B,U=t.multiple,V=void 0!==U&&U,H=t.defaultSelectedKeys,G=t.selectedKeys,W=t.onSelect,Z=t.onDeselect,Y=t.inlineIndent,X=void 0===Y?24:Y,q=t.motion,K=t.defaultMotions,Q=t.triggerSubMenuAction,$=void 0===Q?"hover":Q,J=t.builtinPlacements,tt=t.itemIcon,nt=t.expandIcon,rt=t.overflowedIndicator,it=void 0===rt?"...":rt,ot=t.overflowedIndicatorPopupClassName,at=t.getPopupContainer,st=t.onClick,ut=t.onOpenChange,ct=t.onKeyDown,lt=(t.openAnimation,t.openTransitionName,t._internalRenderMenuItem),ht=t._internalRenderSubMenuItem,pt=Object(c["a"])(t,Zr),vt=r["useMemo"]((function(){return Ft(x,y,Yr)}),[x,y]),gt=r["useState"](!1),mt=Object(s["a"])(gt,2),_t=mt[0],bt=mt[1],xt=r["useRef"](),Ot=Br(E),Ct="rtl"===w;var At=r["useMemo"]((function(){return"inline"!==O&&"vertical"!==O||!C?[O,!1]:["vertical",C]}),[O,C]),kt=Object(s["a"])(At,2),Mt=kt[0],Pt=kt[1],Rt=r["useState"](0),jt=Object(s["a"])(Rt,2),Lt=jt[0],Nt=jt[1],Dt=Lt>=vt.length-1||"horizontal"!==Mt||A,zt=_(L,{value:N,postState:function(t){return t||Yr}}),Ut=Object(s["a"])(zt,2),Vt=Ut[0],Ht=Ut[1],Gt=function(t){Ht(t),null===ut||void 0===ut||ut(t)},Wt=r["useState"](Vt),Zt=Object(s["a"])(Wt,2),Yt=Zt[0],Xt=Zt[1],qt="inline"===Mt,Kt=r["useRef"](!1);r["useEffect"]((function(){qt&&Xt(Vt)}),[Vt]),r["useEffect"]((function(){Kt.current&&(qt?Ht(Yt):Gt(Yr))}),[qt]),r["useEffect"]((function(){return Kt.current=!0,function(){Kt.current=!1}}),[]);var Qt=Wr(),$t=Qt.registerPath,Jt=Qt.unregisterPath,te=Qt.refreshOverflowKeys,ee=Qt.isSubPathKey,ne=Qt.getKeyPath,re=Qt.getKeys,ie=Qt.getSubPathKeys,oe=r["useMemo"]((function(){return{registerPath:$t,unregisterPath:Jt}}),[$t,Jt]),ae=r["useMemo"]((function(){return{isSubPathKey:ee}}),[ee]);r["useEffect"]((function(){te(Dt?Yr:vt.slice(Lt+1).map((function(t){return t.key})))}),[Lt,Dt]);var se=_(D||F&&(null===(n=vt[0])||void 0===n?void 0:n.key),{value:D}),ue=Object(s["a"])(se,2),ce=ue[0],le=ue[1],fe=Bt((function(t){le(t)})),he=Bt((function(){le(void 0)}));Object(r["useImperativeHandle"])(e,(function(){return{list:xt.current,focus:function(t){var e,n,r,i,o=null!==ce&&void 0!==ce?ce:null===(e=vt.find((function(t){return!t.props.disabled})))||void 0===e?void 0:e.key;o&&(null===(n=xt.current)||void 0===n||null===(r=n.querySelector("li[data-menu-id='".concat(St(Ot,o),"']")))||void 0===r||null===(i=r.focus)||void 0===i||i.call(r,t))}}}));var pe=_(H||[],{value:G,postState:function(t){return Array.isArray(t)?t:null===t||void 0===t?Yr:[t]}}),de=Object(s["a"])(pe,2),ve=de[0],ge=de[1],me=function(t){if(z){var e,n=t.key,r=ve.includes(n);e=V?r?ve.filter((function(t){return t!==n})):[].concat(Object(b["a"])(ve),[n]):[n],ge(e);var i=Object(l["a"])(Object(l["a"])({},t),{},{selectedKeys:e});r?null===Z||void 0===Z||Z(i):null===W||void 0===W||W(i)}!V&&Vt.length&&"inline"!==Mt&&Gt(Yr)},ye=Bt((function(t){null===st||void 0===st||st(dt(t)),me(t)})),_e=Bt((function(t,e){var n=Vt.filter((function(e){return e!==t}));if(e)n.push(t);else if("inline"!==Mt){var r=ie(t);n=n.filter((function(t){return!r.has(t)}))}j()(Vt,n)||Gt(n)})),be=Bt(at),xe=function(t,e){var n=null!==e&&void 0!==e?e:!Vt.includes(t);_e(t,n)},we=Nr(Mt,ce,Ct,Ot,xt,re,ne,le,xe,ct);r["useEffect"]((function(){bt(!0)}),[]);var Ee=r["useMemo"]((function(){return{_internalRenderMenuItem:lt,_internalRenderSubMenuItem:ht}}),[lt,ht]),Se="horizontal"!==Mt||A?vt:vt.map((function(t,e){return r["createElement"](ft,{key:t.key,overflowDisabled:e>Lt},t)})),Oe=r["createElement"](et,Object(o["a"])({id:E,ref:xt,prefixCls:"".concat(f,"-overflow"),component:"ul",itemComponent:It,className:h()(f,"".concat(f,"-root"),"".concat(f,"-").concat(Mt),v,(i={},Object(a["a"])(i,"".concat(f,"-inline-collapsed"),Pt),Object(a["a"])(i,"".concat(f,"-rtl"),Ct),i),p),dir:w,style:d,role:"menu",tabIndex:m,data:Se,renderRawItem:function(t){return t},renderRawRest:function(t){var e=t.length,n=e?vt.slice(-e):null;return r["createElement"](_r,{eventKey:Gr,title:it,disabled:Dt,internalPopupClose:0===e,popupClassName:ot},n)},maxCount:"horizontal"!==Mt||A?et.INVALIDATE:et.RESPONSIVE,ssr:"full","data-menu-list":!0,onVisibleChange:function(t){Nt(t)},onKeyDown:we},pt));return r["createElement"](Tt.Provider,{value:Ee},r["createElement"](Et.Provider,{value:Ot},r["createElement"](ft,{prefixCls:f,rootClassName:p,mode:Mt,openKeys:Vt,rtl:Ct,disabled:T,motion:_t?q:null,defaultMotions:_t?K:null,activeKey:ce,onActive:fe,onInactive:he,selectedKeys:ve,inlineIndent:X,subMenuOpenDelay:M,subMenuCloseDelay:R,forceSubMenuRender:I,builtinPlacements:J,triggerSubMenuAction:$,getPopupContainer:be,itemIcon:tt,expandIcon:nt,onItemClick:ye,onOpenChange:_e},r["createElement"](wt.Provider,{value:ae},Oe),r["createElement"]("div",{style:{display:"none"},"aria-hidden":!0},r["createElement"](yt.Provider,{value:oe},vt)))))})),qr=Xr,Kr=["className","title","eventKey","children"],Qr=["children"],$r=function(t){var e=t.className,n=t.title,i=(t.eventKey,t.children),a=Object(c["a"])(t,Kr),s=r["useContext"](ct),u=s.prefixCls,l="".concat(u,"-item-group");return r["createElement"]("li",Object(o["a"])({},a,{onClick:function(t){return t.stopPropagation()},className:h()(l,e)}),r["createElement"]("div",{className:"".concat(l,"-title"),title:"string"===typeof n?n:void 0},n),r["createElement"]("ul",{className:"".concat(l,"-list")},i))};function Jr(t){var e=t.children,n=Object(c["a"])(t,Qr),i=xt(n.eventKey),o=Nt(e,i),a=_t();return a?o:r["createElement"]($r,Object(at["a"])(n,["warnKey"]),o)}function ti(t){var e=t.className,n=t.style,i=r["useContext"](ct),o=i.prefixCls,a=_t();return a?null:r["createElement"]("li",{className:h()("".concat(o,"-item-divider"),e),style:n})}var ei=qr;ei.Item=It,ei.SubMenu=_r,ei.ItemGroup=Jr,ei.Divider=ti;var ni=ei,ri={adjustX:1,adjustY:1},ii=[0,0],oi={topLeft:{points:["bl","tl"],overflow:ri,offset:[0,-4],targetOffset:ii},topCenter:{points:["bc","tc"],overflow:ri,offset:[0,-4],targetOffset:ii},topRight:{points:["br","tr"],overflow:ri,offset:[0,-4],targetOffset:ii},bottomLeft:{points:["tl","bl"],overflow:ri,offset:[0,4],targetOffset:ii},bottomCenter:{points:["tc","bc"],overflow:ri,offset:[0,4],targetOffset:ii},bottomRight:{points:["tr","br"],overflow:ri,offset:[0,4],targetOffset:ii}},ai=oi,si=O["a"].ESC,ui=O["a"].TAB;function ci(t){var e=t.visible,n=t.setTriggerVisible,i=t.triggerRef,o=t.onVisibleChange,a=t.autoFocus,s=r["useRef"](!1),u=function(){var t,r,a,s;e&&i.current&&(null===(t=i.current)||void 0===t||null===(r=t.triggerRef)||void 0===r||null===(a=r.current)||void 0===a||null===(s=a.focus)||void 0===s||s.call(a),n(!1),"function"===typeof o&&o(!1))},c=function(){var t,e,n,r,o=xr(null===(t=i.current)||void 0===t||null===(e=t.popupRef)||void 0===e||null===(n=e.current)||void 0===n||null===(r=n.getElement)||void 0===r?void 0:r.call(n)),a=o[0];return!!(null===a||void 0===a?void 0:a.focus)&&(a.focus(),s.current=!0,!0)},l=function(t){switch(t.keyCode){case si:u();break;case ui:var e=!1;s.current||(e=c()),e?t.preventDefault():u();break}};r["useEffect"]((function(){return e?(window.addEventListener("keydown",l),a&&Object(x["a"])(c,3),function(){window.removeEventListener("keydown",l),s.current=!1}):function(){s.current=!1}}),[e])}var li=["arrow","prefixCls","transitionName","animation","align","placement","placements","getPopupContainer","showAction","hideAction","overlayClassName","overlayStyle","visible","trigger","autoFocus"];function fi(t,e){var n=t.arrow,i=void 0!==n&&n,o=t.prefixCls,u=void 0===o?"rc-dropdown":o,f=t.transitionName,p=t.animation,d=t.align,v=t.placement,g=void 0===v?"bottomLeft":v,m=t.placements,y=void 0===m?ai:m,_=t.getPopupContainer,b=t.showAction,x=t.hideAction,w=t.overlayClassName,E=t.overlayStyle,S=t.visible,O=t.trigger,C=void 0===O?["hover"]:O,T=t.autoFocus,A=Object(c["a"])(t,li),k=r["useState"](),M=Object(s["a"])(k,2),P=M[0],R=M[1],j="visible"in t?S:P,I=r["useRef"](null);r["useImperativeHandle"](e,(function(){return I.current})),ci({visible:j,setTriggerVisible:R,triggerRef:I,onVisibleChange:t.onVisibleChange,autoFocus:T});var L=function(){var e,n=t.overlay;return e="function"===typeof n?n():n,e},N=function(e){var n=t.onOverlayClick;R(!1),n&&n(e)},D=function(e){var n=t.onVisibleChange;R(e),"function"===typeof n&&n(e)},F=function(){var t=L();return r["createElement"](r["Fragment"],null,i&&r["createElement"]("div",{className:"".concat(u,"-arrow")}),t)},B=function(){var e=t.overlay;return"function"===typeof e?F:F()},z=function(){var e=t.minOverlayWidthMatchTrigger,n=t.alignPoint;return"minOverlayWidthMatchTrigger"in t?e:!n},U=function(){var e=t.openClassName;return void 0!==e?e:"".concat(u,"-open")},V=function(){var e=t.children,n=e.props?e.props:{},i=h()(n.className,U());return j&&e?r["cloneElement"](e,{className:i}):e},H=x;return H||-1===C.indexOf("contextMenu")||(H=["click"]),r["createElement"](ur,Object(l["a"])(Object(l["a"])({builtinPlacements:y},A),{},{prefixCls:u,ref:I,popupClassName:h()(w,Object(a["a"])({},"".concat(u,"-show-arrow"),i)),popupStyle:E,action:C,showAction:b,hideAction:H||[],popupPlacement:g,popupAlign:d,popupTransitionName:f,popupAnimation:p,popupVisible:j,stretch:z()?"minWidth":"",popup:B(),onPopupVisibleChange:D,onPopupClick:N,getPopupContainer:_}),V())}var hi=r["forwardRef"](fi),pi=hi;function di(t,e){var n=t.prefixCls,i=t.editable,o=t.locale,a=t.style;return i&&!1!==i.showAdd?r["createElement"]("button",{ref:e,type:"button",className:"".concat(n,"-nav-add"),style:a,"aria-label":(null===o||void 0===o?void 0:o.addAriaLabel)||"Add tab",onClick:function(t){i.onEdit("add",{event:t})}},i.addIcon||"+"):null}var vi=r["forwardRef"](di);function gi(t,e){var n=t.prefixCls,i=t.id,o=t.tabs,u=t.locale,c=t.mobile,l=t.moreIcon,f=void 0===l?"More":l,p=t.moreTransitionName,d=t.style,v=t.className,g=t.editable,m=t.tabBarGutter,y=t.rtl,_=t.removeAriaLabel,b=t.onTabClick,x=t.getPopupContainer,w=t.popupClassName,E=Object(r["useState"])(!1),S=Object(s["a"])(E,2),C=S[0],T=S[1],A=Object(r["useState"])(null),k=Object(s["a"])(A,2),M=k[0],P=k[1],R="".concat(i,"-more-popup"),j="".concat(n,"-dropdown"),I=null!==M?"".concat(R,"-").concat(M):null,L=null===u||void 0===u?void 0:u.dropdownAriaLabel;function N(t,e){t.preventDefault(),t.stopPropagation(),g.onEdit("remove",{key:e,event:t})}var D=r["createElement"](ni,{onClick:function(t){var e=t.key,n=t.domEvent;b(e,n),T(!1)},prefixCls:"".concat(j,"-menu"),id:R,tabIndex:-1,role:"listbox","aria-activedescendant":I,selectedKeys:[M],"aria-label":void 0!==L?L:"expanded dropdown"},o.map((function(t){var e=g&&!1!==t.closable&&!t.disabled;return r["createElement"](It,{key:t.key,id:"".concat(R,"-").concat(t.key),role:"option","aria-controls":i&&"".concat(i,"-panel-").concat(t.key),disabled:t.disabled},r["createElement"]("span",null,t.tab),e&&r["createElement"]("button",{type:"button","aria-label":_||"remove",tabIndex:0,className:"".concat(j,"-menu-item-remove"),onClick:function(e){e.stopPropagation(),N(e,t.key)}},t.closeIcon||g.removeIcon||"\xd7"))})));function F(t){for(var e=o.filter((function(t){return!t.disabled})),n=e.findIndex((function(t){return t.key===M}))||0,r=e.length,i=0;i<r;i+=1){n=(n+t+r)%r;var a=e[n];if(!a.disabled)return void P(a.key)}}function B(t){var e=t.which;if(C)switch(e){case O["a"].UP:F(-1),t.preventDefault();break;case O["a"].DOWN:F(1),t.preventDefault();break;case O["a"].ESC:T(!1);break;case O["a"].SPACE:case O["a"].ENTER:null!==M&&b(M,t);break}else[O["a"].DOWN,O["a"].SPACE,O["a"].ENTER].includes(e)&&(T(!0),t.preventDefault())}Object(r["useEffect"])((function(){var t=document.getElementById(I);t&&t.scrollIntoView&&t.scrollIntoView(!1)}),[M]),Object(r["useEffect"])((function(){C||P(null)}),[C]);var z=Object(a["a"])({},y?"marginRight":"marginLeft",m);o.length||(z.visibility="hidden",z.order=1);var U=h()(Object(a["a"])({},"".concat(j,"-rtl"),y)),V=c?null:r["createElement"](pi,{prefixCls:j,overlay:D,trigger:["hover"],visible:!!o.length&&C,transitionName:p,onVisibleChange:T,overlayClassName:h()(U,w),mouseEnterDelay:.1,mouseLeaveDelay:.1,getPopupContainer:x},r["createElement"]("button",{type:"button",className:"".concat(n,"-nav-more"),style:z,tabIndex:-1,"aria-hidden":"true","aria-haspopup":"listbox","aria-controls":R,id:"".concat(i,"-more"),"aria-expanded":C,onKeyDown:B},f));return r["createElement"]("div",{className:h()("".concat(n,"-nav-operations"),v),style:d,ref:e},V,r["createElement"](vi,{prefixCls:n,locale:u,editable:g}))}var mi=r["memo"](r["forwardRef"](gi),(function(t,e){return e.tabMoving})),yi=Object(r["createContext"])(null),_i=.1,bi=.01,xi=20,wi=Math.pow(.995,xi);function Ei(t,e){var n=Object(r["useState"])(),i=Object(s["a"])(n,2),o=i[0],a=i[1],u=Object(r["useState"])(0),c=Object(s["a"])(u,2),l=c[0],f=c[1],h=Object(r["useState"])(0),p=Object(s["a"])(h,2),d=p[0],v=p[1],g=Object(r["useState"])(),m=Object(s["a"])(g,2),y=m[0],_=m[1],b=Object(r["useRef"])();function x(t){var e=t.touches[0],n=e.screenX,r=e.screenY;a({x:n,y:r}),window.clearInterval(b.current)}function w(t){if(o){t.preventDefault();var n=t.touches[0],r=n.screenX,i=n.screenY;a({x:r,y:i});var s=r-o.x,u=i-o.y;e(s,u);var c=Date.now();f(c),v(c-l),_({x:s,y:u})}}function E(){if(o&&(a(null),_(null),y)){var t=y.x/d,n=y.y/d,r=Math.abs(t),i=Math.abs(n);if(Math.max(r,i)<_i)return;var s=t,u=n;b.current=window.setInterval((function(){Math.abs(s)<bi&&Math.abs(u)<bi?window.clearInterval(b.current):(s*=wi,u*=wi,e(s*xi,u*xi))}),xi)}}var S=Object(r["useRef"])();function O(t){var n=t.deltaX,r=t.deltaY,i=0,o=Math.abs(n),a=Math.abs(r);o===a?i="x"===S.current?n:r:o>a?(i=n,S.current="x"):(i=r,S.current="y"),e(-i,-i)&&t.preventDefault()}var C=Object(r["useRef"])(null);C.current={onTouchStart:x,onTouchMove:w,onTouchEnd:E,onWheel:O},r["useEffect"]((function(){function e(t){C.current.onTouchStart(t)}function n(t){C.current.onTouchMove(t)}function r(t){C.current.onTouchEnd(t)}function i(t){C.current.onWheel(t)}return document.addEventListener("touchmove",n,{passive:!1}),document.addEventListener("touchend",r,{passive:!1}),t.current.addEventListener("touchstart",e,{passive:!1}),t.current.addEventListener("wheel",i),function(){document.removeEventListener("touchmove",n),document.removeEventListener("touchend",r)}}),[])}function Si(){var t=Object(r["useRef"])(new Map);function e(e){return t.current.has(e)||t.current.set(e,r["createRef"]()),t.current.get(e)}function n(e){t.current["delete"](e)}return[e,n]}function Oi(t,e){var n=r["useRef"](t),i=r["useState"]({}),o=Object(s["a"])(i,2),a=o[1];function u(t){var r="function"===typeof t?t(n.current):t;r!==n.current&&e(r,n.current),n.current=r,a({})}return[n.current,u]}var Ci=function(t){var e,n=t.position,i=t.prefixCls,o=t.extra;if(!o)return null;var a={};return o&&"object"===Object(u["a"])(o)&&!r["isValidElement"](o)?a=o:a.right=o,"right"===n&&(e=a.right),"left"===n&&(e=a.left),e?r["createElement"]("div",{className:"".concat(i,"-extra-content")},e):null};function Ti(t,e){var n,i=r["useContext"](yi),u=i.prefixCls,c=i.tabs,f=t.className,p=t.style,d=t.id,v=t.animated,g=t.activeKey,m=t.rtl,y=t.extra,_=t.editable,O=t.locale,C=t.tabPosition,A=t.tabBarGutter,M=t.children,R=t.onTabClick,j=t.onTabScroll,I=Object(r["useRef"])(),L=Object(r["useRef"])(),N=Object(r["useRef"])(),D=Object(r["useRef"])(),F=Si(),B=Object(s["a"])(F,2),z=B[0],U=B[1],V="top"===C||"bottom"===C,H=Oi(0,(function(t,e){V&&j&&j({direction:t>e?"left":"right"})})),G=Object(s["a"])(H,2),W=G[0],Z=G[1],Y=Oi(0,(function(t,e){!V&&j&&j({direction:t>e?"top":"bottom"})})),X=Object(s["a"])(Y,2),q=X[0],K=X[1],Q=Object(r["useState"])(0),$=Object(s["a"])(Q,2),J=$[0],tt=$[1],et=Object(r["useState"])(0),nt=Object(s["a"])(et,2),rt=nt[0],it=nt[1],ot=Object(r["useState"])(null),at=Object(s["a"])(ot,2),st=at[0],ut=at[1],ct=Object(r["useState"])(null),lt=Object(s["a"])(ct,2),ft=lt[0],ht=lt[1],pt=Object(r["useState"])(0),dt=Object(s["a"])(pt,2),vt=dt[0],gt=dt[1],mt=Object(r["useState"])(0),yt=Object(s["a"])(mt,2),_t=yt[0],bt=yt[1],xt=S(new Map),wt=Object(s["a"])(xt,2),Et=wt[0],St=wt[1],Ot=k(c,Et,J),Ct="".concat(u,"-nav-operations-hidden"),Tt=0,At=0;function kt(t){return t<Tt?Tt:t>At?At:t}V?m?(Tt=0,At=Math.max(0,J-st)):(Tt=Math.min(0,st-J),At=0):(Tt=Math.min(0,ft-rt),At=0);var Mt=Object(r["useRef"])(),Pt=Object(r["useState"])(),Rt=Object(s["a"])(Pt,2),jt=Rt[0],It=Rt[1];function Lt(){It(Date.now())}function Nt(){window.clearTimeout(Mt.current)}function Dt(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,e=Ot.get(t)||{width:0,height:0,left:0,right:0,top:0};if(V){var n=W;m?e.right<W?n=e.right:e.right+e.width>W+st&&(n=e.right+e.width-st):e.left<-W?n=-e.left:e.left+e.width>-W+st&&(n=-(e.left+e.width-st)),K(0),Z(kt(n))}else{var r=q;e.top<-q?r=-e.top:e.top+e.height>-q+ft&&(r=-(e.top+e.height-ft)),Z(0),K(kt(r))}}Ei(I,(function(t,e){function n(t,e){t((function(t){var n=kt(t+e);return n}))}if(V){if(st>=J)return!1;n(Z,t)}else{if(ft>=rt)return!1;n(K,e)}return Nt(),Lt(),!0})),Object(r["useEffect"])((function(){return Nt(),jt&&(Mt.current=window.setTimeout((function(){It(0)}),100)),Nt}),[jt]);var Ft=P(Ot,{width:st,height:ft,left:W,top:q},{width:J,height:rt},{width:vt,height:_t},Object(l["a"])(Object(l["a"])({},t),{},{tabs:c})),Bt=Object(s["a"])(Ft,2),zt=Bt[0],Ut=Bt[1],Vt={};"top"===C||"bottom"===C?Vt[m?"marginRight":"marginLeft"]=A:Vt.marginTop=A;var Ht=c.map((function(t,e){var n=t.key;return r["createElement"](T,{id:d,prefixCls:u,key:n,tab:t,style:0===e?void 0:Vt,closable:t.closable,editable:_,active:n===g,renderWrapper:M,removeAriaLabel:null===O||void 0===O?void 0:O.removeAriaLabel,ref:z(n),onClick:function(t){R(n,t)},onRemove:function(){U(n)},onFocus:function(){Dt(n),Lt(),I.current&&(m||(I.current.scrollLeft=0),I.current.scrollTop=0)}})})),Gt=E((function(){var t,e,n,r,i,o,a=(null===(t=I.current)||void 0===t?void 0:t.offsetWidth)||0,s=(null===(e=I.current)||void 0===e?void 0:e.offsetHeight)||0,u=(null===(n=D.current)||void 0===n?void 0:n.offsetWidth)||0,l=(null===(r=D.current)||void 0===r?void 0:r.offsetHeight)||0;ut(a),ht(s),gt(u),bt(l);var f=((null===(i=L.current)||void 0===i?void 0:i.offsetWidth)||0)-u,h=((null===(o=L.current)||void 0===o?void 0:o.offsetHeight)||0)-l;tt(f),it(h),St((function(){var t=new Map;return c.forEach((function(e){var n=e.key,r=z(n).current;r&&t.set(n,{width:r.offsetWidth,height:r.offsetHeight,left:r.offsetLeft,top:r.offsetTop})})),t}))})),Wt=c.slice(0,zt),Zt=c.slice(Ut+1),Yt=[].concat(Object(b["a"])(Wt),Object(b["a"])(Zt)),Xt=Object(r["useState"])(),qt=Object(s["a"])(Xt,2),Kt=qt[0],Qt=qt[1],$t=Ot.get(g),Jt=Object(r["useRef"])();function te(){x["a"].cancel(Jt.current)}Object(r["useEffect"])((function(){var t={};return $t&&(V?(m?t.right=$t.right:t.left=$t.left,t.width=$t.width):(t.top=$t.top,t.height=$t.height)),te(),Jt.current=Object(x["a"])((function(){Qt(t)})),te}),[$t,V,m]),Object(r["useEffect"])((function(){Dt()}),[g,$t,Ot,V]),Object(r["useEffect"])((function(){Gt()}),[m,A,g,c.map((function(t){return t.key})).join("_")]);var ee,ne,re,ie,oe=!!Yt.length,ae="".concat(u,"-nav-wrap");return V?m?(ne=W>0,ee=W+st<J):(ee=W<0,ne=-W+st<J):(re=q<0,ie=-q+ft<rt),r["createElement"]("div",{ref:e,role:"tablist",className:h()("".concat(u,"-nav"),f),style:p,onKeyDown:function(){Lt()}},r["createElement"](Ci,{position:"left",extra:y,prefixCls:u}),r["createElement"](w["a"],{onResize:Gt},r["createElement"]("div",{className:h()(ae,(n={},Object(a["a"])(n,"".concat(ae,"-ping-left"),ee),Object(a["a"])(n,"".concat(ae,"-ping-right"),ne),Object(a["a"])(n,"".concat(ae,"-ping-top"),re),Object(a["a"])(n,"".concat(ae,"-ping-bottom"),ie),n)),ref:I},r["createElement"](w["a"],{onResize:Gt},r["createElement"]("div",{ref:L,className:"".concat(u,"-nav-list"),style:{transform:"translate(".concat(W,"px, ").concat(q,"px)"),transition:jt?"none":void 0}},Ht,r["createElement"](vi,{ref:D,prefixCls:u,locale:O,editable:_,style:Object(l["a"])(Object(l["a"])({},0===Ht.length?void 0:Vt),{},{visibility:oe?"hidden":null})}),r["createElement"]("div",{className:h()("".concat(u,"-ink-bar"),Object(a["a"])({},"".concat(u,"-ink-bar-animated"),v.inkBar)),style:Kt}))))),r["createElement"](mi,Object(o["a"])({},t,{removeAriaLabel:null===O||void 0===O?void 0:O.removeAriaLabel,ref:N,prefixCls:u,tabs:Yt,className:!oe&&Ct,tabMoving:!!jt})),r["createElement"](Ci,{position:"right",extra:y,prefixCls:u}))}var Ai=r["forwardRef"](Ti);function ki(t){var e=t.id,n=t.activeKey,i=t.animated,o=t.tabPosition,s=t.rtl,u=t.destroyInactiveTabPane,c=r["useContext"](yi),l=c.prefixCls,f=c.tabs,p=i.tabPane,d=f.findIndex((function(t){return t.key===n}));return r["createElement"]("div",{className:h()("".concat(l,"-content-holder"))},r["createElement"]("div",{className:h()("".concat(l,"-content"),"".concat(l,"-content-").concat(o),Object(a["a"])({},"".concat(l,"-content-animated"),p)),style:d&&p?Object(a["a"])({},s?"marginRight":"marginLeft","-".concat(d,"00%")):null},f.map((function(t){return r["cloneElement"](t.node,{key:t.key,prefixCls:l,tabKey:t.key,id:e,animated:p,active:t.key===n,destroyInactiveTabPane:u})}))))}function Mi(t){var e=t.prefixCls,n=t.forceRender,i=t.className,o=t.style,a=t.id,u=t.active,c=t.animated,f=t.destroyInactiveTabPane,p=t.tabKey,d=t.children,v=r["useState"](n),g=Object(s["a"])(v,2),m=g[0],y=g[1];r["useEffect"]((function(){u?y(!0):f&&y(!1)}),[u,f]);var _={};return u||(c?(_.visibility="hidden",_.height=0,_.overflowY="hidden"):_.display="none"),r["createElement"]("div",{id:a&&"".concat(a,"-panel-").concat(p),role:"tabpanel",tabIndex:u?0:-1,"aria-labelledby":a&&"".concat(a,"-tab-").concat(p),"aria-hidden":!u,style:Object(l["a"])(Object(l["a"])({},_),o),className:h()("".concat(e,"-tabpane"),u&&"".concat(e,"-tabpane-active"),i)},(u||m||n)&&d)}var Pi=["id","prefixCls","className","children","direction","activeKey","defaultActiveKey","editable","animated","tabPosition","tabBarGutter","tabBarStyle","tabBarExtraContent","locale","moreIcon","moreTransitionName","destroyInactiveTabPane","renderTabBar","onChange","onTabClick","onTabScroll","getPopupContainer","popupClassName"],Ri=0;function ji(t){return Object(p["a"])(t).map((function(t){if(r["isValidElement"](t)){var e=void 0!==t.key?String(t.key):void 0;return Object(l["a"])(Object(l["a"])({key:e},t.props),{},{node:t})}return null})).filter((function(t){return t}))}function Ii(t,e){var n,i,f=t.id,p=t.prefixCls,v=void 0===p?"rc-tabs":p,g=t.className,m=t.children,y=t.direction,b=t.activeKey,x=t.defaultActiveKey,w=t.editable,E=t.animated,S=void 0===E?{inkBar:!0,tabPane:!1}:E,O=t.tabPosition,C=void 0===O?"top":O,T=t.tabBarGutter,A=t.tabBarStyle,k=t.tabBarExtraContent,M=t.locale,P=t.moreIcon,R=t.moreTransitionName,j=t.destroyInactiveTabPane,I=t.renderTabBar,L=t.onChange,N=t.onTabClick,D=t.onTabScroll,F=t.getPopupContainer,B=t.popupClassName,z=Object(c["a"])(t,Pi),U=ji(m),V="rtl"===y;i=!1===S?{inkBar:!1,tabPane:!1}:!0===S?{inkBar:!0,tabPane:!0}:Object(l["a"])({inkBar:!0,tabPane:!1},"object"===Object(u["a"])(S)?S:{});var H=Object(r["useState"])(!1),G=Object(s["a"])(H,2),W=G[0],Z=G[1];Object(r["useEffect"])((function(){Z(d())}),[]);var Y=_((function(){var t;return null===(t=U[0])||void 0===t?void 0:t.key}),{value:b,defaultValue:x}),X=Object(s["a"])(Y,2),q=X[0],K=X[1],Q=Object(r["useState"])((function(){return U.findIndex((function(t){return t.key===q}))})),$=Object(s["a"])(Q,2),J=$[0],tt=$[1];Object(r["useEffect"])((function(){var t,e=U.findIndex((function(t){return t.key===q}));-1===e&&(e=Math.max(0,Math.min(J,U.length-1)),K(null===(t=U[e])||void 0===t?void 0:t.key));tt(e)}),[U.map((function(t){return t.key})).join("_"),q,J]);var et=_(null,{value:f}),nt=Object(s["a"])(et,2),rt=nt[0],it=nt[1],ot=C;function at(t,e){null===N||void 0===N||N(t,e);var n=t!==q;K(t),n&&(null===L||void 0===L||L(t))}W&&!["left","right"].includes(C)&&(ot="top"),Object(r["useEffect"])((function(){f||(it("rc-tabs-".concat(Ri)),Ri+=1)}),[]);var st,ut={id:rt,activeKey:q,animated:i,tabPosition:ot,rtl:V,mobile:W},ct=Object(l["a"])(Object(l["a"])({},ut),{},{editable:w,locale:M,moreIcon:P,moreTransitionName:R,tabBarGutter:T,onTabClick:at,onTabScroll:D,extra:k,style:A,panes:m,getPopupContainer:F,popupClassName:B});return st=I?I(ct,Ai):r["createElement"](Ai,ct),r["createElement"](yi.Provider,{value:{tabs:U,prefixCls:v}},r["createElement"]("div",Object(o["a"])({ref:e,id:f,className:h()(v,"".concat(v,"-").concat(ot),(n={},Object(a["a"])(n,"".concat(v,"-mobile"),W),Object(a["a"])(n,"".concat(v,"-editable"),w),Object(a["a"])(n,"".concat(v,"-rtl"),V),n),g)},z),st,r["createElement"](ki,Object(o["a"])({destroyInactiveTabPane:j},ut,{animated:i}))))}var Li=r["forwardRef"](Ii);Li.TabPane=Mi;var Ni=Li,Di=Ni,Fi=n("6JX1"),Bi=n("9kvl"),zi=n("dEAq"),Ui=n("H1Ra"),Vi=n("M/Q6");n("RZMt");function Hi(t,e){return Xi(t)||Yi(t,e)||Wi(t,e)||Gi()}function Gi(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Wi(t,e){if(t){if("string"===typeof t)return Zi(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Zi(t,e):void 0}}function Zi(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Yi(t,e){var n=null==t?null:"undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(t);!(a=(r=n.next()).done);a=!0)if(o.push(r.value),e&&o.length===e)break}catch(u){s=!0,i=u}finally{try{a||null==n["return"]||n["return"]()}finally{if(s)throw i}}return o}}function Xi(t){if(Array.isArray(t))return t}function qi(t,e){var n,r=null===(n=t.match(/\.(\w+)$/))||void 0===n?void 0:n[1];return r||(r=e.tsx?"tsx":"jsx"),r}var Ki=function(t){var e,n,o,a=Object(r["useRef"])(),s=Object(r["useContext"])(zi["context"]),u=s.locale,c=Object(zi["useLocaleProps"])(u,t),l=Object(zi["useDemoUrl"])(c.identifier),f=c.demoUrl||l,h=(null===Bi["a"]||void 0===Bi["a"]?void 0:Bi["a"].location.hash)==="#".concat(c.identifier),p=1===Object.keys(c.sources).length,d=Object(zi["useCodeSandbox"])((null===(e=c.hideActions)||void 0===e?void 0:e.includes("CSB"))?null:c),v=Object(zi["useRiddle"])((null===(n=c.hideActions)||void 0===n?void 0:n.includes("RIDDLE"))?null:c),g=Object(zi["useMotions"])(c.motions||[],a.current),m=Hi(g,2),y=m[0],_=m[1],b=Object(zi["useCopy"])(),x=Hi(b,2),w=x[0],E=x[1],S=Object(r["useState"])((function(){return c.sources._?"_":Object.keys(c.sources)[0]})),O=Hi(S,2),C=O[0],T=O[1],A=Object(r["useState"])(qi(C,c.sources[C])),k=Hi(A,2),M=k[0],P=k[1],R=Object(r["useState"])(Boolean(c.defaultShowCode)),j=Hi(R,2),I=j[0],L=j[1],N=Object(r["useState"])(Math.random()),D=Hi(N,2),F=D[0],B=D[1],z=c.sources[C][M]||c.sources[C].content,U=Object(zi["useTSPlaygroundUrl"])(u,z),V=Object(r["useRef"])(),H=Object(zi["usePrefersColor"])(),G=Hi(H,1),W=G[0],Z=c.actionBarRender,Y=void 0===Z?function(t){return t}:Z;function X(t){T(t),P(qi(t,c.sources[t]))}return Object(r["useEffect"])((function(){B(Math.random())}),[W]),i.a.createElement("div",{style:c.style,className:[c.className,"__dumi-default-previewer",h?"__dumi-default-previewer-target":""].filter(Boolean).join(" "),id:c.identifier,"data-debug":c.debug||void 0,"data-iframe":c.iframe||void 0},c.iframe&&i.a.createElement("div",{className:"__dumi-default-previewer-browser-nav"}),i.a.createElement("div",{ref:a,className:"__dumi-default-previewer-demo",style:{transform:c.transform?"translate(0, 0)":void 0,padding:c.compact||c.iframe&&!1!==c.compact?"0":void 0,background:c.background}},c.iframe?i.a.createElement("iframe",{title:"dumi-previewer",style:{height:String(c.iframe).replace(/(\d)$/,"$1px")},key:F,src:f,ref:V}):i.a.createElement(Fi["ErrorBoundary"],{fallbackRender:function(t){var e=t.error;return i.a.createElement(Vi["a"],{type:"error"},i.a.createElement("h4",null,e.message||"This demo has been crashed."),e.stack&&i.a.createElement("details",null,i.a.createElement("summary",null,"Error stack"),i.a.createElement("pre",null,e.stack)))}},c.children)),i.a.createElement("div",{className:"__dumi-default-previewer-desc","data-title":c.title},c.title&&i.a.createElement(zi["AnchorLink"],{to:"#".concat(c.identifier)},c.title),c.description&&i.a.createElement("div",{dangerouslySetInnerHTML:{__html:c.description}})),i.a.createElement("div",{className:"__dumi-default-previewer-actions"},Y(i.a.createElement(i.a.Fragment,null,d&&i.a.createElement("button",{title:"Open demo on CodeSandbox.io",className:"__dumi-default-icon",role:"codesandbox",onClick:d}),v&&i.a.createElement("button",{title:"Open demo on Riddle",className:"__dumi-default-icon",role:"riddle",onClick:v}),c.motions&&i.a.createElement("button",{title:"Execute motions",className:"__dumi-default-icon",role:"motions",disabled:_,onClick:function(){return y()}}),c.iframe&&i.a.createElement("button",{title:"Reload demo iframe page",className:"__dumi-default-icon",role:"refresh",onClick:function(){return B(Math.random())}}),!(null===(o=c.hideActions)||void 0===o?void 0:o.includes("EXTERNAL"))&&i.a.createElement(zi["Link"],{target:"_blank",to:f},i.a.createElement("button",{title:"Open demo in new tab",className:"__dumi-default-icon",role:"open-demo",type:"button"})),i.a.createElement("span",null),i.a.createElement("button",{title:"Copy source code",className:"__dumi-default-icon",role:"copy","data-status":E,onClick:function(){return w(z)}}),"tsx"===M&&I&&i.a.createElement(zi["Link"],{target:"_blank",to:U},i.a.createElement("button",{title:"Get JSX via TypeScript Playground",className:"__dumi-default-icon",role:"change-tsx",type:"button"})),i.a.createElement("button",{title:"Toggle source code panel",className:"__dumi-default-icon".concat(I?" __dumi-default-btn-expand":""),role:"source",type:"button",onClick:function(){return L(!I)}})))),I&&i.a.createElement("div",{className:"__dumi-default-previewer-source-wrapper"},!p&&i.a.createElement(Di,{className:"__dumi-default-previewer-source-tab",prefixCls:"__dumi-default-tabs",moreIcon:"\xb7\xb7\xb7",defaultActiveKey:C,onChange:X},Object.keys(c.sources).map((function(t){return i.a.createElement(Mi,{tab:"_"===t?"index.".concat(qi(t,c.sources[t])):t,key:t})}))),i.a.createElement("div",{className:"__dumi-default-previewer-source"},i.a.createElement(Ui["a"],{code:z,lang:M,showCopy:!1}))))};e["default"]=Ki},ZzCi:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.named=void 0;var r=n("xfSm"),i=n("GXnB"),o=n("Ztfv");function a(t){return function(e,n,a){var s=new i.Metadata(r.NAMED_TAG,t);"number"===typeof a?o.tagParameter(e,n,a,s):o.tagProperty(e,n,s)}}e.named=a},a3WO:function(t,e,n){"use strict";function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}n.d(e,"a",(function(){return r}))},"a5/B":function(t,e,n){var r=n("I+eb");r({target:"Math",stat:!0},{umulh:function(t,e){var n=65535,r=+t,i=+e,o=r&n,a=i&n,s=r>>>16,u=i>>>16,c=(s*a>>>0)+(o*a>>>16);return s*u+(c>>>16)+((o*u>>>0)+(c&n)>>>16)}})},a57n:function(t,e,n){var r=n("dG/n");r("search")},aPG5:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.resolve=void 0;var r=n("MON2"),i=n("FV85"),o=n("qK8v"),a=n("ujMp"),s=n("cSJO"),u=function(t,e,n){try{return n()}catch(i){throw o.isStackOverflowExeption(i)?new Error(r.CIRCULAR_DEPENDENCY_IN_FACTORY(t,e.toString())):i}},c=function t(e){return function(n){n.parentContext.setCurrentRequest(n);var o=n.bindings,c=n.childRequests,l=n.target&&n.target.isArray(),f=!n.parentRequest||!n.parentRequest.target||!n.target||!n.parentRequest.target.matchesArray(n.target.serviceIdentifier);if(l&&f)return c.map((function(n){var r=t(e);return r(n)}));var h=null;if(!n.target.isOptional()||0!==o.length){var p=o[0],d=p.scope===i.BindingScopeEnum.Singleton,v=p.scope===i.BindingScopeEnum.Request;if(d&&p.activated)return p.cache;if(v&&null!==e&&e.has(p.id))return e.get(p.id);if(p.type===i.BindingTypeEnum.ConstantValue)h=p.cache,p.activated=!0;else if(p.type===i.BindingTypeEnum.Function)h=p.cache,p.activated=!0;else if(p.type===i.BindingTypeEnum.Constructor)h=p.implementationType;else if(p.type===i.BindingTypeEnum.DynamicValue&&null!==p.dynamicValue)h=u("toDynamicValue",p.serviceIdentifier,(function(){return p.dynamicValue(n.parentContext)}));else if(p.type===i.BindingTypeEnum.Factory&&null!==p.factory)h=u("toFactory",p.serviceIdentifier,(function(){return p.factory(n.parentContext)}));else if(p.type===i.BindingTypeEnum.Provider&&null!==p.provider)h=u("toProvider",p.serviceIdentifier,(function(){return p.provider(n.parentContext)}));else{if(p.type!==i.BindingTypeEnum.Instance||null===p.implementationType){var g=a.getServiceIdentifierAsString(n.serviceIdentifier);throw new Error(r.INVALID_BINDING_TYPE+" "+g)}h=s.resolveInstance(p.implementationType,c,t(e))}return"function"===typeof p.onActivation&&(h=p.onActivation(n.parentContext,h)),d&&(p.cache=h,p.activated=!0),v&&null!==e&&!e.has(p.id)&&e.set(p.id,h),h}}};function l(t){var e=c(t.plan.rootRequest.requestScope);return e(t.plan.rootRequest)}e.resolve=l},adU4:function(t,e,n){var r=n("y1pI"),i=Array.prototype,o=i.splice;function a(t){var e=this.__data__,n=r(e,t);if(n<0)return!1;var i=e.length-1;return n==i?e.pop():o.call(e,n,1),--this.size,!0}t.exports=a},afA6:function(t,e,n){"use strict";function r(){return r=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},r.apply(this,arguments)}n.r(e);var i=n("q1tI"),o=n.n(i),a=n("q3YX"),s="import { Scene, LineLayer } from '@antv/l7';\nimport { TileLayer } from 'maptalks';\nimport { Map } from 'l7-maptalks';\nimport React, { useEffect } from 'react';\n\nexport default () => {\n  useEffect(() => {\n    const scene = new Scene({\n      id: 'map',\n      map: new Map({\n        style: 'light',\n        center: [112, 30],\n        zoom: 4,\n        pitch: 45,\n        rotation: 0,\n      }),\n    });\n\n    scene.on('loaded', () => {\n      var china_vec_02 = new TileLayer('vec', {\n        tileSystem: [1, -1, -180, 90],\n        urlTemplate:\n          'https://t{s}.tianditu.gov.cn/vec_c/wmts?SERVICE=WMTS&REQUEST=GetTile&VERSION=1.0.0&LAYER=vec&STYLE=default&TILEMATRIXSET=c&FORMAT=tiles&TILEMATRIX={z}&TILEROW={y}&TILECOL={x}&tk=b72aa81ac2b3cae941d1eb213499e15e',\n        subdomains: ['1', '2', '3', '4', '5'],\n        spatialReference: {\n          projection: 'EPSG:4326',\n        },\n      });\n      var china_txt_02 = new TileLayer('txt', {\n        tileSystem: [1, -1, -180, 90],\n        urlTemplate:\n          'https://t{s}.tianditu.gov.cn/cva_c/wmts?SERVICE=WMTS&REQUEST=GetTile&VERSION=1.0.0&LAYER=cva&STYLE=default&TILEMATRIXSET=c&FORMAT=tiles&TILEMATRIX={z}&TILEROW={y}&TILECOL={x}&tk=b72aa81ac2b3cae941d1eb213499e15e',\n        subdomains: ['1', '2', '3', '4', '5'],\n        spatialReference: {\n          projection: 'EPSG:4326',\n        },\n      });\n      (scene.getMapService() as any).map?.addLayer(china_vec_02);\n      (scene.getMapService() as any).map?.addLayer(china_txt_02);\n\n      fetch('https://gw.alipayobjects.com/os/rmsportal/UEXQMifxtkQlYfChpPwT.txt')\n        .then((res) => res.text())\n        .then((data) => {\n          const layer = new LineLayer({})\n            .source(data, {\n              parser: {\n                type: 'csv',\n                x: 'lng1',\n                y: 'lat1',\n                x1: 'lng2',\n                y1: 'lat2',\n              },\n            })\n            .size(1)\n            .shape('arc')\n            .color('#8C1EB2')\n            .style({\n              opacity: 0.8,\n              blur: 0.99,\n            });\n          scene.addLayer(layer);\n        });\n    });\n\n    return () => {\n      scene.destroy();\n    };\n  }, []);\n\n  return (\n    <div\n      id=\"map\"\n      style={{\n        height: '500px',\n        position: 'relative',\n      }}\n    />\n  );\n};",u={"docs-maptalk":{component:n("ZVtd").default,previewerProps:{sources:{_:{tsx:s}},dependencies:{"@antv/l7":{version:"^2.9.26"},maptalks:{version:"^1.0.0-rc.17",css:"maptalks/dist/maptalks.css"},"l7-maptalks":{version:"0.0.1"},react:{version:"^18.0.0"},"@antv/l7-map":{version:"^2.9.26"}},identifier:"docs-maptalk"}}},c=n("x2v5"),l=n("KcUY"),f=n.n(l);e["default"]=t=>o.a.createElement(f.a,r({},t,{config:a,demos:u,apis:c}))},afO8:function(t,e,n){var r,i,o,a=n("f5p1"),s=n("2oRo"),u=n("hh1v"),c=n("kRJp"),l=n("UTVS"),f=n("93I0"),h=n("0BK2"),p=s.WeakMap,d=function(t){return o(t)?i(t):r(t,{})},v=function(t){return function(e){var n;if(!u(e)||(n=i(e)).type!==t)throw TypeError("Incompatible receiver, "+t+" required");return n}};if(a){var g=new p,m=g.get,y=g.has,_=g.set;r=function(t,e){return _.call(g,t,e),e},i=function(t){return m.call(g,t)||{}},o=function(t){return y.call(g,t)}}else{var b=f("state");h[b]=!0,r=function(t,e){return c(t,b,e),e},i=function(t){return l(t,b)?t[b]:{}},o=function(t){return l(t,b)}}t.exports={set:r,get:i,has:o,enforce:d,getterFor:v}},apDx:function(t,e,n){var r=n("dG/n");r("dispose")},b1O7:function(t,e,n){var r=n("g6v/"),i=n("33Wh"),o=n("/GqU"),a=n("0eef").f,s=function(t){return function(e){var n,s=o(e),u=i(s),c=u.length,l=0,f=[];while(c>l)n=u[l++],r&&!a.call(s,n)||f.push(t?[n,s[n]]:s[n]);return f}};t.exports={entries:s(!0),values:s(!1)}},b80T:function(t,e,n){var r=n("UNi/"),i=n("03A+"),o=n("Z0cm"),a=n("DSRE"),s=n("wJg7"),u=n("c6wG"),c=Object.prototype,l=c.hasOwnProperty;function f(t,e){var n=o(t),c=!n&&i(t),f=!n&&!c&&a(t),h=!n&&!c&&!f&&u(t),p=n||c||f||h,d=p?r(t.length,String):[],v=d.length;for(var g in t)!e&&!l.call(t,g)||p&&("length"==g||f&&("offset"==g||"parent"==g)||h&&("buffer"==g||"byteLength"==g||"byteOffset"==g)||s(g,v))||d.push(g);return d}t.exports=f},bCY9:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n("LtsZ"),i=new r["Plugin"]({validKeys:["modifyClientRenderOpts","patchRoutes","rootContainer","render","onRouteChange","__mfsu"]})},bFeb:function(t,e,n){var r=n("I+eb"),i=n("2oRo");r({global:!0},{globalThis:i})},bT9E:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n("VTBJ");function i(t,e){var n=Object(r["a"])({},t);return Array.isArray(e)&&e.forEach((function(t){delete n[t]})),n}},bWFh:function(t,e,n){"use strict";var r=n("I+eb"),i=n("2oRo"),o=n("lMq5"),a=n("busE"),s=n("8YOa"),u=n("ImZN"),c=n("GarU"),l=n("hh1v"),f=n("0Dky"),h=n("HH4o"),p=n("1E5z"),d=n("cVYH");t.exports=function(t,e,n){var v=-1!==t.indexOf("Map"),g=-1!==t.indexOf("Weak"),m=v?"set":"add",y=i[t],_=y&&y.prototype,b=y,x={},w=function(t){var e=_[t];a(_,t,"add"==t?function(t){return e.call(this,0===t?0:t),this}:"delete"==t?function(t){return!(g&&!l(t))&&e.call(this,0===t?0:t)}:"get"==t?function(t){return g&&!l(t)?void 0:e.call(this,0===t?0:t)}:"has"==t?function(t){return!(g&&!l(t))&&e.call(this,0===t?0:t)}:function(t,n){return e.call(this,0===t?0:t,n),this})};if(o(t,"function"!=typeof y||!(g||_.forEach&&!f((function(){(new y).entries().next()})))))b=n.getConstructor(e,t,v,m),s.REQUIRED=!0;else if(o(t,!0)){var E=new b,S=E[m](g?{}:-0,1)!=E,O=f((function(){E.has(1)})),C=h((function(t){new y(t)})),T=!g&&f((function(){var t=new y,e=5;while(e--)t[m](e,e);return!t.has(-0)}));C||(b=e((function(e,n){c(e,b,t);var r=d(new y,e,b);return void 0!=n&&u(n,r[m],r,v),r})),b.prototype=_,_.constructor=b),(O||T)&&(w("delete"),w("has"),v&&w("get")),(T||S)&&w(m),g&&_.clear&&delete _.clear}return x[t]=b,r({global:!0,forced:b!=y},x),p(b,t),g||n.setStrong(b,t,v),b}},bYHP:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=void 0;var r=u(n("q1tI")),i=n("LtsZ"),o=a(n("hKI/"));function a(t){return t&&t.__esModule?t:{default:t}}function s(t){if("function"!==typeof WeakMap)return null;var e=new WeakMap,n=new WeakMap;return(s=function(t){return t?n:e})(t)}function u(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!==c(t)&&"function"!==typeof t)return{default:t};var n=s(e);if(n&&n.has(t))return n.get(t);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if("default"!==o&&Object.prototype.hasOwnProperty.call(t,o)){var a=i?Object.getOwnPropertyDescriptor(t,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=t[o]}return r["default"]=t,n&&n.set(t,r),r}function c(t){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},c(t)}function l(){return l=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},l.apply(this,arguments)}function f(t,e){return g(t)||v(t,e)||p(t,e)||h()}function h(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function p(t,e){if(t){if("string"===typeof t)return d(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?d(t,e):void 0}}function d(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function v(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o,a,s=[],u=!0,c=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);u=!0);}catch(l){c=!0,i=l}finally{try{if(!u&&null!=n["return"]&&(a=n["return"](),Object(a)!==a))return}finally{if(c)throw i}}return s}}function g(t){if(Array.isArray(t))return t}function m(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function y(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,b(r.key),r)}}function _(t,e,n){return e&&y(t.prototype,e),n&&y(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function b(t){var e=x(t,"string");return"symbol"===c(e)?e:String(e)}function x(t,e){if("object"!==c(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==c(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}var w=new(function(){function t(){m(this,t),this.anchors=[],this.listeners=[],this.listener=void 0,this.listener=(0,o["default"])(this._matchActiveAnchor.bind(this),200)}return _(t,[{key:"_matchActiveAnchor",value:function(){var t=this,e=this.anchors.findIndex((function(e,n){return e.getBoundingClientRect().top>128||n===t.anchors.length-1})),n=this.anchors[Math.max(0,e-1)],r=n.parentElement.id;this.listeners.forEach((function(t){return t(r)}))}},{key:"watch",value:function(t){0===this.anchors.length&&"undefined"!==typeof window&&window.addEventListener("scroll",this.listener),this.anchors.push(t),this.listener()}},{key:"unwatch",value:function(t){this.anchors.splice(this.anchors.findIndex((function(e){return e===t})),1),0===this.anchors.length&&"undefined"!==typeof window&&window.removeEventListener("scroll",this.listener)}},{key:"listen",value:function(t){this.listeners.push(t)}},{key:"unlisten",value:function(t){this.listeners.splice(this.listeners.findIndex((function(e){return e===t})),1)}}]),t}());function E(t){return t.offsetTop+(t.offsetParent?E(t.offsetParent):0)}var S=function t(e){var n,o=(null===(n=e.to.match(/(#[^&?]*)/))||void 0===n?void 0:n[1])||"",a=(0,r.useRef)(null),s=(0,r.useState)(!1),u=f(s,2),c=u[0],h=u[1];return(0,r.useEffect)((function(){var t,e;if(["H1","H2","H3"].includes(null===(t=a.current)||void 0===t||null===(e=t.parentElement)||void 0===e?void 0:e.tagName)&&a.current.parentElement.id){var n=a.current;return w.watch(n),function(){w.unwatch(n)}}var r=function(t){h(o==="#".concat(t))};return w.listen(r),function(){return w.unlisten(r)}}),[]),r["default"].createElement(i.NavLink,l({},e,{ref:a,onClick:function(){return t.scrollToAnchor(o.substring(1))},isActive:function(){return c}}))};S.scrollToAnchor=function(t){window.requestAnimationFrame((function(){var e=document.getElementById(decodeURIComponent(t));e&&window.scrollTo(0,E(e)-100)}))};var O=S;e["default"]=O},bdeN:function(t,e,n){var r=n("I+eb"),i=n("eDxR"),o=n("glrk"),a=n("4WOD"),s=i.has,u=i.toKey,c=function(t,e,n){var r=s(t,e,n);if(r)return!0;var i=a(e);return null!==i&&c(t,i,n)};r({target:"Reflect",stat:!0},{hasMetadata:function(t,e){var n=arguments.length<3?void 0:u(arguments[2]);return c(t,o(e),n)}})},bdgK:function(t,e,n){"use strict";(function(t){var n=function(){if("undefined"!==typeof Map)return Map;function t(t,e){var n=-1;return t.some((function(t,r){return t[0]===e&&(n=r,!0)})),n}return function(){function e(){this.__entries__=[]}return Object.defineProperty(e.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),e.prototype.get=function(e){var n=t(this.__entries__,e),r=this.__entries__[n];return r&&r[1]},e.prototype.set=function(e,n){var r=t(this.__entries__,e);~r?this.__entries__[r][1]=n:this.__entries__.push([e,n])},e.prototype["delete"]=function(e){var n=this.__entries__,r=t(n,e);~r&&n.splice(r,1)},e.prototype.has=function(e){return!!~t(this.__entries__,e)},e.prototype.clear=function(){this.__entries__.splice(0)},e.prototype.forEach=function(t,e){void 0===e&&(e=null);for(var n=0,r=this.__entries__;n<r.length;n++){var i=r[n];t.call(e,i[1],i[0])}},e}()}(),r="undefined"!==typeof window&&"undefined"!==typeof document&&window.document===document,i=function(){return"undefined"!==typeof t&&t.Math===Math?t:"undefined"!==typeof self&&self.Math===Math?self:"undefined"!==typeof window&&window.Math===Math?window:Function("return this")()}(),o=function(){return"function"===typeof requestAnimationFrame?requestAnimationFrame.bind(i):function(t){return setTimeout((function(){return t(Date.now())}),1e3/60)}}(),a=2;function s(t,e){var n=!1,r=!1,i=0;function s(){n&&(n=!1,t()),r&&c()}function u(){o(s)}function c(){var t=Date.now();if(n){if(t-i<a)return;r=!0}else n=!0,r=!1,setTimeout(u,e);i=t}return c}var u=20,c=["top","right","bottom","left","width","height","size","weight"],l="undefined"!==typeof MutationObserver,f=function(){function t(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=s(this.refresh.bind(this),u)}return t.prototype.addObserver=function(t){~this.observers_.indexOf(t)||this.observers_.push(t),this.connected_||this.connect_()},t.prototype.removeObserver=function(t){var e=this.observers_,n=e.indexOf(t);~n&&e.splice(n,1),!e.length&&this.connected_&&this.disconnect_()},t.prototype.refresh=function(){var t=this.updateObservers_();t&&this.refresh()},t.prototype.updateObservers_=function(){var t=this.observers_.filter((function(t){return t.gatherActive(),t.hasActive()}));return t.forEach((function(t){return t.broadcastActive()})),t.length>0},t.prototype.connect_=function(){r&&!this.connected_&&(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),l?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},t.prototype.disconnect_=function(){r&&this.connected_&&(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},t.prototype.onTransitionEnd_=function(t){var e=t.propertyName,n=void 0===e?"":e,r=c.some((function(t){return!!~n.indexOf(t)}));r&&this.refresh()},t.getInstance=function(){return this.instance_||(this.instance_=new t),this.instance_},t.instance_=null,t}(),h=function(t,e){for(var n=0,r=Object.keys(e);n<r.length;n++){var i=r[n];Object.defineProperty(t,i,{value:e[i],enumerable:!1,writable:!1,configurable:!0})}return t},p=function(t){var e=t&&t.ownerDocument&&t.ownerDocument.defaultView;return e||i},d=S(0,0,0,0);function v(t){return parseFloat(t)||0}function g(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return e.reduce((function(e,n){var r=t["border-"+n+"-width"];return e+v(r)}),0)}function m(t){for(var e=["top","right","bottom","left"],n={},r=0,i=e;r<i.length;r++){var o=i[r],a=t["padding-"+o];n[o]=v(a)}return n}function y(t){var e=t.getBBox();return S(0,0,e.width,e.height)}function _(t){var e=t.clientWidth,n=t.clientHeight;if(!e&&!n)return d;var r=p(t).getComputedStyle(t),i=m(r),o=i.left+i.right,a=i.top+i.bottom,s=v(r.width),u=v(r.height);if("border-box"===r.boxSizing&&(Math.round(s+o)!==e&&(s-=g(r,"left","right")+o),Math.round(u+a)!==n&&(u-=g(r,"top","bottom")+a)),!x(t)){var c=Math.round(s+o)-e,l=Math.round(u+a)-n;1!==Math.abs(c)&&(s-=c),1!==Math.abs(l)&&(u-=l)}return S(i.left,i.top,s,u)}var b=function(){return"undefined"!==typeof SVGGraphicsElement?function(t){return t instanceof p(t).SVGGraphicsElement}:function(t){return t instanceof p(t).SVGElement&&"function"===typeof t.getBBox}}();function x(t){return t===p(t).document.documentElement}function w(t){return r?b(t)?y(t):_(t):d}function E(t){var e=t.x,n=t.y,r=t.width,i=t.height,o="undefined"!==typeof DOMRectReadOnly?DOMRectReadOnly:Object,a=Object.create(o.prototype);return h(a,{x:e,y:n,width:r,height:i,top:n,right:e+r,bottom:i+n,left:e}),a}function S(t,e,n,r){return{x:t,y:e,width:n,height:r}}var O=function(){function t(t){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=S(0,0,0,0),this.target=t}return t.prototype.isActive=function(){var t=w(this.target);return this.contentRect_=t,t.width!==this.broadcastWidth||t.height!==this.broadcastHeight},t.prototype.broadcastRect=function(){var t=this.contentRect_;return this.broadcastWidth=t.width,this.broadcastHeight=t.height,t},t}(),C=function(){function t(t,e){var n=E(e);h(this,{target:t,contentRect:n})}return t}(),T=function(){function t(t,e,r){if(this.activeObservations_=[],this.observations_=new n,"function"!==typeof t)throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=t,this.controller_=e,this.callbackCtx_=r}return t.prototype.observe=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!==typeof Element&&Element instanceof Object){if(!(t instanceof p(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var e=this.observations_;e.has(t)||(e.set(t,new O(t)),this.controller_.addObserver(this),this.controller_.refresh())}},t.prototype.unobserve=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!==typeof Element&&Element instanceof Object){if(!(t instanceof p(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var e=this.observations_;e.has(t)&&(e["delete"](t),e.size||this.controller_.removeObserver(this))}},t.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},t.prototype.gatherActive=function(){var t=this;this.clearActive(),this.observations_.forEach((function(e){e.isActive()&&t.activeObservations_.push(e)}))},t.prototype.broadcastActive=function(){if(this.hasActive()){var t=this.callbackCtx_,e=this.activeObservations_.map((function(t){return new C(t.target,t.broadcastRect())}));this.callback_.call(t,e,t),this.clearActive()}},t.prototype.clearActive=function(){this.activeObservations_.splice(0)},t.prototype.hasActive=function(){return this.activeObservations_.length>0},t}(),A="undefined"!==typeof WeakMap?new WeakMap:new n,k=function(){function t(e){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var n=f.getInstance(),r=new T(e,n,this);A.set(this,r)}return t}();["observe","unobserve","disconnect"].forEach((function(t){k.prototype[t]=function(){var e;return(e=A.get(this))[t].apply(e,arguments)}}));var M=function(){return"undefined"!==typeof i.ResizeObserver?i.ResizeObserver:k}();e["a"]=M}).call(this,n("IyRk"))},beRK:function(t,e,n){"use strict";function r(){var t=n("q1tI");return r=function(){return t},t}Object.defineProperty(e,"__esModule",{value:!0}),e.getDemoUrl=e.getDemoRouteName=e["default"]=void 0;var i=o(n("nLCz"));function o(t){return t&&t.__esModule?t:{default:t}}function a(t,e){return f(t)||l(t,e)||u(t,e)||s()}function s(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function u(t,e){if(t){if("string"===typeof t)return c(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(t,e):void 0}}function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function l(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o,a,s=[],u=!0,c=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);u=!0);}catch(l){c=!0,i=l}finally{try{if(!u&&null!=n["return"]&&(a=n["return"](),Object(a)!==a))return}finally{if(c)throw i}}return s}}function f(t){if(Array.isArray(t))return t}function h(){return"BASEMENT"===Object({NODE_ENV:"production"}).PLATFORM_TYPE}var p=function(){return h()?"_demos":"~demos"};e.getDemoRouteName=p;var d=function(t,e){var n,r=window,i=r.location,o=i.href,s=i.origin,u=o.split(/#\//),c=a(u,2),l=c[0],f=c[1],h="string"===typeof f;return[h?"".concat(l,"#"):s,"".concat((null===(n=window)||void 0===n?void 0:n.routerBase)||"","/").replace(/\/\/$/,"/"),p(),"/",t,"".concat(e?".html":"")].join("")};e.getDemoUrl=d;var v=function(t){var e=(0,r().useContext)(i["default"]),n=e.config,o=(0,r().useState)(""),s=a(o,2),u=s[0],c=s[1];return(0,r().useEffect)((function(){c(t?d(t,n.exportStatic&&n.exportStatic.htmlSuffix):null)}),[t,n]),u};e["default"]=v},bfL6:function(t,e,n){var r=n("mGKP");function i(t,e){var n="undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=r(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var i=0,o=function(){};return{s:o,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return s=t.done,t},e:function(t){u=!0,a=t},f:function(){try{s||null==n["return"]||n["return"]()}finally{if(u)throw a}}}}t.exports=i,t.exports.__esModule=!0,t.exports["default"]=t.exports},bpoo:function(t,e){window._iconfont_svg_string_3580659='<svg><symbol id="l7-icon-area1" viewBox="0 0 1024 1024"><path d="M796.444444 56.888889a113.777778 113.777778 0 0 1 43.064889 219.136l38.798223 466.261333a113.777778 113.777778 0 1 1-133.518223 145.237334H279.210667a113.777778 113.777778 0 1 1-60.302223-137.272889L697.856 227.555556A113.777778 113.777778 0 0 1 796.444444 56.888889z m56.888889 750.933333a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z m-682.666666 0a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z m577.592889-534.072889L269.198222 796.444444c4.152889 7.168 7.509333 14.791111 10.012445 22.812445h465.578666a114.119111 114.119111 0 0 1 65.479111-71.224889l-38.798222-466.261333a112.924444 112.924444 0 0 1-23.210666-7.964445zM796.444444 125.155556a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z"  ></path></symbol><symbol id="l7-icon-area" viewBox="0 0 1024 1024"><path d="M796.444444 56.888889a113.777778 113.777778 0 0 1 43.008 219.136l38.855112 466.261333a113.777778 113.777778 0 0 1-16.497778 224.540445L853.333333 967.111111a113.777778 113.777778 0 0 1-108.544-79.644444H279.210667a113.834667 113.834667 0 0 1-100.067556 79.36L170.666667 967.111111a113.777778 113.777778 0 0 1-17.066667-226.304l30.492444-351.175111a113.777778 113.777778 0 0 1 34.986667-218.680889L227.555556 170.666667a113.777778 113.777778 0 0 1 99.896888 59.221333l355.84-71.395556a113.777778 113.777778 0 0 1 104.675556-101.262222L796.444444 56.888889z m56.888889 750.933333a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z m-682.666666 0a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z m526.051555-582.314666L340.650667 296.903111a113.891556 113.891556 0 0 1-88.462223 98.645333l-30.947555 355.84c27.477333 13.653333 48.64 38.115556 58.026667 67.754667h465.521777a114.119111 114.119111 0 0 1 65.536-71.168l-38.855111-466.261333a113.948444 113.948444 0 0 1-74.752-56.206222zM227.555556 238.933333a45.511111 45.511111 0 1 0 0 91.022223 45.511111 45.511111 0 0 0 0-91.022223z m568.888888-113.777777a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z"  ></path></symbol><symbol id="l7-icon-delete" viewBox="0 0 1024 1024"><path d="M705.422222 85.333333a34.133333 34.133333 0 0 1 34.133334 34.133334V227.555556h136.533333a34.133333 34.133333 0 0 1 0 68.266666h-25.543111l-24.348445 610.076445a34.133333 34.133333 0 0 1-34.133333 32.768H231.936a34.133333 34.133333 0 0 1-34.076444-32.768L173.340444 295.822222H147.911111a34.133333 34.133333 0 1 1 0-68.266666H284.444444V119.466667a34.133333 34.133333 0 0 1 34.133334-34.133334h386.844444zM241.720889 295.822222l22.983111 574.577778h494.535111l23.04-574.577778H241.720889zM671.288889 153.6H352.711111V227.555556h318.577778V153.6z"  ></path></symbol><symbol id="l7-icon-color" viewBox="0 0 1024 1024"><path d="M512 56.888889c9.841778 0 19.626667 0.341333 29.354667 0.910222 69.176889 4.437333 119.068444 62.577778 124.302222 131.072l0.455111 9.386667c0.739556 44.600889 15.303111 84.935111 44.999111 114.631111 27.022222 27.022222 62.805333 41.528889 102.570667 44.430222l12.060444 0.568889c72.476444 1.194667 135.793778 52.451556 140.458667 124.757333 1.137778 18.261333 1.251556 36.807111 0.170667 55.637334-13.198222 233.585778-211.399111 424.220444-445.326223 428.714666L512 967.111111a455.111111 455.111111 0 0 1-455.054222-464.156444c4.551111-233.927111 195.185778-432.128 428.771555-445.326223C494.535111 57.116444 503.296 56.888889 512 56.888889z m0 68.266667a385.706667 385.706667 0 0 0-22.414222 0.625777C291.726222 136.988444 129.080889 305.948444 125.155556 504.263111c-4.152889 212.366222 163.100444 387.185778 372.508444 394.353778l13.425778 0.227555 8.533333-0.113777c198.371556-3.811556 367.331556-166.456889 378.538667-364.373334a396.174222 396.174222 0 0 0-0.170667-47.331555c-1.991111-31.232-29.127111-56.604444-67.128889-60.472889l-8.248889-0.455111-14.051555-0.682667c-56.547556-4.209778-107.406222-25.884444-145.806222-64.284444-38.855111-38.798222-60.416-90.225778-64.284445-145.749334l-0.910222-21.333333c-2.901333-38.001778-28.785778-66.048-60.302222-68.096A433.891556 433.891556 0 0 0 512 125.155556zM438.044444 682.666667a68.266667 68.266667 0 1 1 0 136.533333 68.266667 68.266667 0 0 1 0-136.533333z m-170.666666-227.555556a68.266667 68.266667 0 1 1 0 136.533333 68.266667 68.266667 0 0 1 0-136.533333z m142.222222-227.555555a68.266667 68.266667 0 1 1 0 136.533333 68.266667 68.266667 0 0 1 0-136.533333z"  ></path></symbol><symbol id="l7-icon-base-map" viewBox="0 0 1024 1024"><path d="M923.761778 115.029333A34.133333 34.133333 0 0 1 967.111111 147.911111v624.128a34.133333 34.133333 0 0 1-22.186667 32.028445l-278.755555 103.992888a34.133333 34.133333 0 0 1-23.665778 0.056889L381.724444 812.714667a34.133333 34.133333 0 0 0-23.665777 0.113777L102.968889 908.060444a34.133333 34.133333 0 0 1-45.738667-26.965333L56.888889 876.088889V251.960889a34.133333 34.133333 0 0 1 22.186667-32.028445l278.755555-103.992888a34.133333 34.133333 0 0 1 20.992-0.967112l266.183111 72.988445a34.133333 34.133333 0 0 0 18.204445 0zM403.911111 192.625778v555.576889l216.177778 79.075555V251.960889l-216.177778-59.335111z m-68.266667 4.380444L125.155556 275.569778v551.310222l210.432-78.506667V197.006222zM898.844444 192.853333l-210.545777 58.936889v575.089778l210.545777-78.563556V192.853333z"  ></path></symbol><symbol id="l7-icon-dot" viewBox="0 0 1024 1024"><path d="M341.333333 739.555556a113.777778 113.777778 0 0 1 8.533334 227.271111L341.333333 967.111111a113.777778 113.777778 0 0 1-8.533333-227.271111L341.333333 739.555556z m0 68.266666a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222zM910.222222 341.333333a113.777778 113.777778 0 0 1 8.533334 227.271111L910.222222 568.888889a113.777778 113.777778 0 0 1-8.533333-227.271111L910.222222 341.333333z m0 68.266667a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222zM227.555556 56.888889a113.777778 113.777778 0 0 1 8.533333 227.271111L227.555556 284.444444a113.777778 113.777778 0 0 1-8.533334-227.271111L227.555556 56.888889z m0 68.266667a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z"  ></path></symbol><symbol id="l7-icon-display" viewBox="0 0 1024 1024"><path d="M512 170.666667c284.444444 0 455.111111 227.555556 455.111111 341.333333s-170.666667 341.333333-455.111111 341.333333-455.111111-227.555556-455.111111-341.333333 170.666667-341.333333 455.111111-341.333333z m0 68.266666C303.729778 238.933333 125.155556 401.237333 125.155556 512c0 110.762667 178.574222 273.066667 386.844444 273.066667s386.844444-162.304 386.844444-273.066667c0-110.762667-178.574222-273.066667-386.844444-273.066667zM512 341.333333a170.666667 170.666667 0 1 1 0 341.333334 170.666667 170.666667 0 0 1 0-341.333334z m0 68.266667a102.4 102.4 0 1 0 0 204.8 102.4 102.4 0 0 0 0-204.8z"  ></path></symbol><symbol id="l7-icon-enlarge" viewBox="0 0 1024 1024"><path d="M546.133333 147.911111l-0.056889 329.955556H876.088889a34.133333 34.133333 0 0 1 0 68.266666H546.076444v329.955556a34.133333 34.133333 0 0 1-68.266666 0V546.133333H147.911111a34.133333 34.133333 0 1 1 0-68.266666h329.898667V147.911111a34.133333 34.133333 0 0 1 68.266666 0z"  ></path></symbol><symbol id="l7-icon-export-picture" viewBox="0 0 1024 1024"><path d="M883.873684 161.684211a32.336842 32.336842 0 0 1 32.336842 32.336842v582.063158a32.336842 32.336842 0 0 1-32.336842 32.336842H86.231579a32.336842 32.336842 0 0 1-32.336842-32.336842V194.021053a32.336842 32.336842 0 0 1 32.336842-32.336842h797.642105z m-32.336842 64.673684H118.568421v517.389473h170.792421a32.175158 32.175158 0 0 1 0.431158-0.646736l3.772632-4.473264 330.320842-330.374736a32.336842 32.336842 0 0 1 38.588631-5.389474l4.473263 3.018105 184.589474 147.725474V226.357895z m-202.428631 248.131368L379.850105 743.747368H851.536842v-107.304421l-202.428631-161.953684zM323.368421 323.368421a107.789474 107.789474 0 1 1 0 215.578947 107.789474 107.789474 0 0 1 0-215.578947z m0 64.673684a43.115789 43.115789 0 1 0 0 86.231579 43.115789 43.115789 0 0 0 0-86.231579z"  ></path></symbol><symbol id="l7-icon-exit-fullscreen" viewBox="0 0 1024 1024"><path d="M841.955556 591.644444a34.133333 34.133333 0 0 1 5.518222 67.811556l-5.518222 0.455111h-133.745778l192 192.056889a34.133333 34.133333 0 0 1-38.343111 55.182222l-5.176889-2.958222-4.721778-3.982222L659.911111 708.266667V841.955556a34.133333 34.133333 0 0 1-28.615111 33.678222L625.777778 876.088889a34.133333 34.133333 0 0 1-33.678222-28.615111L591.644444 841.955556V625.777778a34.133333 34.133333 0 0 1 28.615112-33.678222L625.777778 591.644444h216.177778z m-443.733334 0a34.133333 34.133333 0 0 1 33.678222 28.615112L432.355556 625.777778v216.177778a34.133333 34.133333 0 0 1-67.811556 5.518222L364.088889 841.955556v-133.745778l-192.056889 192a34.133333 34.133333 0 0 1-52.224-43.52l3.982222-4.721778L315.847111 659.911111H182.044444a34.133333 34.133333 0 0 1-33.678222-28.615111L147.911111 625.777778a34.133333 34.133333 0 0 1 28.615111-33.678222L182.044444 591.644444H398.222222zM167.310222 119.808l4.721778 3.982222L364.088889 315.847111V182.044444a34.133333 34.133333 0 0 1 28.615111-33.678222L398.222222 147.911111a34.133333 34.133333 0 0 1 33.678222 28.615111L432.355556 182.044444V398.222222a34.133333 34.133333 0 0 1-28.615112 33.678222L398.222222 432.355556H182.044444a34.133333 34.133333 0 0 1-5.518222-67.811556L182.044444 364.088889h133.802667L123.790222 172.032a34.133333 34.133333 0 0 1 43.52-52.224z m732.899556 3.982222a34.133333 34.133333 0 0 1 3.982222 43.52l-3.982222 4.721778L708.266667 364.088889H841.955556a34.133333 34.133333 0 0 1 33.678222 28.615111L876.088889 398.222222a34.133333 34.133333 0 0 1-28.615111 33.678222L841.955556 432.355556H625.777778a34.133333 34.133333 0 0 1-33.678222-28.615112L591.644444 398.222222V182.044444a34.133333 34.133333 0 0 1 67.811556-5.518222l0.455111 5.518222v133.802667l192.056889-192.056889a34.133333 34.133333 0 0 1 48.241778 0z"  ></path></symbol><symbol id="l7-icon-line" viewBox="0 0 1024 1024"><path d="M853.333333 56.888889a113.777778 113.777778 0 0 1 8.533334 227.271111L853.333333 284.444444c-19.000889 0-36.864-4.664889-52.622222-12.856888l-529.123555 529.066666a113.777778 113.777778 0 0 1-92.387556 166.115556L170.666667 967.111111a113.777778 113.777778 0 0 1-8.533334-227.271111L170.666667 739.555556c19.000889 0 36.864 4.664889 52.622222 12.856888l529.123555-529.066666a113.777778 113.777778 0 0 1 92.387556-166.115556L853.333333 56.888889zM170.666667 807.822222a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z m682.666666-682.666666a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z"  ></path></symbol><symbol id="l7-icon-layer" viewBox="0 0 1024 1024"><path d="M767.089778 625.777778l180.167111 82.773333a34.133333 34.133333 0 0 1 4.892444 59.278222l-4.892444 2.730667-420.977778 193.422222a34.133333 34.133333 0 0 1-22.983111 1.991111l-5.575111-1.991111-420.977778-193.422222a34.133333 34.133333 0 0 1-4.892444-59.278222l4.892444-2.730667L256.853333 625.777778l81.749334 37.546666L172.771556 739.555556 512 895.374222 851.171556 739.555556l-165.831112-76.231112 81.749334-37.546666z m0-227.555556l180.167111 82.773334a34.133333 34.133333 0 0 1 4.892444 59.278222l-4.892444 2.730666-420.977778 193.422223a34.133333 34.133333 0 0 1-22.983111 1.991111l-5.575111-1.991111-420.977778-193.422223a34.133333 34.133333 0 0 1-4.892444-59.278222l4.892444-2.730666L256.853333 398.222222l81.749334 37.546667-165.831111 76.174222L512 667.818667l339.171556-155.875556-165.831112-76.174222L767.089778 398.222222zM497.720889 60.017778a34.133333 34.133333 0 0 1 28.558222 0l420.977778 193.422222a34.133333 34.133333 0 0 1 0 62.008889l-420.977778 193.422222a34.133333 34.133333 0 0 1-28.558222 0l-420.977778-193.422222a34.133333 34.133333 0 0 1 0-62.008889zM512 128.568889L172.771556 284.387556 512 440.263111l339.171556-155.875555L512 128.568889z"  ></path></symbol><symbol id="l7-icon-narrow" viewBox="0 0 1024 1024"><path d="M910.222222 512a34.133333 34.133333 0 0 1-34.133333 34.133333H147.911111a34.133333 34.133333 0 1 1 0-68.266666h728.177778a34.133333 34.133333 0 0 1 34.133333 34.133333z"  ></path></symbol><symbol id="l7-icon-fullscreen" viewBox="0 0 1024 1024"><path d="M645.176889 597.674667l4.721778 3.982222L841.955556 793.6l0.056888-133.688889a34.133333 34.133333 0 0 1 28.615112-33.678222L876.088889 625.777778a34.133333 34.133333 0 0 1 33.678222 28.615111L910.222222 659.911111v216.177778a34.133333 34.133333 0 0 1-28.615111 33.678222L876.088889 910.222222h-216.177778a34.133333 34.133333 0 0 1-5.518222-67.811555l5.518222-0.455111h133.745778l-192-192.056889a34.133333 34.133333 0 0 1 43.52-52.224z m-222.833778 3.982222a34.133333 34.133333 0 0 1 3.982222 43.52l-3.982222 4.721778L230.286222 841.955556H364.088889a34.133333 34.133333 0 0 1 33.678222 28.615111L398.222222 876.088889a34.133333 34.133333 0 0 1-28.615111 33.678222L364.088889 910.222222H147.911111a34.133333 34.133333 0 0 1-33.678222-28.615111L113.777778 876.088889v-216.177778a34.133333 34.133333 0 0 1 67.811555-5.518222l0.455111 5.518222-0.056888 133.745778 192.113777-192a34.133333 34.133333 0 0 1 48.241778 0zM364.088889 113.777778a34.133333 34.133333 0 0 1 5.518222 67.811555L364.088889 182.044444H230.343111l192 192.056889a34.133333 34.133333 0 0 1-43.52 52.224l-4.721778-3.982222-192.113777-192.056889L182.044444 364.088889a34.133333 34.133333 0 0 1-28.615111 33.678222L147.911111 398.222222a34.133333 34.133333 0 0 1-33.678222-28.615111L113.777778 364.088889V147.911111a34.133333 34.133333 0 0 1 28.615111-33.678222L147.911111 113.777778h216.177778z m512 0a34.133333 34.133333 0 0 1 33.678222 28.615111L910.222222 147.911111v216.177778a34.133333 34.133333 0 0 1-67.811555 5.518222L841.955556 364.088889l-0.056889-133.745778-192 192a34.133333 34.133333 0 0 1-52.224-43.52l3.982222-4.721778L793.6 182.044444H659.911111a34.133333 34.133333 0 0 1-33.678222-28.615111L625.777778 147.911111a34.133333 34.133333 0 0 1 28.615111-33.678222L659.911111 113.777778h216.177778z"  ></path></symbol><symbol id="l7-icon-hide" viewBox="0 0 1024 1024"><path d="M875.52 87.836444a34.133333 34.133333 0 0 1 7.281778 43.121778l-3.527111 5.006222-682.666667 796.444445a34.133333 34.133333 0 0 1-55.409778-39.367111l3.527111-5.006222 97.166223-113.379556C123.164444 697.969778 56.888889 582.940444 56.888889 512c0-113.777778 170.666667-341.333333 455.111111-341.333333a496.64 496.64 0 0 1 208.952889 45.112889l106.439111-124.188445a34.133333 34.133333 0 0 1 48.128-3.754667z m-38.684444 202.524445C921.031111 362.951111 967.111111 452.835556 967.111111 512c0 113.777778-170.666667 341.333333-455.111111 341.333333-50.631111 0-97.678222-7.224889-140.8-19.740444l50.232889-58.595556A417.393778 417.393778 0 0 0 512 785.066667c208.270222 0 386.844444-162.304 386.844444-273.066667 0-52.849778-40.675556-117.418667-105.813333-170.496l43.804445-51.2zM512 238.933333C303.729778 238.933333 125.155556 401.237333 125.155556 512c0 66.787556 64.853333 152.291556 162.133333 209.692444L377.173333 616.675556a170.666667 170.666667 0 0 1 217.713778-253.895112l78.620445-91.704888A432.924444 432.924444 0 0 0 512 238.933333z m166.684444 236.088889a170.666667 170.666667 0 0 1-177.664 207.303111l177.607112-207.303111zM512 409.6a102.4 102.4 0 0 0-88.746667 153.486222L548.864 416.426667A102.172444 102.172444 0 0 0 512 409.6z"  ></path></symbol><symbol id="l7-icon-rectangle" viewBox="0 0 1024 1024"><path d="M170.666667 56.888889a113.777778 113.777778 0 0 1 108.544 79.644444H853.333333a34.133333 34.133333 0 0 1 33.678223 28.615111L887.466667 170.666667v574.122666a113.777778 113.777778 0 1 1-142.677334 142.734223L170.666667 887.466667a34.133333 34.133333 0 0 1-33.678223-28.615111L136.533333 853.333333V279.210667A113.777778 113.777778 0 0 1 170.666667 56.888889z m682.666666 750.933333a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z m-34.133333-603.022222H279.210667a114.062222 114.062222 0 0 1-74.353778 74.410667L204.8 819.2h539.989333a114.062222 114.062222 0 0 1 74.410667-74.410667V204.8zM170.666667 125.155556a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z"  ></path></symbol><symbol id="l7-icon-ranging" viewBox="0 0 1024 1024"><path d="M723.171556 50.403556l250.424888 250.424888a31.061333 31.061333 0 0 1 0 43.918223L344.746667 973.596444a31.061333 31.061333 0 0 1-43.918223 0L50.403556 723.171556a31.061333 31.061333 0 0 1 0-43.918223L679.253333 50.403556a31.061333 31.061333 0 0 1 43.918223 0z m-21.959112 74.524444l-39.765333 39.822222 98.986667 98.872889a34.133333 34.133333 0 0 1-44.088889 51.882667l-4.209778-3.640889-98.929778-98.929778-63.886222 63.886222 62.179556 62.122667a34.133333 34.133333 0 0 1-44.088889 51.882667L563.2 387.242667 501.077333 325.063111 437.191111 388.949333l98.986667 98.929778a34.133333 34.133333 0 0 1-44.088889 51.882667l-4.209778-3.640889-98.929778-98.929778-63.886222 63.886222L387.242667 563.2a34.133333 34.133333 0 0 1-44.088889 51.882667l-4.209778-3.584-62.122667-62.179556-63.886222 63.886222 98.986667 98.929778a34.133333 34.133333 0 0 1-44.088889 51.882667l-4.209778-3.640889-98.929778-98.929778-39.765333 39.822222 197.802667 197.745778 576.284444-576.284444-197.802667-197.745778z"  ></path></symbol><symbol id="l7-icon-reposition" viewBox="0 0 1024 1024"><path d="M512 56.888889a34.133333 34.133333 0 0 1 34.133333 34.133333v24.177778A398.336 398.336 0 0 1 908.856889 477.866667h24.177778a34.133333 34.133333 0 0 1 0 68.266666h-24.177778A398.336 398.336 0 0 1 546.133333 908.856889L546.133333 932.977778a34.133333 34.133333 0 0 1-68.266666 0v-24.177778A398.336 398.336 0 0 1 115.2 546.133333L91.022222 546.133333a34.133333 34.133333 0 1 1 0-68.266666h24.177778A398.336 398.336 0 0 1 477.866667 115.2V91.022222A34.133333 34.133333 0 0 1 512 56.888889z m34.190222 126.862222L546.133333 193.422222a34.133333 34.133333 0 1 1-68.266666 0v-9.671111A330.069333 330.069333 0 0 0 183.751111 477.866667h9.671111a34.133333 34.133333 0 1 1 0 68.266666l-9.671111 0.056889A330.069333 330.069333 0 0 0 477.866667 840.248889V830.577778a34.133333 34.133333 0 0 1 68.266666 0l0.056889 9.671111A330.069333 330.069333 0 0 0 840.248889 546.133333L830.577778 546.133333a34.133333 34.133333 0 0 1 0-68.266666h9.671111A330.069333 330.069333 0 0 0 546.133333 183.751111zM512 341.333333a170.666667 170.666667 0 1 1 0 341.333334 170.666667 170.666667 0 0 1 0-341.333334z m0 68.266667a102.4 102.4 0 1 0 0 204.8 102.4 102.4 0 0 0 0-204.8z"  ></path></symbol><symbol id="l7-icon-round" viewBox="0 0 1024 1024"><path d="M512 56.888889a455.111111 455.111111 0 0 1 391.395556 687.502222 113.777778 113.777778 0 0 1-159.061334 158.890667A455.111111 455.111111 0 0 1 120.604444 279.608889 113.777778 113.777778 0 0 1 279.608889 120.604444 452.835556 452.835556 0 0 1 512 56.888889z m0 68.266667a384.910222 384.910222 0 0 0-191.715556 50.744888A113.777778 113.777778 0 0 1 175.957333 320.284444a386.844444 386.844444 0 0 0 527.815111 527.758223 113.777778 113.777778 0 0 1 144.270223-144.440889A386.844444 386.844444 0 0 0 512 125.155556z m299.406222 640.739555a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222zM212.593778 167.082667a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z"  ></path></symbol><symbol id="l7-icon-guanbi" viewBox="0 0 1024 1024"><path d="M576 512l277.333333 277.333333-64 64-277.333333-277.333333L234.666667 853.333333 170.666667 789.333333l277.333333-277.333333L170.666667 234.666667 234.666667 170.666667l277.333333 277.333333L789.333333 170.666667 853.333333 234.666667 576 512z"  ></path></symbol></svg>',function(t){try{var e=function(){c||(c=!0,s())},n=function t(){try{u.documentElement.doScroll("left")}catch(r){return void setTimeout(t,50)}e()},r=(r=document.getElementsByTagName("script"))[r.length-1],i=r.getAttribute("data-injectcss");r=r.getAttribute("data-disable-injectsvg");if(!r){var o,a,s,u,c,l=function(t,e){e.parentNode.insertBefore(t,e)};if(i&&!t.__iconfont__svg__cssinject__){t.__iconfont__svg__cssinject__=!0;try{document.write("<style>.svgfont {display: inline-block;width: 1em;height: 1em;fill: currentColor;vertical-align: -0.1em;font-size:16px;}</style>")}catch(r){console&&console.log(r)}}o=function(){var e,n=document.createElement("div");n.innerHTML=t._iconfont_svg_string_3580659,(n=n.getElementsByTagName("svg")[0])&&(n.setAttribute("aria-hidden","true"),n.style.position="absolute",n.style.width=0,n.style.height=0,n.style.overflow="hidden",(e=document.body).firstChild?l(n,e.firstChild):e.appendChild(n))},document.addEventListener?~["complete","loaded","interactive"].indexOf(document.readyState)?setTimeout(o,0):(a=function(){document.removeEventListener("DOMContentLoaded",a,!1),o()},document.addEventListener("DOMContentLoaded",a,!1)):document.attachEvent&&(s=o,u=t.document,c=!1,n(),u.onreadystatechange=function(){"complete"==u.readyState&&(u.onreadystatechange=null,e())})}}catch(f){}}(window)},busE:function(t,e,n){var r=n("2oRo"),i=n("kRJp"),o=n("UTVS"),a=n("zk60"),s=n("iSVu"),u=n("afO8"),c=u.get,l=u.enforce,f=String(String).split("String");(t.exports=function(t,e,n,s){var u=!!s&&!!s.unsafe,c=!!s&&!!s.enumerable,h=!!s&&!!s.noTargetGet;"function"==typeof n&&("string"!=typeof e||o(n,"name")||i(n,"name",e),l(n).source=f.join("string"==typeof e?e:"")),t!==r?(u?!h&&t[e]&&(c=!0):delete t[e],c?t[e]=n:i(t,e,n)):c?t[e]=n:a(e,n)})(Function.prototype,"toString",(function(){return"function"==typeof this&&c(this).source||s(this)}))},"c+Xe":function(t,e,n){"use strict";n.d(e,"b",(function(){return o})),n.d(e,"a",(function(){return a})),n.d(e,"c",(function(){return s}));var r=n("U8pU"),i=n("TOwV");n("YrtM");function o(t,e){"function"===typeof t?t(e):"object"===Object(r["a"])(t)&&t&&"current"in t&&(t.current=e)}function a(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=e.filter((function(t){return t}));return r.length<=1?r[0]:function(t){e.forEach((function(e){o(e,t)}))}}function s(t){var e,n,r=Object(i["isMemo"])(t)?t.type.type:t.type;return!("function"===typeof r&&!(null===(e=r.prototype)||void 0===e?void 0:e.render))&&!("function"===typeof t&&!(null===(n=t.prototype)||void 0===n?void 0:n.render))}},c0go:function(t,e,n){"use strict";t.exports=function(t,e){for(var n={},r=Object.keys(t),i=Array.isArray(e),o=0;o<r.length;o++){var a=r[o],s=t[a];(i?-1!==e.indexOf(a):e(a,s,t))&&(n[a]=s)}return n}},c162:function(t,e,n){"use strict";var r=n("67WC"),i=n("gdVl"),o=r.aTypedArray,a=r.exportTypedArrayMethod;a("fill",(function(t){return i.apply(o(this),arguments)}))},c6wG:function(t,e,n){var r=n("dD9F"),i=n("sEf8"),o=n("mdPL"),a=o&&o.isTypedArray,s=a?i(a):r;t.exports=s},c9m3:function(t,e,n){var r=n("RNIs");r("flatMap")},cDf5:function(t,e){function n(e){return t.exports=n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t.exports.__esModule=!0,t.exports["default"]=t.exports,n(e)}t.exports=n,t.exports.__esModule=!0,t.exports["default"]=t.exports},cOPa:function(t,e,n){var r=n("I+eb"),i=Math.min,o=Math.max;r({target:"Math",stat:!0},{clamp:function(t,e,n){return i(n,o(e,t))}})},cSJO:function(t,e,n){"use strict";var r=this&&this.__spreadArray||function(t,e){for(var n=0,r=e.length,i=t.length;n<r;n++,i++)t[i]=e[n];return t};Object.defineProperty(e,"__esModule",{value:!0}),e.resolveInstance=void 0;var i=n("MON2"),o=n("FV85"),a=n("xfSm");function s(t,e,n){var r=e.filter((function(t){return null!==t.target&&t.target.type===o.TargetTypeEnum.ClassProperty})),i=r.map(n);return r.forEach((function(e,n){var r="";r=e.target.name.value();var o=i[n];t[r]=o})),t}function u(t,e){return new(t.bind.apply(t,r([void 0],e)))}function c(t,e){if(Reflect.hasMetadata(a.POST_CONSTRUCT,t)){var n=Reflect.getMetadata(a.POST_CONSTRUCT,t);try{e[n.value]()}catch(r){throw new Error(i.POST_CONSTRUCT_ERROR(t.name,r.message))}}}function l(t,e,n){var r=null;if(e.length>0){var i=e.filter((function(t){return null!==t.target&&t.target.type===o.TargetTypeEnum.ConstructorArgument})),a=i.map(n);r=u(t,a),r=s(r,e,n)}else r=new t;return c(t,r),r}e.resolveInstance=l},cVYH:function(t,e,n){var r=n("hh1v"),i=n("0rvr");t.exports=function(t,e,n){var o,a;return i&&"function"==typeof(o=e.constructor)&&o!==n&&r(a=o.prototype)&&a!==n.prototype&&i(t,a),t}},cZ5Q:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.injectable=void 0;var r=n("MON2"),i=n("xfSm");function o(){return function(t){if(Reflect.hasOwnMetadata(i.PARAM_TYPES,t))throw new Error(r.DUPLICATED_INJECTABLE_DECORATOR);var e=Reflect.getMetadata(i.DESIGN_PARAM_TYPES,t)||[];return Reflect.defineMetadata(i.PARAM_TYPES,e,t),t}}e.injectable=o},cfiF:function(t,e,n){"use strict";var r=n("I+eb"),i=n("xDBR"),o=n("Cg3G");r({target:"WeakMap",proto:!0,real:!0,forced:i},{deleteAll:function(){return o.apply(this,arguments)}})},"cq/+":function(t,e,n){var r=n("mc0g"),i=r();t.exports=i},ctDJ:function(t,e,n){"use strict";var r=n("I+eb"),i=n("xDBR"),o=n("0GbY"),a=n("glrk"),s=n("HAuM"),u=n("A2ZE"),c=n("SEBh"),l=n("WGBp"),f=n("ImZN");r({target:"Set",proto:!0,real:!0,forced:i},{map:function(t){var e=a(this),n=l(e),r=u(t,arguments.length>1?arguments[1]:void 0,3),i=new(c(e,o("Set"))),h=s(i.add);return f(n,(function(t){h.call(i,r(t,t,e))}),void 0,!1,!0),i}})},cvCv:function(t,e){function n(t){return function(){return t}}t.exports=n},cvf0:function(t,e,n){"use strict";var r=n("67WC").exportTypedArrayMethod,i=n("0Dky"),o=n("2oRo"),a=o.Uint8Array,s=a&&a.prototype||{},u=[].toString,c=[].join;i((function(){u.call({})}))&&(u=function(){return c.call(this)});var l=s.toString!=u;r("toString",u,l)},d6cI:function(t,e){var n=1/0,r=Math.abs,i=Math.pow,o=Math.floor,a=Math.log,s=Math.LN2,u=function(t,e,u){var c,l,f,h=new Array(u),p=8*u-e-1,d=(1<<p)-1,v=d>>1,g=23===e?i(2,-24)-i(2,-77):0,m=t<0||0===t&&1/t<0?1:0,y=0;for(t=r(t),t!=t||t===n?(l=t!=t?1:0,c=d):(c=o(a(t)/s),t*(f=i(2,-c))<1&&(c--,f*=2),t+=c+v>=1?g/f:g*i(2,1-v),t*f>=2&&(c++,f/=2),c+v>=d?(l=0,c=d):c+v>=1?(l=(t*f-1)*i(2,e),c+=v):(l=t*i(2,v-1)*i(2,e),c=0));e>=8;h[y++]=255&l,l/=256,e-=8);for(c=c<<e|l,p+=e;p>0;h[y++]=255&c,c/=256,p-=8);return h[--y]|=128*m,h},c=function(t,e){var r,o=t.length,a=8*o-e-1,s=(1<<a)-1,u=s>>1,c=a-7,l=o-1,f=t[l--],h=127&f;for(f>>=7;c>0;h=256*h+t[l],l--,c-=8);for(r=h&(1<<-c)-1,h>>=-c,c+=e;c>0;r=256*r+t[l],l--,c-=8);if(0===h)h=1-u;else{if(h===s)return r?NaN:f?-n:n;r+=i(2,e),h-=u}return(f?-1:1)*r*i(2,h-e)};t.exports={pack:u,unpack:c}},d9O0:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.id=void 0;var r=0;function i(){return r++}e.id=i},dA7e:function(t,e,n){t.exports.VectorTile=n("B93f"),t.exports.VectorTileFeature=n("HfwV"),t.exports.VectorTileLayer=n("DiGy")},"dBg+":function(t,e){e.f=Object.getOwnPropertySymbols},dD9F:function(t,e,n){var r=n("NykK"),i=n("shjB"),o=n("ExA7"),a="[object Arguments]",s="[object Array]",u="[object Boolean]",c="[object Date]",l="[object Error]",f="[object Function]",h="[object Map]",p="[object Number]",d="[object Object]",v="[object RegExp]",g="[object Set]",m="[object String]",y="[object WeakMap]",_="[object ArrayBuffer]",b="[object DataView]",x="[object Float32Array]",w="[object Float64Array]",E="[object Int8Array]",S="[object Int16Array]",O="[object Int32Array]",C="[object Uint8Array]",T="[object Uint8ClampedArray]",A="[object Uint16Array]",k="[object Uint32Array]",M={};function P(t){return o(t)&&i(t.length)&&!!M[r(t)]}M[x]=M[w]=M[E]=M[S]=M[O]=M[C]=M[T]=M[A]=M[k]=!0,M[a]=M[s]=M[_]=M[u]=M[b]=M[c]=M[l]=M[f]=M[h]=M[p]=M[d]=M[v]=M[g]=M[m]=M[y]=!1,t.exports=P},dEAq:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"AnchorLink",{enumerable:!0,get:function(){return a["default"]}}),Object.defineProperty(e,"Link",{enumerable:!0,get:function(){return i["default"]}}),Object.defineProperty(e,"NavLink",{enumerable:!0,get:function(){return o["default"]}}),Object.defineProperty(e,"context",{enumerable:!0,get:function(){return r["default"]}}),Object.defineProperty(e,"getDemoUrl",{enumerable:!0,get:function(){return p.getDemoUrl}}),Object.defineProperty(e,"useApiData",{enumerable:!0,get:function(){return d["default"]}}),Object.defineProperty(e,"useCodeSandbox",{enumerable:!0,get:function(){return f["default"]}}),Object.defineProperty(e,"useCopy",{enumerable:!0,get:function(){return u["default"]}}),Object.defineProperty(e,"useDemoUrl",{enumerable:!0,get:function(){return p["default"]}}),Object.defineProperty(e,"useLocaleProps",{enumerable:!0,get:function(){return h["default"]}}),Object.defineProperty(e,"useMotions",{enumerable:!0,get:function(){return l["default"]}}),Object.defineProperty(e,"usePrefersColor",{enumerable:!0,get:function(){return g["default"]}}),Object.defineProperty(e,"useRiddle",{enumerable:!0,get:function(){return c["default"]}}),Object.defineProperty(e,"useSearch",{enumerable:!0,get:function(){return s["default"]}}),Object.defineProperty(e,"useTSPlaygroundUrl",{enumerable:!0,get:function(){return v["default"]}});var r=_(n("nLCz")),i=_(n("zqmC")),o=_(n("6asN")),a=_(n("bYHP")),s=_(n("t/kZ")),u=_(n("dfPH")),c=_(n("o0kM")),l=_(n("zYLY")),f=_(n("r1Q5")),h=_(n("U/TZ")),p=y(n("beRK")),d=_(n("3QDa")),v=_(n("7sf/")),g=_(n("2N97"));function m(t){if("function"!==typeof WeakMap)return null;var e=new WeakMap,n=new WeakMap;return(m=function(t){return t?n:e})(t)}function y(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!==typeof t&&"function"!==typeof t)return{default:t};var n=m(e);if(n&&n.has(t))return n.get(t);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if("default"!==o&&Object.prototype.hasOwnProperty.call(t,o)){var a=i?Object.getOwnPropertyDescriptor(t,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=t[o]}return r["default"]=t,n&&n.set(t,r),r}function _(t){return t&&t.__esModule?t:{default:t}}},"dG/n":function(t,e,n){var r=n("Qo9l"),i=n("UTVS"),o=n("5Tg+"),a=n("m/L8").f;t.exports=function(t){var e=r.Symbol||(r.Symbol={});i(e,t)||a(e,t,{value:o.f(t)})}},dI71:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n("s4An");function i(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,Object(r["a"])(t,e)}},dNT4:function(t,e,n){"use strict";var r=n("I+eb"),i=n("xDBR"),o=n("glrk"),a=n("A2ZE"),s=n("WGBp"),u=n("ImZN");r({target:"Set",proto:!0,real:!0,forced:i},{every:function(t){var e=o(this),n=s(e),r=a(t,arguments.length>1?arguments[1]:void 0,3);return!u(n,(function(t){if(!r(t,t,e))return u.stop()}),void 0,!1,!0).stopped}})},dOgj:function(t,e,n){"use strict";var r=n("I+eb"),i=n("2oRo"),o=n("g6v/"),a=n("iqeF"),s=n("67WC"),u=n("Yhre"),c=n("GarU"),l=n("XGwC"),f=n("kRJp"),h=n("UMSQ"),p=n("CyXQ"),d=n("GC2F"),v=n("wE6v"),g=n("UTVS"),m=n("9d/t"),y=n("hh1v"),_=n("fHMY"),b=n("0rvr"),x=n("JBy8").f,w=n("oHi+"),E=n("tycR").forEach,S=n("JiZb"),O=n("m/L8"),C=n("Bs8V"),T=n("afO8"),A=n("cVYH"),k=T.get,M=T.set,P=O.f,R=C.f,j=Math.round,I=i.RangeError,L=u.ArrayBuffer,N=u.DataView,D=s.NATIVE_ARRAY_BUFFER_VIEWS,F=s.TYPED_ARRAY_TAG,B=s.TypedArray,z=s.TypedArrayPrototype,U=s.aTypedArrayConstructor,V=s.isTypedArray,H="BYTES_PER_ELEMENT",G="Wrong length",W=function(t,e){var n=0,r=e.length,i=new(U(t))(r);while(r>n)i[n]=e[n++];return i},Z=function(t,e){P(t,e,{get:function(){return k(this)[e]}})},Y=function(t){var e;return t instanceof L||"ArrayBuffer"==(e=m(t))||"SharedArrayBuffer"==e},X=function(t,e){return V(t)&&"symbol"!=typeof e&&e in t&&String(+e)==String(e)},q=function(t,e){return X(t,e=v(e,!0))?l(2,t[e]):R(t,e)},K=function(t,e,n){return!(X(t,e=v(e,!0))&&y(n)&&g(n,"value"))||g(n,"get")||g(n,"set")||n.configurable||g(n,"writable")&&!n.writable||g(n,"enumerable")&&!n.enumerable?P(t,e,n):(t[e]=n.value,t)};o?(D||(C.f=q,O.f=K,Z(z,"buffer"),Z(z,"byteOffset"),Z(z,"byteLength"),Z(z,"length")),r({target:"Object",stat:!0,forced:!D},{getOwnPropertyDescriptor:q,defineProperty:K}),t.exports=function(t,e,n){var o=t.match(/\d+$/)[0]/8,s=t+(n?"Clamped":"")+"Array",u="get"+t,l="set"+t,v=i[s],g=v,m=g&&g.prototype,O={},C=function(t,e){var n=k(t);return n.view[u](e*o+n.byteOffset,!0)},T=function(t,e,r){var i=k(t);n&&(r=(r=j(r))<0?0:r>255?255:255&r),i.view[l](e*o+i.byteOffset,r,!0)},R=function(t,e){P(t,e,{get:function(){return C(this,e)},set:function(t){return T(this,e,t)},enumerable:!0})};D?a&&(g=e((function(t,e,n,r){return c(t,g,s),A(function(){return y(e)?Y(e)?void 0!==r?new v(e,d(n,o),r):void 0!==n?new v(e,d(n,o)):new v(e):V(e)?W(g,e):w.call(g,e):new v(p(e))}(),t,g)})),b&&b(g,B),E(x(v),(function(t){t in g||f(g,t,v[t])})),g.prototype=m):(g=e((function(t,e,n,r){c(t,g,s);var i,a,u,l=0,f=0;if(y(e)){if(!Y(e))return V(e)?W(g,e):w.call(g,e);i=e,f=d(n,o);var v=e.byteLength;if(void 0===r){if(v%o)throw I(G);if(a=v-f,a<0)throw I(G)}else if(a=h(r)*o,a+f>v)throw I(G);u=a/o}else u=p(e),a=u*o,i=new L(a);M(t,{buffer:i,byteOffset:f,byteLength:a,length:u,view:new N(i)});while(l<u)R(t,l++)})),b&&b(g,B),m=g.prototype=_(z)),m.constructor!==g&&f(m,"constructor",g),F&&f(m,F,s),O[s]=g,r({global:!0,forced:g!=v,sham:!D},O),H in g||f(g,H,o),H in m||f(m,H,o),S(s)}):t.exports=function(){}},dTAl:function(t,e,n){var r=n("GoyQ"),i=Object.create,o=function(){function t(){}return function(e){if(!r(e))return{};if(i)return i(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}();t.exports=o},dX1H:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Target=void 0;var r=n("xfSm"),i=n("d9O0"),o=n("GXnB"),a=n("zxMA"),s=function(){function t(t,e,n,s){this.id=i.id(),this.type=t,this.serviceIdentifier=n,this.name=new a.QueryableString(e||""),this.metadata=new Array;var u=null;"string"===typeof s?u=new o.Metadata(r.NAMED_TAG,s):s instanceof o.Metadata&&(u=s),null!==u&&this.metadata.push(u)}return t.prototype.hasTag=function(t){for(var e=0,n=this.metadata;e<n.length;e++){var r=n[e];if(r.key===t)return!0}return!1},t.prototype.isArray=function(){return this.hasTag(r.MULTI_INJECT_TAG)},t.prototype.matchesArray=function(t){return this.matchesTag(r.MULTI_INJECT_TAG)(t)},t.prototype.isNamed=function(){return this.hasTag(r.NAMED_TAG)},t.prototype.isTagged=function(){return this.metadata.some((function(t){return r.NON_CUSTOM_TAG_KEYS.every((function(e){return t.key!==e}))}))},t.prototype.isOptional=function(){return this.matchesTag(r.OPTIONAL_TAG)(!0)},t.prototype.getNamedTag=function(){return this.isNamed()?this.metadata.filter((function(t){return t.key===r.NAMED_TAG}))[0]:null},t.prototype.getCustomTags=function(){return this.isTagged()?this.metadata.filter((function(t){return r.NON_CUSTOM_TAG_KEYS.every((function(e){return t.key!==e}))})):null},t.prototype.matchesNamedTag=function(t){return this.matchesTag(r.NAMED_TAG)(t)},t.prototype.matchesTag=function(t){var e=this;return function(n){for(var r=0,i=e.metadata;r<i.length;r++){var o=i[r];if(o.key===t&&o.value===n)return!0}return!1}},t}();e.Target=s},dfPH:function(t,e,n){"use strict";function r(){var t=n("q1tI");return r=function(){return t},t}function i(){var t=o(n("WWur"));return i=function(){return t},t}function o(t){return t&&t.__esModule?t:{default:t}}function a(t,e){return f(t)||l(t,e)||u(t,e)||s()}function s(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function u(t,e){if(t){if("string"===typeof t)return c(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(t,e):void 0}}function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function l(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o,a,s=[],u=!0,c=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);u=!0);}catch(l){c=!0,i=l}finally{try{if(!u&&null!=n["return"]&&(a=n["return"](),Object(a)!==a))return}finally{if(c)throw i}}return s}}function f(t){if(Array.isArray(t))return t}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=void 0;var h=function(){var t=(0,r().useState)(),e=a(t,2),n=e[0],o=e[1],s=(0,r().useState)("ready"),u=a(s,2),c=u[0],l=u[1],f=(0,r().useCallback)((function(t){(0,i()["default"])(t),l("copied"),clearTimeout(n),o(setTimeout((function(){l("ready")}),2e3))}),[]);return[f,c]};e["default"]=h},dm2S:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n("ODXe"),i=n("q1tI");function o(t){var e=i["useRef"](!1),n=i["useState"](t),o=Object(r["a"])(n,2),a=o[0],s=o[1];function u(t,n){n&&e.current||s(t)}return i["useEffect"]((function(){return e.current=!1,function(){e.current=!0}}),[]),[a,u]}},dmwd:function(t,e){function n(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}t.exports=n,t.exports.__esModule=!0,t.exports["default"]=t.exports},doU7:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BindingCount=void 0;var r={MultipleBindingsAvailable:2,NoBindingsAvailable:0,OnlyOneBindingAvailable:1};e.BindingCount=r},dxzI:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AsyncContainerModule=e.ContainerModule=void 0;var r=n("d9O0"),i=function(){function t(t){this.id=r.id(),this.registry=t}return t}();e.ContainerModule=i;var o=function(){function t(t){this.id=r.id(),this.registry=t}return t}();e.AsyncContainerModule=o},e4Nc:function(t,e,n){var r=n("fGT3"),i=n("k+1r"),o=n("JHgL"),a=n("pSRY"),s=n("H8j4");function u(t){var e=-1,n=null==t?0:t.length;this.clear();while(++e<n){var r=t[e];this.set(r[0],r[1])}}u.prototype.clear=r,u.prototype["delete"]=i,u.prototype.get=o,u.prototype.has=a,u.prototype.set=s,t.exports=u},e5cp:function(t,e,n){var r=n("fmRc"),i=n("or5M"),o=n("HDyB"),a=n("seXi"),s=n("QqLw"),u=n("Z0cm"),c=n("DSRE"),l=n("c6wG"),f=1,h="[object Arguments]",p="[object Array]",d="[object Object]",v=Object.prototype,g=v.hasOwnProperty;function m(t,e,n,v,m,y){var _=u(t),b=u(e),x=_?p:s(t),w=b?p:s(e);x=x==h?d:x,w=w==h?d:w;var E=x==d,S=w==d,O=x==w;if(O&&c(t)){if(!c(e))return!1;_=!0,E=!1}if(O&&!E)return y||(y=new r),_||l(t)?i(t,e,n,v,m,y):o(t,e,x,n,v,m,y);if(!(n&f)){var C=E&&g.call(t,"__wrapped__"),T=S&&g.call(e,"__wrapped__");if(C||T){var A=C?t.value():t,k=T?e.value():e;return y||(y=new r),m(A,k,n,v,y)}}return!!O&&(y||(y=new r),a(t,e,n,v,m,y))}t.exports=m},e9O8:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getParameters=void 0;var r=n("6xEa");function i(t){return r.compressToBase64(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}function o(t){return i(JSON.stringify(t))}e.getParameters=o},eBV8:function(t,e,n){"use strict";n.r(e);var r=n("q1tI"),i=n.n(r),o=n("dEAq"),a=n("Zxc8"),s=i.a.memo((t=>{var e=t.demos,n=e["docs-maptalk"].component;return i.a.createElement(i.a.Fragment,null,i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"markdown"},i.a.createElement("h3",{id:"use-in-l7"},i.a.createElement(o["AnchorLink"],{to:"#use-in-l7","aria-hidden":"true",tabIndex:-1},i.a.createElement("span",{className:"icon icon-link"})),"use in L7")),i.a.createElement(a["default"],e["docs-maptalk"].previewerProps,i.a.createElement(n,null))))}));e["default"]=t=>{var e=i.a.useContext(o["context"]),n=e.demos;return i.a.useEffect((()=>{var e;null!==t&&void 0!==t&&null!==(e=t.location)&&void 0!==e&&e.hash&&o["AnchorLink"].scrollToAnchor(decodeURIComponent(t.location.hash.slice(1)))}),[]),i.a.createElement(s,{demos:n})}},"eDl+":function(t,e){t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},eDxR:function(t,e,n){var r=n("Tskq"),i=n("ENF9"),o=n("VpIT"),a=o("metadata"),s=a.store||(a.store=new i),u=function(t,e,n){var i=s.get(t);if(!i){if(!n)return;s.set(t,i=new r)}var o=i.get(e);if(!o){if(!n)return;i.set(e,o=new r)}return o},c=function(t,e,n){var r=u(e,n,!1);return void 0!==r&&r.has(t)},l=function(t,e,n){var r=u(e,n,!1);return void 0===r?void 0:r.get(t)},f=function(t,e,n,r){u(n,r,!0).set(t,e)},h=function(t,e){var n=u(t,e,!1),r=[];return n&&n.forEach((function(t,e){r.push(e)})),r},p=function(t){return void 0===t||"symbol"==typeof t?t:String(t)};t.exports={store:s,getMap:u,has:c,get:l,set:f,keys:h,toKey:p}},eO0o:function(t,e,n){var r=n("I+eb");r({target:"Math",stat:!0},{imulh:function(t,e){var n=65535,r=+t,i=+e,o=r&n,a=i&n,s=r>>16,u=i>>16,c=(s*a>>>0)+(o*a>>>16);return s*u+(c>>16)+((o*u>>>0)+(c&n)>>16)}})},eRUA:function(t,e,n){"use strict";t.exports=i;var r=n("kVK+");function i(t){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(t)?t:new Uint8Array(t||0),this.pos=0,this.type=0,this.length=this.buf.length}i.Varint=0,i.Fixed64=1,i.Bytes=2,i.Fixed32=5;var o=4294967296,a=1/o,s=12,u="undefined"===typeof TextDecoder?null:new TextDecoder("utf8");function c(t,e,n){var r,i,o=n.buf;if(i=o[n.pos++],r=(112&i)>>4,i<128)return f(t,r,e);if(i=o[n.pos++],r|=(127&i)<<3,i<128)return f(t,r,e);if(i=o[n.pos++],r|=(127&i)<<10,i<128)return f(t,r,e);if(i=o[n.pos++],r|=(127&i)<<17,i<128)return f(t,r,e);if(i=o[n.pos++],r|=(127&i)<<24,i<128)return f(t,r,e);if(i=o[n.pos++],r|=(1&i)<<31,i<128)return f(t,r,e);throw new Error("Expected varint not more than 10 bytes")}function l(t){return t.type===i.Bytes?t.readVarint()+t.pos:t.pos+1}function f(t,e,n){return n?4294967296*e+(t>>>0):4294967296*(e>>>0)+(t>>>0)}function h(t,e){var n,r;if(t>=0?(n=t%4294967296|0,r=t/4294967296|0):(n=~(-t%4294967296),r=~(-t/4294967296),4294967295^n?n=n+1|0:(n=0,r=r+1|0)),t>=0x10000000000000000||t<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");e.realloc(10),p(n,r,e),d(r,e)}function p(t,e,n){n.buf[n.pos++]=127&t|128,t>>>=7,n.buf[n.pos++]=127&t|128,t>>>=7,n.buf[n.pos++]=127&t|128,t>>>=7,n.buf[n.pos++]=127&t|128,t>>>=7,n.buf[n.pos]=127&t}function d(t,e){var n=(7&t)<<4;e.buf[e.pos++]|=n|((t>>>=3)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t)))))}function v(t,e,n){var r=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.floor(Math.log(e)/(7*Math.LN2));n.realloc(r);for(var i=n.pos-1;i>=t;i--)n.buf[i+r]=n.buf[i]}function g(t,e){for(var n=0;n<t.length;n++)e.writeVarint(t[n])}function m(t,e){for(var n=0;n<t.length;n++)e.writeSVarint(t[n])}function y(t,e){for(var n=0;n<t.length;n++)e.writeFloat(t[n])}function _(t,e){for(var n=0;n<t.length;n++)e.writeDouble(t[n])}function b(t,e){for(var n=0;n<t.length;n++)e.writeBoolean(t[n])}function x(t,e){for(var n=0;n<t.length;n++)e.writeFixed32(t[n])}function w(t,e){for(var n=0;n<t.length;n++)e.writeSFixed32(t[n])}function E(t,e){for(var n=0;n<t.length;n++)e.writeFixed64(t[n])}function S(t,e){for(var n=0;n<t.length;n++)e.writeSFixed64(t[n])}function O(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+16777216*t[e+3]}function C(t,e,n){t[n]=e,t[n+1]=e>>>8,t[n+2]=e>>>16,t[n+3]=e>>>24}function T(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+(t[e+3]<<24)}function A(t,e,n){var r="",i=e;while(i<n){var o,a,s,u=t[i],c=null,l=u>239?4:u>223?3:u>191?2:1;if(i+l>n)break;1===l?u<128&&(c=u):2===l?(o=t[i+1],128===(192&o)&&(c=(31&u)<<6|63&o,c<=127&&(c=null))):3===l?(o=t[i+1],a=t[i+2],128===(192&o)&&128===(192&a)&&(c=(15&u)<<12|(63&o)<<6|63&a,(c<=2047||c>=55296&&c<=57343)&&(c=null))):4===l&&(o=t[i+1],a=t[i+2],s=t[i+3],128===(192&o)&&128===(192&a)&&128===(192&s)&&(c=(15&u)<<18|(63&o)<<12|(63&a)<<6|63&s,(c<=65535||c>=1114112)&&(c=null))),null===c?(c=65533,l=1):c>65535&&(c-=65536,r+=String.fromCharCode(c>>>10&1023|55296),c=56320|1023&c),r+=String.fromCharCode(c),i+=l}return r}function k(t,e,n){return u.decode(t.subarray(e,n))}function M(t,e,n){for(var r,i,o=0;o<e.length;o++){if(r=e.charCodeAt(o),r>55295&&r<57344){if(!i){r>56319||o+1===e.length?(t[n++]=239,t[n++]=191,t[n++]=189):i=r;continue}if(r<56320){t[n++]=239,t[n++]=191,t[n++]=189,i=r;continue}r=i-55296<<10|r-56320|65536,i=null}else i&&(t[n++]=239,t[n++]=191,t[n++]=189,i=null);r<128?t[n++]=r:(r<2048?t[n++]=r>>6|192:(r<65536?t[n++]=r>>12|224:(t[n++]=r>>18|240,t[n++]=r>>12&63|128),t[n++]=r>>6&63|128),t[n++]=63&r|128)}return n}i.prototype={destroy:function(){this.buf=null},readFields:function(t,e,n){n=n||this.length;while(this.pos<n){var r=this.readVarint(),i=r>>3,o=this.pos;this.type=7&r,t(i,e,this),this.pos===o&&this.skip(r)}return e},readMessage:function(t,e){return this.readFields(t,e,this.readVarint()+this.pos)},readFixed32:function(){var t=O(this.buf,this.pos);return this.pos+=4,t},readSFixed32:function(){var t=T(this.buf,this.pos);return this.pos+=4,t},readFixed64:function(){var t=O(this.buf,this.pos)+O(this.buf,this.pos+4)*o;return this.pos+=8,t},readSFixed64:function(){var t=O(this.buf,this.pos)+T(this.buf,this.pos+4)*o;return this.pos+=8,t},readFloat:function(){var t=r.read(this.buf,this.pos,!0,23,4);return this.pos+=4,t},readDouble:function(){var t=r.read(this.buf,this.pos,!0,52,8);return this.pos+=8,t},readVarint:function(t){var e,n,r=this.buf;return n=r[this.pos++],e=127&n,n<128?e:(n=r[this.pos++],e|=(127&n)<<7,n<128?e:(n=r[this.pos++],e|=(127&n)<<14,n<128?e:(n=r[this.pos++],e|=(127&n)<<21,n<128?e:(n=r[this.pos],e|=(15&n)<<28,c(e,t,this)))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var t=this.readVarint();return t%2===1?(t+1)/-2:t/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var t=this.readVarint()+this.pos,e=this.pos;return this.pos=t,t-e>=s&&u?k(this.buf,e,t):A(this.buf,e,t)},readBytes:function(){var t=this.readVarint()+this.pos,e=this.buf.subarray(this.pos,t);return this.pos=t,e},readPackedVarint:function(t,e){if(this.type!==i.Bytes)return t.push(this.readVarint(e));var n=l(this);t=t||[];while(this.pos<n)t.push(this.readVarint(e));return t},readPackedSVarint:function(t){if(this.type!==i.Bytes)return t.push(this.readSVarint());var e=l(this);t=t||[];while(this.pos<e)t.push(this.readSVarint());return t},readPackedBoolean:function(t){if(this.type!==i.Bytes)return t.push(this.readBoolean());var e=l(this);t=t||[];while(this.pos<e)t.push(this.readBoolean());return t},readPackedFloat:function(t){if(this.type!==i.Bytes)return t.push(this.readFloat());var e=l(this);t=t||[];while(this.pos<e)t.push(this.readFloat());return t},readPackedDouble:function(t){if(this.type!==i.Bytes)return t.push(this.readDouble());var e=l(this);t=t||[];while(this.pos<e)t.push(this.readDouble());return t},readPackedFixed32:function(t){if(this.type!==i.Bytes)return t.push(this.readFixed32());var e=l(this);t=t||[];while(this.pos<e)t.push(this.readFixed32());return t},readPackedSFixed32:function(t){if(this.type!==i.Bytes)return t.push(this.readSFixed32());var e=l(this);t=t||[];while(this.pos<e)t.push(this.readSFixed32());return t},readPackedFixed64:function(t){if(this.type!==i.Bytes)return t.push(this.readFixed64());var e=l(this);t=t||[];while(this.pos<e)t.push(this.readFixed64());return t},readPackedSFixed64:function(t){if(this.type!==i.Bytes)return t.push(this.readSFixed64());var e=l(this);t=t||[];while(this.pos<e)t.push(this.readSFixed64());return t},skip:function(t){var e=7&t;if(e===i.Varint)while(this.buf[this.pos++]>127);else if(e===i.Bytes)this.pos=this.readVarint()+this.pos;else if(e===i.Fixed32)this.pos+=4;else{if(e!==i.Fixed64)throw new Error("Unimplemented type: "+e);this.pos+=8}},writeTag:function(t,e){this.writeVarint(t<<3|e)},realloc:function(t){var e=this.length||16;while(e<this.pos+t)e*=2;if(e!==this.length){var n=new Uint8Array(e);n.set(this.buf),this.buf=n,this.length=e}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(t){this.realloc(4),C(this.buf,t,this.pos),this.pos+=4},writeSFixed32:function(t){this.realloc(4),C(this.buf,t,this.pos),this.pos+=4},writeFixed64:function(t){this.realloc(8),C(this.buf,-1&t,this.pos),C(this.buf,Math.floor(t*a),this.pos+4),this.pos+=8},writeSFixed64:function(t){this.realloc(8),C(this.buf,-1&t,this.pos),C(this.buf,Math.floor(t*a),this.pos+4),this.pos+=8},writeVarint:function(t){t=+t||0,t>268435455||t<0?h(t,this):(this.realloc(4),this.buf[this.pos++]=127&t|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=t>>>7&127))))},writeSVarint:function(t){this.writeVarint(t<0?2*-t-1:2*t)},writeBoolean:function(t){this.writeVarint(Boolean(t))},writeString:function(t){t=String(t),this.realloc(4*t.length),this.pos++;var e=this.pos;this.pos=M(this.buf,t,this.pos);var n=this.pos-e;n>=128&&v(e,n,this),this.pos=e-1,this.writeVarint(n),this.pos+=n},writeFloat:function(t){this.realloc(4),r.write(this.buf,t,this.pos,!0,23,4),this.pos+=4},writeDouble:function(t){this.realloc(8),r.write(this.buf,t,this.pos,!0,52,8),this.pos+=8},writeBytes:function(t){var e=t.length;this.writeVarint(e),this.realloc(e);for(var n=0;n<e;n++)this.buf[this.pos++]=t[n]},writeRawMessage:function(t,e){this.pos++;var n=this.pos;t(e,this);var r=this.pos-n;r>=128&&v(n,r,this),this.pos=n-1,this.writeVarint(r),this.pos+=r},writeMessage:function(t,e,n){this.writeTag(t,i.Bytes),this.writeRawMessage(e,n)},writePackedVarint:function(t,e){e.length&&this.writeMessage(t,g,e)},writePackedSVarint:function(t,e){e.length&&this.writeMessage(t,m,e)},writePackedBoolean:function(t,e){e.length&&this.writeMessage(t,b,e)},writePackedFloat:function(t,e){e.length&&this.writeMessage(t,y,e)},writePackedDouble:function(t,e){e.length&&this.writeMessage(t,_,e)},writePackedFixed32:function(t,e){e.length&&this.writeMessage(t,x,e)},writePackedSFixed32:function(t,e){e.length&&this.writeMessage(t,w,e)},writePackedFixed64:function(t,e){e.length&&this.writeMessage(t,E,e)},writePackedSFixed64:function(t,e){e.length&&this.writeMessage(t,S,e)},writeBytesField:function(t,e){this.writeTag(t,i.Bytes),this.writeBytes(e)},writeFixed32Field:function(t,e){this.writeTag(t,i.Fixed32),this.writeFixed32(e)},writeSFixed32Field:function(t,e){this.writeTag(t,i.Fixed32),this.writeSFixed32(e)},writeFixed64Field:function(t,e){this.writeTag(t,i.Fixed64),this.writeFixed64(e)},writeSFixed64Field:function(t,e){this.writeTag(t,i.Fixed64),this.writeSFixed64(e)},writeVarintField:function(t,e){this.writeTag(t,i.Varint),this.writeVarint(e)},writeSVarintField:function(t,e){this.writeTag(t,i.Varint),this.writeSVarint(e)},writeStringField:function(t,e){this.writeTag(t,i.Bytes),this.writeString(e)},writeFloatField:function(t,e){this.writeTag(t,i.Fixed32),this.writeFloat(e)},writeDoubleField:function(t,e){this.writeTag(t,i.Fixed64),this.writeDouble(e)},writeBooleanField:function(t,e){this.writeVarintField(t,Boolean(e))}}},ebwN:function(t,e,n){var r=n("Cwc5"),i=n("Kz5y"),o=r(i,"Map");t.exports=o},ekgI:function(t,e,n){var r=n("YESw"),i=Object.prototype,o=i.hasOwnProperty;function a(t){var e=this.__data__;return r?void 0!==e[t]:o.call(e,t)}t.exports=a},ewvW:function(t,e,n){var r=n("HYAF");t.exports=function(t){return Object(r(t))}},"f/k9":function(t,e,n){"use strict";var r=n("MgzW"),i=n("q1tI");e.useSubscription=function(t){var e=t.getCurrentValue,n=t.subscribe,o=i.useState((function(){return{getCurrentValue:e,subscribe:n,value:e()}}));t=o[0];var a=o[1];return o=t.value,t.getCurrentValue===e&&t.subscribe===n||(o=e(),a({getCurrentValue:e,subscribe:n,value:o})),i.useDebugValue(o),i.useEffect((function(){function t(){if(!i){var t=e();a((function(i){return i.getCurrentValue!==e||i.subscribe!==n||i.value===t?i:r({},i,{value:t})}))}}var i=!1,o=n(t);return t(),function(){i=!0,o()}}),[e,n]),o}},f5p1:function(t,e,n){var r=n("2oRo"),i=n("iSVu"),o=r.WeakMap;t.exports="function"===typeof o&&/native code/.test(i(o))},fGT3:function(t,e,n){var r=n("4kuk"),i=n("Xi7e"),o=n("ebwN");function a(){this.size=0,this.__data__={hash:new r,map:new(o||i),string:new r}}t.exports=a},fHMY:function(t,e,n){var r,i=n("glrk"),o=n("N+g0"),a=n("eDl+"),s=n("0BK2"),u=n("G+Rx"),c=n("zBJ4"),l=n("93I0"),f=">",h="<",p="prototype",d="script",v=l("IE_PROTO"),g=function(){},m=function(t){return h+d+f+t+h+"/"+d+f},y=function(t){t.write(m("")),t.close();var e=t.parentWindow.Object;return t=null,e},_=function(){var t,e=c("iframe"),n="java"+d+":";return e.style.display="none",u.appendChild(e),e.src=String(n),t=e.contentWindow.document,t.open(),t.write(m("document.F=Object")),t.close(),t.F},b=function(){try{r=document.domain&&new ActiveXObject("htmlfile")}catch(e){}b=r?y(r):_();var t=a.length;while(t--)delete b[p][a[t]];return b()};s[v]=!0,t.exports=Object.create||function(t,e){var n;return null!==t?(g[p]=i(t),n=new g,g[p]=null,n[v]=t):n=b(),void 0===e?n:o(n,e)}},fN96:function(t,e,n){"use strict";var r=n("I+eb"),i=n("ZUd8").charAt;r({target:"String",proto:!0},{at:function(t){return i(this,t)}})},"fR/l":function(t,e,n){var r=n("CH3K"),i=n("Z0cm");function o(t,e,n){var o=e(t);return i(t)?o:r(o,n(t))}t.exports=o},fVI1:function(t,e,n){},fXLg:function(t,e,n){"use strict";var r=n("glrk"),i=n("HAuM");t.exports=function(){for(var t=r(this),e=i(t.add),n=0,o=arguments.length;n<o;n++)e.call(t,arguments[n]);return t}},fbrv:function(t,e,n){"use strict";var r=this&&this.__spreadArray||function(t,e){for(var n=0,r=e.length,i=t.length;n<r;n++,i++)t[i]=e[n];return t};Object.defineProperty(e,"__esModule",{value:!0}),e.getFunctionName=e.getBaseClassDependencyCount=e.getDependencies=void 0;var i=n("Yk9n"),o=n("MON2"),a=n("FV85"),s=n("xfSm"),u=n("ujMp");Object.defineProperty(e,"getFunctionName",{enumerable:!0,get:function(){return u.getFunctionName}});var c=n("dX1H");function l(t,e){var n=u.getFunctionName(e),r=f(t,n,e,!1);return r}function f(t,e,n,i){var a=t.getConstructorMetadata(n),s=a.compilerGeneratedMetadata;if(void 0===s){var u=o.MISSING_INJECTABLE_ANNOTATION+" "+e+".";throw new Error(u)}var c=a.userGeneratedMetadata,l=Object.keys(c),f=0===n.length&&l.length>0,h=l.length>n.length,v=f||h?l.length:n.length,g=p(i,e,s,c,v),m=d(t,n),y=r(r([],g),m);return y}function h(t,e,n,r,s){var u=s[t.toString()]||[],l=g(u),f=!0!==l.unmanaged,h=r[t],p=l.inject||l.multiInject;if(h=p||h,h instanceof i.LazyServiceIdentifer&&(h=h.unwrap()),f){var d=h===Object,v=h===Function,m=void 0===h,y=d||v||m;if(!e&&y){var _=o.MISSING_INJECT_ANNOTATION+" argument "+t+" in class "+n+".";throw new Error(_)}var b=new c.Target(a.TargetTypeEnum.ConstructorArgument,l.targetName,h);return b.metadata=u,b}return null}function p(t,e,n,r,i){for(var o=[],a=0;a<i;a++){var s=a,u=h(s,t,e,n,r);null!==u&&o.push(u)}return o}function d(t,e){for(var n=t.getPropertiesMetadata(e),i=[],o=Object.keys(n),s=0,u=o;s<u.length;s++){var l=u[s],f=n[l],h=g(n[l]),p=h.targetName||l,v=h.inject||h.multiInject,m=new c.Target(a.TargetTypeEnum.ClassProperty,p,v);m.metadata=f,i.push(m)}var y=Object.getPrototypeOf(e.prototype).constructor;if(y!==Object){var _=d(t,y);i=r(r([],i),_)}return i}function v(t,e){var n=Object.getPrototypeOf(e.prototype).constructor;if(n!==Object){var r=u.getFunctionName(n),i=f(t,r,n,!0),o=i.map((function(t){return t.metadata.filter((function(t){return t.key===s.UNMANAGED_TAG}))})),a=[].concat.apply([],o).length,c=i.length-a;return c>0?c:v(t,n)}return 0}function g(t){var e={};return t.forEach((function(t){e[t.key.toString()]=t.value})),{inject:e[s.INJECT_TAG],multiInject:e[s.MULTI_INJECT_TAG],targetName:e[s.NAME_TAG],unmanaged:e[s.UNMANAGED_TAG]}}e.getDependencies=l,e.getBaseClassDependencyCount=v},fdAy:function(t,e,n){"use strict";var r=n("I+eb"),i=n("ntOU"),o=n("4WOD"),a=n("0rvr"),s=n("1E5z"),u=n("kRJp"),c=n("busE"),l=n("tiKp"),f=n("xDBR"),h=n("P4y1"),p=n("rpNk"),d=p.IteratorPrototype,v=p.BUGGY_SAFARI_ITERATORS,g=l("iterator"),m="keys",y="values",_="entries",b=function(){return this};t.exports=function(t,e,n,l,p,x,w){i(n,e,l);var E,S,O,C=function(t){if(t===p&&P)return P;if(!v&&t in k)return k[t];switch(t){case m:return function(){return new n(this,t)};case y:return function(){return new n(this,t)};case _:return function(){return new n(this,t)}}return function(){return new n(this)}},T=e+" Iterator",A=!1,k=t.prototype,M=k[g]||k["@@iterator"]||p&&k[p],P=!v&&M||C(p),R="Array"==e&&k.entries||M;if(R&&(E=o(R.call(new t)),d!==Object.prototype&&E.next&&(f||o(E)===d||(a?a(E,d):"function"!=typeof E[g]&&u(E,g,b)),s(E,T,!0,!0),f&&(h[T]=b))),p==y&&M&&M.name!==y&&(A=!0,P=function(){return M.call(this)}),f&&!w||k[g]===P||u(k,g,P),h[e]=P,p)if(S={values:C(y),keys:x?P:C(m),entries:C(_)},w)for(O in S)(v||A||!(O in k))&&c(k,O,S[O]);else r({target:e,proto:!0,forced:v||A},S);return S}},fhKU:function(t,e,n){var r=n("2oRo"),i=n("WKiH").trim,o=n("WJkJ"),a=r.parseFloat,s=1/a(o+"-0")!==-1/0;t.exports=s?function(t){var e=i(String(t)),n=a(e);return 0===n&&"-"==e.charAt(0)?-0:n}:a},fmRc:function(t,e,n){var r=n("Xi7e"),i=n("77Zs"),o=n("L8xA"),a=n("gCq4"),s=n("VaNO"),u=n("0Cz8");function c(t){var e=this.__data__=new r(t);this.size=e.size}c.prototype.clear=i,c.prototype["delete"]=o,c.prototype.get=a,c.prototype.has=s,c.prototype.set=u,t.exports=c},foS9:function(t,e,n){},foSv:function(t,e,n){"use strict";function r(t){return r=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},r(t)}n.d(e,"a",(function(){return r}))},fsL8:function(t,e,n){var r=n("cDf5")["default"];function i(){"use strict";t.exports=i=function(){return e},t.exports.__esModule=!0,t.exports["default"]=t.exports;var e={},n=Object.prototype,o=n.hasOwnProperty,a=Object.defineProperty||function(t,e,n){t[e]=n.value},s="function"==typeof Symbol?Symbol:{},u=s.iterator||"@@iterator",c=s.asyncIterator||"@@asyncIterator",l=s.toStringTag||"@@toStringTag";function f(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{f({},"")}catch(P){f=function(t,e,n){return t[e]=n}}function h(t,e,n,r){var i=e&&e.prototype instanceof v?e:v,o=Object.create(i.prototype),s=new A(r||[]);return a(o,"_invoke",{value:S(t,n,s)}),o}function p(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(P){return{type:"throw",arg:P}}}e.wrap=h;var d={};function v(){}function g(){}function m(){}var y={};f(y,u,(function(){return this}));var _=Object.getPrototypeOf,b=_&&_(_(k([])));b&&b!==n&&o.call(b,u)&&(y=b);var x=m.prototype=v.prototype=Object.create(y);function w(t){["next","throw","return"].forEach((function(e){f(t,e,(function(t){return this._invoke(e,t)}))}))}function E(t,e){function n(i,a,s,u){var c=p(t[i],t,a);if("throw"!==c.type){var l=c.arg,f=l.value;return f&&"object"==r(f)&&o.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,s,u)}),(function(t){n("throw",t,s,u)})):e.resolve(f).then((function(t){l.value=t,s(l)}),(function(t){return n("throw",t,s,u)}))}u(c.arg)}var i;a(this,"_invoke",{value:function(t,r){function o(){return new e((function(e,i){n(t,r,e,i)}))}return i=i?i.then(o,o):o()}})}function S(t,e,n){var r="suspendedStart";return function(i,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw o;return M()}for(n.method=i,n.arg=o;;){var a=n.delegate;if(a){var s=O(a,n);if(s){if(s===d)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=p(t,e,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===d)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}function O(t,e){var n=e.method,r=t.iterator[n];if(void 0===r)return e.delegate=null,"throw"===n&&t.iterator["return"]&&(e.method="return",e.arg=void 0,O(t,e),"throw"===e.method)||"return"!==n&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+n+"' method")),d;var i=p(r,t.iterator,e.arg);if("throw"===i.type)return e.method="throw",e.arg=i.arg,e.delegate=null,d;var o=i.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,d):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,d)}function C(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function T(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function A(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function k(t){if(t){var e=t[u];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,r=function e(){for(;++n<t.length;)if(o.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return r.next=r}}return{next:M}}function M(){return{value:void 0,done:!0}}return g.prototype=m,a(x,"constructor",{value:m,configurable:!0}),a(m,"constructor",{value:g,configurable:!0}),g.displayName=f(m,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,m):(t.__proto__=m,f(t,l,"GeneratorFunction")),t.prototype=Object.create(x),t},e.awrap=function(t){return{__await:t}},w(E.prototype),f(E.prototype,c,(function(){return this})),e.AsyncIterator=E,e.async=function(t,n,r,i,o){void 0===o&&(o=Promise);var a=new E(h(t,n,r,i),o);return e.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},w(x),f(x,l,"Generator"),f(x,u,(function(){return this})),f(x,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=k,A.prototype={constructor:A,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(T),!t)for(var e in this)"t"===e.charAt(0)&&o.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(n,r){return a.type="throw",a.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=o.call(i,"catchLoc"),u=o.call(i,"finallyLoc");if(s&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&o.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,d):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),d},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),T(n),d}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;T(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:k(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},e}t.exports=i,t.exports.__esModule=!0,t.exports["default"]=t.exports},ftKO:function(t,e){var n="__lodash_hash_undefined__";function r(t){return this.__data__.set(t,n),this}t.exports=r},ftMj:function(t,e,n){var r=n("I+eb"),i=n("glrk"),o=n("hh1v"),a=n("UTVS"),s=n("0Dky"),u=n("m/L8"),c=n("Bs8V"),l=n("4WOD"),f=n("XGwC");function h(t,e,n){var r,s,p=arguments.length<4?t:arguments[3],d=c.f(i(t),e);if(!d){if(o(s=l(t)))return h(s,e,n,p);d=f(0)}if(a(d,"value")){if(!1===d.writable||!o(p))return!1;if(r=c.f(p,e)){if(r.get||r.set||!1===r.writable)return!1;r.value=n,u.f(p,e,r)}else u.f(p,e,f(0,n));return!0}return void 0!==d.set&&(d.set.call(p,n),!0)}var p=s((function(){var t=u.f({},"a",{configurable:!0});return!1!==Reflect.set(l(t),"a",1,t)}));r({target:"Reflect",stat:!0,forced:p},{set:h})},"g6v/":function(t,e,n){var r=n("0Dky");t.exports=!r((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},gCq4:function(t,e){function n(t){return this.__data__.get(t)}t.exports=n},gOCb:function(t,e,n){var r=n("dG/n");r("replace")},gXIK:function(t,e,n){var r=n("dG/n");r("toPrimitive")},gYJb:function(t,e,n){var r=n("I+eb"),i=n("p5mE"),o=n("0GbY"),a=n("fHMY"),s=function(){var t=o("Object","freeze");return t?t(a(null)):a(null)};r({global:!0},{compositeKey:function(){return i.apply(Object,arguments).get("object",s)}})},gdVl:function(t,e,n){"use strict";var r=n("ewvW"),i=n("I8vh"),o=n("UMSQ");t.exports=function(t){var e=r(this),n=o(e.length),a=arguments.length,s=i(a>1?arguments[1]:void 0,n),u=a>2?arguments[2]:void 0,c=void 0===u?n:i(u,n);while(c>s)e[s++]=t;return e}},gg6r:function(t,e,n){"use strict";var r=n("I+eb"),i=n("HAuM"),o=n("8GlL"),a=n("5mdu"),s=n("ImZN");r({target:"Promise",stat:!0},{allSettled:function(t){var e=this,n=o.f(e),r=n.resolve,u=n.reject,c=a((function(){var n=i(e.resolve),o=[],a=0,u=1;s(t,(function(t){var i=a++,s=!1;o.push(void 0),u++,n.call(e,t).then((function(t){s||(s=!0,o[i]={status:"fulfilled",value:t},--u||r(o))}),(function(t){s||(s=!0,o[i]={status:"rejected",reason:t},--u||r(o))}))})),--u||r(o)}));return c.error&&u(c.value),n.promise}})},glrk:function(t,e,n){var r=n("hh1v");t.exports=function(t){if(!r(t))throw TypeError(String(t)+" is not an object");return t}},gvgV:function(t,e,n){"use strict";var r=n("67WC"),i=n("TWQb").includes,o=r.aTypedArray,a=r.exportTypedArrayMethod;a("includes",(function(t){return i(o(this),t,arguments.length>1?arguments[1]:void 0)}))},gzZq:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BindingToSyntax=void 0;var r=n("MON2"),i=n("FV85"),o=n("D9lx"),a=n("LKzl"),s=function(){function t(t){this._binding=t}return t.prototype.to=function(t){return this._binding.type=i.BindingTypeEnum.Instance,this._binding.implementationType=t,new o.BindingInWhenOnSyntax(this._binding)},t.prototype.toSelf=function(){if("function"!==typeof this._binding.serviceIdentifier)throw new Error(""+r.INVALID_TO_SELF_VALUE);var t=this._binding.serviceIdentifier;return this.to(t)},t.prototype.toConstantValue=function(t){return this._binding.type=i.BindingTypeEnum.ConstantValue,this._binding.cache=t,this._binding.dynamicValue=null,this._binding.implementationType=null,this._binding.scope=i.BindingScopeEnum.Singleton,new a.BindingWhenOnSyntax(this._binding)},t.prototype.toDynamicValue=function(t){return this._binding.type=i.BindingTypeEnum.DynamicValue,this._binding.cache=null,this._binding.dynamicValue=t,this._binding.implementationType=null,new o.BindingInWhenOnSyntax(this._binding)},t.prototype.toConstructor=function(t){return this._binding.type=i.BindingTypeEnum.Constructor,this._binding.implementationType=t,this._binding.scope=i.BindingScopeEnum.Singleton,new a.BindingWhenOnSyntax(this._binding)},t.prototype.toFactory=function(t){return this._binding.type=i.BindingTypeEnum.Factory,this._binding.factory=t,this._binding.scope=i.BindingScopeEnum.Singleton,new a.BindingWhenOnSyntax(this._binding)},t.prototype.toFunction=function(t){if("function"!==typeof t)throw new Error(r.INVALID_FUNCTION_BINDING);var e=this.toConstantValue(t);return this._binding.type=i.BindingTypeEnum.Function,this._binding.scope=i.BindingScopeEnum.Singleton,e},t.prototype.toAutoFactory=function(t){return this._binding.type=i.BindingTypeEnum.Factory,this._binding.factory=function(e){var n=function(){return e.container.get(t)};return n},this._binding.scope=i.BindingScopeEnum.Singleton,new a.BindingWhenOnSyntax(this._binding)},t.prototype.toProvider=function(t){return this._binding.type=i.BindingTypeEnum.Provider,this._binding.provider=t,this._binding.scope=i.BindingScopeEnum.Singleton,new a.BindingWhenOnSyntax(this._binding)},t.prototype.toService=function(t){this.toDynamicValue((function(e){return e.container.get(t)}))},t}();e.BindingToSyntax=s},h0XC:function(t,e){function n(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}t.exports=n,t.exports.__esModule=!0,t.exports["default"]=t.exports},h7MG:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getBindingDictionary=e.createMockRequest=e.plan=void 0;var r=n("doU7"),i=n("MON2"),o=n("FV85"),a=n("xfSm"),s=n("qK8v"),u=n("ujMp"),c=n("oy+k"),l=n("GXnB"),f=n("yMAV"),h=n("fbrv"),p=n("xiII"),d=n("dX1H");function v(t){return t._bindingDictionary}function g(t,e,n,r,i,o){var s=t?a.MULTI_INJECT_TAG:a.INJECT_TAG,u=new l.Metadata(s,n),c=new d.Target(e,r,n,u);if(void 0!==i){var f=new l.Metadata(i,o);c.metadata.push(f)}return c}function m(t,e,n,i,o){var a=b(n.container,o.serviceIdentifier),s=[];return a.length===r.BindingCount.NoBindingsAvailable&&n.container.options.autoBindInjectable&&"function"===typeof o.serviceIdentifier&&t.getConstructorMetadata(o.serviceIdentifier).compilerGeneratedMetadata&&(n.container.bind(o.serviceIdentifier).toSelf(),a=b(n.container,o.serviceIdentifier)),s=e?a:a.filter((function(t){var e=new p.Request(t.serviceIdentifier,n,i,t,o);return t.constraint(e)})),y(o.serviceIdentifier,s,o,n.container),s}function y(t,e,n,o){switch(e.length){case r.BindingCount.NoBindingsAvailable:if(n.isOptional())return e;var a=u.getServiceIdentifierAsString(t),s=i.NOT_REGISTERED;throw s+=u.listMetadataForTarget(a,n),s+=u.listRegisteredBindingsForServiceIdentifier(o,a,b),new Error(s);case r.BindingCount.OnlyOneBindingAvailable:if(!n.isArray())return e;case r.BindingCount.MultipleBindingsAvailable:default:if(n.isArray())return e;a=u.getServiceIdentifierAsString(t),s=i.AMBIGUOUS_MATCH+" "+a;throw s+=u.listRegisteredBindingsForServiceIdentifier(o,a,b),new Error(s)}}function _(t,e,n,r,a,s){var u,c;if(null===a){u=m(t,e,r,null,s),c=new p.Request(n,r,null,u,s);var l=new f.Plan(r,c);r.addPlan(l)}else u=m(t,e,r,a,s),c=a.addChildRequest(s.serviceIdentifier,u,s);u.forEach((function(e){var n=null;if(s.isArray())n=c.addChildRequest(e.serviceIdentifier,e,s);else{if(e.cache)return;n=c}if(e.type===o.BindingTypeEnum.Instance&&null!==e.implementationType){var a=h.getDependencies(t,e.implementationType);if(!r.container.options.skipBaseClassChecks){var u=h.getBaseClassDependencyCount(t,e.implementationType);if(a.length<u){var l=i.ARGUMENTS_LENGTH_MISMATCH(h.getFunctionName(e.implementationType));throw new Error(l)}}a.forEach((function(e){_(t,!1,e.serviceIdentifier,r,n,e)}))}}))}function b(t,e){var n=[],r=v(t);return r.hasKey(e)?n=r.get(e):null!==t.parent&&(n=b(t.parent,e)),n}function x(t,e,n,r,i,o,a,l){void 0===l&&(l=!1);var f=new c.Context(e),h=g(n,r,i,"",o,a);try{return _(t,l,i,f,null,h),f}catch(p){throw s.isStackOverflowExeption(p)&&f.plan&&u.circularDependencyToException(f.plan.rootRequest),p}}function w(t,e,n,r){var i=new d.Target(o.TargetTypeEnum.Variable,"",e,new l.Metadata(n,r)),a=new c.Context(t),s=new p.Request(e,a,null,[],i);return s}e.getBindingDictionary=v,e.plan=x,e.createMockRequest=w},hBjN:function(t,e,n){"use strict";var r=n("wE6v"),i=n("m/L8"),o=n("XGwC");t.exports=function(t,e,n){var a=r(e);a in t?i.f(t,a,o(0,n)):t[a]=n}},hByQ:function(t,e,n){"use strict";var r=n("14Sl"),i=n("glrk"),o=n("HYAF"),a=n("Ep9I"),s=n("FMNM");r("search",1,(function(t,e,n){return[function(e){var n=o(this),r=void 0==e?void 0:e[t];return void 0!==r?r.call(e,n):new RegExp(e)[t](String(n))},function(t){var r=n(e,t,this);if(r.done)return r.value;var o=i(t),u=String(this),c=o.lastIndex;a(c,0)||(o.lastIndex=0);var l=s(o,u);return a(o.lastIndex,c)||(o.lastIndex=c),null===l?-1:l.index}]}))},hDyC:function(t,e,n){"use strict";var r=n("I+eb"),i=n("DMt2").end,o=n("mgyK");r({target:"String",proto:!0,forced:o},{padEnd:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}})},hJnp:function(t,e,n){},"hKI/":function(t,e,n){(function(e){var n="Expected a function",r=NaN,i="[object Symbol]",o=/^\s+|\s+$/g,a=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,u=/^0o[0-7]+$/i,c=parseInt,l="object"==typeof e&&e&&e.Object===Object&&e,f="object"==typeof self&&self&&self.Object===Object&&self,h=l||f||Function("return this")(),p=Object.prototype,d=p.toString,v=Math.max,g=Math.min,m=function(){return h.Date.now()};function y(t,e,r){var i,o,a,s,u,c,l=0,f=!1,h=!1,p=!0;if("function"!=typeof t)throw new TypeError(n);function d(e){var n=i,r=o;return i=o=void 0,l=e,s=t.apply(r,n),s}function y(t){return l=t,u=setTimeout(w,e),f?d(t):s}function _(t){var n=t-c,r=t-l,i=e-n;return h?g(i,a-r):i}function x(t){var n=t-c,r=t-l;return void 0===c||n>=e||n<0||h&&r>=a}function w(){var t=m();if(x(t))return S(t);u=setTimeout(w,_(t))}function S(t){return u=void 0,p&&i?d(t):(i=o=void 0,s)}function O(){void 0!==u&&clearTimeout(u),l=0,i=c=o=u=void 0}function C(){return void 0===u?s:S(m())}function T(){var t=m(),n=x(t);if(i=arguments,o=this,c=t,n){if(void 0===u)return y(c);if(h)return u=setTimeout(w,e),d(c)}return void 0===u&&(u=setTimeout(w,e)),s}return e=E(e)||0,b(r)&&(f=!!r.leading,h="maxWait"in r,a=h?v(E(r.maxWait)||0,e):a,p="trailing"in r?!!r.trailing:p),T.cancel=O,T.flush=C,T}function _(t,e,r){var i=!0,o=!0;if("function"!=typeof t)throw new TypeError(n);return b(r)&&(i="leading"in r?!!r.leading:i,o="trailing"in r?!!r.trailing:o),y(t,e,{leading:i,maxWait:e,trailing:o})}function b(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function x(t){return!!t&&"object"==typeof t}function w(t){return"symbol"==typeof t||x(t)&&d.call(t)==i}function E(t){if("number"==typeof t)return t;if(w(t))return r;if(b(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=b(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(o,"");var n=s.test(t);return n||u.test(t)?c(t.slice(2),n?2:8):a.test(t)?r:+t}t.exports=_}).call(this,n("IyRk"))},hMMk:function(t,e,n){var r=n("dOgj");r("Uint16",(function(t){return function(e,n,r){return t(this,e,n,r)}}))},"hOG+":function(t,e){(function(e){t.exports=function(){var t={311:function(t){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}}},n={};function r(e){if(n[e])return n[e].exports;var i=n[e]={exports:{}},o=!0;try{t[e](i,i.exports,r),o=!1}finally{o&&delete n[e]}return i.exports}return r.ab=e+"/",r(311)}()}).call(this,"/")},hcok:function(t,e,n){"use strict";var r=n("I+eb"),i=n("xDBR"),o=n("0GbY"),a=n("glrk"),s=n("HAuM"),u=n("SEBh"),c=n("ImZN");r({target:"Set",proto:!0,real:!0,forced:i},{difference:function(t){var e=a(this),n=new(u(e,o("Set")))(e),r=s(n["delete"]);return c(t,(function(t){r.call(n,t)})),n}})},heNW:function(t,e){function n(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}t.exports=n},hh1v:function(t,e){t.exports=function(t){return"object"===typeof t?null!==t:"function"===typeof t}},hypo:function(t,e,n){var r=n("O0oS");function i(t,e,n){"__proto__"==e&&r?r(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}t.exports=i},i4U9:function(t,e){t.exports=function(t,e){return t===e||t!=t&&e!=e}},i8i4:function(t,e,n){"use strict";function r(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE){0;try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(t){console.error(t)}}}r(),t.exports=n("yl30")},iIM6:function(t,e,n){"use strict";var r=n("g6v/"),i=n("RNIs"),o=n("ewvW"),a=n("UMSQ"),s=n("m/L8").f;r&&!("lastIndex"in[])&&(s(Array.prototype,"lastIndex",{configurable:!0,get:function(){var t=o(this),e=a(t.length);return 0==e?0:e-1}}),i("lastIndex"))},iSVu:function(t,e,n){var r=n("xs3f"),i=Function.toString;"function"!=typeof r.inspectSource&&(r.inspectSource=function(t){return i.call(t)}),t.exports=r.inspectSource},iegG:function(t,e){function n(t){var e=t.target||t.srcElement;e.__resizeRAF__&&cancelAnimationFrame(e.__resizeRAF__),e.__resizeRAF__=requestAnimationFrame((function(){var n=e.__resizeTrigger__,r=n&&n.__resizeListeners__;r&&r.forEach((function(e){e.call(n,t)}))}))}var r=function(t,e){var r,i=this,o=i.document,a=o.attachEvent;function s(){this.contentDocument.defaultView.__resizeTrigger__=this.__resizeElement__,this.contentDocument.defaultView.addEventListener("resize",n)}if("undefined"!==typeof navigator&&(r=navigator.userAgent.match(/Trident/)||navigator.userAgent.match(/Edge/)),!t.__resizeListeners__)if(t.__resizeListeners__=[],a)t.__resizeTrigger__=t,t.attachEvent("onresize",n);else{"static"===getComputedStyle(t).position&&(t.style.position="relative");var u=t.__resizeTrigger__=o.createElement("object");u.setAttribute("style","position: absolute; top: 0; left: 0; height: 100%; width: 100%; pointer-events: none; z-index: -1; opacity: 0;"),u.setAttribute("class","resize-sensor"),u.setAttribute("tabindex","-1"),u.setAttribute("title",""),u.__resizeElement__=t,u.onload=s,u.type="text/html",r&&t.appendChild(u),u.data="about:blank",r||t.appendChild(u)}t.__resizeListeners__.push(e)};t.exports="undefined"===typeof window?r:r.bind(window),t.exports.unbind=function(t,e){var r=document.attachEvent,i=t.__resizeListeners__||[];if(e){var o=i.indexOf(e);-1!==o&&i.splice(o,1)}else i=t.__resizeListeners__=[];if(!i.length){if(r)t.detachEvent("onresize",n);else if(t.__resizeTrigger__){var a=t.__resizeTrigger__.contentDocument,s=a&&a.defaultView;s&&(s.removeEventListener("resize",n),delete s.__resizeTrigger__),t.__resizeTrigger__=!t.removeChild(t.__resizeTrigger__)}delete t.__resizeListeners__}}},ihrJ:function(t,e,n){"use strict";var r=n("I+eb"),i=n("ImZN"),o=n("HAuM");r({target:"Map",stat:!0},{groupBy:function(t,e){var n=new this;o(e);var r=o(n.has),a=o(n.get),s=o(n.set);return i(t,(function(t){var i=e(t);r.call(n,i)?a.call(n,i).push(t):s.call(n,i,[t])})),n}})},ilnZ:function(t,e,n){var r=n("dOgj");r("Uint8",(function(t){return function(e,n,r){return t(this,e,n,r)}}),!0)},inlA:function(t,e,n){"use strict";var r=n("I+eb"),i=n("Bs8V").f,o=n("UMSQ"),a=n("WjRb"),s=n("HYAF"),u=n("qxPZ"),c=n("xDBR"),l="".endsWith,f=Math.min,h=u("endsWith"),p=!c&&!h&&!!function(){var t=i(String.prototype,"endsWith");return t&&!t.writable}();r({target:"String",proto:!0,forced:!p&&!h},{endsWith:function(t){var e=String(s(this));a(t);var n=arguments.length>1?arguments[1]:void 0,r=o(e.length),i=void 0===n?r:f(o(n),r),u=String(t);return l?l.call(e,u,i):e.slice(i-u.length,i)===u}})},iqWW:function(t,e,n){"use strict";var r=n("ZUd8").charAt;t.exports=function(t,e,n){return e+(n?r(t,e).length:1)}},iqeF:function(t,e,n){var r=n("2oRo"),i=n("0Dky"),o=n("HH4o"),a=n("67WC").NATIVE_ARRAY_BUFFER_VIEWS,s=r.ArrayBuffer,u=r.Int8Array;t.exports=!a||!i((function(){u(1)}))||!i((function(){new u(-1)}))||!o((function(t){new u,new u(null),new u(1.5),new u(t)}),!0)||i((function(){return 1!==new u(new s(2),1,void 0).length}))},itsj:function(t,e){function n(t,e){if(("constructor"!==e||"function"!==typeof t[e])&&"__proto__"!=e)return t[e]}t.exports=n},iwkZ:function(t,e,n){var r=n("dOgj");r("Int16",(function(t){return function(e,n,r){return t(this,e,n,r)}}))},"j+VE":function(t,e,n){n("bFeb")},"jIg/":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.multiInject=void 0;var r=n("xfSm"),i=n("GXnB"),o=n("Ztfv");function a(t){return function(e,n,a){var s=new i.Metadata(r.MULTI_INJECT_TAG,t);"number"===typeof a?o.tagParameter(e,n,a,s):o.tagProperty(e,n,s)}}e.multiInject=a},jYx5:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.optional=void 0;var r=n("xfSm"),i=n("GXnB"),o=n("Ztfv");function a(){return function(t,e,n){var a=new i.Metadata(r.OPTIONAL_TAG,!0);"number"===typeof n?o.tagParameter(t,e,n,a):o.tagProperty(t,e,a)}}e.optional=a},jeLo:function(t,e,n){var r=n("juv8"),i=n("mTTR");function o(t){return r(t,i(t))}t.exports=o},juv8:function(t,e,n){var r=n("MrPd"),i=n("hypo");function o(t,e,n,o){var a=!n;n||(n={});var s=-1,u=e.length;while(++s<u){var c=e[s],l=o?o(n[c],t[c],c,n,t):void 0;void 0===l&&(l=t[c]),a?i(n,c,l):r(n,c,l)}return n}t.exports=o},"k+1r":function(t,e,n){var r=n("QkVE");function i(t){var e=r(this,t)["delete"](t);return this.size-=e?1:0,e}t.exports=i},kCkZ:function(t,e,n){"use strict";var r=n("I+eb"),i=n("8GlL"),o=n("5mdu");r({target:"Promise",stat:!0},{try:function(t){var e=i.f(this),n=o(t);return(n.error?e.reject:e.resolve)(n.value),e.promise}})},kOOl:function(t,e){var n=0,r=Math.random();t.exports=function(t){return"Symbol("+String(void 0===t?"":t)+")_"+(++n+r).toString(36)}},kRJp:function(t,e,n){var r=n("g6v/"),i=n("m/L8"),o=n("XGwC");t.exports=r?function(t,e,n){return i.f(t,e,o(1,n))}:function(t,e,n){return t[e]=n,t}},"kVK+":function(t,e){e.read=function(t,e,n,r,i){var o,a,s=8*i-r-1,u=(1<<s)-1,c=u>>1,l=-7,f=n?i-1:0,h=n?-1:1,p=t[e+f];for(f+=h,o=p&(1<<-l)-1,p>>=-l,l+=s;l>0;o=256*o+t[e+f],f+=h,l-=8);for(a=o&(1<<-l)-1,o>>=-l,l+=r;l>0;a=256*a+t[e+f],f+=h,l-=8);if(0===o)o=1-c;else{if(o===u)return a?NaN:1/0*(p?-1:1);a+=Math.pow(2,r),o-=c}return(p?-1:1)*a*Math.pow(2,o-r)},e.write=function(t,e,n,r,i,o){var a,s,u,c=8*o-i-1,l=(1<<c)-1,f=l>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:o-1,d=r?1:-1,v=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,a=l):(a=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-a))<1&&(a--,u*=2),e+=a+f>=1?h/u:h*Math.pow(2,1-f),e*u>=2&&(a++,u/=2),a+f>=l?(s=0,a=l):a+f>=1?(s=(e*u-1)*Math.pow(2,i),a+=f):(s=e*Math.pow(2,f-1)*Math.pow(2,i),a=0));i>=8;t[n+p]=255&s,p+=d,s/=256,i-=8);for(a=a<<i|s,c+=i;c>0;t[n+p]=255&a,p+=d,a/=256,c-=8);t[n+p-d]|=128*v}},kekF:function(t,e){function n(t,e){return function(n){return t(e(n))}}t.exports=n},kmMV:function(t,e,n){"use strict";var r=n("rW0t"),i=n("n3/R"),o=RegExp.prototype.exec,a=String.prototype.replace,s=o,u=function(){var t=/a/,e=/b*/g;return o.call(t,"a"),o.call(e,"a"),0!==t.lastIndex||0!==e.lastIndex}(),c=i.UNSUPPORTED_Y||i.BROKEN_CARET,l=void 0!==/()??/.exec("")[1],f=u||l||c;f&&(s=function(t){var e,n,i,s,f=this,h=c&&f.sticky,p=r.call(f),d=f.source,v=0,g=t;return h&&(p=p.replace("y",""),-1===p.indexOf("g")&&(p+="g"),g=String(t).slice(f.lastIndex),f.lastIndex>0&&(!f.multiline||f.multiline&&"\n"!==t[f.lastIndex-1])&&(d="(?: "+d+")",g=" "+g,v++),n=new RegExp("^(?:"+d+")",p)),l&&(n=new RegExp("^"+d+"$(?!\\s)",p)),u&&(e=f.lastIndex),i=o.call(h?n:f,g),h?i?(i.input=i.input.slice(v),i[0]=i[0].slice(v),i.index=f.lastIndex,f.lastIndex+=i[0].length):f.lastIndex=0:u&&i&&(f.lastIndex=f.global?i.index+i[0].length:e),l&&i&&i.length>1&&a.call(i[0],n,(function(){for(s=1;s<arguments.length-2;s++)void 0===arguments[s]&&(i[s]=void 0)})),i}),t.exports=s},"l/vG":function(t,e,n){"use strict";var r=n("I+eb"),i=n("xDBR"),o=n("0GbY"),a=n("glrk"),s=n("HAuM"),u=n("A2ZE"),c=n("SEBh"),l=n("Sssf"),f=n("ImZN");r({target:"Map",proto:!0,real:!0,forced:i},{filter:function(t){var e=a(this),n=l(e),r=u(t,arguments.length>1?arguments[1]:void 0,3),i=new(c(e,o("Map"))),h=s(i.set);return f(n,(function(t,n){r(n,t,e)&&h.call(i,t,n)}),void 0,!0,!0),i}})},lEou:function(t,e,n){var r=n("dG/n");r("toStringTag")},lMq5:function(t,e,n){var r=n("0Dky"),i=/#|\.prototype\./,o=function(t,e){var n=s[a(t)];return n==c||n!=u&&("function"==typeof e?r(e):!!e)},a=o.normalize=function(t){return String(t).replace(i,".").toLowerCase()},s=o.data={},u=o.NATIVE="N",c=o.POLYFILL="P";t.exports=o},lSCD:function(t,e,n){var r=n("NykK"),i=n("GoyQ"),o="[object AsyncFunction]",a="[object Function]",s="[object GeneratorFunction]",u="[object Proxy]";function c(t){if(!i(t))return!1;var e=r(t);return e==a||e==s||e==o||e==u}t.exports=c},lehK:function(t,e,n){var r=n("I+eb");r({target:"Math",stat:!0},{iaddh:function(t,e,n,r){var i=t>>>0,o=e>>>0,a=n>>>0;return o+(r>>>0)+((i&a|(i|a)&~(i+a>>>0))>>>31)|0}})},ljhN:function(t,e){function n(t,e){return t===e||t!==t&&e!==e}t.exports=n},lmH4:function(t,e,n){"use strict";var r=n("I+eb"),i=n("xDBR"),o=n("0GbY"),a=n("glrk"),s=n("HAuM"),u=n("mh/w"),c=n("ImZN");r({target:"Set",proto:!0,real:!0,forced:i},{isSubsetOf:function(t){var e=u(this),n=a(t),r=n.has;return"function"!=typeof r&&(n=new(o("Set"))(t),r=s(n.has)),!c(e,(function(t){if(!1===r.call(n,t))return c.stop()}),void 0,!1,!0).stopped}})},"m+aA":function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n("i8i4"),i=n.n(r);function o(t){return t instanceof HTMLElement?t:i.a.findDOMNode(t)}},"m/L8":function(t,e,n){var r=n("g6v/"),i=n("DPsx"),o=n("glrk"),a=n("wE6v"),s=Object.defineProperty;e.f=r?s:function(t,e,n){if(o(t),e=a(e,!0),o(n),i)try{return s(t,e,n)}catch(r){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(t[e]=n.value),t}},m92n:function(t,e,n){var r=n("glrk");t.exports=function(t,e,n,i){try{return i?e(r(n)[0],n[1]):e(n)}catch(a){var o=t["return"];throw void 0!==o&&r(o.call(t)),a}}},mGGf:function(t,e,n){"use strict";n("4mDm");var r=n("I+eb"),i=n("0GbY"),o=n("DTth"),a=n("busE"),s=n("4syw"),u=n("1E5z"),c=n("ntOU"),l=n("afO8"),f=n("GarU"),h=n("UTVS"),p=n("A2ZE"),d=n("9d/t"),v=n("glrk"),g=n("hh1v"),m=n("fHMY"),y=n("XGwC"),_=n("mh/w"),b=n("NaFW"),x=n("tiKp"),w=i("fetch"),E=i("Headers"),S=x("iterator"),O="URLSearchParams",C=O+"Iterator",T=l.set,A=l.getterFor(O),k=l.getterFor(C),M=/\+/g,P=Array(4),R=function(t){return P[t-1]||(P[t-1]=RegExp("((?:%[\\da-f]{2}){"+t+"})","gi"))},j=function(t){try{return decodeURIComponent(t)}catch(e){return t}},I=function(t){var e=t.replace(M," "),n=4;try{return decodeURIComponent(e)}catch(r){while(n)e=e.replace(R(n--),j);return e}},L=/[!'()~]|%20/g,N={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},D=function(t){return N[t]},F=function(t){return encodeURIComponent(t).replace(L,D)},B=function(t,e){if(e){var n,r,i=e.split("&"),o=0;while(o<i.length)n=i[o++],n.length&&(r=n.split("="),t.push({key:I(r.shift()),value:I(r.join("="))}))}},z=function(t){this.entries.length=0,B(this.entries,t)},U=function(t,e){if(t<e)throw TypeError("Not enough arguments")},V=c((function(t,e){T(this,{type:C,iterator:_(A(t).entries),kind:e})}),"Iterator",(function(){var t=k(this),e=t.kind,n=t.iterator.next(),r=n.value;return n.done||(n.value="keys"===e?r.key:"values"===e?r.value:[r.key,r.value]),n})),H=function(){f(this,H,O);var t,e,n,r,i,o,a,s,u,c=arguments.length>0?arguments[0]:void 0,l=this,p=[];if(T(l,{type:O,entries:p,updateURL:function(){},updateSearchParams:z}),void 0!==c)if(g(c))if(t=b(c),"function"===typeof t){e=t.call(c),n=e.next;while(!(r=n.call(e)).done){if(i=_(v(r.value)),o=i.next,(a=o.call(i)).done||(s=o.call(i)).done||!o.call(i).done)throw TypeError("Expected sequence with length 2");p.push({key:a.value+"",value:s.value+""})}}else for(u in c)h(c,u)&&p.push({key:u,value:c[u]+""});else B(p,"string"===typeof c?"?"===c.charAt(0)?c.slice(1):c:c+"")},G=H.prototype;s(G,{append:function(t,e){U(arguments.length,2);var n=A(this);n.entries.push({key:t+"",value:e+""}),n.updateURL()},delete:function(t){U(arguments.length,1);var e=A(this),n=e.entries,r=t+"",i=0;while(i<n.length)n[i].key===r?n.splice(i,1):i++;e.updateURL()},get:function(t){U(arguments.length,1);for(var e=A(this).entries,n=t+"",r=0;r<e.length;r++)if(e[r].key===n)return e[r].value;return null},getAll:function(t){U(arguments.length,1);for(var e=A(this).entries,n=t+"",r=[],i=0;i<e.length;i++)e[i].key===n&&r.push(e[i].value);return r},has:function(t){U(arguments.length,1);var e=A(this).entries,n=t+"",r=0;while(r<e.length)if(e[r++].key===n)return!0;return!1},set:function(t,e){U(arguments.length,1);for(var n,r=A(this),i=r.entries,o=!1,a=t+"",s=e+"",u=0;u<i.length;u++)n=i[u],n.key===a&&(o?i.splice(u--,1):(o=!0,n.value=s));o||i.push({key:a,value:s}),r.updateURL()},sort:function(){var t,e,n,r=A(this),i=r.entries,o=i.slice();for(i.length=0,n=0;n<o.length;n++){for(t=o[n],e=0;e<n;e++)if(i[e].key>t.key){i.splice(e,0,t);break}e===n&&i.push(t)}r.updateURL()},forEach:function(t){var e,n=A(this).entries,r=p(t,arguments.length>1?arguments[1]:void 0,3),i=0;while(i<n.length)e=n[i++],r(e.value,e.key,this)},keys:function(){return new V(this,"keys")},values:function(){return new V(this,"values")},entries:function(){return new V(this,"entries")}},{enumerable:!0}),a(G,S,G.entries),a(G,"toString",(function(){var t,e=A(this).entries,n=[],r=0;while(r<e.length)t=e[r++],n.push(F(t.key)+"="+F(t.value));return n.join("&")}),{enumerable:!0}),u(H,O),r({global:!0,forced:!o},{URLSearchParams:H}),o||"function"!=typeof w||"function"!=typeof E||r({global:!0,enumerable:!0,forced:!0},{fetch:function(t){var e,n,r,i=[t];return arguments.length>1&&(e=arguments[1],g(e)&&(n=e.body,d(n)===O&&(r=e.headers?new E(e.headers):new E,r.has("content-type")||r.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"),e=m(e,{body:y(0,String(n)),headers:y(0,r)}))),i.push(e)),w.apply(this,i)}}),t.exports={URLSearchParams:H,getState:A}},mGKP:function(t,e,n){var r=n("EdiO");function i(t,e){if(t){if("string"===typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(t,e):void 0}}t.exports=i,t.exports.__esModule=!0,t.exports["default"]=t.exports},mNvP:function(t,e,n){(function(t,e){var n;(function(n){(function(t){var r="object"===typeof e?e:"object"===typeof self?self:"object"===typeof this?this:Function("return this;")(),i=o(n);function o(t,e){return function(n,r){"function"!==typeof t[n]&&Object.defineProperty(t,n,{configurable:!0,writable:!0,value:r}),e&&e(n,r)}}"undefined"===typeof r.Reflect?r.Reflect=n:i=o(r.Reflect,i),t(i)})((function(e){var n=Object.prototype.hasOwnProperty,r="function"===typeof Symbol,i=r&&"undefined"!==typeof Symbol.toPrimitive?Symbol.toPrimitive:"@@toPrimitive",o=r&&"undefined"!==typeof Symbol.iterator?Symbol.iterator:"@@iterator",a="function"===typeof Object.create,s={__proto__:[]}instanceof Array,u=!a&&!s,c={create:a?function(){return ot(Object.create(null))}:s?function(){return ot({__proto__:null})}:function(){return ot({})},has:u?function(t,e){return n.call(t,e)}:function(t,e){return e in t},get:u?function(t,e){return n.call(t,e)?t[e]:void 0}:function(t,e){return t[e]}},l=Object.getPrototypeOf(Function),f="object"===typeof t&&Object({NODE_ENV:"production"})&&"true"===Object({NODE_ENV:"production"})["REFLECT_METADATA_USE_MAP_POLYFILL"],h=f||"function"!==typeof Map||"function"!==typeof Map.prototype.entries?nt():Map,p=f||"function"!==typeof Set||"function"!==typeof Set.prototype.entries?rt():Set,d=f||"function"!==typeof WeakMap?it():WeakMap,v=new d;function g(t,e,n,r){if(D(n)){if(!Z(t))throw new TypeError;if(!X(e))throw new TypeError;return C(t,e)}if(!Z(t))throw new TypeError;if(!z(e))throw new TypeError;if(!z(r)&&!D(r)&&!F(r))throw new TypeError;return F(r)&&(r=void 0),n=W(n),T(t,e,n,r)}function m(t,e){function n(n,r){if(!z(n))throw new TypeError;if(!D(r)&&!q(r))throw new TypeError;j(t,e,n,r)}return n}function y(t,e,n,r){if(!z(n))throw new TypeError;return D(r)||(r=W(r)),j(t,e,n,r)}function _(t,e,n){if(!z(e))throw new TypeError;return D(n)||(n=W(n)),k(t,e,n)}function b(t,e,n){if(!z(e))throw new TypeError;return D(n)||(n=W(n)),M(t,e,n)}function x(t,e,n){if(!z(e))throw new TypeError;return D(n)||(n=W(n)),P(t,e,n)}function w(t,e,n){if(!z(e))throw new TypeError;return D(n)||(n=W(n)),R(t,e,n)}function E(t,e){if(!z(t))throw new TypeError;return D(e)||(e=W(e)),I(t,e)}function S(t,e){if(!z(t))throw new TypeError;return D(e)||(e=W(e)),L(t,e)}function O(t,e,n){if(!z(e))throw new TypeError;D(n)||(n=W(n));var r=A(e,n,!1);if(D(r))return!1;if(!r["delete"](t))return!1;if(r.size>0)return!0;var i=v.get(e);return i["delete"](n),i.size>0||v["delete"](e),!0}function C(t,e){for(var n=t.length-1;n>=0;--n){var r=t[n],i=r(e);if(!D(i)&&!F(i)){if(!X(i))throw new TypeError;e=i}}return e}function T(t,e,n,r){for(var i=t.length-1;i>=0;--i){var o=t[i],a=o(e,n,r);if(!D(a)&&!F(a)){if(!z(a))throw new TypeError;r=a}}return r}function A(t,e,n){var r=v.get(t);if(D(r)){if(!n)return;r=new h,v.set(t,r)}var i=r.get(e);if(D(i)){if(!n)return;i=new h,r.set(e,i)}return i}function k(t,e,n){var r=M(t,e,n);if(r)return!0;var i=et(e);return!F(i)&&k(t,i,n)}function M(t,e,n){var r=A(e,n,!1);return!D(r)&&H(r.has(t))}function P(t,e,n){var r=M(t,e,n);if(r)return R(t,e,n);var i=et(e);return F(i)?void 0:P(t,i,n)}function R(t,e,n){var r=A(e,n,!1);if(!D(r))return r.get(t)}function j(t,e,n,r){var i=A(n,r,!0);i.set(t,e)}function I(t,e){var n=L(t,e),r=et(t);if(null===r)return n;var i=I(r,e);if(i.length<=0)return n;if(n.length<=0)return i;for(var o=new p,a=[],s=0,u=n;s<u.length;s++){var c=u[s],l=o.has(c);l||(o.add(c),a.push(c))}for(var f=0,h=i;f<h.length;f++){c=h[f],l=o.has(c);l||(o.add(c),a.push(c))}return a}function L(t,e){var n=[],r=A(t,e,!1);if(D(r))return n;var i=r.keys(),o=Q(i),a=0;while(1){var s=J(o);if(!s)return n.length=a,n;var u=$(s);try{n[a]=u}catch(c){try{tt(o)}finally{throw c}}a++}}function N(t){if(null===t)return 1;switch(typeof t){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return null===t?1:6;default:return 6}}function D(t){return void 0===t}function F(t){return null===t}function B(t){return"symbol"===typeof t}function z(t){return"object"===typeof t?null!==t:"function"===typeof t}function U(t,e){switch(N(t)){case 0:return t;case 1:return t;case 2:return t;case 3:return t;case 4:return t;case 5:return t}var n=3===e?"string":5===e?"number":"default",r=K(t,i);if(void 0!==r){var o=r.call(t,n);if(z(o))throw new TypeError;return o}return V(t,"default"===n?"number":n)}function V(t,e){if("string"===e){var n=t.toString;if(Y(n)){var r=n.call(t);if(!z(r))return r}var i=t.valueOf;if(Y(i)){r=i.call(t);if(!z(r))return r}}else{i=t.valueOf;if(Y(i)){r=i.call(t);if(!z(r))return r}var o=t.toString;if(Y(o)){r=o.call(t);if(!z(r))return r}}throw new TypeError}function H(t){return!!t}function G(t){return""+t}function W(t){var e=U(t,3);return B(e)?e:G(e)}function Z(t){return Array.isArray?Array.isArray(t):t instanceof Object?t instanceof Array:"[object Array]"===Object.prototype.toString.call(t)}function Y(t){return"function"===typeof t}function X(t){return"function"===typeof t}function q(t){switch(N(t)){case 3:return!0;case 4:return!0;default:return!1}}function K(t,e){var n=t[e];if(void 0!==n&&null!==n){if(!Y(n))throw new TypeError;return n}}function Q(t){var e=K(t,o);if(!Y(e))throw new TypeError;var n=e.call(t);if(!z(n))throw new TypeError;return n}function $(t){return t.value}function J(t){var e=t.next();return!e.done&&e}function tt(t){var e=t["return"];e&&e.call(t)}function et(t){var e=Object.getPrototypeOf(t);if("function"!==typeof t||t===l)return e;if(e!==l)return e;var n=t.prototype,r=n&&Object.getPrototypeOf(n);if(null==r||r===Object.prototype)return e;var i=r.constructor;return"function"!==typeof i||i===t?e:i}function nt(){var t={},e=[],n=function(){function t(t,e,n){this._index=0,this._keys=t,this._values=e,this._selector=n}return t.prototype["@@iterator"]=function(){return this},t.prototype[o]=function(){return this},t.prototype.next=function(){var t=this._index;if(t>=0&&t<this._keys.length){var n=this._selector(this._keys[t],this._values[t]);return t+1>=this._keys.length?(this._index=-1,this._keys=e,this._values=e):this._index++,{value:n,done:!1}}return{value:void 0,done:!0}},t.prototype["throw"]=function(t){throw this._index>=0&&(this._index=-1,this._keys=e,this._values=e),t},t.prototype["return"]=function(t){return this._index>=0&&(this._index=-1,this._keys=e,this._values=e),{value:t,done:!0}},t}();return function(){function e(){this._keys=[],this._values=[],this._cacheKey=t,this._cacheIndex=-2}return Object.defineProperty(e.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),e.prototype.has=function(t){return this._find(t,!1)>=0},e.prototype.get=function(t){var e=this._find(t,!1);return e>=0?this._values[e]:void 0},e.prototype.set=function(t,e){var n=this._find(t,!0);return this._values[n]=e,this},e.prototype["delete"]=function(e){var n=this._find(e,!1);if(n>=0){for(var r=this._keys.length,i=n+1;i<r;i++)this._keys[i-1]=this._keys[i],this._values[i-1]=this._values[i];return this._keys.length--,this._values.length--,e===this._cacheKey&&(this._cacheKey=t,this._cacheIndex=-2),!0}return!1},e.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=t,this._cacheIndex=-2},e.prototype.keys=function(){return new n(this._keys,this._values,r)},e.prototype.values=function(){return new n(this._keys,this._values,i)},e.prototype.entries=function(){return new n(this._keys,this._values,a)},e.prototype["@@iterator"]=function(){return this.entries()},e.prototype[o]=function(){return this.entries()},e.prototype._find=function(t,e){return this._cacheKey!==t&&(this._cacheIndex=this._keys.indexOf(this._cacheKey=t)),this._cacheIndex<0&&e&&(this._cacheIndex=this._keys.length,this._keys.push(t),this._values.push(void 0)),this._cacheIndex},e}();function r(t,e){return t}function i(t,e){return e}function a(t,e){return[t,e]}}function rt(){return function(){function t(){this._map=new h}return Object.defineProperty(t.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),t.prototype.has=function(t){return this._map.has(t)},t.prototype.add=function(t){return this._map.set(t,t),this},t.prototype["delete"]=function(t){return this._map["delete"](t)},t.prototype.clear=function(){this._map.clear()},t.prototype.keys=function(){return this._map.keys()},t.prototype.values=function(){return this._map.values()},t.prototype.entries=function(){return this._map.entries()},t.prototype["@@iterator"]=function(){return this.keys()},t.prototype[o]=function(){return this.keys()},t}()}function it(){var t=16,e=c.create(),r=i();return function(){function t(){this._key=i()}return t.prototype.has=function(t){var e=o(t,!1);return void 0!==e&&c.has(e,this._key)},t.prototype.get=function(t){var e=o(t,!1);return void 0!==e?c.get(e,this._key):void 0},t.prototype.set=function(t,e){var n=o(t,!0);return n[this._key]=e,this},t.prototype["delete"]=function(t){var e=o(t,!1);return void 0!==e&&delete e[this._key]},t.prototype.clear=function(){this._key=i()},t}();function i(){var t;do{t="@@WeakMap@@"+u()}while(c.has(e,t));return e[t]=!0,t}function o(t,e){if(!n.call(t,r)){if(!e)return;Object.defineProperty(t,r,{value:c.create()})}return t[r]}function a(t,e){for(var n=0;n<e;++n)t[n]=255*Math.random()|0;return t}function s(t){return"function"===typeof Uint8Array?"undefined"!==typeof crypto?crypto.getRandomValues(new Uint8Array(t)):"undefined"!==typeof msCrypto?msCrypto.getRandomValues(new Uint8Array(t)):a(new Uint8Array(t),t):a(new Array(t),t)}function u(){var e=s(t);e[6]=79&e[6]|64,e[8]=191&e[8]|128;for(var n="",r=0;r<t;++r){var i=e[r];4!==r&&6!==r&&8!==r||(n+="-"),i<16&&(n+="0"),n+=i.toString(16).toLowerCase()}return n}}function ot(t){return t.__=void 0,delete t.__,t}e("decorate",g),e("metadata",m),e("defineMetadata",y),e("hasMetadata",_),e("hasOwnMetadata",b),e("getMetadata",x),e("getOwnMetadata",w),e("getMetadataKeys",E),e("getOwnMetadataKeys",S),e("deleteMetadata",O)}))})(n||(n={}))}).call(this,n("Q2Ig"),n("IyRk"))},mTTR:function(t,e,n){var r=n("b80T"),i=n("QcOe"),o=n("MMmD");function a(t){return o(t)?r(t,!0):i(t)}t.exports=a},ma9I:function(t,e,n){"use strict";var r=n("I+eb"),i=n("0Dky"),o=n("6LWA"),a=n("hh1v"),s=n("ewvW"),u=n("UMSQ"),c=n("hBjN"),l=n("ZfDv"),f=n("Hd5f"),h=n("tiKp"),p=n("LQDL"),d=h("isConcatSpreadable"),v=9007199254740991,g="Maximum allowed index exceeded",m=p>=51||!i((function(){var t=[];return t[d]=!1,t.concat()[0]!==t})),y=f("concat"),_=function(t){if(!a(t))return!1;var e=t[d];return void 0!==e?!!e:o(t)},b=!m||!y;r({target:"Array",proto:!0,forced:b},{concat:function(t){var e,n,r,i,o,a=s(this),f=l(a,0),h=0;for(e=-1,r=arguments.length;e<r;e++)if(o=-1===e?a:arguments[e],_(o)){if(i=u(o.length),h+i>v)throw TypeError(g);for(n=0;n<i;n++,h++)n in o&&c(f,h,o[n])}else{if(h>=v)throw TypeError(g);c(f,h++,o)}return f.length=h,f}})},mc0g:function(t,e){function n(t){return function(e,n,r){var i=-1,o=Object(e),a=r(e),s=a.length;while(s--){var u=a[t?s:++i];if(!1===n(o[u],u,o))break}return e}}t.exports=n},md7G:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n("U8pU"),i=n("JX7q");function o(t,e){if(e&&("object"===Object(r["a"])(e)||"function"===typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Object(i["a"])(t)}},mdPL:function(t,e,n){(function(t){var r=n("WFqU"),i=e&&!e.nodeType&&e,o=i&&"object"==typeof t&&t&&!t.nodeType&&t,a=o&&o.exports===i,s=a&&r.process,u=function(){try{var t=o&&o.require&&o.require("util").types;return t||s&&s.binding&&s.binding("util")}catch(e){}}();t.exports=u}).call(this,n("hOG+")(t))},mdU6:function(t,e,n){},mgyK:function(t,e,n){var r=n("NC/Y");t.exports=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(r)},"mh/w":function(t,e,n){var r=n("glrk"),i=n("NaFW");t.exports=function(t){var e=i(t);if("function"!=typeof e)throw TypeError(String(t)+" is not iterable");return r(e.call(t))}},mpbz:function(t,e,n){(function(e,n){t.exports=n()})(0,(function(){"use strict";function t(n,r,i,o,a,s){if(!(a-o<=i)){var u=o+a>>1;e(n,r,u,o,a,s%2),t(n,r,i,o,u-1,s+1),t(n,r,i,u+1,a,s+1)}}function e(t,r,i,o,a,s){while(a>o){if(a-o>600){var u=a-o+1,c=i-o+1,l=Math.log(u),f=.5*Math.exp(2*l/3),h=.5*Math.sqrt(l*f*(u-f)/u)*(c-u/2<0?-1:1),p=Math.max(o,Math.floor(i-c*f/u+h)),d=Math.min(a,Math.floor(i+(u-c)*f/u+h));e(t,r,i,p,d,s)}var v=r[2*i+s],g=o,m=a;n(t,r,o,i),r[2*a+s]>v&&n(t,r,o,a);while(g<m){n(t,r,g,m),g++,m--;while(r[2*g+s]<v)g++;while(r[2*m+s]>v)m--}r[2*o+s]===v?n(t,r,o,m):(m++,n(t,r,m,a)),m<=i&&(o=m+1),i<=m&&(a=m-1)}}function n(t,e,n,i){r(t,n,i),r(e,2*n,2*i),r(e,2*n+1,2*i+1)}function r(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function i(t,e,n,r,i,o,a){var s,u,c=[0,t.length-1,0],l=[];while(c.length){var f=c.pop(),h=c.pop(),p=c.pop();if(h-p<=a)for(var d=p;d<=h;d++)s=e[2*d],u=e[2*d+1],s>=n&&s<=i&&u>=r&&u<=o&&l.push(t[d]);else{var v=Math.floor((p+h)/2);s=e[2*v],u=e[2*v+1],s>=n&&s<=i&&u>=r&&u<=o&&l.push(t[v]);var g=(f+1)%2;(0===f?n<=s:r<=u)&&(c.push(p),c.push(v-1),c.push(g)),(0===f?i>=s:o>=u)&&(c.push(v+1),c.push(h),c.push(g))}}return l}function o(t,e,n,r,i,o){var s=[0,t.length-1,0],u=[],c=i*i;while(s.length){var l=s.pop(),f=s.pop(),h=s.pop();if(f-h<=o)for(var p=h;p<=f;p++)a(e[2*p],e[2*p+1],n,r)<=c&&u.push(t[p]);else{var d=Math.floor((h+f)/2),v=e[2*d],g=e[2*d+1];a(v,g,n,r)<=c&&u.push(t[d]);var m=(l+1)%2;(0===l?n-i<=v:r-i<=g)&&(s.push(h),s.push(d-1),s.push(m)),(0===l?n+i>=v:r+i>=g)&&(s.push(d+1),s.push(f),s.push(m))}}return u}function a(t,e,n,r){var i=t-n,o=e-r;return i*i+o*o}var s=function(t){return t[0]},u=function(t){return t[1]},c=function(e,n,r,i,o){void 0===n&&(n=s),void 0===r&&(r=u),void 0===i&&(i=64),void 0===o&&(o=Float64Array),this.nodeSize=i,this.points=e;for(var a=e.length<65536?Uint16Array:Uint32Array,c=this.ids=new a(e.length),l=this.coords=new o(2*e.length),f=0;f<e.length;f++)c[f]=f,l[2*f]=n(e[f]),l[2*f+1]=r(e[f]);t(c,l,i,0,c.length-1,0)};c.prototype.range=function(t,e,n,r){return i(this.ids,this.coords,t,e,n,r,this.nodeSize)},c.prototype.within=function(t,e,n){return o(this.ids,this.coords,t,e,n,this.nodeSize)};var l={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(t){return t}},f=Math.fround||function(t){return function(e){return t[0]=+e,t[0]}}(new Float32Array(1)),h=function(t){this.options=x(Object.create(l),t),this.trees=new Array(this.options.maxZoom+1)};function p(t,e,n,r,i){return{x:f(t),y:f(e),zoom:1/0,id:n,parentId:-1,numPoints:r,properties:i}}function d(t,e){var n=t.geometry.coordinates,r=n[0],i=n[1];return{x:f(m(r)),y:f(y(i)),zoom:1/0,index:e,parentId:-1}}function v(t){return{type:"Feature",id:t.id,properties:g(t),geometry:{type:"Point",coordinates:[_(t.x),b(t.y)]}}}function g(t){var e=t.numPoints,n=e>=1e4?Math.round(e/1e3)+"k":e>=1e3?Math.round(e/100)/10+"k":e;return x(x({},t.properties),{cluster:!0,cluster_id:t.id,point_count:e,point_count_abbreviated:n})}function m(t){return t/360+.5}function y(t){var e=Math.sin(t*Math.PI/180),n=.5-.25*Math.log((1+e)/(1-e))/Math.PI;return n<0?0:n>1?1:n}function _(t){return 360*(t-.5)}function b(t){var e=(180-360*t)*Math.PI/180;return 360*Math.atan(Math.exp(e))/Math.PI-90}function x(t,e){for(var n in e)t[n]=e[n];return t}function w(t){return t.x}function E(t){return t.y}return h.prototype.load=function(t){var e=this.options,n=e.log,r=e.minZoom,i=e.maxZoom,o=e.nodeSize;n&&console.time("total time");var a="prepare "+t.length+" points";n&&console.time(a),this.points=t;for(var s=[],u=0;u<t.length;u++)t[u].geometry&&s.push(d(t[u],u));this.trees[i+1]=new c(s,w,E,o,Float32Array),n&&console.timeEnd(a);for(var l=i;l>=r;l--){var f=+Date.now();s=this._cluster(s,l),this.trees[l]=new c(s,w,E,o,Float32Array),n&&console.log("z%d: %d clusters in %dms",l,s.length,+Date.now()-f)}return n&&console.timeEnd("total time"),this},h.prototype.getClusters=function(t,e){var n=((t[0]+180)%360+360)%360-180,r=Math.max(-90,Math.min(90,t[1])),i=180===t[2]?180:((t[2]+180)%360+360)%360-180,o=Math.max(-90,Math.min(90,t[3]));if(t[2]-t[0]>=360)n=-180,i=180;else if(n>i){var a=this.getClusters([n,r,180,o],e),s=this.getClusters([-180,r,i,o],e);return a.concat(s)}for(var u=this.trees[this._limitZoom(e)],c=u.range(m(n),y(o),m(i),y(r)),l=[],f=0,h=c;f<h.length;f+=1){var p=h[f],d=u.points[p];l.push(d.numPoints?v(d):this.points[d.index])}return l},h.prototype.getChildren=function(t){var e=this._getOriginId(t),n=this._getOriginZoom(t),r="No cluster with the specified id.",i=this.trees[n];if(!i)throw new Error(r);var o=i.points[e];if(!o)throw new Error(r);for(var a=this.options.radius/(this.options.extent*Math.pow(2,n-1)),s=i.within(o.x,o.y,a),u=[],c=0,l=s;c<l.length;c+=1){var f=l[c],h=i.points[f];h.parentId===t&&u.push(h.numPoints?v(h):this.points[h.index])}if(0===u.length)throw new Error(r);return u},h.prototype.getLeaves=function(t,e,n){e=e||10,n=n||0;var r=[];return this._appendLeaves(r,t,e,n,0),r},h.prototype.getTile=function(t,e,n){var r=this.trees[this._limitZoom(t)],i=Math.pow(2,t),o=this.options,a=o.extent,s=o.radius,u=s/a,c=(n-u)/i,l=(n+1+u)/i,f={features:[]};return this._addTileFeatures(r.range((e-u)/i,c,(e+1+u)/i,l),r.points,e,n,i,f),0===e&&this._addTileFeatures(r.range(1-u/i,c,1,l),r.points,i,n,i,f),e===i-1&&this._addTileFeatures(r.range(0,c,u/i,l),r.points,-1,n,i,f),f.features.length?f:null},h.prototype.getClusterExpansionZoom=function(t){var e=this._getOriginZoom(t)-1;while(e<=this.options.maxZoom){var n=this.getChildren(t);if(e++,1!==n.length)break;t=n[0].properties.cluster_id}return e},h.prototype._appendLeaves=function(t,e,n,r,i){for(var o=this.getChildren(e),a=0,s=o;a<s.length;a+=1){var u=s[a],c=u.properties;if(c&&c.cluster?i+c.point_count<=r?i+=c.point_count:i=this._appendLeaves(t,c.cluster_id,n,r,i):i<r?i++:t.push(u),t.length===n)break}return i},h.prototype._addTileFeatures=function(t,e,n,r,i,o){for(var a=0,s=t;a<s.length;a+=1){var u=s[a],c=e[u],l=c.numPoints,f=void 0,h=void 0,p=void 0;if(l)f=g(c),h=c.x,p=c.y;else{var d=this.points[c.index];f=d.properties,h=m(d.geometry.coordinates[0]),p=y(d.geometry.coordinates[1])}var v={type:1,geometry:[[Math.round(this.options.extent*(h*i-n)),Math.round(this.options.extent*(p*i-r))]],tags:f},_=void 0;l?_=c.id:this.options.generateId?_=c.index:this.points[c.index].id&&(_=this.points[c.index].id),void 0!==_&&(v.id=_),o.features.push(v)}},h.prototype._limitZoom=function(t){return Math.max(this.options.minZoom,Math.min(Math.floor(+t),this.options.maxZoom+1))},h.prototype._cluster=function(t,e){for(var n=[],r=this.options,i=r.radius,o=r.extent,a=r.reduce,s=r.minPoints,u=i/(o*Math.pow(2,e)),c=0;c<t.length;c++){var l=t[c];if(!(l.zoom<=e)){l.zoom=e;for(var f=this.trees[e+1],h=f.within(l.x,l.y,u),d=l.numPoints||1,v=d,g=0,m=h;g<m.length;g+=1){var y=m[g],_=f.points[y];_.zoom>e&&(v+=_.numPoints||1)}if(v>d&&v>=s){for(var b=l.x*d,x=l.y*d,w=a&&d>1?this._map(l,!0):null,E=(c<<5)+(e+1)+this.points.length,S=0,O=h;S<O.length;S+=1){var C=O[S],T=f.points[C];if(!(T.zoom<=e)){T.zoom=e;var A=T.numPoints||1;b+=T.x*A,x+=T.y*A,T.parentId=E,a&&(w||(w=this._map(l,!0)),a(w,this._map(T)))}}l.parentId=E,n.push(p(b/v,x/v,E,v,w))}else if(n.push(l),v>1)for(var k=0,M=h;k<M.length;k+=1){var P=M[k],R=f.points[P];R.zoom<=e||(R.zoom=e,n.push(R))}}}return n},h.prototype._getOriginId=function(t){return t-this.points.length>>5},h.prototype._getOriginZoom=function(t){return(t-this.points.length)%32},h.prototype._map=function(t,e){if(t.numPoints)return e?x({},t.properties):t.properties;var n=this.points[t.index].properties,r=this.options.map(n);return e&&r===n?x({},r):r},h}))},"mv/X":function(t,e,n){var r=n("ljhN"),i=n("MMmD"),o=n("wJg7"),a=n("GoyQ");function s(t,e,n){if(!a(n))return!1;var s=typeof e;return!!("number"==s?i(n)&&o(e,n.length):"string"==s&&e in n)&&r(n[e],t)}t.exports=s},n2J3:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.unmanaged=void 0;var r=n("xfSm"),i=n("GXnB"),o=n("Ztfv");function a(){return function(t,e,n){var a=new i.Metadata(r.UNMANAGED_TAG,!0);o.tagParameter(t,e,n,a)}}e.unmanaged=a},"n3/R":function(t,e,n){"use strict";var r=n("0Dky");function i(t,e){return RegExp(t,e)}e.UNSUPPORTED_Y=r((function(){var t=i("a","y");return t.lastIndex=2,null!=t.exec("abcd")})),e.BROKEN_CARET=r((function(){var t=i("^r","gy");return t.lastIndex=2,null!=t.exec("str")}))},n5b4:function(t,e,n){var r=n("I+eb"),i=n("2oRo"),o=n("tXUg"),a=n("xrYK"),s=i.process,u="process"==a(s);r({global:!0,enumerable:!0,noTargetGet:!0},{queueMicrotask:function(t){var e=u&&s.domain;o(e?e.bind(t):t)}})},n5pg:function(t,e,n){"use strict";var r=n("I+eb"),i=n("xDBR"),o=n("glrk"),a=n("A2ZE"),s=n("Sssf"),u=n("ImZN");r({target:"Map",proto:!0,real:!0,forced:i},{findKey:function(t){var e=o(this),n=s(e),r=a(t,arguments.length>1?arguments[1]:void 0,3);return u(n,(function(t,n){if(r(n,t,e))return u.stop(t)}),void 0,!0,!0).result}})},nIe3:function(t,e,n){"use strict";var r=n("I+eb"),i=n("xDBR"),o=n("0GbY"),a=n("glrk"),s=n("HAuM"),u=n("A2ZE"),c=n("SEBh"),l=n("Sssf"),f=n("ImZN");r({target:"Map",proto:!0,real:!0,forced:i},{mapKeys:function(t){var e=a(this),n=l(e),r=u(t,arguments.length>1?arguments[1]:void 0,3),i=new(c(e,o("Map"))),h=s(i.set);return f(n,(function(t,n){h.call(i,r(n,t,e),n)}),void 0,!0,!0),i}})},nLCz:function(t,e,n){"use strict";function r(){var t=i(n("q1tI"));return r=function(){return t},t}function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=void 0;var o=r()["default"].createContext({config:{mode:"doc",title:"",navs:{},menus:{},locales:[],repository:{branch:"master"},theme:{}},meta:{title:""},menu:[],nav:[],base:"",routes:[],apis:{},demos:{}});e["default"]=o},nmnc:function(t,e,n){var r=n("Kz5y"),i=r.Symbol;t.exports=i},ntOU:function(t,e,n){"use strict";var r=n("rpNk").IteratorPrototype,i=n("fHMY"),o=n("XGwC"),a=n("1E5z"),s=n("P4y1"),u=function(){return this};t.exports=function(t,e,n){var c=e+" Iterator";return t.prototype=i(r,{next:o(1,n)}),a(t,c,!1,!0),s[c]=u,t}},nvu9:function(t,e,n){"use strict";e.__esModule=!0,e.getParameters=void 0;var r=n("e9O8");e.getParameters=r.getParameters},ny8l:function(t,e,n){var r=n("I+eb");r({target:"Math",stat:!0},{signbit:function(t){return(t=+t)==t&&0==t?1/t==-1/0:t<0}})},o0kM:function(t,e,n){"use strict";var r=n("dmwd")["default"],i=n("5wUe")["default"];function o(){var t=n("q1tI");return o=function(){return t},t}function a(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function s(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?a(Object(n),!0).forEach((function(e){u(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function u(t,e,n){return e=c(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function c(t){var e=l(t,"string");return"symbol"===typeof e?e:String(e)}function l(t,e){if("object"!==typeof t||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function f(t,e){return g(t)||v(t,e)||p(t,e)||h()}function h(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function p(t,e){if(t){if("string"===typeof t)return d(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?d(t,e):void 0}}function d(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function v(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o,a,s=[],u=!0,c=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);u=!0);}catch(l){c=!0,i=l}finally{try{if(!u&&null!=n["return"]&&(a=n["return"](),Object(a)!==a))return}finally{if(c)throw i}}return s}}function g(t){if(Array.isArray(t))return t}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=void 0;var m,y="https://riddle.alibaba-inc.com/riddles/define",_=function(){var t=(0,o().useState)(Boolean(m)),e=f(t,2),n=e[0],r=e[1];return(0,o().useEffect)((function(){if(void 0===m){var t=document.createElement("img");setTimeout((function(){t.src="",t.remove()}),200),t.onload=function(){m=!0,r(!0),t.remove()},t.src="https://private-alipayobjects.alipay.com/alipay-rmsdeploy-image/rmsportal/RKuAiriJqrUhyqW.png"}}),[]),n};function b(t){var e=t.sources._.tsx||t.sources._.jsx;return e=e.replace(/^/,"import ReactDOM from 'react-dom';\n").replace("export default","const DumiDemo =").concat("\nReactDOM.render(<DumiDemo />, mountNode);"),e}var x=function(t){var e=(0,o().useState)(),n=f(e,2),a=n[0],u=n[1],c=_();return(0,o().useEffect)((function(){if(t&&c&&1===Object.keys(t.sources).length){var e,n=document.createElement("form"),o=document.createElement("input");return n.method="POST",n.target="_blank",n.style.display="none",n.action=y,n.appendChild(o),n.setAttribute("data-demo",t.title||""),o.name="data",o.value=JSON.stringify({title:t.titlle,js:b(t),css:Object.entries(t.dependencies).filter((function(t){var e=i(t,2),n=e[1];return n.css})).map((function(t){var e=i(t,2),n=e[0],r=e[1],o=r.version,a=r.css;return"@import '~".concat(a.replace(new RegExp("^(".concat(n,")")),"$1@".concat(o)),"';")})).concat(t.background?"body {\n  background: ".concat(t.background,";\n}"):"").join("\n"),json:JSON.stringify({description:t.description,dependencies:Object.entries(t.dependencies).reduce((function(t,e){var n=i(e,2),o=n[0],a=n[1].version;return s(s({},t),{},r({},o,a))}),{"react-dom":(null===(e=t.dependencies.react)||void 0===e?void 0:e.version)||"latest"})},null,2)}),document.body.appendChild(n),u((function(){return function(){return n.submit()}})),function(){return n.remove()}}}),[t,c]),a};e["default"]=x},o0o1:function(t,e,n){var r=n("fsL8")();t.exports=r;try{regeneratorRuntime=r}catch(i){"object"===typeof globalThis?globalThis.regeneratorRuntime=r:Function("r","regeneratorRuntime = r")(r)}},o46R:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n("U8pU");function i(t,e){if("object"!==Object(r["a"])(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!==Object(r["a"])(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function o(t){var e=i(t,"string");return"symbol"===Object(r["a"])(e)?e:String(e)}},"oHi+":function(t,e,n){var r=n("ewvW"),i=n("UMSQ"),o=n("NaFW"),a=n("6VoE"),s=n("A2ZE"),u=n("67WC").aTypedArrayConstructor;t.exports=function(t){var e,n,c,l,f,h,p=r(t),d=arguments.length,v=d>1?arguments[1]:void 0,g=void 0!==v,m=o(p);if(void 0!=m&&!a(m)){f=m.call(p),h=f.next,p=[];while(!(l=h.call(f)).done)p.push(l.value)}for(g&&d>2&&(v=s(v,arguments[2],2)),n=i(p.length),c=new(u(this))(n),e=0;n>e;e++)c[e]=g?v(p[e],e):p[e];return c}},oaX6:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.targetName=void 0;var r=n("xfSm"),i=n("GXnB"),o=n("Ztfv");function a(t){return function(e,n,a){var s=new i.Metadata(r.NAME_TAG,t);o.tagParameter(e,n,a,s)}}e.targetName=a},ofBz:function(t,e,n){"use strict";var r=n("I+eb"),i=n("ntOU"),o=n("HYAF"),a=n("UMSQ"),s=n("HAuM"),u=n("glrk"),c=n("xrYK"),l=n("ROdP"),f=n("rW0t"),h=n("kRJp"),p=n("0Dky"),d=n("tiKp"),v=n("SEBh"),g=n("iqWW"),m=n("afO8"),y=n("xDBR"),_=d("matchAll"),b="RegExp String",x=b+" Iterator",w=m.set,E=m.getterFor(x),S=RegExp.prototype,O=S.exec,C="".matchAll,T=!!C&&!p((function(){"a".matchAll(/./)})),A=function(t,e){var n,r=t.exec;if("function"==typeof r){if(n=r.call(t,e),"object"!=typeof n)throw TypeError("Incorrect exec result");return n}return O.call(t,e)},k=i((function(t,e,n,r){w(this,{type:x,regexp:t,string:e,global:n,unicode:r,done:!1})}),b,(function(){var t=E(this);if(t.done)return{value:void 0,done:!0};var e=t.regexp,n=t.string,r=A(e,n);return null===r?{value:void 0,done:t.done=!0}:t.global?(""==String(r[0])&&(e.lastIndex=g(n,a(e.lastIndex),t.unicode)),{value:r,done:!1}):(t.done=!0,{value:r,done:!1})})),M=function(t){var e,n,r,i,o,s,c=u(this),l=String(t);return e=v(c,RegExp),n=c.flags,void 0===n&&c instanceof RegExp&&!("flags"in S)&&(n=f.call(c)),r=void 0===n?"":String(n),i=new e(e===RegExp?c.source:c,r),o=!!~r.indexOf("g"),s=!!~r.indexOf("u"),i.lastIndex=a(c.lastIndex),new k(i,l,o,s)};r({target:"String",proto:!0,forced:T},{matchAll:function(t){var e,n,r,i,a=o(this);if(null!=t){if(l(t)&&(e=String(o("flags"in S?t.flags:f.call(t))),!~e.indexOf("g")))throw TypeError("`.matchAll` does not allow non-global regexes");if(T)return C.apply(a,arguments);if(r=t[_],void 0===r&&y&&"RegExp"==c(t)&&(r=M),null!=r)return s(r).call(t,a)}else if(T)return C.apply(a,arguments);return n=String(a),i=new RegExp(t,"g"),y?M.call(i,n):i[_](n)}}),y||_ in S||h(S,_,M)},or5M:function(t,e,n){var r=n("1hJj"),i=n("QoRX"),o=n("xYSL"),a=1,s=2;function u(t,e,n,u,c,l){var f=n&a,h=t.length,p=e.length;if(h!=p&&!(f&&p>h))return!1;var d=l.get(t),v=l.get(e);if(d&&v)return d==e&&v==t;var g=-1,m=!0,y=n&s?new r:void 0;l.set(t,e),l.set(e,t);while(++g<h){var _=t[g],b=e[g];if(u)var x=f?u(b,_,g,e,t,l):u(_,b,g,t,e,l);if(void 0!==x){if(x)continue;m=!1;break}if(y){if(!i(e,(function(t,e){if(!o(y,e)&&(_===t||c(_,t,n,u,l)))return y.push(e)}))){m=!1;break}}else if(_!==b&&!c(_,b,n,u,l)){m=!1;break}}return l["delete"](t),l["delete"](e),m}t.exports=u},or9q:function(t,e,n){"use strict";var r=n("6LWA"),i=n("UMSQ"),o=n("A2ZE"),a=function(t,e,n,s,u,c,l,f){var h,p=u,d=0,v=!!l&&o(l,f,3);while(d<s){if(d in n){if(h=v?v(n[d],d,e):n[d],c>0&&r(h))p=a(t,e,h,i(h.length),p,c-1)-1;else{if(p>=9007199254740991)throw TypeError("Exceed the acceptable array length");t[p]=h}p++}d++}return p};t.exports=a},"oy+k":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Context=void 0;var r=n("d9O0"),i=function(){function t(t){this.id=r.id(),this.container=t}return t.prototype.addPlan=function(t){this.plan=t},t.prototype.setCurrentRequest=function(t){this.currentRequest=t},t}();e.Context=i},p532:function(t,e,n){"use strict";var r=n("I+eb"),i=n("xDBR"),o=n("/qmn"),a=n("0Dky"),s=n("0GbY"),u=n("SEBh"),c=n("zfnd"),l=n("busE"),f=!!o&&a((function(){o.prototype["finally"].call({then:function(){}},(function(){}))}));r({target:"Promise",proto:!0,real:!0,forced:f},{finally:function(t){var e=u(this,s("Promise")),n="function"==typeof t;return this.then(n?function(n){return c(e,t()).then((function(){return n}))}:t,n?function(n){return c(e,t()).then((function(){throw n}))}:t)}}),i||"function"!=typeof o||o.prototype["finally"]||l(o.prototype,"finally",s("Promise").prototype["finally"])},p5mE:function(t,e,n){var r=n("Tskq"),i=n("ENF9"),o=n("fHMY"),a=n("hh1v"),s=function(){this.object=null,this.symbol=null,this.primitives=null,this.objectsByIndex=o(null)};s.prototype.get=function(t,e){return this[t]||(this[t]=e())},s.prototype.next=function(t,e,n){var o=n?this.objectsByIndex[t]||(this.objectsByIndex[t]=new i):this.primitives||(this.primitives=new r),a=o.get(e);return a||o.set(e,a=new s),a};var u=new s;t.exports=function(){var t,e,n=u,r=arguments.length;for(t=0;t<r;t++)a(e=arguments[t])&&(n=n.next(t,e,!0));if(this===Object&&n===u)throw TypeError("Composite keys must contain a non-primitive component");for(t=0;t<r;t++)a(e=arguments[t])||(n=n.next(t,e,!1));return n}},pDQq:function(t,e,n){"use strict";var r=n("I+eb"),i=n("I8vh"),o=n("ppGB"),a=n("UMSQ"),s=n("ewvW"),u=n("ZfDv"),c=n("hBjN"),l=n("Hd5f"),f=n("rkAj"),h=l("splice"),p=f("splice",{ACCESSORS:!0,0:0,1:2}),d=Math.max,v=Math.min,g=9007199254740991,m="Maximum allowed length exceeded";r({target:"Array",proto:!0,forced:!h||!p},{splice:function(t,e){var n,r,l,f,h,p,y=s(this),_=a(y.length),b=i(t,_),x=arguments.length;if(0===x?n=r=0:1===x?(n=0,r=_-b):(n=x-2,r=v(d(o(e),0),_-b)),_+n-r>g)throw TypeError(m);for(l=u(y,r),f=0;f<r;f++)h=b+f,h in y&&c(l,f,y[h]);if(l.length=r,n<r){for(f=b;f<_-r;f++)h=f+r,p=f+n,h in y?y[p]=y[h]:delete y[p];for(f=_;f>_-r+n;f--)delete y[f-1]}else if(n>r)for(f=_-r;f>b;f--)h=f+r-1,p=f+n-1,h in y?y[p]=y[h]:delete y[p];for(f=0;f<n;f++)y[f+b]=arguments[f+2];return y.length=_-r+n,l}})},pFRH:function(t,e,n){var r=n("cvCv"),i=n("O0oS"),o=n("zZ0H"),a=i?function(t,e){return i(t,"toString",{configurable:!0,enumerable:!1,value:r(e),writable:!0})}:o;t.exports=a},pNMO:function(t,e,n){"use strict";var r=n("I+eb"),i=n("2oRo"),o=n("0GbY"),a=n("xDBR"),s=n("g6v/"),u=n("STAE"),c=n("/b8u"),l=n("0Dky"),f=n("UTVS"),h=n("6LWA"),p=n("hh1v"),d=n("glrk"),v=n("ewvW"),g=n("/GqU"),m=n("wE6v"),y=n("XGwC"),_=n("fHMY"),b=n("33Wh"),x=n("JBy8"),w=n("BX/b"),E=n("dBg+"),S=n("Bs8V"),O=n("m/L8"),C=n("0eef"),T=n("kRJp"),A=n("busE"),k=n("VpIT"),M=n("93I0"),P=n("0BK2"),R=n("kOOl"),j=n("tiKp"),I=n("5Tg+"),L=n("dG/n"),N=n("1E5z"),D=n("afO8"),F=n("tycR").forEach,B=M("hidden"),z="Symbol",U="prototype",V=j("toPrimitive"),H=D.set,G=D.getterFor(z),W=Object[U],Z=i.Symbol,Y=o("JSON","stringify"),X=S.f,q=O.f,K=w.f,Q=C.f,$=k("symbols"),J=k("op-symbols"),tt=k("string-to-symbol-registry"),et=k("symbol-to-string-registry"),nt=k("wks"),rt=i.QObject,it=!rt||!rt[U]||!rt[U].findChild,ot=s&&l((function(){return 7!=_(q({},"a",{get:function(){return q(this,"a",{value:7}).a}})).a}))?function(t,e,n){var r=X(W,e);r&&delete W[e],q(t,e,n),r&&t!==W&&q(W,e,r)}:q,at=function(t,e){var n=$[t]=_(Z[U]);return H(n,{type:z,tag:t,description:e}),s||(n.description=e),n},st=c?function(t){return"symbol"==typeof t}:function(t){return Object(t)instanceof Z},ut=function(t,e,n){t===W&&ut(J,e,n),d(t);var r=m(e,!0);return d(n),f($,r)?(n.enumerable?(f(t,B)&&t[B][r]&&(t[B][r]=!1),n=_(n,{enumerable:y(0,!1)})):(f(t,B)||q(t,B,y(1,{})),t[B][r]=!0),ot(t,r,n)):q(t,r,n)},ct=function(t,e){d(t);var n=g(e),r=b(n).concat(dt(n));return F(r,(function(e){s&&!ft.call(n,e)||ut(t,e,n[e])})),t},lt=function(t,e){return void 0===e?_(t):ct(_(t),e)},ft=function(t){var e=m(t,!0),n=Q.call(this,e);return!(this===W&&f($,e)&&!f(J,e))&&(!(n||!f(this,e)||!f($,e)||f(this,B)&&this[B][e])||n)},ht=function(t,e){var n=g(t),r=m(e,!0);if(n!==W||!f($,r)||f(J,r)){var i=X(n,r);return!i||!f($,r)||f(n,B)&&n[B][r]||(i.enumerable=!0),i}},pt=function(t){var e=K(g(t)),n=[];return F(e,(function(t){f($,t)||f(P,t)||n.push(t)})),n},dt=function(t){var e=t===W,n=K(e?J:g(t)),r=[];return F(n,(function(t){!f($,t)||e&&!f(W,t)||r.push($[t])})),r};if(u||(Z=function(){if(this instanceof Z)throw TypeError("Symbol is not a constructor");var t=arguments.length&&void 0!==arguments[0]?String(arguments[0]):void 0,e=R(t),n=function(t){this===W&&n.call(J,t),f(this,B)&&f(this[B],e)&&(this[B][e]=!1),ot(this,e,y(1,t))};return s&&it&&ot(W,e,{configurable:!0,set:n}),at(e,t)},A(Z[U],"toString",(function(){return G(this).tag})),A(Z,"withoutSetter",(function(t){return at(R(t),t)})),C.f=ft,O.f=ut,S.f=ht,x.f=w.f=pt,E.f=dt,I.f=function(t){return at(j(t),t)},s&&(q(Z[U],"description",{configurable:!0,get:function(){return G(this).description}}),a||A(W,"propertyIsEnumerable",ft,{unsafe:!0}))),r({global:!0,wrap:!0,forced:!u,sham:!u},{Symbol:Z}),F(b(nt),(function(t){L(t)})),r({target:z,stat:!0,forced:!u},{for:function(t){var e=String(t);if(f(tt,e))return tt[e];var n=Z(e);return tt[e]=n,et[n]=e,n},keyFor:function(t){if(!st(t))throw TypeError(t+" is not a symbol");if(f(et,t))return et[t]},useSetter:function(){it=!0},useSimple:function(){it=!1}}),r({target:"Object",stat:!0,forced:!u,sham:!s},{create:lt,defineProperty:ut,defineProperties:ct,getOwnPropertyDescriptor:ht}),r({target:"Object",stat:!0,forced:!u},{getOwnPropertyNames:pt,getOwnPropertySymbols:dt}),r({target:"Object",stat:!0,forced:l((function(){E.f(1)}))},{getOwnPropertySymbols:function(t){return E.f(v(t))}}),Y){var vt=!u||l((function(){var t=Z();return"[null]"!=Y([t])||"{}"!=Y({a:t})||"{}"!=Y(Object(t))}));r({target:"JSON",stat:!0,forced:vt},{stringify:function(t,e,n){var r,i=[t],o=1;while(arguments.length>o)i.push(arguments[o++]);if(r=e,(p(e)||void 0!==t)&&!st(t))return h(e)||(e=function(t,e){if("function"==typeof r&&(e=r.call(this,t,e)),!st(e))return e}),i[1]=e,Y.apply(null,i)}})}Z[U][V]||T(Z[U],V,Z[U].valueOf),N(Z,z),P[B]=!0},pSRY:function(t,e,n){var r=n("QkVE");function i(t){return r(this,t).has(t)}t.exports=i},pevA:function(t,e,n){"use strict";var r=n("I+eb"),i=n("g6v/"),o=n("JiZb"),a=n("HAuM"),s=n("glrk"),u=n("hh1v"),c=n("GarU"),l=n("m/L8").f,f=n("kRJp"),h=n("4syw"),p=n("mh/w"),d=n("ImZN"),v=n("RN6c"),g=n("tiKp"),m=n("afO8"),y=g("observable"),_=m.get,b=m.set,x=function(t){return null==t?void 0:a(t)},w=function(t){var e=t.cleanup;if(e){t.cleanup=void 0;try{e()}catch(n){v(n)}}},E=function(t){return void 0===t.observer},S=function(t,e){if(!i){t.closed=!0;var n=e.subscriptionObserver;n&&(n.closed=!0)}e.observer=void 0},O=function(t,e){var n,r=b(this,{cleanup:void 0,observer:s(t),subscriptionObserver:void 0});i||(this.closed=!1);try{(n=x(t.start))&&n.call(t,this)}catch(l){v(l)}if(!E(r)){var o=r.subscriptionObserver=new C(this);try{var u=e(o),c=u;null!=u&&(r.cleanup="function"===typeof u.unsubscribe?function(){c.unsubscribe()}:a(u))}catch(l){return void o.error(l)}E(r)&&w(r)}};O.prototype=h({},{unsubscribe:function(){var t=_(this);E(t)||(S(this,t),w(t))}}),i&&l(O.prototype,"closed",{configurable:!0,get:function(){return E(_(this))}});var C=function(t){b(this,{subscription:t}),i||(this.closed=!1)};C.prototype=h({},{next:function(t){var e=_(_(this).subscription);if(!E(e)){var n=e.observer;try{var r=x(n.next);r&&r.call(n,t)}catch(i){v(i)}}},error:function(t){var e=_(this).subscription,n=_(e);if(!E(n)){var r=n.observer;S(e,n);try{var i=x(r.error);i?i.call(r,t):v(t)}catch(o){v(o)}w(n)}},complete:function(){var t=_(this).subscription,e=_(t);if(!E(e)){var n=e.observer;S(t,e);try{var r=x(n.complete);r&&r.call(n)}catch(i){v(i)}w(e)}}}),i&&l(C.prototype,"closed",{configurable:!0,get:function(){return E(_(_(this).subscription))}});var T=function(t){c(this,T,"Observable"),b(this,{subscriber:a(t)})};h(T.prototype,{subscribe:function(t){var e=arguments.length;return new O("function"===typeof t?{next:t,error:e>1?arguments[1]:void 0,complete:e>2?arguments[2]:void 0}:u(t)?t:{},_(this).subscriber)}}),h(T,{from:function(t){var e="function"===typeof this?this:T,n=x(s(t)[y]);if(n){var r=s(n.call(t));return r.constructor===e?r:new e((function(t){return r.subscribe(t)}))}var i=p(t);return new e((function(t){d(i,(function(e){if(t.next(e),t.closed)return d.stop()}),void 0,!1,!0),t.complete()}))},of:function(){var t="function"===typeof this?this:T,e=arguments.length,n=new Array(e),r=0;while(r<e)n[r]=arguments[r++];return new t((function(t){for(var r=0;r<e;r++)if(t.next(n[r]),t.closed)return;t.complete()}))}}),f(T.prototype,y,(function(){return this})),r({global:!0},{Observable:T}),o("Observable")},pjDv:function(t,e,n){var r=n("I+eb"),i=n("TfTi"),o=n("HH4o"),a=!o((function(t){Array.from(t)}));r({target:"Array",stat:!0,forced:a},{from:i})},pkCn:function(t,e,n){"use strict";var r=n("0Dky");t.exports=function(t,e){var n=[][t];return!!n&&r((function(){n.call(null,e||function(){throw 1},1)}))}},ppGB:function(t,e){var n=Math.ceil,r=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?r:n)(t)}},pv2x:function(t,e,n){var r=n("I+eb"),i=n("0GbY"),o=n("HAuM"),a=n("glrk"),s=n("0Dky"),u=i("Reflect","apply"),c=Function.apply,l=!s((function(){u((function(){}))}));r({target:"Reflect",stat:!0,forced:l},{apply:function(t,e,n){return o(t),a(n),u?u(t,e,n):c.call(t,e,n)}})},q1tI:function(t,e,n){"use strict";t.exports=n("viRO")},q3YX:function(t){t.exports=JSON.parse('{"menus":{"en-US":{"*":[{"path":"/","title":"introduction","meta":{}},{"path":"/maptalk","title":"use in L7","meta":{}}]}},"locales":[{"name":"en-US","label":"English"}],"navs":{},"title":"L7-maptalks","logo":"https://gw.alipayobjects.com/zos/antfincdn/FLrTNDvlna/antv.png","mode":"doc","repository":{"url":"","branch":"master"},"theme":{}}')},qHiR:function(t,e,n){},qK8v:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isStackOverflowExeption=void 0;var r=n("MON2");function i(t){return t instanceof RangeError||t.message===r.STACK_OVERFLOW}e.isStackOverflowExeption=i},qLMh:function(t,e,n){"use strict";function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}function i(){i=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function c(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(A){c=function(t,e,n){return t[e]=n}}function l(t,e,n,r){var i=e&&e.prototype instanceof p?e:p,o=Object.create(i.prototype),a=new O(r||[]);return o._invoke=function(t,e,n){var r="suspendedStart";return function(i,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw o;return T()}for(n.method=i,n.arg=o;;){var a=n.delegate;if(a){var s=w(a,n);if(s){if(s===h)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=f(t,e,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===h)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}(t,n,a),o}function f(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(A){return{type:"throw",arg:A}}}t.wrap=l;var h={};function p(){}function d(){}function v(){}var g={};c(g,a,(function(){return this}));var m=Object.getPrototypeOf,y=m&&m(m(C([])));y&&y!==e&&n.call(y,a)&&(g=y);var _=v.prototype=p.prototype=Object.create(g);function b(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function x(t,e){function i(o,a,s,u){var c=f(t[o],t,a);if("throw"!==c.type){var l=c.arg,h=l.value;return h&&"object"==r(h)&&n.call(h,"__await")?e.resolve(h.__await).then((function(t){i("next",t,s,u)}),(function(t){i("throw",t,s,u)})):e.resolve(h).then((function(t){l.value=t,s(l)}),(function(t){return i("throw",t,s,u)}))}u(c.arg)}var o;this._invoke=function(t,n){function r(){return new e((function(e,r){i(t,n,e,r)}))}return o=o?o.then(r,r):r()}}function w(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator["return"]&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return h;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return h}var r=f(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,h;var i=r.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,h):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,h)}function E(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function O(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(E,this),this.reset(!0)}function C(t){if(t){var e=t[a];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,i=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:T}}function T(){return{value:void 0,done:!0}}return d.prototype=v,c(_,"constructor",v),c(v,"constructor",d),d.displayName=c(v,u,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,c(t,u,"GeneratorFunction")),t.prototype=Object.create(_),t},t.awrap=function(t){return{__await:t}},b(x.prototype),c(x.prototype,s,(function(){return this})),t.AsyncIterator=x,t.async=function(e,n,r,i,o){void 0===o&&(o=Promise);var a=new x(l(e,n,r,i),o);return t.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},b(_),c(_,u,"Generator"),c(_,a,(function(){return this})),c(_,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=C,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return a.type="throw",a.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],a=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var s=n.call(o,"catchLoc"),u=n.call(o,"finallyLoc");if(s&&u){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,h):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),S(n),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;S(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:C(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),h}},t}n.d(e,"a",(function(){return i}))},qT12:function(t,e,n){"use strict";var r="function"===typeof Symbol&&Symbol["for"],i=r?Symbol["for"]("react.element"):60103,o=r?Symbol["for"]("react.portal"):60106,a=r?Symbol["for"]("react.fragment"):60107,s=r?Symbol["for"]("react.strict_mode"):60108,u=r?Symbol["for"]("react.profiler"):60114,c=r?Symbol["for"]("react.provider"):60109,l=r?Symbol["for"]("react.context"):60110,f=r?Symbol["for"]("react.async_mode"):60111,h=r?Symbol["for"]("react.concurrent_mode"):60111,p=r?Symbol["for"]("react.forward_ref"):60112,d=r?Symbol["for"]("react.suspense"):60113,v=r?Symbol["for"]("react.suspense_list"):60120,g=r?Symbol["for"]("react.memo"):60115,m=r?Symbol["for"]("react.lazy"):60116,y=r?Symbol["for"]("react.block"):60121,_=r?Symbol["for"]("react.fundamental"):60117,b=r?Symbol["for"]("react.responder"):60118,x=r?Symbol["for"]("react.scope"):60119;function w(t){if("object"===typeof t&&null!==t){var e=t.$$typeof;switch(e){case i:switch(t=t.type,t){case f:case h:case a:case u:case s:case d:return t;default:switch(t=t&&t.$$typeof,t){case l:case p:case m:case g:case c:return t;default:return e}}case o:return e}}}function E(t){return w(t)===h}e.AsyncMode=f,e.ConcurrentMode=h,e.ContextConsumer=l,e.ContextProvider=c,e.Element=i,e.ForwardRef=p,e.Fragment=a,e.Lazy=m,e.Memo=g,e.Portal=o,e.Profiler=u,e.StrictMode=s,e.Suspense=d,e.isAsyncMode=function(t){return E(t)||w(t)===f},e.isConcurrentMode=E,e.isContextConsumer=function(t){return w(t)===l},e.isContextProvider=function(t){return w(t)===c},e.isElement=function(t){return"object"===typeof t&&null!==t&&t.$$typeof===i},e.isForwardRef=function(t){return w(t)===p},e.isFragment=function(t){return w(t)===a},e.isLazy=function(t){return w(t)===m},e.isMemo=function(t){return w(t)===g},e.isPortal=function(t){return w(t)===o},e.isProfiler=function(t){return w(t)===u},e.isStrictMode=function(t){return w(t)===s},e.isSuspense=function(t){return w(t)===d},e.isValidElementType=function(t){return"string"===typeof t||"function"===typeof t||t===a||t===h||t===u||t===s||t===d||t===v||"object"===typeof t&&null!==t&&(t.$$typeof===m||t.$$typeof===g||t.$$typeof===c||t.$$typeof===l||t.$$typeof===p||t.$$typeof===_||t.$$typeof===b||t.$$typeof===x||t.$$typeof===y)},e.typeOf=w},qY7S:function(t,e,n){"use strict";var r=n("HAuM"),i=n("A2ZE"),o=n("ImZN");t.exports=function(t){var e,n,a,s,u=arguments.length,c=u>1?arguments[1]:void 0;return r(this),e=void 0!==c,e&&r(c),void 0==t?new this:(n=[],e?(a=0,s=i(c,u>2?arguments[2]:void 0,2),o(t,(function(t){n.push(s(t,a++))}))):o(t,n.push,n),new this(n))}},qYE9:function(t,e){t.exports="undefined"!==typeof ArrayBuffer&&"undefined"!==typeof DataView},qZTm:function(t,e,n){var r=n("fR/l"),i=n("MvSz"),o=n("7GkX");function a(t){return r(t,o,i)}t.exports=a},qaHo:function(t,e,n){"use strict";var r=n("I+eb"),i=n("xDBR"),o=n("glrk"),a=n("A2ZE"),s=n("WGBp"),u=n("ImZN");r({target:"Set",proto:!0,real:!0,forced:i},{some:function(t){var e=o(this),n=s(e),r=a(t,arguments.length>1?arguments[1]:void 0,3);return u(n,(function(t){if(r(t,t,e))return u.stop()}),void 0,!1,!0).stopped}})},qc1c:function(t,e,n){"use strict";var r=n("I+eb"),i=n("xDBR"),o=n("glrk"),a=n("HAuM"),s=n("ImZN");r({target:"Map",proto:!0,real:!0,forced:i},{merge:function(t){var e=o(this),n=a(e.set),r=0;while(r<arguments.length)s(arguments[r++],n,e,!0);return e}})},qgGA:function(t,e,n){var r=n("I+eb"),i=n("eDxR"),o=n("glrk"),a=i.toKey,s=i.set;r({target:"Reflect",stat:!0},{metadata:function(t,e){return function(n,r){s(t,e,o(n),a(r))}}})},qxPZ:function(t,e,n){var r=n("tiKp"),i=r("match");t.exports=function(t){var e=/./;try{"/./"[t](e)}catch(n){try{return e[i]=!1,"/./"[t](e)}catch(r){}}return!1}},r1Q5:function(t,e,n){"use strict";var r=n("5wUe")["default"];function i(){var t=n("q1tI");return i=function(){return t},t}function o(){var t=n("nvu9");return o=function(){return t},t}function a(t,e){return f(t)||l(t,e)||u(t,e)||s()}function s(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function u(t,e){if(t){if("string"===typeof t)return c(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(t,e):void 0}}function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function l(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o,a,s=[],u=!0,c=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);u=!0);}catch(l){c=!0,i=l}finally{try{if(!u&&null!=n["return"]&&(a=n["return"](),Object(a)!==a))return}finally{if(c)throw i}}return s}}function f(t){if(Array.isArray(t))return t}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=void 0;var h="https://codesandbox.io/api/v1/sandboxes/define",p=function(t,e){return"react-dom"===t?"/**\n* This is an auto-generated demo by dumi\n* if you think it is not working as expected,\n* please report the issue at\n* https://github.com/umijs/dumi/issues\n**/\n    \nimport React from 'react';\nimport ReactDOM from 'react-dom';\n".concat(e,"\nimport App from './App';\n    \nReactDOM.render(\n  <App />,\n  document.getElementById('root'),\n);"):"react-dom/client"===t?"/**\n* This is an auto-generated demo by dumi\n* if you think it is not working as expected,\n* please report the issue at\n* https://github.com/umijs/dumi/issues\n**/\nimport React from 'react';\nimport { createRoot } from \"react-dom/client\";\n".concat(e,'\nimport App from "./App";\n\nconst rootElement = document.getElementById("root");\nconst root = createRoot(rootElement);\n\nroot.render(<App />);'):void 0};function d(t){var e=document.createElement("span");e.innerHTML=t;var n=e.textContent;return e.remove(),n}function v(t){var e,n=Boolean(t.sources._.tsx),i=n?".tsx":".jsx",a={},s={},u=Object.values(t.dependencies).filter((function(t){return t.css})),c="App".concat(i),l="index".concat(i);return Object.entries(t.dependencies).forEach((function(t){var e=r(t,2),n=e[0],i=e[1].version;s[n]=i})),s["react-dom"]||(s["react-dom"]=s.react||"latest"),a["sandbox.config.json"]={content:JSON.stringify({template:n?"create-react-app-typescript":"create-react-app"},null,2),isBinary:!1},a["package.json"]={content:JSON.stringify({name:t.title,description:d(t.description||"An auto-generated demo by dumi"),main:l,dependencies:s,devDependencies:n?{typescript:"^3"}:{}},null,2),isBinary:!1},a["index.html"]={content:'<div style="margin: 16px;" id="root"></div>',isBinary:!1},a[l]={content:p((null===s||void 0===s||null===(e=s["react-dom"])||void 0===e?void 0:e.startsWith("18."))||"latest"===s.react?"react-dom/client":"react-dom",u.map((function(t){var e=t.css;return"import '".concat(e,"';")})).join("\n")),isBinary:!1},Object.entries(t.sources).forEach((function(t){var e=r(t,2),n=e[0],i=e[1],o=i.tsx,s=i.jsx,u=i.content;a["_"===n?c:n]={content:o||s||u,isBinary:!1}})),(0,o().getParameters)({files:a})}var g=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:h,n=(0,i().useState)(),r=a(n,2),o=r[0],s=r[1];return(0,i().useEffect)((function(){if(t){var n=document.createElement("form"),r=document.createElement("input"),i=v(t);return n.method="POST",n.target="_blank",n.style.display="none",n.action=e,n.appendChild(r),n.setAttribute("data-demo",t.title||""),r.name="parameters",r.value=i,document.body.appendChild(n),s((function(){return function(){return n.submit()}})),function(){return n.remove()}}}),[t]),o};e["default"]=g},rB9j:function(t,e,n){"use strict";var r=n("I+eb"),i=n("kmMV");r({target:"RegExp",proto:!0,forced:/./.exec!==i},{exec:i})},rEGp:function(t,e){function n(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n}t.exports=n},rKzb:function(t,e,n){"use strict";var r=n("4syw"),i=n("8YOa").getWeakData,o=n("glrk"),a=n("hh1v"),s=n("GarU"),u=n("ImZN"),c=n("tycR"),l=n("UTVS"),f=n("afO8"),h=f.set,p=f.getterFor,d=c.find,v=c.findIndex,g=0,m=function(t){return t.frozen||(t.frozen=new y)},y=function(){this.entries=[]},_=function(t,e){return d(t.entries,(function(t){return t[0]===e}))};y.prototype={get:function(t){var e=_(this,t);if(e)return e[1]},has:function(t){return!!_(this,t)},set:function(t,e){var n=_(this,t);n?n[1]=e:this.entries.push([t,e])},delete:function(t){var e=v(this.entries,(function(e){return e[0]===t}));return~e&&this.entries.splice(e,1),!!~e}},t.exports={getConstructor:function(t,e,n,c){var f=t((function(t,r){s(t,f,e),h(t,{type:e,id:g++,frozen:void 0}),void 0!=r&&u(r,t[c],t,n)})),d=p(e),v=function(t,e,n){var r=d(t),a=i(o(e),!0);return!0===a?m(r).set(e,n):a[r.id]=n,t};return r(f.prototype,{delete:function(t){var e=d(this);if(!a(t))return!1;var n=i(t);return!0===n?m(e)["delete"](t):n&&l(n,e.id)&&delete n[e.id]},has:function(t){var e=d(this);if(!a(t))return!1;var n=i(t);return!0===n?m(e).has(t):n&&l(n,e.id)}}),r(f.prototype,n?{get:function(t){var e=d(this);if(a(t)){var n=i(t);return!0===n?m(e).get(t):n?n[e.id]:void 0}},set:function(t,e){return v(this,t,e)}}:{add:function(t){return v(this,t,!0)}}),f}}},rNhl:function(t,e,n){var r=n("I+eb"),i=n("fhKU");r({global:!0,forced:parseFloat!=i},{parseFloat:i})},rOQg:function(t,e,n){"use strict";var r=n("I+eb"),i=n("0Dky"),o=n("Yhre"),a=n("glrk"),s=n("I8vh"),u=n("UMSQ"),c=n("SEBh"),l=o.ArrayBuffer,f=o.DataView,h=l.prototype.slice,p=i((function(){return!new l(2).slice(1,void 0).byteLength}));r({target:"ArrayBuffer",proto:!0,unsafe:!0,forced:p},{slice:function(t,e){if(void 0!==h&&void 0===e)return h.call(a(this),t);var n=a(this).byteLength,r=s(t,n),i=s(void 0===e?n:e,n),o=new(c(this,l))(u(i-r)),p=new f(this),d=new f(o),v=0;while(r<i)d.setUint8(v++,p.getUint8(r++));return o}})},rW0t:function(t,e,n){"use strict";var r=n("glrk");t.exports=function(){var t=r(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},rZ3M:function(t,e,n){"use strict";var r=n("I+eb"),i=n("HYAF"),o=n("ROdP"),a=n("rW0t"),s=n("tiKp"),u=n("xDBR"),c=s("replace"),l=RegExp.prototype;r({target:"String",proto:!0},{replaceAll:function t(e,n){var r,s,f,h,p,d,v,g,m,y=i(this);if(null!=e){if(r=o(e),r&&(s=String(i("flags"in l?e.flags:a.call(e))),!~s.indexOf("g")))throw TypeError("`.replaceAll` does not allow non-global regexes");if(f=e[c],void 0!==f)return f.call(e,y,n);if(u&&r)return String(y).replace(e,n)}if(h=String(y),p=String(e),""===p)return t.call(h,/(?:)/g,n);if(d=h.split(p),"function"!==typeof n)return d.join(String(n));for(v=d[0],g=v.length,m=1;m<d.length;m++)v+=String(n(p,g,h)),g+=p.length+d[m].length,v+=d[m];return v}})},rb3L:function(t,e,n){var r=n("I+eb"),i=n("P940");r({target:"WeakSet",stat:!0},{of:i})},rePB:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n("o46R");function i(t,e,n){return e=Object(r["a"])(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}},"rhT+":function(t,e){function n(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}t.exports=n,t.exports.__esModule=!0,t.exports["default"]=t.exports},rkAj:function(t,e,n){var r=n("g6v/"),i=n("0Dky"),o=n("UTVS"),a=Object.defineProperty,s={},u=function(t){throw t};t.exports=function(t,e){if(o(s,t))return s[t];e||(e={});var n=[][t],c=!!o(e,"ACCESSORS")&&e.ACCESSORS,l=o(e,0)?e[0]:u,f=o(e,1)?e[1]:void 0;return s[t]=!!n&&!i((function(){if(c&&!r)return!0;var t={length:-1};c?a(t,1,{enumerable:!0,get:u}):t[1]=1,n.call(t,l,f)}))}},rpNk:function(t,e,n){"use strict";var r,i,o,a=n("4WOD"),s=n("kRJp"),u=n("UTVS"),c=n("tiKp"),l=n("xDBR"),f=c("iterator"),h=!1,p=function(){return this};[].keys&&(o=[].keys(),"next"in o?(i=a(a(o)),i!==Object.prototype&&(r=i)):h=!0),void 0==r&&(r={}),l||u(r,f)||s(r,f,p),t.exports={IteratorPrototype:r,BUGGY_SAFARI_ITERATORS:h}},s4An:function(t,e,n){"use strict";function r(t,e){return r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},r(t,e)}n.d(e,"a",(function(){return r}))},s5qe:function(t,e,n){"use strict";var r=n("2oRo"),i=n("67WC"),o=n("0Dky"),a=r.Int8Array,s=i.aTypedArray,u=i.exportTypedArrayMethod,c=[].toLocaleString,l=[].slice,f=!!a&&o((function(){c.call(new a(1))})),h=o((function(){return[1,2].toLocaleString()!=new a([1,2]).toLocaleString()}))||!o((function(){a.prototype.toLocaleString.call([1,2])}));u("toLocaleString",(function(){return c.apply(f?l.call(s(this)):s(this),arguments)}),h)},sEFX:function(t,e,n){"use strict";var r=n("AO7/"),i=n("9d/t");t.exports=r?{}.toString:function(){return"[object "+i(this)+"]"}},sEf8:function(t,e){function n(t){return function(e){return t(e)}}t.exports=n},sQ9d:function(t,e,n){var r=n("I+eb"),i=n("eDxR"),o=n("glrk"),a=i.keys,s=i.toKey;r({target:"Reflect",stat:!0},{getOwnMetadataKeys:function(t){var e=arguments.length<2?void 0:s(arguments[1]);return a(o(t),e)}})},seXi:function(t,e,n){var r=n("qZTm"),i=1,o=Object.prototype,a=o.hasOwnProperty;function s(t,e,n,o,s,u){var c=n&i,l=r(t),f=l.length,h=r(e),p=h.length;if(f!=p&&!c)return!1;var d=f;while(d--){var v=l[d];if(!(c?v in e:a.call(e,v)))return!1}var g=u.get(t),m=u.get(e);if(g&&m)return g==e&&m==t;var y=!0;u.set(t,e),u.set(e,t);var _=c;while(++d<f){v=l[d];var b=t[v],x=e[v];if(o)var w=c?o(x,b,v,e,t,u):o(b,x,v,t,e,u);if(!(void 0===w?b===x||s(b,x,n,o,u):w)){y=!1;break}_||(_="constructor"==v)}if(y&&!_){var E=t.constructor,S=e.constructor;E==S||!("constructor"in t)||!("constructor"in e)||"function"==typeof E&&E instanceof E&&"function"==typeof S&&S instanceof S||(y=!1)}return u["delete"](t),u["delete"](e),y}t.exports=s},shjB:function(t,e){var n=9007199254740991;function r(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=n}t.exports=r},spTT:function(t,e,n){var r=n("I+eb"),i=n("qY7S");r({target:"WeakSet",stat:!0},{from:i})},szb8:function(t,e,n){"use strict";n.r(e),n.d(e,"Interpreter",(function(){return Xe})),n.d(e,"vm",(function(){return r})),n.d(e,"evaluate",(function(){return tn})),n.d(e,"Function",(function(){return en}));var r={};n.r(r),n.d(r,"createContext",(function(){return qe})),n.d(r,"compileFunction",(function(){return Ke})),n.d(r,"runInContext",(function(){return Qe})),n.d(r,"runInNewContext",(function(){return $e})),n.d(r,"Script",(function(){return Je}));var i={3:"abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile",5:"class enum extends super const export import",6:"enum",strict:"implements interface let package private protected public static yield",strictBind:"eval arguments"},o="break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this",a={5:o,"5module":o+" export import",6:o+" const class extends export import super"},s=/^in(stanceof)?$/,u="\xaa\xb5\xba\xc0-\xd6\xd8-\xf6\xf8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376\u0377\u037a-\u037d\u037f\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u052f\u0531-\u0556\u0559\u0560-\u0588\u05d0-\u05ea\u05ef-\u05f2\u0620-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u0860-\u086a\u08a0-\u08b4\u08b6-\u08c7\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u09fc\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0af9\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c39\u0c3d\u0c58-\u0c5a\u0c60\u0c61\u0c80\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d04-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d54-\u0d56\u0d5f-\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e46\u0e81\u0e82\u0e84\u0e86-\u0e8a\u0e8c-\u0ea3\u0ea5\u0ea7-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065\u1066\u106e-\u1070\u1075-\u1081\u108e\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f5\u13f8-\u13fd\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f8\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1878\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191e\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19b0-\u19c9\u1a00-\u1a16\u1a20-\u1a54\u1aa7\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1c80-\u1c88\u1c90-\u1cba\u1cbd-\u1cbf\u1ce9-\u1cec\u1cee-\u1cf3\u1cf5\u1cf6\u1cfa\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2118-\u211d\u2124\u2126\u2128\u212a-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cee\u2cf2\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303c\u3041-\u3096\u309b-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312f\u3131-\u318e\u31a0-\u31bf\u31f0-\u31ff\u3400-\u4dbf\u4e00-\u9ffc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua66e\ua67f-\ua69d\ua6a0-\ua6ef\ua717-\ua71f\ua722-\ua788\ua78b-\ua7bf\ua7c2-\ua7ca\ua7f5-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua8fd\ua8fe\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\ua9e0-\ua9e4\ua9e6-\ua9ef\ua9fa-\ua9fe\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa76\uaa7a\uaa7e-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaadd\uaae0-\uaaea\uaaf2-\uaaf4\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uab30-\uab5a\uab5c-\uab69\uab70-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc",c="\u200c\u200d\xb7\u0300-\u036f\u0387\u0483-\u0487\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u0669\u0670\u06d6-\u06dc\u06df-\u06e4\u06e7\u06e8\u06ea-\u06ed\u06f0-\u06f9\u0711\u0730-\u074a\u07a6-\u07b0\u07c0-\u07c9\u07eb-\u07f3\u07fd\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0859-\u085b\u08d3-\u08e1\u08e3-\u0903\u093a-\u093c\u093e-\u094f\u0951-\u0957\u0962\u0963\u0966-\u096f\u0981-\u0983\u09bc\u09be-\u09c4\u09c7\u09c8\u09cb-\u09cd\u09d7\u09e2\u09e3\u09e6-\u09ef\u09fe\u0a01-\u0a03\u0a3c\u0a3e-\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a66-\u0a71\u0a75\u0a81-\u0a83\u0abc\u0abe-\u0ac5\u0ac7-\u0ac9\u0acb-\u0acd\u0ae2\u0ae3\u0ae6-\u0aef\u0afa-\u0aff\u0b01-\u0b03\u0b3c\u0b3e-\u0b44\u0b47\u0b48\u0b4b-\u0b4d\u0b55-\u0b57\u0b62\u0b63\u0b66-\u0b6f\u0b82\u0bbe-\u0bc2\u0bc6-\u0bc8\u0bca-\u0bcd\u0bd7\u0be6-\u0bef\u0c00-\u0c04\u0c3e-\u0c44\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0c66-\u0c6f\u0c81-\u0c83\u0cbc\u0cbe-\u0cc4\u0cc6-\u0cc8\u0cca-\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0ce6-\u0cef\u0d00-\u0d03\u0d3b\u0d3c\u0d3e-\u0d44\u0d46-\u0d48\u0d4a-\u0d4d\u0d57\u0d62\u0d63\u0d66-\u0d6f\u0d81-\u0d83\u0dca\u0dcf-\u0dd4\u0dd6\u0dd8-\u0ddf\u0de6-\u0def\u0df2\u0df3\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0e50-\u0e59\u0eb1\u0eb4-\u0ebc\u0ec8-\u0ecd\u0ed0-\u0ed9\u0f18\u0f19\u0f20-\u0f29\u0f35\u0f37\u0f39\u0f3e\u0f3f\u0f71-\u0f84\u0f86\u0f87\u0f8d-\u0f97\u0f99-\u0fbc\u0fc6\u102b-\u103e\u1040-\u1049\u1056-\u1059\u105e-\u1060\u1062-\u1064\u1067-\u106d\u1071-\u1074\u1082-\u108d\u108f-\u109d\u135d-\u135f\u1369-\u1371\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b4-\u17d3\u17dd\u17e0-\u17e9\u180b-\u180d\u1810-\u1819\u18a9\u1920-\u192b\u1930-\u193b\u1946-\u194f\u19d0-\u19da\u1a17-\u1a1b\u1a55-\u1a5e\u1a60-\u1a7c\u1a7f-\u1a89\u1a90-\u1a99\u1ab0-\u1abd\u1abf\u1ac0\u1b00-\u1b04\u1b34-\u1b44\u1b50-\u1b59\u1b6b-\u1b73\u1b80-\u1b82\u1ba1-\u1bad\u1bb0-\u1bb9\u1be6-\u1bf3\u1c24-\u1c37\u1c40-\u1c49\u1c50-\u1c59\u1cd0-\u1cd2\u1cd4-\u1ce8\u1ced\u1cf4\u1cf7-\u1cf9\u1dc0-\u1df9\u1dfb-\u1dff\u203f\u2040\u2054\u20d0-\u20dc\u20e1\u20e5-\u20f0\u2cef-\u2cf1\u2d7f\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua620-\ua629\ua66f\ua674-\ua67d\ua69e\ua69f\ua6f0\ua6f1\ua802\ua806\ua80b\ua823-\ua827\ua82c\ua880\ua881\ua8b4-\ua8c5\ua8d0-\ua8d9\ua8e0-\ua8f1\ua8ff-\ua909\ua926-\ua92d\ua947-\ua953\ua980-\ua983\ua9b3-\ua9c0\ua9d0-\ua9d9\ua9e5\ua9f0-\ua9f9\uaa29-\uaa36\uaa43\uaa4c\uaa4d\uaa50-\uaa59\uaa7b-\uaa7d\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uaaeb-\uaaef\uaaf5\uaaf6\uabe3-\uabea\uabec\uabed\uabf0-\uabf9\ufb1e\ufe00-\ufe0f\ufe20-\ufe2f\ufe33\ufe34\ufe4d-\ufe4f\uff10-\uff19\uff3f",l=new RegExp("["+u+"]"),f=new RegExp("["+u+c+"]");u=c=null;var h=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,14,29,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,157,310,10,21,11,7,153,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,28,43,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,14,35,349,41,7,1,79,28,11,0,9,21,107,20,28,22,13,52,76,44,33,24,27,35,30,0,3,0,9,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,85,6,2,0,2,3,2,14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,159,52,19,3,21,2,31,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,14,0,72,26,230,43,117,63,32,7,3,0,3,7,2,1,2,23,16,0,2,0,95,7,3,38,17,0,2,0,29,0,11,39,8,0,22,0,12,45,20,0,35,56,264,8,2,36,18,0,50,29,113,6,2,1,2,37,22,0,26,5,2,1,2,31,15,0,328,18,190,0,80,921,103,110,18,195,2749,1070,4050,582,8634,568,8,30,114,29,19,47,17,3,32,20,6,18,689,63,129,74,6,0,67,12,65,1,2,0,29,6135,9,1237,43,8,8952,286,50,2,18,3,9,395,2309,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,2357,44,11,6,17,0,370,43,1301,196,60,67,8,0,1205,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42717,35,4148,12,221,3,5761,15,7472,3104,541,1507,4938],p=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,574,3,9,9,370,1,154,10,176,2,54,14,32,9,16,3,46,10,54,9,7,2,37,13,2,9,6,1,45,0,13,2,49,13,9,3,2,11,83,11,7,0,161,11,6,9,7,3,56,1,2,6,3,1,3,2,10,0,11,1,3,6,4,4,193,17,10,9,5,0,82,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,84,14,5,9,243,14,166,9,71,5,2,1,3,3,2,0,2,1,13,9,120,6,3,6,4,0,29,9,41,6,2,3,9,0,10,10,47,15,406,7,2,7,17,9,57,21,2,13,123,5,4,0,2,1,2,6,2,0,9,9,49,4,2,1,2,4,9,9,330,3,19306,9,135,4,60,6,26,9,1014,0,2,54,8,3,82,0,12,1,19628,1,5319,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,262,6,10,9,419,13,1495,6,110,6,6,9,4759,9,787719,239];function d(t,e){for(var n=65536,r=0;r<e.length;r+=2){if(n+=e[r],n>t)return!1;if(n+=e[r+1],n>=t)return!0}}function v(t,e){return t<65?36===t:t<91||(t<97?95===t:t<123||(t<=65535?t>=170&&l.test(String.fromCharCode(t)):!1!==e&&d(t,h)))}function g(t,e){return t<48?36===t:t<58||!(t<65)&&(t<91||(t<97?95===t:t<123||(t<=65535?t>=170&&f.test(String.fromCharCode(t)):!1!==e&&(d(t,h)||d(t,p)))))}var m=function(t,e){void 0===e&&(e={}),this.label=t,this.keyword=e.keyword,this.beforeExpr=!!e.beforeExpr,this.startsExpr=!!e.startsExpr,this.isLoop=!!e.isLoop,this.isAssign=!!e.isAssign,this.prefix=!!e.prefix,this.postfix=!!e.postfix,this.binop=e.binop||null,this.updateContext=null};function y(t,e){return new m(t,{beforeExpr:!0,binop:e})}var _={beforeExpr:!0},b={startsExpr:!0},x={};function w(t,e){return void 0===e&&(e={}),e.keyword=t,x[t]=new m(t,e)}var E={num:new m("num",b),regexp:new m("regexp",b),string:new m("string",b),name:new m("name",b),eof:new m("eof"),bracketL:new m("[",{beforeExpr:!0,startsExpr:!0}),bracketR:new m("]"),braceL:new m("{",{beforeExpr:!0,startsExpr:!0}),braceR:new m("}"),parenL:new m("(",{beforeExpr:!0,startsExpr:!0}),parenR:new m(")"),comma:new m(",",_),semi:new m(";",_),colon:new m(":",_),dot:new m("."),question:new m("?",_),questionDot:new m("?."),arrow:new m("=>",_),template:new m("template"),invalidTemplate:new m("invalidTemplate"),ellipsis:new m("...",_),backQuote:new m("`",b),dollarBraceL:new m("${",{beforeExpr:!0,startsExpr:!0}),eq:new m("=",{beforeExpr:!0,isAssign:!0}),assign:new m("_=",{beforeExpr:!0,isAssign:!0}),incDec:new m("++/--",{prefix:!0,postfix:!0,startsExpr:!0}),prefix:new m("!/~",{beforeExpr:!0,prefix:!0,startsExpr:!0}),logicalOR:y("||",1),logicalAND:y("&&",2),bitwiseOR:y("|",3),bitwiseXOR:y("^",4),bitwiseAND:y("&",5),equality:y("==/!=/===/!==",6),relational:y("</>/<=/>=",7),bitShift:y("<</>>/>>>",8),plusMin:new m("+/-",{beforeExpr:!0,binop:9,prefix:!0,startsExpr:!0}),modulo:y("%",10),star:y("*",10),slash:y("/",10),starstar:new m("**",{beforeExpr:!0}),coalesce:y("??",1),_break:w("break"),_case:w("case",_),_catch:w("catch"),_continue:w("continue"),_debugger:w("debugger"),_default:w("default",_),_do:w("do",{isLoop:!0,beforeExpr:!0}),_else:w("else",_),_finally:w("finally"),_for:w("for",{isLoop:!0}),_function:w("function",b),_if:w("if"),_return:w("return",_),_switch:w("switch"),_throw:w("throw",_),_try:w("try"),_var:w("var"),_const:w("const"),_while:w("while",{isLoop:!0}),_with:w("with"),_new:w("new",{beforeExpr:!0,startsExpr:!0}),_this:w("this",b),_super:w("super",b),_class:w("class",b),_extends:w("extends",_),_export:w("export"),_import:w("import",b),_null:w("null",b),_true:w("true",b),_false:w("false",b),_in:w("in",{beforeExpr:!0,binop:7}),_instanceof:w("instanceof",{beforeExpr:!0,binop:7}),_typeof:w("typeof",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_void:w("void",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_delete:w("delete",{beforeExpr:!0,prefix:!0,startsExpr:!0})},S=/\r\n?|\n|\u2028|\u2029/,O=new RegExp(S.source,"g");function C(t,e){return 10===t||13===t||!e&&(8232===t||8233===t)}var T=/[\u1680\u2000-\u200a\u202f\u205f\u3000\ufeff]/,A=/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g,k=Object.prototype,M=k.hasOwnProperty,P=k.toString;function R(t,e){return M.call(t,e)}var j=Array.isArray||function(t){return"[object Array]"===P.call(t)};function I(t){return new RegExp("^(?:"+t.replace(/ /g,"|")+")$")}var L=function(t,e){this.line=t,this.column=e};L.prototype.offset=function(t){return new L(this.line,this.column+t)};var N=function(t,e,n){this.start=e,this.end=n,null!==t.sourceFile&&(this.source=t.sourceFile)};function D(t,e){for(var n=1,r=0;;){O.lastIndex=r;var i=O.exec(t);if(!(i&&i.index<e))return new L(n,e-r);++n,r=i.index+i[0].length}}var F={ecmaVersion:10,sourceType:"script",onInsertedSemicolon:null,onTrailingComma:null,allowReserved:null,allowReturnOutsideFunction:!1,allowImportExportEverywhere:!1,allowAwaitOutsideFunction:!1,allowHashBang:!1,locations:!1,onToken:null,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null,preserveParens:!1};function B(t){var e={};for(var n in F)e[n]=t&&R(t,n)?t[n]:F[n];if(e.ecmaVersion>=2015&&(e.ecmaVersion-=2009),null==e.allowReserved&&(e.allowReserved=e.ecmaVersion<5),j(e.onToken)){var r=e.onToken;e.onToken=function(t){return r.push(t)}}return j(e.onComment)&&(e.onComment=z(e,e.onComment)),e}function z(t,e){return function(n,r,i,o,a,s){var u={type:n?"Block":"Line",value:r,start:i,end:o};t.locations&&(u.loc=new N(this,a,s)),t.ranges&&(u.range=[i,o]),e.push(u)}}var U=1,V=2,H=U|V,G=4,W=8,Z=16,Y=32,X=64,q=128;function K(t,e){return V|(t?G:0)|(e?W:0)}var Q=0,$=1,J=2,tt=3,et=4,nt=5,rt=function(t,e,n){this.options=t=B(t),this.sourceFile=t.sourceFile,this.keywords=I(a[t.ecmaVersion>=6?6:"module"===t.sourceType?"5module":5]);var r="";if(!0!==t.allowReserved){for(var o=t.ecmaVersion;;o--)if(r=i[o])break;"module"===t.sourceType&&(r+=" await")}this.reservedWords=I(r);var s=(r?r+" ":"")+i.strict;this.reservedWordsStrict=I(s),this.reservedWordsStrictBind=I(s+" "+i.strictBind),this.input=String(e),this.containsEsc=!1,n?(this.pos=n,this.lineStart=this.input.lastIndexOf("\n",n-1)+1,this.curLine=this.input.slice(0,this.lineStart).split(S).length):(this.pos=this.lineStart=0,this.curLine=1),this.type=E.eof,this.value=null,this.start=this.end=this.pos,this.startLoc=this.endLoc=this.curPosition(),this.lastTokEndLoc=this.lastTokStartLoc=null,this.lastTokStart=this.lastTokEnd=this.pos,this.context=this.initialContext(),this.exprAllowed=!0,this.inModule="module"===t.sourceType,this.strict=this.inModule||this.strictDirective(this.pos),this.potentialArrowAt=-1,this.yieldPos=this.awaitPos=this.awaitIdentPos=0,this.labels=[],this.undefinedExports={},0===this.pos&&t.allowHashBang&&"#!"===this.input.slice(0,2)&&this.skipLineComment(2),this.scopeStack=[],this.enterScope(U),this.regexpState=null},it={inFunction:{configurable:!0},inGenerator:{configurable:!0},inAsync:{configurable:!0},allowSuper:{configurable:!0},allowDirectSuper:{configurable:!0},treatFunctionsAsVar:{configurable:!0}};rt.prototype.parse=function(){var t=this.options.program||this.startNode();return this.nextToken(),this.parseTopLevel(t)},it.inFunction.get=function(){return(this.currentVarScope().flags&V)>0},it.inGenerator.get=function(){return(this.currentVarScope().flags&W)>0},it.inAsync.get=function(){return(this.currentVarScope().flags&G)>0},it.allowSuper.get=function(){return(this.currentThisScope().flags&X)>0},it.allowDirectSuper.get=function(){return(this.currentThisScope().flags&q)>0},it.treatFunctionsAsVar.get=function(){return this.treatFunctionsAsVarInScope(this.currentScope())},rt.prototype.inNonArrowFunction=function(){return(this.currentThisScope().flags&V)>0},rt.extend=function(){var t=[],e=arguments.length;while(e--)t[e]=arguments[e];for(var n=this,r=0;r<t.length;r++)n=t[r](n);return n},rt.parse=function(t,e){return new this(e,t).parse()},rt.parseExpressionAt=function(t,e,n){var r=new this(n,t,e);return r.nextToken(),r.parseExpression()},rt.tokenizer=function(t,e){return new this(e,t)},Object.defineProperties(rt.prototype,it);var ot=rt.prototype,at=/^(?:'((?:\\.|[^'\\])*?)'|"((?:\\.|[^"\\])*?)")/;function st(){this.shorthandAssign=this.trailingComma=this.parenthesizedAssign=this.parenthesizedBind=this.doubleProto=-1}ot.strictDirective=function(t){for(;;){A.lastIndex=t,t+=A.exec(this.input)[0].length;var e=at.exec(this.input.slice(t));if(!e)return!1;if("use strict"===(e[1]||e[2])){A.lastIndex=t+e[0].length;var n=A.exec(this.input),r=n.index+n[0].length,i=this.input.charAt(r);return";"===i||"}"===i||S.test(n[0])&&!(/[(`.[+\-/*%<>=,?^&]/.test(i)||"!"===i&&"="===this.input.charAt(r+1))}t+=e[0].length,A.lastIndex=t,t+=A.exec(this.input)[0].length,";"===this.input[t]&&t++}},ot.eat=function(t){return this.type===t&&(this.next(),!0)},ot.isContextual=function(t){return this.type===E.name&&this.value===t&&!this.containsEsc},ot.eatContextual=function(t){return!!this.isContextual(t)&&(this.next(),!0)},ot.expectContextual=function(t){this.eatContextual(t)||this.unexpected()},ot.canInsertSemicolon=function(){return this.type===E.eof||this.type===E.braceR||S.test(this.input.slice(this.lastTokEnd,this.start))},ot.insertSemicolon=function(){if(this.canInsertSemicolon())return this.options.onInsertedSemicolon&&this.options.onInsertedSemicolon(this.lastTokEnd,this.lastTokEndLoc),!0},ot.semicolon=function(){this.eat(E.semi)||this.insertSemicolon()||this.unexpected()},ot.afterTrailingComma=function(t,e){if(this.type===t)return this.options.onTrailingComma&&this.options.onTrailingComma(this.lastTokStart,this.lastTokStartLoc),e||this.next(),!0},ot.expect=function(t){this.eat(t)||this.unexpected()},ot.unexpected=function(t){this.raise(null!=t?t:this.start,"Unexpected token")},ot.checkPatternErrors=function(t,e){if(t){t.trailingComma>-1&&this.raiseRecoverable(t.trailingComma,"Comma is not permitted after the rest element");var n=e?t.parenthesizedAssign:t.parenthesizedBind;n>-1&&this.raiseRecoverable(n,"Parenthesized pattern")}},ot.checkExpressionErrors=function(t,e){if(!t)return!1;var n=t.shorthandAssign,r=t.doubleProto;if(!e)return n>=0||r>=0;n>=0&&this.raise(n,"Shorthand property assignments are valid only in destructuring patterns"),r>=0&&this.raiseRecoverable(r,"Redefinition of __proto__ property")},ot.checkYieldAwaitInDefaultParams=function(){this.yieldPos&&(!this.awaitPos||this.yieldPos<this.awaitPos)&&this.raise(this.yieldPos,"Yield expression cannot be a default value"),this.awaitPos&&this.raise(this.awaitPos,"Await expression cannot be a default value")},ot.isSimpleAssignTarget=function(t){return"ParenthesizedExpression"===t.type?this.isSimpleAssignTarget(t.expression):"Identifier"===t.type||"MemberExpression"===t.type};var ut=rt.prototype;ut.parseTopLevel=function(t){var e={};t.body||(t.body=[]);while(this.type!==E.eof){var n=this.parseStatement(null,!0,e);t.body.push(n)}if(this.inModule)for(var r=0,i=Object.keys(this.undefinedExports);r<i.length;r+=1){var o=i[r];this.raiseRecoverable(this.undefinedExports[o].start,"Export '"+o+"' is not defined")}return this.adaptDirectivePrologue(t.body),this.next(),t.sourceType=this.options.sourceType,this.finishNode(t,"Program")};var ct={kind:"loop"},lt={kind:"switch"};ut.isLet=function(t){if(this.options.ecmaVersion<6||!this.isContextual("let"))return!1;A.lastIndex=this.pos;var e=A.exec(this.input),n=this.pos+e[0].length,r=this.input.charCodeAt(n);if(91===r)return!0;if(t)return!1;if(123===r)return!0;if(v(r,!0)){var i=n+1;while(g(this.input.charCodeAt(i),!0))++i;var o=this.input.slice(n,i);if(!s.test(o))return!0}return!1},ut.isAsyncFunction=function(){if(this.options.ecmaVersion<8||!this.isContextual("async"))return!1;A.lastIndex=this.pos;var t=A.exec(this.input),e=this.pos+t[0].length;return!S.test(this.input.slice(this.pos,e))&&"function"===this.input.slice(e,e+8)&&(e+8===this.input.length||!g(this.input.charAt(e+8)))},ut.parseStatement=function(t,e,n){var r,i=this.type,o=this.startNode();switch(this.isLet(t)&&(i=E._var,r="let"),i){case E._break:case E._continue:return this.parseBreakContinueStatement(o,i.keyword);case E._debugger:return this.parseDebuggerStatement(o);case E._do:return this.parseDoStatement(o);case E._for:return this.parseForStatement(o);case E._function:return t&&(this.strict||"if"!==t&&"label"!==t)&&this.options.ecmaVersion>=6&&this.unexpected(),this.parseFunctionStatement(o,!1,!t);case E._class:return t&&this.unexpected(),this.parseClass(o,!0);case E._if:return this.parseIfStatement(o);case E._return:return this.parseReturnStatement(o);case E._switch:return this.parseSwitchStatement(o);case E._throw:return this.parseThrowStatement(o);case E._try:return this.parseTryStatement(o);case E._const:case E._var:return r=r||this.value,t&&"var"!==r&&this.unexpected(),this.parseVarStatement(o,r);case E._while:return this.parseWhileStatement(o);case E._with:return this.parseWithStatement(o);case E.braceL:return this.parseBlock(!0,o);case E.semi:return this.parseEmptyStatement(o);case E._export:case E._import:if(this.options.ecmaVersion>10&&i===E._import){A.lastIndex=this.pos;var a=A.exec(this.input),s=this.pos+a[0].length,u=this.input.charCodeAt(s);if(40===u||46===u)return this.parseExpressionStatement(o,this.parseExpression())}return this.options.allowImportExportEverywhere||(e||this.raise(this.start,"'import' and 'export' may only appear at the top level"),this.inModule||this.raise(this.start,"'import' and 'export' may appear only with 'sourceType: module'")),i===E._import?this.parseImport(o):this.parseExport(o,n);default:if(this.isAsyncFunction())return t&&this.unexpected(),this.next(),this.parseFunctionStatement(o,!0,!t);var c=this.value,l=this.parseExpression();return i===E.name&&"Identifier"===l.type&&this.eat(E.colon)?this.parseLabeledStatement(o,c,l,t):this.parseExpressionStatement(o,l)}},ut.parseBreakContinueStatement=function(t,e){var n="break"===e;this.next(),this.eat(E.semi)||this.insertSemicolon()?t.label=null:this.type!==E.name?this.unexpected():(t.label=this.parseIdent(),this.semicolon());for(var r=0;r<this.labels.length;++r){var i=this.labels[r];if(null==t.label||i.name===t.label.name){if(null!=i.kind&&(n||"loop"===i.kind))break;if(t.label&&n)break}}return r===this.labels.length&&this.raise(t.start,"Unsyntactic "+e),this.finishNode(t,n?"BreakStatement":"ContinueStatement")},ut.parseDebuggerStatement=function(t){return this.next(),this.semicolon(),this.finishNode(t,"DebuggerStatement")},ut.parseDoStatement=function(t){return this.next(),this.labels.push(ct),t.body=this.parseStatement("do"),this.labels.pop(),this.expect(E._while),t.test=this.parseParenExpression(),this.options.ecmaVersion>=6?this.eat(E.semi):this.semicolon(),this.finishNode(t,"DoWhileStatement")},ut.parseForStatement=function(t){this.next();var e=this.options.ecmaVersion>=9&&(this.inAsync||!this.inFunction&&this.options.allowAwaitOutsideFunction)&&this.eatContextual("await")?this.lastTokStart:-1;if(this.labels.push(ct),this.enterScope(0),this.expect(E.parenL),this.type===E.semi)return e>-1&&this.unexpected(e),this.parseFor(t,null);var n=this.isLet();if(this.type===E._var||this.type===E._const||n){var r=this.startNode(),i=n?"let":this.value;return this.next(),this.parseVar(r,!0,i),this.finishNode(r,"VariableDeclaration"),(this.type===E._in||this.options.ecmaVersion>=6&&this.isContextual("of"))&&1===r.declarations.length?(this.options.ecmaVersion>=9&&(this.type===E._in?e>-1&&this.unexpected(e):t["await"]=e>-1),this.parseForIn(t,r)):(e>-1&&this.unexpected(e),this.parseFor(t,r))}var o=new st,a=this.parseExpression(!0,o);return this.type===E._in||this.options.ecmaVersion>=6&&this.isContextual("of")?(this.options.ecmaVersion>=9&&(this.type===E._in?e>-1&&this.unexpected(e):t["await"]=e>-1),this.toAssignable(a,!1,o),this.checkLVal(a),this.parseForIn(t,a)):(this.checkExpressionErrors(o,!0),e>-1&&this.unexpected(e),this.parseFor(t,a))},ut.parseFunctionStatement=function(t,e,n){return this.next(),this.parseFunction(t,ht|(n?0:pt),!1,e)},ut.parseIfStatement=function(t){return this.next(),t.test=this.parseParenExpression(),t.consequent=this.parseStatement("if"),t.alternate=this.eat(E._else)?this.parseStatement("if"):null,this.finishNode(t,"IfStatement")},ut.parseReturnStatement=function(t){return this.inFunction||this.options.allowReturnOutsideFunction||this.raise(this.start,"'return' outside of function"),this.next(),this.eat(E.semi)||this.insertSemicolon()?t.argument=null:(t.argument=this.parseExpression(),this.semicolon()),this.finishNode(t,"ReturnStatement")},ut.parseSwitchStatement=function(t){var e;this.next(),t.discriminant=this.parseParenExpression(),t.cases=[],this.expect(E.braceL),this.labels.push(lt),this.enterScope(0);for(var n=!1;this.type!==E.braceR;)if(this.type===E._case||this.type===E._default){var r=this.type===E._case;e&&this.finishNode(e,"SwitchCase"),t.cases.push(e=this.startNode()),e.consequent=[],this.next(),r?e.test=this.parseExpression():(n&&this.raiseRecoverable(this.lastTokStart,"Multiple default clauses"),n=!0,e.test=null),this.expect(E.colon)}else e||this.unexpected(),e.consequent.push(this.parseStatement(null));return this.exitScope(),e&&this.finishNode(e,"SwitchCase"),this.next(),this.labels.pop(),this.finishNode(t,"SwitchStatement")},ut.parseThrowStatement=function(t){return this.next(),S.test(this.input.slice(this.lastTokEnd,this.start))&&this.raise(this.lastTokEnd,"Illegal newline after throw"),t.argument=this.parseExpression(),this.semicolon(),this.finishNode(t,"ThrowStatement")};var ft=[];ut.parseTryStatement=function(t){if(this.next(),t.block=this.parseBlock(),t.handler=null,this.type===E._catch){var e=this.startNode();if(this.next(),this.eat(E.parenL)){e.param=this.parseBindingAtom();var n="Identifier"===e.param.type;this.enterScope(n?Y:0),this.checkLVal(e.param,n?et:J),this.expect(E.parenR)}else this.options.ecmaVersion<10&&this.unexpected(),e.param=null,this.enterScope(0);e.body=this.parseBlock(!1),this.exitScope(),t.handler=this.finishNode(e,"CatchClause")}return t.finalizer=this.eat(E._finally)?this.parseBlock():null,t.handler||t.finalizer||this.raise(t.start,"Missing catch or finally clause"),this.finishNode(t,"TryStatement")},ut.parseVarStatement=function(t,e){return this.next(),this.parseVar(t,!1,e),this.semicolon(),this.finishNode(t,"VariableDeclaration")},ut.parseWhileStatement=function(t){return this.next(),t.test=this.parseParenExpression(),this.labels.push(ct),t.body=this.parseStatement("while"),this.labels.pop(),this.finishNode(t,"WhileStatement")},ut.parseWithStatement=function(t){return this.strict&&this.raise(this.start,"'with' in strict mode"),this.next(),t.object=this.parseParenExpression(),t.body=this.parseStatement("with"),this.finishNode(t,"WithStatement")},ut.parseEmptyStatement=function(t){return this.next(),this.finishNode(t,"EmptyStatement")},ut.parseLabeledStatement=function(t,e,n,r){for(var i=0,o=this.labels;i<o.length;i+=1){var a=o[i];a.name===e&&this.raise(n.start,"Label '"+e+"' is already declared")}for(var s=this.type.isLoop?"loop":this.type===E._switch?"switch":null,u=this.labels.length-1;u>=0;u--){var c=this.labels[u];if(c.statementStart!==t.start)break;c.statementStart=this.start,c.kind=s}return this.labels.push({name:e,kind:s,statementStart:this.start}),t.body=this.parseStatement(r?-1===r.indexOf("label")?r+"label":r:"label"),this.labels.pop(),t.label=n,this.finishNode(t,"LabeledStatement")},ut.parseExpressionStatement=function(t,e){return t.expression=e,this.semicolon(),this.finishNode(t,"ExpressionStatement")},ut.parseBlock=function(t,e,n){void 0===t&&(t=!0),void 0===e&&(e=this.startNode()),e.body=[],this.expect(E.braceL),t&&this.enterScope(0);while(this.type!==E.braceR){var r=this.parseStatement(null);e.body.push(r)}return n&&(this.strict=!1),this.next(),t&&this.exitScope(),this.finishNode(e,"BlockStatement")},ut.parseFor=function(t,e){return t.init=e,this.expect(E.semi),t.test=this.type===E.semi?null:this.parseExpression(),this.expect(E.semi),t.update=this.type===E.parenR?null:this.parseExpression(),this.expect(E.parenR),t.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(t,"ForStatement")},ut.parseForIn=function(t,e){var n=this.type===E._in;return this.next(),"VariableDeclaration"===e.type&&null!=e.declarations[0].init&&(!n||this.options.ecmaVersion<8||this.strict||"var"!==e.kind||"Identifier"!==e.declarations[0].id.type)?this.raise(e.start,(n?"for-in":"for-of")+" loop variable declaration may not have an initializer"):"AssignmentPattern"===e.type&&this.raise(e.start,"Invalid left-hand side in for-loop"),t.left=e,t.right=n?this.parseExpression():this.parseMaybeAssign(),this.expect(E.parenR),t.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(t,n?"ForInStatement":"ForOfStatement")},ut.parseVar=function(t,e,n){for(t.declarations=[],t.kind=n;;){var r=this.startNode();if(this.parseVarId(r,n),this.eat(E.eq)?r.init=this.parseMaybeAssign(e):"const"!==n||this.type===E._in||this.options.ecmaVersion>=6&&this.isContextual("of")?"Identifier"===r.id.type||e&&(this.type===E._in||this.isContextual("of"))?r.init=null:this.raise(this.lastTokEnd,"Complex binding patterns require an initialization value"):this.unexpected(),t.declarations.push(this.finishNode(r,"VariableDeclarator")),!this.eat(E.comma))break}return t},ut.parseVarId=function(t,e){t.id=this.parseBindingAtom(),this.checkLVal(t.id,"var"===e?$:J,!1)};var ht=1,pt=2,dt=4;ut.parseFunction=function(t,e,n,r){this.initFunction(t),(this.options.ecmaVersion>=9||this.options.ecmaVersion>=6&&!r)&&(this.type===E.star&&e&pt&&this.unexpected(),t.generator=this.eat(E.star)),this.options.ecmaVersion>=8&&(t.async=!!r),e&ht&&(t.id=e&dt&&this.type!==E.name?null:this.parseIdent(),!t.id||e&pt||this.checkLVal(t.id,this.strict||t.generator||t.async?this.treatFunctionsAsVar?$:J:tt));var i=this.yieldPos,o=this.awaitPos,a=this.awaitIdentPos;return this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(K(t.async,t.generator)),e&ht||(t.id=this.type===E.name?this.parseIdent():null),this.parseFunctionParams(t),this.parseFunctionBody(t,n,!1),this.yieldPos=i,this.awaitPos=o,this.awaitIdentPos=a,this.finishNode(t,e&ht?"FunctionDeclaration":"FunctionExpression")},ut.parseFunctionParams=function(t){this.expect(E.parenL),t.params=this.parseBindingList(E.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams()},ut.parseClass=function(t,e){this.next();var n=this.strict;this.strict=!0,this.parseClassId(t,e),this.parseClassSuper(t);var r=this.startNode(),i=!1;r.body=[],this.expect(E.braceL);while(this.type!==E.braceR){var o=this.parseClassElement(null!==t.superClass);o&&(r.body.push(o),"MethodDefinition"===o.type&&"constructor"===o.kind&&(i&&this.raise(o.start,"Duplicate constructor in the same class"),i=!0))}return this.strict=n,this.next(),t.body=this.finishNode(r,"ClassBody"),this.finishNode(t,e?"ClassDeclaration":"ClassExpression")},ut.parseClassElement=function(t){var e=this;if(this.eat(E.semi))return null;var n=this.startNode(),r=function(t,r){void 0===r&&(r=!1);var i=e.start,o=e.startLoc;return!!e.eatContextual(t)&&(!(e.type===E.parenL||r&&e.canInsertSemicolon())||(n.key&&e.unexpected(),n.computed=!1,n.key=e.startNodeAt(i,o),n.key.name=t,e.finishNode(n.key,"Identifier"),!1))};n.kind="method",n["static"]=r("static");var i=this.eat(E.star),o=!1;i||(this.options.ecmaVersion>=8&&r("async",!0)?(o=!0,i=this.options.ecmaVersion>=9&&this.eat(E.star)):r("get")?n.kind="get":r("set")&&(n.kind="set")),n.key||this.parsePropertyName(n);var a=n.key,s=!1;return n.computed||n["static"]||!("Identifier"===a.type&&"constructor"===a.name||"Literal"===a.type&&"constructor"===a.value)?n["static"]&&"Identifier"===a.type&&"prototype"===a.name&&this.raise(a.start,"Classes may not have a static property named prototype"):("method"!==n.kind&&this.raise(a.start,"Constructor can't have get/set modifier"),i&&this.raise(a.start,"Constructor can't be a generator"),o&&this.raise(a.start,"Constructor can't be an async method"),n.kind="constructor",s=t),this.parseClassMethod(n,i,o,s),"get"===n.kind&&0!==n.value.params.length&&this.raiseRecoverable(n.value.start,"getter should have no params"),"set"===n.kind&&1!==n.value.params.length&&this.raiseRecoverable(n.value.start,"setter should have exactly one param"),"set"===n.kind&&"RestElement"===n.value.params[0].type&&this.raiseRecoverable(n.value.params[0].start,"Setter cannot use rest params"),n},ut.parseClassMethod=function(t,e,n,r){return t.value=this.parseMethod(e,n,r),this.finishNode(t,"MethodDefinition")},ut.parseClassId=function(t,e){this.type===E.name?(t.id=this.parseIdent(),e&&this.checkLVal(t.id,J,!1)):(!0===e&&this.unexpected(),t.id=null)},ut.parseClassSuper=function(t){t.superClass=this.eat(E._extends)?this.parseExprSubscripts():null},ut.parseExport=function(t,e){if(this.next(),this.eat(E.star))return this.options.ecmaVersion>=11&&(this.eatContextual("as")?(t.exported=this.parseIdent(!0),this.checkExport(e,t.exported.name,this.lastTokStart)):t.exported=null),this.expectContextual("from"),this.type!==E.string&&this.unexpected(),t.source=this.parseExprAtom(),this.semicolon(),this.finishNode(t,"ExportAllDeclaration");if(this.eat(E._default)){var n;if(this.checkExport(e,"default",this.lastTokStart),this.type===E._function||(n=this.isAsyncFunction())){var r=this.startNode();this.next(),n&&this.next(),t.declaration=this.parseFunction(r,ht|dt,!1,n)}else if(this.type===E._class){var i=this.startNode();t.declaration=this.parseClass(i,"nullableID")}else t.declaration=this.parseMaybeAssign(),this.semicolon();return this.finishNode(t,"ExportDefaultDeclaration")}if(this.shouldParseExportStatement())t.declaration=this.parseStatement(null),"VariableDeclaration"===t.declaration.type?this.checkVariableExport(e,t.declaration.declarations):this.checkExport(e,t.declaration.id.name,t.declaration.id.start),t.specifiers=[],t.source=null;else{if(t.declaration=null,t.specifiers=this.parseExportSpecifiers(e),this.eatContextual("from"))this.type!==E.string&&this.unexpected(),t.source=this.parseExprAtom();else{for(var o=0,a=t.specifiers;o<a.length;o+=1){var s=a[o];this.checkUnreserved(s.local),this.checkLocalExport(s.local)}t.source=null}this.semicolon()}return this.finishNode(t,"ExportNamedDeclaration")},ut.checkExport=function(t,e,n){t&&(R(t,e)&&this.raiseRecoverable(n,"Duplicate export '"+e+"'"),t[e]=!0)},ut.checkPatternExport=function(t,e){var n=e.type;if("Identifier"===n)this.checkExport(t,e.name,e.start);else if("ObjectPattern"===n)for(var r=0,i=e.properties;r<i.length;r+=1){var o=i[r];this.checkPatternExport(t,o)}else if("ArrayPattern"===n)for(var a=0,s=e.elements;a<s.length;a+=1){var u=s[a];u&&this.checkPatternExport(t,u)}else"Property"===n?this.checkPatternExport(t,e.value):"AssignmentPattern"===n?this.checkPatternExport(t,e.left):"RestElement"===n?this.checkPatternExport(t,e.argument):"ParenthesizedExpression"===n&&this.checkPatternExport(t,e.expression)},ut.checkVariableExport=function(t,e){if(t)for(var n=0,r=e;n<r.length;n+=1){var i=r[n];this.checkPatternExport(t,i.id)}},ut.shouldParseExportStatement=function(){return"var"===this.type.keyword||"const"===this.type.keyword||"class"===this.type.keyword||"function"===this.type.keyword||this.isLet()||this.isAsyncFunction()},ut.parseExportSpecifiers=function(t){var e=[],n=!0;this.expect(E.braceL);while(!this.eat(E.braceR)){if(n)n=!1;else if(this.expect(E.comma),this.afterTrailingComma(E.braceR))break;var r=this.startNode();r.local=this.parseIdent(!0),r.exported=this.eatContextual("as")?this.parseIdent(!0):r.local,this.checkExport(t,r.exported.name,r.exported.start),e.push(this.finishNode(r,"ExportSpecifier"))}return e},ut.parseImport=function(t){return this.next(),this.type===E.string?(t.specifiers=ft,t.source=this.parseExprAtom()):(t.specifiers=this.parseImportSpecifiers(),this.expectContextual("from"),t.source=this.type===E.string?this.parseExprAtom():this.unexpected()),this.semicolon(),this.finishNode(t,"ImportDeclaration")},ut.parseImportSpecifiers=function(){var t=[],e=!0;if(this.type===E.name){var n=this.startNode();if(n.local=this.parseIdent(),this.checkLVal(n.local,J),t.push(this.finishNode(n,"ImportDefaultSpecifier")),!this.eat(E.comma))return t}if(this.type===E.star){var r=this.startNode();return this.next(),this.expectContextual("as"),r.local=this.parseIdent(),this.checkLVal(r.local,J),t.push(this.finishNode(r,"ImportNamespaceSpecifier")),t}this.expect(E.braceL);while(!this.eat(E.braceR)){if(e)e=!1;else if(this.expect(E.comma),this.afterTrailingComma(E.braceR))break;var i=this.startNode();i.imported=this.parseIdent(!0),this.eatContextual("as")?i.local=this.parseIdent():(this.checkUnreserved(i.imported),i.local=i.imported),this.checkLVal(i.local,J),t.push(this.finishNode(i,"ImportSpecifier"))}return t},ut.adaptDirectivePrologue=function(t){for(var e=0;e<t.length&&this.isDirectiveCandidate(t[e]);++e)t[e].directive=t[e].expression.raw.slice(1,-1)},ut.isDirectiveCandidate=function(t){return"ExpressionStatement"===t.type&&"Literal"===t.expression.type&&"string"===typeof t.expression.value&&('"'===this.input[t.start]||"'"===this.input[t.start])};var vt=rt.prototype;vt.toAssignable=function(t,e,n){if(this.options.ecmaVersion>=6&&t)switch(t.type){case"Identifier":this.inAsync&&"await"===t.name&&this.raise(t.start,"Cannot use 'await' as identifier inside an async function");break;case"ObjectPattern":case"ArrayPattern":case"RestElement":break;case"ObjectExpression":t.type="ObjectPattern",n&&this.checkPatternErrors(n,!0);for(var r=0,i=t.properties;r<i.length;r+=1){var o=i[r];this.toAssignable(o,e),"RestElement"!==o.type||"ArrayPattern"!==o.argument.type&&"ObjectPattern"!==o.argument.type||this.raise(o.argument.start,"Unexpected token")}break;case"Property":"init"!==t.kind&&this.raise(t.key.start,"Object pattern can't contain getter or setter"),this.toAssignable(t.value,e);break;case"ArrayExpression":t.type="ArrayPattern",n&&this.checkPatternErrors(n,!0),this.toAssignableList(t.elements,e);break;case"SpreadElement":t.type="RestElement",this.toAssignable(t.argument,e),"AssignmentPattern"===t.argument.type&&this.raise(t.argument.start,"Rest elements cannot have a default value");break;case"AssignmentExpression":"="!==t.operator&&this.raise(t.left.end,"Only '=' operator can be used for specifying default value."),t.type="AssignmentPattern",delete t.operator,this.toAssignable(t.left,e);case"AssignmentPattern":break;case"ParenthesizedExpression":this.toAssignable(t.expression,e,n);break;case"ChainExpression":this.raiseRecoverable(t.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":if(!e)break;default:this.raise(t.start,"Assigning to rvalue")}else n&&this.checkPatternErrors(n,!0);return t},vt.toAssignableList=function(t,e){for(var n=t.length,r=0;r<n;r++){var i=t[r];i&&this.toAssignable(i,e)}if(n){var o=t[n-1];6===this.options.ecmaVersion&&e&&o&&"RestElement"===o.type&&"Identifier"!==o.argument.type&&this.unexpected(o.argument.start)}return t},vt.parseSpread=function(t){var e=this.startNode();return this.next(),e.argument=this.parseMaybeAssign(!1,t),this.finishNode(e,"SpreadElement")},vt.parseRestBinding=function(){var t=this.startNode();return this.next(),6===this.options.ecmaVersion&&this.type!==E.name&&this.unexpected(),t.argument=this.parseBindingAtom(),this.finishNode(t,"RestElement")},vt.parseBindingAtom=function(){if(this.options.ecmaVersion>=6)switch(this.type){case E.bracketL:var t=this.startNode();return this.next(),t.elements=this.parseBindingList(E.bracketR,!0,!0),this.finishNode(t,"ArrayPattern");case E.braceL:return this.parseObj(!0)}return this.parseIdent()},vt.parseBindingList=function(t,e,n){var r=[],i=!0;while(!this.eat(t))if(i?i=!1:this.expect(E.comma),e&&this.type===E.comma)r.push(null);else{if(n&&this.afterTrailingComma(t))break;if(this.type===E.ellipsis){var o=this.parseRestBinding();this.parseBindingListItem(o),r.push(o),this.type===E.comma&&this.raise(this.start,"Comma is not permitted after the rest element"),this.expect(t);break}var a=this.parseMaybeDefault(this.start,this.startLoc);this.parseBindingListItem(a),r.push(a)}return r},vt.parseBindingListItem=function(t){return t},vt.parseMaybeDefault=function(t,e,n){if(n=n||this.parseBindingAtom(),this.options.ecmaVersion<6||!this.eat(E.eq))return n;var r=this.startNodeAt(t,e);return r.left=n,r.right=this.parseMaybeAssign(),this.finishNode(r,"AssignmentPattern")},vt.checkLVal=function(t,e,n){switch(void 0===e&&(e=Q),t.type){case"Identifier":e===J&&"let"===t.name&&this.raiseRecoverable(t.start,"let is disallowed as a lexically bound name"),this.strict&&this.reservedWordsStrictBind.test(t.name)&&this.raiseRecoverable(t.start,(e?"Binding ":"Assigning to ")+t.name+" in strict mode"),n&&(R(n,t.name)&&this.raiseRecoverable(t.start,"Argument name clash"),n[t.name]=!0),e!==Q&&e!==nt&&this.declareName(t.name,e,t.start);break;case"ChainExpression":this.raiseRecoverable(t.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":e&&this.raiseRecoverable(t.start,"Binding member expression");break;case"ObjectPattern":for(var r=0,i=t.properties;r<i.length;r+=1){var o=i[r];this.checkLVal(o,e,n)}break;case"Property":this.checkLVal(t.value,e,n);break;case"ArrayPattern":for(var a=0,s=t.elements;a<s.length;a+=1){var u=s[a];u&&this.checkLVal(u,e,n)}break;case"AssignmentPattern":this.checkLVal(t.left,e,n);break;case"RestElement":this.checkLVal(t.argument,e,n);break;case"ParenthesizedExpression":this.checkLVal(t.expression,e,n);break;default:this.raise(t.start,(e?"Binding":"Assigning to")+" rvalue")}};var gt=rt.prototype;gt.checkPropClash=function(t,e,n){if(!(this.options.ecmaVersion>=9&&"SpreadElement"===t.type)&&!(this.options.ecmaVersion>=6&&(t.computed||t.method||t.shorthand))){var r,i=t.key;switch(i.type){case"Identifier":r=i.name;break;case"Literal":r=String(i.value);break;default:return}var o=t.kind;if(this.options.ecmaVersion>=6)"__proto__"===r&&"init"===o&&(e.proto&&(n?n.doubleProto<0&&(n.doubleProto=i.start):this.raiseRecoverable(i.start,"Redefinition of __proto__ property")),e.proto=!0);else{r="$"+r;var a,s=e[r];if(s)a="init"===o?this.strict&&s.init||s.get||s.set:s.init||s[o],a&&this.raiseRecoverable(i.start,"Redefinition of property");else s=e[r]={init:!1,get:!1,set:!1};s[o]=!0}}},gt.parseExpression=function(t,e){var n=this.start,r=this.startLoc,i=this.parseMaybeAssign(t,e);if(this.type===E.comma){var o=this.startNodeAt(n,r);o.expressions=[i];while(this.eat(E.comma))o.expressions.push(this.parseMaybeAssign(t,e));return this.finishNode(o,"SequenceExpression")}return i},gt.parseMaybeAssign=function(t,e,n){if(this.isContextual("yield")){if(this.inGenerator)return this.parseYield(t);this.exprAllowed=!1}var r=!1,i=-1,o=-1;e?(i=e.parenthesizedAssign,o=e.trailingComma,e.parenthesizedAssign=e.trailingComma=-1):(e=new st,r=!0);var a=this.start,s=this.startLoc;this.type!==E.parenL&&this.type!==E.name||(this.potentialArrowAt=this.start);var u=this.parseMaybeConditional(t,e);if(n&&(u=n.call(this,u,a,s)),this.type.isAssign){var c=this.startNodeAt(a,s);return c.operator=this.value,c.left=this.type===E.eq?this.toAssignable(u,!1,e):u,r||(e.parenthesizedAssign=e.trailingComma=e.doubleProto=-1),e.shorthandAssign>=c.left.start&&(e.shorthandAssign=-1),this.checkLVal(u),this.next(),c.right=this.parseMaybeAssign(t),this.finishNode(c,"AssignmentExpression")}return r&&this.checkExpressionErrors(e,!0),i>-1&&(e.parenthesizedAssign=i),o>-1&&(e.trailingComma=o),u},gt.parseMaybeConditional=function(t,e){var n=this.start,r=this.startLoc,i=this.parseExprOps(t,e);if(this.checkExpressionErrors(e))return i;if(this.eat(E.question)){var o=this.startNodeAt(n,r);return o.test=i,o.consequent=this.parseMaybeAssign(),this.expect(E.colon),o.alternate=this.parseMaybeAssign(t),this.finishNode(o,"ConditionalExpression")}return i},gt.parseExprOps=function(t,e){var n=this.start,r=this.startLoc,i=this.parseMaybeUnary(e,!1);return this.checkExpressionErrors(e)||i.start===n&&"ArrowFunctionExpression"===i.type?i:this.parseExprOp(i,n,r,-1,t)},gt.parseExprOp=function(t,e,n,r,i){var o=this.type.binop;if(null!=o&&(!i||this.type!==E._in)&&o>r){var a=this.type===E.logicalOR||this.type===E.logicalAND,s=this.type===E.coalesce;s&&(o=E.logicalAND.binop);var u=this.value;this.next();var c=this.start,l=this.startLoc,f=this.parseExprOp(this.parseMaybeUnary(null,!1),c,l,o,i),h=this.buildBinary(e,n,t,f,u,a||s);return(a&&this.type===E.coalesce||s&&(this.type===E.logicalOR||this.type===E.logicalAND))&&this.raiseRecoverable(this.start,"Logical expressions and coalesce expressions cannot be mixed. Wrap either by parentheses"),this.parseExprOp(h,e,n,r,i)}return t},gt.buildBinary=function(t,e,n,r,i,o){var a=this.startNodeAt(t,e);return a.left=n,a.operator=i,a.right=r,this.finishNode(a,o?"LogicalExpression":"BinaryExpression")},gt.parseMaybeUnary=function(t,e){var n,r=this.start,i=this.startLoc;if(this.isContextual("await")&&(this.inAsync||!this.inFunction&&this.options.allowAwaitOutsideFunction))n=this.parseAwait(),e=!0;else if(this.type.prefix){var o=this.startNode(),a=this.type===E.incDec;o.operator=this.value,o.prefix=!0,this.next(),o.argument=this.parseMaybeUnary(null,!0),this.checkExpressionErrors(t,!0),a?this.checkLVal(o.argument):this.strict&&"delete"===o.operator&&"Identifier"===o.argument.type?this.raiseRecoverable(o.start,"Deleting local variable in strict mode"):e=!0,n=this.finishNode(o,a?"UpdateExpression":"UnaryExpression")}else{if(n=this.parseExprSubscripts(t),this.checkExpressionErrors(t))return n;while(this.type.postfix&&!this.canInsertSemicolon()){var s=this.startNodeAt(r,i);s.operator=this.value,s.prefix=!1,s.argument=n,this.checkLVal(n),this.next(),n=this.finishNode(s,"UpdateExpression")}}return!e&&this.eat(E.starstar)?this.buildBinary(r,i,n,this.parseMaybeUnary(null,!1),"**",!1):n},gt.parseExprSubscripts=function(t){var e=this.start,n=this.startLoc,r=this.parseExprAtom(t);if("ArrowFunctionExpression"===r.type&&")"!==this.input.slice(this.lastTokStart,this.lastTokEnd))return r;var i=this.parseSubscripts(r,e,n);return t&&"MemberExpression"===i.type&&(t.parenthesizedAssign>=i.start&&(t.parenthesizedAssign=-1),t.parenthesizedBind>=i.start&&(t.parenthesizedBind=-1)),i},gt.parseSubscripts=function(t,e,n,r){var i=this.options.ecmaVersion>=8&&"Identifier"===t.type&&"async"===t.name&&this.lastTokEnd===t.end&&!this.canInsertSemicolon()&&t.end-t.start===5&&this.potentialArrowAt===t.start,o=!1;while(1){var a=this.parseSubscript(t,e,n,r,i,o);if(a.optional&&(o=!0),a===t||"ArrowFunctionExpression"===a.type){if(o){var s=this.startNodeAt(e,n);s.expression=a,a=this.finishNode(s,"ChainExpression")}return a}t=a}},gt.parseSubscript=function(t,e,n,r,i,o){var a=this.options.ecmaVersion>=11,s=a&&this.eat(E.questionDot);r&&s&&this.raise(this.lastTokStart,"Optional chaining cannot appear in the callee of new expressions");var u=this.eat(E.bracketL);if(u||s&&this.type!==E.parenL&&this.type!==E.backQuote||this.eat(E.dot)){var c=this.startNodeAt(e,n);c.object=t,c.property=u?this.parseExpression():this.parseIdent("never"!==this.options.allowReserved),c.computed=!!u,u&&this.expect(E.bracketR),a&&(c.optional=s),t=this.finishNode(c,"MemberExpression")}else if(!r&&this.eat(E.parenL)){var l=new st,f=this.yieldPos,h=this.awaitPos,p=this.awaitIdentPos;this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0;var d=this.parseExprList(E.parenR,this.options.ecmaVersion>=8,!1,l);if(i&&!s&&!this.canInsertSemicolon()&&this.eat(E.arrow))return this.checkPatternErrors(l,!1),this.checkYieldAwaitInDefaultParams(),this.awaitIdentPos>0&&this.raise(this.awaitIdentPos,"Cannot use 'await' as identifier inside an async function"),this.yieldPos=f,this.awaitPos=h,this.awaitIdentPos=p,this.parseArrowExpression(this.startNodeAt(e,n),d,!0);this.checkExpressionErrors(l,!0),this.yieldPos=f||this.yieldPos,this.awaitPos=h||this.awaitPos,this.awaitIdentPos=p||this.awaitIdentPos;var v=this.startNodeAt(e,n);v.callee=t,v.arguments=d,a&&(v.optional=s),t=this.finishNode(v,"CallExpression")}else if(this.type===E.backQuote){(s||o)&&this.raise(this.start,"Optional chaining cannot appear in the tag of tagged template expressions");var g=this.startNodeAt(e,n);g.tag=t,g.quasi=this.parseTemplate({isTagged:!0}),t=this.finishNode(g,"TaggedTemplateExpression")}return t},gt.parseExprAtom=function(t){this.type===E.slash&&this.readRegexp();var e,n=this.potentialArrowAt===this.start;switch(this.type){case E._super:return this.allowSuper||this.raise(this.start,"'super' keyword outside a method"),e=this.startNode(),this.next(),this.type!==E.parenL||this.allowDirectSuper||this.raise(e.start,"super() call outside constructor of a subclass"),this.type!==E.dot&&this.type!==E.bracketL&&this.type!==E.parenL&&this.unexpected(),this.finishNode(e,"Super");case E._this:return e=this.startNode(),this.next(),this.finishNode(e,"ThisExpression");case E.name:var r=this.start,i=this.startLoc,o=this.containsEsc,a=this.parseIdent(!1);if(this.options.ecmaVersion>=8&&!o&&"async"===a.name&&!this.canInsertSemicolon()&&this.eat(E._function))return this.parseFunction(this.startNodeAt(r,i),0,!1,!0);if(n&&!this.canInsertSemicolon()){if(this.eat(E.arrow))return this.parseArrowExpression(this.startNodeAt(r,i),[a],!1);if(this.options.ecmaVersion>=8&&"async"===a.name&&this.type===E.name&&!o)return a=this.parseIdent(!1),!this.canInsertSemicolon()&&this.eat(E.arrow)||this.unexpected(),this.parseArrowExpression(this.startNodeAt(r,i),[a],!0)}return a;case E.regexp:var s=this.value;return e=this.parseLiteral(s.value),e.regex={pattern:s.pattern,flags:s.flags},e;case E.num:case E.string:return this.parseLiteral(this.value);case E._null:case E._true:case E._false:return e=this.startNode(),e.value=this.type===E._null?null:this.type===E._true,e.raw=this.type.keyword,this.next(),this.finishNode(e,"Literal");case E.parenL:var u=this.start,c=this.parseParenAndDistinguishExpression(n);return t&&(t.parenthesizedAssign<0&&!this.isSimpleAssignTarget(c)&&(t.parenthesizedAssign=u),t.parenthesizedBind<0&&(t.parenthesizedBind=u)),c;case E.bracketL:return e=this.startNode(),this.next(),e.elements=this.parseExprList(E.bracketR,!0,!0,t),this.finishNode(e,"ArrayExpression");case E.braceL:return this.parseObj(!1,t);case E._function:return e=this.startNode(),this.next(),this.parseFunction(e,0);case E._class:return this.parseClass(this.startNode(),!1);case E._new:return this.parseNew();case E.backQuote:return this.parseTemplate();case E._import:return this.options.ecmaVersion>=11?this.parseExprImport():this.unexpected();default:this.unexpected()}},gt.parseExprImport=function(){var t=this.startNode();this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword import");var e=this.parseIdent(!0);switch(this.type){case E.parenL:return this.parseDynamicImport(t);case E.dot:return t.meta=e,this.parseImportMeta(t);default:this.unexpected()}},gt.parseDynamicImport=function(t){if(this.next(),t.source=this.parseMaybeAssign(),!this.eat(E.parenR)){var e=this.start;this.eat(E.comma)&&this.eat(E.parenR)?this.raiseRecoverable(e,"Trailing comma is not allowed in import()"):this.unexpected(e)}return this.finishNode(t,"ImportExpression")},gt.parseImportMeta=function(t){this.next();var e=this.containsEsc;return t.property=this.parseIdent(!0),"meta"!==t.property.name&&this.raiseRecoverable(t.property.start,"The only valid meta property for import is 'import.meta'"),e&&this.raiseRecoverable(t.start,"'import.meta' must not contain escaped characters"),"module"!==this.options.sourceType&&this.raiseRecoverable(t.start,"Cannot use 'import.meta' outside a module"),this.finishNode(t,"MetaProperty")},gt.parseLiteral=function(t){var e=this.startNode();return e.value=t,e.raw=this.input.slice(this.start,this.end),110===e.raw.charCodeAt(e.raw.length-1)&&(e.bigint=e.raw.slice(0,-1).replace(/_/g,"")),this.next(),this.finishNode(e,"Literal")},gt.parseParenExpression=function(){this.expect(E.parenL);var t=this.parseExpression();return this.expect(E.parenR),t},gt.parseParenAndDistinguishExpression=function(t){var e,n=this.start,r=this.startLoc,i=this.options.ecmaVersion>=8;if(this.options.ecmaVersion>=6){this.next();var o,a=this.start,s=this.startLoc,u=[],c=!0,l=!1,f=new st,h=this.yieldPos,p=this.awaitPos;this.yieldPos=0,this.awaitPos=0;while(this.type!==E.parenR){if(c?c=!1:this.expect(E.comma),i&&this.afterTrailingComma(E.parenR,!0)){l=!0;break}if(this.type===E.ellipsis){o=this.start,u.push(this.parseParenItem(this.parseRestBinding())),this.type===E.comma&&this.raise(this.start,"Comma is not permitted after the rest element");break}u.push(this.parseMaybeAssign(!1,f,this.parseParenItem))}var d=this.start,v=this.startLoc;if(this.expect(E.parenR),t&&!this.canInsertSemicolon()&&this.eat(E.arrow))return this.checkPatternErrors(f,!1),this.checkYieldAwaitInDefaultParams(),this.yieldPos=h,this.awaitPos=p,this.parseParenArrowList(n,r,u);u.length&&!l||this.unexpected(this.lastTokStart),o&&this.unexpected(o),this.checkExpressionErrors(f,!0),this.yieldPos=h||this.yieldPos,this.awaitPos=p||this.awaitPos,u.length>1?(e=this.startNodeAt(a,s),e.expressions=u,this.finishNodeAt(e,"SequenceExpression",d,v)):e=u[0]}else e=this.parseParenExpression();if(this.options.preserveParens){var g=this.startNodeAt(n,r);return g.expression=e,this.finishNode(g,"ParenthesizedExpression")}return e},gt.parseParenItem=function(t){return t},gt.parseParenArrowList=function(t,e,n){return this.parseArrowExpression(this.startNodeAt(t,e),n)};var mt=[];gt.parseNew=function(){this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword new");var t=this.startNode(),e=this.parseIdent(!0);if(this.options.ecmaVersion>=6&&this.eat(E.dot)){t.meta=e;var n=this.containsEsc;return t.property=this.parseIdent(!0),"target"!==t.property.name&&this.raiseRecoverable(t.property.start,"The only valid meta property for new is 'new.target'"),n&&this.raiseRecoverable(t.start,"'new.target' must not contain escaped characters"),this.inNonArrowFunction()||this.raiseRecoverable(t.start,"'new.target' can only be used in functions"),this.finishNode(t,"MetaProperty")}var r=this.start,i=this.startLoc,o=this.type===E._import;return t.callee=this.parseSubscripts(this.parseExprAtom(),r,i,!0),o&&"ImportExpression"===t.callee.type&&this.raise(r,"Cannot use new with import()"),this.eat(E.parenL)?t.arguments=this.parseExprList(E.parenR,this.options.ecmaVersion>=8,!1):t.arguments=mt,this.finishNode(t,"NewExpression")},gt.parseTemplateElement=function(t){var e=t.isTagged,n=this.startNode();return this.type===E.invalidTemplate?(e||this.raiseRecoverable(this.start,"Bad escape sequence in untagged template literal"),n.value={raw:this.value,cooked:null}):n.value={raw:this.input.slice(this.start,this.end).replace(/\r\n?/g,"\n"),cooked:this.value},this.next(),n.tail=this.type===E.backQuote,this.finishNode(n,"TemplateElement")},gt.parseTemplate=function(t){void 0===t&&(t={});var e=t.isTagged;void 0===e&&(e=!1);var n=this.startNode();this.next(),n.expressions=[];var r=this.parseTemplateElement({isTagged:e});n.quasis=[r];while(!r.tail)this.type===E.eof&&this.raise(this.pos,"Unterminated template literal"),this.expect(E.dollarBraceL),n.expressions.push(this.parseExpression()),this.expect(E.braceR),n.quasis.push(r=this.parseTemplateElement({isTagged:e}));return this.next(),this.finishNode(n,"TemplateLiteral")},gt.isAsyncProp=function(t){return!t.computed&&"Identifier"===t.key.type&&"async"===t.key.name&&(this.type===E.name||this.type===E.num||this.type===E.string||this.type===E.bracketL||this.type.keyword||this.options.ecmaVersion>=9&&this.type===E.star)&&!S.test(this.input.slice(this.lastTokEnd,this.start))},gt.parseObj=function(t,e){var n=this.startNode(),r=!0,i={};n.properties=[],this.next();while(!this.eat(E.braceR)){if(r)r=!1;else if(this.expect(E.comma),this.options.ecmaVersion>=5&&this.afterTrailingComma(E.braceR))break;var o=this.parseProperty(t,e);t||this.checkPropClash(o,i,e),n.properties.push(o)}return this.finishNode(n,t?"ObjectPattern":"ObjectExpression")},gt.parseProperty=function(t,e){var n,r,i,o,a=this.startNode();if(this.options.ecmaVersion>=9&&this.eat(E.ellipsis))return t?(a.argument=this.parseIdent(!1),this.type===E.comma&&this.raise(this.start,"Comma is not permitted after the rest element"),this.finishNode(a,"RestElement")):(this.type===E.parenL&&e&&(e.parenthesizedAssign<0&&(e.parenthesizedAssign=this.start),e.parenthesizedBind<0&&(e.parenthesizedBind=this.start)),a.argument=this.parseMaybeAssign(!1,e),this.type===E.comma&&e&&e.trailingComma<0&&(e.trailingComma=this.start),this.finishNode(a,"SpreadElement"));this.options.ecmaVersion>=6&&(a.method=!1,a.shorthand=!1,(t||e)&&(i=this.start,o=this.startLoc),t||(n=this.eat(E.star)));var s=this.containsEsc;return this.parsePropertyName(a),!t&&!s&&this.options.ecmaVersion>=8&&!n&&this.isAsyncProp(a)?(r=!0,n=this.options.ecmaVersion>=9&&this.eat(E.star),this.parsePropertyName(a,e)):r=!1,this.parsePropertyValue(a,t,n,r,i,o,e,s),this.finishNode(a,"Property")},gt.parsePropertyValue=function(t,e,n,r,i,o,a,s){if((n||r)&&this.type===E.colon&&this.unexpected(),this.eat(E.colon))t.value=e?this.parseMaybeDefault(this.start,this.startLoc):this.parseMaybeAssign(!1,a),t.kind="init";else if(this.options.ecmaVersion>=6&&this.type===E.parenL)e&&this.unexpected(),t.kind="init",t.method=!0,t.value=this.parseMethod(n,r);else if(e||s||!(this.options.ecmaVersion>=5)||t.computed||"Identifier"!==t.key.type||"get"!==t.key.name&&"set"!==t.key.name||this.type===E.comma||this.type===E.braceR||this.type===E.eq)this.options.ecmaVersion>=6&&!t.computed&&"Identifier"===t.key.type?((n||r)&&this.unexpected(),this.checkUnreserved(t.key),"await"!==t.key.name||this.awaitIdentPos||(this.awaitIdentPos=i),t.kind="init",e?t.value=this.parseMaybeDefault(i,o,t.key):this.type===E.eq&&a?(a.shorthandAssign<0&&(a.shorthandAssign=this.start),t.value=this.parseMaybeDefault(i,o,t.key)):t.value=t.key,t.shorthand=!0):this.unexpected();else{(n||r)&&this.unexpected(),t.kind=t.key.name,this.parsePropertyName(t),t.value=this.parseMethod(!1);var u="get"===t.kind?0:1;if(t.value.params.length!==u){var c=t.value.start;"get"===t.kind?this.raiseRecoverable(c,"getter should have no params"):this.raiseRecoverable(c,"setter should have exactly one param")}else"set"===t.kind&&"RestElement"===t.value.params[0].type&&this.raiseRecoverable(t.value.params[0].start,"Setter cannot use rest params")}},gt.parsePropertyName=function(t){if(this.options.ecmaVersion>=6){if(this.eat(E.bracketL))return t.computed=!0,t.key=this.parseMaybeAssign(),this.expect(E.bracketR),t.key;t.computed=!1}return t.key=this.type===E.num||this.type===E.string?this.parseExprAtom():this.parseIdent("never"!==this.options.allowReserved)},gt.initFunction=function(t){t.id=null,this.options.ecmaVersion>=6&&(t.generator=t.expression=!1),this.options.ecmaVersion>=8&&(t.async=!1)},gt.parseMethod=function(t,e,n){var r=this.startNode(),i=this.yieldPos,o=this.awaitPos,a=this.awaitIdentPos;return this.initFunction(r),this.options.ecmaVersion>=6&&(r.generator=t),this.options.ecmaVersion>=8&&(r.async=!!e),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(K(e,r.generator)|X|(n?q:0)),this.expect(E.parenL),r.params=this.parseBindingList(E.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams(),this.parseFunctionBody(r,!1,!0),this.yieldPos=i,this.awaitPos=o,this.awaitIdentPos=a,this.finishNode(r,"FunctionExpression")},gt.parseArrowExpression=function(t,e,n){var r=this.yieldPos,i=this.awaitPos,o=this.awaitIdentPos;return this.enterScope(K(n,!1)|Z),this.initFunction(t),this.options.ecmaVersion>=8&&(t.async=!!n),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,t.params=this.toAssignableList(e,!0),this.parseFunctionBody(t,!0,!1),this.yieldPos=r,this.awaitPos=i,this.awaitIdentPos=o,this.finishNode(t,"ArrowFunctionExpression")},gt.parseFunctionBody=function(t,e,n){var r=e&&this.type!==E.braceL,i=this.strict,o=!1;if(r)t.body=this.parseMaybeAssign(),t.expression=!0,this.checkParams(t,!1);else{var a=this.options.ecmaVersion>=7&&!this.isSimpleParamList(t.params);i&&!a||(o=this.strictDirective(this.end),o&&a&&this.raiseRecoverable(t.start,"Illegal 'use strict' directive in function with non-simple parameter list"));var s=this.labels;this.labels=[],o&&(this.strict=!0),this.checkParams(t,!i&&!o&&!e&&!n&&this.isSimpleParamList(t.params)),this.strict&&t.id&&this.checkLVal(t.id,nt),t.body=this.parseBlock(!1,void 0,o&&!i),t.expression=!1,this.adaptDirectivePrologue(t.body.body),this.labels=s}this.exitScope()},gt.isSimpleParamList=function(t){for(var e=0,n=t;e<n.length;e+=1){var r=n[e];if("Identifier"!==r.type)return!1}return!0},gt.checkParams=function(t,e){for(var n={},r=0,i=t.params;r<i.length;r+=1){var o=i[r];this.checkLVal(o,$,e?null:n)}},gt.parseExprList=function(t,e,n,r){var i=[],o=!0;while(!this.eat(t)){if(o)o=!1;else if(this.expect(E.comma),e&&this.afterTrailingComma(t))break;var a=void 0;n&&this.type===E.comma?a=null:this.type===E.ellipsis?(a=this.parseSpread(r),r&&this.type===E.comma&&r.trailingComma<0&&(r.trailingComma=this.start)):a=this.parseMaybeAssign(!1,r),i.push(a)}return i},gt.checkUnreserved=function(t){var e=t.start,n=t.end,r=t.name;if(this.inGenerator&&"yield"===r&&this.raiseRecoverable(e,"Cannot use 'yield' as identifier inside a generator"),this.inAsync&&"await"===r&&this.raiseRecoverable(e,"Cannot use 'await' as identifier inside an async function"),this.keywords.test(r)&&this.raise(e,"Unexpected keyword '"+r+"'"),!(this.options.ecmaVersion<6&&-1!==this.input.slice(e,n).indexOf("\\"))){var i=this.strict?this.reservedWordsStrict:this.reservedWords;i.test(r)&&(this.inAsync||"await"!==r||this.raiseRecoverable(e,"Cannot use keyword 'await' outside an async function"),this.raiseRecoverable(e,"The keyword '"+r+"' is reserved"))}},gt.parseIdent=function(t,e){var n=this.startNode();return this.type===E.name?n.name=this.value:this.type.keyword?(n.name=this.type.keyword,"class"!==n.name&&"function"!==n.name||this.lastTokEnd===this.lastTokStart+1&&46===this.input.charCodeAt(this.lastTokStart)||this.context.pop()):this.unexpected(),this.next(!!t),this.finishNode(n,"Identifier"),t||(this.checkUnreserved(n),"await"!==n.name||this.awaitIdentPos||(this.awaitIdentPos=n.start)),n},gt.parseYield=function(t){this.yieldPos||(this.yieldPos=this.start);var e=this.startNode();return this.next(),this.type===E.semi||this.canInsertSemicolon()||this.type!==E.star&&!this.type.startsExpr?(e.delegate=!1,e.argument=null):(e.delegate=this.eat(E.star),e.argument=this.parseMaybeAssign(t)),this.finishNode(e,"YieldExpression")},gt.parseAwait=function(){this.awaitPos||(this.awaitPos=this.start);var t=this.startNode();return this.next(),t.argument=this.parseMaybeUnary(null,!1),this.finishNode(t,"AwaitExpression")};var yt=rt.prototype;yt.raise=function(t,e){var n=D(this.input,t);e+=" ("+n.line+":"+n.column+")";var r=new SyntaxError(e);throw r.pos=t,r.loc=n,r.raisedAt=this.pos,r},yt.raiseRecoverable=yt.raise,yt.curPosition=function(){if(this.options.locations)return new L(this.curLine,this.pos-this.lineStart)};var _t=rt.prototype,bt=function(t){this.flags=t,this["var"]=[],this.lexical=[],this.functions=[]};_t.enterScope=function(t){this.scopeStack.push(new bt(t))},_t.exitScope=function(){this.scopeStack.pop()},_t.treatFunctionsAsVarInScope=function(t){return t.flags&V||!this.inModule&&t.flags&U},_t.declareName=function(t,e,n){var r=!1;if(e===J){var i=this.currentScope();r=i.lexical.indexOf(t)>-1||i.functions.indexOf(t)>-1||i["var"].indexOf(t)>-1,i.lexical.push(t),this.inModule&&i.flags&U&&delete this.undefinedExports[t]}else if(e===et){var o=this.currentScope();o.lexical.push(t)}else if(e===tt){var a=this.currentScope();r=this.treatFunctionsAsVar?a.lexical.indexOf(t)>-1:a.lexical.indexOf(t)>-1||a["var"].indexOf(t)>-1,a.functions.push(t)}else for(var s=this.scopeStack.length-1;s>=0;--s){var u=this.scopeStack[s];if(u.lexical.indexOf(t)>-1&&!(u.flags&Y&&u.lexical[0]===t)||!this.treatFunctionsAsVarInScope(u)&&u.functions.indexOf(t)>-1){r=!0;break}if(u["var"].push(t),this.inModule&&u.flags&U&&delete this.undefinedExports[t],u.flags&H)break}r&&this.raiseRecoverable(n,"Identifier '"+t+"' has already been declared")},_t.checkLocalExport=function(t){-1===this.scopeStack[0].lexical.indexOf(t.name)&&-1===this.scopeStack[0]["var"].indexOf(t.name)&&(this.undefinedExports[t.name]=t)},_t.currentScope=function(){return this.scopeStack[this.scopeStack.length-1]},_t.currentVarScope=function(){for(var t=this.scopeStack.length-1;;t--){var e=this.scopeStack[t];if(e.flags&H)return e}},_t.currentThisScope=function(){for(var t=this.scopeStack.length-1;;t--){var e=this.scopeStack[t];if(e.flags&H&&!(e.flags&Z))return e}};var xt=function(t,e,n){this.type="",this.start=e,this.end=0,t.options.locations&&(this.loc=new N(t,n)),t.options.directSourceFile&&(this.sourceFile=t.options.directSourceFile),t.options.ranges&&(this.range=[e,0])},wt=rt.prototype;function Et(t,e,n,r){return t.type=e,t.end=n,this.options.locations&&(t.loc.end=r),this.options.ranges&&(t.range[1]=n),t}wt.startNode=function(){return new xt(this,this.start,this.startLoc)},wt.startNodeAt=function(t,e){return new xt(this,t,e)},wt.finishNode=function(t,e){return Et.call(this,t,e,this.lastTokEnd,this.lastTokEndLoc)},wt.finishNodeAt=function(t,e,n,r){return Et.call(this,t,e,n,r)};var St=function(t,e,n,r,i){this.token=t,this.isExpr=!!e,this.preserveSpace=!!n,this.override=r,this.generator=!!i},Ot={b_stat:new St("{",!1),b_expr:new St("{",!0),b_tmpl:new St("${",!1),p_stat:new St("(",!1),p_expr:new St("(",!0),q_tmpl:new St("`",!0,!0,(function(t){return t.tryReadTemplateToken()})),f_stat:new St("function",!1),f_expr:new St("function",!0),f_expr_gen:new St("function",!0,!1,null,!0),f_gen:new St("function",!1,!1,null,!0)},Ct=rt.prototype;Ct.initialContext=function(){return[Ot.b_stat]},Ct.braceIsBlock=function(t){var e=this.curContext();return e===Ot.f_expr||e===Ot.f_stat||(t!==E.colon||e!==Ot.b_stat&&e!==Ot.b_expr?t===E._return||t===E.name&&this.exprAllowed?S.test(this.input.slice(this.lastTokEnd,this.start)):t===E._else||t===E.semi||t===E.eof||t===E.parenR||t===E.arrow||(t===E.braceL?e===Ot.b_stat:t!==E._var&&t!==E._const&&t!==E.name&&!this.exprAllowed):!e.isExpr)},Ct.inGeneratorContext=function(){for(var t=this.context.length-1;t>=1;t--){var e=this.context[t];if("function"===e.token)return e.generator}return!1},Ct.updateContext=function(t){var e,n=this.type;n.keyword&&t===E.dot?this.exprAllowed=!1:(e=n.updateContext)?e.call(this,t):this.exprAllowed=n.beforeExpr},E.parenR.updateContext=E.braceR.updateContext=function(){if(1!==this.context.length){var t=this.context.pop();t===Ot.b_stat&&"function"===this.curContext().token&&(t=this.context.pop()),this.exprAllowed=!t.isExpr}else this.exprAllowed=!0},E.braceL.updateContext=function(t){this.context.push(this.braceIsBlock(t)?Ot.b_stat:Ot.b_expr),this.exprAllowed=!0},E.dollarBraceL.updateContext=function(){this.context.push(Ot.b_tmpl),this.exprAllowed=!0},E.parenL.updateContext=function(t){var e=t===E._if||t===E._for||t===E._with||t===E._while;this.context.push(e?Ot.p_stat:Ot.p_expr),this.exprAllowed=!0},E.incDec.updateContext=function(){},E._function.updateContext=E._class.updateContext=function(t){!t.beforeExpr||t===E.semi||t===E._else||t===E._return&&S.test(this.input.slice(this.lastTokEnd,this.start))||(t===E.colon||t===E.braceL)&&this.curContext()===Ot.b_stat?this.context.push(Ot.f_stat):this.context.push(Ot.f_expr),this.exprAllowed=!1},E.backQuote.updateContext=function(){this.curContext()===Ot.q_tmpl?this.context.pop():this.context.push(Ot.q_tmpl),this.exprAllowed=!1},E.star.updateContext=function(t){if(t===E._function){var e=this.context.length-1;this.context[e]===Ot.f_expr?this.context[e]=Ot.f_expr_gen:this.context[e]=Ot.f_gen}this.exprAllowed=!0},E.name.updateContext=function(t){var e=!1;this.options.ecmaVersion>=6&&t!==E.dot&&("of"===this.value&&!this.exprAllowed||"yield"===this.value&&this.inGeneratorContext())&&(e=!0),this.exprAllowed=e};var Tt="ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS",At=Tt+" Extended_Pictographic",kt=At,Mt={9:Tt,10:At,11:kt},Pt="Cased_Letter LC Close_Punctuation Pe Connector_Punctuation Pc Control Cc cntrl Currency_Symbol Sc Dash_Punctuation Pd Decimal_Number Nd digit Enclosing_Mark Me Final_Punctuation Pf Format Cf Initial_Punctuation Pi Letter L Letter_Number Nl Line_Separator Zl Lowercase_Letter Ll Mark M Combining_Mark Math_Symbol Sm Modifier_Letter Lm Modifier_Symbol Sk Nonspacing_Mark Mn Number N Open_Punctuation Ps Other C Other_Letter Lo Other_Number No Other_Punctuation Po Other_Symbol So Paragraph_Separator Zp Private_Use Co Punctuation P punct Separator Z Space_Separator Zs Spacing_Mark Mc Surrogate Cs Symbol S Titlecase_Letter Lt Unassigned Cn Uppercase_Letter Lu",Rt="Adlam Adlm Ahom Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb",jt=Rt+" Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd",It=jt+" Elymaic Elym Nandinagari Nand Nyiakeng_Puachue_Hmong Hmnp Wancho Wcho",Lt={9:Rt,10:jt,11:It},Nt={};function Dt(t){var e=Nt[t]={binary:I(Mt[t]+" "+Pt),nonBinary:{General_Category:I(Pt),Script:I(Lt[t])}};e.nonBinary.Script_Extensions=e.nonBinary.Script,e.nonBinary.gc=e.nonBinary.General_Category,e.nonBinary.sc=e.nonBinary.Script,e.nonBinary.scx=e.nonBinary.Script_Extensions}Dt(9),Dt(10),Dt(11);var Ft=rt.prototype,Bt=function(t){this.parser=t,this.validFlags="gim"+(t.options.ecmaVersion>=6?"uy":"")+(t.options.ecmaVersion>=9?"s":""),this.unicodeProperties=Nt[t.options.ecmaVersion>=11?11:t.options.ecmaVersion],this.source="",this.flags="",this.start=0,this.switchU=!1,this.switchN=!1,this.pos=0,this.lastIntValue=0,this.lastStringValue="",this.lastAssertionIsQuantifiable=!1,this.numCapturingParens=0,this.maxBackReference=0,this.groupNames=[],this.backReferenceNames=[]};function zt(t){return t<=65535?String.fromCharCode(t):(t-=65536,String.fromCharCode(55296+(t>>10),56320+(1023&t)))}function Ut(t){return 36===t||t>=40&&t<=43||46===t||63===t||t>=91&&t<=94||t>=123&&t<=125}function Vt(t){return v(t,!0)||36===t||95===t}function Ht(t){return g(t,!0)||36===t||95===t||8204===t||8205===t}function Gt(t){return t>=65&&t<=90||t>=97&&t<=122}function Wt(t){return t>=0&&t<=1114111}function Zt(t){return 100===t||68===t||115===t||83===t||119===t||87===t}function Yt(t){return Gt(t)||95===t}function Xt(t){return Yt(t)||qt(t)}function qt(t){return t>=48&&t<=57}function Kt(t){return t>=48&&t<=57||t>=65&&t<=70||t>=97&&t<=102}function Qt(t){return t>=65&&t<=70?t-65+10:t>=97&&t<=102?t-97+10:t-48}function $t(t){return t>=48&&t<=55}Bt.prototype.reset=function(t,e,n){var r=-1!==n.indexOf("u");this.start=0|t,this.source=e+"",this.flags=n,this.switchU=r&&this.parser.options.ecmaVersion>=6,this.switchN=r&&this.parser.options.ecmaVersion>=9},Bt.prototype.raise=function(t){this.parser.raiseRecoverable(this.start,"Invalid regular expression: /"+this.source+"/: "+t)},Bt.prototype.at=function(t,e){void 0===e&&(e=!1);var n=this.source,r=n.length;if(t>=r)return-1;var i=n.charCodeAt(t);if(!e&&!this.switchU||i<=55295||i>=57344||t+1>=r)return i;var o=n.charCodeAt(t+1);return o>=56320&&o<=57343?(i<<10)+o-56613888:i},Bt.prototype.nextIndex=function(t,e){void 0===e&&(e=!1);var n=this.source,r=n.length;if(t>=r)return r;var i,o=n.charCodeAt(t);return!e&&!this.switchU||o<=55295||o>=57344||t+1>=r||(i=n.charCodeAt(t+1))<56320||i>57343?t+1:t+2},Bt.prototype.current=function(t){return void 0===t&&(t=!1),this.at(this.pos,t)},Bt.prototype.lookahead=function(t){return void 0===t&&(t=!1),this.at(this.nextIndex(this.pos,t),t)},Bt.prototype.advance=function(t){void 0===t&&(t=!1),this.pos=this.nextIndex(this.pos,t)},Bt.prototype.eat=function(t,e){return void 0===e&&(e=!1),this.current(e)===t&&(this.advance(e),!0)},Ft.validateRegExpFlags=function(t){for(var e=t.validFlags,n=t.flags,r=0;r<n.length;r++){var i=n.charAt(r);-1===e.indexOf(i)&&this.raise(t.start,"Invalid regular expression flag"),n.indexOf(i,r+1)>-1&&this.raise(t.start,"Duplicate regular expression flag")}},Ft.validateRegExpPattern=function(t){this.regexp_pattern(t),!t.switchN&&this.options.ecmaVersion>=9&&t.groupNames.length>0&&(t.switchN=!0,this.regexp_pattern(t))},Ft.regexp_pattern=function(t){t.pos=0,t.lastIntValue=0,t.lastStringValue="",t.lastAssertionIsQuantifiable=!1,t.numCapturingParens=0,t.maxBackReference=0,t.groupNames.length=0,t.backReferenceNames.length=0,this.regexp_disjunction(t),t.pos!==t.source.length&&(t.eat(41)&&t.raise("Unmatched ')'"),(t.eat(93)||t.eat(125))&&t.raise("Lone quantifier brackets")),t.maxBackReference>t.numCapturingParens&&t.raise("Invalid escape");for(var e=0,n=t.backReferenceNames;e<n.length;e+=1){var r=n[e];-1===t.groupNames.indexOf(r)&&t.raise("Invalid named capture referenced")}},Ft.regexp_disjunction=function(t){this.regexp_alternative(t);while(t.eat(124))this.regexp_alternative(t);this.regexp_eatQuantifier(t,!0)&&t.raise("Nothing to repeat"),t.eat(123)&&t.raise("Lone quantifier brackets")},Ft.regexp_alternative=function(t){while(t.pos<t.source.length&&this.regexp_eatTerm(t));},Ft.regexp_eatTerm=function(t){return this.regexp_eatAssertion(t)?(t.lastAssertionIsQuantifiable&&this.regexp_eatQuantifier(t)&&t.switchU&&t.raise("Invalid quantifier"),!0):!!(t.switchU?this.regexp_eatAtom(t):this.regexp_eatExtendedAtom(t))&&(this.regexp_eatQuantifier(t),!0)},Ft.regexp_eatAssertion=function(t){var e=t.pos;if(t.lastAssertionIsQuantifiable=!1,t.eat(94)||t.eat(36))return!0;if(t.eat(92)){if(t.eat(66)||t.eat(98))return!0;t.pos=e}if(t.eat(40)&&t.eat(63)){var n=!1;if(this.options.ecmaVersion>=9&&(n=t.eat(60)),t.eat(61)||t.eat(33))return this.regexp_disjunction(t),t.eat(41)||t.raise("Unterminated group"),t.lastAssertionIsQuantifiable=!n,!0}return t.pos=e,!1},Ft.regexp_eatQuantifier=function(t,e){return void 0===e&&(e=!1),!!this.regexp_eatQuantifierPrefix(t,e)&&(t.eat(63),!0)},Ft.regexp_eatQuantifierPrefix=function(t,e){return t.eat(42)||t.eat(43)||t.eat(63)||this.regexp_eatBracedQuantifier(t,e)},Ft.regexp_eatBracedQuantifier=function(t,e){var n=t.pos;if(t.eat(123)){var r=0,i=-1;if(this.regexp_eatDecimalDigits(t)&&(r=t.lastIntValue,t.eat(44)&&this.regexp_eatDecimalDigits(t)&&(i=t.lastIntValue),t.eat(125)))return-1!==i&&i<r&&!e&&t.raise("numbers out of order in {} quantifier"),!0;t.switchU&&!e&&t.raise("Incomplete quantifier"),t.pos=n}return!1},Ft.regexp_eatAtom=function(t){return this.regexp_eatPatternCharacters(t)||t.eat(46)||this.regexp_eatReverseSolidusAtomEscape(t)||this.regexp_eatCharacterClass(t)||this.regexp_eatUncapturingGroup(t)||this.regexp_eatCapturingGroup(t)},Ft.regexp_eatReverseSolidusAtomEscape=function(t){var e=t.pos;if(t.eat(92)){if(this.regexp_eatAtomEscape(t))return!0;t.pos=e}return!1},Ft.regexp_eatUncapturingGroup=function(t){var e=t.pos;if(t.eat(40)){if(t.eat(63)&&t.eat(58)){if(this.regexp_disjunction(t),t.eat(41))return!0;t.raise("Unterminated group")}t.pos=e}return!1},Ft.regexp_eatCapturingGroup=function(t){if(t.eat(40)){if(this.options.ecmaVersion>=9?this.regexp_groupSpecifier(t):63===t.current()&&t.raise("Invalid group"),this.regexp_disjunction(t),t.eat(41))return t.numCapturingParens+=1,!0;t.raise("Unterminated group")}return!1},Ft.regexp_eatExtendedAtom=function(t){return t.eat(46)||this.regexp_eatReverseSolidusAtomEscape(t)||this.regexp_eatCharacterClass(t)||this.regexp_eatUncapturingGroup(t)||this.regexp_eatCapturingGroup(t)||this.regexp_eatInvalidBracedQuantifier(t)||this.regexp_eatExtendedPatternCharacter(t)},Ft.regexp_eatInvalidBracedQuantifier=function(t){return this.regexp_eatBracedQuantifier(t,!0)&&t.raise("Nothing to repeat"),!1},Ft.regexp_eatSyntaxCharacter=function(t){var e=t.current();return!!Ut(e)&&(t.lastIntValue=e,t.advance(),!0)},Ft.regexp_eatPatternCharacters=function(t){var e=t.pos,n=0;while(-1!==(n=t.current())&&!Ut(n))t.advance();return t.pos!==e},Ft.regexp_eatExtendedPatternCharacter=function(t){var e=t.current();return!(-1===e||36===e||e>=40&&e<=43||46===e||63===e||91===e||94===e||124===e)&&(t.advance(),!0)},Ft.regexp_groupSpecifier=function(t){if(t.eat(63)){if(this.regexp_eatGroupName(t))return-1!==t.groupNames.indexOf(t.lastStringValue)&&t.raise("Duplicate capture group name"),void t.groupNames.push(t.lastStringValue);t.raise("Invalid group")}},Ft.regexp_eatGroupName=function(t){if(t.lastStringValue="",t.eat(60)){if(this.regexp_eatRegExpIdentifierName(t)&&t.eat(62))return!0;t.raise("Invalid capture group name")}return!1},Ft.regexp_eatRegExpIdentifierName=function(t){if(t.lastStringValue="",this.regexp_eatRegExpIdentifierStart(t)){t.lastStringValue+=zt(t.lastIntValue);while(this.regexp_eatRegExpIdentifierPart(t))t.lastStringValue+=zt(t.lastIntValue);return!0}return!1},Ft.regexp_eatRegExpIdentifierStart=function(t){var e=t.pos,n=this.options.ecmaVersion>=11,r=t.current(n);return t.advance(n),92===r&&this.regexp_eatRegExpUnicodeEscapeSequence(t,n)&&(r=t.lastIntValue),Vt(r)?(t.lastIntValue=r,!0):(t.pos=e,!1)},Ft.regexp_eatRegExpIdentifierPart=function(t){var e=t.pos,n=this.options.ecmaVersion>=11,r=t.current(n);return t.advance(n),92===r&&this.regexp_eatRegExpUnicodeEscapeSequence(t,n)&&(r=t.lastIntValue),Ht(r)?(t.lastIntValue=r,!0):(t.pos=e,!1)},Ft.regexp_eatAtomEscape=function(t){return!!(this.regexp_eatBackReference(t)||this.regexp_eatCharacterClassEscape(t)||this.regexp_eatCharacterEscape(t)||t.switchN&&this.regexp_eatKGroupName(t))||(t.switchU&&(99===t.current()&&t.raise("Invalid unicode escape"),t.raise("Invalid escape")),!1)},Ft.regexp_eatBackReference=function(t){var e=t.pos;if(this.regexp_eatDecimalEscape(t)){var n=t.lastIntValue;if(t.switchU)return n>t.maxBackReference&&(t.maxBackReference=n),!0;if(n<=t.numCapturingParens)return!0;t.pos=e}return!1},Ft.regexp_eatKGroupName=function(t){if(t.eat(107)){if(this.regexp_eatGroupName(t))return t.backReferenceNames.push(t.lastStringValue),!0;t.raise("Invalid named reference")}return!1},Ft.regexp_eatCharacterEscape=function(t){return this.regexp_eatControlEscape(t)||this.regexp_eatCControlLetter(t)||this.regexp_eatZero(t)||this.regexp_eatHexEscapeSequence(t)||this.regexp_eatRegExpUnicodeEscapeSequence(t,!1)||!t.switchU&&this.regexp_eatLegacyOctalEscapeSequence(t)||this.regexp_eatIdentityEscape(t)},Ft.regexp_eatCControlLetter=function(t){var e=t.pos;if(t.eat(99)){if(this.regexp_eatControlLetter(t))return!0;t.pos=e}return!1},Ft.regexp_eatZero=function(t){return 48===t.current()&&!qt(t.lookahead())&&(t.lastIntValue=0,t.advance(),!0)},Ft.regexp_eatControlEscape=function(t){var e=t.current();return 116===e?(t.lastIntValue=9,t.advance(),!0):110===e?(t.lastIntValue=10,t.advance(),!0):118===e?(t.lastIntValue=11,t.advance(),!0):102===e?(t.lastIntValue=12,t.advance(),!0):114===e&&(t.lastIntValue=13,t.advance(),!0)},Ft.regexp_eatControlLetter=function(t){var e=t.current();return!!Gt(e)&&(t.lastIntValue=e%32,t.advance(),!0)},Ft.regexp_eatRegExpUnicodeEscapeSequence=function(t,e){void 0===e&&(e=!1);var n=t.pos,r=e||t.switchU;if(t.eat(117)){if(this.regexp_eatFixedHexDigits(t,4)){var i=t.lastIntValue;if(r&&i>=55296&&i<=56319){var o=t.pos;if(t.eat(92)&&t.eat(117)&&this.regexp_eatFixedHexDigits(t,4)){var a=t.lastIntValue;if(a>=56320&&a<=57343)return t.lastIntValue=1024*(i-55296)+(a-56320)+65536,!0}t.pos=o,t.lastIntValue=i}return!0}if(r&&t.eat(123)&&this.regexp_eatHexDigits(t)&&t.eat(125)&&Wt(t.lastIntValue))return!0;r&&t.raise("Invalid unicode escape"),t.pos=n}return!1},Ft.regexp_eatIdentityEscape=function(t){if(t.switchU)return!!this.regexp_eatSyntaxCharacter(t)||!!t.eat(47)&&(t.lastIntValue=47,!0);var e=t.current();return!(99===e||t.switchN&&107===e)&&(t.lastIntValue=e,t.advance(),!0)},Ft.regexp_eatDecimalEscape=function(t){t.lastIntValue=0;var e=t.current();if(e>=49&&e<=57){do{t.lastIntValue=10*t.lastIntValue+(e-48),t.advance()}while((e=t.current())>=48&&e<=57);return!0}return!1},Ft.regexp_eatCharacterClassEscape=function(t){var e=t.current();if(Zt(e))return t.lastIntValue=-1,t.advance(),!0;if(t.switchU&&this.options.ecmaVersion>=9&&(80===e||112===e)){if(t.lastIntValue=-1,t.advance(),t.eat(123)&&this.regexp_eatUnicodePropertyValueExpression(t)&&t.eat(125))return!0;t.raise("Invalid property name")}return!1},Ft.regexp_eatUnicodePropertyValueExpression=function(t){var e=t.pos;if(this.regexp_eatUnicodePropertyName(t)&&t.eat(61)){var n=t.lastStringValue;if(this.regexp_eatUnicodePropertyValue(t)){var r=t.lastStringValue;return this.regexp_validateUnicodePropertyNameAndValue(t,n,r),!0}}if(t.pos=e,this.regexp_eatLoneUnicodePropertyNameOrValue(t)){var i=t.lastStringValue;return this.regexp_validateUnicodePropertyNameOrValue(t,i),!0}return!1},Ft.regexp_validateUnicodePropertyNameAndValue=function(t,e,n){R(t.unicodeProperties.nonBinary,e)||t.raise("Invalid property name"),t.unicodeProperties.nonBinary[e].test(n)||t.raise("Invalid property value")},Ft.regexp_validateUnicodePropertyNameOrValue=function(t,e){t.unicodeProperties.binary.test(e)||t.raise("Invalid property name")},Ft.regexp_eatUnicodePropertyName=function(t){var e=0;t.lastStringValue="";while(Yt(e=t.current()))t.lastStringValue+=zt(e),t.advance();return""!==t.lastStringValue},Ft.regexp_eatUnicodePropertyValue=function(t){var e=0;t.lastStringValue="";while(Xt(e=t.current()))t.lastStringValue+=zt(e),t.advance();return""!==t.lastStringValue},Ft.regexp_eatLoneUnicodePropertyNameOrValue=function(t){return this.regexp_eatUnicodePropertyValue(t)},Ft.regexp_eatCharacterClass=function(t){if(t.eat(91)){if(t.eat(94),this.regexp_classRanges(t),t.eat(93))return!0;t.raise("Unterminated character class")}return!1},Ft.regexp_classRanges=function(t){while(this.regexp_eatClassAtom(t)){var e=t.lastIntValue;if(t.eat(45)&&this.regexp_eatClassAtom(t)){var n=t.lastIntValue;!t.switchU||-1!==e&&-1!==n||t.raise("Invalid character class"),-1!==e&&-1!==n&&e>n&&t.raise("Range out of order in character class")}}},Ft.regexp_eatClassAtom=function(t){var e=t.pos;if(t.eat(92)){if(this.regexp_eatClassEscape(t))return!0;if(t.switchU){var n=t.current();(99===n||$t(n))&&t.raise("Invalid class escape"),t.raise("Invalid escape")}t.pos=e}var r=t.current();return 93!==r&&(t.lastIntValue=r,t.advance(),!0)},Ft.regexp_eatClassEscape=function(t){var e=t.pos;if(t.eat(98))return t.lastIntValue=8,!0;if(t.switchU&&t.eat(45))return t.lastIntValue=45,!0;if(!t.switchU&&t.eat(99)){if(this.regexp_eatClassControlLetter(t))return!0;t.pos=e}return this.regexp_eatCharacterClassEscape(t)||this.regexp_eatCharacterEscape(t)},Ft.regexp_eatClassControlLetter=function(t){var e=t.current();return!(!qt(e)&&95!==e)&&(t.lastIntValue=e%32,t.advance(),!0)},Ft.regexp_eatHexEscapeSequence=function(t){var e=t.pos;if(t.eat(120)){if(this.regexp_eatFixedHexDigits(t,2))return!0;t.switchU&&t.raise("Invalid escape"),t.pos=e}return!1},Ft.regexp_eatDecimalDigits=function(t){var e=t.pos,n=0;t.lastIntValue=0;while(qt(n=t.current()))t.lastIntValue=10*t.lastIntValue+(n-48),t.advance();return t.pos!==e},Ft.regexp_eatHexDigits=function(t){var e=t.pos,n=0;t.lastIntValue=0;while(Kt(n=t.current()))t.lastIntValue=16*t.lastIntValue+Qt(n),t.advance();return t.pos!==e},Ft.regexp_eatLegacyOctalEscapeSequence=function(t){if(this.regexp_eatOctalDigit(t)){var e=t.lastIntValue;if(this.regexp_eatOctalDigit(t)){var n=t.lastIntValue;e<=3&&this.regexp_eatOctalDigit(t)?t.lastIntValue=64*e+8*n+t.lastIntValue:t.lastIntValue=8*e+n}else t.lastIntValue=e;return!0}return!1},Ft.regexp_eatOctalDigit=function(t){var e=t.current();return $t(e)?(t.lastIntValue=e-48,t.advance(),!0):(t.lastIntValue=0,!1)},Ft.regexp_eatFixedHexDigits=function(t,e){var n=t.pos;t.lastIntValue=0;for(var r=0;r<e;++r){var i=t.current();if(!Kt(i))return t.pos=n,!1;t.lastIntValue=16*t.lastIntValue+Qt(i),t.advance()}return!0};var Jt=function(t){this.type=t.type,this.value=t.value,this.start=t.start,this.end=t.end,t.options.locations&&(this.loc=new N(t,t.startLoc,t.endLoc)),t.options.ranges&&(this.range=[t.start,t.end])},te=rt.prototype;function ee(t,e){return e?parseInt(t,8):parseFloat(t.replace(/_/g,""))}function ne(t){return"function"!==typeof BigInt?null:BigInt(t.replace(/_/g,""))}function re(t){return t<=65535?String.fromCharCode(t):(t-=65536,String.fromCharCode(55296+(t>>10),56320+(1023&t)))}te.next=function(t){!t&&this.type.keyword&&this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword "+this.type.keyword),this.options.onToken&&this.options.onToken(new Jt(this)),this.lastTokEnd=this.end,this.lastTokStart=this.start,this.lastTokEndLoc=this.endLoc,this.lastTokStartLoc=this.startLoc,this.nextToken()},te.getToken=function(){return this.next(),new Jt(this)},"undefined"!==typeof Symbol&&(te[Symbol.iterator]=function(){var t=this;return{next:function(){var e=t.getToken();return{done:e.type===E.eof,value:e}}}}),te.curContext=function(){return this.context[this.context.length-1]},te.nextToken=function(){var t=this.curContext();return t&&t.preserveSpace||this.skipSpace(),this.start=this.pos,this.options.locations&&(this.startLoc=this.curPosition()),this.pos>=this.input.length?this.finishToken(E.eof):t.override?t.override(this):void this.readToken(this.fullCharCodeAtPos())},te.readToken=function(t){return v(t,this.options.ecmaVersion>=6)||92===t?this.readWord():this.getTokenFromCode(t)},te.fullCharCodeAtPos=function(){var t=this.input.charCodeAt(this.pos);if(t<=55295||t>=57344)return t;var e=this.input.charCodeAt(this.pos+1);return(t<<10)+e-56613888},te.skipBlockComment=function(){var t=this.options.onComment&&this.curPosition(),e=this.pos,n=this.input.indexOf("*/",this.pos+=2);if(-1===n&&this.raise(this.pos-2,"Unterminated comment"),this.pos=n+2,this.options.locations){var r;O.lastIndex=e;while((r=O.exec(this.input))&&r.index<this.pos)++this.curLine,this.lineStart=r.index+r[0].length}this.options.onComment&&this.options.onComment(!0,this.input.slice(e+2,n),e,this.pos,t,this.curPosition())},te.skipLineComment=function(t){var e=this.pos,n=this.options.onComment&&this.curPosition(),r=this.input.charCodeAt(this.pos+=t);while(this.pos<this.input.length&&!C(r))r=this.input.charCodeAt(++this.pos);this.options.onComment&&this.options.onComment(!1,this.input.slice(e+t,this.pos),e,this.pos,n,this.curPosition())},te.skipSpace=function(){t:while(this.pos<this.input.length){var t=this.input.charCodeAt(this.pos);switch(t){case 32:case 160:++this.pos;break;case 13:10===this.input.charCodeAt(this.pos+1)&&++this.pos;case 10:case 8232:case 8233:++this.pos,this.options.locations&&(++this.curLine,this.lineStart=this.pos);break;case 47:switch(this.input.charCodeAt(this.pos+1)){case 42:this.skipBlockComment();break;case 47:this.skipLineComment(2);break;default:break t}break;default:if(!(t>8&&t<14||t>=5760&&T.test(String.fromCharCode(t))))break t;++this.pos}}},te.finishToken=function(t,e){this.end=this.pos,this.options.locations&&(this.endLoc=this.curPosition());var n=this.type;this.type=t,this.value=e,this.updateContext(n)},te.readToken_dot=function(){var t=this.input.charCodeAt(this.pos+1);if(t>=48&&t<=57)return this.readNumber(!0);var e=this.input.charCodeAt(this.pos+2);return this.options.ecmaVersion>=6&&46===t&&46===e?(this.pos+=3,this.finishToken(E.ellipsis)):(++this.pos,this.finishToken(E.dot))},te.readToken_slash=function(){var t=this.input.charCodeAt(this.pos+1);return this.exprAllowed?(++this.pos,this.readRegexp()):61===t?this.finishOp(E.assign,2):this.finishOp(E.slash,1)},te.readToken_mult_modulo_exp=function(t){var e=this.input.charCodeAt(this.pos+1),n=1,r=42===t?E.star:E.modulo;return this.options.ecmaVersion>=7&&42===t&&42===e&&(++n,r=E.starstar,e=this.input.charCodeAt(this.pos+2)),61===e?this.finishOp(E.assign,n+1):this.finishOp(r,n)},te.readToken_pipe_amp=function(t){var e=this.input.charCodeAt(this.pos+1);if(e===t){if(this.options.ecmaVersion>=12){var n=this.input.charCodeAt(this.pos+2);if(61===n)return this.finishOp(E.assign,3)}return this.finishOp(124===t?E.logicalOR:E.logicalAND,2)}return 61===e?this.finishOp(E.assign,2):this.finishOp(124===t?E.bitwiseOR:E.bitwiseAND,1)},te.readToken_caret=function(){var t=this.input.charCodeAt(this.pos+1);return 61===t?this.finishOp(E.assign,2):this.finishOp(E.bitwiseXOR,1)},te.readToken_plus_min=function(t){var e=this.input.charCodeAt(this.pos+1);return e===t?45!==e||this.inModule||62!==this.input.charCodeAt(this.pos+2)||0!==this.lastTokEnd&&!S.test(this.input.slice(this.lastTokEnd,this.pos))?this.finishOp(E.incDec,2):(this.skipLineComment(3),this.skipSpace(),this.nextToken()):61===e?this.finishOp(E.assign,2):this.finishOp(E.plusMin,1)},te.readToken_lt_gt=function(t){var e=this.input.charCodeAt(this.pos+1),n=1;return e===t?(n=62===t&&62===this.input.charCodeAt(this.pos+2)?3:2,61===this.input.charCodeAt(this.pos+n)?this.finishOp(E.assign,n+1):this.finishOp(E.bitShift,n)):33!==e||60!==t||this.inModule||45!==this.input.charCodeAt(this.pos+2)||45!==this.input.charCodeAt(this.pos+3)?(61===e&&(n=2),this.finishOp(E.relational,n)):(this.skipLineComment(4),this.skipSpace(),this.nextToken())},te.readToken_eq_excl=function(t){var e=this.input.charCodeAt(this.pos+1);return 61===e?this.finishOp(E.equality,61===this.input.charCodeAt(this.pos+2)?3:2):61===t&&62===e&&this.options.ecmaVersion>=6?(this.pos+=2,this.finishToken(E.arrow)):this.finishOp(61===t?E.eq:E.prefix,1)},te.readToken_question=function(){var t=this.options.ecmaVersion;if(t>=11){var e=this.input.charCodeAt(this.pos+1);if(46===e){var n=this.input.charCodeAt(this.pos+2);if(n<48||n>57)return this.finishOp(E.questionDot,2)}if(63===e){if(t>=12){var r=this.input.charCodeAt(this.pos+2);if(61===r)return this.finishOp(E.assign,3)}return this.finishOp(E.coalesce,2)}}return this.finishOp(E.question,1)},te.getTokenFromCode=function(t){switch(t){case 46:return this.readToken_dot();case 40:return++this.pos,this.finishToken(E.parenL);case 41:return++this.pos,this.finishToken(E.parenR);case 59:return++this.pos,this.finishToken(E.semi);case 44:return++this.pos,this.finishToken(E.comma);case 91:return++this.pos,this.finishToken(E.bracketL);case 93:return++this.pos,this.finishToken(E.bracketR);case 123:return++this.pos,this.finishToken(E.braceL);case 125:return++this.pos,this.finishToken(E.braceR);case 58:return++this.pos,this.finishToken(E.colon);case 96:if(this.options.ecmaVersion<6)break;return++this.pos,this.finishToken(E.backQuote);case 48:var e=this.input.charCodeAt(this.pos+1);if(120===e||88===e)return this.readRadixNumber(16);if(this.options.ecmaVersion>=6){if(111===e||79===e)return this.readRadixNumber(8);if(98===e||66===e)return this.readRadixNumber(2)}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.readNumber(!1);case 34:case 39:return this.readString(t);case 47:return this.readToken_slash();case 37:case 42:return this.readToken_mult_modulo_exp(t);case 124:case 38:return this.readToken_pipe_amp(t);case 94:return this.readToken_caret();case 43:case 45:return this.readToken_plus_min(t);case 60:case 62:return this.readToken_lt_gt(t);case 61:case 33:return this.readToken_eq_excl(t);case 63:return this.readToken_question();case 126:return this.finishOp(E.prefix,1)}this.raise(this.pos,"Unexpected character '"+re(t)+"'")},te.finishOp=function(t,e){var n=this.input.slice(this.pos,this.pos+e);return this.pos+=e,this.finishToken(t,n)},te.readRegexp=function(){for(var t,e,n=this.pos;;){this.pos>=this.input.length&&this.raise(n,"Unterminated regular expression");var r=this.input.charAt(this.pos);if(S.test(r)&&this.raise(n,"Unterminated regular expression"),t)t=!1;else{if("["===r)e=!0;else if("]"===r&&e)e=!1;else if("/"===r&&!e)break;t="\\"===r}++this.pos}var i=this.input.slice(n,this.pos);++this.pos;var o=this.pos,a=this.readWord1();this.containsEsc&&this.unexpected(o);var s=this.regexpState||(this.regexpState=new Bt(this));s.reset(n,i,a),this.validateRegExpFlags(s),this.validateRegExpPattern(s);var u=null;try{u=new RegExp(i,a)}catch(c){}return this.finishToken(E.regexp,{pattern:i,flags:a,value:u})},te.readInt=function(t,e,n){for(var r=this.options.ecmaVersion>=12&&void 0===e,i=n&&48===this.input.charCodeAt(this.pos),o=this.pos,a=0,s=0,u=0,c=null==e?1/0:e;u<c;++u,++this.pos){var l=this.input.charCodeAt(this.pos),f=void 0;if(r&&95===l)i&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed in legacy octal numeric literals"),95===s&&this.raiseRecoverable(this.pos,"Numeric separator must be exactly one underscore"),0===u&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed at the first of digits"),s=l;else{if(f=l>=97?l-97+10:l>=65?l-65+10:l>=48&&l<=57?l-48:1/0,f>=t)break;s=l,a=a*t+f}}return r&&95===s&&this.raiseRecoverable(this.pos-1,"Numeric separator is not allowed at the last of digits"),this.pos===o||null!=e&&this.pos-o!==e?null:a},te.readRadixNumber=function(t){var e=this.pos;this.pos+=2;var n=this.readInt(t);return null==n&&this.raise(this.start+2,"Expected number in radix "+t),this.options.ecmaVersion>=11&&110===this.input.charCodeAt(this.pos)?(n=ne(this.input.slice(e,this.pos)),++this.pos):v(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(E.num,n)},te.readNumber=function(t){var e=this.pos;t||null!==this.readInt(10,void 0,!0)||this.raise(e,"Invalid number");var n=this.pos-e>=2&&48===this.input.charCodeAt(e);n&&this.strict&&this.raise(e,"Invalid number");var r=this.input.charCodeAt(this.pos);if(!n&&!t&&this.options.ecmaVersion>=11&&110===r){var i=ne(this.input.slice(e,this.pos));return++this.pos,v(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(E.num,i)}n&&/[89]/.test(this.input.slice(e,this.pos))&&(n=!1),46!==r||n||(++this.pos,this.readInt(10),r=this.input.charCodeAt(this.pos)),69!==r&&101!==r||n||(r=this.input.charCodeAt(++this.pos),43!==r&&45!==r||++this.pos,null===this.readInt(10)&&this.raise(e,"Invalid number")),v(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");var o=ee(this.input.slice(e,this.pos),n);return this.finishToken(E.num,o)},te.readCodePoint=function(){var t,e=this.input.charCodeAt(this.pos);if(123===e){this.options.ecmaVersion<6&&this.unexpected();var n=++this.pos;t=this.readHexChar(this.input.indexOf("}",this.pos)-this.pos),++this.pos,t>1114111&&this.invalidStringToken(n,"Code point out of bounds")}else t=this.readHexChar(4);return t},te.readString=function(t){for(var e="",n=++this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated string constant");var r=this.input.charCodeAt(this.pos);if(r===t)break;92===r?(e+=this.input.slice(n,this.pos),e+=this.readEscapedChar(!1),n=this.pos):(C(r,this.options.ecmaVersion>=10)&&this.raise(this.start,"Unterminated string constant"),++this.pos)}return e+=this.input.slice(n,this.pos++),this.finishToken(E.string,e)};var ie={};te.tryReadTemplateToken=function(){this.inTemplateElement=!0;try{this.readTmplToken()}catch(t){if(t!==ie)throw t;this.readInvalidTemplateToken()}this.inTemplateElement=!1},te.invalidStringToken=function(t,e){if(this.inTemplateElement&&this.options.ecmaVersion>=9)throw ie;this.raise(t,e)},te.readTmplToken=function(){for(var t="",e=this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated template");var n=this.input.charCodeAt(this.pos);if(96===n||36===n&&123===this.input.charCodeAt(this.pos+1))return this.pos!==this.start||this.type!==E.template&&this.type!==E.invalidTemplate?(t+=this.input.slice(e,this.pos),this.finishToken(E.template,t)):36===n?(this.pos+=2,this.finishToken(E.dollarBraceL)):(++this.pos,this.finishToken(E.backQuote));if(92===n)t+=this.input.slice(e,this.pos),t+=this.readEscapedChar(!0),e=this.pos;else if(C(n)){switch(t+=this.input.slice(e,this.pos),++this.pos,n){case 13:10===this.input.charCodeAt(this.pos)&&++this.pos;case 10:t+="\n";break;default:t+=String.fromCharCode(n);break}this.options.locations&&(++this.curLine,this.lineStart=this.pos),e=this.pos}else++this.pos}},te.readInvalidTemplateToken=function(){for(;this.pos<this.input.length;this.pos++)switch(this.input[this.pos]){case"\\":++this.pos;break;case"$":if("{"!==this.input[this.pos+1])break;case"`":return this.finishToken(E.invalidTemplate,this.input.slice(this.start,this.pos))}this.raise(this.start,"Unterminated template")},te.readEscapedChar=function(t){var e=this.input.charCodeAt(++this.pos);switch(++this.pos,e){case 110:return"\n";case 114:return"\r";case 120:return String.fromCharCode(this.readHexChar(2));case 117:return re(this.readCodePoint());case 116:return"\t";case 98:return"\b";case 118:return"\v";case 102:return"\f";case 13:10===this.input.charCodeAt(this.pos)&&++this.pos;case 10:return this.options.locations&&(this.lineStart=this.pos,++this.curLine),"";case 56:case 57:if(t){var n=this.pos-1;return this.invalidStringToken(n,"Invalid escape sequence in template string"),null}default:if(e>=48&&e<=55){var r=this.input.substr(this.pos-1,3).match(/^[0-7]+/)[0],i=parseInt(r,8);return i>255&&(r=r.slice(0,-1),i=parseInt(r,8)),this.pos+=r.length-1,e=this.input.charCodeAt(this.pos),"0"===r&&56!==e&&57!==e||!this.strict&&!t||this.invalidStringToken(this.pos-1-r.length,t?"Octal literal in template string":"Octal literal in strict mode"),String.fromCharCode(i)}return C(e)?"":String.fromCharCode(e)}},te.readHexChar=function(t){var e=this.pos,n=this.readInt(16,t);return null===n&&this.invalidStringToken(e,"Bad character escape sequence"),n},te.readWord1=function(){this.containsEsc=!1;var t="",e=!0,n=this.pos,r=this.options.ecmaVersion>=6;while(this.pos<this.input.length){var i=this.fullCharCodeAtPos();if(g(i,r))this.pos+=i<=65535?1:2;else{if(92!==i)break;this.containsEsc=!0,t+=this.input.slice(n,this.pos);var o=this.pos;117!==this.input.charCodeAt(++this.pos)&&this.invalidStringToken(this.pos,"Expecting Unicode escape sequence \\uXXXX"),++this.pos;var a=this.readCodePoint();(e?v:g)(a,r)||this.invalidStringToken(o,"Invalid Unicode escape"),t+=re(a),n=this.pos}e=!1}return t+this.input.slice(n,this.pos)},te.readWord=function(){var t=this.readWord1(),e=E.name;return this.keywords.test(t)&&(e=x[t]),this.finishToken(e,t)};var oe="7.4.1";function ae(t,e){return rt.parse(t,e)}function se(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function ue(t){var e="function"===typeof Map?new Map:void 0;return ue=function(t){if(null===t||!fe(t))return t;if("function"!==typeof t)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof e){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return le(t,arguments,pe(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),he(n,t)},ue(t)}function ce(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function le(t,e,n){return le=ce()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var i=Function.bind.apply(t,r),o=new i;return n&&he(o,n.prototype),o},le.apply(null,arguments)}function fe(t){return-1!==Function.toString.call(t).indexOf("[native code]")}function he(t,e){return he=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},he(t,e)}function pe(t){return pe=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},pe(t)}rt.acorn={Parser:rt,version:oe,defaultOptions:F,Position:L,SourceLocation:N,getLineInfo:D,Node:xt,TokenType:m,tokTypes:E,keywordTypes:x,TokContext:St,tokContexts:Ot,isIdentifierChar:g,isIdentifierStart:v,Token:Jt,isNewLine:C,lineBreak:S,lineBreakG:O,nonASCIIwhitespace:T};var de=function(t){function e(){return t.apply(this,arguments)||this}return se(e,t),e}(ue(Error)),ve=function(t){function e(){return t.apply(this,arguments)||this}return se(e,t),e}(ue(SyntaxError)),ge=function(t){function e(){return t.apply(this,arguments)||this}return se(e,t),e}(ue(ReferenceError)),me=function(t){function e(){return t.apply(this,arguments)||this}return se(e,t),e}(ue(TypeError)),ye=function(t){function e(){return t.apply(this,arguments)||this}return se(e,t),e}(de),_e=function(t){function e(){return t.apply(this,arguments)||this}return se(e,t),e}(ve),be=function(t){function e(){return t.apply(this,arguments)||this}return se(e,t),e}(ge),xe={UnknownError:[3001,"%0",ye],ExecutionTimeOutError:[3002,"Script execution timed out after %0ms",ye],NodeTypeSyntaxError:[1001,"Unknown node type: %0",be],BinaryOperatorSyntaxError:[1002,"Unknown binary operator: %0",be],LogicalOperatorSyntaxError:[1003,"Unknown logical operator: %0",be],UnaryOperatorSyntaxError:[1004,"Unknown unary operator: %0",be],UpdateOperatorSyntaxError:[1005,"Unknown update operator: %0",be],ObjectStructureSyntaxError:[1006,"Unknown object structure: %0",be],AssignmentExpressionSyntaxError:[1007,"Unknown assignment expression: %0",be],VariableTypeSyntaxError:[1008,"Unknown variable type: %0",be],ParamTypeSyntaxError:[1009,"Unknown param type: %0",be],AssignmentTypeSyntaxError:[1010,"Unknown assignment type: %0",be],FunctionUndefinedReferenceError:[2001,"%0 is not a function",ge],VariableUndefinedReferenceError:[2002,"%0 is not defined",ge],IsNotConstructor:[2003,"%0 is not a constructor",me]};function we(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function Ee(t,e,n){return Ee=we()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var i=Function.bind.apply(t,r),o=new i;return n&&Se(o,n.prototype),o},Ee.apply(null,arguments)}function Se(t,e){return Se=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},Se(t,e)}var Oe="0.0.3";function Ce(t,e){Object.defineProperty(t,"name",{value:e,writable:!1,enumerable:!1,configurable:!0})}var Te=Object.prototype.hasOwnProperty,Ae=Symbol("Break"),ke=Symbol("Continue"),Me=Symbol("DefaultCase"),Pe=Symbol("EmptyStatementReturn"),Re=Symbol("WithScopeName"),je=Symbol("SuperScopeName"),Ie=Symbol("RootScopeName"),Le=Symbol("GlobalScopeName");function Ne(t){return"function"===typeof t}var De=function(){function t(t){this.interpreter=t}var e=t.prototype;return e.generator=function(){var t=this.interpreter;function e(){return this.getCurrentScope()}function n(){return this.getGlobalScope()}function r(){return this.getCurrentContext()}return{getOptions:t.getOptions.bind(t),getCurrentScope:e.bind(t),getGlobalScope:n.bind(t),getCurrentContext:r.bind(t),getExecStartTime:t.getExecStartTime.bind(t)}},t}();function Fe(t,e,n){if(void 0===n&&(n=!0),!(t instanceof De))throw new Error("Illegal call");if("string"!==typeof e)return e;if(e){var r=t.generator(),i=r.getOptions(),o={timeout:i.timeout,_initEnv:function(){n||this.setCurrentContext(r.getCurrentContext()),this.execStartTime=r.getExecStartTime(),this.execEndTime=this.execStartTime}},a=n?r.getGlobalScope():r.getCurrentScope(),s=new Xe(a,o);return s.evaluate(e)}}function Be(t){if(!(t instanceof De))throw new Error("Illegal call");for(var e=t.generator(),n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var o=r.pop(),a=new Xe(e.getGlobalScope(),e.getOptions()),s="\n\t\t    (function anonymous("+r.join(",")+"){\n\t\t        "+o+"\n\t\t    });\n\t\t    ";return a.evaluate(s)}Object.defineProperty(Fe,"__IS_EVAL_FUNC",{value:!0,writable:!1,enumerable:!1,configurable:!1}),Object.defineProperty(Be,"__IS_FUNCTION_FUNC",{value:!0,writable:!1,enumerable:!1,configurable:!1});var ze=function(t){this.value=t},Ue=function(t){this.value=t},Ve=function(t){this.value=t},He=function(t,e,n){void 0===e&&(e=null),this.name=n,this.parent=e,this.data=t,this.labelStack=[]};function Ge(){}function We(t,e){return void 0===t&&(t=null),new He(Object.create(null),t,e)}function Ze(t){return Object.create(t)}var Ye={NaN:NaN,Infinity:1/0,undefined:void 0,Object:Object,Array:Array,String:String,Boolean:Boolean,Number:Number,Date:Date,RegExp:RegExp,Error:Error,URIError:URIError,TypeError:TypeError,RangeError:RangeError,SyntaxError:SyntaxError,ReferenceError:ReferenceError,Float32Array:Float32Array,Float64Array:Float64Array,Uint32Array:Uint32Array,Math:Math,parseInt:parseInt,parseFloat:parseFloat,isNaN:isNaN,isFinite:isFinite,decodeURI:decodeURI,decodeURIComponent:decodeURIComponent,encodeURI:encodeURI,encodeURIComponent:encodeURIComponent,escape:escape,unescape:unescape,eval:Fe,Function:Be};"undefined"!==typeof JSON&&(Ye.JSON=JSON),"undefined"!==typeof Promise&&(Ye.Promise=Promise),"undefined"!==typeof Set&&(Ye.Set=Set),"undefined"!==typeof Map&&(Ye.Map=Map),"undefined"!==typeof Symbol&&(Ye.Symbol=Symbol),"undefined"!==typeof Proxy&&(Ye.Proxy=Proxy),"undefined"!==typeof WeakMap&&(Ye.WeakMap=WeakMap),"undefined"!==typeof WeakSet&&(Ye.WeakSet=WeakSet),"undefined"!==typeof Reflect&&(Ye.Reflect=Reflect);var Xe=function(){function t(e,n){void 0===e&&(e=t.global),void 0===n&&(n={}),this.sourceList=[],this.collectDeclVars=Object.create(null),this.collectDeclFuncs=Object.create(null),this.isVarDeclMode=!1,this.lastExecNode=null,this.isRunning=!1,this.options={ecmaVersion:n.ecmaVersion||t.ecmaVersion,timeout:n.timeout||0,rootContext:n.rootContext,globalContextInFunction:void 0===n.globalContextInFunction?t.globalContextInFunction:n.globalContextInFunction,_initEnv:n._initEnv},this.context=e||Object.create(null),this.callStack=[],this.initEnvironment(this.context)}var e=t.prototype;return e.initEnvironment=function(t){var e;if(t instanceof He)e=t;else{var n=null,r=this.createSuperScope(t);this.options.rootContext&&(n=new He(Ze(this.options.rootContext),r,Ie)),e=new He(t,n||r,Le)}this.globalScope=e,this.currentScope=this.globalScope,this.globalContext=e.data,this.currentContext=e.data,this.collectDeclVars=Object.create(null),this.collectDeclFuncs=Object.create(null),this.execStartTime=Date.now(),this.execEndTime=this.execStartTime;var i=this.options._initEnv;i&&i.call(this)},e.getExecStartTime=function(){return this.execStartTime},e.getExecutionTime=function(){return this.execEndTime-this.execStartTime},e.setExecTimeout=function(t){void 0===t&&(t=0),this.options.timeout=t},e.getOptions=function(){return this.options},e.getGlobalScope=function(){return this.globalScope},e.getCurrentScope=function(){return this.currentScope},e.getCurrentContext=function(){return this.currentContext},e.isInterruptThrow=function(t){return t instanceof ye||t instanceof be||t instanceof _e},e.createSuperScope=function(t){var e=Object.assign({},Ye),n=Object.keys(e);return n.forEach((function(n){n in t&&delete e[n]})),new He(e,null,je)},e.setCurrentContext=function(t){this.currentContext=t},e.setCurrentScope=function(t){this.currentScope=t},e.evaluate=function(e){var n;if(void 0===e&&(e=""),e)return n=ae(e,{ranges:!0,locations:!0,ecmaVersion:this.options.ecmaVersion||t.ecmaVersion}),this.evaluateNode(n,e)},e.appendCode=function(t){return this.evaluate(t)},e.evaluateNode=function(t,e){var n=this;void 0===e&&(e=""),this.value=void 0,this.source=e,this.sourceList.push(e),this.isRunning=!0,this.execStartTime=Date.now(),this.execEndTime=this.execStartTime,this.collectDeclVars=Object.create(null),this.collectDeclFuncs=Object.create(null);var r=this.getCurrentScope(),i=this.getCurrentContext(),o=r.labelStack.concat([]),a=this.callStack.concat([]),s=function(){n.setCurrentScope(r),n.setCurrentContext(i),r.labelStack=o,n.callStack=a};try{var u=this.createClosure(t);this.addDeclarationsToScope(this.collectDeclVars,this.collectDeclFuncs,this.getCurrentScope()),u()}catch(c){throw c}finally{s(),this.execEndTime=Date.now()}return this.isRunning=!1,this.getValue()},e.createErrorMessage=function(t,e,n){var r=t[1].replace("%0",String(e));return null!==n&&(r+=this.getNodePosition(n||this.lastExecNode)),r},e.createError=function(t,e){return new e(t)},e.createThrowError=function(t,e){return this.createError(t,e)},e.createInternalThrowError=function(t,e,n){return this.createError(this.createErrorMessage(t,e,n),t[2])},e.checkTimeout=function(){if(!this.isRunning)return!1;var t=this.options.timeout||0,e=Date.now();return e-this.execStartTime>t},e.getNodePosition=function(t){if(t){var e="";return t.loc?" ["+t.loc.start.line+":"+t.loc.start.column+"]"+e:""}return""},e.createClosure=function(t){var e,n=this;switch(t.type){case"BinaryExpression":e=this.binaryExpressionHandler(t);break;case"LogicalExpression":e=this.logicalExpressionHandler(t);break;case"UnaryExpression":e=this.unaryExpressionHandler(t);break;case"UpdateExpression":e=this.updateExpressionHandler(t);break;case"ObjectExpression":e=this.objectExpressionHandler(t);break;case"ArrayExpression":e=this.arrayExpressionHandler(t);break;case"CallExpression":e=this.callExpressionHandler(t);break;case"NewExpression":e=this.newExpressionHandler(t);break;case"MemberExpression":e=this.memberExpressionHandler(t);break;case"ThisExpression":e=this.thisExpressionHandler(t);break;case"SequenceExpression":e=this.sequenceExpressionHandler(t);break;case"Literal":e=this.literalHandler(t);break;case"Identifier":e=this.identifierHandler(t);break;case"AssignmentExpression":e=this.assignmentExpressionHandler(t);break;case"FunctionDeclaration":e=this.functionDeclarationHandler(t);break;case"VariableDeclaration":e=this.variableDeclarationHandler(t);break;case"BlockStatement":case"Program":e=this.programHandler(t);break;case"ExpressionStatement":e=this.expressionStatementHandler(t);break;case"EmptyStatement":e=this.emptyStatementHandler(t);break;case"ReturnStatement":e=this.returnStatementHandler(t);break;case"FunctionExpression":e=this.functionExpressionHandler(t);break;case"IfStatement":e=this.ifStatementHandler(t);break;case"ConditionalExpression":e=this.conditionalExpressionHandler(t);break;case"ForStatement":e=this.forStatementHandler(t);break;case"WhileStatement":e=this.whileStatementHandler(t);break;case"DoWhileStatement":e=this.doWhileStatementHandler(t);break;case"ForInStatement":e=this.forInStatementHandler(t);break;case"WithStatement":e=this.withStatementHandler(t);break;case"ThrowStatement":e=this.throwStatementHandler(t);break;case"TryStatement":e=this.tryStatementHandler(t);break;case"ContinueStatement":e=this.continueStatementHandler(t);break;case"BreakStatement":e=this.breakStatementHandler(t);break;case"SwitchStatement":e=this.switchStatementHandler(t);break;case"LabeledStatement":e=this.labeledStatementHandler(t);break;case"DebuggerStatement":e=this.debuggerStatementHandler(t);break;default:throw this.createInternalThrowError(xe.NodeTypeSyntaxError,t.type,t)}return function(){var r=n.options.timeout;if(r&&r>0&&n.checkTimeout())throw n.createInternalThrowError(xe.ExecutionTimeOutError,r,null);return n.lastExecNode=t,e.apply(void 0,arguments)}},e.binaryExpressionHandler=function(t){var e=this,n=this.createClosure(t.left),r=this.createClosure(t.right);return function(){var i=n(),o=r();switch(t.operator){case"==":return i==o;case"!=":return i!=o;case"===":return i===o;case"!==":return i!==o;case"<":return i<o;case"<=":return i<=o;case">":return i>o;case">=":return i>=o;case"<<":return i<<o;case">>":return i>>o;case">>>":return i>>>o;case"+":return i+o;case"-":return i-o;case"*":return i*o;case"**":return Math.pow(i,o);case"/":return i/o;case"%":return i%o;case"|":return i|o;case"^":return i^o;case"&":return i&o;case"in":return i in o;case"instanceof":return i instanceof o;default:throw e.createInternalThrowError(xe.BinaryOperatorSyntaxError,t.operator,t)}}},e.logicalExpressionHandler=function(t){var e=this,n=this.createClosure(t.left),r=this.createClosure(t.right);return function(){switch(t.operator){case"||":return n()||r();case"&&":return n()&&r();default:throw e.createInternalThrowError(xe.LogicalOperatorSyntaxError,t.operator,t)}}},e.unaryExpressionHandler=function(t){var e=this;switch(t.operator){case"delete":var n=this.createObjectGetter(t.argument),r=this.createNameGetter(t.argument);return function(){var t=n(),e=r();return delete t[e]};default:var i;if("typeof"===t.operator&&"Identifier"===t.argument.type){var o=this.createObjectGetter(t.argument),a=this.createNameGetter(t.argument);i=function(){return o()[a()]}}else i=this.createClosure(t.argument);return function(){var n=i();switch(t.operator){case"-":return-n;case"+":return+n;case"!":return!n;case"~":return~n;case"void":return;case"typeof":return typeof n;default:throw e.createInternalThrowError(xe.UnaryOperatorSyntaxError,t.operator,t)}}}},e.updateExpressionHandler=function(t){var e=this,n=this.createObjectGetter(t.argument),r=this.createNameGetter(t.argument);return function(){var i=n(),o=r();switch(e.assertVariable(i,o,t),t.operator){case"++":return t.prefix?++i[o]:i[o]++;case"--":return t.prefix?--i[o]:i[o]--;default:throw e.createInternalThrowError(xe.UpdateOperatorSyntaxError,t.operator,t)}}},e.objectExpressionHandler=function(t){var e=this,n=[];function r(t){return"Identifier"===t.type?t.name:"Literal"===t.type?t.value:this.throwError(xe.ObjectStructureSyntaxError,t.type,t)}var i=Object.create(null);return t.properties.forEach((function(t){var o=t.kind,a=r(t.key);i[a]&&"init"!==o||(i[a]={}),i[a][o]=e.createClosure(t.value),n.push({key:a,property:t})})),function(){for(var t={},e=n.length,r=0;r<e;r++){var o=n[r],a=o.key,s=i[a],u=s.init?s.init():void 0,c=s.get?s.get():function(){},l=s.set?s.set():function(t){};if("set"in s||"get"in s){var f={configurable:!0,enumerable:!0,get:c,set:l};Object.defineProperty(t,a,f)}else{var h=o.property,p=h.kind;"Identifier"!==h.key.type||"FunctionExpression"!==h.value.type||"init"!==p||h.value.id||Ce(u,h.key.name),t[a]=u}}return t}},e.arrayExpressionHandler=function(t){var e=this,n=t.elements.map((function(t){return t?e.createClosure(t):t}));return function(){for(var t=n.length,e=Array(t),r=0;r<t;r++){var i=n[r];i&&(e[r]=i())}return e}},e.safeObjectGet=function(t,e,n){return t[e]},e.createCallFunctionGetter=function(t){var e=this;switch(t.type){case"MemberExpression":var n=this.createClosure(t.object),r=this.createMemberKeyGetter(t),i=this.source;return function(){var o=n(),a=r(),s=e.safeObjectGet(o,a,t);if(!s||!Ne(s)){var u=i.slice(t.start,t.end);throw e.createInternalThrowError(xe.FunctionUndefinedReferenceError,u,t)}return s.__IS_EVAL_FUNC?function(t){return s(new De(e),t,!0)}:s.__IS_FUNCTION_FUNC?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return s.apply(void 0,[new De(e)].concat(n))}:s.bind(o)};default:var o=this.createClosure(t);return function(){var n="";"Identifier"===t.type&&(n=t.name);var r=o();if(!r||!Ne(r))throw e.createInternalThrowError(xe.FunctionUndefinedReferenceError,n,t);if("Identifier"===t.type&&r.__IS_EVAL_FUNC&&"eval"===n)return function(t){var i=e.getScopeFromName(n,e.getCurrentScope()),o=i.name===je||i.name===Le||i.name===Ie;return r(new De(e),t,!o)};if(r.__IS_EVAL_FUNC)return function(t){return r(new De(e),t,!0)};if(r.__IS_FUNCTION_FUNC)return function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return r.apply(void 0,[new De(e)].concat(n))};var i=e.options.globalContextInFunction;if("Identifier"===t.type){var a=e.getIdentifierScope(t);a.name===Re&&(i=a.data)}return r.bind(i)}}},e.callExpressionHandler=function(t){var e=this,n=this.createCallFunctionGetter(t.callee),r=t.arguments.map((function(t){return e.createClosure(t)}));return function(){return n().apply(void 0,r.map((function(t){return t()})))}},e.functionExpressionHandler=function(t){var e=this,n=this,r=this.source,i=this.collectDeclVars,o=this.collectDeclFuncs;this.collectDeclVars=Object.create(null),this.collectDeclFuncs=Object.create(null);var a=t.id?t.id.name:"",s=t.params.length,u=t.params.map((function(t){return e.createParamNameGetter(t)})),c=this.createClosure(t.body),l=this.collectDeclVars,f=this.collectDeclFuncs;return this.collectDeclVars=i,this.collectDeclFuncs=o,function(){var e=n.getCurrentScope(),i=function t(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];n.callStack.push(""+a);var s=n.getCurrentScope(),h=We(e,"FunctionScope("+a+")");n.setCurrentScope(h),n.addDeclarationsToScope(l,f,h),a&&(h.data[a]=t),h.data["arguments"]=arguments,u.forEach((function(t,e){h.data[t()]=i[e]}));var p=n.getCurrentContext();n.setCurrentContext(this);var d=c();if(n.setCurrentContext(p),n.setCurrentScope(s),n.callStack.pop(),d instanceof ze)return d.value};return Ce(i,a),Object.defineProperty(i,"length",{value:s,writable:!1,enumerable:!1,configurable:!0}),Object.defineProperty(i,"toString",{value:function(){return r.slice(t.start,t.end)},writable:!0,configurable:!0,enumerable:!1}),Object.defineProperty(i,"valueOf",{value:function(){return r.slice(t.start,t.end)},writable:!0,configurable:!0,enumerable:!1}),i}},e.newExpressionHandler=function(t){var e=this,n=this.source,r=this.createClosure(t.callee),i=t.arguments.map((function(t){return e.createClosure(t)}));return function(){var o=r();if(!Ne(o)||o.__IS_EVAL_FUNC){var a=t.callee,s=n.slice(a.start,a.end);throw e.createInternalThrowError(xe.IsNotConstructor,s,t)}return o.__IS_FUNCTION_FUNC?o.apply(void 0,[new De(e)].concat(i.map((function(t){return t()})))):Ee(o,i.map((function(t){return t()})))}},e.memberExpressionHandler=function(t){var e=this.createClosure(t.object),n=this.createMemberKeyGetter(t);return function(){var t=e(),r=n();return t[r]}},e.thisExpressionHandler=function(t){var e=this;return function(){return e.getCurrentContext()}},e.sequenceExpressionHandler=function(t){var e=this,n=t.expressions.map((function(t){return e.createClosure(t)}));return function(){for(var t,e=n.length,r=0;r<e;r++){var i=n[r];t=i()}return t}},e.literalHandler=function(t){return function(){return t.regex?new RegExp(t.regex.pattern,t.regex.flags):t.value}},e.identifierHandler=function(t){var e=this;return function(){var n=e.getCurrentScope(),r=e.getScopeDataFromName(t.name,n);return e.assertVariable(r,t.name,t),r[t.name]}},e.getIdentifierScope=function(t){var e=this.getCurrentScope(),n=this.getScopeFromName(t.name,e);return n},e.assignmentExpressionHandler=function(t){var e=this;"Identifier"!==t.left.type||"FunctionExpression"!==t.right.type||t.right.id||(t.right.id={type:"Identifier",name:t.left.name});var n=this.createObjectGetter(t.left),r=this.createNameGetter(t.left),i=this.createClosure(t.right);return function(){var o=n(),a=r(),s=i();switch("="!==t.operator&&e.assertVariable(o,a,t),t.operator){case"=":return o[a]=s;case"+=":return o[a]+=s;case"-=":return o[a]-=s;case"*=":return o[a]*=s;case"**=":return o[a]=Math.pow(o[a],s);case"/=":return o[a]/=s;case"%=":return o[a]%=s;case"<<=":return o[a]<<=s;case">>=":return o[a]>>=s;case">>>=":return o[a]>>>=s;case"&=":return o[a]&=s;case"^=":return o[a]^=s;case"|=":return o[a]|=s;default:throw e.createInternalThrowError(xe.AssignmentExpressionSyntaxError,t.type,t)}}},e.functionDeclarationHandler=function(t){if(t.id){var e=this.functionExpressionHandler(t);Object.defineProperty(e,"isFunctionDeclareClosure",{value:!0,writable:!1,configurable:!1,enumerable:!1}),this.funcDeclaration(t.id.name,e)}return function(){return Pe}},e.getVariableName=function(t){if("Identifier"===t.type)return t.name;throw this.createInternalThrowError(xe.VariableTypeSyntaxError,t.type,t)},e.variableDeclarationHandler=function(t){for(var e,n=this,r=[],i=0;i<t.declarations.length;i++){var o=t.declarations[i];this.varDeclaration(this.getVariableName(o.id)),o.init&&r.push({type:"AssignmentExpression",operator:"=",left:o.id,right:o.init})}return r.length&&(e=this.createClosure({type:"BlockStatement",body:r})),function(){if(e){var t=n.isVarDeclMode;n.isVarDeclMode=!0,e(),n.isVarDeclMode=t}return Pe}},e.assertVariable=function(t,e,n){if(t===this.globalScope.data&&!(e in t))throw this.createInternalThrowError(xe.VariableUndefinedReferenceError,e,n)},e.programHandler=function(t){var e=this,n=t.body.map((function(t){return e.createClosure(t)}));return function(){for(var t=Pe,r=0;r<n.length;r++){var i=n[r],o=e.setValue(i());if(o!==Pe&&(t=o,t instanceof ze||t instanceof Ue||t instanceof Ve||t===Ae||t===ke))break}return t}},e.expressionStatementHandler=function(t){return this.createClosure(t.expression)},e.emptyStatementHandler=function(t){return function(){return Pe}},e.returnStatementHandler=function(t){var e=t.argument?this.createClosure(t.argument):Ge;return function(){return new ze(e())}},e.ifStatementHandler=function(t){var e=this.createClosure(t.test),n=this.createClosure(t.consequent),r=t.alternate?this.createClosure(t.alternate):function(){return Pe};return function(){return e()?n():r()}},e.conditionalExpressionHandler=function(t){return this.ifStatementHandler(t)},e.forStatementHandler=function(t){var e=this,n=Ge,r=t.test?this.createClosure(t.test):function(){return!0},i=Ge,o=this.createClosure(t.body);return"ForStatement"===t.type&&(n=t.init?this.createClosure(t.init):n,i=t.update?this.createClosure(t.update):Ge),function(a){var s,u=Pe,c="DoWhileStatement"===t.type;for(a&&"LabeledStatement"===a.type&&(s=a.label.name),n();c||r();i()){c=!1;var l=e.setValue(o());if(l!==Pe&&l!==ke){if(l===Ae)break;if(u=l,u instanceof Ve&&u.value===s)u=Pe;else if(u instanceof ze||u instanceof Ue||u instanceof Ve)break}}return u}},e.whileStatementHandler=function(t){return this.forStatementHandler(t)},e.doWhileStatementHandler=function(t){return this.forStatementHandler(t)},e.forInStatementHandler=function(t){var e=this,n=t.left,r=this.createClosure(t.right),i=this.createClosure(t.body);return"VariableDeclaration"===t.left.type&&(this.createClosure(t.left)(),n=t.left.declarations[0].id),function(t){var o,a,s=Pe;t&&"LabeledStatement"===t.type&&(o=t.label.name);var u=r();for(a in u){e.assignmentExpressionHandler({type:"AssignmentExpression",operator:"=",left:n,right:{type:"Literal",value:a}})();var c=e.setValue(i());if(c!==Pe&&c!==ke){if(c===Ae)break;if(s=c,s instanceof Ve&&s.value===o)s=Pe;else if(s instanceof ze||s instanceof Ue||s instanceof Ve)break}}return s}},e.withStatementHandler=function(t){var e=this,n=this.createClosure(t.object),r=this.createClosure(t.body);return function(){var t=n(),i=e.getCurrentScope(),o=new He(t,i,Re);e.setCurrentScope(o);var a=e.setValue(r());return e.setCurrentScope(i),a}},e.throwStatementHandler=function(t){var e=this,n=this.createClosure(t.argument);return function(){throw e.setValue(void 0),n()}},e.tryStatementHandler=function(t){var e=this,n=this.createClosure(t.block),r=t.handler?this.catchClauseHandler(t.handler):null,i=t.finalizer?this.createClosure(t.finalizer):null;return function(){var t,o,a=e.getCurrentScope(),s=e.getCurrentContext(),u=a.labelStack.concat([]),c=e.callStack.concat([]),l=Pe,f=function(){e.setCurrentScope(a),e.setCurrentContext(s),a.labelStack=u,e.callStack=c};try{l=e.setValue(n()),l instanceof ze&&(t=l)}catch(h){if(f(),e.isInterruptThrow(h))throw h;if(r)try{l=e.setValue(r(h)),l instanceof ze&&(t=l)}catch(h){if(f(),e.isInterruptThrow(h))throw h;o=h}}if(i)try{l=i(),l instanceof ze&&(t=l)}catch(h){if(f(),e.isInterruptThrow(h))throw h;o=h}if(o)throw o;return t||l}},e.catchClauseHandler=function(t){var e=this,n=this.createParamNameGetter(t.param),r=this.createClosure(t.body);return function(t){var i,o=e.getCurrentScope(),a=o.data,s=n(),u=Te.call(a,s),c=a[s];return a[s]=t,i=r(),u?a[s]=c:delete a[s],i}},e.continueStatementHandler=function(t){return function(){return t.label?new Ve(t.label.name):ke}},e.breakStatementHandler=function(t){return function(){return t.label?new Ue(t.label.name):Ae}},e.switchStatementHandler=function(t){var e=this,n=this.createClosure(t.discriminant),r=t.cases.map((function(t){return e.switchCaseHandler(t)}));return function(){for(var t,i,o,a=n(),s=!1,u=0;u<r.length;u++){var c=r[u](),l=c.testClosure();if(l!==Me){if(s||l===a){if(s=!0,i=e.setValue(c.bodyClosure()),i===Pe)continue;if(i===Ae)break;if(t=i,t instanceof ze||t instanceof Ue||t instanceof Ve||t===ke)break}}else o=c}if(!s&&o){i=e.setValue(o.bodyClosure());var f=i===Pe||i===Ae||i===ke;f||(t=i)}return t}},e.switchCaseHandler=function(t){var e=t.test?this.createClosure(t.test):function(){return Me},n=this.createClosure({type:"BlockStatement",body:t.consequent});return function(){return{testClosure:e,bodyClosure:n}}},e.labeledStatementHandler=function(t){var e=this,n=t.label.name,r=this.createClosure(t.body);return function(){var i,o=e.getCurrentScope();return o.labelStack.push(n),i=r(t),i instanceof Ue&&i.value===n&&(i=Pe),o.labelStack.pop(),i}},e.debuggerStatementHandler=function(t){return function(){return Pe}},e.createParamNameGetter=function(t){if("Identifier"===t.type)return function(){return t.name};throw this.createInternalThrowError(xe.ParamTypeSyntaxError,t.type,t)},e.createObjectKeyGetter=function(t){var e;return e="Identifier"===t.type?function(){return t.name}:this.createClosure(t),function(){return e()}},e.createMemberKeyGetter=function(t){return t.computed?this.createClosure(t.property):this.createObjectKeyGetter(t.property)},e.createObjectGetter=function(t){var e=this;switch(t.type){case"Identifier":return function(){return e.getScopeDataFromName(t.name,e.getCurrentScope())};case"MemberExpression":return this.createClosure(t.object);default:throw this.createInternalThrowError(xe.AssignmentTypeSyntaxError,t.type,t)}},e.createNameGetter=function(t){switch(t.type){case"Identifier":return function(){return t.name};case"MemberExpression":return this.createMemberKeyGetter(t);default:throw this.createInternalThrowError(xe.AssignmentTypeSyntaxError,t.type,t)}},e.varDeclaration=function(t){var e=this.collectDeclVars;e[t]=void 0},e.funcDeclaration=function(t,e){var n=this.collectDeclFuncs;n[t]=e},e.addDeclarationsToScope=function(t,e,n){var r=n.data;for(var i in e){var o=e[i];r[i]=o?o():o}for(var a in t)a in r||(r[a]=void 0)},e.getScopeValue=function(t,e){var n=this.getScopeFromName(t,e);return n.data[t]},e.getScopeDataFromName=function(t,e){return this.getScopeFromName(t,e).data},e.getScopeFromName=function(t,e){var n=e;do{if(t in n.data)return n}while(n=n.parent);return this.globalScope},e.setValue=function(t){var e=this.callStack.length;return this.isVarDeclMode||e||t===Pe||t===Ae||t===ke||t instanceof Ue||t instanceof Ve||(this.value=t instanceof ze?t.value:t),t},e.getValue=function(){return this.value},t}();function qe(t){return void 0===t&&(t=Object.create(null)),t}function Ke(t,e,n){void 0===e&&(e=[]),void 0===n&&(n={});var r=n.parsingContext,i=void 0===n.timeout?0:n.timeout,o="\n    (function anonymous("+e.join(",")+"){\n         "+t+"\n    });\n    ",a=new Xe(r,{ecmaVersion:n.ecmaVersion,timeout:i,rootContext:n.rootContext,globalContextInFunction:n.globalContextInFunction});return a.evaluate(o)}function Qe(t,e,n){var r=new Xe(e,n);return r.evaluate(t)}Xe.version=Oe,Xe.eval=Fe,Xe.Function=Be,Xe.ecmaVersion=5,Xe.globalContextInFunction=void 0,Xe.global=Object.create(null);var $e=Qe,Je=function(){function t(t){this._code=t}var e=t.prototype;return e.runInContext=function(t){return Qe(this._code,t)},e.runInNewContext=function(t){return Qe(this._code,t)},t}(),tn=function(t,e,n){return Qe(t,e,n)},en=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=e.pop();return Ke(r||"",e)};e["default"]=tn},"t/kZ":function(t,e,n){"use strict";var r=n("R5yR")["default"];function i(){var t=n("q1tI");return i=function(){return t},t}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=void 0;var o=n("dEAq");function a(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function s(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?a(Object(n),!0).forEach((function(e){u(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function u(t,e,n){return e=c(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function c(t){var e=l(t,"string");return"symbol"===typeof e?e:String(e)}function l(t,e){if("object"!==typeof t||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function f(t,e){return g(t)||v(t,e)||p(t,e)||h()}function h(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function p(t,e){if(t){if("string"===typeof t)return d(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?d(t,e):void 0}}function d(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function v(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o,a,s=[],u=!0,c=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);u=!0);}catch(l){c=!0,i=l}finally{try{if(!u&&null!=n["return"]&&(a=n["return"](),Object(a)!==a))return}finally{if(c)throw i}}return s}}function g(t){if(Array.isArray(t))return t}var m=function(t){var e=(0,i().useContext)(o.context),n=e.locale,a=e.routes,s=e.config.locales,u=(0,i().useState)([]),c=f(u,2),l=c[0],h=c[1],p=(0,i().useState)([]),d=f(p,2),v=d[0],g=d[1];return(0,i().useEffect)((function(){h(a.filter((function(t){var e=t.title,r=t.meta,i=(null===r||void 0===r?void 0:r.locale)===n,o=!(null===r||void 0===r?void 0:r.locale)&&(!s.length||n===s[0].name);return e&&(o||i)})).reduce((function(t,e){var n,i,o,a={title:(null===(n=e.meta)||void 0===n?void 0:n.title)||e.title,path:e.path};return(null===(i=e.meta)||void 0===i?void 0:i.group)&&(a.parent=e.meta.group),t.push(a),t.push.apply(t,r(((null===(o=e.meta)||void 0===o?void 0:o.slugs)||[]).filter((function(t){var n,r=t.value;return r!==((null===(n=e.meta)||void 0===n?void 0:n.title)||e.title)})).map((function(t){return{title:t.value,path:"".concat(e.path,"#").concat(t.heading),parent:a}})))),t}),[]))}),[a.length,n]),(0,i().useEffect)((function(){var e=null===t||void 0===t?void 0:t.trim().toUpperCase();if(e){for(var n=[],r=0;r<l.length;r+=1)l[r].title.toUpperCase().indexOf(e)>-1&&n.push(l[r]);g(n)}else g([])}),[t,l.length]),v},y=function(){var t=(0,i().useContext)(o.context),e=t.config.algolia,n=(0,i().useCallback)((function(t){window.docsearch(s({inputSelector:t},e))}),[e]);return n},_=function(t){var e=(0,i().useContext)(o.context),n=e.config,r=m(t),a=y();return n.algolia?a:r};e["default"]=_},t23M:function(t,e,n){"use strict";var r=n("wx14"),i=n("q1tI"),o=n("Zm9Q"),a=(n("Kwbf"),n("VTBJ")),s=n("c+Xe"),u=n("m+aA"),c=n("bdgK"),l=new Map;function f(t){t.forEach((function(t){var e,n=t.target;null===(e=l.get(n))||void 0===e||e.forEach((function(t){return t(n)}))}))}var h=new c["a"](f);function p(t,e){l.has(t)||(l.set(t,new Set),h.observe(t)),l.get(t).add(e)}function d(t,e){l.has(t)&&(l.get(t)["delete"](e),l.get(t).size||(h.unobserve(t),l["delete"](t)))}var v=n("1OyB"),g=n("vuIU"),m=n("Ji7U"),y=n("LK+K"),_=function(t){Object(m["a"])(n,t);var e=Object(y["a"])(n);function n(){return Object(v["a"])(this,n),e.apply(this,arguments)}return Object(g["a"])(n,[{key:"render",value:function(){return this.props.children}}]),n}(i["Component"]),b=i["createContext"](null);function x(t){var e=t.children,n=t.onBatchResize,r=i["useRef"](0),o=i["useRef"]([]),a=i["useContext"](b),s=i["useCallback"]((function(t,e,i){r.current+=1;var s=r.current;o.current.push({size:t,element:e,data:i}),Promise.resolve().then((function(){s===r.current&&(null===n||void 0===n||n(o.current),o.current=[])})),null===a||void 0===a||a(t,e,i)}),[n,a]);return i["createElement"](b.Provider,{value:s},e)}function w(t){var e=t.children,n=t.disabled,r=i["useRef"](null),o=i["useRef"](null),c=i["useContext"](b),l="function"===typeof e,f=l?e(r):e,h=i["useRef"]({width:-1,height:-1,offsetWidth:-1,offsetHeight:-1}),v=!l&&i["isValidElement"](f)&&Object(s["c"])(f),g=v?f.ref:null,m=i["useMemo"]((function(){return Object(s["a"])(g,r)}),[g,r]),y=i["useRef"](t);y.current=t;var x=i["useCallback"]((function(t){var e=y.current,n=e.onResize,r=e.data,i=t.getBoundingClientRect(),o=i.width,s=i.height,u=t.offsetWidth,l=t.offsetHeight,f=Math.floor(o),p=Math.floor(s);if(h.current.width!==f||h.current.height!==p||h.current.offsetWidth!==u||h.current.offsetHeight!==l){var d={width:f,height:p,offsetWidth:u,offsetHeight:l};h.current=d;var v=u===Math.round(o)?o:u,g=l===Math.round(s)?s:l,m=Object(a["a"])(Object(a["a"])({},d),{},{offsetWidth:v,offsetHeight:g});null===c||void 0===c||c(m,t,r),n&&Promise.resolve().then((function(){n(m,t)}))}}),[]);return i["useEffect"]((function(){var t=Object(u["a"])(r.current)||Object(u["a"])(o.current);return t&&!n&&p(t,x),function(){return d(t,x)}}),[r.current,n]),i["createElement"](_,{ref:o},v?i["cloneElement"](f,{ref:m}):f)}var E="rc-observer-key";function S(t){var e=t.children,n="function"===typeof e?[e]:Object(o["a"])(e);return n.map((function(e,n){var o=(null===e||void 0===e?void 0:e.key)||"".concat(E,"-").concat(n);return i["createElement"](w,Object(r["a"])({},t,{key:o}),e)}))}S.Collection=x;e["a"]=S},t2Dn:function(t,e,n){var r=n("hypo"),i=n("ljhN");function o(t,e,n){(void 0!==n&&!i(t[e],n)||void 0===n&&!(e in t))&&r(t,e,n)}t.exports=o},tB8F:function(t,e,n){"use strict";n.r(e);n("pNMO"),n("4Brf"),n("tjZM"),n("3I1R"),n("7+kd"),n("KhsS"),n("gOCb"),n("a57n"),n("GXvd"),n("I1Gw"),n("gXIK"),n("lEou"),n("ma9I"),n("TeQF"),n("BIHw"),n("XbcX"),n("pjDv"),n("yq1k"),n("yXV3"),n("4mDm"),n("uqXc"),n("2B1R"),n("E9XD"),n("9N29"),n("Junv"),n("+2oP"),n("ToJy"),n("94Xl"),n("pDQq"),n("QGkA"),n("c9m3"),n("wZ/5"),n("rOQg"),n("7+zs"),n("tW5y"),n("DEfu"),n("Tskq"),n("Uydy"),n("QFcT"),n("I9xj"),n("w1rZ"),n("JevA"),n("toAj"),n("zKZe"),n("Eqjn"),n("5xtp"),n("T63A"),n("wfmh"),n("27RR"),n("v5b1"),n("W/eh"),n("07d7"),n("B6y2"),n("rNhl"),n("4l63"),n("5s+n"),n("p532"),n("pv2x"),n("SuFq"),n("ftMj"),n("TWNs"),n("rB9j"),n("U3f4"),n("JfAA"),n("YGK4"),n("inlA"),n("JTJg"),n("Rm1S"),n("hDyC"),n("TZCg"),n("UxlC"),n("hByQ"),n("EnZy"),n("LKBx"),n("SYor"),n("HiXI"),n("7ueG"),n("z8NH"),n("SpvK"),n("/Yfv"),n("iwkZ"),n("FDzp"),n("XMab"),n("ilnZ"),n("hMMk"),n("+ywr"),n("c162"),n("IL/d"),n("gvgV"),n("YL0P"),n("7JcK"),n("PF2M"),n("IZzc"),n("s5qe"),n("cvf0"),n("ENF9"),n("H+LF"),n("66V8"),n("iIM6"),n("2tOg"),n("gYJb"),n("EDT/"),n("j+VE"),n("wgYD"),n("R3/m"),n("l/vG"),n("0q/z"),n("n5pg"),n("zu+z"),n("ihrJ"),n("Q7Pz"),n("unQa"),n("Vnov"),n("nIe3"),n("CUyW"),n("qc1c"),n("5921"),n("VOz1"),n("Thag"),n("9D6x"),n("cOPa"),n("vdRX"),n("KrxN"),n("SL6q"),n("lehK"),n("eO0o"),n("NqR8"),n("w7s6"),n("uWhJ"),n("WPzJ"),n("NV22"),n("ny8l"),n("a5/B"),n("vzwy"),n("pevA"),n("8go2"),n("DrvE"),n("kCkZ"),n("++zV"),n("Y4C7"),n("ZsH6"),n("vZi8"),n("5r1n"),n("sQ9d"),n("bdeN"),n("AwgR"),n("qgGA"),n("49+q"),n("AVoK"),n("hcok"),n("dNT4"),n("3uUd"),n("tijO"),n("1kQv"),n("ZY7T"),n("C1JJ"),n("lmH4"),n("Co1j"),n("5JV0"),n("ctDJ"),n("8r4s"),n("JwUS"),n("qaHo"),n("Si40"),n("BGb9"),n("fN96"),n("UzNg"),n("DhMN"),n("rZ3M"),n("apDx"),n("4XaG"),n("6V7H"),n("cfiF"),n("702D"),n("TJ79"),n("Z4nd"),n("8STE"),n("spTT"),n("rb3L"),n("FZtP"),n("3bBZ"),n("Ew+T"),n("n5b4"),n("Kz25"),n("vxnP"),n("mGGf"),n("VWci");var r=n("bCY9"),i=n("FfOG"),o=n("LtsZ"),a=n("zlVK");function s(t){if(Array.isArray(t))return t}function u(t,e){var n=null==t?null:"undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(t);!(a=(r=n.next()).done);a=!0)if(o.push(r.value),e&&o.length===e)break}catch(u){s=!0,i=u}finally{try{a||null==n["return"]||n["return"]()}finally{if(s)throw i}}return o}}function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function l(t,e){if(t){if("string"===typeof t)return c(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(t,e):void 0}}function f(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function h(t,e){return s(t)||u(t,e)||l(t,e)||f()}function p(){var t=[{path:"/~demos/:uuid",layout:!1,wrappers:[n("afA6").default],component:t=>{var e=n("q1tI"),r=n("F4QJ"),i=r.default,o=n("Zxc8"),a=o.default,s=n("dEAq"),u=s.usePrefersColor,c=s.context,l=e.useContext(c),f=l.demos,p=e.useState([]),d=h(p,2),v=d[0],g=d[1];switch(e.useLayoutEffect((()=>{g(i(t,f))}),[t.match.params.uuid,t.location.query.wrapper,t.location.query.capture]),u(),v.length){case 1:return v[0];case 2:return e.createElement(a,v[0],v[1]);default:return"Demo ".concat(t.match.params.uuid," not found :(")}}},{path:"/_demos/:uuid",redirect:"/~demos/:uuid"},{__dumiRoot:!0,layout:!1,path:"/",wrappers:[n("afA6").default,n("0Bia").default],routes:[{path:"/",component:n("F+kV").default,exact:!0,meta:{filePath:"docs/index.md",updatedTime:1670775494e3,slugs:[{depth:1,value:"introduction",heading:"introduction"},{depth:3,value:"L7",heading:"l7"},{depth:3,value:"maptalks",heading:"maptalks"},{depth:3,value:"L7 maptalks",heading:"l7-maptalks"},{depth:3,value:"install",heading:"install"},{depth:3,value:"L7 plugin for maptalks use in maptalks",heading:"l7-plugin-for-maptalks-use-in-maptalks"}],title:"introduction"},title:"introduction - L7-maptalks"},{path:"/maptalk",component:n("eBV8").default,exact:!0,meta:{filePath:"docs/maptalk.md",updatedTime:1670833947e3,slugs:[{depth:3,value:"use in L7",heading:"use-in-l7"}],title:"use in L7",hasPreviewer:!0},title:"use in L7 - L7-maptalks"}],title:"L7-maptalks",component:t=>t.children}];return r["a"].applyPlugins({key:"patchRoutes",type:o["ApplyPluginsType"].event,args:{routes:t}}),t}var d=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r["a"].applyPlugins({key:"render",type:o["ApplyPluginsType"].compose,initialValue:()=>{var e=r["a"].applyPlugins({key:"modifyClientRenderOpts",type:o["ApplyPluginsType"].modify,initialValue:{routes:t.routes||p(),plugin:r["a"],history:Object(i["a"])(t.hot),isServer:Object({NODE_ENV:"production"}).__IS_SERVER,rootElement:"root",defaultTitle:"L7-maptalks"}});return Object(a["renderClient"])(e)},args:t})},v=d();e["default"]=v();window.g_umi={version:"3.5.35"}},tEiQ:function(t,e,n){"use strict";(function(t){var r=n("q1tI"),i=n.n(r),o=n("dI71"),a=n("17x9"),s=n.n(a),u=1073741823,c="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof t?t:{};function l(){var t="__global_unique_id__";return c[t]=(c[t]||0)+1}function f(t,e){return t===e?0!==t||1/t===1/e:t!==t&&e!==e}function h(t){var e=[];return{on:function(t){e.push(t)},off:function(t){e=e.filter((function(e){return e!==t}))},get:function(){return t},set:function(n,r){t=n,e.forEach((function(e){return e(t,r)}))}}}function p(t){return Array.isArray(t)?t[0]:t}function d(t,e){var n,i,a="__create-react-context-"+l()+"__",c=function(t){function n(){var e;return e=t.apply(this,arguments)||this,e.emitter=h(e.props.value),e}Object(o["a"])(n,t);var r=n.prototype;return r.getChildContext=function(){var t;return t={},t[a]=this.emitter,t},r.componentWillReceiveProps=function(t){if(this.props.value!==t.value){var n,r=this.props.value,i=t.value;f(r,i)?n=0:(n="function"===typeof e?e(r,i):u,n|=0,0!==n&&this.emitter.set(t.value,n))}},r.render=function(){return this.props.children},n}(r["Component"]);c.childContextTypes=(n={},n[a]=s.a.object.isRequired,n);var d=function(e){function n(){var t;return t=e.apply(this,arguments)||this,t.state={value:t.getValue()},t.onUpdate=function(e,n){var r=0|t.observedBits;0!==(r&n)&&t.setState({value:t.getValue()})},t}Object(o["a"])(n,e);var r=n.prototype;return r.componentWillReceiveProps=function(t){var e=t.observedBits;this.observedBits=void 0===e||null===e?u:e},r.componentDidMount=function(){this.context[a]&&this.context[a].on(this.onUpdate);var t=this.props.observedBits;this.observedBits=void 0===t||null===t?u:t},r.componentWillUnmount=function(){this.context[a]&&this.context[a].off(this.onUpdate)},r.getValue=function(){return this.context[a]?this.context[a].get():t},r.render=function(){return p(this.props.children)(this.state.value)},n}(r["Component"]);return d.contextTypes=(i={},i[a]=s.a.object,i),{Provider:c,Consumer:d}}var v=i.a.createContext||d;e["a"]=v}).call(this,n("IyRk"))},tMB7:function(t,e,n){var r=n("y1pI");function i(t){var e=this.__data__,n=r(e,t);return n<0?void 0:e[n][1]}t.exports=i},tW5y:function(t,e,n){"use strict";var r=n("hh1v"),i=n("m/L8"),o=n("4WOD"),a=n("tiKp"),s=a("hasInstance"),u=Function.prototype;s in u||i.f(u,s,{value:function(t){if("function"!=typeof this||!r(t))return!1;if(!r(this.prototype))return t instanceof this;while(t=o(t))if(this.prototype===t)return!0;return!1}})},tXUg:function(t,e,n){var r,i,o,a,s,u,c,l,f=n("2oRo"),h=n("Bs8V").f,p=n("xrYK"),d=n("LPSS").set,v=n("HNyW"),g=f.MutationObserver||f.WebKitMutationObserver,m=f.process,y=f.Promise,_="process"==p(m),b=h(f,"queueMicrotask"),x=b&&b.value;x||(r=function(){var t,e;_&&(t=m.domain)&&t.exit();while(i){e=i.fn,i=i.next;try{e()}catch(n){throw i?a():o=void 0,n}}o=void 0,t&&t.enter()},_?a=function(){m.nextTick(r)}:g&&!v?(s=!0,u=document.createTextNode(""),new g(r).observe(u,{characterData:!0}),a=function(){u.data=s=!s}):y&&y.resolve?(c=y.resolve(void 0),l=c.then,a=function(){l.call(c,r)}):a=function(){d.call(f,r)}),t.exports=x||function(t){var e={fn:t,next:void 0};o&&(o.next=e),i||(i=e,a()),o=e}},tadb:function(t,e,n){var r=n("Cwc5"),i=n("Kz5y"),o=r(i,"DataView");t.exports=o},tiKp:function(t,e,n){var r=n("2oRo"),i=n("VpIT"),o=n("UTVS"),a=n("kOOl"),s=n("STAE"),u=n("/b8u"),c=i("wks"),l=r.Symbol,f=u?l:l&&l.withoutSetter||a;t.exports=function(t){return o(c,t)||(s&&o(l,t)?c[t]=l[t]:c[t]=f("Symbol."+t)),c[t]}},tijO:function(t,e,n){"use strict";var r=n("I+eb"),i=n("xDBR"),o=n("glrk"),a=n("A2ZE"),s=n("WGBp"),u=n("ImZN");r({target:"Set",proto:!0,real:!0,forced:i},{find:function(t){var e=o(this),n=s(e),r=a(t,arguments.length>1?arguments[1]:void 0,3);return u(n,(function(t){if(r(t,t,e))return u.stop(t)}),void 0,!1,!0).result}})},tjZM:function(t,e,n){var r=n("dG/n");r("asyncIterator")},toAj:function(t,e,n){"use strict";var r=n("I+eb"),i=n("ppGB"),o=n("QIpd"),a=n("EUja"),s=n("0Dky"),u=1..toFixed,c=Math.floor,l=function(t,e,n){return 0===e?n:e%2===1?l(t,e-1,n*t):l(t*t,e/2,n)},f=function(t){var e=0,n=t;while(n>=4096)e+=12,n/=4096;while(n>=2)e+=1,n/=2;return e},h=u&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!s((function(){u.call({})}));r({target:"Number",proto:!0,forced:h},{toFixed:function(t){var e,n,r,s,u=o(this),h=i(t),p=[0,0,0,0,0,0],d="",v="0",g=function(t,e){var n=-1,r=e;while(++n<6)r+=t*p[n],p[n]=r%1e7,r=c(r/1e7)},m=function(t){var e=6,n=0;while(--e>=0)n+=p[e],p[e]=c(n/t),n=n%t*1e7},y=function(){var t=6,e="";while(--t>=0)if(""!==e||0===t||0!==p[t]){var n=String(p[t]);e=""===e?n:e+a.call("0",7-n.length)+n}return e};if(h<0||h>20)throw RangeError("Incorrect fraction digits");if(u!=u)return"NaN";if(u<=-1e21||u>=1e21)return String(u);if(u<0&&(d="-",u=-u),u>1e-21)if(e=f(u*l(2,69,1))-69,n=e<0?u*l(2,-e,1):u/l(2,e,1),n*=4503599627370496,e=52-e,e>0){g(0,n),r=h;while(r>=7)g(1e7,0),r-=7;g(l(10,r,1),0),r=e-1;while(r>=23)m(1<<23),r-=23;m(1<<r),g(1,1),m(2),v=y()}else g(0,n),g(1<<-e,0),v=y()+a.call("0",h);return h>0?(s=v.length,v=d+(s<=h?"0."+a.call("0",h-s)+v:v.slice(0,s-h)+"."+v.slice(s-h))):v=d+v,v}})},tycR:function(t,e,n){var r=n("A2ZE"),i=n("RK3t"),o=n("ewvW"),a=n("UMSQ"),s=n("ZfDv"),u=[].push,c=function(t){var e=1==t,n=2==t,c=3==t,l=4==t,f=6==t,h=5==t||f;return function(p,d,v,g){for(var m,y,_=o(p),b=i(_),x=r(d,v,3),w=a(b.length),E=0,S=g||s,O=e?S(p,w):n?S(p,0):void 0;w>E;E++)if((h||E in b)&&(m=b[E],y=x(m,E,_),t))if(e)O[E]=y;else if(y)switch(t){case 3:return!0;case 5:return m;case 6:return E;case 2:u.call(O,m)}else if(l)return!1;return f?-1:c||l?l:O}};t.exports={forEach:c(0),map:c(1),filter:c(2),some:c(3),every:c(4),find:c(5),findIndex:c(6)}},u8Dt:function(t,e,n){var r=n("YESw"),i="__lodash_hash_undefined__",o=Object.prototype,a=o.hasOwnProperty;function s(t){var e=this.__data__;if(r){var n=e[t];return n===i?void 0:n}return a.call(e,t)?e[t]:void 0}t.exports=s},uWhJ:function(t,e,n){var r=n("I+eb"),i=Math.PI/180;r({target:"Math",stat:!0},{radians:function(t){return t*i}})},uhBA:function(t,e,n){"use strict";var r=Object.prototype.hasOwnProperty,i="~";function o(){}function a(t,e,n){this.fn=t,this.context=e,this.once=n||!1}function s(t,e,n,r,o){if("function"!==typeof n)throw new TypeError("The listener must be a function");var s=new a(n,r||t,o),u=i?i+e:e;return t._events[u]?t._events[u].fn?t._events[u]=[t._events[u],s]:t._events[u].push(s):(t._events[u]=s,t._eventsCount++),t}function u(t,e){0===--t._eventsCount?t._events=new o:delete t._events[e]}function c(){this._events=new o,this._eventsCount=0}Object.create&&(o.prototype=Object.create(null),(new o).__proto__||(i=!1)),c.prototype.eventNames=function(){var t,e,n=[];if(0===this._eventsCount)return n;for(e in t=this._events)r.call(t,e)&&n.push(i?e.slice(1):e);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(t)):n},c.prototype.listeners=function(t){var e=i?i+t:t,n=this._events[e];if(!n)return[];if(n.fn)return[n.fn];for(var r=0,o=n.length,a=new Array(o);r<o;r++)a[r]=n[r].fn;return a},c.prototype.listenerCount=function(t){var e=i?i+t:t,n=this._events[e];return n?n.fn?1:n.length:0},c.prototype.emit=function(t,e,n,r,o,a){var s=i?i+t:t;if(!this._events[s])return!1;var u,c,l=this._events[s],f=arguments.length;if(l.fn){switch(l.once&&this.removeListener(t,l.fn,void 0,!0),f){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,e),!0;case 3:return l.fn.call(l.context,e,n),!0;case 4:return l.fn.call(l.context,e,n,r),!0;case 5:return l.fn.call(l.context,e,n,r,o),!0;case 6:return l.fn.call(l.context,e,n,r,o,a),!0}for(c=1,u=new Array(f-1);c<f;c++)u[c-1]=arguments[c];l.fn.apply(l.context,u)}else{var h,p=l.length;for(c=0;c<p;c++)switch(l[c].once&&this.removeListener(t,l[c].fn,void 0,!0),f){case 1:l[c].fn.call(l[c].context);break;case 2:l[c].fn.call(l[c].context,e);break;case 3:l[c].fn.call(l[c].context,e,n);break;case 4:l[c].fn.call(l[c].context,e,n,r);break;default:if(!u)for(h=1,u=new Array(f-1);h<f;h++)u[h-1]=arguments[h];l[c].fn.apply(l[c].context,u)}}return!0},c.prototype.on=function(t,e,n){return s(this,t,e,n,!1)},c.prototype.once=function(t,e,n){return s(this,t,e,n,!0)},c.prototype.removeListener=function(t,e,n,r){var o=i?i+t:t;if(!this._events[o])return this;if(!e)return u(this,o),this;var a=this._events[o];if(a.fn)a.fn!==e||r&&!a.once||n&&a.context!==n||u(this,o);else{for(var s=0,c=[],l=a.length;s<l;s++)(a[s].fn!==e||r&&!a[s].once||n&&a[s].context!==n)&&c.push(a[s]);c.length?this._events[o]=1===c.length?c[0]:c:u(this,o)}return this},c.prototype.removeAllListeners=function(t){var e;return t?(e=i?i+t:t,this._events[e]&&u(this,e)):(this._events=new o,this._eventsCount=0),this},c.prototype.off=c.prototype.removeListener,c.prototype.addListener=c.prototype.on,c.prefixed=i,c.EventEmitter=c,t.exports=c},ujMp:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.circularDependencyToException=e.listMetadataForTarget=e.listRegisteredBindingsForServiceIdentifier=e.getServiceIdentifierAsString=e.getFunctionName=void 0;var r=n("MON2");function i(t){if("function"===typeof t){var e=t;return e.name}if("symbol"===typeof t)return t.toString();e=t;return e}function o(t,e,n){var r="",i=n(t,e);return 0!==i.length&&(r="\nRegistered bindings:",i.forEach((function(t){var e="Object";null!==t.implementationType&&(e=l(t.implementationType)),r=r+"\n "+e,t.constraint.metaData&&(r=r+" - "+t.constraint.metaData)}))),r}function a(t,e){return null!==t.parentRequest&&(t.parentRequest.serviceIdentifier===e||a(t.parentRequest,e))}function s(t){function e(t,n){void 0===n&&(n=[]);var r=i(t.serviceIdentifier);return n.push(r),null!==t.parentRequest?e(t.parentRequest,n):n}var n=e(t);return n.reverse().join(" --\x3e ")}function u(t){t.childRequests.forEach((function(t){if(a(t,t.serviceIdentifier)){var e=s(t);throw new Error(r.CIRCULAR_DEPENDENCY+" "+e)}u(t)}))}function c(t,e){if(e.isTagged()||e.isNamed()){var n="",r=e.getNamedTag(),i=e.getCustomTags();return null!==r&&(n+=r.toString()+"\n"),null!==i&&i.forEach((function(t){n+=t.toString()+"\n"}))," "+t+"\n "+t+" - "+n}return" "+t}function l(t){if(t.name)return t.name;var e=t.toString(),n=e.match(/^function\s*([^\s(]+)/);return n?n[1]:"Anonymous function: "+e}e.getServiceIdentifierAsString=i,e.listRegisteredBindingsForServiceIdentifier=o,e.circularDependencyToException=u,e.listMetadataForTarget=c,e.getFunctionName=l},unQa:function(t,e,n){"use strict";var r=n("I+eb"),i=n("ImZN"),o=n("HAuM");r({target:"Map",stat:!0},{keyBy:function(t,e){var n=new this;o(e);var r=o(n.set);return i(t,(function(t){r.call(n,e(t),t)})),n}})},uqXc:function(t,e,n){var r=n("I+eb"),i=n("5Yz+");r({target:"Array",proto:!0,forced:i!==[].lastIndexOf},{lastIndexOf:i})},uy83:function(t,e,n){var r=n("0Dky");t.exports=!r((function(){return Object.isExtensible(Object.preventExtensions({}))}))},v5b1:function(t,e,n){"use strict";var r=n("I+eb"),i=n("g6v/"),o=n("6x0u"),a=n("ewvW"),s=n("wE6v"),u=n("4WOD"),c=n("Bs8V").f;i&&r({target:"Object",proto:!0,forced:o},{__lookupGetter__:function(t){var e,n=a(this),r=s(t,!0);do{if(e=c(n,r))return e.get}while(n=u(n))}})},vRGJ:function(t,e,n){var r=n("AqCL");t.exports=y,t.exports.parse=o,t.exports.compile=a,t.exports.tokensToFunction=c,t.exports.tokensToRegExp=m;var i=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g");function o(t,e){var n,r=[],o=0,a=0,s="",u=e&&e.delimiter||"/";while(null!=(n=i.exec(t))){var c=n[0],h=n[1],p=n.index;if(s+=t.slice(a,p),a=p+c.length,h)s+=h[1];else{var d=t[a],v=n[2],g=n[3],m=n[4],y=n[5],_=n[6],b=n[7];s&&(r.push(s),s="");var x=null!=v&&null!=d&&d!==v,w="+"===_||"*"===_,E="?"===_||"*"===_,S=n[2]||u,O=m||y;r.push({name:g||o++,prefix:v||"",delimiter:S,optional:E,repeat:w,partial:x,asterisk:!!b,pattern:O?f(O):b?".*":"[^"+l(S)+"]+?"})}}return a<t.length&&(s+=t.substr(a)),s&&r.push(s),r}function a(t,e){return c(o(t,e),e)}function s(t){return encodeURI(t).replace(/[\/?#]/g,(function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()}))}function u(t){return encodeURI(t).replace(/[?#]/g,(function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()}))}function c(t,e){for(var n=new Array(t.length),i=0;i<t.length;i++)"object"===typeof t[i]&&(n[i]=new RegExp("^(?:"+t[i].pattern+")$",p(e)));return function(e,i){for(var o="",a=e||{},c=i||{},l=c.pretty?s:encodeURIComponent,f=0;f<t.length;f++){var h=t[f];if("string"!==typeof h){var p,d=a[h.name];if(null==d){if(h.optional){h.partial&&(o+=h.prefix);continue}throw new TypeError('Expected "'+h.name+'" to be defined')}if(r(d)){if(!h.repeat)throw new TypeError('Expected "'+h.name+'" to not repeat, but received `'+JSON.stringify(d)+"`");if(0===d.length){if(h.optional)continue;throw new TypeError('Expected "'+h.name+'" to not be empty')}for(var v=0;v<d.length;v++){if(p=l(d[v]),!n[f].test(p))throw new TypeError('Expected all "'+h.name+'" to match "'+h.pattern+'", but received `'+JSON.stringify(p)+"`");o+=(0===v?h.prefix:h.delimiter)+p}}else{if(p=h.asterisk?u(d):l(d),!n[f].test(p))throw new TypeError('Expected "'+h.name+'" to match "'+h.pattern+'", but received "'+p+'"');o+=h.prefix+p}}else o+=h}return o}}function l(t){return t.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function f(t){return t.replace(/([=!:$\/()])/g,"\\$1")}function h(t,e){return t.keys=e,t}function p(t){return t&&t.sensitive?"":"i"}function d(t,e){var n=t.source.match(/\((?!\?)/g);if(n)for(var r=0;r<n.length;r++)e.push({name:r,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return h(t,e)}function v(t,e,n){for(var r=[],i=0;i<t.length;i++)r.push(y(t[i],e,n).source);var o=new RegExp("(?:"+r.join("|")+")",p(n));return h(o,e)}function g(t,e,n){return m(o(t,n),e,n)}function m(t,e,n){r(e)||(n=e||n,e=[]),n=n||{};for(var i=n.strict,o=!1!==n.end,a="",s=0;s<t.length;s++){var u=t[s];if("string"===typeof u)a+=l(u);else{var c=l(u.prefix),f="(?:"+u.pattern+")";e.push(u),u.repeat&&(f+="(?:"+c+f+")*"),f=u.optional?u.partial?c+"("+f+")?":"(?:"+c+"("+f+"))?":c+"("+f+")",a+=f}}var d=l(n.delimiter||"/"),v=a.slice(-d.length)===d;return i||(a=(v?a.slice(0,-d.length):a)+"(?:"+d+"(?=$))?"),a+=o?"$":i&&v?"":"(?="+d+"|$)",h(new RegExp("^"+a,p(n)),e)}function y(t,e,n){return r(e)||(n=e||n,e=[]),n=n||{},t instanceof RegExp?d(t,e):r(t)?v(t,e,n):g(t,e,n)}},vZi8:function(t,e,n){var r=n("I+eb"),i=n("YGK4"),o=n("eDxR"),a=n("glrk"),s=n("4WOD"),u=n("ImZN"),c=o.keys,l=o.toKey,f=function(t){var e=[];return u(t,e.push,e),e},h=function(t,e){var n=c(t,e),r=s(t);if(null===r)return n;var o=h(r,e);return o.length?n.length?f(new i(n.concat(o))):o:n};r({target:"Reflect",stat:!0},{getMetadataKeys:function(t){var e=arguments.length<2?void 0:l(arguments[1]);return h(a(t),e)}})},vdRX:function(t,e,n){var r=n("I+eb");r({target:"Math",stat:!0},{DEG_PER_RAD:Math.PI/180})},viRO:function(t,e,n){"use strict";var r=n("MgzW"),i="function"===typeof Symbol&&Symbol.for,o=i?Symbol.for("react.element"):60103,a=i?Symbol.for("react.portal"):60106,s=i?Symbol.for("react.fragment"):60107,u=i?Symbol.for("react.strict_mode"):60108,c=i?Symbol.for("react.profiler"):60114,l=i?Symbol.for("react.provider"):60109,f=i?Symbol.for("react.context"):60110,h=i?Symbol.for("react.forward_ref"):60112,p=i?Symbol.for("react.suspense"):60113,d=i?Symbol.for("react.memo"):60115,v=i?Symbol.for("react.lazy"):60116,g="function"===typeof Symbol&&Symbol.iterator;function m(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var y={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},_={};function b(t,e,n){this.props=t,this.context=e,this.refs=_,this.updater=n||y}function x(){}function w(t,e,n){this.props=t,this.context=e,this.refs=_,this.updater=n||y}b.prototype.isReactComponent={},b.prototype.setState=function(t,e){if("object"!==typeof t&&"function"!==typeof t&&null!=t)throw Error(m(85));this.updater.enqueueSetState(this,t,e,"setState")},b.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")},x.prototype=b.prototype;var E=w.prototype=new x;E.constructor=w,r(E,b.prototype),E.isPureReactComponent=!0;var S={current:null},O=Object.prototype.hasOwnProperty,C={key:!0,ref:!0,__self:!0,__source:!0};function T(t,e,n){var r,i={},a=null,s=null;if(null!=e)for(r in void 0!==e.ref&&(s=e.ref),void 0!==e.key&&(a=""+e.key),e)O.call(e,r)&&!C.hasOwnProperty(r)&&(i[r]=e[r]);var u=arguments.length-2;if(1===u)i.children=n;else if(1<u){for(var c=Array(u),l=0;l<u;l++)c[l]=arguments[l+2];i.children=c}if(t&&t.defaultProps)for(r in u=t.defaultProps,u)void 0===i[r]&&(i[r]=u[r]);return{$$typeof:o,type:t,key:a,ref:s,props:i,_owner:S.current}}function A(t,e){return{$$typeof:o,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function k(t){return"object"===typeof t&&null!==t&&t.$$typeof===o}function M(t){var e={"=":"=0",":":"=2"};return"$"+(""+t).replace(/[=:]/g,(function(t){return e[t]}))}var P=/\/+/g,R=[];function j(t,e,n,r){if(R.length){var i=R.pop();return i.result=t,i.keyPrefix=e,i.func=n,i.context=r,i.count=0,i}return{result:t,keyPrefix:e,func:n,context:r,count:0}}function I(t){t.result=null,t.keyPrefix=null,t.func=null,t.context=null,t.count=0,10>R.length&&R.push(t)}function L(t,e,n,r){var i=typeof t;"undefined"!==i&&"boolean"!==i||(t=null);var s=!1;if(null===t)s=!0;else switch(i){case"string":case"number":s=!0;break;case"object":switch(t.$$typeof){case o:case a:s=!0}}if(s)return n(r,t,""===e?"."+D(t,0):e),1;if(s=0,e=""===e?".":e+":",Array.isArray(t))for(var u=0;u<t.length;u++){i=t[u];var c=e+D(i,u);s+=L(i,c,n,r)}else if(null===t||"object"!==typeof t?c=null:(c=g&&t[g]||t["@@iterator"],c="function"===typeof c?c:null),"function"===typeof c)for(t=c.call(t),u=0;!(i=t.next()).done;)i=i.value,c=e+D(i,u++),s+=L(i,c,n,r);else if("object"===i)throw n=""+t,Error(m(31,"[object Object]"===n?"object with keys {"+Object.keys(t).join(", ")+"}":n,""));return s}function N(t,e,n){return null==t?0:L(t,"",e,n)}function D(t,e){return"object"===typeof t&&null!==t&&null!=t.key?M(t.key):e.toString(36)}function F(t,e){t.func.call(t.context,e,t.count++)}function B(t,e,n){var r=t.result,i=t.keyPrefix;t=t.func.call(t.context,e,t.count++),Array.isArray(t)?z(t,r,n,(function(t){return t})):null!=t&&(k(t)&&(t=A(t,i+(!t.key||e&&e.key===t.key?"":(""+t.key).replace(P,"$&/")+"/")+n)),r.push(t))}function z(t,e,n,r,i){var o="";null!=n&&(o=(""+n).replace(P,"$&/")+"/"),e=j(e,o,r,i),N(t,B,e),I(e)}var U={current:null};function V(){var t=U.current;if(null===t)throw Error(m(321));return t}var H={ReactCurrentDispatcher:U,ReactCurrentBatchConfig:{suspense:null},ReactCurrentOwner:S,IsSomeRendererActing:{current:!1},assign:r};e.Children={map:function(t,e,n){if(null==t)return t;var r=[];return z(t,r,null,e,n),r},forEach:function(t,e,n){if(null==t)return t;e=j(null,null,e,n),N(t,F,e),I(e)},count:function(t){return N(t,(function(){return null}),null)},toArray:function(t){var e=[];return z(t,e,null,(function(t){return t})),e},only:function(t){if(!k(t))throw Error(m(143));return t}},e.Component=b,e.Fragment=s,e.Profiler=c,e.PureComponent=w,e.StrictMode=u,e.Suspense=p,e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=H,e.cloneElement=function(t,e,n){if(null===t||void 0===t)throw Error(m(267,t));var i=r({},t.props),a=t.key,s=t.ref,u=t._owner;if(null!=e){if(void 0!==e.ref&&(s=e.ref,u=S.current),void 0!==e.key&&(a=""+e.key),t.type&&t.type.defaultProps)var c=t.type.defaultProps;for(l in e)O.call(e,l)&&!C.hasOwnProperty(l)&&(i[l]=void 0===e[l]&&void 0!==c?c[l]:e[l])}var l=arguments.length-2;if(1===l)i.children=n;else if(1<l){c=Array(l);for(var f=0;f<l;f++)c[f]=arguments[f+2];i.children=c}return{$$typeof:o,type:t.type,key:a,ref:s,props:i,_owner:u}},e.createContext=function(t,e){return void 0===e&&(e=null),t={$$typeof:f,_calculateChangedBits:e,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null},t.Provider={$$typeof:l,_context:t},t.Consumer=t},e.createElement=T,e.createFactory=function(t){var e=T.bind(null,t);return e.type=t,e},e.createRef=function(){return{current:null}},e.forwardRef=function(t){return{$$typeof:h,render:t}},e.isValidElement=k,e.lazy=function(t){return{$$typeof:v,_ctor:t,_status:-1,_result:null}},e.memo=function(t,e){return{$$typeof:d,type:t,compare:void 0===e?null:e}},e.useCallback=function(t,e){return V().useCallback(t,e)},e.useContext=function(t,e){return V().useContext(t,e)},e.useDebugValue=function(){},e.useEffect=function(t,e){return V().useEffect(t,e)},e.useImperativeHandle=function(t,e,n){return V().useImperativeHandle(t,e,n)},e.useLayoutEffect=function(t,e){return V().useLayoutEffect(t,e)},e.useMemo=function(t,e){return V().useMemo(t,e)},e.useReducer=function(t,e,n){return V().useReducer(t,e,n)},e.useRef=function(t){return V().useRef(t)},e.useState=function(t){return V().useState(t)},e.version="16.14.0"},vo4V:function(t,e,n){var r=n("90hW"),i=Math.abs,o=Math.pow,a=o(2,-52),s=o(2,-23),u=o(2,127)*(2-s),c=o(2,-126),l=function(t){return t+1/a-1/a};t.exports=Math.fround||function(t){var e,n,o=i(t),f=r(t);return o<c?f*l(o/c/s)*c*s:(e=(1+s/a)*o,n=e-(e-o),n>u||n!=n?f*(1/0):f*n)}},voyM:function(t,e){t.exports=Math.scale||function(t,e,n,r,i){return 0===arguments.length||t!=t||e!=e||n!=n||r!=r||i!=i?NaN:t===1/0||t===-1/0?t:(t-e)*(i-r)/(n-e)+r}},vuIU:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n("o46R");function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,Object(r["a"])(i.key),i)}}function o(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}},vxnP:function(t,e,n){"use strict";var r=n("I+eb");r({target:"URL",proto:!0,enumerable:!0},{toJSON:function(){return URL.prototype.toString.call(this)}})},vzwy:function(t,e,n){"use strict";var r=n("I+eb"),i=n("ppGB"),o=n("wg0c"),a="Invalid number representation",s="Invalid radix",u=/^[\da-z]+$/;r({target:"Number",stat:!0},{fromString:function(t,e){var n,r,c=1;if("string"!=typeof t)throw TypeError(a);if(!t.length)throw SyntaxError(a);if("-"==t.charAt(0)&&(c=-1,t=t.slice(1),!t.length))throw SyntaxError(a);if(n=void 0===e?10:i(e),n<2||n>36)throw RangeError(s);if(!u.test(t)||(r=o(t,n)).toString(n)!==t)throw SyntaxError(a);return c*r}})},w1rZ:function(t,e,n){var r=n("I+eb"),i=n("fhKU");r({target:"Number",stat:!0,forced:Number.parseFloat!=i},{parseFloat:i})},w7s6:function(t,e,n){var r=n("I+eb");r({target:"Math",stat:!0},{RAD_PER_DEG:180/Math.PI})},wE6v:function(t,e,n){var r=n("hh1v");t.exports=function(t,e){if(!r(t))return t;var n,i;if(e&&"function"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;if("function"==typeof(n=t.valueOf)&&!r(i=n.call(t)))return i;if(!e&&"function"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;throw TypeError("Can't convert object to primitive value")}},"wF/u":function(t,e,n){var r=n("e5cp"),i=n("ExA7");function o(t,e,n,a,s){return t===e||(null==t||null==e||!i(t)&&!i(e)?t!==t&&e!==e:r(t,e,n,a,o,s))}t.exports=o},wJg7:function(t,e){var n=9007199254740991,r=/^(?:0|[1-9]\d*)$/;function i(t,e){var i=typeof t;return e=null==e?n:e,!!e&&("number"==i||"symbol"!=i&&r.test(t))&&t>-1&&t%1==0&&t<e}t.exports=i},"wZ/5":function(t,e,n){"use strict";var r=n("I+eb"),i=n("2oRo"),o=n("Yhre"),a=n("JiZb"),s="ArrayBuffer",u=o[s],c=i[s];r({global:!0,forced:c!==u},{ArrayBuffer:u}),a(s)},wclG:function(t,e,n){var r=n("pFRH"),i=n("88Gu"),o=i(r);t.exports=o},wfmh:function(t,e,n){var r=n("I+eb"),i=n("ImZN"),o=n("hBjN");r({target:"Object",stat:!0},{fromEntries:function(t){var e={};return i(t,(function(t,n){o(e,t,n)}),void 0,!0),e}})},wg0c:function(t,e,n){var r=n("2oRo"),i=n("WKiH").trim,o=n("WJkJ"),a=r.parseInt,s=/^[+-]?0[Xx]/,u=8!==a(o+"08")||22!==a(o+"0x16");t.exports=u?function(t,e){var n=i(String(t));return a(n,e>>>0||(s.test(n)?16:10))}:a},wgJM:function(t,e,n){"use strict";var r=function(t){return+setTimeout(t,16)},i=function(t){return clearTimeout(t)};"undefined"!==typeof window&&"requestAnimationFrame"in window&&(r=function(t){return window.requestAnimationFrame(t)},i=function(t){return window.cancelAnimationFrame(t)});var o=0,a=new Map;function s(t){a["delete"](t)}var u=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;o+=1;var n=o;function i(e){if(0===e)s(n),t();else{var o=r((function(){i(e-1)}));a.set(n,o)}}return i(e),n};u.cancel=function(t){var e=a.get(t);return s(e),i(e)},e["a"]=u},wgYD:function(t,e,n){"use strict";var r=n("I+eb"),i=n("xDBR"),o=n("Cg3G");r({target:"Map",proto:!0,real:!0,forced:i},{deleteAll:function(){return o.apply(this,arguments)}})},wnjb:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MetadataReader=void 0;var r=n("xfSm"),i=function(){function t(){}return t.prototype.getConstructorMetadata=function(t){var e=Reflect.getMetadata(r.PARAM_TYPES,t),n=Reflect.getMetadata(r.TAGGED,t);return{compilerGeneratedMetadata:e,userGeneratedMetadata:n||{}}},t.prototype.getPropertiesMetadata=function(t){var e=Reflect.getMetadata(r.TAGGED_PROP,t)||[];return e},t}();e.MetadataReader=i},wx14:function(t,e,n){"use strict";function r(){return r=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},r.apply(this,arguments)}n.d(e,"a",(function(){return r}))},x2v5:function(t){t.exports=JSON.parse("{}")},x8cr:function(t,e,n){},xDBR:function(t,e){t.exports=!1},xYSL:function(t,e){function n(t,e){return t.has(e)}t.exports=n},xbqb:function(t,e){function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}t.exports=n,t.exports.__esModule=!0,t.exports["default"]=t.exports},xfSm:function(t,e,n){"use strict";function r(){return[e.INJECT_TAG,e.MULTI_INJECT_TAG,e.NAME_TAG,e.UNMANAGED_TAG,e.NAMED_TAG,e.OPTIONAL_TAG]}Object.defineProperty(e,"__esModule",{value:!0}),e.NON_CUSTOM_TAG_KEYS=e.POST_CONSTRUCT=e.DESIGN_PARAM_TYPES=e.PARAM_TYPES=e.TAGGED_PROP=e.TAGGED=e.MULTI_INJECT_TAG=e.INJECT_TAG=e.OPTIONAL_TAG=e.UNMANAGED_TAG=e.NAME_TAG=e.NAMED_TAG=void 0,e.NAMED_TAG="named",e.NAME_TAG="name",e.UNMANAGED_TAG="unmanaged",e.OPTIONAL_TAG="optional",e.INJECT_TAG="inject",e.MULTI_INJECT_TAG="multi_inject",e.TAGGED="inversify:tagged",e.TAGGED_PROP="inversify:tagged_props",e.PARAM_TYPES="inversify:paramtypes",e.DESIGN_PARAM_TYPES="design:paramtypes",e.POST_CONSTRUCT="post_construct",e.NON_CUSTOM_TAG_KEYS=r()},xiII:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Request=void 0;var r=n("d9O0"),i=function(){function t(t,e,n,i,o){this.id=r.id(),this.serviceIdentifier=t,this.parentContext=e,this.parentRequest=n,this.target=o,this.childRequests=[],this.bindings=Array.isArray(i)?i:[i],this.requestScope=null===n?new Map:null}return t.prototype.addChildRequest=function(e,n,r){var i=new t(e,this.parentContext,this,n,r);return this.childRequests.push(i),i},t}();e.Request=i},xnQO:function(t,e,n){"use strict";function r(t,e){this.x=t,this.y=e}t.exports=r,r.prototype={clone:function(){return new r(this.x,this.y)},add:function(t){return this.clone()._add(t)},sub:function(t){return this.clone()._sub(t)},multByPoint:function(t){return this.clone()._multByPoint(t)},divByPoint:function(t){return this.clone()._divByPoint(t)},mult:function(t){return this.clone()._mult(t)},div:function(t){return this.clone()._div(t)},rotate:function(t){return this.clone()._rotate(t)},rotateAround:function(t,e){return this.clone()._rotateAround(t,e)},matMult:function(t){return this.clone()._matMult(t)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(t){return this.x===t.x&&this.y===t.y},dist:function(t){return Math.sqrt(this.distSqr(t))},distSqr:function(t){var e=t.x-this.x,n=t.y-this.y;return e*e+n*n},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(t){return Math.atan2(this.y-t.y,this.x-t.x)},angleWith:function(t){return this.angleWithSep(t.x,t.y)},angleWithSep:function(t,e){return Math.atan2(this.x*e-this.y*t,this.x*t+this.y*e)},_matMult:function(t){var e=t[0]*this.x+t[1]*this.y,n=t[2]*this.x+t[3]*this.y;return this.x=e,this.y=n,this},_add:function(t){return this.x+=t.x,this.y+=t.y,this},_sub:function(t){return this.x-=t.x,this.y-=t.y,this},_mult:function(t){return this.x*=t,this.y*=t,this},_div:function(t){return this.x/=t,this.y/=t,this},_multByPoint:function(t){return this.x*=t.x,this.y*=t.y,this},_divByPoint:function(t){return this.x/=t.x,this.y/=t.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var t=this.y;return this.y=this.x,this.x=-t,this},_rotate:function(t){var e=Math.cos(t),n=Math.sin(t),r=e*this.x-n*this.y,i=n*this.x+e*this.y;return this.x=r,this.y=i,this},_rotateAround:function(t,e){var n=Math.cos(t),r=Math.sin(t),i=e.x+n*(this.x-e.x)-r*(this.y-e.y),o=e.y+r*(this.x-e.x)+n*(this.y-e.y);return this.x=i,this.y=o,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},r.convert=function(t){return t instanceof r?t:Array.isArray(t)?new r(t[0],t[1]):t}},xp6e:function(t,e,n){"use strict";(function(t){function r(t,e,n,r){function i(t){return t instanceof n?t:new n((function(e){e(t)}))}return new(n||(n=Promise))((function(n,o){function a(t){try{u(r.next(t))}catch(e){o(e)}}function s(t){try{u(r["throw"](t))}catch(e){o(e)}}function u(t){t.done?n(t.value):i(t.value).then(a,s)}u((r=r.apply(t,e||[])).next())}))}function i(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(t){return function(e){return u([t,e])}}function u(o){if(n)throw new TypeError("Generator is already executing.");while(a)try{if(n=1,r&&(i=2&o[0]?r["return"]:o[0]?r["throw"]||((i=r["return"])&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(i=a.trys,!(i=i.length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(s){o=[6,s],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}}function o(t,e){var n="function"===typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{while((void 0===e||e-- >0)&&!(r=o.next()).done)a.push(r.value)}catch(s){i={error:s}}finally{try{r&&!r.done&&(n=o["return"])&&n.call(o)}finally{if(i)throw i.error}}return a}function a(t,e,n){if(n||2===arguments.length)for(var r,i=0,o=e.length;i<o;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))}function s(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t["default"]:t}n.d(e,"a",(function(){return Y})),n.d(e,"b",(function(){return Z})),n.d(e,"c",(function(){return X})),n.d(e,"d",(function(){return W})),n.d(e,"e",(function(){return B}));var u={exports:{}},c={exports:{}},l={exports:{}};(function(t,e){function n(t){return t&&"number"===typeof t.length&&t.length>=0&&t.length%1===0}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=n,t.exports=e["default"]})(l,l.exports);var f={},h={exports:{}},p={exports:{}};(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=function(t){return function(){var e=[],n=arguments.length;while(n--)e[n]=arguments[n];var r=e.pop();return t.call(this,e,r)}},t.exports=e["default"]})(p,p.exports);var d={};Object.defineProperty(d,"__esModule",{value:!0}),d.fallback=_,d.wrap=b;var v,g=d.hasQueueMicrotask="function"===typeof queueMicrotask&&queueMicrotask,m=d.hasSetImmediate="function"===typeof setImmediate&&setImmediate,y=d.hasNextTick="object"===typeof t&&"function"===typeof t.nextTick;function _(t){setTimeout(t,0)}function b(t){return function(e){var n=[],r=arguments.length-1;while(r-- >0)n[r]=arguments[r+1];return t((function(){return e.apply(void 0,n)}))}}v=g?queueMicrotask:m?setImmediate:y?t.nextTick:_,d["default"]=b(v),function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=u;var n=p.exports,r=s(n),i=d,o=s(i),a=f;function s(t){return t&&t.__esModule?t:{default:t}}function u(t){return(0,a.isAsync)(t)?function(){var e=[],n=arguments.length;while(n--)e[n]=arguments[n];var r=e.pop(),i=t.apply(this,e);return c(i,r)}:(0,r["default"])((function(e,n){var r;try{r=t.apply(this,e)}catch(i){return n(i)}if(r&&"function"===typeof r.then)return c(r,n);n(null,r)}))}function c(t,e){return t.then((function(t){l(e,null,t)}),(function(t){l(e,t&&t.message?t:new Error(t))}))}function l(t,e,n){try{t(e,n)}catch(r){(0,o["default"])((function(t){throw t}),r)}}t.exports=e["default"]}(h,h.exports),Object.defineProperty(f,"__esModule",{value:!0}),f.isAsyncIterable=f.isAsyncGenerator=f.isAsync=void 0;var x=h.exports,w=E(x);function E(t){return t&&t.__esModule?t:{default:t}}function S(t){return"AsyncFunction"===t[Symbol.toStringTag]}function O(t){return"AsyncGenerator"===t[Symbol.toStringTag]}function C(t){return"function"===typeof t[Symbol.asyncIterator]}function T(t){if("function"!==typeof t)throw new Error("expected a function");return S(t)?(0,w["default"])(t):t}f["default"]=T,f.isAsync=S,f.isAsyncGenerator=O,f.isAsyncIterable=C;var A={exports:{}};(function(t,e){function n(t,e){if(void 0===e&&(e=t.length),!e)throw new Error("arity is undefined");function n(){var n=this,r=[],i=arguments.length;while(i--)r[i]=arguments[i];return"function"===typeof r[e-1]?t.apply(this,r):new Promise((function(i,o){r[e-1]=function(t){var e=[],n=arguments.length-1;while(n-- >0)e[n]=arguments[n+1];if(t)return o(t);i(e.length>1?e:e[0])},t.apply(n,r)}))}return n}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=n,t.exports=e["default"]})(A,A.exports),function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=l.exports,r=u(n),i=f,o=u(i),a=A.exports,s=u(a);function u(t){return t&&t.__esModule?t:{default:t}}e["default"]=(0,s["default"])((function(t,e,n){var i=(0,r["default"])(e)?[]:{};t(e,(function(t,e,n){(0,o["default"])(t)((function(t){var r,o=[],a=arguments.length-1;while(a-- >0)o[a]=arguments[a+1];o.length<2&&(r=o,o=r[0]),i[e]=o,n(t)}))}),(function(t){return n(t,i)}))}),3),t.exports=e["default"]}(c,c.exports);var k={exports:{}},M={exports:{}},P={exports:{}},R={exports:{}};(function(t,e){function n(t){function e(){var e=[],n=arguments.length;while(n--)e[n]=arguments[n];if(null!==t){var r=t;t=null,r.apply(this,e)}}return Object.assign(e,t),e}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=n,t.exports=e["default"]})(R,R.exports);var j={exports:{}},I={exports:{}};(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=function(t){return t[Symbol.iterator]&&t[Symbol.iterator]()},t.exports=e["default"]})(I,I.exports),function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=f;var n=l.exports,r=a(n),i=I.exports,o=a(i);function a(t){return t&&t.__esModule?t:{default:t}}function s(t){var e=-1,n=t.length;return function(){return++e<n?{value:t[e],key:e}:null}}function u(t){var e=-1;return function(){var n=t.next();return n.done?null:(e++,{value:n.value,key:e})}}function c(t){var e=t?Object.keys(t):[],n=-1,r=e.length;return function i(){var o=e[++n];return"__proto__"===o?i():n<r?{value:t[o],key:o}:null}}function f(t){if((0,r["default"])(t))return s(t);var e=(0,o["default"])(t);return e?u(e):c(t)}t.exports=e["default"]}(j,j.exports);var L={exports:{}};(function(t,e){function n(t){return function(){var e=[],n=arguments.length;while(n--)e[n]=arguments[n];if(null===t)throw new Error("Callback was already called.");var r=t;t=null,r.apply(this,e)}}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=n,t.exports=e["default"]})(L,L.exports);var N={exports:{}},D={exports:{}};(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n={};e["default"]=n,t.exports=e["default"]})(D,D.exports),function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=o;var n=D.exports,r=i(n);function i(t){return t&&t.__esModule?t:{default:t}}function o(t,e,n,i){var o=!1,a=!1,s=!1,u=0,c=0;function l(){u>=e||s||o||(s=!0,t.next().then((function(t){var e=t.value,r=t.done;if(!a&&!o){if(s=!1,r)return o=!0,void(u<=0&&i(null));u++,n(e,c,f),c++,l()}}))["catch"](h))}function f(t,e){if(u-=1,!a)return t?h(t):!1===t?(o=!0,void(a=!0)):e===r["default"]||o&&u<=0?(o=!0,i(null)):void l()}function h(t){a||(s=!1,o=!0,i(t))}l()}t.exports=e["default"]}(N,N.exports),function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=R.exports,r=d(n),i=j.exports,o=d(i),a=L.exports,s=d(a),u=f,c=N.exports,l=d(c),h=D.exports,p=d(h);function d(t){return t&&t.__esModule?t:{default:t}}e["default"]=function(t){return function(e,n,i){if(i=(0,r["default"])(i),t<=0)throw new RangeError("concurrency limit cannot be less than 1");if(!e)return i(null);if((0,u.isAsyncGenerator)(e))return(0,l["default"])(e,t,n,i);if((0,u.isAsyncIterable)(e))return(0,l["default"])(e[Symbol.asyncIterator](),t,n,i);var a=(0,o["default"])(e),c=!1,f=!1,h=0,d=!1;function v(t,e){if(!f)if(h-=1,t)c=!0,i(t);else if(!1===t)c=!0,f=!0;else{if(e===p["default"]||c&&h<=0)return c=!0,i(null);d||g()}}function g(){d=!0;while(h<t&&!c){var e=a();if(null===e)return c=!0,void(h<=0&&i(null));h+=1,n(e.value,e.key,(0,s["default"])(v))}d=!1}g()}},t.exports=e["default"]}(P,P.exports),function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=P.exports,r=u(n),i=f,o=u(i),a=A.exports,s=u(a);function u(t){return t&&t.__esModule?t:{default:t}}function c(t,e,n,i){return(0,r["default"])(e)(t,(0,o["default"])(n),i)}e["default"]=(0,s["default"])(c,4),t.exports=e["default"]}(M,M.exports),function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=M.exports,r=a(n),i=A.exports,o=a(i);function a(t){return t&&t.__esModule?t:{default:t}}function s(t,e,n){return(0,r["default"])(t,1,e,n)}e["default"]=(0,o["default"])(s,3),t.exports=e["default"]}(k,k.exports),function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=s;var n=c.exports,r=a(n),i=k.exports,o=a(i);function a(t){return t&&t.__esModule?t:{default:t}}function s(t,e){return(0,r["default"])(o["default"],t,e)}t.exports=e["default"]}(u,u.exports);var F=s(u.exports),B=function(){function t(){this.args=[],this.tasks=[]}return t.prototype.call=function(){for(var t=arguments,e=[],n=0;n<arguments.length;n++)e[n]=t[n];return this.args=e,F(this.tasks)},t.prototype.tap=function(t,e){var n=this;this.tasks.push((function(r){e.apply(void 0,a([],o(n.args),!1)),r(null,t)}))},t}(),z={exports:{}},U={exports:{}};(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=l.exports,r=y(n),i=D.exports,o=y(i),a=M.exports,s=y(a),u=R.exports,c=y(u),h=L.exports,p=y(h),d=f,v=y(d),g=A.exports,m=y(g);function y(t){return t&&t.__esModule?t:{default:t}}function _(t,e,n){n=(0,c["default"])(n);var r=0,i=0,a=t.length,s=!1;function u(t,e){!1===t&&(s=!0),!0!==s&&(t?n(t):++i!==a&&e!==o["default"]||n(null))}for(0===a&&n(null);r<a;r++)e(t[r],r,(0,p["default"])(u))}function b(t,e,n){return(0,s["default"])(t,1/0,e,n)}function x(t,e,n){var i=(0,r["default"])(t)?_:b;return i(t,(0,v["default"])(e),n)}e["default"]=(0,m["default"])(x,3),t.exports=e["default"]})(U,U.exports),function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=s;var n=U.exports,r=a(n),i=c.exports,o=a(i);function a(t){return t&&t.__esModule?t:{default:t}}function s(t,e){return(0,o["default"])(r["default"],t,e)}t.exports=e["default"]}(z,z.exports);var V=s(z.exports),H=(function(){function t(){this.tasks=[]}t.prototype.promise=function(){return V(this.tasks)},t.prototype.tapPromise=function(t,e){var n=this;this.tasks.push((function(o){return r(n,void 0,void 0,(function(){return i(this,(function(n){switch(n.label){case 0:return[4,e()];case 1:return n.sent(),o(null,t),[2]}}))}))}))}}(),{exports:{}});(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=R.exports,r=l(n),i=L.exports,o=l(i),a=f,s=l(a),u=A.exports,c=l(u);function l(t){return t&&t.__esModule?t:{default:t}}function h(t,e){if(e=(0,r["default"])(e),!Array.isArray(t))return e(new Error("First argument to waterfall must be an array of functions"));if(!t.length)return e();var n=0;function i(e){var r=(0,s["default"])(t[n++]);r.apply(void 0,e.concat([(0,o["default"])(a)]))}function a(r){var o=[],a=arguments.length-1;while(a-- >0)o[a]=arguments[a+1];if(!1!==r)return r||n===t.length?e.apply(void 0,[r].concat(o)):void i(o)}i([])}e["default"]=(0,c["default"])(h),t.exports=e["default"]})(H,H.exports);var G=s(H.exports),W=(function(){function t(){this.tasks=[]}t.prototype.call=function(){return G(this.tasks)},t.prototype.tap=function(t,e){0===this.tasks.length?this.tasks.push((function(t){var n=e();t(!!n&&null,n)})):this.tasks.push((function(n,r){var i=e.apply(void 0,a([],o(n),!1));r(!!i&&null,t)}))}}(),function(){function t(){this.tasks=[]}return t.prototype.call=function(){return F(this.tasks)},t.prototype.tap=function(t,e){this.tasks.push((function(n){var r=e();n(r,t)}))},t}()),Z=function(){function t(){this.args=[],this.tasks=[]}return t.prototype.promise=function(){for(var t=arguments,e=[],n=0;n<arguments.length;n++)e[n]=t[n];return this.args=e,F(this.tasks)},t.prototype.tapPromise=function(t,e){var n=this;this.tasks.push((function(s){return r(n,void 0,void 0,(function(){return i(this,(function(n){switch(n.label){case 0:return[4,e.apply(void 0,a([],o(this.args),!1))];case 1:return n.sent(),s(null,t),[2]}}))}))}))},t}(),Y=function(){function t(){this.args=[],this.tasks=[]}return t.prototype.promise=function(){for(var t=arguments,e=[],n=0;n<arguments.length;n++)e[n]=t[n];return this.args=e,F(this.tasks)},t.prototype.tapPromise=function(t,e){var n=this;this.tasks.push((function(s){return r(n,void 0,void 0,(function(){var n;return i(this,(function(r){switch(r.label){case 0:return[4,e.apply(void 0,a([],o(this.args),!1))];case 1:return n=r.sent(),s(n,t),[2]}}))}))}))},t}(),X=function(){function t(){this.tasks=[]}return t.prototype.promise=function(){return G(this.tasks)},t.prototype.tapPromise=function(t,e){0===this.tasks.length?this.tasks.push((function(t){e().then((function(e){t(null,e)}))})):this.tasks.push((function(t,n){e(t).then((function(t){n(null,t)}))}))},t}()}).call(this,n("Q2Ig"))},xrYK:function(t,e){var n={}.toString;t.exports=function(t){return n.call(t).slice(8,-1)}},xs3f:function(t,e,n){var r=n("2oRo"),i=n("zk60"),o="__core-js_shared__",a=r[o]||i(o,{});t.exports=a},y1pI:function(t,e,n){var r=n("ljhN");function i(t,e){var n=t.length;while(n--)if(r(t[n][0],e))return n;return-1}t.exports=i},yGk4:function(t,e,n){var r=n("Cwc5"),i=n("Kz5y"),o=r(i,"Set");t.exports=o},yMAV:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Plan=void 0;var r=function(){function t(t,e){this.parentContext=t,this.rootRequest=e}return t}();e.Plan=r},yNLB:function(t,e,n){var r=n("0Dky"),i=n("WJkJ"),o="\u200b\x85\u180e";t.exports=function(t){return r((function(){return!!i[t]()||o[t]()!=o||i[t].name!==t}))}},yP5f:function(t,e,n){var r=n("+K+b");function i(t,e){var n=e?r(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}t.exports=i},yXV3:function(t,e,n){"use strict";var r=n("I+eb"),i=n("TWQb").indexOf,o=n("pkCn"),a=n("rkAj"),s=[].indexOf,u=!!s&&1/[1].indexOf(1,-0)<0,c=o("indexOf"),l=a("indexOf",{ACCESSORS:!0,1:0});r({target:"Array",proto:!0,forced:u||!c||!l},{indexOf:function(t){return u?s.apply(this,arguments)||0:i(this,t,arguments.length>1?arguments[1]:void 0)}})},yl30:function(t,e,n){"use strict";var r=n("q1tI"),i=n("MgzW"),o=n("QCnb");function a(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!r)throw Error(a(227));function s(t,e,n,r,i,o,a,s,u){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(l){this.onError(l)}}var u=!1,c=null,l=!1,f=null,h={onError:function(t){u=!0,c=t}};function p(t,e,n,r,i,o,a,l,f){u=!1,c=null,s.apply(h,arguments)}function d(t,e,n,r,i,o,s,h,d){if(p.apply(this,arguments),u){if(!u)throw Error(a(198));var v=c;u=!1,c=null,l||(l=!0,f=v)}}var v=null,g=null,m=null;function y(t,e,n){var r=t.type||"unknown-event";t.currentTarget=m(n),d(r,e,void 0,t),t.currentTarget=null}var _=null,b={};function x(){if(_)for(var t in b){var e=b[t],n=_.indexOf(t);if(!(-1<n))throw Error(a(96,t));if(!E[n]){if(!e.extractEvents)throw Error(a(97,t));for(var r in E[n]=e,n=e.eventTypes,n){var i=void 0,o=n[r],s=e,u=r;if(S.hasOwnProperty(u))throw Error(a(99,u));S[u]=o;var c=o.phasedRegistrationNames;if(c){for(i in c)c.hasOwnProperty(i)&&w(c[i],s,u);i=!0}else o.registrationName?(w(o.registrationName,s,u),i=!0):i=!1;if(!i)throw Error(a(98,r,t))}}}}function w(t,e,n){if(O[t])throw Error(a(100,t));O[t]=e,C[t]=e.eventTypes[n].dependencies}var E=[],S={},O={},C={};function T(t){var e,n=!1;for(e in t)if(t.hasOwnProperty(e)){var r=t[e];if(!b.hasOwnProperty(e)||b[e]!==r){if(b[e])throw Error(a(102,e));b[e]=r,n=!0}}n&&x()}var A=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),k=null,M=null,P=null;function R(t){if(t=g(t)){if("function"!==typeof k)throw Error(a(280));var e=t.stateNode;e&&(e=v(e),k(t.stateNode,t.type,e))}}function j(t){M?P?P.push(t):P=[t]:M=t}function I(){if(M){var t=M,e=P;if(P=M=null,R(t),e)for(t=0;t<e.length;t++)R(e[t])}}function L(t,e){return t(e)}function N(t,e,n,r,i){return t(e,n,r,i)}function D(){}var F=L,B=!1,z=!1;function U(){null===M&&null===P||(D(),I())}function V(t,e,n){if(z)return t(e,n);z=!0;try{return F(t,e,n)}finally{z=!1,U()}}var H=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,G=Object.prototype.hasOwnProperty,W={},Z={};function Y(t){return!!G.call(Z,t)||!G.call(W,t)&&(H.test(t)?Z[t]=!0:(W[t]=!0,!1))}function X(t,e,n,r){if(null!==n&&0===n.type)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),"data-"!==t&&"aria-"!==t));default:return!1}}function q(t,e,n,r){if(null===e||"undefined"===typeof e||X(t,e,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!e;case 4:return!1===e;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function K(t,e,n,r,i,o){this.acceptsBooleans=2===e||3===e||4===e,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o}var Q={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(t){Q[t]=new K(t,0,!1,t,null,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(t){var e=t[0];Q[e]=new K(e,1,!1,t[1],null,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(t){Q[t]=new K(t,2,!1,t.toLowerCase(),null,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(t){Q[t]=new K(t,2,!1,t,null,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(t){Q[t]=new K(t,3,!1,t.toLowerCase(),null,!1)})),["checked","multiple","muted","selected"].forEach((function(t){Q[t]=new K(t,3,!0,t,null,!1)})),["capture","download"].forEach((function(t){Q[t]=new K(t,4,!1,t,null,!1)})),["cols","rows","size","span"].forEach((function(t){Q[t]=new K(t,6,!1,t,null,!1)})),["rowSpan","start"].forEach((function(t){Q[t]=new K(t,5,!1,t.toLowerCase(),null,!1)}));var $=/[\-:]([a-z])/g;function J(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(t){var e=t.replace($,J);Q[e]=new K(e,1,!1,t,null,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(t){var e=t.replace($,J);Q[e]=new K(e,1,!1,t,"http://www.w3.org/1999/xlink",!1)})),["xml:base","xml:lang","xml:space"].forEach((function(t){var e=t.replace($,J);Q[e]=new K(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1)})),["tabIndex","crossOrigin"].forEach((function(t){Q[t]=new K(t,1,!1,t.toLowerCase(),null,!1)})),Q.xlinkHref=new K("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0),["src","href","action","formAction"].forEach((function(t){Q[t]=new K(t,1,!1,t.toLowerCase(),null,!0)}));var tt=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function et(t,e,n,r){var i=Q.hasOwnProperty(e)?Q[e]:null,o=null!==i?0===i.type:!r&&(2<e.length&&("o"===e[0]||"O"===e[0])&&("n"===e[1]||"N"===e[1]));o||(q(e,n,i,r)&&(n=null),r||null===i?Y(e)&&(null===n?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=null===n?3!==i.type&&"":n:(e=i.attributeName,r=i.attributeNamespace,null===n?t.removeAttribute(e):(i=i.type,n=3===i||4===i&&!0===n?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}tt.hasOwnProperty("ReactCurrentDispatcher")||(tt.ReactCurrentDispatcher={current:null}),tt.hasOwnProperty("ReactCurrentBatchConfig")||(tt.ReactCurrentBatchConfig={suspense:null});var nt=/^(.*)[\\\/]/,rt="function"===typeof Symbol&&Symbol.for,it=rt?Symbol.for("react.element"):60103,ot=rt?Symbol.for("react.portal"):60106,at=rt?Symbol.for("react.fragment"):60107,st=rt?Symbol.for("react.strict_mode"):60108,ut=rt?Symbol.for("react.profiler"):60114,ct=rt?Symbol.for("react.provider"):60109,lt=rt?Symbol.for("react.context"):60110,ft=rt?Symbol.for("react.concurrent_mode"):60111,ht=rt?Symbol.for("react.forward_ref"):60112,pt=rt?Symbol.for("react.suspense"):60113,dt=rt?Symbol.for("react.suspense_list"):60120,vt=rt?Symbol.for("react.memo"):60115,gt=rt?Symbol.for("react.lazy"):60116,mt=rt?Symbol.for("react.block"):60121,yt="function"===typeof Symbol&&Symbol.iterator;function _t(t){return null===t||"object"!==typeof t?null:(t=yt&&t[yt]||t["@@iterator"],"function"===typeof t?t:null)}function bt(t){if(-1===t._status){t._status=0;var e=t._ctor;e=e(),t._result=e,e.then((function(e){0===t._status&&(e=e.default,t._status=1,t._result=e)}),(function(e){0===t._status&&(t._status=2,t._result=e)}))}}function xt(t){if(null==t)return null;if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t;switch(t){case at:return"Fragment";case ot:return"Portal";case ut:return"Profiler";case st:return"StrictMode";case pt:return"Suspense";case dt:return"SuspenseList"}if("object"===typeof t)switch(t.$$typeof){case lt:return"Context.Consumer";case ct:return"Context.Provider";case ht:var e=t.render;return e=e.displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case vt:return xt(t.type);case mt:return xt(t.render);case gt:if(t=1===t._status?t._result:null)return xt(t)}return null}function wt(t){var e="";do{t:switch(t.tag){case 3:case 4:case 6:case 7:case 10:case 9:var n="";break t;default:var r=t._debugOwner,i=t._debugSource,o=xt(t.type);n=null,r&&(n=xt(r.type)),r=o,o="",i?o=" (at "+i.fileName.replace(nt,"")+":"+i.lineNumber+")":n&&(o=" (created by "+n+")"),n="\n    in "+(r||"Unknown")+o}e+=n,t=t.return}while(t);return e}function Et(t){switch(typeof t){case"boolean":case"number":case"object":case"string":case"undefined":return t;default:return""}}function St(t){var e=t.type;return(t=t.nodeName)&&"input"===t.toLowerCase()&&("checkbox"===e||"radio"===e)}function Ot(t){var e=St(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(t){r=""+t,o.call(this,t)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(t){r=""+t},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Ct(t){t._valueTracker||(t._valueTracker=Ot(t))}function Tt(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=St(t)?t.checked?"true":"false":t.value),t=r,t!==n&&(e.setValue(t),!0)}function At(t,e){var n=e.checked;return i({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:t._wrapperState.initialChecked})}function kt(t,e){var n=null==e.defaultValue?"":e.defaultValue,r=null!=e.checked?e.checked:e.defaultChecked;n=Et(null!=e.value?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===e.type||"radio"===e.type?null!=e.checked:null!=e.value}}function Mt(t,e){e=e.checked,null!=e&&et(t,"checked",e,!1)}function Pt(t,e){Mt(t,e);var n=Et(e.value),r=e.type;if(null!=n)"number"===r?(0===n&&""===t.value||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if("submit"===r||"reset"===r)return void t.removeAttribute("value");e.hasOwnProperty("value")?jt(t,e.type,n):e.hasOwnProperty("defaultValue")&&jt(t,e.type,Et(e.defaultValue)),null==e.checked&&null!=e.defaultChecked&&(t.defaultChecked=!!e.defaultChecked)}function Rt(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!("submit"!==r&&"reset"!==r||void 0!==e.value&&null!==e.value))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,""!==n&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,""!==n&&(t.name=n)}function jt(t,e,n){"number"===e&&t.ownerDocument.activeElement===t||(null==n?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}function It(t){var e="";return r.Children.forEach(t,(function(t){null!=t&&(e+=t)})),e}function Lt(t,e){return t=i({children:void 0},e),(e=It(e.children))&&(t.children=e),t}function Nt(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Et(n),e=null,i=0;i<t.length;i++){if(t[i].value===n)return t[i].selected=!0,void(r&&(t[i].defaultSelected=!0));null!==e||t[i].disabled||(e=t[i])}null!==e&&(e.selected=!0)}}function Dt(t,e){if(null!=e.dangerouslySetInnerHTML)throw Error(a(91));return i({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Ft(t,e){var n=e.value;if(null==n){if(n=e.children,e=e.defaultValue,null!=n){if(null!=e)throw Error(a(92));if(Array.isArray(n)){if(!(1>=n.length))throw Error(a(93));n=n[0]}e=n}null==e&&(e=""),n=e}t._wrapperState={initialValue:Et(n)}}function Bt(t,e){var n=Et(e.value),r=Et(e.defaultValue);null!=n&&(n=""+n,n!==t.value&&(t.value=n),null==e.defaultValue&&t.defaultValue!==n&&(t.defaultValue=n)),null!=r&&(t.defaultValue=""+r)}function zt(t){var e=t.textContent;e===t._wrapperState.initialValue&&""!==e&&null!==e&&(t.value=e)}var Ut={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};function Vt(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ht(t,e){return null==t||"http://www.w3.org/1999/xhtml"===t?Vt(e):"http://www.w3.org/2000/svg"===t&&"foreignObject"===e?"http://www.w3.org/1999/xhtml":t}var Gt,Wt=function(t){return"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction((function(){return t(e,n,r,i)}))}:t}((function(t,e){if(t.namespaceURI!==Ut.svg||"innerHTML"in t)t.innerHTML=e;else{for(Gt=Gt||document.createElement("div"),Gt.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Gt.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}}));function Zt(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&3===n.nodeType)return void(n.nodeValue=e)}t.textContent=e}function Yt(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Xt={animationend:Yt("Animation","AnimationEnd"),animationiteration:Yt("Animation","AnimationIteration"),animationstart:Yt("Animation","AnimationStart"),transitionend:Yt("Transition","TransitionEnd")},qt={},Kt={};function Qt(t){if(qt[t])return qt[t];if(!Xt[t])return t;var e,n=Xt[t];for(e in n)if(n.hasOwnProperty(e)&&e in Kt)return qt[t]=n[e];return t}A&&(Kt=document.createElement("div").style,"AnimationEvent"in window||(delete Xt.animationend.animation,delete Xt.animationiteration.animation,delete Xt.animationstart.animation),"TransitionEvent"in window||delete Xt.transitionend.transition);var $t=Qt("animationend"),Jt=Qt("animationiteration"),te=Qt("animationstart"),ee=Qt("transitionend"),ne="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),re=new("function"===typeof WeakMap?WeakMap:Map);function ie(t){var e=re.get(t);return void 0===e&&(e=new Map,re.set(t,e)),e}function oe(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do{e=t,0!==(1026&e.effectTag)&&(n=e.return),t=e.return}while(t)}return 3===e.tag?n:null}function ae(t){if(13===t.tag){var e=t.memoizedState;if(null===e&&(t=t.alternate,null!==t&&(e=t.memoizedState)),null!==e)return e.dehydrated}return null}function se(t){if(oe(t)!==t)throw Error(a(188))}function ue(t){var e=t.alternate;if(!e){if(e=oe(t),null===e)throw Error(a(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(r=i.return,null!==r){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return se(i),t;if(o===r)return se(i),e;o=o.sibling}throw Error(a(188))}if(n.return!==r.return)n=i,r=o;else{for(var s=!1,u=i.child;u;){if(u===n){s=!0,n=i,r=o;break}if(u===r){s=!0,r=i,n=o;break}u=u.sibling}if(!s){for(u=o.child;u;){if(u===n){s=!0,n=o,r=i;break}if(u===r){s=!0,r=o,n=i;break}u=u.sibling}if(!s)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?t:e}function ce(t){if(t=ue(t),!t)return null;for(var e=t;;){if(5===e.tag||6===e.tag)return e;if(e.child)e.child.return=e,e=e.child;else{if(e===t)break;for(;!e.sibling;){if(!e.return||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}}return null}function le(t,e){if(null==e)throw Error(a(30));return null==t?e:Array.isArray(t)?Array.isArray(e)?(t.push.apply(t,e),t):(t.push(e),t):Array.isArray(e)?[t].concat(e):[t,e]}function fe(t,e,n){Array.isArray(t)?t.forEach(e,n):t&&e.call(n,t)}var he=null;function pe(t){if(t){var e=t._dispatchListeners,n=t._dispatchInstances;if(Array.isArray(e))for(var r=0;r<e.length&&!t.isPropagationStopped();r++)y(t,e[r],n[r]);else e&&y(t,e,n);t._dispatchListeners=null,t._dispatchInstances=null,t.isPersistent()||t.constructor.release(t)}}function de(t){if(null!==t&&(he=le(he,t)),t=he,he=null,t){if(fe(t,pe),he)throw Error(a(95));if(l)throw t=f,l=!1,f=null,t}}function ve(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),3===t.nodeType?t.parentNode:t}function ge(t){if(!A)return!1;t="on"+t;var e=t in document;return e||(e=document.createElement("div"),e.setAttribute(t,"return;"),e="function"===typeof e[t]),e}var me=[];function ye(t){t.topLevelType=null,t.nativeEvent=null,t.targetInst=null,t.ancestors.length=0,10>me.length&&me.push(t)}function _e(t,e,n,r){if(me.length){var i=me.pop();return i.topLevelType=t,i.eventSystemFlags=r,i.nativeEvent=e,i.targetInst=n,i}return{topLevelType:t,eventSystemFlags:r,nativeEvent:e,targetInst:n,ancestors:[]}}function be(t){var e=t.targetInst,n=e;do{if(!n){t.ancestors.push(n);break}var r=n;if(3===r.tag)r=r.stateNode.containerInfo;else{for(;r.return;)r=r.return;r=3!==r.tag?null:r.stateNode.containerInfo}if(!r)break;e=n.tag,5!==e&&6!==e||t.ancestors.push(n),n=Un(r)}while(n);for(n=0;n<t.ancestors.length;n++){e=t.ancestors[n];var i=ve(t.nativeEvent);r=t.topLevelType;var o=t.nativeEvent,a=t.eventSystemFlags;0===n&&(a|=64);for(var s=null,u=0;u<E.length;u++){var c=E[u];c&&(c=c.extractEvents(r,e,o,i,a))&&(s=le(s,c))}de(s)}}function xe(t,e,n){if(!n.has(t)){switch(t){case"scroll":rn(e,"scroll",!0);break;case"focus":case"blur":rn(e,"focus",!0),rn(e,"blur",!0),n.set("blur",null),n.set("focus",null);break;case"cancel":case"close":ge(t)&&rn(e,t,!0);break;case"invalid":case"submit":case"reset":break;default:-1===ne.indexOf(t)&&nn(t,e)}n.set(t,null)}}var we,Ee,Se,Oe=!1,Ce=[],Te=null,Ae=null,ke=null,Me=new Map,Pe=new Map,Re=[],je="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput close cancel copy cut paste click change contextmenu reset submit".split(" "),Ie="focus blur dragenter dragleave mouseover mouseout pointerover pointerout gotpointercapture lostpointercapture".split(" ");function Le(t,e){var n=ie(e);je.forEach((function(t){xe(t,e,n)})),Ie.forEach((function(t){xe(t,e,n)}))}function Ne(t,e,n,r,i){return{blockedOn:t,topLevelType:e,eventSystemFlags:32|n,nativeEvent:i,container:r}}function De(t,e){switch(t){case"focus":case"blur":Te=null;break;case"dragenter":case"dragleave":Ae=null;break;case"mouseover":case"mouseout":ke=null;break;case"pointerover":case"pointerout":Me.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pe.delete(e.pointerId)}}function Fe(t,e,n,r,i,o){return null===t||t.nativeEvent!==o?(t=Ne(e,n,r,i,o),null!==e&&(e=Vn(e),null!==e&&Ee(e)),t):(t.eventSystemFlags|=r,t)}function Be(t,e,n,r,i){switch(e){case"focus":return Te=Fe(Te,t,e,n,r,i),!0;case"dragenter":return Ae=Fe(Ae,t,e,n,r,i),!0;case"mouseover":return ke=Fe(ke,t,e,n,r,i),!0;case"pointerover":var o=i.pointerId;return Me.set(o,Fe(Me.get(o)||null,t,e,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,Pe.set(o,Fe(Pe.get(o)||null,t,e,n,r,i)),!0}return!1}function ze(t){var e=Un(t.target);if(null!==e){var n=oe(e);if(null!==n)if(e=n.tag,13===e){if(e=ae(n),null!==e)return t.blockedOn=e,void o.unstable_runWithPriority(t.priority,(function(){Se(n)}))}else if(3===e&&n.stateNode.hydrate)return void(t.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}t.blockedOn=null}function Ue(t){if(null!==t.blockedOn)return!1;var e=un(t.topLevelType,t.eventSystemFlags,t.container,t.nativeEvent);if(null!==e){var n=Vn(e);return null!==n&&Ee(n),t.blockedOn=e,!1}return!0}function Ve(t,e,n){Ue(t)&&n.delete(e)}function He(){for(Oe=!1;0<Ce.length;){var t=Ce[0];if(null!==t.blockedOn){t=Vn(t.blockedOn),null!==t&&we(t);break}var e=un(t.topLevelType,t.eventSystemFlags,t.container,t.nativeEvent);null!==e?t.blockedOn=e:Ce.shift()}null!==Te&&Ue(Te)&&(Te=null),null!==Ae&&Ue(Ae)&&(Ae=null),null!==ke&&Ue(ke)&&(ke=null),Me.forEach(Ve),Pe.forEach(Ve)}function Ge(t,e){t.blockedOn===e&&(t.blockedOn=null,Oe||(Oe=!0,o.unstable_scheduleCallback(o.unstable_NormalPriority,He)))}function We(t){function e(e){return Ge(e,t)}if(0<Ce.length){Ge(Ce[0],t);for(var n=1;n<Ce.length;n++){var r=Ce[n];r.blockedOn===t&&(r.blockedOn=null)}}for(null!==Te&&Ge(Te,t),null!==Ae&&Ge(Ae,t),null!==ke&&Ge(ke,t),Me.forEach(e),Pe.forEach(e),n=0;n<Re.length;n++)r=Re[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Re.length&&(n=Re[0],null===n.blockedOn);)ze(n),null===n.blockedOn&&Re.shift()}var Ze={},Ye=new Map,Xe=new Map,qe=["abort","abort",$t,"animationEnd",Jt,"animationIteration",te,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",ee,"transitionEnd","waiting","waiting"];function Ke(t,e){for(var n=0;n<t.length;n+=2){var r=t[n],i=t[n+1],o="on"+(i[0].toUpperCase()+i.slice(1));o={phasedRegistrationNames:{bubbled:o,captured:o+"Capture"},dependencies:[r],eventPriority:e},Xe.set(r,e),Ye.set(r,o),Ze[i]=o}}Ke("blur blur cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focus focus input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0),Ke("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1),Ke(qe,2);for(var Qe="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),$e=0;$e<Qe.length;$e++)Xe.set(Qe[$e],0);var Je=o.unstable_UserBlockingPriority,tn=o.unstable_runWithPriority,en=!0;function nn(t,e){rn(e,t,!1)}function rn(t,e,n){var r=Xe.get(e);switch(void 0===r?2:r){case 0:r=on.bind(null,e,1,t);break;case 1:r=an.bind(null,e,1,t);break;default:r=sn.bind(null,e,1,t)}n?t.addEventListener(e,r,!0):t.addEventListener(e,r,!1)}function on(t,e,n,r){B||D();var i=sn,o=B;B=!0;try{N(i,t,e,n,r)}finally{(B=o)||U()}}function an(t,e,n,r){tn(Je,sn.bind(null,t,e,n,r))}function sn(t,e,n,r){if(en)if(0<Ce.length&&-1<je.indexOf(t))t=Ne(null,t,e,n,r),Ce.push(t);else{var i=un(t,e,n,r);if(null===i)De(t,r);else if(-1<je.indexOf(t))t=Ne(i,t,e,n,r),Ce.push(t);else if(!Be(i,t,e,n,r)){De(t,r),t=_e(t,r,null,e);try{V(be,t)}finally{ye(t)}}}}function un(t,e,n,r){if(n=ve(r),n=Un(n),null!==n){var i=oe(n);if(null===i)n=null;else{var o=i.tag;if(13===o){if(n=ae(i),null!==n)return n;n=null}else if(3===o){if(i.stateNode.hydrate)return 3===i.tag?i.stateNode.containerInfo:null;n=null}else i!==n&&(n=null)}}t=_e(t,r,n,e);try{V(be,t)}finally{ye(t)}return null}var cn={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ln=["Webkit","ms","Moz","O"];function fn(t,e,n){return null==e||"boolean"===typeof e||""===e?"":n||"number"!==typeof e||0===e||cn.hasOwnProperty(t)&&cn[t]?(""+e).trim():e+"px"}function hn(t,e){for(var n in t=t.style,e)if(e.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=fn(n,e[n],r);"float"===n&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}Object.keys(cn).forEach((function(t){ln.forEach((function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),cn[e]=cn[t]}))}));var pn=i({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function dn(t,e){if(e){if(pn[t]&&(null!=e.children||null!=e.dangerouslySetInnerHTML))throw Error(a(137,t,""));if(null!=e.dangerouslySetInnerHTML){if(null!=e.children)throw Error(a(60));if("object"!==typeof e.dangerouslySetInnerHTML||!("__html"in e.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=e.style&&"object"!==typeof e.style)throw Error(a(62,""))}}function vn(t,e){if(-1===t.indexOf("-"))return"string"===typeof e.is;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var gn=Ut.html;function mn(t,e){t=9===t.nodeType||11===t.nodeType?t:t.ownerDocument;var n=ie(t);e=C[e];for(var r=0;r<e.length;r++)xe(e[r],t,n)}function yn(){}function _n(t){if(t=t||("undefined"!==typeof document?document:void 0),"undefined"===typeof t)return null;try{return t.activeElement||t.body}catch(e){return t.body}}function bn(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function xn(t,e){var n,r=bn(t);for(t=0;r;){if(3===r.nodeType){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}t:{for(;r;){if(r.nextSibling){r=r.nextSibling;break t}r=r.parentNode}r=void 0}r=bn(r)}}function wn(t,e){return!(!t||!e)&&(t===e||(!t||3!==t.nodeType)&&(e&&3===e.nodeType?wn(t,e.parentNode):"contains"in t?t.contains(e):!!t.compareDocumentPosition&&!!(16&t.compareDocumentPosition(e))))}function En(){for(var t=window,e=_n();e instanceof t.HTMLIFrameElement;){try{var n="string"===typeof e.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=e.contentWindow,e=_n(t.document)}return e}function Sn(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&("input"===e&&("text"===t.type||"search"===t.type||"tel"===t.type||"url"===t.type||"password"===t.type)||"textarea"===e||"true"===t.contentEditable)}var On="$",Cn="/$",Tn="$?",An="$!",kn=null,Mn=null;function Pn(t,e){switch(t){case"button":case"input":case"select":case"textarea":return!!e.autoFocus}return!1}function Rn(t,e){return"textarea"===t||"option"===t||"noscript"===t||"string"===typeof e.children||"number"===typeof e.children||"object"===typeof e.dangerouslySetInnerHTML&&null!==e.dangerouslySetInnerHTML&&null!=e.dangerouslySetInnerHTML.__html}var jn="function"===typeof setTimeout?setTimeout:void 0,In="function"===typeof clearTimeout?clearTimeout:void 0;function Ln(t){for(;null!=t;t=t.nextSibling){var e=t.nodeType;if(1===e||3===e)break}return t}function Nn(t){t=t.previousSibling;for(var e=0;t;){if(8===t.nodeType){var n=t.data;if(n===On||n===An||n===Tn){if(0===e)return t;e--}else n===Cn&&e++}t=t.previousSibling}return null}var Dn=Math.random().toString(36).slice(2),Fn="__reactInternalInstance$"+Dn,Bn="__reactEventHandlers$"+Dn,zn="__reactContainere$"+Dn;function Un(t){var e=t[Fn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[zn]||n[Fn]){if(n=e.alternate,null!==e.child||null!==n&&null!==n.child)for(t=Nn(t);null!==t;){if(n=t[Fn])return n;t=Nn(t)}return e}t=n,n=t.parentNode}return null}function Vn(t){return t=t[Fn]||t[zn],!t||5!==t.tag&&6!==t.tag&&13!==t.tag&&3!==t.tag?null:t}function Hn(t){if(5===t.tag||6===t.tag)return t.stateNode;throw Error(a(33))}function Gn(t){return t[Bn]||null}function Wn(t){do{t=t.return}while(t&&5!==t.tag);return t||null}function Zn(t,e){var n=t.stateNode;if(!n)return null;var r=v(n);if(!r)return null;n=r[e];t:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!("button"===t||"input"===t||"select"===t||"textarea"===t)),t=!r;break t;default:t=!1}if(t)return null;if(n&&"function"!==typeof n)throw Error(a(231,e,typeof n));return n}function Yn(t,e,n){(e=Zn(t,n.dispatchConfig.phasedRegistrationNames[e]))&&(n._dispatchListeners=le(n._dispatchListeners,e),n._dispatchInstances=le(n._dispatchInstances,t))}function Xn(t){if(t&&t.dispatchConfig.phasedRegistrationNames){for(var e=t._targetInst,n=[];e;)n.push(e),e=Wn(e);for(e=n.length;0<e--;)Yn(n[e],"captured",t);for(e=0;e<n.length;e++)Yn(n[e],"bubbled",t)}}function qn(t,e,n){t&&n&&n.dispatchConfig.registrationName&&(e=Zn(t,n.dispatchConfig.registrationName))&&(n._dispatchListeners=le(n._dispatchListeners,e),n._dispatchInstances=le(n._dispatchInstances,t))}function Kn(t){t&&t.dispatchConfig.registrationName&&qn(t._targetInst,null,t)}function Qn(t){fe(t,Xn)}var $n=null,Jn=null,tr=null;function er(){if(tr)return tr;var t,e,n=Jn,r=n.length,i="value"in $n?$n.value:$n.textContent,o=i.length;for(t=0;t<r&&n[t]===i[t];t++);var a=r-t;for(e=1;e<=a&&n[r-e]===i[o-e];e++);return tr=i.slice(t,1<e?1-e:void 0)}function nr(){return!0}function rr(){return!1}function ir(t,e,n,r){for(var i in this.dispatchConfig=t,this._targetInst=e,this.nativeEvent=n,t=this.constructor.Interface,t)t.hasOwnProperty(i)&&((e=t[i])?this[i]=e(n):"target"===i?this.target=r:this[i]=n[i]);return this.isDefaultPrevented=(null!=n.defaultPrevented?n.defaultPrevented:!1===n.returnValue)?nr:rr,this.isPropagationStopped=rr,this}function or(t,e,n,r){if(this.eventPool.length){var i=this.eventPool.pop();return this.call(i,t,e,n,r),i}return new this(t,e,n,r)}function ar(t){if(!(t instanceof this))throw Error(a(279));t.destructor(),10>this.eventPool.length&&this.eventPool.push(t)}function sr(t){t.eventPool=[],t.getPooled=or,t.release=ar}i(ir.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():"unknown"!==typeof t.returnValue&&(t.returnValue=!1),this.isDefaultPrevented=nr)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():"unknown"!==typeof t.cancelBubble&&(t.cancelBubble=!0),this.isPropagationStopped=nr)},persist:function(){this.isPersistent=nr},isPersistent:rr,destructor:function(){var t,e=this.constructor.Interface;for(t in e)this[t]=null;this.nativeEvent=this._targetInst=this.dispatchConfig=null,this.isPropagationStopped=this.isDefaultPrevented=rr,this._dispatchInstances=this._dispatchListeners=null}}),ir.Interface={type:null,target:null,currentTarget:function(){return null},eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null},ir.extend=function(t){function e(){}function n(){return r.apply(this,arguments)}var r=this;e.prototype=r.prototype;var o=new e;return i(o,n.prototype),n.prototype=o,n.prototype.constructor=n,n.Interface=i({},r.Interface,t),n.extend=r.extend,sr(n),n},sr(ir);var ur=ir.extend({data:null}),cr=ir.extend({data:null}),lr=[9,13,27,32],fr=A&&"CompositionEvent"in window,hr=null;A&&"documentMode"in document&&(hr=document.documentMode);var pr=A&&"TextEvent"in window&&!hr,dr=A&&(!fr||hr&&8<hr&&11>=hr),vr=String.fromCharCode(32),gr={beforeInput:{phasedRegistrationNames:{bubbled:"onBeforeInput",captured:"onBeforeInputCapture"},dependencies:["compositionend","keypress","textInput","paste"]},compositionEnd:{phasedRegistrationNames:{bubbled:"onCompositionEnd",captured:"onCompositionEndCapture"},dependencies:"blur compositionend keydown keypress keyup mousedown".split(" ")},compositionStart:{phasedRegistrationNames:{bubbled:"onCompositionStart",captured:"onCompositionStartCapture"},dependencies:"blur compositionstart keydown keypress keyup mousedown".split(" ")},compositionUpdate:{phasedRegistrationNames:{bubbled:"onCompositionUpdate",captured:"onCompositionUpdateCapture"},dependencies:"blur compositionupdate keydown keypress keyup mousedown".split(" ")}},mr=!1;function yr(t,e){switch(t){case"keyup":return-1!==lr.indexOf(e.keyCode);case"keydown":return 229!==e.keyCode;case"keypress":case"mousedown":case"blur":return!0;default:return!1}}function _r(t){return t=t.detail,"object"===typeof t&&"data"in t?t.data:null}var br=!1;function xr(t,e){switch(t){case"compositionend":return _r(e);case"keypress":return 32!==e.which?null:(mr=!0,vr);case"textInput":return t=e.data,t===vr&&mr?null:t;default:return null}}function wr(t,e){if(br)return"compositionend"===t||!fr&&yr(t,e)?(t=er(),tr=Jn=$n=null,br=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return dr&&"ko"!==e.locale?null:e.data;default:return null}}var Er={eventTypes:gr,extractEvents:function(t,e,n,r){var i;if(fr)t:{switch(t){case"compositionstart":var o=gr.compositionStart;break t;case"compositionend":o=gr.compositionEnd;break t;case"compositionupdate":o=gr.compositionUpdate;break t}o=void 0}else br?yr(t,n)&&(o=gr.compositionEnd):"keydown"===t&&229===n.keyCode&&(o=gr.compositionStart);return o?(dr&&"ko"!==n.locale&&(br||o!==gr.compositionStart?o===gr.compositionEnd&&br&&(i=er()):($n=r,Jn="value"in $n?$n.value:$n.textContent,br=!0)),o=ur.getPooled(o,e,n,r),i?o.data=i:(i=_r(n),null!==i&&(o.data=i)),Qn(o),i=o):i=null,(t=pr?xr(t,n):wr(t,n))?(e=cr.getPooled(gr.beforeInput,e,n,r),e.data=t,Qn(e)):e=null,null===i?e:null===e?i:[i,e]}},Sr={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Or(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return"input"===e?!!Sr[t.type]:"textarea"===e}var Cr={change:{phasedRegistrationNames:{bubbled:"onChange",captured:"onChangeCapture"},dependencies:"blur change click focus input keydown keyup selectionchange".split(" ")}};function Tr(t,e,n){return t=ir.getPooled(Cr.change,t,e,n),t.type="change",j(n),Qn(t),t}var Ar=null,kr=null;function Mr(t){de(t)}function Pr(t){var e=Hn(t);if(Tt(e))return t}function Rr(t,e){if("change"===t)return e}var jr=!1;function Ir(){Ar&&(Ar.detachEvent("onpropertychange",Lr),kr=Ar=null)}function Lr(t){if("value"===t.propertyName&&Pr(kr))if(t=Tr(kr,t,ve(t)),B)de(t);else{B=!0;try{L(Mr,t)}finally{B=!1,U()}}}function Nr(t,e,n){"focus"===t?(Ir(),Ar=e,kr=n,Ar.attachEvent("onpropertychange",Lr)):"blur"===t&&Ir()}function Dr(t){if("selectionchange"===t||"keyup"===t||"keydown"===t)return Pr(kr)}function Fr(t,e){if("click"===t)return Pr(e)}function Br(t,e){if("input"===t||"change"===t)return Pr(e)}A&&(jr=ge("input")&&(!document.documentMode||9<document.documentMode));var zr={eventTypes:Cr,_isInputEventSupported:jr,extractEvents:function(t,e,n,r){var i=e?Hn(e):window,o=i.nodeName&&i.nodeName.toLowerCase();if("select"===o||"input"===o&&"file"===i.type)var a=Rr;else if(Or(i))if(jr)a=Br;else{a=Dr;var s=Nr}else(o=i.nodeName)&&"input"===o.toLowerCase()&&("checkbox"===i.type||"radio"===i.type)&&(a=Fr);if(a&&(a=a(t,e)))return Tr(a,n,r);s&&s(t,i,e),"blur"===t&&(t=i._wrapperState)&&t.controlled&&"number"===i.type&&jt(i,"number",i.value)}},Ur=ir.extend({view:null,detail:null}),Vr={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Hr(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):!!(t=Vr[t])&&!!e[t]}function Gr(){return Hr}var Wr=0,Zr=0,Yr=!1,Xr=!1,qr=Ur.extend({screenX:null,screenY:null,clientX:null,clientY:null,pageX:null,pageY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:Gr,button:null,buttons:null,relatedTarget:function(t){return t.relatedTarget||(t.fromElement===t.srcElement?t.toElement:t.fromElement)},movementX:function(t){if("movementX"in t)return t.movementX;var e=Wr;return Wr=t.screenX,Yr?"mousemove"===t.type?t.screenX-e:0:(Yr=!0,0)},movementY:function(t){if("movementY"in t)return t.movementY;var e=Zr;return Zr=t.screenY,Xr?"mousemove"===t.type?t.screenY-e:0:(Xr=!0,0)}}),Kr=qr.extend({pointerId:null,width:null,height:null,pressure:null,tangentialPressure:null,tiltX:null,tiltY:null,twist:null,pointerType:null,isPrimary:null}),Qr={mouseEnter:{registrationName:"onMouseEnter",dependencies:["mouseout","mouseover"]},mouseLeave:{registrationName:"onMouseLeave",dependencies:["mouseout","mouseover"]},pointerEnter:{registrationName:"onPointerEnter",dependencies:["pointerout","pointerover"]},pointerLeave:{registrationName:"onPointerLeave",dependencies:["pointerout","pointerover"]}},$r={eventTypes:Qr,extractEvents:function(t,e,n,r,i){var o="mouseover"===t||"pointerover"===t,a="mouseout"===t||"pointerout"===t;if(o&&0===(32&i)&&(n.relatedTarget||n.fromElement)||!a&&!o)return null;if(o=r.window===r?r:(o=r.ownerDocument)?o.defaultView||o.parentWindow:window,a){if(a=e,e=(e=n.relatedTarget||n.toElement)?Un(e):null,null!==e){var s=oe(e);(e!==s||5!==e.tag&&6!==e.tag)&&(e=null)}}else a=null;if(a===e)return null;if("mouseout"===t||"mouseover"===t)var u=qr,c=Qr.mouseLeave,l=Qr.mouseEnter,f="mouse";else"pointerout"!==t&&"pointerover"!==t||(u=Kr,c=Qr.pointerLeave,l=Qr.pointerEnter,f="pointer");if(t=null==a?o:Hn(a),o=null==e?o:Hn(e),c=u.getPooled(c,a,n,r),c.type=f+"leave",c.target=t,c.relatedTarget=o,n=u.getPooled(l,e,n,r),n.type=f+"enter",n.target=o,n.relatedTarget=t,r=a,f=e,r&&f)t:{for(u=r,l=f,a=0,t=u;t;t=Wn(t))a++;for(t=0,e=l;e;e=Wn(e))t++;for(;0<a-t;)u=Wn(u),a--;for(;0<t-a;)l=Wn(l),t--;for(;a--;){if(u===l||u===l.alternate)break t;u=Wn(u),l=Wn(l)}u=null}else u=null;for(l=u,u=[];r&&r!==l;){if(a=r.alternate,null!==a&&a===l)break;u.push(r),r=Wn(r)}for(r=[];f&&f!==l;){if(a=f.alternate,null!==a&&a===l)break;r.push(f),f=Wn(f)}for(f=0;f<u.length;f++)qn(u[f],"bubbled",c);for(f=r.length;0<f--;)qn(r[f],"captured",n);return 0===(64&i)?[c]:[c,n]}};function Jr(t,e){return t===e&&(0!==t||1/t===1/e)||t!==t&&e!==e}var ti="function"===typeof Object.is?Object.is:Jr,ei=Object.prototype.hasOwnProperty;function ni(t,e){if(ti(t,e))return!0;if("object"!==typeof t||null===t||"object"!==typeof e||null===e)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++)if(!ei.call(e,n[r])||!ti(t[n[r]],e[n[r]]))return!1;return!0}var ri=A&&"documentMode"in document&&11>=document.documentMode,ii={select:{phasedRegistrationNames:{bubbled:"onSelect",captured:"onSelectCapture"},dependencies:"blur contextmenu dragend focus keydown keyup mousedown mouseup selectionchange".split(" ")}},oi=null,ai=null,si=null,ui=!1;function ci(t,e){var n=e.window===e?e.document:9===e.nodeType?e:e.ownerDocument;return ui||null==oi||oi!==_n(n)?null:(n=oi,"selectionStart"in n&&Sn(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),si&&ni(si,n)?null:(si=n,t=ir.getPooled(ii.select,ai,t,e),t.type="select",t.target=oi,Qn(t),t))}var li={eventTypes:ii,extractEvents:function(t,e,n,r,i,o){if(i=o||(r.window===r?r.document:9===r.nodeType?r:r.ownerDocument),!(o=!i)){t:{i=ie(i),o=C.onSelect;for(var a=0;a<o.length;a++)if(!i.has(o[a])){i=!1;break t}i=!0}o=!i}if(o)return null;switch(i=e?Hn(e):window,t){case"focus":(Or(i)||"true"===i.contentEditable)&&(oi=i,ai=e,si=null);break;case"blur":si=ai=oi=null;break;case"mousedown":ui=!0;break;case"contextmenu":case"mouseup":case"dragend":return ui=!1,ci(n,r);case"selectionchange":if(ri)break;case"keydown":case"keyup":return ci(n,r)}return null}},fi=ir.extend({animationName:null,elapsedTime:null,pseudoElement:null}),hi=ir.extend({clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),pi=Ur.extend({relatedTarget:null});function di(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,0===t&&13===e&&(t=13)):t=e,10===t&&(t=13),32<=t||13===t?t:0}var vi={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},gi={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},mi=Ur.extend({key:function(t){if(t.key){var e=vi[t.key]||t.key;if("Unidentified"!==e)return e}return"keypress"===t.type?(t=di(t),13===t?"Enter":String.fromCharCode(t)):"keydown"===t.type||"keyup"===t.type?gi[t.keyCode]||"Unidentified":""},location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:Gr,charCode:function(t){return"keypress"===t.type?di(t):0},keyCode:function(t){return"keydown"===t.type||"keyup"===t.type?t.keyCode:0},which:function(t){return"keypress"===t.type?di(t):"keydown"===t.type||"keyup"===t.type?t.keyCode:0}}),yi=qr.extend({dataTransfer:null}),_i=Ur.extend({touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:Gr}),bi=ir.extend({propertyName:null,elapsedTime:null,pseudoElement:null}),xi=qr.extend({deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:null,deltaMode:null}),wi={eventTypes:Ze,extractEvents:function(t,e,n,r){var i=Ye.get(t);if(!i)return null;switch(t){case"keypress":if(0===di(n))return null;case"keydown":case"keyup":t=mi;break;case"blur":case"focus":t=pi;break;case"click":if(2===n.button)return null;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":t=qr;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":t=yi;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":t=_i;break;case $t:case Jt:case te:t=fi;break;case ee:t=bi;break;case"scroll":t=Ur;break;case"wheel":t=xi;break;case"copy":case"cut":case"paste":t=hi;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":t=Kr;break;default:t=ir}return e=t.getPooled(i,e,n,r),Qn(e),e}};if(_)throw Error(a(101));_=Array.prototype.slice.call("ResponderEventPlugin SimpleEventPlugin EnterLeaveEventPlugin ChangeEventPlugin SelectEventPlugin BeforeInputEventPlugin".split(" ")),x();var Ei=Vn;v=Gn,g=Ei,m=Hn,T({SimpleEventPlugin:wi,EnterLeaveEventPlugin:$r,ChangeEventPlugin:zr,SelectEventPlugin:li,BeforeInputEventPlugin:Er});var Si=[],Oi=-1;function Ci(t){0>Oi||(t.current=Si[Oi],Si[Oi]=null,Oi--)}function Ti(t,e){Oi++,Si[Oi]=t.current,t.current=e}var Ai={},ki={current:Ai},Mi={current:!1},Pi=Ai;function Ri(t,e){var n=t.type.contextTypes;if(!n)return Ai;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i,o={};for(i in n)o[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=o),o}function ji(t){return t=t.childContextTypes,null!==t&&void 0!==t}function Ii(){Ci(Mi),Ci(ki)}function Li(t,e,n){if(ki.current!==Ai)throw Error(a(168));Ti(ki,e),Ti(Mi,n)}function Ni(t,e,n){var r=t.stateNode;if(t=e.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var o in r=r.getChildContext(),r)if(!(o in t))throw Error(a(108,xt(e)||"Unknown",o));return i({},n,{},r)}function Di(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Ai,Pi=ki.current,Ti(ki,t),Ti(Mi,Mi.current),!0}function Fi(t,e,n){var r=t.stateNode;if(!r)throw Error(a(169));n?(t=Ni(t,e,Pi),r.__reactInternalMemoizedMergedChildContext=t,Ci(Mi),Ci(ki),Ti(ki,t)):Ci(Mi),Ti(Mi,n)}var Bi=o.unstable_runWithPriority,zi=o.unstable_scheduleCallback,Ui=o.unstable_cancelCallback,Vi=o.unstable_requestPaint,Hi=o.unstable_now,Gi=o.unstable_getCurrentPriorityLevel,Wi=o.unstable_ImmediatePriority,Zi=o.unstable_UserBlockingPriority,Yi=o.unstable_NormalPriority,Xi=o.unstable_LowPriority,qi=o.unstable_IdlePriority,Ki={},Qi=o.unstable_shouldYield,$i=void 0!==Vi?Vi:function(){},Ji=null,to=null,eo=!1,no=Hi(),ro=1e4>no?Hi:function(){return Hi()-no};function io(){switch(Gi()){case Wi:return 99;case Zi:return 98;case Yi:return 97;case Xi:return 96;case qi:return 95;default:throw Error(a(332))}}function oo(t){switch(t){case 99:return Wi;case 98:return Zi;case 97:return Yi;case 96:return Xi;case 95:return qi;default:throw Error(a(332))}}function ao(t,e){return t=oo(t),Bi(t,e)}function so(t,e,n){return t=oo(t),zi(t,e,n)}function uo(t){return null===Ji?(Ji=[t],to=zi(Wi,lo)):Ji.push(t),Ki}function co(){if(null!==to){var t=to;to=null,Ui(t)}lo()}function lo(){if(!eo&&null!==Ji){eo=!0;var t=0;try{var e=Ji;ao(99,(function(){for(;t<e.length;t++){var n=e[t];do{n=n(!0)}while(null!==n)}})),Ji=null}catch(n){throw null!==Ji&&(Ji=Ji.slice(t+1)),zi(Wi,co),n}finally{eo=!1}}}function fo(t,e,n){return n/=10,1073741821-(1+((1073741821-t+e/10)/n|0))*n}function ho(t,e){if(t&&t.defaultProps)for(var n in e=i({},e),t=t.defaultProps,t)void 0===e[n]&&(e[n]=t[n]);return e}var po={current:null},vo=null,go=null,mo=null;function yo(){mo=go=vo=null}function _o(t){var e=po.current;Ci(po),t.type._context._currentValue=e}function bo(t,e){for(;null!==t;){var n=t.alternate;if(t.childExpirationTime<e)t.childExpirationTime=e,null!==n&&n.childExpirationTime<e&&(n.childExpirationTime=e);else{if(!(null!==n&&n.childExpirationTime<e))break;n.childExpirationTime=e}t=t.return}}function xo(t,e){vo=t,mo=go=null,t=t.dependencies,null!==t&&null!==t.firstContext&&(t.expirationTime>=e&&(Xa=!0),t.firstContext=null)}function wo(t,e){if(mo!==t&&!1!==e&&0!==e)if("number"===typeof e&&1073741823!==e||(mo=t,e=1073741823),e={context:t,observedBits:e,next:null},null===go){if(null===vo)throw Error(a(308));go=e,vo.dependencies={expirationTime:0,firstContext:e,responders:null}}else go=go.next=e;return t._currentValue}var Eo=!1;function So(t){t.updateQueue={baseState:t.memoizedState,baseQueue:null,shared:{pending:null},effects:null}}function Oo(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,baseQueue:t.baseQueue,shared:t.shared,effects:t.effects})}function Co(t,e){return t={expirationTime:t,suspenseConfig:e,tag:0,payload:null,callback:null,next:null},t.next=t}function To(t,e){if(t=t.updateQueue,null!==t){t=t.shared;var n=t.pending;null===n?e.next=e:(e.next=n.next,n.next=e),t.pending=e}}function Ao(t,e){var n=t.alternate;null!==n&&Oo(n,t),t=t.updateQueue,n=t.baseQueue,null===n?(t.baseQueue=e.next=e,e.next=e):(e.next=n.next,n.next=e)}function ko(t,e,n,r){var o=t.updateQueue;Eo=!1;var a=o.baseQueue,s=o.shared.pending;if(null!==s){if(null!==a){var u=a.next;a.next=s.next,s.next=u}a=s,o.shared.pending=null,u=t.alternate,null!==u&&(u=u.updateQueue,null!==u&&(u.baseQueue=s))}if(null!==a){u=a.next;var c=o.baseState,l=0,f=null,h=null,p=null;if(null!==u){var d=u;do{if(s=d.expirationTime,s<r){var v={expirationTime:d.expirationTime,suspenseConfig:d.suspenseConfig,tag:d.tag,payload:d.payload,callback:d.callback,next:null};null===p?(h=p=v,f=c):p=p.next=v,s>l&&(l=s)}else{null!==p&&(p=p.next={expirationTime:1073741823,suspenseConfig:d.suspenseConfig,tag:d.tag,payload:d.payload,callback:d.callback,next:null}),Nu(s,d.suspenseConfig);t:{var g=t,m=d;switch(s=e,v=n,m.tag){case 1:if(g=m.payload,"function"===typeof g){c=g.call(v,c,s);break t}c=g;break t;case 3:g.effectTag=-4097&g.effectTag|64;case 0:if(g=m.payload,s="function"===typeof g?g.call(v,c,s):g,null===s||void 0===s)break t;c=i({},c,s);break t;case 2:Eo=!0}}null!==d.callback&&(t.effectTag|=32,s=o.effects,null===s?o.effects=[d]:s.push(d))}if(d=d.next,null===d||d===u){if(s=o.shared.pending,null===s)break;d=a.next=s.next,s.next=u,o.baseQueue=a=s,o.shared.pending=null}}while(1)}null===p?f=c:p.next=h,o.baseState=f,o.baseQueue=p,Du(l),t.expirationTime=l,t.memoizedState=c}}function Mo(t,e,n){if(t=e.effects,e.effects=null,null!==t)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(null!==i){if(r.callback=null,r=i,i=n,"function"!==typeof r)throw Error(a(191,r));r.call(i)}}}var Po=tt.ReactCurrentBatchConfig,Ro=(new r.Component).refs;function jo(t,e,n,r){e=t.memoizedState,n=n(r,e),n=null===n||void 0===n?e:i({},e,n),t.memoizedState=n,0===t.expirationTime&&(t.updateQueue.baseState=n)}var Io={isMounted:function(t){return!!(t=t._reactInternalFiber)&&oe(t)===t},enqueueSetState:function(t,e,n){t=t._reactInternalFiber;var r=wu(),i=Po.suspense;r=Eu(r,t,i),i=Co(r,i),i.payload=e,void 0!==n&&null!==n&&(i.callback=n),To(t,i),Su(t,r)},enqueueReplaceState:function(t,e,n){t=t._reactInternalFiber;var r=wu(),i=Po.suspense;r=Eu(r,t,i),i=Co(r,i),i.tag=1,i.payload=e,void 0!==n&&null!==n&&(i.callback=n),To(t,i),Su(t,r)},enqueueForceUpdate:function(t,e){t=t._reactInternalFiber;var n=wu(),r=Po.suspense;n=Eu(n,t,r),r=Co(n,r),r.tag=2,void 0!==e&&null!==e&&(r.callback=e),To(t,r),Su(t,n)}};function Lo(t,e,n,r,i,o,a){return t=t.stateNode,"function"===typeof t.shouldComponentUpdate?t.shouldComponentUpdate(r,o,a):!e.prototype||!e.prototype.isPureReactComponent||(!ni(n,r)||!ni(i,o))}function No(t,e,n){var r=!1,i=Ai,o=e.contextType;return"object"===typeof o&&null!==o?o=wo(o):(i=ji(e)?Pi:ki.current,r=e.contextTypes,o=(r=null!==r&&void 0!==r)?Ri(t,i):Ai),e=new e(n,o),t.memoizedState=null!==e.state&&void 0!==e.state?e.state:null,e.updater=Io,t.stateNode=e,e._reactInternalFiber=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=o),e}function Do(t,e,n,r){t=e.state,"function"===typeof e.componentWillReceiveProps&&e.componentWillReceiveProps(n,r),"function"===typeof e.UNSAFE_componentWillReceiveProps&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Io.enqueueReplaceState(e,e.state,null)}function Fo(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs=Ro,So(t);var o=e.contextType;"object"===typeof o&&null!==o?i.context=wo(o):(o=ji(e)?Pi:ki.current,i.context=Ri(t,o)),ko(t,n,i,r),i.state=t.memoizedState,o=e.getDerivedStateFromProps,"function"===typeof o&&(jo(t,e,o,n),i.state=t.memoizedState),"function"===typeof e.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(e=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),e!==i.state&&Io.enqueueReplaceState(i,i.state,null),ko(t,n,i,r),i.state=t.memoizedState),"function"===typeof i.componentDidMount&&(t.effectTag|=4)}var Bo=Array.isArray;function zo(t,e,n){if(t=n.ref,null!==t&&"function"!==typeof t&&"object"!==typeof t){if(n._owner){if(n=n._owner,n){if(1!==n.tag)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,t));var i=""+t;return null!==e&&null!==e.ref&&"function"===typeof e.ref&&e.ref._stringRef===i?e.ref:(e=function(t){var e=r.refs;e===Ro&&(e=r.refs={}),null===t?delete e[i]:e[i]=t},e._stringRef=i,e)}if("string"!==typeof t)throw Error(a(284));if(!n._owner)throw Error(a(290,t))}return t}function Uo(t,e){if("textarea"!==t.type)throw Error(a(31,"[object Object]"===Object.prototype.toString.call(e)?"object with keys {"+Object.keys(e).join(", ")+"}":e,""))}function Vo(t){function e(e,n){if(t){var r=e.lastEffect;null!==r?(r.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n,n.nextEffect=null,n.effectTag=8}}function n(n,r){if(!t)return null;for(;null!==r;)e(n,r),r=r.sibling;return null}function r(t,e){for(t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function i(t,e){return t=oc(t,e),t.index=0,t.sibling=null,t}function o(e,n,r){return e.index=r,t?(r=e.alternate,null!==r?(r=r.index,r<n?(e.effectTag=2,n):r):(e.effectTag=2,n)):n}function s(e){return t&&null===e.alternate&&(e.effectTag=2),e}function u(t,e,n,r){return null===e||6!==e.tag?(e=uc(n,t.mode,r),e.return=t,e):(e=i(e,n),e.return=t,e)}function c(t,e,n,r){return null!==e&&e.elementType===n.type?(r=i(e,n.props),r.ref=zo(t,e,n),r.return=t,r):(r=ac(n.type,n.key,n.props,null,t.mode,r),r.ref=zo(t,e,n),r.return=t,r)}function l(t,e,n,r){return null===e||4!==e.tag||e.stateNode.containerInfo!==n.containerInfo||e.stateNode.implementation!==n.implementation?(e=cc(n,t.mode,r),e.return=t,e):(e=i(e,n.children||[]),e.return=t,e)}function f(t,e,n,r,o){return null===e||7!==e.tag?(e=sc(n,t.mode,r,o),e.return=t,e):(e=i(e,n),e.return=t,e)}function h(t,e,n){if("string"===typeof e||"number"===typeof e)return e=uc(""+e,t.mode,n),e.return=t,e;if("object"===typeof e&&null!==e){switch(e.$$typeof){case it:return n=ac(e.type,e.key,e.props,null,t.mode,n),n.ref=zo(t,null,e),n.return=t,n;case ot:return e=cc(e,t.mode,n),e.return=t,e}if(Bo(e)||_t(e))return e=sc(e,t.mode,n,null),e.return=t,e;Uo(t,e)}return null}function p(t,e,n,r){var i=null!==e?e.key:null;if("string"===typeof n||"number"===typeof n)return null!==i?null:u(t,e,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case it:return n.key===i?n.type===at?f(t,e,n.props.children,r,i):c(t,e,n,r):null;case ot:return n.key===i?l(t,e,n,r):null}if(Bo(n)||_t(n))return null!==i?null:f(t,e,n,r,null);Uo(t,n)}return null}function d(t,e,n,r,i){if("string"===typeof r||"number"===typeof r)return t=t.get(n)||null,u(e,t,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case it:return t=t.get(null===r.key?n:r.key)||null,r.type===at?f(e,t,r.props.children,i,r.key):c(e,t,r,i);case ot:return t=t.get(null===r.key?n:r.key)||null,l(e,t,r,i)}if(Bo(r)||_t(r))return t=t.get(n)||null,f(e,t,r,i,null);Uo(e,r)}return null}function v(i,a,s,u){for(var c=null,l=null,f=a,v=a=0,g=null;null!==f&&v<s.length;v++){f.index>v?(g=f,f=null):g=f.sibling;var m=p(i,f,s[v],u);if(null===m){null===f&&(f=g);break}t&&f&&null===m.alternate&&e(i,f),a=o(m,a,v),null===l?c=m:l.sibling=m,l=m,f=g}if(v===s.length)return n(i,f),c;if(null===f){for(;v<s.length;v++)f=h(i,s[v],u),null!==f&&(a=o(f,a,v),null===l?c=f:l.sibling=f,l=f);return c}for(f=r(i,f);v<s.length;v++)g=d(f,i,v,s[v],u),null!==g&&(t&&null!==g.alternate&&f.delete(null===g.key?v:g.key),a=o(g,a,v),null===l?c=g:l.sibling=g,l=g);return t&&f.forEach((function(t){return e(i,t)})),c}function g(i,s,u,c){var l=_t(u);if("function"!==typeof l)throw Error(a(150));if(u=l.call(u),null==u)throw Error(a(151));for(var f=l=null,v=s,g=s=0,m=null,y=u.next();null!==v&&!y.done;g++,y=u.next()){v.index>g?(m=v,v=null):m=v.sibling;var _=p(i,v,y.value,c);if(null===_){null===v&&(v=m);break}t&&v&&null===_.alternate&&e(i,v),s=o(_,s,g),null===f?l=_:f.sibling=_,f=_,v=m}if(y.done)return n(i,v),l;if(null===v){for(;!y.done;g++,y=u.next())y=h(i,y.value,c),null!==y&&(s=o(y,s,g),null===f?l=y:f.sibling=y,f=y);return l}for(v=r(i,v);!y.done;g++,y=u.next())y=d(v,i,g,y.value,c),null!==y&&(t&&null!==y.alternate&&v.delete(null===y.key?g:y.key),s=o(y,s,g),null===f?l=y:f.sibling=y,f=y);return t&&v.forEach((function(t){return e(i,t)})),l}return function(t,r,o,u){var c="object"===typeof o&&null!==o&&o.type===at&&null===o.key;c&&(o=o.props.children);var l="object"===typeof o&&null!==o;if(l)switch(o.$$typeof){case it:t:{for(l=o.key,c=r;null!==c;){if(c.key===l){switch(c.tag){case 7:if(o.type===at){n(t,c.sibling),r=i(c,o.props.children),r.return=t,t=r;break t}break;default:if(c.elementType===o.type){n(t,c.sibling),r=i(c,o.props),r.ref=zo(t,c,o),r.return=t,t=r;break t}}n(t,c);break}e(t,c),c=c.sibling}o.type===at?(r=sc(o.props.children,t.mode,u,o.key),r.return=t,t=r):(u=ac(o.type,o.key,o.props,null,t.mode,u),u.ref=zo(t,r,o),u.return=t,t=u)}return s(t);case ot:t:{for(c=o.key;null!==r;){if(r.key===c){if(4===r.tag&&r.stateNode.containerInfo===o.containerInfo&&r.stateNode.implementation===o.implementation){n(t,r.sibling),r=i(r,o.children||[]),r.return=t,t=r;break t}n(t,r);break}e(t,r),r=r.sibling}r=cc(o,t.mode,u),r.return=t,t=r}return s(t)}if("string"===typeof o||"number"===typeof o)return o=""+o,null!==r&&6===r.tag?(n(t,r.sibling),r=i(r,o),r.return=t,t=r):(n(t,r),r=uc(o,t.mode,u),r.return=t,t=r),s(t);if(Bo(o))return v(t,r,o,u);if(_t(o))return g(t,r,o,u);if(l&&Uo(t,o),"undefined"===typeof o&&!c)switch(t.tag){case 1:case 0:throw t=t.type,Error(a(152,t.displayName||t.name||"Component"))}return n(t,r)}}var Ho=Vo(!0),Go=Vo(!1),Wo={},Zo={current:Wo},Yo={current:Wo},Xo={current:Wo};function qo(t){if(t===Wo)throw Error(a(174));return t}function Ko(t,e){switch(Ti(Xo,e),Ti(Yo,t),Ti(Zo,Wo),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Ht(null,"");break;default:t=8===t?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Ht(e,t)}Ci(Zo),Ti(Zo,e)}function Qo(){Ci(Zo),Ci(Yo),Ci(Xo)}function $o(t){qo(Xo.current);var e=qo(Zo.current),n=Ht(e,t.type);e!==n&&(Ti(Yo,t),Ti(Zo,n))}function Jo(t){Yo.current===t&&(Ci(Zo),Ci(Yo))}var ta={current:0};function ea(t){for(var e=t;null!==e;){if(13===e.tag){var n=e.memoizedState;if(null!==n&&(n=n.dehydrated,null===n||n.data===Tn||n.data===An))return e}else if(19===e.tag&&void 0!==e.memoizedProps.revealOrder){if(0!==(64&e.effectTag))return e}else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break;for(;null===e.sibling;){if(null===e.return||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}function na(t,e){return{responder:t,props:e}}var ra=tt.ReactCurrentDispatcher,ia=tt.ReactCurrentBatchConfig,oa=0,aa=null,sa=null,ua=null,ca=!1;function la(){throw Error(a(321))}function fa(t,e){if(null===e)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!ti(t[n],e[n]))return!1;return!0}function ha(t,e,n,r,i,o){if(oa=o,aa=e,e.memoizedState=null,e.updateQueue=null,e.expirationTime=0,ra.current=null===t||null===t.memoizedState?La:Na,t=n(r,i),e.expirationTime===oa){o=0;do{if(e.expirationTime=0,!(25>o))throw Error(a(301));o+=1,ua=sa=null,e.updateQueue=null,ra.current=Da,t=n(r,i)}while(e.expirationTime===oa)}if(ra.current=Ia,e=null!==sa&&null!==sa.next,oa=0,ua=sa=aa=null,ca=!1,e)throw Error(a(300));return t}function pa(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===ua?aa.memoizedState=ua=t:ua=ua.next=t,ua}function da(){if(null===sa){var t=aa.alternate;t=null!==t?t.memoizedState:null}else t=sa.next;var e=null===ua?aa.memoizedState:ua.next;if(null!==e)ua=e,sa=t;else{if(null===t)throw Error(a(310));sa=t,t={memoizedState:sa.memoizedState,baseState:sa.baseState,baseQueue:sa.baseQueue,queue:sa.queue,next:null},null===ua?aa.memoizedState=ua=t:ua=ua.next=t}return ua}function va(t,e){return"function"===typeof e?e(t):e}function ga(t){var e=da(),n=e.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=t;var r=sa,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var s=i.next;i.next=o.next,o.next=s}r.baseQueue=i=o,n.pending=null}if(null!==i){i=i.next,r=r.baseState;var u=s=o=null,c=i;do{var l=c.expirationTime;if(l<oa){var f={expirationTime:c.expirationTime,suspenseConfig:c.suspenseConfig,action:c.action,eagerReducer:c.eagerReducer,eagerState:c.eagerState,next:null};null===u?(s=u=f,o=r):u=u.next=f,l>aa.expirationTime&&(aa.expirationTime=l,Du(l))}else null!==u&&(u=u.next={expirationTime:1073741823,suspenseConfig:c.suspenseConfig,action:c.action,eagerReducer:c.eagerReducer,eagerState:c.eagerState,next:null}),Nu(l,c.suspenseConfig),r=c.eagerReducer===t?c.eagerState:t(r,c.action);c=c.next}while(null!==c&&c!==i);null===u?o=r:u.next=s,ti(r,e.memoizedState)||(Xa=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=u,n.lastRenderedState=r}return[e.memoizedState,n.dispatch]}function ma(t){var e=da(),n=e.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,o=e.memoizedState;if(null!==i){n.pending=null;var s=i=i.next;do{o=t(o,s.action),s=s.next}while(s!==i);ti(o,e.memoizedState)||(Xa=!0),e.memoizedState=o,null===e.baseQueue&&(e.baseState=o),n.lastRenderedState=o}return[o,r]}function ya(t){var e=pa();return"function"===typeof t&&(t=t()),e.memoizedState=e.baseState=t,t=e.queue={pending:null,dispatch:null,lastRenderedReducer:va,lastRenderedState:t},t=t.dispatch=ja.bind(null,aa,t),[e.memoizedState,t]}function _a(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=aa.updateQueue,null===e?(e={lastEffect:null},aa.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,null===n?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function ba(){return da().memoizedState}function xa(t,e,n,r){var i=pa();aa.effectTag|=t,i.memoizedState=_a(1|e,n,void 0,void 0===r?null:r)}function wa(t,e,n,r){var i=da();r=void 0===r?null:r;var o=void 0;if(null!==sa){var a=sa.memoizedState;if(o=a.destroy,null!==r&&fa(r,a.deps))return void _a(e,n,o,r)}aa.effectTag|=t,i.memoizedState=_a(1|e,n,o,r)}function Ea(t,e){return xa(516,4,t,e)}function Sa(t,e){return wa(516,4,t,e)}function Oa(t,e){return wa(4,2,t,e)}function Ca(t,e){return"function"===typeof e?(t=t(),e(t),function(){e(null)}):null!==e&&void 0!==e?(t=t(),e.current=t,function(){e.current=null}):void 0}function Ta(t,e,n){return n=null!==n&&void 0!==n?n.concat([t]):null,wa(4,2,Ca.bind(null,e,t),n)}function Aa(){}function ka(t,e){return pa().memoizedState=[t,void 0===e?null:e],t}function Ma(t,e){var n=da();e=void 0===e?null:e;var r=n.memoizedState;return null!==r&&null!==e&&fa(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Pa(t,e){var n=da();e=void 0===e?null:e;var r=n.memoizedState;return null!==r&&null!==e&&fa(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Ra(t,e,n){var r=io();ao(98>r?98:r,(function(){t(!0)})),ao(97<r?97:r,(function(){var r=ia.suspense;ia.suspense=void 0===e?null:e;try{t(!1),n()}finally{ia.suspense=r}}))}function ja(t,e,n){var r=wu(),i=Po.suspense;r=Eu(r,t,i),i={expirationTime:r,suspenseConfig:i,action:n,eagerReducer:null,eagerState:null,next:null};var o=e.pending;if(null===o?i.next=i:(i.next=o.next,o.next=i),e.pending=i,o=t.alternate,t===aa||null!==o&&o===aa)ca=!0,i.expirationTime=oa,aa.expirationTime=oa;else{if(0===t.expirationTime&&(null===o||0===o.expirationTime)&&(o=e.lastRenderedReducer,null!==o))try{var a=e.lastRenderedState,s=o(a,n);if(i.eagerReducer=o,i.eagerState=s,ti(s,a))return}catch(u){}Su(t,r)}}var Ia={readContext:wo,useCallback:la,useContext:la,useEffect:la,useImperativeHandle:la,useLayoutEffect:la,useMemo:la,useReducer:la,useRef:la,useState:la,useDebugValue:la,useResponder:la,useDeferredValue:la,useTransition:la},La={readContext:wo,useCallback:ka,useContext:wo,useEffect:Ea,useImperativeHandle:function(t,e,n){return n=null!==n&&void 0!==n?n.concat([t]):null,xa(4,2,Ca.bind(null,e,t),n)},useLayoutEffect:function(t,e){return xa(4,2,t,e)},useMemo:function(t,e){var n=pa();return e=void 0===e?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=pa();return e=void 0!==n?n(e):e,r.memoizedState=r.baseState=e,t=r.queue={pending:null,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},t=t.dispatch=ja.bind(null,aa,t),[r.memoizedState,t]},useRef:function(t){var e=pa();return t={current:t},e.memoizedState=t},useState:ya,useDebugValue:Aa,useResponder:na,useDeferredValue:function(t,e){var n=ya(t),r=n[0],i=n[1];return Ea((function(){var n=ia.suspense;ia.suspense=void 0===e?null:e;try{i(t)}finally{ia.suspense=n}}),[t,e]),r},useTransition:function(t){var e=ya(!1),n=e[0];return e=e[1],[ka(Ra.bind(null,e,t),[e,t]),n]}},Na={readContext:wo,useCallback:Ma,useContext:wo,useEffect:Sa,useImperativeHandle:Ta,useLayoutEffect:Oa,useMemo:Pa,useReducer:ga,useRef:ba,useState:function(){return ga(va)},useDebugValue:Aa,useResponder:na,useDeferredValue:function(t,e){var n=ga(va),r=n[0],i=n[1];return Sa((function(){var n=ia.suspense;ia.suspense=void 0===e?null:e;try{i(t)}finally{ia.suspense=n}}),[t,e]),r},useTransition:function(t){var e=ga(va),n=e[0];return e=e[1],[Ma(Ra.bind(null,e,t),[e,t]),n]}},Da={readContext:wo,useCallback:Ma,useContext:wo,useEffect:Sa,useImperativeHandle:Ta,useLayoutEffect:Oa,useMemo:Pa,useReducer:ma,useRef:ba,useState:function(){return ma(va)},useDebugValue:Aa,useResponder:na,useDeferredValue:function(t,e){var n=ma(va),r=n[0],i=n[1];return Sa((function(){var n=ia.suspense;ia.suspense=void 0===e?null:e;try{i(t)}finally{ia.suspense=n}}),[t,e]),r},useTransition:function(t){var e=ma(va),n=e[0];return e=e[1],[Ma(Ra.bind(null,e,t),[e,t]),n]}},Fa=null,Ba=null,za=!1;function Ua(t,e){var n=nc(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=e,n.return=t,n.effectTag=8,null!==t.lastEffect?(t.lastEffect.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n}function Va(t,e){switch(t.tag){case 5:var n=t.type;return e=1!==e.nodeType||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,null!==e&&(t.stateNode=e,!0);case 6:return e=""===t.pendingProps||3!==e.nodeType?null:e,null!==e&&(t.stateNode=e,!0);case 13:return!1;default:return!1}}function Ha(t){if(za){var e=Ba;if(e){var n=e;if(!Va(t,e)){if(e=Ln(n.nextSibling),!e||!Va(t,e))return t.effectTag=-1025&t.effectTag|2,za=!1,void(Fa=t);Ua(Fa,n)}Fa=t,Ba=Ln(e.firstChild)}else t.effectTag=-1025&t.effectTag|2,za=!1,Fa=t}}function Ga(t){for(t=t.return;null!==t&&5!==t.tag&&3!==t.tag&&13!==t.tag;)t=t.return;Fa=t}function Wa(t){if(t!==Fa)return!1;if(!za)return Ga(t),za=!0,!1;var e=t.type;if(5!==t.tag||"head"!==e&&"body"!==e&&!Rn(e,t.memoizedProps))for(e=Ba;e;)Ua(t,e),e=Ln(e.nextSibling);if(Ga(t),13===t.tag){if(t=t.memoizedState,t=null!==t?t.dehydrated:null,!t)throw Error(a(317));t:{for(t=t.nextSibling,e=0;t;){if(8===t.nodeType){var n=t.data;if(n===Cn){if(0===e){Ba=Ln(t.nextSibling);break t}e--}else n!==On&&n!==An&&n!==Tn||e++}t=t.nextSibling}Ba=null}}else Ba=Fa?Ln(t.stateNode.nextSibling):null;return!0}function Za(){Ba=Fa=null,za=!1}var Ya=tt.ReactCurrentOwner,Xa=!1;function qa(t,e,n,r){e.child=null===t?Go(e,null,n,r):Ho(e,t.child,n,r)}function Ka(t,e,n,r,i){n=n.render;var o=e.ref;return xo(e,i),r=ha(t,e,n,r,o,i),null===t||Xa?(e.effectTag|=1,qa(t,e,r,i),e.child):(e.updateQueue=t.updateQueue,e.effectTag&=-517,t.expirationTime<=i&&(t.expirationTime=0),ps(t,e,i))}function Qa(t,e,n,r,i,o){if(null===t){var a=n.type;return"function"!==typeof a||rc(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?(t=ac(n.type,null,r,null,e.mode,o),t.ref=e.ref,t.return=e,e.child=t):(e.tag=15,e.type=a,$a(t,e,a,r,i,o))}return a=t.child,i<o&&(i=a.memoizedProps,n=n.compare,n=null!==n?n:ni,n(i,r)&&t.ref===e.ref)?ps(t,e,o):(e.effectTag|=1,t=oc(a,r),t.ref=e.ref,t.return=e,e.child=t)}function $a(t,e,n,r,i,o){return null!==t&&ni(t.memoizedProps,r)&&t.ref===e.ref&&(Xa=!1,i<o)?(e.expirationTime=t.expirationTime,ps(t,e,o)):ts(t,e,n,r,o)}function Ja(t,e){var n=e.ref;(null===t&&null!==n||null!==t&&t.ref!==n)&&(e.effectTag|=128)}function ts(t,e,n,r,i){var o=ji(n)?Pi:ki.current;return o=Ri(e,o),xo(e,i),n=ha(t,e,n,r,o,i),null===t||Xa?(e.effectTag|=1,qa(t,e,n,i),e.child):(e.updateQueue=t.updateQueue,e.effectTag&=-517,t.expirationTime<=i&&(t.expirationTime=0),ps(t,e,i))}function es(t,e,n,r,i){if(ji(n)){var o=!0;Di(e)}else o=!1;if(xo(e,i),null===e.stateNode)null!==t&&(t.alternate=null,e.alternate=null,e.effectTag|=2),No(e,n,r),Fo(e,n,r,i),r=!0;else if(null===t){var a=e.stateNode,s=e.memoizedProps;a.props=s;var u=a.context,c=n.contextType;"object"===typeof c&&null!==c?c=wo(c):(c=ji(n)?Pi:ki.current,c=Ri(e,c));var l=n.getDerivedStateFromProps,f="function"===typeof l||"function"===typeof a.getSnapshotBeforeUpdate;f||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s!==r||u!==c)&&Do(e,a,r,c),Eo=!1;var h=e.memoizedState;a.state=h,ko(e,r,a,i),u=e.memoizedState,s!==r||h!==u||Mi.current||Eo?("function"===typeof l&&(jo(e,n,l,r),u=e.memoizedState),(s=Eo||Lo(e,n,s,r,h,u,c))?(f||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||("function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"===typeof a.componentDidMount&&(e.effectTag|=4)):("function"===typeof a.componentDidMount&&(e.effectTag|=4),e.memoizedProps=r,e.memoizedState=u),a.props=r,a.state=u,a.context=c,r=s):("function"===typeof a.componentDidMount&&(e.effectTag|=4),r=!1)}else a=e.stateNode,Oo(t,e),s=e.memoizedProps,a.props=e.type===e.elementType?s:ho(e.type,s),u=a.context,c=n.contextType,"object"===typeof c&&null!==c?c=wo(c):(c=ji(n)?Pi:ki.current,c=Ri(e,c)),l=n.getDerivedStateFromProps,(f="function"===typeof l||"function"===typeof a.getSnapshotBeforeUpdate)||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s!==r||u!==c)&&Do(e,a,r,c),Eo=!1,u=e.memoizedState,a.state=u,ko(e,r,a,i),h=e.memoizedState,s!==r||u!==h||Mi.current||Eo?("function"===typeof l&&(jo(e,n,l,r),h=e.memoizedState),(l=Eo||Lo(e,n,s,r,u,h,c))?(f||"function"!==typeof a.UNSAFE_componentWillUpdate&&"function"!==typeof a.componentWillUpdate||("function"===typeof a.componentWillUpdate&&a.componentWillUpdate(r,h,c),"function"===typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,h,c)),"function"===typeof a.componentDidUpdate&&(e.effectTag|=4),"function"===typeof a.getSnapshotBeforeUpdate&&(e.effectTag|=256)):("function"!==typeof a.componentDidUpdate||s===t.memoizedProps&&u===t.memoizedState||(e.effectTag|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===t.memoizedProps&&u===t.memoizedState||(e.effectTag|=256),e.memoizedProps=r,e.memoizedState=h),a.props=r,a.state=h,a.context=c,r=l):("function"!==typeof a.componentDidUpdate||s===t.memoizedProps&&u===t.memoizedState||(e.effectTag|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===t.memoizedProps&&u===t.memoizedState||(e.effectTag|=256),r=!1);return ns(t,e,n,r,o,i)}function ns(t,e,n,r,i,o){Ja(t,e);var a=0!==(64&e.effectTag);if(!r&&!a)return i&&Fi(e,n,!1),ps(t,e,o);r=e.stateNode,Ya.current=e;var s=a&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return e.effectTag|=1,null!==t&&a?(e.child=Ho(e,t.child,null,o),e.child=Ho(e,null,s,o)):qa(t,e,s,o),e.memoizedState=r.state,i&&Fi(e,n,!0),e.child}function rs(t){var e=t.stateNode;e.pendingContext?Li(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Li(t,e.context,!1),Ko(t,e.containerInfo)}var is,os,as,ss,us={dehydrated:null,retryTime:0};function cs(t,e,n){var r,i=e.mode,o=e.pendingProps,a=ta.current,s=!1;if((r=0!==(64&e.effectTag))||(r=0!==(2&a)&&(null===t||null!==t.memoizedState)),r?(s=!0,e.effectTag&=-65):null!==t&&null===t.memoizedState||void 0===o.fallback||!0===o.unstable_avoidThisFallback||(a|=1),Ti(ta,1&a),null===t){if(void 0!==o.fallback&&Ha(e),s){if(s=o.fallback,o=sc(null,i,0,null),o.return=e,0===(2&e.mode))for(t=null!==e.memoizedState?e.child.child:e.child,o.child=t;null!==t;)t.return=o,t=t.sibling;return n=sc(s,i,n,null),n.return=e,o.sibling=n,e.memoizedState=us,e.child=o,n}return i=o.children,e.memoizedState=null,e.child=Go(e,null,i,n)}if(null!==t.memoizedState){if(t=t.child,i=t.sibling,s){if(o=o.fallback,n=oc(t,t.pendingProps),n.return=e,0===(2&e.mode)&&(s=null!==e.memoizedState?e.child.child:e.child,s!==t.child))for(n.child=s;null!==s;)s.return=n,s=s.sibling;return i=oc(i,o),i.return=e,n.sibling=i,n.childExpirationTime=0,e.memoizedState=us,e.child=n,i}return n=Ho(e,t.child,o.children,n),e.memoizedState=null,e.child=n}if(t=t.child,s){if(s=o.fallback,o=sc(null,i,0,null),o.return=e,o.child=t,null!==t&&(t.return=o),0===(2&e.mode))for(t=null!==e.memoizedState?e.child.child:e.child,o.child=t;null!==t;)t.return=o,t=t.sibling;return n=sc(s,i,n,null),n.return=e,o.sibling=n,n.effectTag|=2,o.childExpirationTime=0,e.memoizedState=us,e.child=o,n}return e.memoizedState=null,e.child=Ho(e,t,o.children,n)}function ls(t,e){t.expirationTime<e&&(t.expirationTime=e);var n=t.alternate;null!==n&&n.expirationTime<e&&(n.expirationTime=e),bo(t.return,e)}function fs(t,e,n,r,i,o){var a=t.memoizedState;null===a?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailExpiration:0,tailMode:i,lastEffect:o}:(a.isBackwards=e,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailExpiration=0,a.tailMode=i,a.lastEffect=o)}function hs(t,e,n){var r=e.pendingProps,i=r.revealOrder,o=r.tail;if(qa(t,e,r.children,n),r=ta.current,0!==(2&r))r=1&r|2,e.effectTag|=64;else{if(null!==t&&0!==(64&t.effectTag))t:for(t=e.child;null!==t;){if(13===t.tag)null!==t.memoizedState&&ls(t,n);else if(19===t.tag)ls(t,n);else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break t;for(;null===t.sibling;){if(null===t.return||t.return===e)break t;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Ti(ta,r),0===(2&e.mode))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;null!==n;)t=n.alternate,null!==t&&null===ea(t)&&(i=n),n=n.sibling;n=i,null===n?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),fs(e,!1,i,n,o,e.lastEffect);break;case"backwards":for(n=null,i=e.child,e.child=null;null!==i;){if(t=i.alternate,null!==t&&null===ea(t)){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}fs(e,!0,n,null,o,e.lastEffect);break;case"together":fs(e,!1,null,null,void 0,e.lastEffect);break;default:e.memoizedState=null}return e.child}function ps(t,e,n){null!==t&&(e.dependencies=t.dependencies);var r=e.expirationTime;if(0!==r&&Du(r),e.childExpirationTime<n)return null;if(null!==t&&e.child!==t.child)throw Error(a(153));if(null!==e.child){for(t=e.child,n=oc(t,t.pendingProps),e.child=n,n.return=e;null!==t.sibling;)t=t.sibling,n=n.sibling=oc(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function ds(t,e){switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;null!==e;)null!==e.alternate&&(n=e),e=e.sibling;null===n?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?e||null===t.tail?t.tail=null:t.tail.sibling=null:r.sibling=null}}function vs(t,e,n){var r=e.pendingProps;switch(e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return ji(e.type)&&Ii(),null;case 3:return Qo(),Ci(Mi),Ci(ki),n=e.stateNode,n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==t&&null!==t.child||!Wa(e)||(e.effectTag|=4),os(e),null;case 5:Jo(e),n=qo(Xo.current);var o=e.type;if(null!==t&&null!=e.stateNode)as(t,e,o,r,n),t.ref!==e.ref&&(e.effectTag|=128);else{if(!r){if(null===e.stateNode)throw Error(a(166));return null}if(t=qo(Zo.current),Wa(e)){r=e.stateNode,o=e.type;var s=e.memoizedProps;switch(r[Fn]=e,r[Bn]=s,o){case"iframe":case"object":case"embed":nn("load",r);break;case"video":case"audio":for(t=0;t<ne.length;t++)nn(ne[t],r);break;case"source":nn("error",r);break;case"img":case"image":case"link":nn("error",r),nn("load",r);break;case"form":nn("reset",r),nn("submit",r);break;case"details":nn("toggle",r);break;case"input":kt(r,s),nn("invalid",r),mn(n,"onChange");break;case"select":r._wrapperState={wasMultiple:!!s.multiple},nn("invalid",r),mn(n,"onChange");break;case"textarea":Ft(r,s),nn("invalid",r),mn(n,"onChange")}for(var u in dn(o,s),t=null,s)if(s.hasOwnProperty(u)){var c=s[u];"children"===u?"string"===typeof c?r.textContent!==c&&(t=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(t=["children",""+c]):O.hasOwnProperty(u)&&null!=c&&mn(n,u)}switch(o){case"input":Ct(r),Rt(r,s,!0);break;case"textarea":Ct(r),zt(r);break;case"select":case"option":break;default:"function"===typeof s.onClick&&(r.onclick=yn)}n=t,e.updateQueue=n,null!==n&&(e.effectTag|=4)}else{switch(u=9===n.nodeType?n:n.ownerDocument,t===gn&&(t=Vt(o)),t===gn?"script"===o?(t=u.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):"string"===typeof r.is?t=u.createElement(o,{is:r.is}):(t=u.createElement(o),"select"===o&&(u=t,r.multiple?u.multiple=!0:r.size&&(u.size=r.size))):t=u.createElementNS(t,o),t[Fn]=e,t[Bn]=r,is(t,e,!1,!1),e.stateNode=t,u=vn(o,r),o){case"iframe":case"object":case"embed":nn("load",t),c=r;break;case"video":case"audio":for(c=0;c<ne.length;c++)nn(ne[c],t);c=r;break;case"source":nn("error",t),c=r;break;case"img":case"image":case"link":nn("error",t),nn("load",t),c=r;break;case"form":nn("reset",t),nn("submit",t),c=r;break;case"details":nn("toggle",t),c=r;break;case"input":kt(t,r),c=At(t,r),nn("invalid",t),mn(n,"onChange");break;case"option":c=Lt(t,r);break;case"select":t._wrapperState={wasMultiple:!!r.multiple},c=i({},r,{value:void 0}),nn("invalid",t),mn(n,"onChange");break;case"textarea":Ft(t,r),c=Dt(t,r),nn("invalid",t),mn(n,"onChange");break;default:c=r}dn(o,c);var l=c;for(s in l)if(l.hasOwnProperty(s)){var f=l[s];"style"===s?hn(t,f):"dangerouslySetInnerHTML"===s?(f=f?f.__html:void 0,null!=f&&Wt(t,f)):"children"===s?"string"===typeof f?("textarea"!==o||""!==f)&&Zt(t,f):"number"===typeof f&&Zt(t,""+f):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(O.hasOwnProperty(s)?null!=f&&mn(n,s):null!=f&&et(t,s,f,u))}switch(o){case"input":Ct(t),Rt(t,r,!1);break;case"textarea":Ct(t),zt(t);break;case"option":null!=r.value&&t.setAttribute("value",""+Et(r.value));break;case"select":t.multiple=!!r.multiple,n=r.value,null!=n?Nt(t,!!r.multiple,n,!1):null!=r.defaultValue&&Nt(t,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof c.onClick&&(t.onclick=yn)}Pn(o,r)&&(e.effectTag|=4)}null!==e.ref&&(e.effectTag|=128)}return null;case 6:if(t&&null!=e.stateNode)ss(t,e,t.memoizedProps,r);else{if("string"!==typeof r&&null===e.stateNode)throw Error(a(166));n=qo(Xo.current),qo(Zo.current),Wa(e)?(n=e.stateNode,r=e.memoizedProps,n[Fn]=e,n.nodeValue!==r&&(e.effectTag|=4)):(n=(9===n.nodeType?n:n.ownerDocument).createTextNode(r),n[Fn]=e,e.stateNode=n)}return null;case 13:return Ci(ta),r=e.memoizedState,0!==(64&e.effectTag)?(e.expirationTime=n,e):(n=null!==r,r=!1,null===t?void 0!==e.memoizedProps.fallback&&Wa(e):(o=t.memoizedState,r=null!==o,n||null===o||(o=t.child.sibling,null!==o&&(s=e.firstEffect,null!==s?(e.firstEffect=o,o.nextEffect=s):(e.firstEffect=e.lastEffect=o,o.nextEffect=null),o.effectTag=8))),n&&!r&&0!==(2&e.mode)&&(null===t&&!0!==e.memoizedProps.unstable_avoidThisFallback||0!==(1&ta.current)?nu===Zs&&(nu=qs):(nu!==Zs&&nu!==qs||(nu=Ks),0!==su&&null!==Js&&(hc(Js,eu),pc(Js,su)))),(n||r)&&(e.effectTag|=4),null);case 4:return Qo(),os(e),null;case 10:return _o(e),null;case 17:return ji(e.type)&&Ii(),null;case 19:if(Ci(ta),r=e.memoizedState,null===r)return null;if(o=0!==(64&e.effectTag),s=r.rendering,null===s){if(o)ds(r,!1);else if(nu!==Zs||null!==t&&0!==(64&t.effectTag))for(s=e.child;null!==s;){if(t=ea(s),null!==t){for(e.effectTag|=64,ds(r,!1),o=t.updateQueue,null!==o&&(e.updateQueue=o,e.effectTag|=4),null===r.lastEffect&&(e.firstEffect=null),e.lastEffect=r.lastEffect,r=e.child;null!==r;)o=r,s=n,o.effectTag&=2,o.nextEffect=null,o.firstEffect=null,o.lastEffect=null,t=o.alternate,null===t?(o.childExpirationTime=0,o.expirationTime=s,o.child=null,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null):(o.childExpirationTime=t.childExpirationTime,o.expirationTime=t.expirationTime,o.child=t.child,o.memoizedProps=t.memoizedProps,o.memoizedState=t.memoizedState,o.updateQueue=t.updateQueue,s=t.dependencies,o.dependencies=null===s?null:{expirationTime:s.expirationTime,firstContext:s.firstContext,responders:s.responders}),r=r.sibling;return Ti(ta,1&ta.current|2),e.child}s=s.sibling}}else{if(!o)if(t=ea(s),null!==t){if(e.effectTag|=64,o=!0,n=t.updateQueue,null!==n&&(e.updateQueue=n,e.effectTag|=4),ds(r,!0),null===r.tail&&"hidden"===r.tailMode&&!s.alternate)return e=e.lastEffect=r.lastEffect,null!==e&&(e.nextEffect=null),null}else 2*ro()-r.renderingStartTime>r.tailExpiration&&1<n&&(e.effectTag|=64,o=!0,ds(r,!1),e.expirationTime=e.childExpirationTime=n-1);r.isBackwards?(s.sibling=e.child,e.child=s):(n=r.last,null!==n?n.sibling=s:e.child=s,r.last=s)}return null!==r.tail?(0===r.tailExpiration&&(r.tailExpiration=ro()+500),n=r.tail,r.rendering=n,r.tail=n.sibling,r.lastEffect=e.lastEffect,r.renderingStartTime=ro(),n.sibling=null,e=ta.current,Ti(ta,o?1&e|2:1&e),n):null}throw Error(a(156,e.tag))}function gs(t){switch(t.tag){case 1:ji(t.type)&&Ii();var e=t.effectTag;return 4096&e?(t.effectTag=-4097&e|64,t):null;case 3:if(Qo(),Ci(Mi),Ci(ki),e=t.effectTag,0!==(64&e))throw Error(a(285));return t.effectTag=-4097&e|64,t;case 5:return Jo(t),null;case 13:return Ci(ta),e=t.effectTag,4096&e?(t.effectTag=-4097&e|64,t):null;case 19:return Ci(ta),null;case 4:return Qo(),null;case 10:return _o(t),null;default:return null}}function ms(t,e){return{value:t,source:e,stack:wt(e)}}is=function(t,e){for(var n=e.child;null!==n;){if(5===n.tag||6===n.tag)t.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},os=function(){},as=function(t,e,n,r,o){var a=t.memoizedProps;if(a!==r){var s,u,c=e.stateNode;switch(qo(Zo.current),t=null,n){case"input":a=At(c,a),r=At(c,r),t=[];break;case"option":a=Lt(c,a),r=Lt(c,r),t=[];break;case"select":a=i({},a,{value:void 0}),r=i({},r,{value:void 0}),t=[];break;case"textarea":a=Dt(c,a),r=Dt(c,r),t=[];break;default:"function"!==typeof a.onClick&&"function"===typeof r.onClick&&(c.onclick=yn)}for(s in dn(n,r),n=null,a)if(!r.hasOwnProperty(s)&&a.hasOwnProperty(s)&&null!=a[s])if("style"===s)for(u in c=a[s],c)c.hasOwnProperty(u)&&(n||(n={}),n[u]="");else"dangerouslySetInnerHTML"!==s&&"children"!==s&&"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(O.hasOwnProperty(s)?t||(t=[]):(t=t||[]).push(s,null));for(s in r){var l=r[s];if(c=null!=a?a[s]:void 0,r.hasOwnProperty(s)&&l!==c&&(null!=l||null!=c))if("style"===s)if(c){for(u in c)!c.hasOwnProperty(u)||l&&l.hasOwnProperty(u)||(n||(n={}),n[u]="");for(u in l)l.hasOwnProperty(u)&&c[u]!==l[u]&&(n||(n={}),n[u]=l[u])}else n||(t||(t=[]),t.push(s,n)),n=l;else"dangerouslySetInnerHTML"===s?(l=l?l.__html:void 0,c=c?c.__html:void 0,null!=l&&c!==l&&(t=t||[]).push(s,l)):"children"===s?c===l||"string"!==typeof l&&"number"!==typeof l||(t=t||[]).push(s,""+l):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&(O.hasOwnProperty(s)?(null!=l&&mn(o,s),t||c===l||(t=[])):(t=t||[]).push(s,l))}n&&(t=t||[]).push("style",n),o=t,(e.updateQueue=o)&&(e.effectTag|=4)}},ss=function(t,e,n,r){n!==r&&(e.effectTag|=4)};var ys="function"===typeof WeakSet?WeakSet:Set;function _s(t,e){var n=e.source,r=e.stack;null===r&&null!==n&&(r=wt(n)),null!==n&&xt(n.type),e=e.value,null!==t&&1===t.tag&&xt(t.type);try{console.error(e)}catch(i){setTimeout((function(){throw i}))}}function bs(t,e){try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(n){qu(t,n)}}function xs(t){var e=t.ref;if(null!==e)if("function"===typeof e)try{e(null)}catch(n){qu(t,n)}else e.current=null}function ws(t,e){switch(e.tag){case 0:case 11:case 15:case 22:return;case 1:if(256&e.effectTag&&null!==t){var n=t.memoizedProps,r=t.memoizedState;t=e.stateNode,e=t.getSnapshotBeforeUpdate(e.elementType===e.type?n:ho(e.type,n),r),t.__reactInternalSnapshotBeforeUpdate=e}return;case 3:case 5:case 6:case 4:case 17:return}throw Error(a(163))}function Es(t,e){if(e=e.updateQueue,e=null!==e?e.lastEffect:null,null!==e){var n=e=e.next;do{if((n.tag&t)===t){var r=n.destroy;n.destroy=void 0,void 0!==r&&r()}n=n.next}while(n!==e)}}function Ss(t,e){if(e=e.updateQueue,e=null!==e?e.lastEffect:null,null!==e){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Os(t,e,n){switch(n.tag){case 0:case 11:case 15:case 22:return void Ss(3,n);case 1:if(t=n.stateNode,4&n.effectTag)if(null===e)t.componentDidMount();else{var r=n.elementType===n.type?e.memoizedProps:ho(n.type,e.memoizedProps);t.componentDidUpdate(r,e.memoizedState,t.__reactInternalSnapshotBeforeUpdate)}return e=n.updateQueue,void(null!==e&&Mo(n,e,t));case 3:if(e=n.updateQueue,null!==e){if(t=null,null!==n.child)switch(n.child.tag){case 5:t=n.child.stateNode;break;case 1:t=n.child.stateNode}Mo(n,e,t)}return;case 5:return t=n.stateNode,void(null===e&&4&n.effectTag&&Pn(n.type,n.memoizedProps)&&t.focus());case 6:return;case 4:return;case 12:return;case 13:return void(null===n.memoizedState&&(n=n.alternate,null!==n&&(n=n.memoizedState,null!==n&&(n=n.dehydrated,null!==n&&We(n)))));case 19:case 17:case 20:case 21:return}throw Error(a(163))}function Cs(t,e,n){switch("function"===typeof Ju&&Ju(e),e.tag){case 0:case 11:case 14:case 15:case 22:if(t=e.updateQueue,null!==t&&(t=t.lastEffect,null!==t)){var r=t.next;ao(97<n?97:n,(function(){var t=r;do{var n=t.destroy;if(void 0!==n){var i=e;try{n()}catch(o){qu(i,o)}}t=t.next}while(t!==r)}))}break;case 1:xs(e),n=e.stateNode,"function"===typeof n.componentWillUnmount&&bs(e,n);break;case 5:xs(e);break;case 4:Rs(t,e,n)}}function Ts(t){var e=t.alternate;t.return=null,t.child=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.alternate=null,t.firstEffect=null,t.lastEffect=null,t.pendingProps=null,t.memoizedProps=null,t.stateNode=null,null!==e&&Ts(e)}function As(t){return 5===t.tag||3===t.tag||4===t.tag}function ks(t){t:{for(var e=t.return;null!==e;){if(As(e)){var n=e;break t}e=e.return}throw Error(a(160))}switch(e=n.stateNode,n.tag){case 5:var r=!1;break;case 3:e=e.containerInfo,r=!0;break;case 4:e=e.containerInfo,r=!0;break;default:throw Error(a(161))}16&n.effectTag&&(Zt(e,""),n.effectTag&=-17);t:e:for(n=t;;){for(;null===n.sibling;){if(null===n.return||As(n.return)){n=null;break t}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag&&18!==n.tag;){if(2&n.effectTag)continue e;if(null===n.child||4===n.tag)continue e;n.child.return=n,n=n.child}if(!(2&n.effectTag)){n=n.stateNode;break t}}r?Ms(t,n,e):Ps(t,n,e)}function Ms(t,e,n){var r=t.tag,i=5===r||6===r;if(i)t=i?t.stateNode:t.stateNode.instance,e?8===n.nodeType?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(8===n.nodeType?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,null!==n&&void 0!==n||null!==e.onclick||(e.onclick=yn));else if(4!==r&&(t=t.child,null!==t))for(Ms(t,e,n),t=t.sibling;null!==t;)Ms(t,e,n),t=t.sibling}function Ps(t,e,n){var r=t.tag,i=5===r||6===r;if(i)t=i?t.stateNode:t.stateNode.instance,e?n.insertBefore(t,e):n.appendChild(t);else if(4!==r&&(t=t.child,null!==t))for(Ps(t,e,n),t=t.sibling;null!==t;)Ps(t,e,n),t=t.sibling}function Rs(t,e,n){for(var r,i,o=e,s=!1;;){if(!s){s=o.return;t:for(;;){if(null===s)throw Error(a(160));switch(r=s.stateNode,s.tag){case 5:i=!1;break t;case 3:r=r.containerInfo,i=!0;break t;case 4:r=r.containerInfo,i=!0;break t}s=s.return}s=!0}if(5===o.tag||6===o.tag){t:for(var u=t,c=o,l=n,f=c;;)if(Cs(u,f,l),null!==f.child&&4!==f.tag)f.child.return=f,f=f.child;else{if(f===c)break t;for(;null===f.sibling;){if(null===f.return||f.return===c)break t;f=f.return}f.sibling.return=f.return,f=f.sibling}i?(u=r,c=o.stateNode,8===u.nodeType?u.parentNode.removeChild(c):u.removeChild(c)):r.removeChild(o.stateNode)}else if(4===o.tag){if(null!==o.child){r=o.stateNode.containerInfo,i=!0,o.child.return=o,o=o.child;continue}}else if(Cs(t,o,n),null!==o.child){o.child.return=o,o=o.child;continue}if(o===e)break;for(;null===o.sibling;){if(null===o.return||o.return===e)return;o=o.return,4===o.tag&&(s=!1)}o.sibling.return=o.return,o=o.sibling}}function js(t,e){switch(e.tag){case 0:case 11:case 14:case 15:case 22:return void Es(3,e);case 1:return;case 5:var n=e.stateNode;if(null!=n){var r=e.memoizedProps,i=null!==t?t.memoizedProps:r;t=e.type;var o=e.updateQueue;if(e.updateQueue=null,null!==o){for(n[Bn]=r,"input"===t&&"radio"===r.type&&null!=r.name&&Mt(n,r),vn(t,i),e=vn(t,r),i=0;i<o.length;i+=2){var s=o[i],u=o[i+1];"style"===s?hn(n,u):"dangerouslySetInnerHTML"===s?Wt(n,u):"children"===s?Zt(n,u):et(n,s,u,e)}switch(t){case"input":Pt(n,r);break;case"textarea":Bt(n,r);break;case"select":e=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!r.multiple,t=r.value,null!=t?Nt(n,!!r.multiple,t,!1):e!==!!r.multiple&&(null!=r.defaultValue?Nt(n,!!r.multiple,r.defaultValue,!0):Nt(n,!!r.multiple,r.multiple?[]:"",!1))}}}return;case 6:if(null===e.stateNode)throw Error(a(162));return void(e.stateNode.nodeValue=e.memoizedProps);case 3:return e=e.stateNode,void(e.hydrate&&(e.hydrate=!1,We(e.containerInfo)));case 12:return;case 13:if(n=e,null===e.memoizedState?r=!1:(r=!0,n=e.child,cu=ro()),null!==n)t:for(t=n;;){if(5===t.tag)o=t.stateNode,r?(o=o.style,"function"===typeof o.setProperty?o.setProperty("display","none","important"):o.display="none"):(o=t.stateNode,i=t.memoizedProps.style,i=void 0!==i&&null!==i&&i.hasOwnProperty("display")?i.display:null,o.style.display=fn("display",i));else if(6===t.tag)t.stateNode.nodeValue=r?"":t.memoizedProps;else{if(13===t.tag&&null!==t.memoizedState&&null===t.memoizedState.dehydrated){o=t.child.sibling,o.return=t,t=o;continue}if(null!==t.child){t.child.return=t,t=t.child;continue}}if(t===n)break;for(;null===t.sibling;){if(null===t.return||t.return===n)break t;t=t.return}t.sibling.return=t.return,t=t.sibling}return void Is(e);case 19:return void Is(e);case 17:return}throw Error(a(163))}function Is(t){var e=t.updateQueue;if(null!==e){t.updateQueue=null;var n=t.stateNode;null===n&&(n=t.stateNode=new ys),e.forEach((function(e){var r=Qu.bind(null,t,e);n.has(e)||(n.add(e),e.then(r,r))}))}}var Ls="function"===typeof WeakMap?WeakMap:Map;function Ns(t,e,n){n=Co(n,null),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){hu||(hu=!0,pu=r),_s(t,e)},n}function Ds(t,e,n){n=Co(n,null),n.tag=3;var r=t.type.getDerivedStateFromError;if("function"===typeof r){var i=e.value;n.payload=function(){return _s(t,e),r(i)}}var o=t.stateNode;return null!==o&&"function"===typeof o.componentDidCatch&&(n.callback=function(){"function"!==typeof r&&(null===du?du=new Set([this]):du.add(this),_s(t,e));var n=e.stack;this.componentDidCatch(e.value,{componentStack:null!==n?n:""})}),n}var Fs,Bs=Math.ceil,zs=tt.ReactCurrentDispatcher,Us=tt.ReactCurrentOwner,Vs=0,Hs=8,Gs=16,Ws=32,Zs=0,Ys=1,Xs=2,qs=3,Ks=4,Qs=5,$s=Vs,Js=null,tu=null,eu=0,nu=Zs,ru=null,iu=1073741823,ou=1073741823,au=null,su=0,uu=!1,cu=0,lu=500,fu=null,hu=!1,pu=null,du=null,vu=!1,gu=null,mu=90,yu=null,_u=0,bu=null,xu=0;function wu(){return($s&(Gs|Ws))!==Vs?1073741821-(ro()/10|0):0!==xu?xu:xu=1073741821-(ro()/10|0)}function Eu(t,e,n){if(e=e.mode,0===(2&e))return 1073741823;var r=io();if(0===(4&e))return 99===r?1073741823:1073741822;if(($s&Gs)!==Vs)return eu;if(null!==n)t=fo(t,0|n.timeoutMs||5e3,250);else switch(r){case 99:t=1073741823;break;case 98:t=fo(t,150,100);break;case 97:case 96:t=fo(t,5e3,250);break;case 95:t=2;break;default:throw Error(a(326))}return null!==Js&&t===eu&&--t,t}function Su(t,e){if(50<_u)throw _u=0,bu=null,Error(a(185));if(t=Ou(t,e),null!==t){var n=io();1073741823===e?($s&Hs)!==Vs&&($s&(Gs|Ws))===Vs?ku(t):(Tu(t),$s===Vs&&co()):Tu(t),(4&$s)===Vs||98!==n&&99!==n||(null===yu?yu=new Map([[t,e]]):(n=yu.get(t),(void 0===n||n>e)&&yu.set(t,e)))}}function Ou(t,e){t.expirationTime<e&&(t.expirationTime=e);var n=t.alternate;null!==n&&n.expirationTime<e&&(n.expirationTime=e);var r=t.return,i=null;if(null===r&&3===t.tag)i=t.stateNode;else for(;null!==r;){if(n=r.alternate,r.childExpirationTime<e&&(r.childExpirationTime=e),null!==n&&n.childExpirationTime<e&&(n.childExpirationTime=e),null===r.return&&3===r.tag){i=r.stateNode;break}r=r.return}return null!==i&&(Js===i&&(Du(e),nu===Ks&&hc(i,eu)),pc(i,e)),i}function Cu(t){var e=t.lastExpiredTime;if(0!==e)return e;if(e=t.firstPendingTime,!fc(t,e))return e;var n=t.lastPingedTime;return t=t.nextKnownPendingLevel,t=n>t?n:t,2>=t&&e!==t?0:t}function Tu(t){if(0!==t.lastExpiredTime)t.callbackExpirationTime=1073741823,t.callbackPriority=99,t.callbackNode=uo(ku.bind(null,t));else{var e=Cu(t),n=t.callbackNode;if(0===e)null!==n&&(t.callbackNode=null,t.callbackExpirationTime=0,t.callbackPriority=90);else{var r=wu();if(1073741823===e?r=99:1===e||2===e?r=95:(r=10*(1073741821-e)-10*(1073741821-r),r=0>=r?99:250>=r?98:5250>=r?97:95),null!==n){var i=t.callbackPriority;if(t.callbackExpirationTime===e&&i>=r)return;n!==Ki&&Ui(n)}t.callbackExpirationTime=e,t.callbackPriority=r,e=1073741823===e?uo(ku.bind(null,t)):so(r,Au.bind(null,t),{timeout:10*(1073741821-e)-ro()}),t.callbackNode=e}}}function Au(t,e){if(xu=0,e)return e=wu(),dc(t,e),Tu(t),null;var n=Cu(t);if(0!==n){if(e=t.callbackNode,($s&(Gs|Ws))!==Vs)throw Error(a(327));if(Zu(),t===Js&&n===eu||ju(t,n),null!==tu){var r=$s;$s|=Gs;var i=Lu();do{try{Bu();break}catch(u){Iu(t,u)}}while(1);if(yo(),$s=r,zs.current=i,nu===Ys)throw e=ru,ju(t,n),hc(t,n),Tu(t),e;if(null===tu)switch(i=t.finishedWork=t.current.alternate,t.finishedExpirationTime=n,r=nu,Js=null,r){case Zs:case Ys:throw Error(a(345));case Xs:dc(t,2<n?2:n);break;case qs:if(hc(t,n),r=t.lastSuspendedTime,n===r&&(t.nextKnownPendingLevel=Vu(i)),1073741823===iu&&(i=cu+lu-ro(),10<i)){if(uu){var o=t.lastPingedTime;if(0===o||o>=n){t.lastPingedTime=n,ju(t,n);break}}if(o=Cu(t),0!==o&&o!==n)break;if(0!==r&&r!==n){t.lastPingedTime=r;break}t.timeoutHandle=jn(Hu.bind(null,t),i);break}Hu(t);break;case Ks:if(hc(t,n),r=t.lastSuspendedTime,n===r&&(t.nextKnownPendingLevel=Vu(i)),uu&&(i=t.lastPingedTime,0===i||i>=n)){t.lastPingedTime=n,ju(t,n);break}if(i=Cu(t),0!==i&&i!==n)break;if(0!==r&&r!==n){t.lastPingedTime=r;break}if(1073741823!==ou?r=10*(1073741821-ou)-ro():1073741823===iu?r=0:(r=10*(1073741821-iu)-5e3,i=ro(),n=10*(1073741821-n)-i,r=i-r,0>r&&(r=0),r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Bs(r/1960))-r,n<r&&(r=n)),10<r){t.timeoutHandle=jn(Hu.bind(null,t),r);break}Hu(t);break;case Qs:if(1073741823!==iu&&null!==au){o=iu;var s=au;if(r=0|s.busyMinDurationMs,0>=r?r=0:(i=0|s.busyDelayMs,o=ro()-(10*(1073741821-o)-(0|s.timeoutMs||5e3)),r=o<=i?0:i+r-o),10<r){hc(t,n),t.timeoutHandle=jn(Hu.bind(null,t),r);break}}Hu(t);break;default:throw Error(a(329))}if(Tu(t),t.callbackNode===e)return Au.bind(null,t)}}return null}function ku(t){var e=t.lastExpiredTime;if(e=0!==e?e:1073741823,($s&(Gs|Ws))!==Vs)throw Error(a(327));if(Zu(),t===Js&&e===eu||ju(t,e),null!==tu){var n=$s;$s|=Gs;var r=Lu();do{try{Fu();break}catch(i){Iu(t,i)}}while(1);if(yo(),$s=n,zs.current=r,nu===Ys)throw n=ru,ju(t,e),hc(t,e),Tu(t),n;if(null!==tu)throw Error(a(261));t.finishedWork=t.current.alternate,t.finishedExpirationTime=e,Js=null,Hu(t),Tu(t)}return null}function Mu(){if(null!==yu){var t=yu;yu=null,t.forEach((function(t,e){dc(e,t),Tu(e)})),co()}}function Pu(t,e){var n=$s;$s|=1;try{return t(e)}finally{$s=n,$s===Vs&&co()}}function Ru(t,e){var n=$s;$s&=-2,$s|=Hs;try{return t(e)}finally{$s=n,$s===Vs&&co()}}function ju(t,e){t.finishedWork=null,t.finishedExpirationTime=0;var n=t.timeoutHandle;if(-1!==n&&(t.timeoutHandle=-1,In(n)),null!==tu)for(n=tu.return;null!==n;){var r=n;switch(r.tag){case 1:r=r.type.childContextTypes,null!==r&&void 0!==r&&Ii();break;case 3:Qo(),Ci(Mi),Ci(ki);break;case 5:Jo(r);break;case 4:Qo();break;case 13:Ci(ta);break;case 19:Ci(ta);break;case 10:_o(r)}n=n.return}Js=t,tu=oc(t.current,null),eu=e,nu=Zs,ru=null,ou=iu=1073741823,au=null,su=0,uu=!1}function Iu(t,e){do{try{if(yo(),ra.current=Ia,ca)for(var n=aa.memoizedState;null!==n;){var r=n.queue;null!==r&&(r.pending=null),n=n.next}if(oa=0,ua=sa=aa=null,ca=!1,null===tu||null===tu.return)return nu=Ys,ru=e,tu=null;t:{var i=t,o=tu.return,a=tu,s=e;if(e=eu,a.effectTag|=2048,a.firstEffect=a.lastEffect=null,null!==s&&"object"===typeof s&&"function"===typeof s.then){var u=s;if(0===(2&a.mode)){var c=a.alternate;c?(a.updateQueue=c.updateQueue,a.memoizedState=c.memoizedState,a.expirationTime=c.expirationTime):(a.updateQueue=null,a.memoizedState=null)}var l=0!==(1&ta.current),f=o;do{var h;if(h=13===f.tag){var p=f.memoizedState;if(null!==p)h=null!==p.dehydrated;else{var d=f.memoizedProps;h=void 0!==d.fallback&&(!0!==d.unstable_avoidThisFallback||!l)}}if(h){var v=f.updateQueue;if(null===v){var g=new Set;g.add(u),f.updateQueue=g}else v.add(u);if(0===(2&f.mode)){if(f.effectTag|=64,a.effectTag&=-2981,1===a.tag)if(null===a.alternate)a.tag=17;else{var m=Co(1073741823,null);m.tag=2,To(a,m)}a.expirationTime=1073741823;break t}s=void 0,a=e;var y=i.pingCache;if(null===y?(y=i.pingCache=new Ls,s=new Set,y.set(u,s)):(s=y.get(u),void 0===s&&(s=new Set,y.set(u,s))),!s.has(a)){s.add(a);var _=Ku.bind(null,i,u,a);u.then(_,_)}f.effectTag|=4096,f.expirationTime=e;break t}f=f.return}while(null!==f);s=Error((xt(a.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display."+wt(a))}nu!==Qs&&(nu=Xs),s=ms(s,a),f=o;do{switch(f.tag){case 3:u=s,f.effectTag|=4096,f.expirationTime=e;var b=Ns(f,u,e);Ao(f,b);break t;case 1:u=s;var x=f.type,w=f.stateNode;if(0===(64&f.effectTag)&&("function"===typeof x.getDerivedStateFromError||null!==w&&"function"===typeof w.componentDidCatch&&(null===du||!du.has(w)))){f.effectTag|=4096,f.expirationTime=e;var E=Ds(f,u,e);Ao(f,E);break t}}f=f.return}while(null!==f)}tu=Uu(tu)}catch(S){e=S;continue}break}while(1)}function Lu(){var t=zs.current;return zs.current=Ia,null===t?Ia:t}function Nu(t,e){t<iu&&2<t&&(iu=t),null!==e&&t<ou&&2<t&&(ou=t,au=e)}function Du(t){t>su&&(su=t)}function Fu(){for(;null!==tu;)tu=zu(tu)}function Bu(){for(;null!==tu&&!Qi();)tu=zu(tu)}function zu(t){var e=Fs(t.alternate,t,eu);return t.memoizedProps=t.pendingProps,null===e&&(e=Uu(t)),Us.current=null,e}function Uu(t){tu=t;do{var e=tu.alternate;if(t=tu.return,0===(2048&tu.effectTag)){if(e=vs(e,tu,eu),1===eu||1!==tu.childExpirationTime){for(var n=0,r=tu.child;null!==r;){var i=r.expirationTime,o=r.childExpirationTime;i>n&&(n=i),o>n&&(n=o),r=r.sibling}tu.childExpirationTime=n}if(null!==e)return e;null!==t&&0===(2048&t.effectTag)&&(null===t.firstEffect&&(t.firstEffect=tu.firstEffect),null!==tu.lastEffect&&(null!==t.lastEffect&&(t.lastEffect.nextEffect=tu.firstEffect),t.lastEffect=tu.lastEffect),1<tu.effectTag&&(null!==t.lastEffect?t.lastEffect.nextEffect=tu:t.firstEffect=tu,t.lastEffect=tu))}else{if(e=gs(tu),null!==e)return e.effectTag&=2047,e;null!==t&&(t.firstEffect=t.lastEffect=null,t.effectTag|=2048)}if(e=tu.sibling,null!==e)return e;tu=t}while(null!==tu);return nu===Zs&&(nu=Qs),null}function Vu(t){var e=t.expirationTime;return t=t.childExpirationTime,e>t?e:t}function Hu(t){var e=io();return ao(99,Gu.bind(null,t,e)),null}function Gu(t,e){do{Zu()}while(null!==gu);if(($s&(Gs|Ws))!==Vs)throw Error(a(327));var n=t.finishedWork,r=t.finishedExpirationTime;if(null===n)return null;if(t.finishedWork=null,t.finishedExpirationTime=0,n===t.current)throw Error(a(177));t.callbackNode=null,t.callbackExpirationTime=0,t.callbackPriority=90,t.nextKnownPendingLevel=0;var i=Vu(n);if(t.firstPendingTime=i,r<=t.lastSuspendedTime?t.firstSuspendedTime=t.lastSuspendedTime=t.nextKnownPendingLevel=0:r<=t.firstSuspendedTime&&(t.firstSuspendedTime=r-1),r<=t.lastPingedTime&&(t.lastPingedTime=0),r<=t.lastExpiredTime&&(t.lastExpiredTime=0),t===Js&&(tu=Js=null,eu=0),1<n.effectTag?null!==n.lastEffect?(n.lastEffect.nextEffect=n,i=n.firstEffect):i=n:i=n.firstEffect,null!==i){var o=$s;$s|=Ws,Us.current=null,kn=en;var s=En();if(Sn(s)){if("selectionStart"in s)var u={start:s.selectionStart,end:s.selectionEnd};else t:{u=(u=s.ownerDocument)&&u.defaultView||window;var c=u.getSelection&&u.getSelection();if(c&&0!==c.rangeCount){u=c.anchorNode;var l=c.anchorOffset,f=c.focusNode;c=c.focusOffset;try{u.nodeType,f.nodeType}catch(C){u=null;break t}var h=0,p=-1,d=-1,v=0,g=0,m=s,y=null;e:for(;;){for(var _;;){if(m!==u||0!==l&&3!==m.nodeType||(p=h+l),m!==f||0!==c&&3!==m.nodeType||(d=h+c),3===m.nodeType&&(h+=m.nodeValue.length),null===(_=m.firstChild))break;y=m,m=_}for(;;){if(m===s)break e;if(y===u&&++v===l&&(p=h),y===f&&++g===c&&(d=h),null!==(_=m.nextSibling))break;m=y,y=m.parentNode}m=_}u=-1===p||-1===d?null:{start:p,end:d}}else u=null}u=u||{start:0,end:0}}else u=null;Mn={activeElementDetached:null,focusedElem:s,selectionRange:u},en=!1,fu=i;do{try{Wu()}catch(C){if(null===fu)throw Error(a(330));qu(fu,C),fu=fu.nextEffect}}while(null!==fu);fu=i;do{try{for(s=t,u=e;null!==fu;){var b=fu.effectTag;if(16&b&&Zt(fu.stateNode,""),128&b){var x=fu.alternate;if(null!==x){var w=x.ref;null!==w&&("function"===typeof w?w(null):w.current=null)}}switch(1038&b){case 2:ks(fu),fu.effectTag&=-3;break;case 6:ks(fu),fu.effectTag&=-3,js(fu.alternate,fu);break;case 1024:fu.effectTag&=-1025;break;case 1028:fu.effectTag&=-1025,js(fu.alternate,fu);break;case 4:js(fu.alternate,fu);break;case 8:l=fu,Rs(s,l,u),Ts(l)}fu=fu.nextEffect}}catch(C){if(null===fu)throw Error(a(330));qu(fu,C),fu=fu.nextEffect}}while(null!==fu);if(w=Mn,x=En(),b=w.focusedElem,u=w.selectionRange,x!==b&&b&&b.ownerDocument&&wn(b.ownerDocument.documentElement,b)){null!==u&&Sn(b)&&(x=u.start,w=u.end,void 0===w&&(w=x),"selectionStart"in b?(b.selectionStart=x,b.selectionEnd=Math.min(w,b.value.length)):(w=(x=b.ownerDocument||document)&&x.defaultView||window,w.getSelection&&(w=w.getSelection(),l=b.textContent.length,s=Math.min(u.start,l),u=void 0===u.end?s:Math.min(u.end,l),!w.extend&&s>u&&(l=u,u=s,s=l),l=xn(b,s),f=xn(b,u),l&&f&&(1!==w.rangeCount||w.anchorNode!==l.node||w.anchorOffset!==l.offset||w.focusNode!==f.node||w.focusOffset!==f.offset)&&(x=x.createRange(),x.setStart(l.node,l.offset),w.removeAllRanges(),s>u?(w.addRange(x),w.extend(f.node,f.offset)):(x.setEnd(f.node,f.offset),w.addRange(x)))))),x=[];for(w=b;w=w.parentNode;)1===w.nodeType&&x.push({element:w,left:w.scrollLeft,top:w.scrollTop});for("function"===typeof b.focus&&b.focus(),b=0;b<x.length;b++)w=x[b],w.element.scrollLeft=w.left,w.element.scrollTop=w.top}en=!!kn,Mn=kn=null,t.current=n,fu=i;do{try{for(b=t;null!==fu;){var E=fu.effectTag;if(36&E&&Os(b,fu.alternate,fu),128&E){x=void 0;var S=fu.ref;if(null!==S){var O=fu.stateNode;switch(fu.tag){case 5:x=O;break;default:x=O}"function"===typeof S?S(x):S.current=x}}fu=fu.nextEffect}}catch(C){if(null===fu)throw Error(a(330));qu(fu,C),fu=fu.nextEffect}}while(null!==fu);fu=null,$i(),$s=o}else t.current=n;if(vu)vu=!1,gu=t,mu=e;else for(fu=i;null!==fu;)e=fu.nextEffect,fu.nextEffect=null,fu=e;if(e=t.firstPendingTime,0===e&&(du=null),1073741823===e?t===bu?_u++:(_u=0,bu=t):_u=0,"function"===typeof $u&&$u(n.stateNode,r),Tu(t),hu)throw hu=!1,t=pu,pu=null,t;return($s&Hs)!==Vs||co(),null}function Wu(){for(;null!==fu;){var t=fu.effectTag;0!==(256&t)&&ws(fu.alternate,fu),0===(512&t)||vu||(vu=!0,so(97,(function(){return Zu(),null}))),fu=fu.nextEffect}}function Zu(){if(90!==mu){var t=97<mu?97:mu;return mu=90,ao(t,Yu)}}function Yu(){if(null===gu)return!1;var t=gu;if(gu=null,($s&(Gs|Ws))!==Vs)throw Error(a(331));var e=$s;for($s|=Ws,t=t.current.firstEffect;null!==t;){try{var n=t;if(0!==(512&n.effectTag))switch(n.tag){case 0:case 11:case 15:case 22:Es(5,n),Ss(5,n)}}catch(r){if(null===t)throw Error(a(330));qu(t,r)}n=t.nextEffect,t.nextEffect=null,t=n}return $s=e,co(),!0}function Xu(t,e,n){e=ms(n,e),e=Ns(t,e,1073741823),To(t,e),t=Ou(t,1073741823),null!==t&&Tu(t)}function qu(t,e){if(3===t.tag)Xu(t,t,e);else for(var n=t.return;null!==n;){if(3===n.tag){Xu(n,t,e);break}if(1===n.tag){var r=n.stateNode;if("function"===typeof n.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===du||!du.has(r))){t=ms(e,t),t=Ds(n,t,1073741823),To(n,t),n=Ou(n,1073741823),null!==n&&Tu(n);break}}n=n.return}}function Ku(t,e,n){var r=t.pingCache;null!==r&&r.delete(e),Js===t&&eu===n?nu===Ks||nu===qs&&1073741823===iu&&ro()-cu<lu?ju(t,eu):uu=!0:fc(t,n)&&(e=t.lastPingedTime,0!==e&&e<n||(t.lastPingedTime=n,Tu(t)))}function Qu(t,e){var n=t.stateNode;null!==n&&n.delete(e),e=0,0===e&&(e=wu(),e=Eu(e,t,null)),t=Ou(t,e),null!==t&&Tu(t)}Fs=function(t,e,n){var r=e.expirationTime;if(null!==t){var i=e.pendingProps;if(t.memoizedProps!==i||Mi.current)Xa=!0;else{if(r<n){switch(Xa=!1,e.tag){case 3:rs(e),Za();break;case 5:if($o(e),4&e.mode&&1!==n&&i.hidden)return e.expirationTime=e.childExpirationTime=1,null;break;case 1:ji(e.type)&&Di(e);break;case 4:Ko(e,e.stateNode.containerInfo);break;case 10:r=e.memoizedProps.value,i=e.type._context,Ti(po,i._currentValue),i._currentValue=r;break;case 13:if(null!==e.memoizedState)return r=e.child.childExpirationTime,0!==r&&r>=n?cs(t,e,n):(Ti(ta,1&ta.current),e=ps(t,e,n),null!==e?e.sibling:null);Ti(ta,1&ta.current);break;case 19:if(r=e.childExpirationTime>=n,0!==(64&t.effectTag)){if(r)return hs(t,e,n);e.effectTag|=64}if(i=e.memoizedState,null!==i&&(i.rendering=null,i.tail=null),Ti(ta,ta.current),!r)return null}return ps(t,e,n)}Xa=!1}}else Xa=!1;switch(e.expirationTime=0,e.tag){case 2:if(r=e.type,null!==t&&(t.alternate=null,e.alternate=null,e.effectTag|=2),t=e.pendingProps,i=Ri(e,ki.current),xo(e,n),i=ha(null,e,r,t,i,n),e.effectTag|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof){if(e.tag=1,e.memoizedState=null,e.updateQueue=null,ji(r)){var o=!0;Di(e)}else o=!1;e.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,So(e);var s=r.getDerivedStateFromProps;"function"===typeof s&&jo(e,r,s,t),i.updater=Io,e.stateNode=i,i._reactInternalFiber=e,Fo(e,r,t,n),e=ns(null,e,r,!0,o,n)}else e.tag=0,qa(null,e,i,n),e=e.child;return e;case 16:t:{if(i=e.elementType,null!==t&&(t.alternate=null,e.alternate=null,e.effectTag|=2),t=e.pendingProps,bt(i),1!==i._status)throw i._result;switch(i=i._result,e.type=i,o=e.tag=ic(i),t=ho(i,t),o){case 0:e=ts(null,e,i,t,n);break t;case 1:e=es(null,e,i,t,n);break t;case 11:e=Ka(null,e,i,t,n);break t;case 14:e=Qa(null,e,i,ho(i.type,t),r,n);break t}throw Error(a(306,i,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:ho(r,i),ts(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:ho(r,i),es(t,e,r,i,n);case 3:if(rs(e),r=e.updateQueue,null===t||null===r)throw Error(a(282));if(r=e.pendingProps,i=e.memoizedState,i=null!==i?i.element:null,Oo(t,e),ko(e,r,null,n),r=e.memoizedState.element,r===i)Za(),e=ps(t,e,n);else{if((i=e.stateNode.hydrate)&&(Ba=Ln(e.stateNode.containerInfo.firstChild),Fa=e,i=za=!0),i)for(n=Go(e,null,r,n),e.child=n;n;)n.effectTag=-3&n.effectTag|1024,n=n.sibling;else qa(t,e,r,n),Za();e=e.child}return e;case 5:return $o(e),null===t&&Ha(e),r=e.type,i=e.pendingProps,o=null!==t?t.memoizedProps:null,s=i.children,Rn(r,i)?s=null:null!==o&&Rn(r,o)&&(e.effectTag|=16),Ja(t,e),4&e.mode&&1!==n&&i.hidden?(e.expirationTime=e.childExpirationTime=1,e=null):(qa(t,e,s,n),e=e.child),e;case 6:return null===t&&Ha(e),null;case 13:return cs(t,e,n);case 4:return Ko(e,e.stateNode.containerInfo),r=e.pendingProps,null===t?e.child=Ho(e,null,r,n):qa(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:ho(r,i),Ka(t,e,r,i,n);case 7:return qa(t,e,e.pendingProps,n),e.child;case 8:return qa(t,e,e.pendingProps.children,n),e.child;case 12:return qa(t,e,e.pendingProps.children,n),e.child;case 10:t:{r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value;var u=e.type._context;if(Ti(po,u._currentValue),u._currentValue=o,null!==s)if(u=s.value,o=ti(u,o)?0:0|("function"===typeof r._calculateChangedBits?r._calculateChangedBits(u,o):1073741823),0===o){if(s.children===i.children&&!Mi.current){e=ps(t,e,n);break t}}else for(u=e.child,null!==u&&(u.return=e);null!==u;){var c=u.dependencies;if(null!==c){s=u.child;for(var l=c.firstContext;null!==l;){if(l.context===r&&0!==(l.observedBits&o)){1===u.tag&&(l=Co(n,null),l.tag=2,To(u,l)),u.expirationTime<n&&(u.expirationTime=n),l=u.alternate,null!==l&&l.expirationTime<n&&(l.expirationTime=n),bo(u.return,n),c.expirationTime<n&&(c.expirationTime=n);break}l=l.next}}else s=10===u.tag&&u.type===e.type?null:u.child;if(null!==s)s.return=u;else for(s=u;null!==s;){if(s===e){s=null;break}if(u=s.sibling,null!==u){u.return=s.return,s=u;break}s=s.return}u=s}qa(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,o=e.pendingProps,r=o.children,xo(e,n),i=wo(i,o.unstable_observedBits),r=r(i),e.effectTag|=1,qa(t,e,r,n),e.child;case 14:return i=e.type,o=ho(i,e.pendingProps),o=ho(i.type,o),Qa(t,e,i,o,r,n);case 15:return $a(t,e,e.type,e.pendingProps,r,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:ho(r,i),null!==t&&(t.alternate=null,e.alternate=null,e.effectTag|=2),e.tag=1,ji(r)?(t=!0,Di(e)):t=!1,xo(e,n),No(e,r,i),Fo(e,r,i,n),ns(null,e,r,!0,t,n);case 19:return hs(t,e,n)}throw Error(a(156,e.tag))};var $u=null,Ju=null;function tc(t){if("undefined"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)return!1;var e=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(e.isDisabled||!e.supportsFiber)return!0;try{var n=e.inject(t);$u=function(t){try{e.onCommitFiberRoot(n,t,void 0,64===(64&t.current.effectTag))}catch(r){}},Ju=function(t){try{e.onCommitFiberUnmount(n,t)}catch(r){}}}catch(r){}return!0}function ec(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.effectTag=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childExpirationTime=this.expirationTime=0,this.alternate=null}function nc(t,e,n,r){return new ec(t,e,n,r)}function rc(t){return t=t.prototype,!(!t||!t.isReactComponent)}function ic(t){if("function"===typeof t)return rc(t)?1:0;if(void 0!==t&&null!==t){if(t=t.$$typeof,t===ht)return 11;if(t===vt)return 14}return 2}function oc(t,e){var n=t.alternate;return null===n?(n=nc(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.effectTag=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childExpirationTime=t.childExpirationTime,n.expirationTime=t.expirationTime,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=null===e?null:{expirationTime:e.expirationTime,firstContext:e.firstContext,responders:e.responders},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function ac(t,e,n,r,i,o){var s=2;if(r=t,"function"===typeof t)rc(t)&&(s=1);else if("string"===typeof t)s=5;else t:switch(t){case at:return sc(n.children,i,o,e);case ft:s=8,i|=7;break;case st:s=8,i|=1;break;case ut:return t=nc(12,n,e,8|i),t.elementType=ut,t.type=ut,t.expirationTime=o,t;case pt:return t=nc(13,n,e,i),t.type=pt,t.elementType=pt,t.expirationTime=o,t;case dt:return t=nc(19,n,e,i),t.elementType=dt,t.expirationTime=o,t;default:if("object"===typeof t&&null!==t)switch(t.$$typeof){case ct:s=10;break t;case lt:s=9;break t;case ht:s=11;break t;case vt:s=14;break t;case gt:s=16,r=null;break t;case mt:s=22;break t}throw Error(a(130,null==t?t:typeof t,""))}return e=nc(s,n,e,i),e.elementType=t,e.type=r,e.expirationTime=o,e}function sc(t,e,n,r){return t=nc(7,t,r,e),t.expirationTime=n,t}function uc(t,e,n){return t=nc(6,t,null,e),t.expirationTime=n,t}function cc(t,e,n){return e=nc(4,null!==t.children?t.children:[],t.key,e),e.expirationTime=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function lc(t,e,n){this.tag=e,this.current=null,this.containerInfo=t,this.pingCache=this.pendingChildren=null,this.finishedExpirationTime=0,this.finishedWork=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=n,this.callbackNode=null,this.callbackPriority=90,this.lastExpiredTime=this.lastPingedTime=this.nextKnownPendingLevel=this.lastSuspendedTime=this.firstSuspendedTime=this.firstPendingTime=0}function fc(t,e){var n=t.firstSuspendedTime;return t=t.lastSuspendedTime,0!==n&&n>=e&&t<=e}function hc(t,e){var n=t.firstSuspendedTime,r=t.lastSuspendedTime;n<e&&(t.firstSuspendedTime=e),(r>e||0===n)&&(t.lastSuspendedTime=e),e<=t.lastPingedTime&&(t.lastPingedTime=0),e<=t.lastExpiredTime&&(t.lastExpiredTime=0)}function pc(t,e){e>t.firstPendingTime&&(t.firstPendingTime=e);var n=t.firstSuspendedTime;0!==n&&(e>=n?t.firstSuspendedTime=t.lastSuspendedTime=t.nextKnownPendingLevel=0:e>=t.lastSuspendedTime&&(t.lastSuspendedTime=e+1),e>t.nextKnownPendingLevel&&(t.nextKnownPendingLevel=e))}function dc(t,e){var n=t.lastExpiredTime;(0===n||n>e)&&(t.lastExpiredTime=e)}function vc(t,e,n,r){var i=e.current,o=wu(),s=Po.suspense;o=Eu(o,i,s);t:if(n){n=n._reactInternalFiber;e:{if(oe(n)!==n||1!==n.tag)throw Error(a(170));var u=n;do{switch(u.tag){case 3:u=u.stateNode.context;break e;case 1:if(ji(u.type)){u=u.stateNode.__reactInternalMemoizedMergedChildContext;break e}}u=u.return}while(null!==u);throw Error(a(171))}if(1===n.tag){var c=n.type;if(ji(c)){n=Ni(n,c,u);break t}}n=u}else n=Ai;return null===e.context?e.context=n:e.pendingContext=n,e=Co(o,s),e.payload={element:t},r=void 0===r?null:r,null!==r&&(e.callback=r),To(i,e),Su(i,o),o}function gc(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function mc(t,e){t=t.memoizedState,null!==t&&null!==t.dehydrated&&t.retryTime<e&&(t.retryTime=e)}function yc(t,e){mc(t,e),(t=t.alternate)&&mc(t,e)}function _c(t,e,n){n=null!=n&&!0===n.hydrate;var r=new lc(t,e,n),i=nc(3,null,null,2===e?7:1===e?3:0);r.current=i,i.stateNode=r,So(i),t[zn]=r.current,n&&0!==e&&Le(t,9===t.nodeType?t:t.ownerDocument),this._internalRoot=r}function bc(t){return!(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType&&(8!==t.nodeType||" react-mount-point-unstable "!==t.nodeValue))}function xc(t,e){if(e||(e=t?9===t.nodeType?t.documentElement:t.firstChild:null,e=!(!e||1!==e.nodeType||!e.hasAttribute("data-reactroot"))),!e)for(var n;n=t.lastChild;)t.removeChild(n);return new _c(t,0,e?{hydrate:!0}:void 0)}function wc(t,e,n,r,i){var o=n._reactRootContainer;if(o){var a=o._internalRoot;if("function"===typeof i){var s=i;i=function(){var t=gc(a);s.call(t)}}vc(e,a,t,i)}else{if(o=n._reactRootContainer=xc(n,r),a=o._internalRoot,"function"===typeof i){var u=i;i=function(){var t=gc(a);u.call(t)}}Ru((function(){vc(e,a,t,i)}))}return gc(a)}function Ec(t,e,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:ot,key:null==r?null:""+r,children:t,containerInfo:e,implementation:n}}function Sc(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!bc(e))throw Error(a(200));return Ec(t,e,null,n)}_c.prototype.render=function(t){vc(t,this._internalRoot,null,null)},_c.prototype.unmount=function(){var t=this._internalRoot,e=t.containerInfo;vc(null,t,null,(function(){e[zn]=null}))},we=function(t){if(13===t.tag){var e=fo(wu(),150,100);Su(t,e),yc(t,e)}},Ee=function(t){13===t.tag&&(Su(t,3),yc(t,3))},Se=function(t){if(13===t.tag){var e=wu();e=Eu(e,t,null),Su(t,e),yc(t,e)}},k=function(t,e,n){switch(e){case"input":if(Pt(t,n),e=n.name,"radio"===n.type&&null!=e){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Gn(r);if(!i)throw Error(a(90));Tt(r),Pt(r,i)}}}break;case"textarea":Bt(t,n);break;case"select":e=n.value,null!=e&&Nt(t,!!n.multiple,e,!1)}},L=Pu,N=function(t,e,n,r,i){var o=$s;$s|=4;try{return ao(98,t.bind(null,e,n,r,i))}finally{$s=o,$s===Vs&&co()}},D=function(){($s&(1|Gs|Ws))===Vs&&(Mu(),Zu())},F=function(t,e){var n=$s;$s|=2;try{return t(e)}finally{$s=n,$s===Vs&&co()}};var Oc={Events:[Vn,Hn,Gn,T,S,Qn,function(t){fe(t,Kn)},j,I,sn,de,Zu,{current:!1}]};(function(t){var e=t.findFiberByHostInstance;tc(i({},t,{overrideHookState:null,overrideProps:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:tt.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=ce(t),null===t?null:t.stateNode},findFiberByHostInstance:function(t){return e?e(t):null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null}))})({findFiberByHostInstance:Un,bundleType:0,version:"16.14.0",rendererPackageName:"react-dom"}),e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Oc,e.createPortal=Sc,e.findDOMNode=function(t){if(null==t)return null;if(1===t.nodeType)return t;var e=t._reactInternalFiber;if(void 0===e){if("function"===typeof t.render)throw Error(a(188));throw Error(a(268,Object.keys(t)))}return t=ce(e),t=null===t?null:t.stateNode,t},e.flushSync=function(t,e){if(($s&(Gs|Ws))!==Vs)throw Error(a(187));var n=$s;$s|=1;try{return ao(99,t.bind(null,e))}finally{$s=n,co()}},e.hydrate=function(t,e,n){if(!bc(e))throw Error(a(200));return wc(null,t,e,!0,n)},e.render=function(t,e,n){if(!bc(e))throw Error(a(200));return wc(null,t,e,!1,n)},e.unmountComponentAtNode=function(t){if(!bc(t))throw Error(a(40));return!!t._reactRootContainer&&(Ru((function(){wc(null,null,t,!1,(function(){t._reactRootContainer=null,t[zn]=null}))})),!0)},e.unstable_batchedUpdates=Pu,e.unstable_createPortal=function(t,e){return Sc(t,e,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)},e.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!bc(n))throw Error(a(200));if(null==t||void 0===t._reactInternalFiber)throw Error(a(38));return wc(t,e,n,!1,r)},e.version="16.14.0"},yoRg:function(t,e,n){var r=n("UTVS"),i=n("/GqU"),o=n("TWQb").indexOf,a=n("0BK2");t.exports=function(t,e){var n,s=i(t),u=0,c=[];for(n in s)!r(a,n)&&r(s,n)&&c.push(n);while(e.length>u)r(s,n=e[u++])&&(~o(c,n)||c.push(n));return c}},yq1k:function(t,e,n){"use strict";var r=n("I+eb"),i=n("TWQb").includes,o=n("RNIs"),a=n("rkAj"),s=a("indexOf",{ACCESSORS:!0,1:0});r({target:"Array",proto:!0,forced:!s},{includes:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),o("includes")},"z01/":function(t,e){function n(e){return t.exports=n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t.exports.__esModule=!0,t.exports["default"]=t.exports,n(e)}t.exports=n,t.exports.__esModule=!0,t.exports["default"]=t.exports},z4Hk:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BindingWhenSyntax=void 0;var r=n("406g"),i=n("RR/i"),o=function(){function t(t){this._binding=t}return t.prototype.when=function(t){return this._binding.constraint=t,new r.BindingOnSyntax(this._binding)},t.prototype.whenTargetNamed=function(t){return this._binding.constraint=i.namedConstraint(t),new r.BindingOnSyntax(this._binding)},t.prototype.whenTargetIsDefault=function(){return this._binding.constraint=function(t){var e=null!==t.target&&!t.target.isNamed()&&!t.target.isTagged();return e},new r.BindingOnSyntax(this._binding)},t.prototype.whenTargetTagged=function(t,e){return this._binding.constraint=i.taggedConstraint(t)(e),new r.BindingOnSyntax(this._binding)},t.prototype.whenInjectedInto=function(t){return this._binding.constraint=function(e){return i.typeConstraint(t)(e.parentRequest)},new r.BindingOnSyntax(this._binding)},t.prototype.whenParentNamed=function(t){return this._binding.constraint=function(e){return i.namedConstraint(t)(e.parentRequest)},new r.BindingOnSyntax(this._binding)},t.prototype.whenParentTagged=function(t,e){return this._binding.constraint=function(n){return i.taggedConstraint(t)(e)(n.parentRequest)},new r.BindingOnSyntax(this._binding)},t.prototype.whenAnyAncestorIs=function(t){return this._binding.constraint=function(e){return i.traverseAncerstors(e,i.typeConstraint(t))},new r.BindingOnSyntax(this._binding)},t.prototype.whenNoAncestorIs=function(t){return this._binding.constraint=function(e){return!i.traverseAncerstors(e,i.typeConstraint(t))},new r.BindingOnSyntax(this._binding)},t.prototype.whenAnyAncestorNamed=function(t){return this._binding.constraint=function(e){return i.traverseAncerstors(e,i.namedConstraint(t))},new r.BindingOnSyntax(this._binding)},t.prototype.whenNoAncestorNamed=function(t){return this._binding.constraint=function(e){return!i.traverseAncerstors(e,i.namedConstraint(t))},new r.BindingOnSyntax(this._binding)},t.prototype.whenAnyAncestorTagged=function(t,e){return this._binding.constraint=function(n){return i.traverseAncerstors(n,i.taggedConstraint(t)(e))},new r.BindingOnSyntax(this._binding)},t.prototype.whenNoAncestorTagged=function(t,e){return this._binding.constraint=function(n){return!i.traverseAncerstors(n,i.taggedConstraint(t)(e))},new r.BindingOnSyntax(this._binding)},t.prototype.whenAnyAncestorMatches=function(t){return this._binding.constraint=function(e){return i.traverseAncerstors(e,t)},new r.BindingOnSyntax(this._binding)},t.prototype.whenNoAncestorMatches=function(t){return this._binding.constraint=function(e){return!i.traverseAncerstors(e,t)},new r.BindingOnSyntax(this._binding)},t}();e.BindingWhenSyntax=o},z8NH:function(t,e,n){var r=n("dOgj");r("Float32",(function(t){return function(e,n,r){return t(this,e,n,r)}}))},zBJ4:function(t,e,n){var r=n("2oRo"),i=n("hh1v"),o=r.document,a=i(o)&&i(o.createElement);t.exports=function(t){return a?o.createElement(t):{}}},zKZe:function(t,e,n){var r=n("I+eb"),i=n("YNrV");r({target:"Object",stat:!0,forced:Object.assign!==i},{assign:i})},zLVn:function(t,e,n){"use strict";function r(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}n.d(e,"a",(function(){return r}))},zYLY:function(t,e,n){"use strict";function r(){var t=n("q1tI");return r=function(){return t},t}function i(t,e){return c(t)||u(t,e)||a(t,e)||o()}function o(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function a(t,e){if(t){if("string"===typeof t)return s(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(t,e):void 0}}function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function u(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o,a,s=[],u=!0,c=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);u=!0);}catch(l){c=!0,i=l}finally{try{if(!u&&null!=n["return"]&&(a=n["return"](),Object(a)!==a))return}finally{if(c)throw i}}return s}}function c(t){if(Array.isArray(t))return t}function l(t,e,n){var r,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if(o<e.length){var a=e[o],s=function(){return l(t,e,n,o+1)},u=a.match(/^([^:]+):?(.*)$/)||[],c=i(u,3),f=c[1],h=c[2];switch(f){case"autoplay":s();break;case"click":var p=h.match(/^(global\()?(.+?)\)?$/)||[],d=i(p,3),v=d[1],g=d[2],m=v?document:t;null===(r=m.querySelector(g))||void 0===r||r.click(),s();break;case"timeout":setTimeout(s,Number(h));break;case"capture":window.postMessage({type:"dumi:capture-element",value:h},"*"),s();break;default:console.warn("[dumi: motion] unknown motion '".concat(a,"', skip.")),s()}}else n()}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=void 0;var f=function(t,e){var n=(0,r().useState)(!1),o=i(n,2),a=o[0],s=o[1],u=(0,r().useCallback)((function(){a||(l(e,t,(function(){s(!1)})),s(!0))}),[t,e,a]);return(0,r().useEffect)((function(){"autoplay"===t[0]&&e&&u()}),[t,e]),[u,a]};e["default"]=f},zZ0H:function(t,e){function n(t){return t}t.exports=n},zfnd:function(t,e,n){var r=n("glrk"),i=n("hh1v"),o=n("8GlL");t.exports=function(t,e){if(r(t),i(e)&&e.constructor===t)return e;var n=o.f(t),a=n.resolve;return a(e),n.promise}},zk60:function(t,e,n){var r=n("2oRo"),i=n("kRJp");t.exports=function(t,e){try{i(r,t,e)}catch(n){r[t]=e}return e}},zlVK:function(t,e,n){"use strict";var r=n("QGke")["default"];Object.defineProperty(e,"__esModule",{value:!0});var i=n("LtsZ"),o=n("q1tI"),a=n("i8i4"),s=n("V/vL");function u(t){return t&&"object"===typeof t&&"default"in t?t:{default:t}}var c=u(o);function l(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function f(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?l(Object(n),!0).forEach((function(e){d(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function h(t,e,n,r,i,o,a){try{var s=t[o](a),u=s.value}catch(c){return void n(c)}s.done?e(u):Promise.resolve(u).then(r,i)}function p(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){h(o,r,i,a,s,"next",t)}function s(t){h(o,r,i,a,s,"throw",t)}a(void 0)}))}}function d(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function v(){return v=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},v.apply(this,arguments)}function g(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}function m(t,e){if(null==t)return{};var n,r,i=g(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function y(t,e){return _(t)||b(t,e)||x(t,e)||E()}function _(t){if(Array.isArray(t))return t}function b(t,e){var n=null==t?null:"undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(t);!(a=(r=n.next()).done);a=!0)if(o.push(r.value),e&&o.length===e)break}catch(u){s=!0,i=u}finally{try{a||null==n["return"]||n["return"]()}finally{if(s)throw i}}return o}}function x(t,e){if(t){if("string"===typeof t)return w(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?w(t,e):void 0}}function w(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function E(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function S(t,e){var n="undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=x(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n["return"]||n["return"]()}finally{if(s)throw o}}}}function O(t){return c["default"].createElement(i.__RouterContext.Consumer,null,(function(e){var n=t.location||e.location,r=t.computedMatch,o=f(f({},e),{},{location:n,match:r}),a=t.render;return c["default"].createElement(i.__RouterContext.Provider,{value:o},o.match?a(f(f({},t.layoutProps),o)):null)}))}var C=["children"];function T(t){return c["default"].createElement(i.__RouterContext.Consumer,null,(function(e){var n,r=t.children,a=m(t,C),s=t.location||e.location,u=null;return o.Children.forEach(r,(function(t){if(null===u&&o.isValidElement(t)){n=t;var r=t.props.path||t.props.from;u=r?i.matchPath(s.pathname,f(f({},t.props),{},{path:r})):e.match}})),u?o.cloneElement(n,{location:s,computedMatch:u,layoutProps:a}):null}))}var A=["component"];function k(t,e){t.component;var n=m(t,A),a=t.component;function s(s){var u=o.useState((function(){return window.g_initialProps})),l=y(u,2),h=l[0],d=l[1];return o.useEffect((function(){var o=function(){var o=p(r().mark((function o(){var u,c,l,h,p;return r().wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(c=a,!a.preload){r.next=6;break}return r.next=4,a.preload();case 4:c=r.sent,c=c["default"]||c;case 6:if(l=f(f({isServer:!1,match:null===s||void 0===s?void 0:s.match,history:null===s||void 0===s?void 0:s.history,route:t},e.getInitialPropsCtx||{}),n),!(null===(u=c)||void 0===u?void 0:u.getInitialProps)){r.next=15;break}return r.next=10,e.plugin.applyPlugins({key:"ssr.modifyGetInitialPropsCtx",type:i.ApplyPluginsType.modify,initialValue:l,async:!0});case 10:return h=r.sent,r.next=13,c.getInitialProps(h||l);case 13:p=r.sent,d(p);case 15:case"end":return r.stop()}}),o)})));return function(){return o.apply(this,arguments)}}();window.g_initialProps||o()}),[window.location.pathname,window.location.search]),c["default"].createElement(a,v({},s,h))}return s.wrapInitialPropsLoaded=!0,s.displayName="ComponentWithInitialPropsFetch",s}function M(t){var e=t.route,n=t.opts,r=t.props,i=R(f(f({},n),{},{routes:e.routes||[],rootRoutes:n.rootRoutes}),{location:r.location}),a=e.component,s=e.wrappers;if(a){var u=n.isServer?{}:window.g_initialProps,l=f(f(f(f({},r),n.extraProps),n.pageInitialProps||u),{},{route:e,routes:n.rootRoutes}),h=c["default"].createElement(a,l,i);if(s){var p=s.length-1;while(p>=0)h=o.createElement(s[p],l,h),p-=1}return h}return i}function P(t){var e,n,r,o=t.route,a=t.index,s=t.opts,u={key:o.key||a,exact:o.exact,strict:o.strict,sensitive:o.sensitive,path:o.path};return o.redirect?c["default"].createElement(i.Redirect,v({},u,{from:o.path,to:o.redirect})):(!s.ssrProps||s.isServer||(null===(e=o.component)||void 0===e?void 0:e.wrapInitialPropsLoaded)||!(null===(n=o.component)||void 0===n?void 0:n.getInitialProps)&&!(null===(r=o.component)||void 0===r?void 0:r.preload)||(o.component=k(o,s)),c["default"].createElement(O,v({},u,{render:function(t){return M({route:o,opts:s,props:t})}})))}function R(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.routes?c["default"].createElement(T,e,t.routes.map((function(e,n){return P({route:e,index:n,opts:f(f({},t),{},{rootRoutes:t.rootRoutes||t.routes})})}))):null}var j=["history"];function I(t){var e=t.history,n=m(t,j);return o.useEffect((function(){function r(e,r){var o=s.matchRoutes(t.routes,e.pathname);"undefined"!==typeof document&&void 0!==n.defaultTitle&&(document.title=o.length&&o[o.length-1].route.title||n.defaultTitle||""),t.plugin.applyPlugins({key:"onRouteChange",type:i.ApplyPluginsType.event,args:{routes:t.routes,matchedRoutes:o,location:e,action:r}})}return window.g_useSSR&&(window.g_initialProps=null),r(e.location,"POP"),e.listen(r)}),[e]),c["default"].createElement(i.Router,{history:e},R(n))}function L(t){return t.plugin.applyPlugins({type:i.ApplyPluginsType.modify,key:"rootContainer",initialValue:c["default"].createElement(I,{history:t.history,routes:t.routes,plugin:t.plugin,ssrProps:t.ssrProps,defaultTitle:t.defaultTitle}),args:{history:t.history,routes:t.routes,plugin:t.plugin}})}function N(t){return D.apply(this,arguments)}function D(){return D=p(r().mark((function t(e){var n,i,o,a,u,c,l,f,h=arguments;return r().wrap((function(t){while(1)switch(t.prev=t.next){case 0:n=h.length>1&&void 0!==h[1]?h[1]:window.location.pathname,i=s.matchRoutes(e,n),o=S(i),t.prev=3,o.s();case 5:if((a=o.n()).done){t.next=19;break}if(c=a.value,l=c.route,"string"===typeof l.component||!(null===(u=l.component)||void 0===u?void 0:u.preload)){t.next=13;break}return t.next=11,l.component.preload();case 11:f=t.sent,l.component=f["default"]||f;case 13:if(!l.routes){t.next=17;break}return t.next=16,N(l.routes,n);case 16:l.routes=t.sent;case 17:t.next=5;break;case 19:t.next=24;break;case 21:t.prev=21,t.t0=t["catch"](3),o.e(t.t0);case 24:return t.prev=24,o.f(),t.finish(24);case 27:return t.abrupt("return",e);case 28:case"end":return t.stop()}}),t,null,[[3,21,24,27]])}))),D.apply(this,arguments)}function F(t){var e=L(t);if(!t.rootElement)return e;var n="string"===typeof t.rootElement?document.getElementById(t.rootElement):t.rootElement,r=t.callback||function(){};window.g_useSSR?t.dynamicImport?N(t.routes).then((function(){a.hydrate(e,n,r)})):a.hydrate(e,n,r):a.render(e,n,r)}e.renderClient=F,e.renderRoutes=R},zqmC:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=e.LinkWrapper=void 0;var r=a(n("q1tI")),i=n("LtsZ"),o=["to"];function a(t){return t&&t.__esModule?t:{default:t}}function s(){return s=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},s.apply(this,arguments)}function u(t,e){if(null==t)return{};var n,r,i=c(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function c(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}var l=function(t){return function(e){var n=e.to,i=u(e,o),a=/^(\w+:)?\/\/|^(mailto|tel):/.test(n)||!n,c=r["default"].isValidElement(i.children);return r["default"].createElement(t,s({to:n||"",component:a?function(){return r["default"].createElement("a",{target:"_blank",rel:"noopener noreferrer",href:n},i.children,n&&!c&&r["default"].createElement("svg",{xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",x:"0px",y:"0px",viewBox:"0 0 100 100",width:"15",height:"15",className:"__dumi-default-external-link-icon"},r["default"].createElement("path",{fill:"currentColor",d:"M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"}),r["default"].createElement("polygon",{fill:"currentColor",points:"45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"})))}:void 0},i,a?{}:{onClick:function(){var t;window.scrollTo({top:0});for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];null===(t=i.onClick)||void 0===t||t.apply(this,n)}}))}};e.LinkWrapper=l;var f=l(i.Link);e["default"]=f},"zu+z":function(t,e,n){var r=n("I+eb"),i=n("qY7S");r({target:"Map",stat:!0},{from:i})},zvhG:function(t,e){function n(t,e,n,r){this.cx=3*t,this.bx=3*(n-t)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*e,this.by=3*(r-e)-this.cy,this.ay=1-this.cy-this.by,this.p1x=t,this.p1y=r,this.p2x=n,this.p2y=r}t.exports=n,n.prototype.sampleCurveX=function(t){return((this.ax*t+this.bx)*t+this.cx)*t},n.prototype.sampleCurveY=function(t){return((this.ay*t+this.by)*t+this.cy)*t},n.prototype.sampleCurveDerivativeX=function(t){return(3*this.ax*t+2*this.bx)*t+this.cx},n.prototype.solveCurveX=function(t,e){var n,r,i,o,a;for("undefined"===typeof e&&(e=1e-6),i=t,a=0;a<8;a++){if(o=this.sampleCurveX(i)-t,Math.abs(o)<e)return i;var s=this.sampleCurveDerivativeX(i);if(Math.abs(s)<1e-6)break;i-=o/s}if(n=0,r=1,i=t,i<n)return n;if(i>r)return r;while(n<r){if(o=this.sampleCurveX(i),Math.abs(o-t)<e)return i;t>o?n=i:r=i,i=.5*(r-n)+n}return i},n.prototype.solve=function(t,e){return this.sampleCurveY(this.solveCurveX(t,e))}},zxMA:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.QueryableString=void 0;var r=function(){function t(t){this.str=t}return t.prototype.startsWith=function(t){return 0===this.str.indexOf(t)},t.prototype.endsWith=function(t){var e="",n=t.split("").reverse().join("");return e=this.str.split("").reverse().join(""),this.startsWith.call({str:e},n)},t.prototype.contains=function(t){return-1!==this.str.indexOf(t)},t.prototype.equals=function(t){return this.str===t},t.prototype.value=function(){return this.str},t}();e.QueryableString=r}});